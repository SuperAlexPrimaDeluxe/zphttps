function C7(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var Qe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function EL(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Ud(t){var e=t.default;if(typeof e=="function"){var n=function(){return e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var r=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:function(){return t[i]}})}),n}var R={exports:{}},Zt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t1=Symbol.for("react.element"),S7=Symbol.for("react.portal"),b7=Symbol.for("react.fragment"),I7=Symbol.for("react.strict_mode"),T7=Symbol.for("react.profiler"),B7=Symbol.for("react.provider"),R7=Symbol.for("react.context"),P7=Symbol.for("react.forward_ref"),D7=Symbol.for("react.suspense"),F7=Symbol.for("react.memo"),L7=Symbol.for("react.lazy"),CB=Symbol.iterator;function k7(t){return t===null||typeof t!="object"?null:(t=CB&&t[CB]||t["@@iterator"],typeof t=="function"?t:null)}var wL={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ML=Object.assign,CL={};function Od(t,e,n){this.props=t,this.context=e,this.refs=CL,this.updater=n||wL}Od.prototype.isReactComponent={};Od.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Od.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function SL(){}SL.prototype=Od.prototype;function bS(t,e,n){this.props=t,this.context=e,this.refs=CL,this.updater=n||wL}var IS=bS.prototype=new SL;IS.constructor=bS;ML(IS,Od.prototype);IS.isPureReactComponent=!0;var SB=Array.isArray,bL=Object.prototype.hasOwnProperty,TS={current:null},IL={key:!0,ref:!0,__self:!0,__source:!0};function TL(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)bL.call(e,i)&&!IL.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:t1,type:t,key:s,ref:o,props:r,_owner:TS.current}}function U7(t,e){return{$$typeof:t1,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function BS(t){return typeof t=="object"&&t!==null&&t.$$typeof===t1}function O7(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var bB=/\/+/g;function C2(t,e){return typeof t=="object"&&t!==null&&t.key!=null?O7(""+t.key):e.toString(36)}function mv(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case t1:case S7:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+C2(o,0):i,SB(r)?(n="",t!=null&&(n=t.replace(bB,"$&/")+"/"),mv(r,e,n,"",function(c){return c})):r!=null&&(BS(r)&&(r=U7(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(bB,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",SB(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+C2(s,a);o+=mv(s,e,n,l,r)}else if(l=k7(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+C2(s,a++),o+=mv(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function bA(t,e,n){if(t==null)return t;var i=[],r=0;return mv(t,i,"","",function(s){return e.call(n,s,r++)}),i}function N7(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Br={current:null},Av={transition:null},G7={ReactCurrentDispatcher:Br,ReactCurrentBatchConfig:Av,ReactCurrentOwner:TS};Zt.Children={map:bA,forEach:function(t,e,n){bA(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return bA(t,function(){e++}),e},toArray:function(t){return bA(t,function(e){return e})||[]},only:function(t){if(!BS(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Zt.Component=Od;Zt.Fragment=b7;Zt.Profiler=T7;Zt.PureComponent=bS;Zt.StrictMode=I7;Zt.Suspense=D7;Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G7;Zt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=ML({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=TS.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)bL.call(e,l)&&!IL.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:t1,type:t.type,key:r,ref:s,props:i,_owner:o}};Zt.createContext=function(t){return t={$$typeof:R7,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:B7,_context:t},t.Consumer=t};Zt.createElement=TL;Zt.createFactory=function(t){var e=TL.bind(null,t);return e.type=t,e};Zt.createRef=function(){return{current:null}};Zt.forwardRef=function(t){return{$$typeof:P7,render:t}};Zt.isValidElement=BS;Zt.lazy=function(t){return{$$typeof:L7,_payload:{_status:-1,_result:t},_init:N7}};Zt.memo=function(t,e){return{$$typeof:F7,type:t,compare:e===void 0?null:e}};Zt.startTransition=function(t){var e=Av.transition;Av.transition={};try{t()}finally{Av.transition=e}};Zt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Zt.useCallback=function(t,e){return Br.current.useCallback(t,e)};Zt.useContext=function(t){return Br.current.useContext(t)};Zt.useDebugValue=function(){};Zt.useDeferredValue=function(t){return Br.current.useDeferredValue(t)};Zt.useEffect=function(t,e){return Br.current.useEffect(t,e)};Zt.useId=function(){return Br.current.useId()};Zt.useImperativeHandle=function(t,e,n){return Br.current.useImperativeHandle(t,e,n)};Zt.useInsertionEffect=function(t,e){return Br.current.useInsertionEffect(t,e)};Zt.useLayoutEffect=function(t,e){return Br.current.useLayoutEffect(t,e)};Zt.useMemo=function(t,e){return Br.current.useMemo(t,e)};Zt.useReducer=function(t,e,n){return Br.current.useReducer(t,e,n)};Zt.useRef=function(t){return Br.current.useRef(t)};Zt.useState=function(t){return Br.current.useState(t)};Zt.useSyncExternalStore=function(t,e,n){return Br.current.useSyncExternalStore(t,e,n)};Zt.useTransition=function(){return Br.current.useTransition()};Zt.version="18.2.0";(function(t){t.exports=Zt})(R);const gv=EL(R.exports);var nM={},BL={exports:{}},_s={},RL={exports:{}},PL={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,O){var z=G.length;G.push(O);e:for(;0<z;){var Q=z-1>>>1,H=G[Q];if(0<r(H,O))G[Q]=O,G[z]=H,z=Q;else break e}}function n(G){return G.length===0?null:G[0]}function i(G){if(G.length===0)return null;var O=G[0],z=G.pop();if(z!==O){G[0]=z;e:for(var Q=0,H=G.length,J=H>>>1;Q<J;){var j=2*(Q+1)-1,oe=G[j],K=j+1,ce=G[K];if(0>r(oe,z))K<H&&0>r(ce,oe)?(G[Q]=ce,G[K]=z,Q=K):(G[Q]=oe,G[j]=z,Q=j);else if(K<H&&0>r(ce,z))G[Q]=ce,G[K]=z,Q=K;else break e}}return O}function r(G,O){var z=G.sortIndex-O.sortIndex;return z!==0?z:G.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,f=3,d=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(G){for(var O=n(c);O!==null;){if(O.callback===null)i(c);else if(O.startTime<=G)i(c),O.sortIndex=O.expirationTime,e(l,O);else break;O=n(c)}}function E(G){if(m=!1,x(G),!p)if(n(l)!==null)p=!0,Y(w);else{var O=n(c);O!==null&&Z(E,O.startTime-G)}}function w(G,O){p=!1,m&&(m=!1,_(M),M=-1),d=!0;var z=f;try{for(x(O),h=n(l);h!==null&&(!(h.expirationTime>O)||G&&!L());){var Q=h.callback;if(typeof Q=="function"){h.callback=null,f=h.priorityLevel;var H=Q(h.expirationTime<=O);O=t.unstable_now(),typeof H=="function"?h.callback=H:h===n(l)&&i(l),x(O)}else i(l);h=n(l)}if(h!==null)var J=!0;else{var j=n(c);j!==null&&Z(E,j.startTime-O),J=!1}return J}finally{h=null,f=z,d=!1}}var S=!1,b=null,M=-1,T=5,B=-1;function L(){return!(t.unstable_now()-B<T)}function F(){if(b!==null){var G=t.unstable_now();B=G;var O=!0;try{O=b(!0,G)}finally{O?U():(S=!1,b=null)}}else S=!1}var U;if(typeof y=="function")U=function(){y(F)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,X=k.port2;k.port1.onmessage=F,U=function(){X.postMessage(null)}}else U=function(){g(F,0)};function Y(G){b=G,S||(S=!0,U())}function Z(G,O){M=g(function(){G(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){p||d||(p=!0,Y(w))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(G){switch(f){case 1:case 2:case 3:var O=3;break;default:O=f}var z=f;f=O;try{return G()}finally{f=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,O){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var z=f;f=G;try{return O()}finally{f=z}},t.unstable_scheduleCallback=function(G,O,z){var Q=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?Q+z:Q):z=Q,G){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=z+H,G={id:u++,callback:O,priorityLevel:G,startTime:z,expirationTime:H,sortIndex:-1},z>Q?(G.sortIndex=z,e(c,G),n(l)===null&&G===n(c)&&(m?(_(M),M=-1):m=!0,Z(E,z-Q))):(G.sortIndex=H,e(l,G),p||d||(p=!0,Y(w))),G},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(G){var O=f;return function(){var z=f;f=O;try{return G.apply(this,arguments)}finally{f=z}}}})(PL);(function(t){t.exports=PL})(RL);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DL=R.exports,ms=RL.exports;function Xe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var FL=new Set,im={};function uh(t,e){md(t,e),md(t+"Capture",e)}function md(t,e){for(im[t]=e,t=0;t<e.length;t++)FL.add(e[t])}var tl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),iM=Object.prototype.hasOwnProperty,z7=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,IB={},TB={};function Q7(t){return iM.call(TB,t)?!0:iM.call(IB,t)?!1:z7.test(t)?TB[t]=!0:(IB[t]=!0,!1)}function H7(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function V7(t,e,n,i){if(e===null||typeof e>"u"||H7(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Rr(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ji={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ji[t]=new Rr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ji[e]=new Rr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ji[t]=new Rr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ji[t]=new Rr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ji[t]=new Rr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ji[t]=new Rr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ji[t]=new Rr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ji[t]=new Rr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ji[t]=new Rr(t,5,!1,t.toLowerCase(),null,!1,!1)});var RS=/[\-:]([a-z])/g;function PS(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(RS,PS);Ji[e]=new Rr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(RS,PS);Ji[e]=new Rr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(RS,PS);Ji[e]=new Rr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ji[t]=new Rr(t,1,!1,t.toLowerCase(),null,!1,!1)});Ji.xlinkHref=new Rr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ji[t]=new Rr(t,1,!1,t.toLowerCase(),null,!0,!0)});function DS(t,e,n,i){var r=Ji.hasOwnProperty(e)?Ji[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(V7(e,n,r,i)&&(n=null),i||r===null?Q7(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var ul=DL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,IA=Symbol.for("react.element"),Pf=Symbol.for("react.portal"),Df=Symbol.for("react.fragment"),FS=Symbol.for("react.strict_mode"),rM=Symbol.for("react.profiler"),LL=Symbol.for("react.provider"),kL=Symbol.for("react.context"),LS=Symbol.for("react.forward_ref"),sM=Symbol.for("react.suspense"),oM=Symbol.for("react.suspense_list"),kS=Symbol.for("react.memo"),Ql=Symbol.for("react.lazy"),UL=Symbol.for("react.offscreen"),BB=Symbol.iterator;function k0(t){return t===null||typeof t!="object"?null:(t=BB&&t[BB]||t["@@iterator"],typeof t=="function"?t:null)}var Qn=Object.assign,S2;function xp(t){if(S2===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);S2=e&&e[1]||""}return`
`+S2+t}var b2=!1;function I2(t,e){if(!t||b2)return"";b2=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{b2=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?xp(t):""}function W7(t){switch(t.tag){case 5:return xp(t.type);case 16:return xp("Lazy");case 13:return xp("Suspense");case 19:return xp("SuspenseList");case 0:case 2:case 15:return t=I2(t.type,!1),t;case 11:return t=I2(t.type.render,!1),t;case 1:return t=I2(t.type,!0),t;default:return""}}function aM(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Df:return"Fragment";case Pf:return"Portal";case rM:return"Profiler";case FS:return"StrictMode";case sM:return"Suspense";case oM:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case kL:return(t.displayName||"Context")+".Consumer";case LL:return(t._context.displayName||"Context")+".Provider";case LS:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case kS:return e=t.displayName||null,e!==null?e:aM(t.type)||"Memo";case Ql:e=t._payload,t=t._init;try{return aM(t(e))}catch{}}return null}function j7(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return aM(e);case 8:return e===FS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ac(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function OL(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function X7(t){var e=OL(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function TA(t){t._valueTracker||(t._valueTracker=X7(t))}function NL(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=OL(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Kv(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function lM(t,e){var n=e.checked;return Qn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:t._wrapperState.initialChecked})}function RB(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Ac(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function GL(t,e){e=e.checked,e!=null&&DS(t,"checked",e,!1)}function cM(t,e){GL(t,e);var n=Ac(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?uM(t,e.type,n):e.hasOwnProperty("defaultValue")&&uM(t,e.type,Ac(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function PB(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function uM(t,e,n){(e!=="number"||Kv(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ep=Array.isArray;function $f(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Ac(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function hM(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Xe(91));return Qn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function DB(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Xe(92));if(Ep(n)){if(1<n.length)throw Error(Xe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ac(n)}}function zL(t,e){var n=Ac(e.value),i=Ac(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function FB(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function QL(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fM(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?QL(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var BA,HL=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(BA=BA||document.createElement("div"),BA.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=BA.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function rm(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Fp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Y7=["Webkit","ms","Moz","O"];Object.keys(Fp).forEach(function(t){Y7.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Fp[e]=Fp[t]})});function VL(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Fp.hasOwnProperty(t)&&Fp[t]?(""+e).trim():e+"px"}function WL(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=VL(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var q7=Qn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dM(t,e){if(e){if(q7[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Xe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Xe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Xe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Xe(62))}}function pM(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mM=null;function US(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var AM=null,ed=null,td=null;function LB(t){if(t=r1(t)){if(typeof AM!="function")throw Error(Xe(280));var e=t.stateNode;e&&(e=ty(e),AM(t.stateNode,t.type,e))}}function jL(t){ed?td?td.push(t):td=[t]:ed=t}function XL(){if(ed){var t=ed,e=td;if(td=ed=null,LB(t),e)for(t=0;t<e.length;t++)LB(e[t])}}function YL(t,e){return t(e)}function qL(){}var T2=!1;function JL(t,e,n){if(T2)return t(e,n);T2=!0;try{return YL(t,e,n)}finally{T2=!1,(ed!==null||td!==null)&&(qL(),XL())}}function sm(t,e){var n=t.stateNode;if(n===null)return null;var i=ty(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Xe(231,e,typeof n));return n}var gM=!1;if(tl)try{var U0={};Object.defineProperty(U0,"passive",{get:function(){gM=!0}}),window.addEventListener("test",U0,U0),window.removeEventListener("test",U0,U0)}catch{gM=!1}function J7(t,e,n,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Lp=!1,Zv=null,$v=!1,vM=null,K7={onError:function(t){Lp=!0,Zv=t}};function Z7(t,e,n,i,r,s,o,a,l){Lp=!1,Zv=null,J7.apply(K7,arguments)}function $7(t,e,n,i,r,s,o,a,l){if(Z7.apply(this,arguments),Lp){if(Lp){var c=Zv;Lp=!1,Zv=null}else throw Error(Xe(198));$v||($v=!0,vM=c)}}function hh(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function KL(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function kB(t){if(hh(t)!==t)throw Error(Xe(188))}function eQ(t){var e=t.alternate;if(!e){if(e=hh(t),e===null)throw Error(Xe(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return kB(r),t;if(s===i)return kB(r),e;s=s.sibling}throw Error(Xe(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(Xe(189))}}if(n.alternate!==i)throw Error(Xe(190))}if(n.tag!==3)throw Error(Xe(188));return n.stateNode.current===n?t:e}function ZL(t){return t=eQ(t),t!==null?$L(t):null}function $L(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=$L(t);if(e!==null)return e;t=t.sibling}return null}var e5=ms.unstable_scheduleCallback,UB=ms.unstable_cancelCallback,tQ=ms.unstable_shouldYield,nQ=ms.unstable_requestPaint,ti=ms.unstable_now,iQ=ms.unstable_getCurrentPriorityLevel,OS=ms.unstable_ImmediatePriority,t5=ms.unstable_UserBlockingPriority,e_=ms.unstable_NormalPriority,rQ=ms.unstable_LowPriority,n5=ms.unstable_IdlePriority,K_=null,sa=null;function sQ(t){if(sa&&typeof sa.onCommitFiberRoot=="function")try{sa.onCommitFiberRoot(K_,t,void 0,(t.current.flags&128)===128)}catch{}}var wo=Math.clz32?Math.clz32:lQ,oQ=Math.log,aQ=Math.LN2;function lQ(t){return t>>>=0,t===0?32:31-(oQ(t)/aQ|0)|0}var RA=64,PA=4194304;function wp(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function t_(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=wp(a):(s&=o,s!==0&&(i=wp(s)))}else o=n&~r,o!==0?i=wp(o):s!==0&&(i=wp(s));if(i===0)return 0;if(e!==0&&e!==i&&(e&r)===0&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if((i&4)!==0&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-wo(e),r=1<<n,i|=t[n],e&=~r;return i}function cQ(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uQ(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-wo(s),a=1<<o,l=r[o];l===-1?((a&n)===0||(a&i)!==0)&&(r[o]=cQ(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function _M(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function i5(){var t=RA;return RA<<=1,(RA&4194240)===0&&(RA=64),t}function B2(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function n1(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-wo(e),t[e]=n}function hQ(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-wo(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function NS(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-wo(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var gn=0;function r5(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var s5,GS,o5,a5,l5,yM=!1,DA=[],ic=null,rc=null,sc=null,om=new Map,am=new Map,jl=[],fQ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function OB(t,e){switch(t){case"focusin":case"focusout":ic=null;break;case"dragenter":case"dragleave":rc=null;break;case"mouseover":case"mouseout":sc=null;break;case"pointerover":case"pointerout":om.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":am.delete(e.pointerId)}}function O0(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=r1(e),e!==null&&GS(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function dQ(t,e,n,i,r){switch(e){case"focusin":return ic=O0(ic,t,e,n,i,r),!0;case"dragenter":return rc=O0(rc,t,e,n,i,r),!0;case"mouseover":return sc=O0(sc,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return om.set(s,O0(om.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,am.set(s,O0(am.get(s)||null,t,e,n,i,r)),!0}return!1}function c5(t){var e=xu(t.target);if(e!==null){var n=hh(e);if(n!==null){if(e=n.tag,e===13){if(e=KL(n),e!==null){t.blockedOn=e,l5(t.priority,function(){o5(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function vv(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=xM(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);mM=i,n.target.dispatchEvent(i),mM=null}else return e=r1(n),e!==null&&GS(e),t.blockedOn=n,!1;e.shift()}return!0}function NB(t,e,n){vv(t)&&n.delete(e)}function pQ(){yM=!1,ic!==null&&vv(ic)&&(ic=null),rc!==null&&vv(rc)&&(rc=null),sc!==null&&vv(sc)&&(sc=null),om.forEach(NB),am.forEach(NB)}function N0(t,e){t.blockedOn===e&&(t.blockedOn=null,yM||(yM=!0,ms.unstable_scheduleCallback(ms.unstable_NormalPriority,pQ)))}function lm(t){function e(r){return N0(r,t)}if(0<DA.length){N0(DA[0],t);for(var n=1;n<DA.length;n++){var i=DA[n];i.blockedOn===t&&(i.blockedOn=null)}}for(ic!==null&&N0(ic,t),rc!==null&&N0(rc,t),sc!==null&&N0(sc,t),om.forEach(e),am.forEach(e),n=0;n<jl.length;n++)i=jl[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<jl.length&&(n=jl[0],n.blockedOn===null);)c5(n),n.blockedOn===null&&jl.shift()}var nd=ul.ReactCurrentBatchConfig,n_=!0;function mQ(t,e,n,i){var r=gn,s=nd.transition;nd.transition=null;try{gn=1,zS(t,e,n,i)}finally{gn=r,nd.transition=s}}function AQ(t,e,n,i){var r=gn,s=nd.transition;nd.transition=null;try{gn=4,zS(t,e,n,i)}finally{gn=r,nd.transition=s}}function zS(t,e,n,i){if(n_){var r=xM(t,e,n,i);if(r===null)G2(t,e,i,i_,n),OB(t,i);else if(dQ(r,t,e,n,i))i.stopPropagation();else if(OB(t,i),e&4&&-1<fQ.indexOf(t)){for(;r!==null;){var s=r1(r);if(s!==null&&s5(s),s=xM(t,e,n,i),s===null&&G2(t,e,i,i_,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else G2(t,e,i,null,n)}}var i_=null;function xM(t,e,n,i){if(i_=null,t=US(i),t=xu(t),t!==null)if(e=hh(t),e===null)t=null;else if(n=e.tag,n===13){if(t=KL(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return i_=t,null}function u5(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(iQ()){case OS:return 1;case t5:return 4;case e_:case rQ:return 16;case n5:return 536870912;default:return 16}default:return 16}}var Yl=null,QS=null,_v=null;function h5(){if(_v)return _v;var t,e=QS,n=e.length,i,r="value"in Yl?Yl.value:Yl.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return _v=r.slice(t,1<i?1-i:void 0)}function yv(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function FA(){return!0}function GB(){return!1}function ys(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?FA:GB,this.isPropagationStopped=GB,this}return Qn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=FA)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=FA)},persist:function(){},isPersistent:FA}),e}var Nd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},HS=ys(Nd),i1=Qn({},Nd,{view:0,detail:0}),gQ=ys(i1),R2,P2,G0,Z_=Qn({},i1,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:VS,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==G0&&(G0&&t.type==="mousemove"?(R2=t.screenX-G0.screenX,P2=t.screenY-G0.screenY):P2=R2=0,G0=t),R2)},movementY:function(t){return"movementY"in t?t.movementY:P2}}),zB=ys(Z_),vQ=Qn({},Z_,{dataTransfer:0}),_Q=ys(vQ),yQ=Qn({},i1,{relatedTarget:0}),D2=ys(yQ),xQ=Qn({},Nd,{animationName:0,elapsedTime:0,pseudoElement:0}),EQ=ys(xQ),wQ=Qn({},Nd,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),MQ=ys(wQ),CQ=Qn({},Nd,{data:0}),QB=ys(CQ),SQ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bQ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},IQ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function TQ(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=IQ[t])?!!e[t]:!1}function VS(){return TQ}var BQ=Qn({},i1,{key:function(t){if(t.key){var e=SQ[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=yv(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?bQ[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:VS,charCode:function(t){return t.type==="keypress"?yv(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?yv(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),RQ=ys(BQ),PQ=Qn({},Z_,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),HB=ys(PQ),DQ=Qn({},i1,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:VS}),FQ=ys(DQ),LQ=Qn({},Nd,{propertyName:0,elapsedTime:0,pseudoElement:0}),kQ=ys(LQ),UQ=Qn({},Z_,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),OQ=ys(UQ),NQ=[9,13,27,32],WS=tl&&"CompositionEvent"in window,kp=null;tl&&"documentMode"in document&&(kp=document.documentMode);var GQ=tl&&"TextEvent"in window&&!kp,f5=tl&&(!WS||kp&&8<kp&&11>=kp),VB=String.fromCharCode(32),WB=!1;function d5(t,e){switch(t){case"keyup":return NQ.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function p5(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ff=!1;function zQ(t,e){switch(t){case"compositionend":return p5(e);case"keypress":return e.which!==32?null:(WB=!0,VB);case"textInput":return t=e.data,t===VB&&WB?null:t;default:return null}}function QQ(t,e){if(Ff)return t==="compositionend"||!WS&&d5(t,e)?(t=h5(),_v=QS=Yl=null,Ff=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return f5&&e.locale!=="ko"?null:e.data;default:return null}}var HQ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jB(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!HQ[t.type]:e==="textarea"}function m5(t,e,n,i){jL(i),e=r_(e,"onChange"),0<e.length&&(n=new HS("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Up=null,cm=null;function VQ(t){S5(t,0)}function $_(t){var e=Uf(t);if(NL(e))return t}function WQ(t,e){if(t==="change")return e}var A5=!1;if(tl){var F2;if(tl){var L2="oninput"in document;if(!L2){var XB=document.createElement("div");XB.setAttribute("oninput","return;"),L2=typeof XB.oninput=="function"}F2=L2}else F2=!1;A5=F2&&(!document.documentMode||9<document.documentMode)}function YB(){Up&&(Up.detachEvent("onpropertychange",g5),cm=Up=null)}function g5(t){if(t.propertyName==="value"&&$_(cm)){var e=[];m5(e,cm,t,US(t)),JL(VQ,e)}}function jQ(t,e,n){t==="focusin"?(YB(),Up=e,cm=n,Up.attachEvent("onpropertychange",g5)):t==="focusout"&&YB()}function XQ(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return $_(cm)}function YQ(t,e){if(t==="click")return $_(e)}function qQ(t,e){if(t==="input"||t==="change")return $_(e)}function JQ(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var bo=typeof Object.is=="function"?Object.is:JQ;function um(t,e){if(bo(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!iM.call(e,r)||!bo(t[r],e[r]))return!1}return!0}function qB(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function JB(t,e){var n=qB(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=qB(n)}}function v5(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?v5(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function _5(){for(var t=window,e=Kv();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Kv(t.document)}return e}function jS(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function KQ(t){var e=_5(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&v5(n.ownerDocument.documentElement,n)){if(i!==null&&jS(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=JB(n,s);var o=JB(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ZQ=tl&&"documentMode"in document&&11>=document.documentMode,Lf=null,EM=null,Op=null,wM=!1;function KB(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;wM||Lf==null||Lf!==Kv(i)||(i=Lf,"selectionStart"in i&&jS(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Op&&um(Op,i)||(Op=i,i=r_(EM,"onSelect"),0<i.length&&(e=new HS("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Lf)))}function LA(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var kf={animationend:LA("Animation","AnimationEnd"),animationiteration:LA("Animation","AnimationIteration"),animationstart:LA("Animation","AnimationStart"),transitionend:LA("Transition","TransitionEnd")},k2={},y5={};tl&&(y5=document.createElement("div").style,"AnimationEvent"in window||(delete kf.animationend.animation,delete kf.animationiteration.animation,delete kf.animationstart.animation),"TransitionEvent"in window||delete kf.transitionend.transition);function ey(t){if(k2[t])return k2[t];if(!kf[t])return t;var e=kf[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in y5)return k2[t]=e[n];return t}var x5=ey("animationend"),E5=ey("animationiteration"),w5=ey("animationstart"),M5=ey("transitionend"),C5=new Map,ZB="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sc(t,e){C5.set(t,e),uh(e,[t])}for(var U2=0;U2<ZB.length;U2++){var O2=ZB[U2],$Q=O2.toLowerCase(),eH=O2[0].toUpperCase()+O2.slice(1);Sc($Q,"on"+eH)}Sc(x5,"onAnimationEnd");Sc(E5,"onAnimationIteration");Sc(w5,"onAnimationStart");Sc("dblclick","onDoubleClick");Sc("focusin","onFocus");Sc("focusout","onBlur");Sc(M5,"onTransitionEnd");md("onMouseEnter",["mouseout","mouseover"]);md("onMouseLeave",["mouseout","mouseover"]);md("onPointerEnter",["pointerout","pointerover"]);md("onPointerLeave",["pointerout","pointerover"]);uh("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));uh("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));uh("onBeforeInput",["compositionend","keypress","textInput","paste"]);uh("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));uh("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));uh("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tH=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mp));function $B(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,$7(i,e,void 0,t),t.currentTarget=null}function S5(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;$B(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;$B(r,a,c),s=l}}}if($v)throw t=vM,$v=!1,vM=null,t}function Cn(t,e){var n=e[IM];n===void 0&&(n=e[IM]=new Set);var i=t+"__bubble";n.has(i)||(b5(e,t,2,!1),n.add(i))}function N2(t,e,n){var i=0;e&&(i|=4),b5(n,t,i,e)}var kA="_reactListening"+Math.random().toString(36).slice(2);function hm(t){if(!t[kA]){t[kA]=!0,FL.forEach(function(n){n!=="selectionchange"&&(tH.has(n)||N2(n,!1,t),N2(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[kA]||(e[kA]=!0,N2("selectionchange",!1,e))}}function b5(t,e,n,i){switch(u5(e)){case 1:var r=mQ;break;case 4:r=AQ;break;default:r=zS}n=r.bind(null,e,n,t),r=void 0,!gM||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function G2(t,e,n,i,r){var s=i;if((e&1)===0&&(e&2)===0&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=xu(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}JL(function(){var c=s,u=US(n),h=[];e:{var f=C5.get(t);if(f!==void 0){var d=HS,p=t;switch(t){case"keypress":if(yv(n)===0)break e;case"keydown":case"keyup":d=RQ;break;case"focusin":p="focus",d=D2;break;case"focusout":p="blur",d=D2;break;case"beforeblur":case"afterblur":d=D2;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=zB;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=_Q;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=FQ;break;case x5:case E5:case w5:d=EQ;break;case M5:d=kQ;break;case"scroll":d=gQ;break;case"wheel":d=OQ;break;case"copy":case"cut":case"paste":d=MQ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=HB}var m=(e&4)!==0,g=!m&&t==="scroll",_=m?f!==null?f+"Capture":null:f;m=[];for(var y=c,x;y!==null;){x=y;var E=x.stateNode;if(x.tag===5&&E!==null&&(x=E,_!==null&&(E=sm(y,_),E!=null&&m.push(fm(y,E,x)))),g)break;y=y.return}0<m.length&&(f=new d(f,p,null,n,u),h.push({event:f,listeners:m}))}}if((e&7)===0){e:{if(f=t==="mouseover"||t==="pointerover",d=t==="mouseout"||t==="pointerout",f&&n!==mM&&(p=n.relatedTarget||n.fromElement)&&(xu(p)||p[nl]))break e;if((d||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,d?(p=n.relatedTarget||n.toElement,d=c,p=p?xu(p):null,p!==null&&(g=hh(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(d=null,p=c),d!==p)){if(m=zB,E="onMouseLeave",_="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(m=HB,E="onPointerLeave",_="onPointerEnter",y="pointer"),g=d==null?f:Uf(d),x=p==null?f:Uf(p),f=new m(E,y+"leave",d,n,u),f.target=g,f.relatedTarget=x,E=null,xu(u)===c&&(m=new m(_,y+"enter",p,n,u),m.target=x,m.relatedTarget=g,E=m),g=E,d&&p)t:{for(m=d,_=p,y=0,x=m;x;x=jh(x))y++;for(x=0,E=_;E;E=jh(E))x++;for(;0<y-x;)m=jh(m),y--;for(;0<x-y;)_=jh(_),x--;for(;y--;){if(m===_||_!==null&&m===_.alternate)break t;m=jh(m),_=jh(_)}m=null}else m=null;d!==null&&eR(h,f,d,m,!1),p!==null&&g!==null&&eR(h,g,p,m,!0)}}e:{if(f=c?Uf(c):window,d=f.nodeName&&f.nodeName.toLowerCase(),d==="select"||d==="input"&&f.type==="file")var w=WQ;else if(jB(f))if(A5)w=qQ;else{w=XQ;var S=jQ}else(d=f.nodeName)&&d.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(w=YQ);if(w&&(w=w(t,c))){m5(h,w,n,u);break e}S&&S(t,f,c),t==="focusout"&&(S=f._wrapperState)&&S.controlled&&f.type==="number"&&uM(f,"number",f.value)}switch(S=c?Uf(c):window,t){case"focusin":(jB(S)||S.contentEditable==="true")&&(Lf=S,EM=c,Op=null);break;case"focusout":Op=EM=Lf=null;break;case"mousedown":wM=!0;break;case"contextmenu":case"mouseup":case"dragend":wM=!1,KB(h,n,u);break;case"selectionchange":if(ZQ)break;case"keydown":case"keyup":KB(h,n,u)}var b;if(WS)e:{switch(t){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else Ff?d5(t,n)&&(M="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(M="onCompositionStart");M&&(f5&&n.locale!=="ko"&&(Ff||M!=="onCompositionStart"?M==="onCompositionEnd"&&Ff&&(b=h5()):(Yl=u,QS="value"in Yl?Yl.value:Yl.textContent,Ff=!0)),S=r_(c,M),0<S.length&&(M=new QB(M,t,null,n,u),h.push({event:M,listeners:S}),b?M.data=b:(b=p5(n),b!==null&&(M.data=b)))),(b=GQ?zQ(t,n):QQ(t,n))&&(c=r_(c,"onBeforeInput"),0<c.length&&(u=new QB("onBeforeInput","beforeinput",null,n,u),h.push({event:u,listeners:c}),u.data=b))}S5(h,e)})}function fm(t,e,n){return{instance:t,listener:e,currentTarget:n}}function r_(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=sm(t,n),s!=null&&i.unshift(fm(t,s,r)),s=sm(t,e),s!=null&&i.push(fm(t,s,r))),t=t.return}return i}function jh(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function eR(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=sm(n,s),l!=null&&o.unshift(fm(n,l,a))):r||(l=sm(n,s),l!=null&&o.push(fm(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var nH=/\r\n?/g,iH=/\u0000|\uFFFD/g;function tR(t){return(typeof t=="string"?t:""+t).replace(nH,`
`).replace(iH,"")}function UA(t,e,n){if(e=tR(e),tR(t)!==e&&n)throw Error(Xe(425))}function s_(){}var MM=null,CM=null;function SM(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var bM=typeof setTimeout=="function"?setTimeout:void 0,rH=typeof clearTimeout=="function"?clearTimeout:void 0,nR=typeof Promise=="function"?Promise:void 0,sH=typeof queueMicrotask=="function"?queueMicrotask:typeof nR<"u"?function(t){return nR.resolve(null).then(t).catch(oH)}:bM;function oH(t){setTimeout(function(){throw t})}function z2(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),lm(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);lm(e)}function oc(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function iR(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Gd=Math.random().toString(36).slice(2),ta="__reactFiber$"+Gd,dm="__reactProps$"+Gd,nl="__reactContainer$"+Gd,IM="__reactEvents$"+Gd,aH="__reactListeners$"+Gd,lH="__reactHandles$"+Gd;function xu(t){var e=t[ta];if(e)return e;for(var n=t.parentNode;n;){if(e=n[nl]||n[ta]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=iR(t);t!==null;){if(n=t[ta])return n;t=iR(t)}return e}t=n,n=t.parentNode}return null}function r1(t){return t=t[ta]||t[nl],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Uf(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Xe(33))}function ty(t){return t[dm]||null}var TM=[],Of=-1;function bc(t){return{current:t}}function bn(t){0>Of||(t.current=TM[Of],TM[Of]=null,Of--)}function wn(t,e){Of++,TM[Of]=t.current,t.current=e}var gc={},fr=bc(gc),jr=bc(!1),Yu=gc;function Ad(t,e){var n=t.type.contextTypes;if(!n)return gc;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Xr(t){return t=t.childContextTypes,t!=null}function o_(){bn(jr),bn(fr)}function rR(t,e,n){if(fr.current!==gc)throw Error(Xe(168));wn(fr,e),wn(jr,n)}function I5(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(Xe(108,j7(t)||"Unknown",r));return Qn({},n,i)}function a_(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||gc,Yu=fr.current,wn(fr,t),wn(jr,jr.current),!0}function sR(t,e,n){var i=t.stateNode;if(!i)throw Error(Xe(169));n?(t=I5(t,e,Yu),i.__reactInternalMemoizedMergedChildContext=t,bn(jr),bn(fr),wn(fr,t)):bn(jr),wn(jr,n)}var Na=null,ny=!1,Q2=!1;function T5(t){Na===null?Na=[t]:Na.push(t)}function cH(t){ny=!0,T5(t)}function Ic(){if(!Q2&&Na!==null){Q2=!0;var t=0,e=gn;try{var n=Na;for(gn=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Na=null,ny=!1}catch(r){throw Na!==null&&(Na=Na.slice(t+1)),e5(OS,Ic),r}finally{gn=e,Q2=!1}}return null}var Nf=[],Gf=0,l_=null,c_=0,Ns=[],Gs=0,qu=null,Va=1,Wa="";function hu(t,e){Nf[Gf++]=c_,Nf[Gf++]=l_,l_=t,c_=e}function B5(t,e,n){Ns[Gs++]=Va,Ns[Gs++]=Wa,Ns[Gs++]=qu,qu=t;var i=Va;t=Wa;var r=32-wo(i)-1;i&=~(1<<r),n+=1;var s=32-wo(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Va=1<<32-wo(e)+r|n<<r|i,Wa=s+t}else Va=1<<s|n<<r|i,Wa=t}function XS(t){t.return!==null&&(hu(t,1),B5(t,1,0))}function YS(t){for(;t===l_;)l_=Nf[--Gf],Nf[Gf]=null,c_=Nf[--Gf],Nf[Gf]=null;for(;t===qu;)qu=Ns[--Gs],Ns[Gs]=null,Wa=Ns[--Gs],Ns[Gs]=null,Va=Ns[--Gs],Ns[Gs]=null}var fs=null,ls=null,Pn=!1,mo=null;function R5(t,e){var n=js(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function oR(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,fs=t,ls=oc(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,fs=t,ls=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=qu!==null?{id:Va,overflow:Wa}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=js(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,fs=t,ls=null,!0):!1;default:return!1}}function BM(t){return(t.mode&1)!==0&&(t.flags&128)===0}function RM(t){if(Pn){var e=ls;if(e){var n=e;if(!oR(t,e)){if(BM(t))throw Error(Xe(418));e=oc(n.nextSibling);var i=fs;e&&oR(t,e)?R5(i,n):(t.flags=t.flags&-4097|2,Pn=!1,fs=t)}}else{if(BM(t))throw Error(Xe(418));t.flags=t.flags&-4097|2,Pn=!1,fs=t}}}function aR(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;fs=t}function OA(t){if(t!==fs)return!1;if(!Pn)return aR(t),Pn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!SM(t.type,t.memoizedProps)),e&&(e=ls)){if(BM(t))throw P5(),Error(Xe(418));for(;e;)R5(t,e),e=oc(e.nextSibling)}if(aR(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Xe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ls=oc(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ls=null}}else ls=fs?oc(t.stateNode.nextSibling):null;return!0}function P5(){for(var t=ls;t;)t=oc(t.nextSibling)}function gd(){ls=fs=null,Pn=!1}function qS(t){mo===null?mo=[t]:mo.push(t)}var uH=ul.ReactCurrentBatchConfig;function fo(t,e){if(t&&t.defaultProps){e=Qn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var u_=bc(null),h_=null,zf=null,JS=null;function KS(){JS=zf=h_=null}function ZS(t){var e=u_.current;bn(u_),t._currentValue=e}function PM(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function id(t,e){h_=t,JS=zf=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&e)!==0&&(Vr=!0),t.firstContext=null)}function Ks(t){var e=t._currentValue;if(JS!==t)if(t={context:t,memoizedValue:e,next:null},zf===null){if(h_===null)throw Error(Xe(308));zf=t,h_.dependencies={lanes:0,firstContext:t}}else zf=zf.next=t;return e}var Eu=null;function $S(t){Eu===null?Eu=[t]:Eu.push(t)}function D5(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,$S(e)):(n.next=r.next,r.next=n),e.interleaved=n,il(t,i)}function il(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Hl=!1;function eb(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function F5(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ka(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ac(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,(rn&2)!==0){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,il(t,n)}return r=i.interleaved,r===null?(e.next=e,$S(i)):(e.next=r.next,r.next=e),i.interleaved=e,il(t,n)}function xv(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,NS(t,n)}}function lR(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function f_(t,e,n,i){var r=t.updateQueue;Hl=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var h=r.baseState;o=0,u=c=l=null,a=s;do{var f=a.lane,d=a.eventTime;if((i&f)===f){u!==null&&(u=u.next={eventTime:d,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,m=a;switch(f=e,d=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){h=p.call(d,h,f);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,f=typeof p=="function"?p.call(d,h,f):p,f==null)break e;h=Qn({},h,f);break e;case 2:Hl=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[a]:f.push(a))}else d={eventTime:d,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=d,l=h):u=u.next=d,o|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;f=a,a=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(1);if(u===null&&(l=h),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Ku|=o,t.lanes=o,t.memoizedState=h}}function cR(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(Xe(191,r));r.call(i)}}}var L5=new DL.Component().refs;function DM(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Qn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var iy={isMounted:function(t){return(t=t._reactInternals)?hh(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Ir(),r=cc(t),s=Ka(i,r);s.payload=e,n!=null&&(s.callback=n),e=ac(t,s,r),e!==null&&(Mo(e,t,r,i),xv(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Ir(),r=cc(t),s=Ka(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ac(t,s,r),e!==null&&(Mo(e,t,r,i),xv(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ir(),i=cc(t),r=Ka(n,i);r.tag=2,e!=null&&(r.callback=e),e=ac(t,r,i),e!==null&&(Mo(e,t,i,n),xv(e,t,i))}};function uR(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!um(n,i)||!um(r,s):!0}function k5(t,e,n){var i=!1,r=gc,s=e.contextType;return typeof s=="object"&&s!==null?s=Ks(s):(r=Xr(e)?Yu:fr.current,i=e.contextTypes,s=(i=i!=null)?Ad(t,r):gc),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=iy,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function hR(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&iy.enqueueReplaceState(e,e.state,null)}function FM(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs=L5,eb(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Ks(s):(s=Xr(e)?Yu:fr.current,r.context=Ad(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(DM(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&iy.enqueueReplaceState(r,r.state,null),f_(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function z0(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Xe(309));var i=n.stateNode}if(!i)throw Error(Xe(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;a===L5&&(a=r.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Xe(284));if(!n._owner)throw Error(Xe(290,t))}return t}function NA(t,e){throw t=Object.prototype.toString.call(e),Error(Xe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function fR(t){var e=t._init;return e(t._payload)}function U5(t){function e(_,y){if(t){var x=_.deletions;x===null?(_.deletions=[y],_.flags|=16):x.push(y)}}function n(_,y){if(!t)return null;for(;y!==null;)e(_,y),y=y.sibling;return null}function i(_,y){for(_=new Map;y!==null;)y.key!==null?_.set(y.key,y):_.set(y.index,y),y=y.sibling;return _}function r(_,y){return _=uc(_,y),_.index=0,_.sibling=null,_}function s(_,y,x){return _.index=x,t?(x=_.alternate,x!==null?(x=x.index,x<y?(_.flags|=2,y):x):(_.flags|=2,y)):(_.flags|=1048576,y)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,y,x,E){return y===null||y.tag!==6?(y=q2(x,_.mode,E),y.return=_,y):(y=r(y,x),y.return=_,y)}function l(_,y,x,E){var w=x.type;return w===Df?u(_,y,x.props.children,E,x.key):y!==null&&(y.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Ql&&fR(w)===y.type)?(E=r(y,x.props),E.ref=z0(_,y,x),E.return=_,E):(E=bv(x.type,x.key,x.props,null,_.mode,E),E.ref=z0(_,y,x),E.return=_,E)}function c(_,y,x,E){return y===null||y.tag!==4||y.stateNode.containerInfo!==x.containerInfo||y.stateNode.implementation!==x.implementation?(y=J2(x,_.mode,E),y.return=_,y):(y=r(y,x.children||[]),y.return=_,y)}function u(_,y,x,E,w){return y===null||y.tag!==7?(y=Fu(x,_.mode,E,w),y.return=_,y):(y=r(y,x),y.return=_,y)}function h(_,y,x){if(typeof y=="string"&&y!==""||typeof y=="number")return y=q2(""+y,_.mode,x),y.return=_,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case IA:return x=bv(y.type,y.key,y.props,null,_.mode,x),x.ref=z0(_,null,y),x.return=_,x;case Pf:return y=J2(y,_.mode,x),y.return=_,y;case Ql:var E=y._init;return h(_,E(y._payload),x)}if(Ep(y)||k0(y))return y=Fu(y,_.mode,x,null),y.return=_,y;NA(_,y)}return null}function f(_,y,x,E){var w=y!==null?y.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return w!==null?null:a(_,y,""+x,E);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case IA:return x.key===w?l(_,y,x,E):null;case Pf:return x.key===w?c(_,y,x,E):null;case Ql:return w=x._init,f(_,y,w(x._payload),E)}if(Ep(x)||k0(x))return w!==null?null:u(_,y,x,E,null);NA(_,x)}return null}function d(_,y,x,E,w){if(typeof E=="string"&&E!==""||typeof E=="number")return _=_.get(x)||null,a(y,_,""+E,w);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case IA:return _=_.get(E.key===null?x:E.key)||null,l(y,_,E,w);case Pf:return _=_.get(E.key===null?x:E.key)||null,c(y,_,E,w);case Ql:var S=E._init;return d(_,y,x,S(E._payload),w)}if(Ep(E)||k0(E))return _=_.get(x)||null,u(y,_,E,w,null);NA(y,E)}return null}function p(_,y,x,E){for(var w=null,S=null,b=y,M=y=0,T=null;b!==null&&M<x.length;M++){b.index>M?(T=b,b=null):T=b.sibling;var B=f(_,b,x[M],E);if(B===null){b===null&&(b=T);break}t&&b&&B.alternate===null&&e(_,b),y=s(B,y,M),S===null?w=B:S.sibling=B,S=B,b=T}if(M===x.length)return n(_,b),Pn&&hu(_,M),w;if(b===null){for(;M<x.length;M++)b=h(_,x[M],E),b!==null&&(y=s(b,y,M),S===null?w=b:S.sibling=b,S=b);return Pn&&hu(_,M),w}for(b=i(_,b);M<x.length;M++)T=d(b,_,M,x[M],E),T!==null&&(t&&T.alternate!==null&&b.delete(T.key===null?M:T.key),y=s(T,y,M),S===null?w=T:S.sibling=T,S=T);return t&&b.forEach(function(L){return e(_,L)}),Pn&&hu(_,M),w}function m(_,y,x,E){var w=k0(x);if(typeof w!="function")throw Error(Xe(150));if(x=w.call(x),x==null)throw Error(Xe(151));for(var S=w=null,b=y,M=y=0,T=null,B=x.next();b!==null&&!B.done;M++,B=x.next()){b.index>M?(T=b,b=null):T=b.sibling;var L=f(_,b,B.value,E);if(L===null){b===null&&(b=T);break}t&&b&&L.alternate===null&&e(_,b),y=s(L,y,M),S===null?w=L:S.sibling=L,S=L,b=T}if(B.done)return n(_,b),Pn&&hu(_,M),w;if(b===null){for(;!B.done;M++,B=x.next())B=h(_,B.value,E),B!==null&&(y=s(B,y,M),S===null?w=B:S.sibling=B,S=B);return Pn&&hu(_,M),w}for(b=i(_,b);!B.done;M++,B=x.next())B=d(b,_,M,B.value,E),B!==null&&(t&&B.alternate!==null&&b.delete(B.key===null?M:B.key),y=s(B,y,M),S===null?w=B:S.sibling=B,S=B);return t&&b.forEach(function(F){return e(_,F)}),Pn&&hu(_,M),w}function g(_,y,x,E){if(typeof x=="object"&&x!==null&&x.type===Df&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case IA:e:{for(var w=x.key,S=y;S!==null;){if(S.key===w){if(w=x.type,w===Df){if(S.tag===7){n(_,S.sibling),y=r(S,x.props.children),y.return=_,_=y;break e}}else if(S.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Ql&&fR(w)===S.type){n(_,S.sibling),y=r(S,x.props),y.ref=z0(_,S,x),y.return=_,_=y;break e}n(_,S);break}else e(_,S);S=S.sibling}x.type===Df?(y=Fu(x.props.children,_.mode,E,x.key),y.return=_,_=y):(E=bv(x.type,x.key,x.props,null,_.mode,E),E.ref=z0(_,y,x),E.return=_,_=E)}return o(_);case Pf:e:{for(S=x.key;y!==null;){if(y.key===S)if(y.tag===4&&y.stateNode.containerInfo===x.containerInfo&&y.stateNode.implementation===x.implementation){n(_,y.sibling),y=r(y,x.children||[]),y.return=_,_=y;break e}else{n(_,y);break}else e(_,y);y=y.sibling}y=J2(x,_.mode,E),y.return=_,_=y}return o(_);case Ql:return S=x._init,g(_,y,S(x._payload),E)}if(Ep(x))return p(_,y,x,E);if(k0(x))return m(_,y,x,E);NA(_,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,y!==null&&y.tag===6?(n(_,y.sibling),y=r(y,x),y.return=_,_=y):(n(_,y),y=q2(x,_.mode,E),y.return=_,_=y),o(_)):n(_,y)}return g}var vd=U5(!0),O5=U5(!1),s1={},oa=bc(s1),pm=bc(s1),mm=bc(s1);function wu(t){if(t===s1)throw Error(Xe(174));return t}function tb(t,e){switch(wn(mm,e),wn(pm,t),wn(oa,s1),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:fM(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=fM(e,t)}bn(oa),wn(oa,e)}function _d(){bn(oa),bn(pm),bn(mm)}function N5(t){wu(mm.current);var e=wu(oa.current),n=fM(e,t.type);e!==n&&(wn(pm,t),wn(oa,n))}function nb(t){pm.current===t&&(bn(oa),bn(pm))}var Un=bc(0);function d_(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var H2=[];function ib(){for(var t=0;t<H2.length;t++)H2[t]._workInProgressVersionPrimary=null;H2.length=0}var Ev=ul.ReactCurrentDispatcher,V2=ul.ReactCurrentBatchConfig,Ju=0,zn=null,vi=null,Pi=null,p_=!1,Np=!1,Am=0,hH=0;function rr(){throw Error(Xe(321))}function rb(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!bo(t[n],e[n]))return!1;return!0}function sb(t,e,n,i,r,s){if(Ju=s,zn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ev.current=t===null||t.memoizedState===null?mH:AH,t=n(i,r),Np){s=0;do{if(Np=!1,Am=0,25<=s)throw Error(Xe(301));s+=1,Pi=vi=null,e.updateQueue=null,Ev.current=gH,t=n(i,r)}while(Np)}if(Ev.current=m_,e=vi!==null&&vi.next!==null,Ju=0,Pi=vi=zn=null,p_=!1,e)throw Error(Xe(300));return t}function ob(){var t=Am!==0;return Am=0,t}function Yo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pi===null?zn.memoizedState=Pi=t:Pi=Pi.next=t,Pi}function Zs(){if(vi===null){var t=zn.alternate;t=t!==null?t.memoizedState:null}else t=vi.next;var e=Pi===null?zn.memoizedState:Pi.next;if(e!==null)Pi=e,vi=t;else{if(t===null)throw Error(Xe(310));vi=t,t={memoizedState:vi.memoizedState,baseState:vi.baseState,baseQueue:vi.baseQueue,queue:vi.queue,next:null},Pi===null?zn.memoizedState=Pi=t:Pi=Pi.next=t}return Pi}function gm(t,e){return typeof e=="function"?e(t):e}function W2(t){var e=Zs(),n=e.queue;if(n===null)throw Error(Xe(311));n.lastRenderedReducer=t;var i=vi,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Ju&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=i):l=l.next=h,zn.lanes|=u,Ku|=u}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,bo(i,e.memoizedState)||(Vr=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,zn.lanes|=s,Ku|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function j2(t){var e=Zs(),n=e.queue;if(n===null)throw Error(Xe(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);bo(s,e.memoizedState)||(Vr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function G5(){}function z5(t,e){var n=zn,i=Zs(),r=e(),s=!bo(i.memoizedState,r);if(s&&(i.memoizedState=r,Vr=!0),i=i.queue,ab(V5.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||Pi!==null&&Pi.memoizedState.tag&1){if(n.flags|=2048,vm(9,H5.bind(null,n,i,r,e),void 0,null),Fi===null)throw Error(Xe(349));(Ju&30)!==0||Q5(n,e,r)}return r}function Q5(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=zn.updateQueue,e===null?(e={lastEffect:null,stores:null},zn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function H5(t,e,n,i){e.value=n,e.getSnapshot=i,W5(e)&&j5(t)}function V5(t,e,n){return n(function(){W5(e)&&j5(t)})}function W5(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!bo(t,n)}catch{return!0}}function j5(t){var e=il(t,1);e!==null&&Mo(e,t,1,-1)}function dR(t){var e=Yo();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gm,lastRenderedState:t},e.queue=t,t=t.dispatch=pH.bind(null,zn,t),[e.memoizedState,t]}function vm(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=zn.updateQueue,e===null?(e={lastEffect:null,stores:null},zn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function X5(){return Zs().memoizedState}function wv(t,e,n,i){var r=Yo();zn.flags|=t,r.memoizedState=vm(1|e,n,void 0,i===void 0?null:i)}function ry(t,e,n,i){var r=Zs();i=i===void 0?null:i;var s=void 0;if(vi!==null){var o=vi.memoizedState;if(s=o.destroy,i!==null&&rb(i,o.deps)){r.memoizedState=vm(e,n,s,i);return}}zn.flags|=t,r.memoizedState=vm(1|e,n,s,i)}function pR(t,e){return wv(8390656,8,t,e)}function ab(t,e){return ry(2048,8,t,e)}function Y5(t,e){return ry(4,2,t,e)}function q5(t,e){return ry(4,4,t,e)}function J5(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function K5(t,e,n){return n=n!=null?n.concat([t]):null,ry(4,4,J5.bind(null,e,t),n)}function lb(){}function Z5(t,e){var n=Zs();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&rb(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function $5(t,e){var n=Zs();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&rb(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function ek(t,e,n){return(Ju&21)===0?(t.baseState&&(t.baseState=!1,Vr=!0),t.memoizedState=n):(bo(n,e)||(n=i5(),zn.lanes|=n,Ku|=n,t.baseState=!0),e)}function fH(t,e){var n=gn;gn=n!==0&&4>n?n:4,t(!0);var i=V2.transition;V2.transition={};try{t(!1),e()}finally{gn=n,V2.transition=i}}function tk(){return Zs().memoizedState}function dH(t,e,n){var i=cc(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},nk(t))ik(e,n);else if(n=D5(t,e,n,i),n!==null){var r=Ir();Mo(n,t,i,r),rk(n,e,i)}}function pH(t,e,n){var i=cc(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(nk(t))ik(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,bo(a,o)){var l=e.interleaved;l===null?(r.next=r,$S(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=D5(t,e,r,i),n!==null&&(r=Ir(),Mo(n,t,i,r),rk(n,e,i))}}function nk(t){var e=t.alternate;return t===zn||e!==null&&e===zn}function ik(t,e){Np=p_=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function rk(t,e,n){if((n&4194240)!==0){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,NS(t,n)}}var m_={readContext:Ks,useCallback:rr,useContext:rr,useEffect:rr,useImperativeHandle:rr,useInsertionEffect:rr,useLayoutEffect:rr,useMemo:rr,useReducer:rr,useRef:rr,useState:rr,useDebugValue:rr,useDeferredValue:rr,useTransition:rr,useMutableSource:rr,useSyncExternalStore:rr,useId:rr,unstable_isNewReconciler:!1},mH={readContext:Ks,useCallback:function(t,e){return Yo().memoizedState=[t,e===void 0?null:e],t},useContext:Ks,useEffect:pR,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,wv(4194308,4,J5.bind(null,e,t),n)},useLayoutEffect:function(t,e){return wv(4194308,4,t,e)},useInsertionEffect:function(t,e){return wv(4,2,t,e)},useMemo:function(t,e){var n=Yo();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Yo();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=dH.bind(null,zn,t),[i.memoizedState,t]},useRef:function(t){var e=Yo();return t={current:t},e.memoizedState=t},useState:dR,useDebugValue:lb,useDeferredValue:function(t){return Yo().memoizedState=t},useTransition:function(){var t=dR(!1),e=t[0];return t=fH.bind(null,t[1]),Yo().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=zn,r=Yo();if(Pn){if(n===void 0)throw Error(Xe(407));n=n()}else{if(n=e(),Fi===null)throw Error(Xe(349));(Ju&30)!==0||Q5(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,pR(V5.bind(null,i,s,t),[t]),i.flags|=2048,vm(9,H5.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=Yo(),e=Fi.identifierPrefix;if(Pn){var n=Wa,i=Va;n=(i&~(1<<32-wo(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Am++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=hH++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},AH={readContext:Ks,useCallback:Z5,useContext:Ks,useEffect:ab,useImperativeHandle:K5,useInsertionEffect:Y5,useLayoutEffect:q5,useMemo:$5,useReducer:W2,useRef:X5,useState:function(){return W2(gm)},useDebugValue:lb,useDeferredValue:function(t){var e=Zs();return ek(e,vi.memoizedState,t)},useTransition:function(){var t=W2(gm)[0],e=Zs().memoizedState;return[t,e]},useMutableSource:G5,useSyncExternalStore:z5,useId:tk,unstable_isNewReconciler:!1},gH={readContext:Ks,useCallback:Z5,useContext:Ks,useEffect:ab,useImperativeHandle:K5,useInsertionEffect:Y5,useLayoutEffect:q5,useMemo:$5,useReducer:j2,useRef:X5,useState:function(){return j2(gm)},useDebugValue:lb,useDeferredValue:function(t){var e=Zs();return vi===null?e.memoizedState=t:ek(e,vi.memoizedState,t)},useTransition:function(){var t=j2(gm)[0],e=Zs().memoizedState;return[t,e]},useMutableSource:G5,useSyncExternalStore:z5,useId:tk,unstable_isNewReconciler:!1};function yd(t,e){try{var n="",i=e;do n+=W7(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function X2(t,e,n){return{value:t,source:null,stack:n!=null?n:null,digest:e!=null?e:null}}function LM(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var vH=typeof WeakMap=="function"?WeakMap:Map;function sk(t,e,n){n=Ka(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){g_||(g_=!0,WM=i),LM(t,e)},n}function ok(t,e,n){n=Ka(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){LM(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){LM(t,e),typeof i!="function"&&(lc===null?lc=new Set([this]):lc.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function mR(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new vH;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=PH.bind(null,t,e,n),e.then(t,t))}function AR(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function gR(t,e,n,i,r){return(t.mode&1)===0?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ka(-1,1),e.tag=2,ac(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=r,t)}var _H=ul.ReactCurrentOwner,Vr=!1;function Cr(t,e,n,i){e.child=t===null?O5(e,null,n,i):vd(e,t.child,n,i)}function vR(t,e,n,i,r){n=n.render;var s=e.ref;return id(e,r),i=sb(t,e,n,i,s,r),n=ob(),t!==null&&!Vr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,rl(t,e,r)):(Pn&&n&&XS(e),e.flags|=1,Cr(t,e,i,r),e.child)}function _R(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!Ab(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,ak(t,e,s,i,r)):(t=bv(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,(t.lanes&r)===0){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:um,n(o,i)&&t.ref===e.ref)return rl(t,e,r)}return e.flags|=1,t=uc(s,i),t.ref=e.ref,t.return=e,e.child=t}function ak(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(um(s,i)&&t.ref===e.ref)if(Vr=!1,e.pendingProps=i=s,(t.lanes&r)!==0)(t.flags&131072)!==0&&(Vr=!0);else return e.lanes=t.lanes,rl(t,e,r)}return kM(t,e,n,i,r)}function lk(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if((e.mode&1)===0)e.memoizedState={baseLanes:0,cachePool:null,transitions:null},wn(Hf,as),as|=n;else{if((n&1073741824)===0)return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,wn(Hf,as),as|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,wn(Hf,as),as|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,wn(Hf,as),as|=i;return Cr(t,e,r,n),e.child}function ck(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function kM(t,e,n,i,r){var s=Xr(n)?Yu:fr.current;return s=Ad(e,s),id(e,r),n=sb(t,e,n,i,s,r),i=ob(),t!==null&&!Vr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,rl(t,e,r)):(Pn&&i&&XS(e),e.flags|=1,Cr(t,e,n,r),e.child)}function yR(t,e,n,i,r){if(Xr(n)){var s=!0;a_(e)}else s=!1;if(id(e,r),e.stateNode===null)Mv(t,e),k5(e,n,i),FM(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Ks(c):(c=Xr(n)?Yu:fr.current,c=Ad(e,c));var u=n.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&hR(e,o,i,c),Hl=!1;var f=e.memoizedState;o.state=f,f_(e,i,o,r),l=e.memoizedState,a!==i||f!==l||jr.current||Hl?(typeof u=="function"&&(DM(e,n,u,i),l=e.memoizedState),(a=Hl||uR(e,n,a,i,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,F5(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:fo(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Ks(l):(l=Xr(n)?Yu:fr.current,l=Ad(e,l));var d=n.getDerivedStateFromProps;(u=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&hR(e,o,i,l),Hl=!1,f=e.memoizedState,o.state=f,f_(e,i,o,r);var p=e.memoizedState;a!==h||f!==p||jr.current||Hl?(typeof d=="function"&&(DM(e,n,d,i),p=e.memoizedState),(c=Hl||uR(e,n,c,i,f,p,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=p),o.props=i,o.state=p,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return UM(t,e,n,i,s,r)}function UM(t,e,n,i,r,s){ck(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&sR(e,n,!1),rl(t,e,s);i=e.stateNode,_H.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=vd(e,t.child,null,s),e.child=vd(e,null,a,s)):Cr(t,e,a,s),e.memoizedState=i.state,r&&sR(e,n,!0),e.child}function uk(t){var e=t.stateNode;e.pendingContext?rR(t,e.pendingContext,e.pendingContext!==e.context):e.context&&rR(t,e.context,!1),tb(t,e.containerInfo)}function xR(t,e,n,i,r){return gd(),qS(r),e.flags|=256,Cr(t,e,n,i),e.child}var OM={dehydrated:null,treeContext:null,retryLane:0};function NM(t){return{baseLanes:t,cachePool:null,transitions:null}}function hk(t,e,n){var i=e.pendingProps,r=Un.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),wn(Un,r&1),t===null)return RM(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((e.mode&1)===0?e.lanes=1:t.data==="$!"?e.lanes=8:e.lanes=1073741824,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},(i&1)===0&&s!==null?(s.childLanes=0,s.pendingProps=o):s=ay(o,i,0,null),t=Fu(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=NM(n),e.memoizedState=OM,t):cb(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return yH(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return(o&1)===0&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=uc(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=uc(a,s):(s=Fu(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?NM(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=OM,i}return s=t.child,t=s.sibling,i=uc(s,{mode:"visible",children:i.children}),(e.mode&1)===0&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function cb(t,e){return e=ay({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function GA(t,e,n,i){return i!==null&&qS(i),vd(e,t.child,null,n),t=cb(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function yH(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=X2(Error(Xe(422))),GA(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=ay({mode:"visible",children:i.children},r,0,null),s=Fu(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,(e.mode&1)!==0&&vd(e,t.child,null,o),e.child.memoizedState=NM(o),e.memoizedState=OM,s);if((e.mode&1)===0)return GA(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(Xe(419)),i=X2(s,i,void 0),GA(t,e,o,i)}if(a=(o&t.childLanes)!==0,Vr||a){if(i=Fi,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=(r&(i.suspendedLanes|o))!==0?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,il(t,r),Mo(i,t,r,-1))}return mb(),i=X2(Error(Xe(421))),GA(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=DH.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,ls=oc(r.nextSibling),fs=e,Pn=!0,mo=null,t!==null&&(Ns[Gs++]=Va,Ns[Gs++]=Wa,Ns[Gs++]=qu,Va=t.id,Wa=t.overflow,qu=e),e=cb(e,i.children),e.flags|=4096,e)}function ER(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),PM(t.return,e,n)}function Y2(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function fk(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Cr(t,e,i.children,n),i=Un.current,(i&2)!==0)i=i&1|2,e.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ER(t,n,e);else if(t.tag===19)ER(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(wn(Un,i),(e.mode&1)===0)e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&d_(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Y2(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&d_(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Y2(e,!0,n,null,s);break;case"together":Y2(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Mv(t,e){(e.mode&1)===0&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function rl(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ku|=e.lanes,(n&e.childLanes)===0)return null;if(t!==null&&e.child!==t.child)throw Error(Xe(153));if(e.child!==null){for(t=e.child,n=uc(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=uc(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function xH(t,e,n){switch(e.tag){case 3:uk(e),gd();break;case 5:N5(e);break;case 1:Xr(e.type)&&a_(e);break;case 4:tb(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;wn(u_,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(wn(Un,Un.current&1),e.flags|=128,null):(n&e.child.childLanes)!==0?hk(t,e,n):(wn(Un,Un.current&1),t=rl(t,e,n),t!==null?t.sibling:null);wn(Un,Un.current&1);break;case 19:if(i=(n&e.childLanes)!==0,(t.flags&128)!==0){if(i)return fk(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),wn(Un,Un.current),i)break;return null;case 22:case 23:return e.lanes=0,lk(t,e,n)}return rl(t,e,n)}var dk,GM,pk,mk;dk=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};GM=function(){};pk=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,wu(oa.current);var s=null;switch(n){case"input":r=lM(t,r),i=lM(t,i),s=[];break;case"select":r=Qn({},r,{value:void 0}),i=Qn({},i,{value:void 0}),s=[];break;case"textarea":r=hM(t,r),i=hM(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=s_)}dM(n,i);var o;n=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(im.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(im.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Cn("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};mk=function(t,e,n,i){n!==i&&(e.flags|=4)};function Q0(t,e){if(!Pn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function sr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function EH(t,e,n){var i=e.pendingProps;switch(YS(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sr(e),null;case 1:return Xr(e.type)&&o_(),sr(e),null;case 3:return i=e.stateNode,_d(),bn(jr),bn(fr),ib(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(OA(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,mo!==null&&(YM(mo),mo=null))),GM(t,e),sr(e),null;case 5:nb(e);var r=wu(mm.current);if(n=e.type,t!==null&&e.stateNode!=null)pk(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Xe(166));return sr(e),null}if(t=wu(oa.current),OA(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[ta]=e,i[dm]=s,t=(e.mode&1)!==0,n){case"dialog":Cn("cancel",i),Cn("close",i);break;case"iframe":case"object":case"embed":Cn("load",i);break;case"video":case"audio":for(r=0;r<Mp.length;r++)Cn(Mp[r],i);break;case"source":Cn("error",i);break;case"img":case"image":case"link":Cn("error",i),Cn("load",i);break;case"details":Cn("toggle",i);break;case"input":RB(i,s),Cn("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Cn("invalid",i);break;case"textarea":DB(i,s),Cn("invalid",i)}dM(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&UA(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&UA(i.textContent,a,t),r=["children",""+a]):im.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Cn("scroll",i)}switch(n){case"input":TA(i),PB(i,s,!0);break;case"textarea":TA(i),FB(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=s_)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=QL(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[ta]=e,t[dm]=i,dk(t,e,!1,!1),e.stateNode=t;e:{switch(o=pM(n,i),n){case"dialog":Cn("cancel",t),Cn("close",t),r=i;break;case"iframe":case"object":case"embed":Cn("load",t),r=i;break;case"video":case"audio":for(r=0;r<Mp.length;r++)Cn(Mp[r],t);r=i;break;case"source":Cn("error",t),r=i;break;case"img":case"image":case"link":Cn("error",t),Cn("load",t),r=i;break;case"details":Cn("toggle",t),r=i;break;case"input":RB(t,i),r=lM(t,i),Cn("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Qn({},i,{value:void 0}),Cn("invalid",t);break;case"textarea":DB(t,i),r=hM(t,i),Cn("invalid",t);break;default:r=i}dM(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?WL(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&HL(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&rm(t,l):typeof l=="number"&&rm(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(im.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Cn("scroll",t):l!=null&&DS(t,s,l,o))}switch(n){case"input":TA(t),PB(t,i,!1);break;case"textarea":TA(t),FB(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Ac(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?$f(t,!!i.multiple,s,!1):i.defaultValue!=null&&$f(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=s_)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return sr(e),null;case 6:if(t&&e.stateNode!=null)mk(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Xe(166));if(n=wu(mm.current),wu(oa.current),OA(e)){if(i=e.stateNode,n=e.memoizedProps,i[ta]=e,(s=i.nodeValue!==n)&&(t=fs,t!==null))switch(t.tag){case 3:UA(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&UA(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[ta]=e,e.stateNode=i}return sr(e),null;case 13:if(bn(Un),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Pn&&ls!==null&&(e.mode&1)!==0&&(e.flags&128)===0)P5(),gd(),e.flags|=98560,s=!1;else if(s=OA(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(Xe(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Xe(317));s[ta]=e}else gd(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;sr(e),s=!1}else mo!==null&&(YM(mo),mo=null),s=!0;if(!s)return e.flags&65536?e:null}return(e.flags&128)!==0?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,(e.mode&1)!==0&&(t===null||(Un.current&1)!==0?_i===0&&(_i=3):mb())),e.updateQueue!==null&&(e.flags|=4),sr(e),null);case 4:return _d(),GM(t,e),t===null&&hm(e.stateNode.containerInfo),sr(e),null;case 10:return ZS(e.type._context),sr(e),null;case 17:return Xr(e.type)&&o_(),sr(e),null;case 19:if(bn(Un),s=e.memoizedState,s===null)return sr(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)Q0(s,!1);else{if(_i!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(o=d_(t),o!==null){for(e.flags|=128,Q0(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return wn(Un,Un.current&1|2),e.child}t=t.sibling}s.tail!==null&&ti()>xd&&(e.flags|=128,i=!0,Q0(s,!1),e.lanes=4194304)}else{if(!i)if(t=d_(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Q0(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Pn)return sr(e),null}else 2*ti()-s.renderingStartTime>xd&&n!==1073741824&&(e.flags|=128,i=!0,Q0(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ti(),e.sibling=null,n=Un.current,wn(Un,i?n&1|2:n&1),e):(sr(e),null);case 22:case 23:return pb(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&(e.mode&1)!==0?(as&1073741824)!==0&&(sr(e),e.subtreeFlags&6&&(e.flags|=8192)):sr(e),null;case 24:return null;case 25:return null}throw Error(Xe(156,e.tag))}function wH(t,e){switch(YS(e),e.tag){case 1:return Xr(e.type)&&o_(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return _d(),bn(jr),bn(fr),ib(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 5:return nb(e),null;case 13:if(bn(Un),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Xe(340));gd()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return bn(Un),null;case 4:return _d(),null;case 10:return ZS(e.type._context),null;case 22:case 23:return pb(),null;case 24:return null;default:return null}}var zA=!1,cr=!1,MH=typeof WeakSet=="function"?WeakSet:Set,st=null;function Qf(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Xn(t,e,i)}else n.current=null}function zM(t,e,n){try{n()}catch(i){Xn(t,e,i)}}var wR=!1;function CH(t,e){if(MM=n_,t=_5(),jS(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,h=t,f=null;t:for(;;){for(var d;h!==n||r!==0&&h.nodeType!==3||(a=o+r),h!==s||i!==0&&h.nodeType!==3||(l=o+i),h.nodeType===3&&(o+=h.nodeValue.length),(d=h.firstChild)!==null;)f=h,h=d;for(;;){if(h===t)break t;if(f===n&&++c===r&&(a=o),f===s&&++u===i&&(l=o),(d=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=d}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(CM={focusedElem:t,selectionRange:n},n_=!1,st=e;st!==null;)if(e=st,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,st=t;else for(;st!==null;){e=st;try{var p=e.alternate;if((e.flags&1024)!==0)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,_=e.stateNode,y=_.getSnapshotBeforeUpdate(e.elementType===e.type?m:fo(e.type,m),g);_.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Xe(163))}}catch(E){Xn(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,st=t;break}st=e.return}return p=wR,wR=!1,p}function Gp(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&zM(e,n,s)}r=r.next}while(r!==i)}}function sy(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function QM(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Ak(t){var e=t.alternate;e!==null&&(t.alternate=null,Ak(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ta],delete e[dm],delete e[IM],delete e[aH],delete e[lH])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function gk(t){return t.tag===5||t.tag===3||t.tag===4}function MR(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||gk(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function HM(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=s_));else if(i!==4&&(t=t.child,t!==null))for(HM(t,e,n),t=t.sibling;t!==null;)HM(t,e,n),t=t.sibling}function VM(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(VM(t,e,n),t=t.sibling;t!==null;)VM(t,e,n),t=t.sibling}var Wi=null,po=!1;function Sl(t,e,n){for(n=n.child;n!==null;)vk(t,e,n),n=n.sibling}function vk(t,e,n){if(sa&&typeof sa.onCommitFiberUnmount=="function")try{sa.onCommitFiberUnmount(K_,n)}catch{}switch(n.tag){case 5:cr||Qf(n,e);case 6:var i=Wi,r=po;Wi=null,Sl(t,e,n),Wi=i,po=r,Wi!==null&&(po?(t=Wi,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Wi.removeChild(n.stateNode));break;case 18:Wi!==null&&(po?(t=Wi,n=n.stateNode,t.nodeType===8?z2(t.parentNode,n):t.nodeType===1&&z2(t,n),lm(t)):z2(Wi,n.stateNode));break;case 4:i=Wi,r=po,Wi=n.stateNode.containerInfo,po=!0,Sl(t,e,n),Wi=i,po=r;break;case 0:case 11:case 14:case 15:if(!cr&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&((s&2)!==0||(s&4)!==0)&&zM(n,e,o),r=r.next}while(r!==i)}Sl(t,e,n);break;case 1:if(!cr&&(Qf(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Xn(n,e,a)}Sl(t,e,n);break;case 21:Sl(t,e,n);break;case 22:n.mode&1?(cr=(i=cr)||n.memoizedState!==null,Sl(t,e,n),cr=i):Sl(t,e,n);break;default:Sl(t,e,n)}}function CR(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new MH),e.forEach(function(i){var r=FH.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function so(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Wi=a.stateNode,po=!1;break e;case 3:Wi=a.stateNode.containerInfo,po=!0;break e;case 4:Wi=a.stateNode.containerInfo,po=!0;break e}a=a.return}if(Wi===null)throw Error(Xe(160));vk(s,o,r),Wi=null,po=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){Xn(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)_k(e,t),e=e.sibling}function _k(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(so(e,t),zo(t),i&4){try{Gp(3,t,t.return),sy(3,t)}catch(m){Xn(t,t.return,m)}try{Gp(5,t,t.return)}catch(m){Xn(t,t.return,m)}}break;case 1:so(e,t),zo(t),i&512&&n!==null&&Qf(n,n.return);break;case 5:if(so(e,t),zo(t),i&512&&n!==null&&Qf(n,n.return),t.flags&32){var r=t.stateNode;try{rm(r,"")}catch(m){Xn(t,t.return,m)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&GL(r,s),pM(a,o);var c=pM(a,s);for(o=0;o<l.length;o+=2){var u=l[o],h=l[o+1];u==="style"?WL(r,h):u==="dangerouslySetInnerHTML"?HL(r,h):u==="children"?rm(r,h):DS(r,u,h,c)}switch(a){case"input":cM(r,s);break;case"textarea":zL(r,s);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var d=s.value;d!=null?$f(r,!!s.multiple,d,!1):f!==!!s.multiple&&(s.defaultValue!=null?$f(r,!!s.multiple,s.defaultValue,!0):$f(r,!!s.multiple,s.multiple?[]:"",!1))}r[dm]=s}catch(m){Xn(t,t.return,m)}}break;case 6:if(so(e,t),zo(t),i&4){if(t.stateNode===null)throw Error(Xe(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(m){Xn(t,t.return,m)}}break;case 3:if(so(e,t),zo(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{lm(e.containerInfo)}catch(m){Xn(t,t.return,m)}break;case 4:so(e,t),zo(t);break;case 13:so(e,t),zo(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(fb=ti())),i&4&&CR(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(cr=(c=cr)||u,so(e,t),cr=c):so(e,t),zo(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&(t.mode&1)!==0)for(st=t,u=t.child;u!==null;){for(h=st=u;st!==null;){switch(f=st,d=f.child,f.tag){case 0:case 11:case 14:case 15:Gp(4,f,f.return);break;case 1:Qf(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){i=f,n=f.return;try{e=i,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){Xn(i,n,m)}}break;case 5:Qf(f,f.return);break;case 22:if(f.memoizedState!==null){bR(h);continue}}d!==null?(d.return=f,st=d):bR(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{r=h.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=VL("display",o))}catch(m){Xn(t,t.return,m)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(m){Xn(t,t.return,m)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:so(e,t),zo(t),i&4&&CR(t);break;case 21:break;default:so(e,t),zo(t)}}function zo(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(gk(n)){var i=n;break e}n=n.return}throw Error(Xe(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(rm(r,""),i.flags&=-33);var s=MR(t);VM(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=MR(t);HM(t,a,o);break;default:throw Error(Xe(161))}}catch(l){Xn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function SH(t,e,n){st=t,yk(t)}function yk(t,e,n){for(var i=(t.mode&1)!==0;st!==null;){var r=st,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||zA;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||cr;a=zA;var c=cr;if(zA=o,(cr=l)&&!c)for(st=r;st!==null;)o=st,l=o.child,o.tag===22&&o.memoizedState!==null?IR(r):l!==null?(l.return=o,st=l):IR(r);for(;s!==null;)st=s,yk(s),s=s.sibling;st=r,zA=a,cr=c}SR(t)}else(r.subtreeFlags&8772)!==0&&s!==null?(s.return=r,st=s):SR(t)}}function SR(t){for(;st!==null;){var e=st;if((e.flags&8772)!==0){var n=e.alternate;try{if((e.flags&8772)!==0)switch(e.tag){case 0:case 11:case 15:cr||sy(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!cr)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:fo(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&cR(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}cR(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&lm(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Xe(163))}cr||e.flags&512&&QM(e)}catch(f){Xn(e,e.return,f)}}if(e===t){st=null;break}if(n=e.sibling,n!==null){n.return=e.return,st=n;break}st=e.return}}function bR(t){for(;st!==null;){var e=st;if(e===t){st=null;break}var n=e.sibling;if(n!==null){n.return=e.return,st=n;break}st=e.return}}function IR(t){for(;st!==null;){var e=st;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{sy(4,e)}catch(l){Xn(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){Xn(e,r,l)}}var s=e.return;try{QM(e)}catch(l){Xn(e,s,l)}break;case 5:var o=e.return;try{QM(e)}catch(l){Xn(e,o,l)}}}catch(l){Xn(e,e.return,l)}if(e===t){st=null;break}var a=e.sibling;if(a!==null){a.return=e.return,st=a;break}st=e.return}}var bH=Math.ceil,A_=ul.ReactCurrentDispatcher,ub=ul.ReactCurrentOwner,Js=ul.ReactCurrentBatchConfig,rn=0,Fi=null,hi=null,qi=0,as=0,Hf=bc(0),_i=0,_m=null,Ku=0,oy=0,hb=0,zp=null,Qr=null,fb=0,xd=1/0,La=null,g_=!1,WM=null,lc=null,QA=!1,ql=null,v_=0,Qp=0,jM=null,Cv=-1,Sv=0;function Ir(){return(rn&6)!==0?ti():Cv!==-1?Cv:Cv=ti()}function cc(t){return(t.mode&1)===0?1:(rn&2)!==0&&qi!==0?qi&-qi:uH.transition!==null?(Sv===0&&(Sv=i5()),Sv):(t=gn,t!==0||(t=window.event,t=t===void 0?16:u5(t.type)),t)}function Mo(t,e,n,i){if(50<Qp)throw Qp=0,jM=null,Error(Xe(185));n1(t,n,i),((rn&2)===0||t!==Fi)&&(t===Fi&&((rn&2)===0&&(oy|=n),_i===4&&Xl(t,qi)),Yr(t,i),n===1&&rn===0&&(e.mode&1)===0&&(xd=ti()+500,ny&&Ic()))}function Yr(t,e){var n=t.callbackNode;uQ(t,e);var i=t_(t,t===Fi?qi:0);if(i===0)n!==null&&UB(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&UB(n),e===1)t.tag===0?cH(TR.bind(null,t)):T5(TR.bind(null,t)),sH(function(){(rn&6)===0&&Ic()}),n=null;else{switch(r5(i)){case 1:n=OS;break;case 4:n=t5;break;case 16:n=e_;break;case 536870912:n=n5;break;default:n=e_}n=Ik(n,xk.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function xk(t,e){if(Cv=-1,Sv=0,(rn&6)!==0)throw Error(Xe(327));var n=t.callbackNode;if(rd()&&t.callbackNode!==n)return null;var i=t_(t,t===Fi?qi:0);if(i===0)return null;if((i&30)!==0||(i&t.expiredLanes)!==0||e)e=__(t,i);else{e=i;var r=rn;rn|=2;var s=wk();(Fi!==t||qi!==e)&&(La=null,xd=ti()+500,Du(t,e));do try{BH();break}catch(a){Ek(t,a)}while(1);KS(),A_.current=s,rn=r,hi!==null?e=0:(Fi=null,qi=0,e=_i)}if(e!==0){if(e===2&&(r=_M(t),r!==0&&(i=r,e=XM(t,r))),e===1)throw n=_m,Du(t,0),Xl(t,i),Yr(t,ti()),n;if(e===6)Xl(t,i);else{if(r=t.current.alternate,(i&30)===0&&!IH(r)&&(e=__(t,i),e===2&&(s=_M(t),s!==0&&(i=s,e=XM(t,s))),e===1))throw n=_m,Du(t,0),Xl(t,i),Yr(t,ti()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(Xe(345));case 2:fu(t,Qr,La);break;case 3:if(Xl(t,i),(i&130023424)===i&&(e=fb+500-ti(),10<e)){if(t_(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Ir(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=bM(fu.bind(null,t,Qr,La),e);break}fu(t,Qr,La);break;case 4:if(Xl(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-wo(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=ti()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*bH(i/1960))-i,10<i){t.timeoutHandle=bM(fu.bind(null,t,Qr,La),i);break}fu(t,Qr,La);break;case 5:fu(t,Qr,La);break;default:throw Error(Xe(329))}}}return Yr(t,ti()),t.callbackNode===n?xk.bind(null,t):null}function XM(t,e){var n=zp;return t.current.memoizedState.isDehydrated&&(Du(t,e).flags|=256),t=__(t,e),t!==2&&(e=Qr,Qr=n,e!==null&&YM(e)),t}function YM(t){Qr===null?Qr=t:Qr.push.apply(Qr,t)}function IH(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!bo(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Xl(t,e){for(e&=~hb,e&=~oy,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-wo(e),i=1<<n;t[n]=-1,e&=~i}}function TR(t){if((rn&6)!==0)throw Error(Xe(327));rd();var e=t_(t,0);if((e&1)===0)return Yr(t,ti()),null;var n=__(t,e);if(t.tag!==0&&n===2){var i=_M(t);i!==0&&(e=i,n=XM(t,i))}if(n===1)throw n=_m,Du(t,0),Xl(t,e),Yr(t,ti()),n;if(n===6)throw Error(Xe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,fu(t,Qr,La),Yr(t,ti()),null}function db(t,e){var n=rn;rn|=1;try{return t(e)}finally{rn=n,rn===0&&(xd=ti()+500,ny&&Ic())}}function Zu(t){ql!==null&&ql.tag===0&&(rn&6)===0&&rd();var e=rn;rn|=1;var n=Js.transition,i=gn;try{if(Js.transition=null,gn=1,t)return t()}finally{gn=i,Js.transition=n,rn=e,(rn&6)===0&&Ic()}}function pb(){as=Hf.current,bn(Hf)}function Du(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,rH(n)),hi!==null)for(n=hi.return;n!==null;){var i=n;switch(YS(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&o_();break;case 3:_d(),bn(jr),bn(fr),ib();break;case 5:nb(i);break;case 4:_d();break;case 13:bn(Un);break;case 19:bn(Un);break;case 10:ZS(i.type._context);break;case 22:case 23:pb()}n=n.return}if(Fi=t,hi=t=uc(t.current,null),qi=as=e,_i=0,_m=null,hb=oy=Ku=0,Qr=zp=null,Eu!==null){for(e=0;e<Eu.length;e++)if(n=Eu[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}Eu=null}return t}function Ek(t,e){do{var n=hi;try{if(KS(),Ev.current=m_,p_){for(var i=zn.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}p_=!1}if(Ju=0,Pi=vi=zn=null,Np=!1,Am=0,ub.current=null,n===null||n.return===null){_i=1,_m=e,hi=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=qi,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,h=u.tag;if((u.mode&1)===0&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var d=AR(o);if(d!==null){d.flags&=-257,gR(d,o,a,s,e),d.mode&1&&mR(s,c,e),e=d,l=c;var p=e.updateQueue;if(p===null){var m=new Set;m.add(l),e.updateQueue=m}else p.add(l);break e}else{if((e&1)===0){mR(s,c,e),mb();break e}l=Error(Xe(426))}}else if(Pn&&a.mode&1){var g=AR(o);if(g!==null){(g.flags&65536)===0&&(g.flags|=256),gR(g,o,a,s,e),qS(yd(l,a));break e}}s=l=yd(l,a),_i!==4&&(_i=2),zp===null?zp=[s]:zp.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var _=sk(s,l,e);lR(s,_);break e;case 1:a=l;var y=s.type,x=s.stateNode;if((s.flags&128)===0&&(typeof y.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(lc===null||!lc.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var E=ok(s,a,e);lR(s,E);break e}}s=s.return}while(s!==null)}Ck(n)}catch(w){e=w,hi===n&&n!==null&&(hi=n=n.return);continue}break}while(1)}function wk(){var t=A_.current;return A_.current=m_,t===null?m_:t}function mb(){(_i===0||_i===3||_i===2)&&(_i=4),Fi===null||(Ku&268435455)===0&&(oy&268435455)===0||Xl(Fi,qi)}function __(t,e){var n=rn;rn|=2;var i=wk();(Fi!==t||qi!==e)&&(La=null,Du(t,e));do try{TH();break}catch(r){Ek(t,r)}while(1);if(KS(),rn=n,A_.current=i,hi!==null)throw Error(Xe(261));return Fi=null,qi=0,_i}function TH(){for(;hi!==null;)Mk(hi)}function BH(){for(;hi!==null&&!tQ();)Mk(hi)}function Mk(t){var e=bk(t.alternate,t,as);t.memoizedProps=t.pendingProps,e===null?Ck(t):hi=e,ub.current=null}function Ck(t){var e=t;do{var n=e.alternate;if(t=e.return,(e.flags&32768)===0){if(n=EH(n,e,as),n!==null){hi=n;return}}else{if(n=wH(n,e),n!==null){n.flags&=32767,hi=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{_i=6,hi=null;return}}if(e=e.sibling,e!==null){hi=e;return}hi=e=t}while(e!==null);_i===0&&(_i=5)}function fu(t,e,n){var i=gn,r=Js.transition;try{Js.transition=null,gn=1,RH(t,e,n,i)}finally{Js.transition=r,gn=i}return null}function RH(t,e,n,i){do rd();while(ql!==null);if((rn&6)!==0)throw Error(Xe(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Xe(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(hQ(t,s),t===Fi&&(hi=Fi=null,qi=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||QA||(QA=!0,Ik(e_,function(){return rd(),null})),s=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||s){s=Js.transition,Js.transition=null;var o=gn;gn=1;var a=rn;rn|=4,ub.current=null,CH(t,n),_k(n,t),KQ(CM),n_=!!MM,CM=MM=null,t.current=n,SH(n),nQ(),rn=a,gn=o,Js.transition=s}else t.current=n;if(QA&&(QA=!1,ql=t,v_=r),s=t.pendingLanes,s===0&&(lc=null),sQ(n.stateNode),Yr(t,ti()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(g_)throw g_=!1,t=WM,WM=null,t;return(v_&1)!==0&&t.tag!==0&&rd(),s=t.pendingLanes,(s&1)!==0?t===jM?Qp++:(Qp=0,jM=t):Qp=0,Ic(),null}function rd(){if(ql!==null){var t=r5(v_),e=Js.transition,n=gn;try{if(Js.transition=null,gn=16>t?16:t,ql===null)var i=!1;else{if(t=ql,ql=null,v_=0,(rn&6)!==0)throw Error(Xe(331));var r=rn;for(rn|=4,st=t.current;st!==null;){var s=st,o=s.child;if((st.flags&16)!==0){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(st=c;st!==null;){var u=st;switch(u.tag){case 0:case 11:case 15:Gp(8,u,s)}var h=u.child;if(h!==null)h.return=u,st=h;else for(;st!==null;){u=st;var f=u.sibling,d=u.return;if(Ak(u),u===c){st=null;break}if(f!==null){f.return=d,st=f;break}st=d}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}st=s}}if((s.subtreeFlags&2064)!==0&&o!==null)o.return=s,st=o;else e:for(;st!==null;){if(s=st,(s.flags&2048)!==0)switch(s.tag){case 0:case 11:case 15:Gp(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,st=_;break e}st=s.return}}var y=t.current;for(st=y;st!==null;){o=st;var x=o.child;if((o.subtreeFlags&2064)!==0&&x!==null)x.return=o,st=x;else e:for(o=y;st!==null;){if(a=st,(a.flags&2048)!==0)try{switch(a.tag){case 0:case 11:case 15:sy(9,a)}}catch(w){Xn(a,a.return,w)}if(a===o){st=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,st=E;break e}st=a.return}}if(rn=r,Ic(),sa&&typeof sa.onPostCommitFiberRoot=="function")try{sa.onPostCommitFiberRoot(K_,t)}catch{}i=!0}return i}finally{gn=n,Js.transition=e}}return!1}function BR(t,e,n){e=yd(n,e),e=sk(t,e,1),t=ac(t,e,1),e=Ir(),t!==null&&(n1(t,1,e),Yr(t,e))}function Xn(t,e,n){if(t.tag===3)BR(t,t,n);else for(;e!==null;){if(e.tag===3){BR(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(lc===null||!lc.has(i))){t=yd(n,t),t=ok(e,t,1),e=ac(e,t,1),t=Ir(),e!==null&&(n1(e,1,t),Yr(e,t));break}}e=e.return}}function PH(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Ir(),t.pingedLanes|=t.suspendedLanes&n,Fi===t&&(qi&n)===n&&(_i===4||_i===3&&(qi&130023424)===qi&&500>ti()-fb?Du(t,0):hb|=n),Yr(t,e)}function Sk(t,e){e===0&&((t.mode&1)===0?e=1:(e=PA,PA<<=1,(PA&130023424)===0&&(PA=4194304)));var n=Ir();t=il(t,e),t!==null&&(n1(t,e,n),Yr(t,n))}function DH(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Sk(t,n)}function FH(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(Xe(314))}i!==null&&i.delete(e),Sk(t,n)}var bk;bk=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||jr.current)Vr=!0;else{if((t.lanes&n)===0&&(e.flags&128)===0)return Vr=!1,xH(t,e,n);Vr=(t.flags&131072)!==0}else Vr=!1,Pn&&(e.flags&1048576)!==0&&B5(e,c_,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Mv(t,e),t=e.pendingProps;var r=Ad(e,fr.current);id(e,n),r=sb(null,e,i,t,r,n);var s=ob();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Xr(i)?(s=!0,a_(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,eb(e),r.updater=iy,e.stateNode=r,r._reactInternals=e,FM(e,i,t,n),e=UM(null,e,i,!0,s,n)):(e.tag=0,Pn&&s&&XS(e),Cr(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Mv(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=kH(i),t=fo(i,t),r){case 0:e=kM(null,e,i,t,n);break e;case 1:e=yR(null,e,i,t,n);break e;case 11:e=vR(null,e,i,t,n);break e;case 14:e=_R(null,e,i,fo(i.type,t),n);break e}throw Error(Xe(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:fo(i,r),kM(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:fo(i,r),yR(t,e,i,r,n);case 3:e:{if(uk(e),t===null)throw Error(Xe(387));i=e.pendingProps,s=e.memoizedState,r=s.element,F5(t,e),f_(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=yd(Error(Xe(423)),e),e=xR(t,e,i,n,r);break e}else if(i!==r){r=yd(Error(Xe(424)),e),e=xR(t,e,i,n,r);break e}else for(ls=oc(e.stateNode.containerInfo.firstChild),fs=e,Pn=!0,mo=null,n=O5(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(gd(),i===r){e=rl(t,e,n);break e}Cr(t,e,i,n)}e=e.child}return e;case 5:return N5(e),t===null&&RM(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,SM(i,r)?o=null:s!==null&&SM(i,s)&&(e.flags|=32),ck(t,e),Cr(t,e,o,n),e.child;case 6:return t===null&&RM(e),null;case 13:return hk(t,e,n);case 4:return tb(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=vd(e,null,i,n):Cr(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:fo(i,r),vR(t,e,i,r,n);case 7:return Cr(t,e,e.pendingProps,n),e.child;case 8:return Cr(t,e,e.pendingProps.children,n),e.child;case 12:return Cr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,wn(u_,i._currentValue),i._currentValue=o,s!==null)if(bo(s.value,o)){if(s.children===r.children&&!jr.current){e=rl(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Ka(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),PM(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Xe(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),PM(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Cr(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,id(e,n),r=Ks(r),i=i(r),e.flags|=1,Cr(t,e,i,n),e.child;case 14:return i=e.type,r=fo(i,e.pendingProps),r=fo(i.type,r),_R(t,e,i,r,n);case 15:return ak(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:fo(i,r),Mv(t,e),e.tag=1,Xr(i)?(t=!0,a_(e)):t=!1,id(e,n),k5(e,i,r),FM(e,i,r,n),UM(null,e,i,!0,t,n);case 19:return fk(t,e,n);case 22:return lk(t,e,n)}throw Error(Xe(156,e.tag))};function Ik(t,e){return e5(t,e)}function LH(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function js(t,e,n,i){return new LH(t,e,n,i)}function Ab(t){return t=t.prototype,!(!t||!t.isReactComponent)}function kH(t){if(typeof t=="function")return Ab(t)?1:0;if(t!=null){if(t=t.$$typeof,t===LS)return 11;if(t===kS)return 14}return 2}function uc(t,e){var n=t.alternate;return n===null?(n=js(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function bv(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")Ab(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Df:return Fu(n.children,r,s,e);case FS:o=8,r|=8;break;case rM:return t=js(12,n,e,r|2),t.elementType=rM,t.lanes=s,t;case sM:return t=js(13,n,e,r),t.elementType=sM,t.lanes=s,t;case oM:return t=js(19,n,e,r),t.elementType=oM,t.lanes=s,t;case UL:return ay(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case LL:o=10;break e;case kL:o=9;break e;case LS:o=11;break e;case kS:o=14;break e;case Ql:o=16,i=null;break e}throw Error(Xe(130,t==null?t:typeof t,""))}return e=js(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function Fu(t,e,n,i){return t=js(7,t,i,e),t.lanes=n,t}function ay(t,e,n,i){return t=js(22,t,i,e),t.elementType=UL,t.lanes=n,t.stateNode={isHidden:!1},t}function q2(t,e,n){return t=js(6,t,null,e),t.lanes=n,t}function J2(t,e,n){return e=js(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function UH(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=B2(0),this.expirationTimes=B2(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=B2(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function gb(t,e,n,i,r,s,o,a,l){return t=new UH(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=js(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},eb(s),t}function OH(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Pf,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function Tk(t){if(!t)return gc;t=t._reactInternals;e:{if(hh(t)!==t||t.tag!==1)throw Error(Xe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Xr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Xe(171))}if(t.tag===1){var n=t.type;if(Xr(n))return I5(t,n,e)}return e}function Bk(t,e,n,i,r,s,o,a,l){return t=gb(n,i,!0,t,r,s,o,a,l),t.context=Tk(null),n=t.current,i=Ir(),r=cc(n),s=Ka(i,r),s.callback=e!=null?e:null,ac(n,s,r),t.current.lanes=r,n1(t,r,i),Yr(t,i),t}function ly(t,e,n,i){var r=e.current,s=Ir(),o=cc(r);return n=Tk(n),e.context===null?e.context=n:e.pendingContext=n,e=Ka(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=ac(r,e,o),t!==null&&(Mo(t,r,o,s),xv(t,r,o)),o}function y_(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function RR(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function vb(t,e){RR(t,e),(t=t.alternate)&&RR(t,e)}function NH(){return null}var Rk=typeof reportError=="function"?reportError:function(t){console.error(t)};function _b(t){this._internalRoot=t}cy.prototype.render=_b.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Xe(409));ly(t,e,null,null)};cy.prototype.unmount=_b.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Zu(function(){ly(null,t,null,null)}),e[nl]=null}};function cy(t){this._internalRoot=t}cy.prototype.unstable_scheduleHydration=function(t){if(t){var e=a5();t={blockedOn:null,target:t,priority:e};for(var n=0;n<jl.length&&e!==0&&e<jl[n].priority;n++);jl.splice(n,0,t),n===0&&c5(t)}};function yb(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function uy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function PR(){}function GH(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=y_(o);s.call(c)}}var o=Bk(e,i,t,0,null,!1,!1,"",PR);return t._reactRootContainer=o,t[nl]=o.current,hm(t.nodeType===8?t.parentNode:t),Zu(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=y_(l);a.call(c)}}var l=gb(t,0,!1,null,null,!1,!1,"",PR);return t._reactRootContainer=l,t[nl]=l.current,hm(t.nodeType===8?t.parentNode:t),Zu(function(){ly(e,l,n,i)}),l}function hy(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=y_(o);a.call(l)}}ly(e,o,t,r)}else o=GH(n,e,t,r,i);return y_(o)}s5=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=wp(e.pendingLanes);n!==0&&(NS(e,n|1),Yr(e,ti()),(rn&6)===0&&(xd=ti()+500,Ic()))}break;case 13:Zu(function(){var i=il(t,1);if(i!==null){var r=Ir();Mo(i,t,1,r)}}),vb(t,1)}};GS=function(t){if(t.tag===13){var e=il(t,134217728);if(e!==null){var n=Ir();Mo(e,t,134217728,n)}vb(t,134217728)}};o5=function(t){if(t.tag===13){var e=cc(t),n=il(t,e);if(n!==null){var i=Ir();Mo(n,t,e,i)}vb(t,e)}};a5=function(){return gn};l5=function(t,e){var n=gn;try{return gn=t,e()}finally{gn=n}};AM=function(t,e,n){switch(e){case"input":if(cM(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=ty(i);if(!r)throw Error(Xe(90));NL(i),cM(i,r)}}}break;case"textarea":zL(t,n);break;case"select":e=n.value,e!=null&&$f(t,!!n.multiple,e,!1)}};YL=db;qL=Zu;var zH={usingClientEntryPoint:!1,Events:[r1,Uf,ty,jL,XL,db]},H0={findFiberByHostInstance:xu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},QH={bundleType:H0.bundleType,version:H0.version,rendererPackageName:H0.rendererPackageName,rendererConfig:H0.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ul.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ZL(t),t===null?null:t.stateNode},findFiberByHostInstance:H0.findFiberByHostInstance||NH,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var HA=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!HA.isDisabled&&HA.supportsFiber)try{K_=HA.inject(QH),sa=HA}catch{}}_s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zH;_s.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yb(e))throw Error(Xe(200));return OH(t,e,null,n)};_s.createRoot=function(t,e){if(!yb(t))throw Error(Xe(299));var n=!1,i="",r=Rk;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=gb(t,1,!1,null,null,n,!1,i,r),t[nl]=e.current,hm(t.nodeType===8?t.parentNode:t),new _b(e)};_s.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Xe(188)):(t=Object.keys(t).join(","),Error(Xe(268,t)));return t=ZL(e),t=t===null?null:t.stateNode,t};_s.flushSync=function(t){return Zu(t)};_s.hydrate=function(t,e,n){if(!uy(e))throw Error(Xe(200));return hy(null,t,e,!0,n)};_s.hydrateRoot=function(t,e,n){if(!yb(t))throw Error(Xe(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=Rk;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Bk(e,null,t,1,n!=null?n:null,r,!1,s,o),t[nl]=e.current,hm(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new cy(e)};_s.render=function(t,e,n){if(!uy(e))throw Error(Xe(200));return hy(null,t,e,!1,n)};_s.unmountComponentAtNode=function(t){if(!uy(t))throw Error(Xe(40));return t._reactRootContainer?(Zu(function(){hy(null,null,t,!1,function(){t._reactRootContainer=null,t[nl]=null})}),!0):!1};_s.unstable_batchedUpdates=db;_s.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!uy(n))throw Error(Xe(200));if(t==null||t._reactInternals===void 0)throw Error(Xe(38));return hy(t,e,n,!1,i)};_s.version="18.2.0-next-9e3b772b8-20220608";(function(t){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}e(),t.exports=_s})(BL);var xb,DR=BL.exports;xb=nM.createRoot=DR.createRoot,nM.hydrateRoot=DR.hydrateRoot;var Iv={},Eb={};Object.defineProperty(Eb,"__esModule",{value:!0});const HH="2.1.1";Eb.default=HH;var K2={},fy={};Object.defineProperty(fy,"__esModule",{value:!0});fy.VERSION=void 0;fy.VERSION="2.0.5";var Z2={},fh={},hc={},Io={};Object.defineProperty(Io,"__esModule",{value:!0});Io.Event1=Io.Event=void 0;class VH{constructor(){this._funcs=[]}bind(e){this._funcs.push(e)}unbind(e){const n=this._funcs.indexOf(e);n>-1&&this._funcs.splice(n,1)}emit(){for(let e=0,n=this._funcs.length;e<n;e++)this._funcs[e]()}}Io.Event=VH;class WH{constructor(){this._funcs=[]}bind(e){this._funcs.push(e)}unbind(e){const n=this._funcs.indexOf(e);n>-1&&this._funcs.splice(n,1)}emit(e){for(let n=0,i=this._funcs.length;n<i;n++)this._funcs[n](e)}}Io.Event1=WH;var tn={},qM;(function(t){t[t.UNKNOWN=131072]="UNKNOWN",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=4]="CODE_39",t[t.CODE_93=8]="CODE_93",t[t.CODE_128=16]="CODE_128",t[t.DATA_MATRIX=32]="DATA_MATRIX",t[t.EAN_8=64]="EAN_8",t[t.EAN_13=128]="EAN_13",t[t.ITF=256]="ITF",t[t.MAXICODE=512]="MAXICODE",t[t.PDF_417=1024]="PDF_417",t[t.QR_CODE=2048]="QR_CODE",t[t.RSS_14=4096]="RSS_14",t[t.RSS_EXPANDED=8192]="RSS_EXPANDED",t[t.UPC_A=16384]="UPC_A",t[t.UPC_E=32768]="UPC_E",t[t.UPC_EAN_EXTENSION=65536]="UPC_EAN_EXTENSION",t[t.ALL=131071]="ALL"})(qM||(qM={}));var JM;(function(t){t[t.EYE_LEFT=0]="EYE_LEFT",t[t.EYE_RIGHT=1]="EYE_RIGHT",t[t.EAR_LEFT=2]="EAR_LEFT",t[t.EAR_RIGHT=3]="EAR_RIGHT",t[t.NOSE_BRIDGE=4]="NOSE_BRIDGE",t[t.NOSE_TIP=5]="NOSE_TIP",t[t.NOSE_BASE=6]="NOSE_BASE",t[t.LIP_TOP=7]="LIP_TOP",t[t.LIP_BOTTOM=8]="LIP_BOTTOM",t[t.MOUTH_CENTER=9]="MOUTH_CENTER",t[t.CHIN=10]="CHIN",t[t.EYEBROW_LEFT=11]="EYEBROW_LEFT",t[t.EYEBROW_RIGHT=12]="EYEBROW_RIGHT"})(JM||(JM={}));var KM;(function(t){t[t.WORLD=3]="WORLD",t[t.MINUS_Z_AWAY_FROM_USER=4]="MINUS_Z_AWAY_FROM_USER",t[t.MINUS_Z_HEADING=5]="MINUS_Z_HEADING",t[t.UNCHANGED=6]="UNCHANGED"})(KM||(KM={}));var $u;(function(t){t[t.LOG_LEVEL_NONE=0]="LOG_LEVEL_NONE",t[t.LOG_LEVEL_ERROR=1]="LOG_LEVEL_ERROR",t[t.LOG_LEVEL_WARNING=2]="LOG_LEVEL_WARNING",t[t.LOG_LEVEL_VERBOSE=3]="LOG_LEVEL_VERBOSE"})($u||($u={}));var FR;(function(t){t[t.FRAME_PIXEL_FORMAT_I420=0]="FRAME_PIXEL_FORMAT_I420",t[t.FRAME_PIXEL_FORMAT_I420A=1]="FRAME_PIXEL_FORMAT_I420A",t[t.FRAME_PIXEL_FORMAT_I422=2]="FRAME_PIXEL_FORMAT_I422",t[t.FRAME_PIXEL_FORMAT_I444=3]="FRAME_PIXEL_FORMAT_I444",t[t.FRAME_PIXEL_FORMAT_NV12=4]="FRAME_PIXEL_FORMAT_NV12",t[t.FRAME_PIXEL_FORMAT_RGBA=5]="FRAME_PIXEL_FORMAT_RGBA",t[t.FRAME_PIXEL_FORMAT_BGRA=6]="FRAME_PIXEL_FORMAT_BGRA",t[t.FRAME_PIXEL_FORMAT_Y=7]="FRAME_PIXEL_FORMAT_Y"})(FR||(FR={}));var Za;(function(t){t[t.IMAGE_TRACKER_TYPE_PLANAR=0]="IMAGE_TRACKER_TYPE_PLANAR",t[t.IMAGE_TRACKER_TYPE_CYLINDRICAL=1]="IMAGE_TRACKER_TYPE_CYLINDRICAL",t[t.IMAGE_TRACKER_TYPE_CONICAL=2]="IMAGE_TRACKER_TYPE_CONICAL"})(Za||(Za={}));class jH{constructor(e){this._messageSender=e,this._freeBufferPool=[],this._buffer=new ArrayBuffer(16),this._i32View=new Int32Array(this._buffer),this._f32View=new Float32Array(this._buffer),this._f64View=new Float64Array(this._buffer),this._u8View=new Uint8Array(this._buffer),this._u8cView=new Uint8ClampedArray(this._buffer),this._u16View=new Uint16Array(this._buffer),this._u32View=new Uint32Array(this._buffer),this._offset=1,this._startOffset=-1,this._timeoutSet=!1,this._appender={int:n=>this.int(n),bool:n=>this.int(n?1:0),float:n=>this.float(n),string:n=>this.string(n),dataWithLength:n=>this.arrayBuffer(n),type:n=>this.int(n),matrix4x4:n=>this.float32ArrayBuffer(n),matrix3x3:n=>this.float32ArrayBuffer(n),identityCoefficients:n=>this.float32ArrayBuffer(n),expressionCoefficients:n=>this.float32ArrayBuffer(n),cameraModel:n=>this.float32ArrayBuffer(n),timestamp:n=>this.double(n),barcodeFormat:n=>this.int(n),faceLandmarkName:n=>this.int(n),instantTrackerTransformOrientation:n=>this.int(n),logLevel:n=>this.int(n)},this._freeBufferPool.push(new ArrayBuffer(16)),this._freeBufferPool.push(new ArrayBuffer(16))}bufferReturn(e){this._freeBufferPool.push(e)}_ensureArrayBuffer(e){let n=(this._offset+e+8)*4;if(this._buffer&&this._buffer.byteLength>=n)return;let i;if(!i){let s=n;s--,s|=s>>1,s|=s>>2,s|=s>>4,s|=s>>8,s|=s>>16,s++,i=new ArrayBuffer(s)}let r=this._buffer?this._i32View:void 0;this._buffer=i,this._i32View=new Int32Array(this._buffer),this._f32View=new Float32Array(this._buffer),this._f64View=new Float64Array(this._buffer),this._u8View=new Uint8Array(this._buffer),this._u8cView=new Uint8ClampedArray(this._buffer),this._u16View=new Uint16Array(this._buffer),this._u32View=new Uint32Array(this._buffer),r&&this._i32View.set(r.subarray(0,this._offset))}sendMessage(e,n){this._ensureArrayBuffer(4),this._startOffset=this._offset,this._i32View[this._offset+1]=e,this._offset+=2,n(this._appender),this._i32View[this._startOffset]=this._offset-this._startOffset,this._startOffset=-1,this._sendOneTime()}_sendOneTime(){this._timeoutSet===!1&&(this._timeoutSet=!0,setTimeout(()=>{this._timeoutSet=!1,this._send()},0))}_send(){if(this._freeBufferPool.length===0){this._sendOneTime();return}this._i32View[0]=this._offset,this._messageSender(this._buffer),this._buffer=void 0,this._buffer=this._freeBufferPool.pop(),this._i32View=new Int32Array(this._buffer),this._f32View=new Float32Array(this._buffer),this._f64View=new Float64Array(this._buffer),this._u8View=new Uint8Array(this._buffer),this._u8cView=new Uint8ClampedArray(this._buffer),this._u16View=new Uint16Array(this._buffer),this._u32View=new Uint32Array(this._buffer),this._offset=1,this._startOffset=-1}int(e){this._ensureArrayBuffer(1),this._i32View[this._offset]=e,this._offset++}double(e){this._ensureArrayBuffer(2),this._offset%2===1&&this._offset++,this._f64View[this._offset/2]=e,this._offset+=2}float(e){this._ensureArrayBuffer(1),this._f32View[this._offset]=e,this._offset++}int32Array(e){this._ensureArrayBuffer(e.length);for(let n=0;n<e.length;++n)this._i32View[this._offset+n]=e[n];this._offset+=e.length}float32Array(e){this._ensureArrayBuffer(e.length);for(let n=0;n<e.length;++n)this._f32View[this._offset+n]=e[n];this._offset+=e.length}booleanArray(e){this._ensureArrayBuffer(e.length);for(let n=0;n<e.length;++n)this._i32View[this._offset+n]=e[n]?1:0;this._offset+=e.length}uint8ArrayBuffer(e){this._ensureArrayBuffer(e.byteLength/4),this._i32View[this._offset]=e.byteLength,this._offset++,this._u8View.set(e,this._offset*4),this._offset+=e.byteLength>>2,(e.byteLength&3)!==0&&this._offset++}arrayBuffer(e){let n=new Uint8Array(e);this.uint8ArrayBuffer(n)}uint8ClampedArrayBuffer(e){this._ensureArrayBuffer(e.byteLength/4),this._i32View[this._offset]=e.byteLength,this._offset++,this._u8cView.set(e,this._offset*4),this._offset+=e.byteLength>>2,(e.byteLength&3)!==0&&this._offset++}float32ArrayBuffer(e){this._ensureArrayBuffer(e.byteLength/4),this._i32View[this._offset]=e.length,this._offset++,this._f32View.set(e,this._offset),this._offset+=e.length}uint16ArrayBuffer(e){this._ensureArrayBuffer(e.byteLength/4),this._i32View[this._offset]=e.length,this._offset++;let n=this._offset*2;this._u16View.set(e,n),this._offset+=e.length>>1,(e.length&1)!==0&&this._offset++}int32ArrayBuffer(e){this._ensureArrayBuffer(e.byteLength/4),this._i32View[this._offset]=e.length,this._offset++,this._i32View.set(e,this._offset),this._offset+=e.length}uint32ArrayBuffer(e){this._ensureArrayBuffer(e.byteLength/4),this._i32View[this._offset]=e.length,this._offset++,this._u32View.set(e,this._offset),this._offset+=e.length}string(e){let i=new TextEncoder().encode(e);this._ensureArrayBuffer(i.byteLength/4),this._i32View[this._offset]=i.byteLength,this._offset++,this._u8View.set(i,this._offset*4),this._offset+=i.byteLength>>2,(i.byteLength&3)!==0&&this._offset++}}class XH{constructor(){this._buffer=new ArrayBuffer(0),this._i32View=new Int32Array(this._buffer),this._f32View=new Float32Array(this._buffer),this._f64View=new Float64Array(this._buffer),this._u8View=new Uint8Array(this._buffer),this._u16View=new Uint16Array(this._buffer),this._u32View=new Uint32Array(this._buffer),this._offset=0,this._length=0,this._startOffset=-1,this._processor={int:()=>this._i32View[this._startOffset++],bool:()=>this._i32View[this._startOffset++]===1,type:()=>this._i32View[this._startOffset++],float:()=>this._f32View[this._startOffset++],timestamp:()=>{this._startOffset%2===1&&this._startOffset++;let e=this._f64View[this._startOffset/2];return this._startOffset+=2,e},string:()=>{let e=this._i32View[this._startOffset++],i=new TextDecoder().decode(new Uint8Array(this._buffer,this._startOffset*4,e));return this._startOffset+=e>>2,(e&3)!==0&&this._startOffset++,i},dataWithLength:()=>{let e=this._i32View[this._startOffset++],n=new Uint8Array(e);return n.set(this._u8View.subarray(this._startOffset*4,this._startOffset*4+e)),this._startOffset+=n.byteLength>>2,(n.byteLength&3)!==0&&this._startOffset++,n.buffer},matrix4x4:()=>{let e=this._i32View[this._startOffset++],n=new Float32Array(e);return n.set(this._f32View.subarray(this._startOffset,this._startOffset+16)),this._startOffset+=e,n},matrix3x3:()=>{let e=this._i32View[this._startOffset++],n=new Float32Array(e);return n.set(this._f32View.subarray(this._startOffset,this._startOffset+9)),this._startOffset+=e,n},identityCoefficients:()=>{let e=this._i32View[this._startOffset++],n=new Float32Array(e);return n.set(this._f32View.subarray(this._startOffset,this._startOffset+50)),this._startOffset+=e,n},expressionCoefficients:()=>{let e=this._i32View[this._startOffset++],n=new Float32Array(e);return n.set(this._f32View.subarray(this._startOffset,this._startOffset+29)),this._startOffset+=e,n},cameraModel:()=>{let e=this._i32View[this._startOffset++],n=new Float32Array(e);return n.set(this._f32View.subarray(this._startOffset,this._startOffset+6)),this._startOffset+=e,n},barcodeFormat:()=>this._i32View[this._startOffset++],faceLandmarkName:()=>this._i32View[this._startOffset++],instantTrackerTransformOrientation:()=>this._i32View[this._startOffset++],logLevel:()=>this._i32View[this._startOffset++]}}setData(e){this._buffer=e,this._i32View=new Int32Array(this._buffer),this._f32View=new Float32Array(this._buffer),this._f64View=new Float64Array(this._buffer),this._u8View=new Uint8Array(this._buffer),this._u16View=new Uint16Array(this._buffer),this._u32View=new Uint32Array(this._buffer),this._offset=0,this._length=0,e.byteLength>=4&&(this._offset=1,this._length=this._i32View[0]),this._startOffset=-1}hasMessage(){return this._offset+1<this._length}forMessages(e){for(;this.hasMessage();){let n=this._i32View[this._offset],i=this._i32View[this._offset+1];this._startOffset=this._offset+2,this._offset+=n,e(i,this._processor)}}}class YH{constructor(e){this._messageSender=e,this._globalState={log_level:1},this.serializer=new jH(n=>{this._messageSender(n)}),this.deserializer=new XH,this._latestId=1,this._pipeline_state_by_instance=new Map,this._camera_source_state_by_instance=new Map,this._sequence_source_state_by_instance=new Map,this._image_tracker_state_by_instance=new Map,this._face_tracker_state_by_instance=new Map,this._face_mesh_state_by_instance=new Map,this._face_landmark_state_by_instance=new Map,this._barcode_finder_state_by_instance=new Map,this._instant_world_tracker_state_by_instance=new Map,this.impl={log_level:()=>this._globalState.log_level,log_level_set:n=>{this.serializer.sendMessage(34,i=>{i.logLevel(n)})},analytics_project_id_set:n=>{this.serializer.sendMessage(31,i=>{i.string(n)})},pipeline_create:()=>{let n=this._latestId++,i={current_frame_user_data:0,camera_model:new Float32Array([300,300,160,120,0,0]),camera_pose:new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),camera_frame_camera_attitude:new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),camera_frame_device_attitude:new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),frame_number:0};return this._pipeline_state_by_instance.set(n,i),this.serializer.sendMessage(27,r=>{r.type(n)}),n},pipeline_destroy:n=>{if(!this._pipeline_state_by_instance.get(n))throw new Error("This object has been destroyed");this._pipeline_state_by_instance.delete(n),this.serializer.sendMessage(28,r=>{r.type(n)})},pipeline_frame_update:n=>{if(!this._pipeline_state_by_instance.get(n))throw new Error("This object has been destroyed");this.serializer.sendMessage(9,r=>{r.type(n)})},pipeline_frame_number:n=>{let i=this._pipeline_state_by_instance.get(n);if(!i)throw new Error("This object has been destroyed");return i.frame_number},pipeline_camera_model:n=>{let i=this._pipeline_state_by_instance.get(n);if(!i)throw new Error("This object has been destroyed");return i.camera_model},pipeline_camera_frame_user_data:n=>{let i=this._pipeline_state_by_instance.get(n);if(!i)throw new Error("This object has been destroyed");return i.current_frame_user_data},pipeline_camera_frame_submit:(n,i,r,s,o,a,l,c)=>{if(!this._pipeline_state_by_instance.get(n))throw new Error("This object has been destroyed");this.serializer.sendMessage(8,h=>{h.type(n),h.dataWithLength(i),h.int(r),h.int(s),h.int(o),h.matrix4x4(a),h.cameraModel(l),h.bool(c)})},pipeline_camera_frame_submit_raw_pointer:(n,i,r,s,o,a,l,c,u,h,f)=>{if(!this._pipeline_state_by_instance.get(n))throw new Error("This object has been destroyed")},pipeline_camera_frame_camera_attitude:n=>{let i=this._pipeline_state_by_instance.get(n);if(!i)throw new Error("This object has been destroyed");return i.camera_frame_camera_attitude},pipeline_camera_frame_device_attitude:n=>{let i=this._pipeline_state_by_instance.get(n);if(!i)throw new Error("This object has been destroyed");return i.camera_frame_device_attitude},pipeline_motion_accelerometer_submit:(n,i,r,s,o)=>{if(!this._pipeline_state_by_instance.get(n))throw new Error("This object has been destroyed");this.serializer.sendMessage(10,l=>{l.type(n),l.timestamp(i),l.float(r),l.float(s),l.float(o)})},pipeline_motion_rotation_rate_submit:(n,i,r,s,o)=>{if(!this._pipeline_state_by_instance.get(n))throw new Error("This object has been destroyed");this.serializer.sendMessage(11,l=>{l.type(n),l.timestamp(i),l.float(r),l.float(s),l.float(o)})},pipeline_motion_attitude_submit:(n,i,r,s,o)=>{if(!this._pipeline_state_by_instance.get(n))throw new Error("This object has been destroyed");this.serializer.sendMessage(12,l=>{l.type(n),l.timestamp(i),l.float(r),l.float(s),l.float(o)})},pipeline_motion_attitude_matrix_submit:(n,i)=>{if(!this._pipeline_state_by_instance.get(n))throw new Error("This object has been destroyed");this.serializer.sendMessage(13,s=>{s.type(n),s.matrix4x4(i)})},camera_source_create:(n,i)=>{let r=this._latestId++,s={};return this._camera_source_state_by_instance.set(r,s),this.serializer.sendMessage(29,o=>{o.type(r),o.type(n),o.string(i)}),r},camera_source_destroy:n=>{if(!this._camera_source_state_by_instance.get(n))throw new Error("This object has been destroyed");this._camera_source_state_by_instance.delete(n),this.serializer.sendMessage(30,r=>{r.type(n)})},sequence_source_create:n=>{let i=this._latestId++,r={};return this._sequence_source_state_by_instance.set(i,r),this.serializer.sendMessage(35,s=>{s.type(i),s.type(n)}),i},sequence_source_destroy:n=>{if(!this._sequence_source_state_by_instance.get(n))throw new Error("This object has been destroyed");this._sequence_source_state_by_instance.delete(n),this.serializer.sendMessage(36,r=>{r.type(n)})},image_tracker_create:n=>{let i=this._latestId++,r={enabled:!0,target_loaded_version:-1,anchor_count:0,anchor_id:[],anchor_pose:[]};return this._image_tracker_state_by_instance.set(i,r),this.serializer.sendMessage(2,s=>{s.type(i),s.type(n)}),i},image_tracker_destroy:n=>{if(!this._image_tracker_state_by_instance.get(n))throw new Error("This object has been destroyed");this._image_tracker_state_by_instance.delete(n),this.serializer.sendMessage(14,r=>{r.type(n)})},image_tracker_target_load_from_memory:(n,i)=>{if(!this._image_tracker_state_by_instance.get(n))throw new Error("This object has been destroyed");this.serializer.sendMessage(4,s=>{s.type(n),s.dataWithLength(i)})},image_tracker_target_loaded_version:n=>{let i=this._image_tracker_state_by_instance.get(n);if(!i)throw new Error("This object has been destroyed");return i.target_loaded_version},image_tracker_enabled:n=>{let i=this._image_tracker_state_by_instance.get(n);if(!i)throw new Error("This object has been destroyed");return i.enabled},image_tracker_enabled_set:(n,i)=>{if(!this._image_tracker_state_by_instance.get(n))throw new Error("This object has been destroyed");this.serializer.sendMessage(3,s=>{s.type(n),s.bool(i)})},image_tracker_anchor_count:n=>{let i=this._image_tracker_state_by_instance.get(n);if(!i)throw new Error("This object has been destroyed");return i.anchor_count},image_tracker_anchor_id:(n,i)=>{let r=this._image_tracker_state_by_instance.get(n);if(!r)throw new Error("This object has been destroyed");return r.anchor_id[i]},image_tracker_anchor_pose_raw:(n,i)=>{let r=this._image_tracker_state_by_instance.get(n);if(!r)throw new Error("This object has been destroyed");return r.anchor_pose[i]},face_tracker_create:n=>{let i=this._latestId++,r={enabled:!0,model_loaded:-1,max_faces:1,anchor_count:0,anchor_id:[],anchor_pose:[],anchor_identity_coefficients:[],anchor_expression_coefficients:[]};return this._face_tracker_state_by_instance.set(i,r),this.serializer.sendMessage(20,s=>{s.type(i),s.type(n)}),i},face_tracker_destroy:n=>{if(!this._face_tracker_state_by_instance.get(n))throw new Error("This object has been destroyed");this._face_tracker_state_by_instance.delete(n),this.serializer.sendMessage(21,r=>{r.type(n)})},face_tracker_model_load_from_memory:(n,i)=>{if(!this._face_tracker_state_by_instance.get(n))throw new Error("This object has been destroyed");this.serializer.sendMessage(22,s=>{s.type(n),s.dataWithLength(i)})},face_tracker_model_loaded_version:n=>{let i=this._face_tracker_state_by_instance.get(n);if(!i)throw new Error("This object has been destroyed");return i.model_loaded},face_tracker_enabled_set:(n,i)=>{if(!this._face_tracker_state_by_instance.get(n))throw new Error("This object has been destroyed");this.serializer.sendMessage(23,s=>{s.type(n),s.bool(i)})},face_tracker_enabled:n=>{let i=this._face_tracker_state_by_instance.get(n);if(!i)throw new Error("This object has been destroyed");return i.enabled},face_tracker_max_faces_set:(n,i)=>{if(!this._face_tracker_state_by_instance.get(n))throw new Error("This object has been destroyed");this.serializer.sendMessage(24,s=>{s.type(n),s.int(i)})},face_tracker_max_faces:n=>{let i=this._face_tracker_state_by_instance.get(n);if(!i)throw new Error("This object has been destroyed");return i.max_faces},face_tracker_anchor_count:n=>{let i=this._face_tracker_state_by_instance.get(n);if(!i)throw new Error("This object has been destroyed");return i.anchor_count},face_tracker_anchor_id:(n,i)=>{let r=this._face_tracker_state_by_instance.get(n);if(!r)throw new Error("This object has been destroyed");return r.anchor_id[i]},face_tracker_anchor_pose_raw:(n,i)=>{let r=this._face_tracker_state_by_instance.get(n);if(!r)throw new Error("This object has been destroyed");return r.anchor_pose[i]},face_tracker_anchor_identity_coefficients:(n,i)=>{let r=this._face_tracker_state_by_instance.get(n);if(!r)throw new Error("This object has been destroyed");return r.anchor_identity_coefficients[i]},face_tracker_anchor_expression_coefficients:(n,i)=>{let r=this._face_tracker_state_by_instance.get(n);if(!r)throw new Error("This object has been destroyed");return r.anchor_expression_coefficients[i]},face_mesh_create:()=>{let n=this._latestId++,i={};return this._face_mesh_state_by_instance.set(n,i),this.serializer.sendMessage(25,r=>{r.type(n)}),n},face_mesh_destroy:n=>{if(!this._face_mesh_state_by_instance.get(n))throw new Error("This object has been destroyed");this._face_mesh_state_by_instance.delete(n),this.serializer.sendMessage(26,r=>{r.type(n)})},face_landmark_create:n=>{let i=this._latestId++,r={};return this._face_landmark_state_by_instance.set(i,r),this.serializer.sendMessage(32,s=>{s.type(i),s.faceLandmarkName(n)}),i},face_landmark_destroy:n=>{if(!this._face_landmark_state_by_instance.get(n))throw new Error("This object has been destroyed");this._face_landmark_state_by_instance.delete(n),this.serializer.sendMessage(33,r=>{r.type(n)})},barcode_finder_create:n=>{let i=this._latestId++,r={enabled:!0,number_found:0,found_text:[],found_format:[],formats:(1<<17)-1};return this._barcode_finder_state_by_instance.set(i,r),this.serializer.sendMessage(16,s=>{s.type(i),s.type(n)}),i},barcode_finder_destroy:n=>{if(!this._barcode_finder_state_by_instance.get(n))throw new Error("This object has been destroyed");this._barcode_finder_state_by_instance.delete(n),this.serializer.sendMessage(17,r=>{r.type(n)})},barcode_finder_enabled_set:(n,i)=>{if(!this._barcode_finder_state_by_instance.get(n))throw new Error("This object has been destroyed");this.serializer.sendMessage(18,s=>{s.type(n),s.bool(i)})},barcode_finder_enabled:n=>{let i=this._barcode_finder_state_by_instance.get(n);if(!i)throw new Error("This object has been destroyed");return i.enabled},barcode_finder_found_number:n=>{let i=this._barcode_finder_state_by_instance.get(n);if(!i)throw new Error("This object has been destroyed");return i.number_found},barcode_finder_found_text:(n,i)=>{let r=this._barcode_finder_state_by_instance.get(n);if(!r)throw new Error("This object has been destroyed");return r.found_text[i]},barcode_finder_found_format:(n,i)=>{let r=this._barcode_finder_state_by_instance.get(n);if(!r)throw new Error("This object has been destroyed");return r.found_format[i]},barcode_finder_formats:n=>{let i=this._barcode_finder_state_by_instance.get(n);if(!i)throw new Error("This object has been destroyed");return i.formats},barcode_finder_formats_set:(n,i)=>{if(!this._barcode_finder_state_by_instance.get(n))throw new Error("This object has been destroyed");this.serializer.sendMessage(19,s=>{s.type(n),s.barcodeFormat(i)})},instant_world_tracker_create:n=>{let i=this._latestId++,r={enabled:!0,pose:new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};return this._instant_world_tracker_state_by_instance.set(i,r),this.serializer.sendMessage(5,s=>{s.type(i),s.type(n)}),i},instant_world_tracker_destroy:n=>{if(!this._instant_world_tracker_state_by_instance.get(n))throw new Error("This object has been destroyed");this._instant_world_tracker_state_by_instance.delete(n),this.serializer.sendMessage(15,r=>{r.type(n)})},instant_world_tracker_enabled_set:(n,i)=>{if(!this._instant_world_tracker_state_by_instance.get(n))throw new Error("This object has been destroyed");this.serializer.sendMessage(6,s=>{s.type(n),s.bool(i)})},instant_world_tracker_enabled:n=>{let i=this._instant_world_tracker_state_by_instance.get(n);if(!i)throw new Error("This object has been destroyed");return i.enabled},instant_world_tracker_anchor_pose_raw:n=>{let i=this._instant_world_tracker_state_by_instance.get(n);if(!i)throw new Error("This object has been destroyed");return i.pose},instant_world_tracker_anchor_pose_set_from_camera_offset_raw:(n,i,r,s,o)=>{if(!this._instant_world_tracker_state_by_instance.get(n))throw new Error("This object has been destroyed");this.serializer.sendMessage(7,l=>{l.type(n),l.float(i),l.float(r),l.float(s),l.instantTrackerTransformOrientation(o)})}}}processMessages(e){this.deserializer.setData(e),this.deserializer.forMessages((n,i)=>{switch(n){case 7:{let r=i.type(),s=this._pipeline_state_by_instance.get(r);if(!s)return;s.frame_number=i.int();break}case 6:{let r=i.type(),s=this._pipeline_state_by_instance.get(r);if(!s)return;s.camera_model=i.cameraModel();break}case 5:{let r=i.type(),s=this._pipeline_state_by_instance.get(r);if(!s)return;s.current_frame_user_data=i.int();break}case 11:{let r=i.type(),s=this._pipeline_state_by_instance.get(r);if(!s)return;s.camera_frame_camera_attitude=i.matrix4x4();break}case 12:{let r=i.type(),s=this._pipeline_state_by_instance.get(r);if(!s)return;s.camera_frame_device_attitude=i.matrix4x4();break}case 19:{let r=i.type(),s=this._image_tracker_state_by_instance.get(r);if(!s)return;s.target_loaded_version=i.int();break}case 1:{let r=i.type(),s=this._image_tracker_state_by_instance.get(r);if(!s)return;s.anchor_count=i.int();break}case 2:{let r=i.type(),s=this._image_tracker_state_by_instance.get(r);if(!s)return;let o=i.int();s.anchor_id[o]=i.string();break}case 3:{let r=i.type(),s=this._image_tracker_state_by_instance.get(r);if(!s)return;let o=i.int();s.anchor_pose[o]=i.matrix4x4();break}case 18:{let r=i.type(),s=this._face_tracker_state_by_instance.get(r);if(!s)return;s.model_loaded=i.int();break}case 13:{let r=i.type(),s=this._face_tracker_state_by_instance.get(r);if(!s)return;s.anchor_count=i.int();break}case 14:{let r=i.type(),s=this._face_tracker_state_by_instance.get(r);if(!s)return;let o=i.int();s.anchor_id[o]=i.string();break}case 15:{let r=i.type(),s=this._face_tracker_state_by_instance.get(r);if(!s)return;let o=i.int();s.anchor_pose[o]=i.matrix4x4();break}case 16:{let r=i.type(),s=this._face_tracker_state_by_instance.get(r);if(!s)return;let o=i.int();s.anchor_identity_coefficients[o]=i.identityCoefficients();break}case 17:{let r=i.type(),s=this._face_tracker_state_by_instance.get(r);if(!s)return;let o=i.int();s.anchor_expression_coefficients[o]=i.expressionCoefficients();break}case 8:{let r=i.type(),s=this._barcode_finder_state_by_instance.get(r);if(!s)return;s.number_found=i.int();break}case 9:{let r=i.type(),s=this._barcode_finder_state_by_instance.get(r);if(!s)return;let o=i.int();s.found_text[o]=i.string();break}case 10:{let r=i.type(),s=this._barcode_finder_state_by_instance.get(r);if(!s)return;let o=i.int();s.found_format[o]=i.barcodeFormat();break}case 4:{let r=i.type(),s=this._instant_world_tracker_state_by_instance.get(r);if(!s)return;s.pose=i.matrix4x4();break}}})}}function $s(t,e,n){let i=t.createShader(e);if(!i)throw new Error("Unable to create shader");t.shaderSource(i,n),t.compileShader(i);let r=t.getShaderInfoLog(i);if(r&&r.trim().length>0)throw new Error("Shader compile error: "+r);return i}function zd(t,e){t.linkProgram(e);let n=t.getProgramInfoLog(e);if(n&&n.trim().length>0)throw new Error("Unable to link: "+n)}let Cp,du,pu,Tv={};function qH(){Cp=void 0,du=void 0,pu=void 0,Tv={}}function JH(t){if(du)return du;if(du=t.createBuffer(),!du)throw new Error("Unable to create buffer object");let e=[-.5,.125,0,-.5,-.125,0,.5,.125,0,.5,-.125,0];return t.bindBuffer(t.ARRAY_BUFFER,du),t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),du}function KH(t){if(pu)return pu;if(pu=t.createBuffer(),!pu)throw new Error("Unable to create buffer object");let e=[0,1,0,0,1,1,1,0];return t.bindBuffer(t.ARRAY_BUFFER,pu),t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),pu}function ZH(t,e,n,i,r){let s=tV(t),o=JH(t),a=KH(t);t.disable(t.DEPTH_TEST),t.useProgram(s.prog),t.uniformMatrix4fv(s.unif_proj,!1,e),t.uniformMatrix4fv(s.unif_camera,!1,n),t.uniformMatrix4fv(s.unif_matrix,!1,i),t.bindBuffer(t.ARRAY_BUFFER,o),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,nV(t,r)),t.uniform1i(s.unif_skinSampler,0),t.vertexAttribPointer(s.attr_position,3,t.FLOAT,!1,3*4,0),t.enableVertexAttribArray(s.attr_position),t.bindBuffer(t.ARRAY_BUFFER,a),t.vertexAttribPointer(s.attr_textureCoord,2,t.FLOAT,!1,2*4,0),t.enableVertexAttribArray(s.attr_textureCoord),t.drawArrays(t.TRIANGLE_STRIP,0,4),t.disableVertexAttribArray(s.attr_position),t.disableVertexAttribArray(s.attr_textureCoord),t.bindBuffer(t.ARRAY_BUFFER,null)}let $H=`
#ifndef GL_ES
#define highp
#define mediump
#define lowp
#endif

uniform mat4 projMatrix;
uniform mat4 cameraMatrix;
uniform mat4 modelViewMatrix;
attribute vec4 position;
attribute vec2 textureCoord;

varying highp vec2 vTextureCoord;

void main()
{
    gl_Position = projMatrix * cameraMatrix * modelViewMatrix * position;
    vTextureCoord = textureCoord;
}`,eV=`
#define highp mediump
#ifdef GL_ES
    // define default precision for float, vec, mat.
    precision highp float;
#else
#define highp
#define mediump
#define lowp
#endif

varying highp vec2 vTextureCoord;
uniform sampler2D skinSampler;

void main()
{
    gl_FragColor = texture2D(skinSampler, vTextureCoord);
}`;function tV(t){if(Cp)return Cp;let e=t.createProgram();if(!e)throw new Error("Unable to create program");let n=$s(t,t.VERTEX_SHADER,$H),i=$s(t,t.FRAGMENT_SHADER,eV);t.attachShader(e,n),t.attachShader(e,i),zd(t,e);let r=t.getUniformLocation(e,"projMatrix");if(!r)throw new Error("Unable to get uniform location projMatrix");let s=t.getUniformLocation(e,"modelViewMatrix");if(!s)throw new Error("Unable to get uniform location modelViewMatrix");let o=t.getUniformLocation(e,"cameraMatrix");if(!o)throw new Error("Unable to get uniform location cameraMatrix");let a=t.getUniformLocation(e,"skinSampler");if(!a)throw new Error("Unable to get uniform location skinSampler");return Cp={prog:e,unif_matrix:s,unif_proj:r,unif_camera:o,unif_skinSampler:a,attr_position:t.getAttribLocation(e,"position"),attr_textureCoord:t.getAttribLocation(e,"textureCoord")},Cp}function nV(t,e){if(Tv[e])return Tv[e];let n=t.createTexture();if(!n)throw new Error("Unable to create texture");Tv[e]=n,t.bindTexture(t.TEXTURE_2D,n);const i=0,r=t.RGBA,s=1,o=1,a=0,l=t.RGBA,c=t.UNSIGNED_BYTE,u=new Uint8Array([0,0,255,255]);t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,i,r,s,o,a,l,c,u);const h=new Image;return h.onload=function(){t.bindTexture(t.TEXTURE_2D,n),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,i,r,l,c,h),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR)},h.src=e,n}var lt=1e-6,Ut=typeof Float32Array<"u"?Float32Array:Array,_o=Math.random;function iV(t){Ut=t}var rV=Math.PI/180;function sV(t){return t*rV}function oV(t,e){return Math.abs(t-e)<=lt*Math.max(1,Math.abs(t),Math.abs(e))}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});const aV=Object.freeze(Object.defineProperty({__proto__:null,EPSILON:lt,get ARRAY_TYPE(){return Ut},RANDOM:_o,setMatrixArrayType:iV,toRadian:sV,equals:oV},Symbol.toStringTag,{value:"Module"}));function lV(){var t=new Ut(4);return Ut!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function cV(t){var e=new Ut(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function uV(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function hV(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function fV(t,e,n,i){var r=new Ut(4);return r[0]=t,r[1]=e,r[2]=n,r[3]=i,r}function dV(t,e,n,i,r){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t}function pV(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function mV(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=n*s-r*i;return o?(o=1/o,t[0]=s*o,t[1]=-i*o,t[2]=-r*o,t[3]=n*o,t):null}function AV(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t}function gV(t){return t[0]*t[3]-t[2]*t[1]}function Pk(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=n[0],l=n[1],c=n[2],u=n[3];return t[0]=i*a+s*l,t[1]=r*a+o*l,t[2]=i*c+s*u,t[3]=r*c+o*u,t}function vV(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(n),l=Math.cos(n);return t[0]=i*l+s*a,t[1]=r*l+o*a,t[2]=i*-a+s*l,t[3]=r*-a+o*l,t}function _V(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=n[0],l=n[1];return t[0]=i*a,t[1]=r*a,t[2]=s*l,t[3]=o*l,t}function yV(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=-n,t[3]=i,t}function xV(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function EV(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function wV(t){return Math.hypot(t[0],t[1],t[2],t[3])}function MV(t,e,n,i){return t[2]=i[2]/i[0],n[0]=i[0],n[1]=i[1],n[3]=i[3]-t[2]*n[1],[t,e,n]}function CV(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function Dk(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function SV(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function bV(t,e){var n=t[0],i=t[1],r=t[2],s=t[3],o=e[0],a=e[1],l=e[2],c=e[3];return Math.abs(n-o)<=lt*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-a)<=lt*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(r-l)<=lt*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(s-c)<=lt*Math.max(1,Math.abs(s),Math.abs(c))}function IV(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function TV(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t}var BV=Pk,RV=Dk;const PV=Object.freeze(Object.defineProperty({__proto__:null,create:lV,clone:cV,copy:uV,identity:hV,fromValues:fV,set:dV,transpose:pV,invert:mV,adjoint:AV,determinant:gV,multiply:Pk,rotate:vV,scale:_V,fromRotation:yV,fromScaling:xV,str:EV,frob:wV,LDU:MV,add:CV,subtract:Dk,exactEquals:SV,equals:bV,multiplyScalar:IV,multiplyScalarAndAdd:TV,mul:BV,sub:RV},Symbol.toStringTag,{value:"Module"}));function DV(){var t=new Ut(6);return Ut!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function FV(t){var e=new Ut(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function LV(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function kV(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function UV(t,e,n,i,r,s){var o=new Ut(6);return o[0]=t,o[1]=e,o[2]=n,o[3]=i,o[4]=r,o[5]=s,o}function OV(t,e,n,i,r,s,o){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t[4]=s,t[5]=o,t}function NV(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=n*s-i*r;return l?(l=1/l,t[0]=s*l,t[1]=-i*l,t[2]=-r*l,t[3]=n*l,t[4]=(r*a-s*o)*l,t[5]=(i*o-n*a)*l,t):null}function GV(t){return t[0]*t[3]-t[1]*t[2]}function Fk(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=n[0],u=n[1],h=n[2],f=n[3],d=n[4],p=n[5];return t[0]=i*c+s*u,t[1]=r*c+o*u,t[2]=i*h+s*f,t[3]=r*h+o*f,t[4]=i*d+s*p+a,t[5]=r*d+o*p+l,t}function zV(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=Math.sin(n),u=Math.cos(n);return t[0]=i*u+s*c,t[1]=r*u+o*c,t[2]=i*-c+s*u,t[3]=r*-c+o*u,t[4]=a,t[5]=l,t}function QV(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=n[0],u=n[1];return t[0]=i*c,t[1]=r*c,t[2]=s*u,t[3]=o*u,t[4]=a,t[5]=l,t}function HV(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=n[0],u=n[1];return t[0]=i,t[1]=r,t[2]=s,t[3]=o,t[4]=i*c+s*u+a,t[5]=r*c+o*u+l,t}function VV(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=-n,t[3]=i,t[4]=0,t[5]=0,t}function WV(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function jV(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function XV(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function YV(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)}function qV(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t}function Lk(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}function JV(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t}function KV(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t[4]=e[4]+n[4]*i,t[5]=e[5]+n[5]*i,t}function ZV(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function $V(t,e){var n=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=e[0],c=e[1],u=e[2],h=e[3],f=e[4],d=e[5];return Math.abs(n-l)<=lt*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(i-c)<=lt*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(r-u)<=lt*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(s-h)<=lt*Math.max(1,Math.abs(s),Math.abs(h))&&Math.abs(o-f)<=lt*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(a-d)<=lt*Math.max(1,Math.abs(a),Math.abs(d))}var eW=Fk,tW=Lk;const nW=Object.freeze(Object.defineProperty({__proto__:null,create:DV,clone:FV,copy:LV,identity:kV,fromValues:UV,set:OV,invert:NV,determinant:GV,multiply:Fk,rotate:zV,scale:QV,translate:HV,fromRotation:VV,fromScaling:WV,fromTranslation:jV,str:XV,frob:YV,add:qV,subtract:Lk,multiplyScalar:JV,multiplyScalarAndAdd:KV,exactEquals:ZV,equals:$V,mul:eW,sub:tW},Symbol.toStringTag,{value:"Module"}));function kk(){var t=new Ut(9);return Ut!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function iW(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function rW(t){var e=new Ut(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function sW(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function oW(t,e,n,i,r,s,o,a,l){var c=new Ut(9);return c[0]=t,c[1]=e,c[2]=n,c[3]=i,c[4]=r,c[5]=s,c[6]=o,c[7]=a,c[8]=l,c}function aW(t,e,n,i,r,s,o,a,l,c){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t[4]=s,t[5]=o,t[6]=a,t[7]=l,t[8]=c,t}function lW(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function cW(t,e){if(t===e){var n=e[1],i=e[2],r=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=i,t[7]=r}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function uW(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=u*o-a*c,f=-u*s+a*l,d=c*s-o*l,p=n*h+i*f+r*d;return p?(p=1/p,t[0]=h*p,t[1]=(-u*i+r*c)*p,t[2]=(a*i-r*o)*p,t[3]=f*p,t[4]=(u*n-r*l)*p,t[5]=(-a*n+r*s)*p,t[6]=d*p,t[7]=(-c*n+i*l)*p,t[8]=(o*n-i*s)*p,t):null}function hW(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t[0]=o*u-a*c,t[1]=r*c-i*u,t[2]=i*a-r*o,t[3]=a*l-s*u,t[4]=n*u-r*l,t[5]=r*s-n*a,t[6]=s*c-o*l,t[7]=i*l-n*c,t[8]=n*o-i*s,t}function fW(t){var e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],l=t[7],c=t[8];return e*(c*s-o*l)+n*(-c*r+o*a)+i*(l*r-s*a)}function Uk(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],f=n[0],d=n[1],p=n[2],m=n[3],g=n[4],_=n[5],y=n[6],x=n[7],E=n[8];return t[0]=f*i+d*o+p*c,t[1]=f*r+d*a+p*u,t[2]=f*s+d*l+p*h,t[3]=m*i+g*o+_*c,t[4]=m*r+g*a+_*u,t[5]=m*s+g*l+_*h,t[6]=y*i+x*o+E*c,t[7]=y*r+x*a+E*u,t[8]=y*s+x*l+E*h,t}function dW(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],f=n[0],d=n[1];return t[0]=i,t[1]=r,t[2]=s,t[3]=o,t[4]=a,t[5]=l,t[6]=f*i+d*o+c,t[7]=f*r+d*a+u,t[8]=f*s+d*l+h,t}function pW(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],f=Math.sin(n),d=Math.cos(n);return t[0]=d*i+f*o,t[1]=d*r+f*a,t[2]=d*s+f*l,t[3]=d*o-f*i,t[4]=d*a-f*r,t[5]=d*l-f*s,t[6]=c,t[7]=u,t[8]=h,t}function mW(t,e,n){var i=n[0],r=n[1];return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=r*e[3],t[4]=r*e[4],t[5]=r*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function AW(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function gW(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=0,t[3]=-n,t[4]=i,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function vW(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function _W(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function yW(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=n+n,a=i+i,l=r+r,c=n*o,u=i*o,h=i*a,f=r*o,d=r*a,p=r*l,m=s*o,g=s*a,_=s*l;return t[0]=1-h-p,t[3]=u-_,t[6]=f+g,t[1]=u+_,t[4]=1-c-p,t[7]=d-m,t[2]=f-g,t[5]=d+m,t[8]=1-c-h,t}function xW(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],f=e[10],d=e[11],p=e[12],m=e[13],g=e[14],_=e[15],y=n*a-i*o,x=n*l-r*o,E=n*c-s*o,w=i*l-r*a,S=i*c-s*a,b=r*c-s*l,M=u*m-h*p,T=u*g-f*p,B=u*_-d*p,L=h*g-f*m,F=h*_-d*m,U=f*_-d*g,k=y*U-x*F+E*L+w*B-S*T+b*M;return k?(k=1/k,t[0]=(a*U-l*F+c*L)*k,t[1]=(l*B-o*U-c*T)*k,t[2]=(o*F-a*B+c*M)*k,t[3]=(r*F-i*U-s*L)*k,t[4]=(n*U-r*B+s*T)*k,t[5]=(i*B-n*F-s*M)*k,t[6]=(m*b-g*S+_*w)*k,t[7]=(g*E-p*b-_*x)*k,t[8]=(p*S-m*E+_*y)*k,t):null}function EW(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function wW(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function MW(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function CW(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function Ok(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function SW(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function bW(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t[4]=e[4]+n[4]*i,t[5]=e[5]+n[5]*i,t[6]=e[6]+n[6]*i,t[7]=e[7]+n[7]*i,t[8]=e[8]+n[8]*i,t}function IW(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function TW(t,e){var n=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],u=t[8],h=e[0],f=e[1],d=e[2],p=e[3],m=e[4],g=e[5],_=e[6],y=e[7],x=e[8];return Math.abs(n-h)<=lt*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(i-f)<=lt*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(r-d)<=lt*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(s-p)<=lt*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(o-m)<=lt*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-g)<=lt*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(l-_)<=lt*Math.max(1,Math.abs(l),Math.abs(_))&&Math.abs(c-y)<=lt*Math.max(1,Math.abs(c),Math.abs(y))&&Math.abs(u-x)<=lt*Math.max(1,Math.abs(u),Math.abs(x))}var BW=Uk,RW=Ok;const PW=Object.freeze(Object.defineProperty({__proto__:null,create:kk,fromMat4:iW,clone:rW,copy:sW,fromValues:oW,set:aW,identity:lW,transpose:cW,invert:uW,adjoint:hW,determinant:fW,multiply:Uk,translate:dW,rotate:pW,scale:mW,fromTranslation:AW,fromRotation:gW,fromScaling:vW,fromMat2d:_W,fromQuat:yW,normalFromMat4:xW,projection:EW,str:wW,frob:MW,add:CW,subtract:Ok,multiplyScalar:SW,multiplyScalarAndAdd:bW,exactEquals:IW,equals:TW,mul:BW,sub:RW},Symbol.toStringTag,{value:"Module"}));function ln(){var t=new Ut(16);return Ut!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function DW(t){var e=new Ut(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function FW(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function LW(t,e,n,i,r,s,o,a,l,c,u,h,f,d,p,m){var g=new Ut(16);return g[0]=t,g[1]=e,g[2]=n,g[3]=i,g[4]=r,g[5]=s,g[6]=o,g[7]=a,g[8]=l,g[9]=c,g[10]=u,g[11]=h,g[12]=f,g[13]=d,g[14]=p,g[15]=m,g}function kW(t,e,n,i,r,s,o,a,l,c,u,h,f,d,p,m,g){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t[4]=s,t[5]=o,t[6]=a,t[7]=l,t[8]=c,t[9]=u,t[10]=h,t[11]=f,t[12]=d,t[13]=p,t[14]=m,t[15]=g,t}function Nk(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function UW(t,e){if(t===e){var n=e[1],i=e[2],r=e[3],s=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=s,t[11]=e[14],t[12]=r,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function wb(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],f=e[10],d=e[11],p=e[12],m=e[13],g=e[14],_=e[15],y=n*a-i*o,x=n*l-r*o,E=n*c-s*o,w=i*l-r*a,S=i*c-s*a,b=r*c-s*l,M=u*m-h*p,T=u*g-f*p,B=u*_-d*p,L=h*g-f*m,F=h*_-d*m,U=f*_-d*g,k=y*U-x*F+E*L+w*B-S*T+b*M;return k?(k=1/k,t[0]=(a*U-l*F+c*L)*k,t[1]=(r*F-i*U-s*L)*k,t[2]=(m*b-g*S+_*w)*k,t[3]=(f*S-h*b-d*w)*k,t[4]=(l*B-o*U-c*T)*k,t[5]=(n*U-r*B+s*T)*k,t[6]=(g*E-p*b-_*x)*k,t[7]=(u*b-f*E+d*x)*k,t[8]=(o*F-a*B+c*M)*k,t[9]=(i*B-n*F-s*M)*k,t[10]=(p*S-m*E+_*y)*k,t[11]=(h*E-u*S-d*y)*k,t[12]=(a*T-o*L-l*M)*k,t[13]=(n*L-i*T+r*M)*k,t[14]=(m*x-p*w-g*y)*k,t[15]=(u*w-h*x+f*y)*k,t):null}function OW(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],f=e[10],d=e[11],p=e[12],m=e[13],g=e[14],_=e[15];return t[0]=a*(f*_-d*g)-h*(l*_-c*g)+m*(l*d-c*f),t[1]=-(i*(f*_-d*g)-h*(r*_-s*g)+m*(r*d-s*f)),t[2]=i*(l*_-c*g)-a*(r*_-s*g)+m*(r*c-s*l),t[3]=-(i*(l*d-c*f)-a*(r*d-s*f)+h*(r*c-s*l)),t[4]=-(o*(f*_-d*g)-u*(l*_-c*g)+p*(l*d-c*f)),t[5]=n*(f*_-d*g)-u*(r*_-s*g)+p*(r*d-s*f),t[6]=-(n*(l*_-c*g)-o*(r*_-s*g)+p*(r*c-s*l)),t[7]=n*(l*d-c*f)-o*(r*d-s*f)+u*(r*c-s*l),t[8]=o*(h*_-d*m)-u*(a*_-c*m)+p*(a*d-c*h),t[9]=-(n*(h*_-d*m)-u*(i*_-s*m)+p*(i*d-s*h)),t[10]=n*(a*_-c*m)-o*(i*_-s*m)+p*(i*c-s*a),t[11]=-(n*(a*d-c*h)-o*(i*d-s*h)+u*(i*c-s*a)),t[12]=-(o*(h*g-f*m)-u*(a*g-l*m)+p*(a*f-l*h)),t[13]=n*(h*g-f*m)-u*(i*g-r*m)+p*(i*f-r*h),t[14]=-(n*(a*g-l*m)-o*(i*g-r*m)+p*(i*l-r*a)),t[15]=n*(a*f-l*h)-o*(i*f-r*h)+u*(i*l-r*a),t}function NW(t){var e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],l=t[7],c=t[8],u=t[9],h=t[10],f=t[11],d=t[12],p=t[13],m=t[14],g=t[15],_=e*o-n*s,y=e*a-i*s,x=e*l-r*s,E=n*a-i*o,w=n*l-r*o,S=i*l-r*a,b=c*p-u*d,M=c*m-h*d,T=c*g-f*d,B=u*m-h*p,L=u*g-f*p,F=h*g-f*m;return _*F-y*L+x*B+E*T-w*M+S*b}function Kt(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],f=e[9],d=e[10],p=e[11],m=e[12],g=e[13],_=e[14],y=e[15],x=n[0],E=n[1],w=n[2],S=n[3];return t[0]=x*i+E*a+w*h+S*m,t[1]=x*r+E*l+w*f+S*g,t[2]=x*s+E*c+w*d+S*_,t[3]=x*o+E*u+w*p+S*y,x=n[4],E=n[5],w=n[6],S=n[7],t[4]=x*i+E*a+w*h+S*m,t[5]=x*r+E*l+w*f+S*g,t[6]=x*s+E*c+w*d+S*_,t[7]=x*o+E*u+w*p+S*y,x=n[8],E=n[9],w=n[10],S=n[11],t[8]=x*i+E*a+w*h+S*m,t[9]=x*r+E*l+w*f+S*g,t[10]=x*s+E*c+w*d+S*_,t[11]=x*o+E*u+w*p+S*y,x=n[12],E=n[13],w=n[14],S=n[15],t[12]=x*i+E*a+w*h+S*m,t[13]=x*r+E*l+w*f+S*g,t[14]=x*s+E*c+w*d+S*_,t[15]=x*o+E*u+w*p+S*y,t}function GW(t,e,n){var i=n[0],r=n[1],s=n[2],o,a,l,c,u,h,f,d,p,m,g,_;return e===t?(t[12]=e[0]*i+e[4]*r+e[8]*s+e[12],t[13]=e[1]*i+e[5]*r+e[9]*s+e[13],t[14]=e[2]*i+e[6]*r+e[10]*s+e[14],t[15]=e[3]*i+e[7]*r+e[11]*s+e[15]):(o=e[0],a=e[1],l=e[2],c=e[3],u=e[4],h=e[5],f=e[6],d=e[7],p=e[8],m=e[9],g=e[10],_=e[11],t[0]=o,t[1]=a,t[2]=l,t[3]=c,t[4]=u,t[5]=h,t[6]=f,t[7]=d,t[8]=p,t[9]=m,t[10]=g,t[11]=_,t[12]=o*i+u*r+p*s+e[12],t[13]=a*i+h*r+m*s+e[13],t[14]=l*i+f*r+g*s+e[14],t[15]=c*i+d*r+_*s+e[15]),t}function zW(t,e,n){var i=n[0],r=n[1],s=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function QW(t,e,n,i){var r=i[0],s=i[1],o=i[2],a=Math.hypot(r,s,o),l,c,u,h,f,d,p,m,g,_,y,x,E,w,S,b,M,T,B,L,F,U,k,X;return a<lt?null:(a=1/a,r*=a,s*=a,o*=a,l=Math.sin(n),c=Math.cos(n),u=1-c,h=e[0],f=e[1],d=e[2],p=e[3],m=e[4],g=e[5],_=e[6],y=e[7],x=e[8],E=e[9],w=e[10],S=e[11],b=r*r*u+c,M=s*r*u+o*l,T=o*r*u-s*l,B=r*s*u-o*l,L=s*s*u+c,F=o*s*u+r*l,U=r*o*u+s*l,k=s*o*u-r*l,X=o*o*u+c,t[0]=h*b+m*M+x*T,t[1]=f*b+g*M+E*T,t[2]=d*b+_*M+w*T,t[3]=p*b+y*M+S*T,t[4]=h*B+m*L+x*F,t[5]=f*B+g*L+E*F,t[6]=d*B+_*L+w*F,t[7]=p*B+y*L+S*F,t[8]=h*U+m*k+x*X,t[9]=f*U+g*k+E*X,t[10]=d*U+_*k+w*X,t[11]=p*U+y*k+S*X,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function HW(t,e,n){var i=Math.sin(n),r=Math.cos(n),s=e[4],o=e[5],a=e[6],l=e[7],c=e[8],u=e[9],h=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*r+c*i,t[5]=o*r+u*i,t[6]=a*r+h*i,t[7]=l*r+f*i,t[8]=c*r-s*i,t[9]=u*r-o*i,t[10]=h*r-a*i,t[11]=f*r-l*i,t}function VW(t,e,n){var i=Math.sin(n),r=Math.cos(n),s=e[0],o=e[1],a=e[2],l=e[3],c=e[8],u=e[9],h=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*r-c*i,t[1]=o*r-u*i,t[2]=a*r-h*i,t[3]=l*r-f*i,t[8]=s*i+c*r,t[9]=o*i+u*r,t[10]=a*i+h*r,t[11]=l*i+f*r,t}function WW(t,e,n){var i=Math.sin(n),r=Math.cos(n),s=e[0],o=e[1],a=e[2],l=e[3],c=e[4],u=e[5],h=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*r+c*i,t[1]=o*r+u*i,t[2]=a*r+h*i,t[3]=l*r+f*i,t[4]=c*r-s*i,t[5]=u*r-o*i,t[6]=h*r-a*i,t[7]=f*r-l*i,t}function x_(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function ji(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Ed(t,e,n){var i=n[0],r=n[1],s=n[2],o=Math.hypot(i,r,s),a,l,c;return o<lt?null:(o=1/o,i*=o,r*=o,s*=o,a=Math.sin(e),l=Math.cos(e),c=1-l,t[0]=i*i*c+l,t[1]=r*i*c+s*a,t[2]=s*i*c-r*a,t[3]=0,t[4]=i*r*c-s*a,t[5]=r*r*c+l,t[6]=s*r*c+i*a,t[7]=0,t[8]=i*s*c+r*a,t[9]=r*s*c-i*a,t[10]=s*s*c+l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function jW(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function XW(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function YW(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Gk(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=i+i,l=r+r,c=s+s,u=i*a,h=i*l,f=i*c,d=r*l,p=r*c,m=s*c,g=o*a,_=o*l,y=o*c;return t[0]=1-(d+m),t[1]=h+y,t[2]=f-_,t[3]=0,t[4]=h-y,t[5]=1-(u+m),t[6]=p+g,t[7]=0,t[8]=f+_,t[9]=p-g,t[10]=1-(u+d),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function qW(t,e){var n=new Ut(3),i=-e[0],r=-e[1],s=-e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=i*i+r*r+s*s+o*o;return h>0?(n[0]=(a*o+u*i+l*s-c*r)*2/h,n[1]=(l*o+u*r+c*i-a*s)*2/h,n[2]=(c*o+u*s+a*r-l*i)*2/h):(n[0]=(a*o+u*i+l*s-c*r)*2,n[1]=(l*o+u*r+c*i-a*s)*2,n[2]=(c*o+u*s+a*r-l*i)*2),Gk(t,e,n),t}function zk(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function Qk(t,e){var n=e[0],i=e[1],r=e[2],s=e[4],o=e[5],a=e[6],l=e[8],c=e[9],u=e[10];return t[0]=Math.hypot(n,i,r),t[1]=Math.hypot(s,o,a),t[2]=Math.hypot(l,c,u),t}function Hk(t,e){var n=new Ut(3);Qk(n,e);var i=1/n[0],r=1/n[1],s=1/n[2],o=e[0]*i,a=e[1]*r,l=e[2]*s,c=e[4]*i,u=e[5]*r,h=e[6]*s,f=e[8]*i,d=e[9]*r,p=e[10]*s,m=o+u+p,g=0;return m>0?(g=Math.sqrt(m+1)*2,t[3]=.25*g,t[0]=(h-d)/g,t[1]=(f-l)/g,t[2]=(a-c)/g):o>u&&o>p?(g=Math.sqrt(1+o-u-p)*2,t[3]=(h-d)/g,t[0]=.25*g,t[1]=(a+c)/g,t[2]=(f+l)/g):u>p?(g=Math.sqrt(1+u-o-p)*2,t[3]=(f-l)/g,t[0]=(a+c)/g,t[1]=.25*g,t[2]=(h+d)/g):(g=Math.sqrt(1+p-o-u)*2,t[3]=(a-c)/g,t[0]=(f+l)/g,t[1]=(h+d)/g,t[2]=.25*g),t}function JW(t,e,n,i){var r=e[0],s=e[1],o=e[2],a=e[3],l=r+r,c=s+s,u=o+o,h=r*l,f=r*c,d=r*u,p=s*c,m=s*u,g=o*u,_=a*l,y=a*c,x=a*u,E=i[0],w=i[1],S=i[2];return t[0]=(1-(p+g))*E,t[1]=(f+x)*E,t[2]=(d-y)*E,t[3]=0,t[4]=(f-x)*w,t[5]=(1-(h+g))*w,t[6]=(m+_)*w,t[7]=0,t[8]=(d+y)*S,t[9]=(m-_)*S,t[10]=(1-(h+p))*S,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function KW(t,e,n,i,r){var s=e[0],o=e[1],a=e[2],l=e[3],c=s+s,u=o+o,h=a+a,f=s*c,d=s*u,p=s*h,m=o*u,g=o*h,_=a*h,y=l*c,x=l*u,E=l*h,w=i[0],S=i[1],b=i[2],M=r[0],T=r[1],B=r[2],L=(1-(m+_))*w,F=(d+E)*w,U=(p-x)*w,k=(d-E)*S,X=(1-(f+_))*S,Y=(g+y)*S,Z=(p+x)*b,G=(g-y)*b,O=(1-(f+m))*b;return t[0]=L,t[1]=F,t[2]=U,t[3]=0,t[4]=k,t[5]=X,t[6]=Y,t[7]=0,t[8]=Z,t[9]=G,t[10]=O,t[11]=0,t[12]=n[0]+M-(L*M+k*T+Z*B),t[13]=n[1]+T-(F*M+X*T+G*B),t[14]=n[2]+B-(U*M+Y*T+O*B),t[15]=1,t}function ZW(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=n+n,a=i+i,l=r+r,c=n*o,u=i*o,h=i*a,f=r*o,d=r*a,p=r*l,m=s*o,g=s*a,_=s*l;return t[0]=1-h-p,t[1]=u+_,t[2]=f-g,t[3]=0,t[4]=u-_,t[5]=1-c-p,t[6]=d+m,t[7]=0,t[8]=f+g,t[9]=d-m,t[10]=1-c-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Vk(t,e,n,i,r,s,o){var a=1/(n-e),l=1/(r-i),c=1/(s-o);return t[0]=s*2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s*2*l,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(r+i)*l,t[10]=(o+s)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*s*2*c,t[15]=0,t}function Wk(t,e,n,i,r){var s=1/Math.tan(e/2),o;return t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,r!=null&&r!==1/0?(o=1/(i-r),t[10]=(r+i)*o,t[14]=2*r*i*o):(t[10]=-1,t[14]=-2*i),t}var $W=Wk;function ej(t,e,n,i,r){var s=1/Math.tan(e/2),o;return t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,r!=null&&r!==1/0?(o=1/(i-r),t[10]=r*o,t[14]=r*i*o):(t[10]=-1,t[14]=-i),t}function tj(t,e,n,i){var r=Math.tan(e.upDegrees*Math.PI/180),s=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),a=Math.tan(e.rightDegrees*Math.PI/180),l=2/(o+a),c=2/(r+s);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-((o-a)*l*.5),t[9]=(r-s)*c*.5,t[10]=i/(n-i),t[11]=-1,t[12]=0,t[13]=0,t[14]=i*n/(n-i),t[15]=0,t}function jk(t,e,n,i,r,s,o){var a=1/(e-n),l=1/(i-r),c=1/(s-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*a,t[13]=(r+i)*l,t[14]=(o+s)*c,t[15]=1,t}var nj=jk;function ij(t,e,n,i,r,s,o){var a=1/(e-n),l=1/(i-r),c=1/(s-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=c,t[11]=0,t[12]=(e+n)*a,t[13]=(r+i)*l,t[14]=s*c,t[15]=1,t}function rj(t,e,n,i){var r,s,o,a,l,c,u,h,f,d,p=e[0],m=e[1],g=e[2],_=i[0],y=i[1],x=i[2],E=n[0],w=n[1],S=n[2];return Math.abs(p-E)<lt&&Math.abs(m-w)<lt&&Math.abs(g-S)<lt?Nk(t):(u=p-E,h=m-w,f=g-S,d=1/Math.hypot(u,h,f),u*=d,h*=d,f*=d,r=y*f-x*h,s=x*u-_*f,o=_*h-y*u,d=Math.hypot(r,s,o),d?(d=1/d,r*=d,s*=d,o*=d):(r=0,s=0,o=0),a=h*o-f*s,l=f*r-u*o,c=u*s-h*r,d=Math.hypot(a,l,c),d?(d=1/d,a*=d,l*=d,c*=d):(a=0,l=0,c=0),t[0]=r,t[1]=a,t[2]=u,t[3]=0,t[4]=s,t[5]=l,t[6]=h,t[7]=0,t[8]=o,t[9]=c,t[10]=f,t[11]=0,t[12]=-(r*p+s*m+o*g),t[13]=-(a*p+l*m+c*g),t[14]=-(u*p+h*m+f*g),t[15]=1,t)}function sj(t,e,n,i){var r=e[0],s=e[1],o=e[2],a=i[0],l=i[1],c=i[2],u=r-n[0],h=s-n[1],f=o-n[2],d=u*u+h*h+f*f;d>0&&(d=1/Math.sqrt(d),u*=d,h*=d,f*=d);var p=l*f-c*h,m=c*u-a*f,g=a*h-l*u;return d=p*p+m*m+g*g,d>0&&(d=1/Math.sqrt(d),p*=d,m*=d,g*=d),t[0]=p,t[1]=m,t[2]=g,t[3]=0,t[4]=h*g-f*m,t[5]=f*p-u*g,t[6]=u*m-h*p,t[7]=0,t[8]=u,t[9]=h,t[10]=f,t[11]=0,t[12]=r,t[13]=s,t[14]=o,t[15]=1,t}function oj(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function aj(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function lj(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function Xk(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function cj(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function uj(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t[4]=e[4]+n[4]*i,t[5]=e[5]+n[5]*i,t[6]=e[6]+n[6]*i,t[7]=e[7]+n[7]*i,t[8]=e[8]+n[8]*i,t[9]=e[9]+n[9]*i,t[10]=e[10]+n[10]*i,t[11]=e[11]+n[11]*i,t[12]=e[12]+n[12]*i,t[13]=e[13]+n[13]*i,t[14]=e[14]+n[14]*i,t[15]=e[15]+n[15]*i,t}function hj(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function fj(t,e){var n=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],u=t[8],h=t[9],f=t[10],d=t[11],p=t[12],m=t[13],g=t[14],_=t[15],y=e[0],x=e[1],E=e[2],w=e[3],S=e[4],b=e[5],M=e[6],T=e[7],B=e[8],L=e[9],F=e[10],U=e[11],k=e[12],X=e[13],Y=e[14],Z=e[15];return Math.abs(n-y)<=lt*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(i-x)<=lt*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(r-E)<=lt*Math.max(1,Math.abs(r),Math.abs(E))&&Math.abs(s-w)<=lt*Math.max(1,Math.abs(s),Math.abs(w))&&Math.abs(o-S)<=lt*Math.max(1,Math.abs(o),Math.abs(S))&&Math.abs(a-b)<=lt*Math.max(1,Math.abs(a),Math.abs(b))&&Math.abs(l-M)<=lt*Math.max(1,Math.abs(l),Math.abs(M))&&Math.abs(c-T)<=lt*Math.max(1,Math.abs(c),Math.abs(T))&&Math.abs(u-B)<=lt*Math.max(1,Math.abs(u),Math.abs(B))&&Math.abs(h-L)<=lt*Math.max(1,Math.abs(h),Math.abs(L))&&Math.abs(f-F)<=lt*Math.max(1,Math.abs(f),Math.abs(F))&&Math.abs(d-U)<=lt*Math.max(1,Math.abs(d),Math.abs(U))&&Math.abs(p-k)<=lt*Math.max(1,Math.abs(p),Math.abs(k))&&Math.abs(m-X)<=lt*Math.max(1,Math.abs(m),Math.abs(X))&&Math.abs(g-Y)<=lt*Math.max(1,Math.abs(g),Math.abs(Y))&&Math.abs(_-Z)<=lt*Math.max(1,Math.abs(_),Math.abs(Z))}var dj=Kt,pj=Xk;const mj=Object.freeze(Object.defineProperty({__proto__:null,create:ln,clone:DW,copy:FW,fromValues:LW,set:kW,identity:Nk,transpose:UW,invert:wb,adjoint:OW,determinant:NW,multiply:Kt,translate:GW,scale:zW,rotate:QW,rotateX:HW,rotateY:VW,rotateZ:WW,fromTranslation:x_,fromScaling:ji,fromRotation:Ed,fromXRotation:jW,fromYRotation:XW,fromZRotation:YW,fromRotationTranslation:Gk,fromQuat2:qW,getTranslation:zk,getScaling:Qk,getRotation:Hk,fromRotationTranslationScale:JW,fromRotationTranslationScaleOrigin:KW,fromQuat:ZW,frustum:Vk,perspectiveNO:Wk,perspective:$W,perspectiveZO:ej,perspectiveFromFieldOfView:tj,orthoNO:jk,ortho:nj,orthoZO:ij,lookAt:rj,targetTo:sj,str:oj,frob:aj,add:lj,subtract:Xk,multiplyScalar:cj,multiplyScalarAndAdd:uj,exactEquals:hj,equals:fj,mul:dj,sub:pj},Symbol.toStringTag,{value:"Module"}));function Qd(){var t=new Ut(3);return Ut!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Aj(t){var e=new Ut(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Mb(t){var e=t[0],n=t[1],i=t[2];return Math.hypot(e,n,i)}function ZM(t,e,n){var i=new Ut(3);return i[0]=t,i[1]=e,i[2]=n,i}function gj(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function vj(t,e,n,i){return t[0]=e,t[1]=n,t[2]=i,t}function _j(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function Yk(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function qk(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function Jk(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function yj(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function xj(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function Ej(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function wj(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function Mj(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function Cj(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function Sj(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t}function Kk(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2];return Math.hypot(n,i,r)}function Zk(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2];return n*n+i*i+r*r}function $k(t){var e=t[0],n=t[1],i=t[2];return e*e+n*n+i*i}function bj(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function Ij(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function Cb(t,e){var n=e[0],i=e[1],r=e[2],s=n*n+i*i+r*r;return s>0&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t}function Sb(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Hp(t,e,n){var i=e[0],r=e[1],s=e[2],o=n[0],a=n[1],l=n[2];return t[0]=r*l-s*a,t[1]=s*o-i*l,t[2]=i*a-r*o,t}function Tj(t,e,n,i){var r=e[0],s=e[1],o=e[2];return t[0]=r+i*(n[0]-r),t[1]=s+i*(n[1]-s),t[2]=o+i*(n[2]-o),t}function Bj(t,e,n,i,r,s){var o=s*s,a=o*(2*s-3)+1,l=o*(s-2)+s,c=o*(s-1),u=o*(3-2*s);return t[0]=e[0]*a+n[0]*l+i[0]*c+r[0]*u,t[1]=e[1]*a+n[1]*l+i[1]*c+r[1]*u,t[2]=e[2]*a+n[2]*l+i[2]*c+r[2]*u,t}function Rj(t,e,n,i,r,s){var o=1-s,a=o*o,l=s*s,c=a*o,u=3*s*a,h=3*l*o,f=l*s;return t[0]=e[0]*c+n[0]*u+i[0]*h+r[0]*f,t[1]=e[1]*c+n[1]*u+i[1]*h+r[1]*f,t[2]=e[2]*c+n[2]*u+i[2]*h+r[2]*f,t}function Pj(t,e){e=e||1;var n=_o()*2*Math.PI,i=_o()*2-1,r=Math.sqrt(1-i*i)*e;return t[0]=Math.cos(n)*r,t[1]=Math.sin(n)*r,t[2]=i*e,t}function dy(t,e,n){var i=e[0],r=e[1],s=e[2],o=n[3]*i+n[7]*r+n[11]*s+n[15];return o=o||1,t[0]=(n[0]*i+n[4]*r+n[8]*s+n[12])/o,t[1]=(n[1]*i+n[5]*r+n[9]*s+n[13])/o,t[2]=(n[2]*i+n[6]*r+n[10]*s+n[14])/o,t}function Dj(t,e,n){var i=e[0],r=e[1],s=e[2];return t[0]=i*n[0]+r*n[3]+s*n[6],t[1]=i*n[1]+r*n[4]+s*n[7],t[2]=i*n[2]+r*n[5]+s*n[8],t}function Fj(t,e,n){var i=n[0],r=n[1],s=n[2],o=n[3],a=e[0],l=e[1],c=e[2],u=r*c-s*l,h=s*a-i*c,f=i*l-r*a,d=r*f-s*h,p=s*u-i*f,m=i*h-r*u,g=o*2;return u*=g,h*=g,f*=g,d*=2,p*=2,m*=2,t[0]=a+u+d,t[1]=l+h+p,t[2]=c+f+m,t}function Lj(t,e,n,i){var r=[],s=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],s[0]=r[0],s[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),s[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function kj(t,e,n,i){var r=[],s=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],s[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),s[1]=r[1],s[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function Uj(t,e,n,i){var r=[],s=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],s[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),s[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),s[2]=r[2],t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function Oj(t,e){var n=t[0],i=t[1],r=t[2],s=e[0],o=e[1],a=e[2],l=Math.sqrt(n*n+i*i+r*r),c=Math.sqrt(s*s+o*o+a*a),u=l*c,h=u&&Sb(t,e)/u;return Math.acos(Math.min(Math.max(h,-1),1))}function Nj(t){return t[0]=0,t[1]=0,t[2]=0,t}function Gj(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function zj(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function Qj(t,e){var n=t[0],i=t[1],r=t[2],s=e[0],o=e[1],a=e[2];return Math.abs(n-s)<=lt*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-o)<=lt*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(r-a)<=lt*Math.max(1,Math.abs(r),Math.abs(a))}var Hj=Yk,Vj=qk,Wj=Jk,jj=Kk,Xj=Zk,eU=Mb,Yj=$k,qj=function(){var t=Qd();return function(e,n,i,r,s,o){var a,l;for(n||(n=3),i||(i=0),r?l=Math.min(r*n+i,e.length):l=e.length,a=i;a<l;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],s(t,t,o),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2];return e}}();const Jj=Object.freeze(Object.defineProperty({__proto__:null,create:Qd,clone:Aj,length:Mb,fromValues:ZM,copy:gj,set:vj,add:_j,subtract:Yk,multiply:qk,divide:Jk,ceil:yj,floor:xj,min:Ej,max:wj,round:Mj,scale:Cj,scaleAndAdd:Sj,distance:Kk,squaredDistance:Zk,squaredLength:$k,negate:bj,inverse:Ij,normalize:Cb,dot:Sb,cross:Hp,lerp:Tj,hermite:Bj,bezier:Rj,random:Pj,transformMat4:dy,transformMat3:Dj,transformQuat:Fj,rotateX:Lj,rotateY:kj,rotateZ:Uj,angle:Oj,zero:Nj,str:Gj,exactEquals:zj,equals:Qj,sub:Hj,mul:Vj,div:Wj,dist:jj,sqrDist:Xj,len:eU,sqrLen:Yj,forEach:qj},Symbol.toStringTag,{value:"Module"}));function tU(){var t=new Ut(4);return Ut!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function nU(t){var e=new Ut(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function iU(t,e,n,i){var r=new Ut(4);return r[0]=t,r[1]=e,r[2]=n,r[3]=i,r}function rU(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function sU(t,e,n,i,r){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t}function oU(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function aU(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function lU(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function cU(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function Kj(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function Zj(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function $j(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t}function eX(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t}function tX(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function uU(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function nX(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t}function hU(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2],s=e[3]-t[3];return Math.hypot(n,i,r,s)}function fU(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2],s=e[3]-t[3];return n*n+i*i+r*r+s*s}function bb(t){var e=t[0],n=t[1],i=t[2],r=t[3];return Math.hypot(e,n,i,r)}function Ib(t){var e=t[0],n=t[1],i=t[2],r=t[3];return e*e+n*n+i*i+r*r}function iX(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function rX(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function dU(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=n*n+i*i+r*r+s*s;return o>0&&(o=1/Math.sqrt(o)),t[0]=n*o,t[1]=i*o,t[2]=r*o,t[3]=s*o,t}function pU(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function sX(t,e,n,i){var r=n[0]*i[1]-n[1]*i[0],s=n[0]*i[2]-n[2]*i[0],o=n[0]*i[3]-n[3]*i[0],a=n[1]*i[2]-n[2]*i[1],l=n[1]*i[3]-n[3]*i[1],c=n[2]*i[3]-n[3]*i[2],u=e[0],h=e[1],f=e[2],d=e[3];return t[0]=h*c-f*l+d*a,t[1]=-(u*c)+f*o-d*s,t[2]=u*l-h*o+d*r,t[3]=-(u*a)+h*s-f*r,t}function mU(t,e,n,i){var r=e[0],s=e[1],o=e[2],a=e[3];return t[0]=r+i*(n[0]-r),t[1]=s+i*(n[1]-s),t[2]=o+i*(n[2]-o),t[3]=a+i*(n[3]-a),t}function oX(t,e){e=e||1;var n,i,r,s,o,a;do n=_o()*2-1,i=_o()*2-1,o=n*n+i*i;while(o>=1);do r=_o()*2-1,s=_o()*2-1,a=r*r+s*s;while(a>=1);var l=Math.sqrt((1-o)/a);return t[0]=e*n,t[1]=e*i,t[2]=e*r*l,t[3]=e*s*l,t}function aX(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3];return t[0]=n[0]*i+n[4]*r+n[8]*s+n[12]*o,t[1]=n[1]*i+n[5]*r+n[9]*s+n[13]*o,t[2]=n[2]*i+n[6]*r+n[10]*s+n[14]*o,t[3]=n[3]*i+n[7]*r+n[11]*s+n[15]*o,t}function lX(t,e,n){var i=e[0],r=e[1],s=e[2],o=n[0],a=n[1],l=n[2],c=n[3],u=c*i+a*s-l*r,h=c*r+l*i-o*s,f=c*s+o*r-a*i,d=-o*i-a*r-l*s;return t[0]=u*c+d*-o+h*-l-f*-a,t[1]=h*c+d*-a+f*-o-u*-l,t[2]=f*c+d*-l+u*-a-h*-o,t[3]=e[3],t}function cX(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function uX(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function AU(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function gU(t,e){var n=t[0],i=t[1],r=t[2],s=t[3],o=e[0],a=e[1],l=e[2],c=e[3];return Math.abs(n-o)<=lt*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-a)<=lt*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(r-l)<=lt*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(s-c)<=lt*Math.max(1,Math.abs(s),Math.abs(c))}var hX=aU,fX=lU,dX=cU,pX=hU,mX=fU,AX=bb,gX=Ib,vX=function(){var t=tU();return function(e,n,i,r,s,o){var a,l;for(n||(n=4),i||(i=0),r?l=Math.min(r*n+i,e.length):l=e.length,a=i;a<l;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],t[3]=e[a+3],s(t,t,o),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2],e[a+3]=t[3];return e}}();const _X=Object.freeze(Object.defineProperty({__proto__:null,create:tU,clone:nU,fromValues:iU,copy:rU,set:sU,add:oU,subtract:aU,multiply:lU,divide:cU,ceil:Kj,floor:Zj,min:$j,max:eX,round:tX,scale:uU,scaleAndAdd:nX,distance:hU,squaredDistance:fU,length:bb,squaredLength:Ib,negate:iX,inverse:rX,normalize:dU,dot:pU,cross:sX,lerp:mU,random:oX,transformMat4:aX,transformQuat:lX,zero:cX,str:uX,exactEquals:AU,equals:gU,sub:hX,mul:fX,div:dX,dist:pX,sqrDist:mX,len:AX,sqrLen:gX,forEach:vX},Symbol.toStringTag,{value:"Module"}));function E_(){var t=new Ut(4);return Ut!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function yX(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function vU(t,e,n){n=n*.5;var i=Math.sin(n);return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=Math.cos(n),t}function xX(t,e){var n=Math.acos(e[3])*2,i=Math.sin(n/2);return i>lt?(t[0]=e[0]/i,t[1]=e[1]/i,t[2]=e[2]/i):(t[0]=1,t[1]=0,t[2]=0),n}function EX(t,e){var n=Bb(t,e);return Math.acos(2*n*n-1)}function _U(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=n[0],l=n[1],c=n[2],u=n[3];return t[0]=i*u+o*a+r*c-s*l,t[1]=r*u+o*l+s*a-i*c,t[2]=s*u+o*c+i*l-r*a,t[3]=o*u-i*a-r*l-s*c,t}function yU(t,e,n){n*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(n),l=Math.cos(n);return t[0]=i*l+o*a,t[1]=r*l+s*a,t[2]=s*l-r*a,t[3]=o*l-i*a,t}function xU(t,e,n){n*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(n),l=Math.cos(n);return t[0]=i*l-s*a,t[1]=r*l+o*a,t[2]=s*l+i*a,t[3]=o*l-r*a,t}function EU(t,e,n){n*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(n),l=Math.cos(n);return t[0]=i*l+r*a,t[1]=r*l-i*a,t[2]=s*l+o*a,t[3]=o*l-s*a,t}function wX(t,e){var n=e[0],i=e[1],r=e[2];return t[0]=n,t[1]=i,t[2]=r,t[3]=Math.sqrt(Math.abs(1-n*n-i*i-r*r)),t}function wU(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=Math.sqrt(n*n+i*i+r*r),a=Math.exp(s),l=o>0?a*Math.sin(o)/o:0;return t[0]=n*l,t[1]=i*l,t[2]=r*l,t[3]=a*Math.cos(o),t}function MU(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=Math.sqrt(n*n+i*i+r*r),a=o>0?Math.atan2(o,s)/o:0;return t[0]=n*a,t[1]=i*a,t[2]=r*a,t[3]=.5*Math.log(n*n+i*i+r*r+s*s),t}function MX(t,e,n){return MU(t,e),SU(t,t,n),wU(t,t),t}function Bv(t,e,n,i){var r=e[0],s=e[1],o=e[2],a=e[3],l=n[0],c=n[1],u=n[2],h=n[3],f,d,p,m,g;return d=r*l+s*c+o*u+a*h,d<0&&(d=-d,l=-l,c=-c,u=-u,h=-h),1-d>lt?(f=Math.acos(d),p=Math.sin(f),m=Math.sin((1-i)*f)/p,g=Math.sin(i*f)/p):(m=1-i,g=i),t[0]=m*r+g*l,t[1]=m*s+g*c,t[2]=m*o+g*u,t[3]=m*a+g*h,t}function CX(t){var e=_o(),n=_o(),i=_o(),r=Math.sqrt(1-e),s=Math.sqrt(e);return t[0]=r*Math.sin(2*Math.PI*n),t[1]=r*Math.cos(2*Math.PI*n),t[2]=s*Math.sin(2*Math.PI*i),t[3]=s*Math.cos(2*Math.PI*i),t}function SX(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=n*n+i*i+r*r+s*s,a=o?1/o:0;return t[0]=-n*a,t[1]=-i*a,t[2]=-r*a,t[3]=s*a,t}function bX(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function CU(t,e){var n=e[0]+e[4]+e[8],i;if(n>0)i=Math.sqrt(n+1),t[3]=.5*i,i=.5/i,t[0]=(e[5]-e[7])*i,t[1]=(e[6]-e[2])*i,t[2]=(e[1]-e[3])*i;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[r*3+r]&&(r=2);var s=(r+1)%3,o=(r+2)%3;i=Math.sqrt(e[r*3+r]-e[s*3+s]-e[o*3+o]+1),t[r]=.5*i,i=.5/i,t[3]=(e[s*3+o]-e[o*3+s])*i,t[s]=(e[s*3+r]+e[r*3+s])*i,t[o]=(e[o*3+r]+e[r*3+o])*i}return t}function IX(t,e,n,i){var r=.5*Math.PI/180;e*=r,n*=r,i*=r;var s=Math.sin(e),o=Math.cos(e),a=Math.sin(n),l=Math.cos(n),c=Math.sin(i),u=Math.cos(i);return t[0]=s*l*u-o*a*c,t[1]=o*a*u+s*l*c,t[2]=o*l*c-s*a*u,t[3]=o*l*u+s*a*c,t}function TX(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var BX=nU,RX=iU,Tb=rU,PX=sU,DX=oU,FX=_U,SU=uU,Bb=pU,LX=mU,Rb=bb,kX=Rb,Pb=Ib,UX=Pb,Db=dU,OX=AU,NX=gU,GX=function(){var t=Qd(),e=ZM(1,0,0),n=ZM(0,1,0);return function(i,r,s){var o=Sb(r,s);return o<-.999999?(Hp(t,e,r),eU(t)<1e-6&&Hp(t,n,r),Cb(t,t),vU(i,t,Math.PI),i):o>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(Hp(t,r,s),i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=1+o,Db(i,i))}}(),zX=function(){var t=E_(),e=E_();return function(n,i,r,s,o,a){return Bv(t,i,o,a),Bv(e,r,s,a),Bv(n,t,e,2*a*(1-a)),n}}(),QX=function(){var t=kk();return function(e,n,i,r){return t[0]=i[0],t[3]=i[1],t[6]=i[2],t[1]=r[0],t[4]=r[1],t[7]=r[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],Db(e,CU(e,t))}}();const HX=Object.freeze(Object.defineProperty({__proto__:null,create:E_,identity:yX,setAxisAngle:vU,getAxisAngle:xX,getAngle:EX,multiply:_U,rotateX:yU,rotateY:xU,rotateZ:EU,calculateW:wX,exp:wU,ln:MU,pow:MX,slerp:Bv,random:CX,invert:SX,conjugate:bX,fromMat3:CU,fromEuler:IX,str:TX,clone:BX,fromValues:RX,copy:Tb,set:PX,add:DX,mul:FX,scale:SU,dot:Bb,lerp:LX,length:Rb,len:kX,squaredLength:Pb,sqrLen:UX,normalize:Db,exactEquals:OX,equals:NX,rotationTo:GX,sqlerp:zX,setAxes:QX},Symbol.toStringTag,{value:"Module"}));function VX(){var t=new Ut(8);return Ut!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t}function WX(t){var e=new Ut(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function jX(t,e,n,i,r,s,o,a){var l=new Ut(8);return l[0]=t,l[1]=e,l[2]=n,l[3]=i,l[4]=r,l[5]=s,l[6]=o,l[7]=a,l}function XX(t,e,n,i,r,s,o){var a=new Ut(8);a[0]=t,a[1]=e,a[2]=n,a[3]=i;var l=r*.5,c=s*.5,u=o*.5;return a[4]=l*i+c*n-u*e,a[5]=c*i+u*t-l*n,a[6]=u*i+l*e-c*t,a[7]=-l*t-c*e-u*n,a}function bU(t,e,n){var i=n[0]*.5,r=n[1]*.5,s=n[2]*.5,o=e[0],a=e[1],l=e[2],c=e[3];return t[0]=o,t[1]=a,t[2]=l,t[3]=c,t[4]=i*c+r*l-s*a,t[5]=r*c+s*o-i*l,t[6]=s*c+i*a-r*o,t[7]=-i*o-r*a-s*l,t}function YX(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0]*.5,t[5]=e[1]*.5,t[6]=e[2]*.5,t[7]=0,t}function qX(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function JX(t,e){var n=E_();Hk(n,e);var i=new Ut(3);return zk(i,e),bU(t,n,i),t}function IU(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function KX(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function ZX(t,e,n,i,r,s,o,a,l){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t[4]=s,t[5]=o,t[6]=a,t[7]=l,t}var $X=Tb;function eY(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t}var tY=Tb;function nY(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t}function iY(t,e){var n=e[4],i=e[5],r=e[6],s=e[7],o=-e[0],a=-e[1],l=-e[2],c=e[3];return t[0]=(n*c+s*o+i*l-r*a)*2,t[1]=(i*c+s*a+r*o-n*l)*2,t[2]=(r*c+s*l+n*a-i*o)*2,t}function rY(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=n[0]*.5,l=n[1]*.5,c=n[2]*.5,u=e[4],h=e[5],f=e[6],d=e[7];return t[0]=i,t[1]=r,t[2]=s,t[3]=o,t[4]=o*a+r*c-s*l+u,t[5]=o*l+s*a-i*c+h,t[6]=o*c+i*l-r*a+f,t[7]=-i*a-r*l-s*c+d,t}function sY(t,e,n){var i=-e[0],r=-e[1],s=-e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=a*o+u*i+l*s-c*r,f=l*o+u*r+c*i-a*s,d=c*o+u*s+a*r-l*i,p=u*o-a*i-l*r-c*s;return yU(t,e,n),i=t[0],r=t[1],s=t[2],o=t[3],t[4]=h*o+p*i+f*s-d*r,t[5]=f*o+p*r+d*i-h*s,t[6]=d*o+p*s+h*r-f*i,t[7]=p*o-h*i-f*r-d*s,t}function oY(t,e,n){var i=-e[0],r=-e[1],s=-e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=a*o+u*i+l*s-c*r,f=l*o+u*r+c*i-a*s,d=c*o+u*s+a*r-l*i,p=u*o-a*i-l*r-c*s;return xU(t,e,n),i=t[0],r=t[1],s=t[2],o=t[3],t[4]=h*o+p*i+f*s-d*r,t[5]=f*o+p*r+d*i-h*s,t[6]=d*o+p*s+h*r-f*i,t[7]=p*o-h*i-f*r-d*s,t}function aY(t,e,n){var i=-e[0],r=-e[1],s=-e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=a*o+u*i+l*s-c*r,f=l*o+u*r+c*i-a*s,d=c*o+u*s+a*r-l*i,p=u*o-a*i-l*r-c*s;return EU(t,e,n),i=t[0],r=t[1],s=t[2],o=t[3],t[4]=h*o+p*i+f*s-d*r,t[5]=f*o+p*r+d*i-h*s,t[6]=d*o+p*s+h*r-f*i,t[7]=p*o-h*i-f*r-d*s,t}function lY(t,e,n){var i=n[0],r=n[1],s=n[2],o=n[3],a=e[0],l=e[1],c=e[2],u=e[3];return t[0]=a*o+u*i+l*s-c*r,t[1]=l*o+u*r+c*i-a*s,t[2]=c*o+u*s+a*r-l*i,t[3]=u*o-a*i-l*r-c*s,a=e[4],l=e[5],c=e[6],u=e[7],t[4]=a*o+u*i+l*s-c*r,t[5]=l*o+u*r+c*i-a*s,t[6]=c*o+u*s+a*r-l*i,t[7]=u*o-a*i-l*r-c*s,t}function cY(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=n[0],l=n[1],c=n[2],u=n[3];return t[0]=i*u+o*a+r*c-s*l,t[1]=r*u+o*l+s*a-i*c,t[2]=s*u+o*c+i*l-r*a,t[3]=o*u-i*a-r*l-s*c,a=n[4],l=n[5],c=n[6],u=n[7],t[4]=i*u+o*a+r*c-s*l,t[5]=r*u+o*l+s*a-i*c,t[6]=s*u+o*c+i*l-r*a,t[7]=o*u-i*a-r*l-s*c,t}function uY(t,e,n,i){if(Math.abs(i)<lt)return IU(t,e);var r=Math.hypot(n[0],n[1],n[2]);i=i*.5;var s=Math.sin(i),o=s*n[0]/r,a=s*n[1]/r,l=s*n[2]/r,c=Math.cos(i),u=e[0],h=e[1],f=e[2],d=e[3];t[0]=u*c+d*o+h*l-f*a,t[1]=h*c+d*a+f*o-u*l,t[2]=f*c+d*l+u*a-h*o,t[3]=d*c-u*o-h*a-f*l;var p=e[4],m=e[5],g=e[6],_=e[7];return t[4]=p*c+_*o+m*l-g*a,t[5]=m*c+_*a+g*o-p*l,t[6]=g*c+_*l+p*a-m*o,t[7]=_*c-p*o-m*a-g*l,t}function hY(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t}function TU(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=n[4],l=n[5],c=n[6],u=n[7],h=e[4],f=e[5],d=e[6],p=e[7],m=n[0],g=n[1],_=n[2],y=n[3];return t[0]=i*y+o*m+r*_-s*g,t[1]=r*y+o*g+s*m-i*_,t[2]=s*y+o*_+i*g-r*m,t[3]=o*y-i*m-r*g-s*_,t[4]=i*u+o*a+r*c-s*l+h*y+p*m+f*_-d*g,t[5]=r*u+o*l+s*a-i*c+f*y+p*g+d*m-h*_,t[6]=s*u+o*c+i*l-r*a+d*y+p*_+h*g-f*m,t[7]=o*u-i*a-r*l-s*c+p*y-h*m-f*g-d*_,t}var fY=TU;function dY(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t}var BU=Bb;function pY(t,e,n,i){var r=1-i;return BU(e,n)<0&&(i=-i),t[0]=e[0]*r+n[0]*i,t[1]=e[1]*r+n[1]*i,t[2]=e[2]*r+n[2]*i,t[3]=e[3]*r+n[3]*i,t[4]=e[4]*r+n[4]*i,t[5]=e[5]*r+n[5]*i,t[6]=e[6]*r+n[6]*i,t[7]=e[7]*r+n[7]*i,t}function mY(t,e){var n=py(e);return t[0]=-e[0]/n,t[1]=-e[1]/n,t[2]=-e[2]/n,t[3]=e[3]/n,t[4]=-e[4]/n,t[5]=-e[5]/n,t[6]=-e[6]/n,t[7]=e[7]/n,t}function AY(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t}var RU=Rb,gY=RU,py=Pb,vY=py;function _Y(t,e){var n=py(e);if(n>0){n=Math.sqrt(n);var i=e[0]/n,r=e[1]/n,s=e[2]/n,o=e[3]/n,a=e[4],l=e[5],c=e[6],u=e[7],h=i*a+r*l+s*c+o*u;t[0]=i,t[1]=r,t[2]=s,t[3]=o,t[4]=(a-i*h)/n,t[5]=(l-r*h)/n,t[6]=(c-s*h)/n,t[7]=(u-o*h)/n}return t}function yY(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function xY(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]}function EY(t,e){var n=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],u=e[0],h=e[1],f=e[2],d=e[3],p=e[4],m=e[5],g=e[6],_=e[7];return Math.abs(n-u)<=lt*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(i-h)<=lt*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(r-f)<=lt*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(s-d)<=lt*Math.max(1,Math.abs(s),Math.abs(d))&&Math.abs(o-p)<=lt*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-m)<=lt*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(l-g)<=lt*Math.max(1,Math.abs(l),Math.abs(g))&&Math.abs(c-_)<=lt*Math.max(1,Math.abs(c),Math.abs(_))}const wY=Object.freeze(Object.defineProperty({__proto__:null,create:VX,clone:WX,fromValues:jX,fromRotationTranslationValues:XX,fromRotationTranslation:bU,fromTranslation:YX,fromRotation:qX,fromMat4:JX,copy:IU,identity:KX,set:ZX,getReal:$X,getDual:eY,setReal:tY,setDual:nY,getTranslation:iY,translate:rY,rotateX:sY,rotateY:oY,rotateZ:aY,rotateByQuatAppend:lY,rotateByQuatPrepend:cY,rotateAroundAxis:uY,add:hY,multiply:TU,mul:fY,scale:dY,dot:BU,lerp:pY,invert:mY,conjugate:AY,length:RU,len:gY,squaredLength:py,sqrLen:vY,normalize:_Y,str:yY,exactEquals:xY,equals:EY},Symbol.toStringTag,{value:"Module"}));function vo(){var t=new Ut(2);return Ut!=Float32Array&&(t[0]=0,t[1]=0),t}function MY(t){var e=new Ut(2);return e[0]=t[0],e[1]=t[1],e}function CY(t,e){var n=new Ut(2);return n[0]=t,n[1]=e,n}function Mu(t,e){return t[0]=e[0],t[1]=e[1],t}function SY(t,e,n){return t[0]=e,t[1]=n,t}function $M(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function w_(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function PU(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function DU(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function bY(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function IY(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function TY(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function BY(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}function RY(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function eC(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function PY(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t}function FU(t,e){var n=e[0]-t[0],i=e[1]-t[1];return Math.hypot(n,i)}function LU(t,e){var n=e[0]-t[0],i=e[1]-t[1];return n*n+i*i}function M_(t){var e=t[0],n=t[1];return Math.hypot(e,n)}function kU(t){var e=t[0],n=t[1];return e*e+n*n}function DY(t,e){return t[0]=-e[0],t[1]=-e[1],t}function FY(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function LY(t,e){var n=e[0],i=e[1],r=n*n+i*i;return r>0&&(r=1/Math.sqrt(r)),t[0]=e[0]*r,t[1]=e[1]*r,t}function kY(t,e){return t[0]*e[0]+t[1]*e[1]}function UY(t,e,n){var i=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=i,t}function OY(t,e,n,i){var r=e[0],s=e[1];return t[0]=r+i*(n[0]-r),t[1]=s+i*(n[1]-s),t}function NY(t,e){e=e||1;var n=_o()*2*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}function GY(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[2]*r,t[1]=n[1]*i+n[3]*r,t}function zY(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[2]*r+n[4],t[1]=n[1]*i+n[3]*r+n[5],t}function QY(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[3]*r+n[6],t[1]=n[1]*i+n[4]*r+n[7],t}function HY(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[4]*r+n[12],t[1]=n[1]*i+n[5]*r+n[13],t}function VY(t,e,n,i){var r=e[0]-n[0],s=e[1]-n[1],o=Math.sin(i),a=Math.cos(i);return t[0]=r*a-s*o+n[0],t[1]=r*o+s*a+n[1],t}function WY(t,e){var n=t[0],i=t[1],r=e[0],s=e[1],o=Math.sqrt(n*n+i*i)*Math.sqrt(r*r+s*s),a=o&&(n*r+i*s)/o;return Math.acos(Math.min(Math.max(a,-1),1))}function jY(t){return t[0]=0,t[1]=0,t}function XY(t){return"vec2("+t[0]+", "+t[1]+")"}function YY(t,e){return t[0]===e[0]&&t[1]===e[1]}function qY(t,e){var n=t[0],i=t[1],r=e[0],s=e[1];return Math.abs(n-r)<=lt*Math.max(1,Math.abs(n),Math.abs(r))&&Math.abs(i-s)<=lt*Math.max(1,Math.abs(i),Math.abs(s))}var JY=M_,KY=w_,ZY=PU,$Y=DU,eq=FU,tq=LU,nq=kU,iq=function(){var t=vo();return function(e,n,i,r,s,o){var a,l;for(n||(n=2),i||(i=0),r?l=Math.min(r*n+i,e.length):l=e.length,a=i;a<l;a+=n)t[0]=e[a],t[1]=e[a+1],s(t,t,o),e[a]=t[0],e[a+1]=t[1];return e}}();const rq=Object.freeze(Object.defineProperty({__proto__:null,create:vo,clone:MY,fromValues:CY,copy:Mu,set:SY,add:$M,subtract:w_,multiply:PU,divide:DU,ceil:bY,floor:IY,min:TY,max:BY,round:RY,scale:eC,scaleAndAdd:PY,distance:FU,squaredDistance:LU,length:M_,squaredLength:kU,negate:DY,inverse:FY,normalize:LY,dot:kY,cross:UY,lerp:OY,random:NY,transformMat2:GY,transformMat2d:zY,transformMat3:QY,transformMat4:HY,rotate:VY,angle:WY,zero:jY,str:XY,exactEquals:YY,equals:qY,len:JY,sub:KY,mul:ZY,div:$Y,dist:eq,sqrDist:tq,sqrLen:nq,forEach:iq},Symbol.toStringTag,{value:"Module"})),sq=Object.freeze(Object.defineProperty({__proto__:null,glMatrix:aV,mat2:PV,mat2d:nW,mat3:PW,mat4:mj,quat:HX,quat2:wY,vec2:rq,vec3:Jj,vec4:_X},Symbol.toStringTag,{value:"Module"}));function LR(t,e,n,i=.01,r=100){let s=t[2]*2,o=t[3]*2,a=ln();Vk(a,i*(-.5-t[2])/t[0],i*(s-.5-t[2])/t[0],i*(o-.5-t[3])/t[1],i*(-.5-t[3])/t[1],i,r),a[4]*=-1,a[5]*=-1,a[6]*=-1,a[7]*=-1;let l=ln();ji(l,[.5*s,.5*o,1]),Kt(a,l,a),Ed(l,eh(!1)*Math.PI/180,[0,0,1]),Kt(a,l,a);let c=Qd();c[0]=s,c[1]=o,c[2]=0,dy(c,c,l);let u=Math.abs(c[0]),h=Math.abs(c[1]),f=1;return u/e>h/n?f=n/h:f=e/u,ji(l,[f,f,1]),Kt(a,l,a),ji(l,[2/e,2/n,1]),Kt(a,l,a),Ed(l,eh(!1)*Math.PI/-180,[0,0,1]),Kt(a,a,l),a}function eh(t){if(window.screen.orientation)switch(window.screen.orientation.type){case"portrait-primary":return t?90:270;case"landscape-secondary":return 180;case"portrait-secondary":return t?270:90;default:return 0}else if(window.orientation!==void 0)switch(window.orientation){case 0:return t?90:270;case 90:return 0;case 180:return t?270:90;case-90:return 180}return 0}class UU{constructor(){this._funcs=[]}bind(e){this._funcs.push(e)}unbind(e){let n=this._funcs.indexOf(e);n>-1&&this._funcs.splice(n,1)}emit(){for(var e=0,n=this._funcs.length;e<n;e++)this._funcs[e]()}}class oq{constructor(){this._funcs=[]}bind(e){this._funcs.push(e)}unbind(e){let n=this._funcs.indexOf(e);n>-1&&this._funcs.splice(n,1)}emit(e){for(var n=0,i=this._funcs.length;n<i;n++)this._funcs[n](e)}}class aq{constructor(){this.onOutgoingMessage=new UU,this.onIncomingMessage=new oq,this._outgoingMessages=[]}postIncomingMessage(e){this.onIncomingMessage.emit(e)}postOutgoingMessage(e,n){this._outgoingMessages.push({msg:e,transferables:n}),this.onOutgoingMessage.emit()}getOutgoingMessages(){let e=this._outgoingMessages;return this._outgoingMessages=[],e}}var lq=globalThis&&globalThis.__awaiter||function(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(h){o(h)}}function l(u){try{c(i.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(t,e||[])).next())})};let sd=new aq;function cq(t){return lq(this,void 0,void 0,function*(){t||(t=new Worker("/assets/worker.4f75b262.js",{type:"module"})),t.postMessage({t:"wasm",url:new URL("/assets/zappar-cv.7223745e.wasm",self.location).toString()}),yield uq(t);function e(){let n=sd.getOutgoingMessages();for(let i of n)t.postMessage(i.msg,i.transferables)}sd.onOutgoingMessage.bind(e),e(),t.addEventListener("message",n=>{sd.postIncomingMessage(n.data)})})}function uq(t){return new Promise(e=>{let n=i=>{i.data==="loaded"&&(t.removeEventListener("message",n),e())};t.addEventListener("message",n)})}var C_={exports:{}};(function(t,e){(function(n,i){var r="0.7.30",s="",o="?",a="function",l="undefined",c="object",u="string",h="major",f="model",d="name",p="type",m="vendor",g="version",_="architecture",y="console",x="mobile",E="tablet",w="smarttv",S="wearable",b="embedded",M=255,T="Amazon",B="Apple",L="ASUS",F="BlackBerry",U="Browser",k="Chrome",X="Edge",Y="Firefox",Z="Google",G="Huawei",O="LG",z="Microsoft",Q="Motorola",H="Opera",J="Samsung",j="Sony",oe="Xiaomi",K="Zebra",ce="Facebook",he=function(q,W){var ie={};for(var fe in q)W[fe]&&W[fe].length%2===0?ie[fe]=W[fe].concat(q[fe]):ie[fe]=q[fe];return ie},ve=function(q){var W={};for(var ie in q)W[q[ie].toUpperCase()]=q[ie];return W},Me=function(q,W){return typeof q===u?Se(W).indexOf(Se(q))!==-1:!1},Se=function(q){return q.toLowerCase()},le=function(q){return typeof q===u?q.replace(/[^\d\.]/g,s).split(".")[0]:i},pe=function(q,W){if(typeof q===u)return q=q.replace(/^\s\s*/,s).replace(/\s\s*$/,s),typeof W===l?q:q.substring(0,M)},Pe=function(q,W){for(var ie=0,fe,_e,Ge,Ie,Le,ye;ie<W.length&&!Le;){var je=W[ie],re=W[ie+1];for(fe=_e=0;fe<je.length&&!Le;)if(Le=je[fe++].exec(q),Le)for(Ge=0;Ge<re.length;Ge++)ye=Le[++_e],Ie=re[Ge],typeof Ie===c&&Ie.length>0?Ie.length==2?typeof Ie[1]==a?this[Ie[0]]=Ie[1].call(this,ye):this[Ie[0]]=Ie[1]:Ie.length==3?typeof Ie[1]===a&&!(Ie[1].exec&&Ie[1].test)?this[Ie[0]]=ye?Ie[1].call(this,ye,Ie[2]):i:this[Ie[0]]=ye?ye.replace(Ie[1],Ie[2]):i:Ie.length==4&&(this[Ie[0]]=ye?Ie[3].call(this,ye.replace(Ie[1],Ie[2])):i):this[Ie]=ye||i;ie+=2}},Oe=function(q,W){for(var ie in W)if(typeof W[ie]===c&&W[ie].length>0){for(var fe=0;fe<W[ie].length;fe++)if(Me(W[ie][fe],q))return ie===o?i:ie}else if(Me(W[ie],q))return ie===o?i:ie;return q},ke={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Ke={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},xe={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[g,[d,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[g,[d,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[d,g],[/opios[\/ ]+([\w\.]+)/i],[g,[d,H+" Mini"]],[/\bopr\/([\w\.]+)/i],[g,[d,H]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[d,g],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[g,[d,"UC"+U]],[/\bqbcore\/([\w\.]+)/i],[g,[d,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[g,[d,"WeChat"]],[/konqueror\/([\w\.]+)/i],[g,[d,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[g,[d,"IE"]],[/yabrowser\/([\w\.]+)/i],[g,[d,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[d,/(.+)/,"$1 Secure "+U],g],[/\bfocus\/([\w\.]+)/i],[g,[d,Y+" Focus"]],[/\bopt\/([\w\.]+)/i],[g,[d,H+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[g,[d,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[g,[d,"Dolphin"]],[/coast\/([\w\.]+)/i],[g,[d,H+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[g,[d,"MIUI "+U]],[/fxios\/([-\w\.]+)/i],[g,[d,Y]],[/\bqihu|(qi?ho?o?|360)browser/i],[[d,"360 "+U]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[d,/(.+)/,"$1 "+U],g],[/(comodo_dragon)\/([\w\.]+)/i],[[d,/_/g," "],g],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[d,g],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[d],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[d,ce],g],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[d,g],[/\bgsa\/([\w\.]+) .*safari\//i],[g,[d,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[g,[d,k+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[d,k+" WebView"],g],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[g,[d,"Android "+U]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[d,g],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[g,[d,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[g,d],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[d,[g,Oe,ke]],[/(webkit|khtml)\/([\w\.]+)/i],[d,g],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[d,"Netscape"],g],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[g,[d,Y+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[d,g]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[_,"amd64"]],[/(ia32(?=;))/i],[[_,Se]],[/((?:i[346]|x)86)[;\)]/i],[[_,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[_,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[_,"armhf"]],[/windows (ce|mobile); ppc;/i],[[_,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[_,/ower/,s,Se]],[/(sun4\w)[;\)]/i],[[_,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[_,Se]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[f,[m,J],[p,E]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[f,[m,J],[p,x]],[/\((ip(?:hone|od)[\w ]*);/i],[f,[m,B],[p,x]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[f,[m,B],[p,E]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[f,[m,G],[p,E]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],[f,[m,G],[p,x]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[f,/_/g," "],[m,oe],[p,x]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[f,/_/g," "],[m,oe],[p,E]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007)\b/i],[f,[m,"OPPO"],[p,x]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[f,[m,"Vivo"],[p,x]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[f,[m,"Realme"],[p,x]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[f,[m,Q],[p,x]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[f,[m,Q],[p,E]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[f,[m,O],[p,E]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[f,[m,O],[p,x]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[f,[m,"Lenovo"],[p,E]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[f,/_/g," "],[m,"Nokia"],[p,x]],[/(pixel c)\b/i],[f,[m,Z],[p,E]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[f,[m,Z],[p,x]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[f,[m,j],[p,x]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[f,"Xperia Tablet"],[m,j],[p,E]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[f,[m,"OnePlus"],[p,x]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[f,[m,T],[p,E]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[f,/(.+)/g,"Fire Phone $1"],[m,T],[p,x]],[/(playbook);[-\w\),; ]+(rim)/i],[f,m,[p,E]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[f,[m,F],[p,x]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[f,[m,L],[p,E]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[f,[m,L],[p,x]],[/(nexus 9)/i],[f,[m,"HTC"],[p,E]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],[m,[f,/_/g," "],[p,x]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[f,[m,"Acer"],[p,E]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[f,[m,"Meizu"],[p,x]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[f,[m,"Sharp"],[p,x]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[m,f,[p,x]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[m,f,[p,E]],[/(surface duo)/i],[f,[m,z],[p,E]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[f,[m,"Fairphone"],[p,x]],[/(u304aa)/i],[f,[m,"AT&T"],[p,x]],[/\bsie-(\w*)/i],[f,[m,"Siemens"],[p,x]],[/\b(rct\w+) b/i],[f,[m,"RCA"],[p,E]],[/\b(venue[\d ]{2,7}) b/i],[f,[m,"Dell"],[p,E]],[/\b(q(?:mv|ta)\w+) b/i],[f,[m,"Verizon"],[p,E]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[f,[m,"Barnes & Noble"],[p,E]],[/\b(tm\d{3}\w+) b/i],[f,[m,"NuVision"],[p,E]],[/\b(k88) b/i],[f,[m,"ZTE"],[p,E]],[/\b(nx\d{3}j) b/i],[f,[m,"ZTE"],[p,x]],[/\b(gen\d{3}) b.+49h/i],[f,[m,"Swiss"],[p,x]],[/\b(zur\d{3}) b/i],[f,[m,"Swiss"],[p,E]],[/\b((zeki)?tb.*\b) b/i],[f,[m,"Zeki"],[p,E]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[m,"Dragon Touch"],f,[p,E]],[/\b(ns-?\w{0,9}) b/i],[f,[m,"Insignia"],[p,E]],[/\b((nxa|next)-?\w{0,9}) b/i],[f,[m,"NextBook"],[p,E]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[m,"Voice"],f,[p,x]],[/\b(lvtel\-)?(v1[12]) b/i],[[m,"LvTel"],f,[p,x]],[/\b(ph-1) /i],[f,[m,"Essential"],[p,x]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[f,[m,"Envizen"],[p,E]],[/\b(trio[-\w\. ]+) b/i],[f,[m,"MachSpeed"],[p,E]],[/\btu_(1491) b/i],[f,[m,"Rotor"],[p,E]],[/(shield[\w ]+) b/i],[f,[m,"Nvidia"],[p,E]],[/(sprint) (\w+)/i],[m,f,[p,x]],[/(kin\.[onetw]{3})/i],[[f,/\./g," "],[m,z],[p,x]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[f,[m,K],[p,E]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[f,[m,K],[p,x]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[m,f,[p,y]],[/droid.+; (shield) bui/i],[f,[m,"Nvidia"],[p,y]],[/(playstation [345portablevi]+)/i],[f,[m,j],[p,y]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[f,[m,z],[p,y]],[/smart-tv.+(samsung)/i],[m,[p,w]],[/hbbtv.+maple;(\d+)/i],[[f,/^/,"SmartTV"],[m,J],[p,w]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[m,O],[p,w]],[/(apple) ?tv/i],[m,[f,B+" TV"],[p,w]],[/crkey/i],[[f,k+"cast"],[m,Z],[p,w]],[/droid.+aft(\w)( bui|\))/i],[f,[m,T],[p,w]],[/\(dtv[\);].+(aquos)/i],[f,[m,"Sharp"],[p,w]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[m,pe],[f,pe],[p,w]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[p,w]],[/((pebble))app/i],[m,f,[p,S]],[/droid.+; (glass) \d/i],[f,[m,Z],[p,S]],[/droid.+; (wt63?0{2,3})\)/i],[f,[m,K],[p,S]],[/(quest( 2)?)/i],[f,[m,ce],[p,S]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[m,[p,b]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[f,[p,x]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[f,[p,E]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[p,E]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[p,x]],[/(android[-\w\. ]{0,9});.+buil/i],[f,[m,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[g,[d,X+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[g,[d,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[d,g],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[g,d]],os:[[/microsoft (windows) (vista|xp)/i],[d,g],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[d,[g,Oe,Ke]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[d,"Windows"],[g,Oe,Ke]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[g,/_/g,"."],[d,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[d,"Mac OS"],[g,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[g,d],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[d,g],[/\(bb(10);/i],[g,[d,F]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[g,[d,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[g,[d,Y+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[g,[d,"webOS"]],[/crkey\/([\d\.]+)/i],[g,[d,k+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[d,"Chromium OS"],g],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[d,g],[/(sunos) ?([\w\.\d]*)/i],[[d,"Solaris"],g],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[d,g]]},Ue=function(q,W){if(typeof q===c&&(W=q,q=i),!(this instanceof Ue))return new Ue(q,W).getResult();var ie=q||(typeof n!==l&&n.navigator&&n.navigator.userAgent?n.navigator.userAgent:s),fe=W?he(xe,W):xe;return this.getBrowser=function(){var _e={};return _e[d]=i,_e[g]=i,Pe.call(_e,ie,fe.browser),_e.major=le(_e.version),_e},this.getCPU=function(){var _e={};return _e[_]=i,Pe.call(_e,ie,fe.cpu),_e},this.getDevice=function(){var _e={};return _e[m]=i,_e[f]=i,_e[p]=i,Pe.call(_e,ie,fe.device),_e},this.getEngine=function(){var _e={};return _e[d]=i,_e[g]=i,Pe.call(_e,ie,fe.engine),_e},this.getOS=function(){var _e={};return _e[d]=i,_e[g]=i,Pe.call(_e,ie,fe.os),_e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return ie},this.setUA=function(_e){return ie=typeof _e===u&&_e.length>M?pe(_e,M):_e,this},this.setUA(ie),this};Ue.VERSION=r,Ue.BROWSER=ve([d,g,h]),Ue.CPU=ve([_]),Ue.DEVICE=ve([f,m,p,y,x,w,E,S,b]),Ue.ENGINE=Ue.OS=ve([d,g]),t.exports&&(e=t.exports=Ue),e.UAParser=Ue;var He=typeof n!==l&&(n.jQuery||n.Zepto);if(He&&!He.ua){var be=new Ue;He.ua=be.getResult(),He.ua.get=function(){return be.getUA()},He.ua.set=function(q){be.setUA(q);var W=be.getResult();for(var ie in W)He.ua[ie]=W[ie]}}})(typeof window=="object"?window:Qe)})(C_,C_.exports);var wd=globalThis&&globalThis.__awaiter||function(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(h){o(h)}}function l(u){try{c(i.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(t,e||[])).next())})};let hq=new C_.exports.UAParser,ym=!1,xm=!1,Em=!1,S_=!1;(!window.DeviceOrientationEvent||!window.DeviceOrientationEvent.requestPermission)&&(xm=!0);function OU(){return wd(this,void 0,void 0,function*(){if(navigator.permissions&&navigator.permissions.query)try{let t=yield navigator.permissions.query({name:"camera"});Em=t.state==="denied",ym=t.state==="granted"}catch{}})}OU();function fq(){return ym}function dq(){return xm}function pq(){return Em}function mq(){return S_}function NU(){return Em||S_}function tC(){return ym&&xm}function GU(){return wd(this,void 0,void 0,function*(){yield QU(),yield zU()})}function zU(){return wd(this,void 0,void 0,function*(){try{(yield navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(n=>n.stop()),ym=!0,Em=!1}catch{ym=!1,Em=!0}})}function QU(){return wd(this,void 0,void 0,function*(){if(window.DeviceOrientationEvent&&window.DeviceOrientationEvent.requestPermission&&(yield window.DeviceOrientationEvent.requestPermission())!=="granted")return xm=!1,S_=!0,!1;xm=!0,S_=!1})}function kR(){return wd(this,void 0,void 0,function*(){if(yield OU(),tC())return!0;let t=document.createElement("div");t.classList.add("zappar-permission-request"),t.innerHTML=`
    <style>
        .zappar-permission-request {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0px;
            left: 0px;
            z-index: 1000;
            background-color: rgba(0, 0, 0, 0.9);
            font-family: sans-serif;
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        .zappar-inner {
            max-width: 400px;
            text-align: center;
        }
        .zappar-title {
            font-size: 20px;
        }
        .zappar-text {
            font-size: 14px;
            padding: 15px;
        }
        .zappar-inner > button {
            background: none;
            outline: none;
            border: 2px solid white;
            border-radius: 10px;
            color: white;
            padding: 10px 40px;
            text-transform: uppercase;
        }
    </style>
    <div class="zappar-inner">
        <div class="zappar-title">Almost there...</div>
        <div class="zappar-text">In order to provide this augmented reality experience, we need access to your device's camera and motion sensors.</div>
        <button id="zappar-permission-request-button">Grant Access</button>
    </div>
`,document.body.append(t);let e=t.querySelector("#zappar-permission-request-button");return yield new Promise(n=>{e==null||e.addEventListener("click",()=>wd(this,void 0,void 0,function*(){for(yield GU(),t.remove();;){if(yield Aq(),NU()){n(!1);return}if(tC()){n(!0);return}}}))})})}function Aq(){return new Promise(t=>requestAnimationFrame(()=>t()))}function gq(){switch(hq.getBrowser().name){case"Chrome":_q();break;default:vq();break}}function vq(){let t=document.createElement("div");t.classList.add("zappar-permission-request"),t.innerHTML=`
    <style>
        .zappar-permission-request {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0px;
            left: 0px;
            z-index: 1000;
            background-color: rgba(0, 0, 0, 0.9);
            font-family: sans-serif;
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        .zappar-inner {
            max-width: 400px;
            text-align: center;
        }
        .zappar-title {
            font-size: 20px;
        }
        .zappar-text {
            font-size: 14px;
            padding: 15px;
        }
        .zappar-inner > button {
            background: none;
            outline: none;
            border: 2px solid white;
            border-radius: 10px;
            color: white;
            padding: 10px 40px;
            text-transform: uppercase;
        }
    </style>
    <div class="zappar-inner">
        <div class="zappar-title">Permission is Needed</div>
        <div class="zappar-text">Permission to access your device's camera and motion sensors is necessary for this experience. Please reload the page to try again.</div>
        <button id="zappar-permission-reload-button">Reload</button>
    </div>
`,document.body.append(t);let e=t.querySelector("#zappar-permission-reload-button");e==null||e.addEventListener("click",()=>window.location.reload())}function _q(){let t=document.createElement("div");t.classList.add("zappar-permission-request"),t.innerHTML=`
    <style>
        .zappar-permission-request {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0px;
            left: 0px;
            z-index: 1000;
            background-color: rgba(0, 0, 0, 0.9);
            font-family: sans-serif;
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        .zappar-inner {
            width: 400px;
            text-align: center;
        }
        .zappar-title {
            font-size: 20px;
        }
        .zappar-text {
            font-size: 14px;
            padding: 15px;
        }
        .zappar-inner > button {
            background: none;
            outline: none;
            border: 2px solid white;
            border-radius: 10px;
            color: white;
            padding: 10px 40px;
            text-transform: uppercase;
        }
    </style>
    <div class="zappar-inner">
        <div class="zappar-title">Permission is Needed</div>
        <div class="zappar-text">Permission to access your device's camera and motion sensors is necessary for this experience.<br/><br/>To grant access, please tap the ! button in the address bar of your browser, then "Site settings", and finally "Clear and reset". You can then reload the page to try again.</div>
        <button id="zappar-permission-reload-button">Reload</button>
    </div>
`,document.body.append(t);let e=t.querySelector("#zappar-permission-reload-button");e==null||e.addEventListener("click",()=>window.location.reload())}let my=$u.LOG_LEVEL_ERROR;function yq(t){my=t}function To(...t){my>=$u.LOG_LEVEL_VERBOSE&&console.log("[Zappar] INFO",...t)}function b_(...t){my>=$u.LOG_LEVEL_ERROR&&console.error("[Zappar] ERROR",...t)}function Xt(...t){my>=$u.LOG_LEVEL_VERBOSE&&console.log("[Zappar] WARN",...t)}let xq=1,Fb=new Map;function Eq(){let t=xq++;return Fb.set(t,new Mq),To("face_mesh_t initialized"),t}function wq(t){Fb.delete(t)}function Er(t){return Fb.get(t)}class Mq{constructor(){this.render_mean_=new Float32Array,this.render_identity_=new Float32Array(50),this.render_expression_=new Float32Array(29),this.render_uvs_=new Float32Array,this.render_indices_=new Uint16Array,this.vertices_=new Float32Array,this.normals_=new Float32Array,this.normalsCalculated_=!1,this.modelVersion_=-1,this.mirrored_=!1}loadFromMemory(e,n,i,r,s){let o=0,a=new Uint16Array(e),l=new Int32Array(e),c=new Float32Array(e),u=()=>{let _=l[o++],y=l[o++],x=_*y,E=c.subarray(o,o+x);return o+=x,E},h=()=>{let _=l[o++],y=a.subarray(o*2,o*2+_);return o+=_/2,y};this.render_mean_=u(),this.render_identity_=u(),this.render_expression_=u(),this.render_uvs_=u();let f=h(),d=o<l.length?h():new Uint16Array,p=o<l.length?h():new Uint16Array,m=o<l.length?h():new Uint16Array,g=o<l.length?h():new Uint16Array;if(!n&&!i&&!r&&!s)this.render_indices_=f;else{let _=f.length;n&&(_+=d.length),i&&(_+=p.length),r&&(_+=m.length),s&&(_+=g.length),this.render_indices_=new Uint16Array(_),this.render_indices_.set(f,0);let y=f.length;n&&(this.render_indices_.set(d,y),y+=d.length),i&&(this.render_indices_.set(p,y),y+=p.length),r&&(this.render_indices_.set(m,y),y+=m.length),s&&(this.render_indices_.set(g,y),y+=g.length)}this.vertices_=new Float32Array(this.render_mean_),this.normals_=new Float32Array(this.vertices_.length),this.modelVersion_++}getVertices(){return this.vertices_}getUVs(){return this.render_uvs_}getIndices(){if(this.mirrored_){if(!this.render_indices_reversed){this.render_indices_reversed=new Uint16Array(this.render_indices_.length);for(let e=0;e<this.render_indices_.length;e+=3)this.render_indices_reversed[e]=this.render_indices_[e+2],this.render_indices_reversed[e+1]=this.render_indices_[e+1],this.render_indices_reversed[e+2]=this.render_indices_[e]}return this.render_indices_reversed}return this.render_indices_}getNormals(){return this.normalsCalculated_||this.calculateNormals(),this.normals_}getModelVersion(){return this.modelVersion_}getLandmarkDataForVertex(e){let n=[this.render_mean_[e*3],this.render_mean_[e*3+1],this.render_mean_[e*3+2]],i=[];for(let s=0;s<50;s++)i.push(this.render_identity_[e*3*50+s]),i.push(this.render_identity_[(e*3+1)*50+s]),i.push(this.render_identity_[(e*3+2)*50+s]);let r=[];for(let s=0;s<29;s++)r.push(this.render_expression_[e*3*29+s]),r.push(this.render_expression_[(e*3+1)*29+s]),r.push(this.render_expression_[(e*3+2)*29+s]);return{mean:n,identity:i,expression:r}}update(e,n,i){if(this.render_mean_.length!==0&&this.render_identity_.length!==0&&this.render_expression_.length!==0){this.mirrored_=i,this.vertices_.set(this.render_mean_);for(let r=0;r<e.length;r++)for(let s=0;s<this.vertices_.length;s++)this.vertices_[s]+=e[r]*this.render_identity_[s*e.length+r];for(let r=0;r<n.length;r++)for(let s=0;s<this.vertices_.length;s++)this.vertices_[s]+=n[r]*this.render_expression_[s*n.length+r];if(i)for(let r=0;r<this.vertices_.length;r+=3)this.vertices_[r]*=-1;this.normalsCalculated_=!1}}calculateNormals(){let e=this.getIndices(),n=this.vertices_,i=new Float32Array(e.length);if(!n)return;let r=e.length,s=this.normals_,o=new Float32Array([0,0,0]),a=new Float32Array([0,0,0]),l=new Float32Array([0,0,0]);for(let u=0;u<r;u+=3){let h=e[u]*3,f=e[u+1]*3,d=e[u+2]*3;o[0]=n[f]-n[h],o[1]=n[f+1]-n[h+1],o[2]=n[f+2]-n[h+2],a[0]=n[d]-n[h],a[1]=n[d+1]-n[h+1],a[2]=n[d+2]-n[h+2],Hp(l,o,a);let p=Mb(l);i[u]=l[0]/p,i[u+1]=l[1]/p,i[u+2]=l[2]/p}s.fill(0);for(let u=0;u<r;u+=3){let h=e[u]*3,f=e[u+1]*3,d=e[u+2]*3;s[h]+=i[u],s[h+1]+=i[u+1],s[h+2]+=i[u+2],s[f]+=i[u],s[f+1]+=i[u+1],s[f+2]+=i[u+2],s[d]+=i[u],s[d+1]+=i[u+1],s[d+2]+=i[u+2]}let c=s.length/3;for(let u=0;u<c;u++){let h=u*3;o[0]=s[h],o[1]=s[h+1],o[2]=s[h+2],Cb(a,o),s[h]=a[0],s[h+1]=a[1],s[h+2]=a[2]}this.normalsCalculated_=!0}}let Cq=ln();class Sq{constructor(e){this._gl=e}dispose(){this._vbo&&this._gl.deleteBuffer(this._vbo),this._vbo=void 0,this._shader&&this._gl.deleteProgram(this._shader.prog),this._shader=void 0}_generate(e,n){if(this._vbo)return this._vbo;if(this._vbo||(this._vbo=e.createBuffer()),!this._vbo)throw new Error("Unable to create buffer object");let i=new Float32Array([-1,-1,0,0,0,-1,1,0,0,1,1,-1,0,1,0,1,-1,0,1,0,-1,1,0,0,1,1,1,0,1,1]);return e.bindBuffer(e.ARRAY_BUFFER,this._vbo),e.bufferData(e.ARRAY_BUFFER,new Float32Array(i),e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null),this._vbo}drawCameraFrame(e,n,i,r){if(!i.texture)return;let s=this._gl;s.disable(s.DEPTH_TEST),s.disable(s.SCISSOR_TEST),s.disable(s.CULL_FACE),s.disable(s.BLEND);let o=this._getCameraShader(s),a=this._generate(s,i);s.activeTexture(s.TEXTURE0),s.useProgram(o.prog),s.uniformMatrix4fv(o.unif_skinTexTransform,!1,HU(i.dataWidth,i.dataHeight,e,n,i.uvTransform||Cq,r)),s.uniform1i(o.unif_skinSampler,0),s.bindTexture(s.TEXTURE_2D,i.texture),s.bindBuffer(s.ARRAY_BUFFER,a),s.vertexAttribPointer(o.attr_position,3,s.FLOAT,!1,5*4,0),s.enableVertexAttribArray(o.attr_position),s.vertexAttribPointer(o.attr_texCoord,2,s.FLOAT,!1,5*4,3*4),s.enableVertexAttribArray(o.attr_texCoord),s.drawArrays(s.TRIANGLES,0,6),s.disableVertexAttribArray(o.attr_position),s.disableVertexAttribArray(o.attr_texCoord),s.bindTexture(s.TEXTURE_2D,null),s.bindBuffer(s.ARRAY_BUFFER,null),s.useProgram(null)}_getCameraShader(e){if(this._shader)return this._shader;let n=e.createProgram();if(!n)throw new Error("Unable to create program");let i=$s(e,e.VERTEX_SHADER,bq),r=$s(e,e.FRAGMENT_SHADER,Iq);e.attachShader(n,i),e.attachShader(n,r),zd(e,n);let s=e.getUniformLocation(n,"skinTexTransform");if(!s)throw new Error("Unable to get uniform location skinTexTransform");let o=e.getUniformLocation(n,"skinSampler");if(!o)throw new Error("Unable to get uniform location skinSampler");return this._shader={prog:n,unif_skinTexTransform:s,unif_skinSampler:o,attr_position:e.getAttribLocation(n,"position"),attr_texCoord:e.getAttribLocation(n,"texCoord")},this._shader}}let bq=`
#ifndef GL_ES
#define highp
#define mediump
#define lowp
#endif

attribute vec4 position;
attribute vec4 texCoord;
varying vec4 skinTexVarying;
uniform mat4 skinTexTransform;

void main()
{
    gl_Position = position;
    skinTexVarying = skinTexTransform * texCoord;
}`,Iq=`
#define highp mediump
#ifdef GL_ES
    // define default precision for float, vec, mat.
    precision highp float;
#else
#define highp
#define mediump
#define lowp
#endif

varying vec4 skinTexVarying;
uniform lowp sampler2D skinSampler;

void main()
{
    gl_FragColor = texture2DProj(skinSampler, skinTexVarying);
}`;function Tq(){if(window.screen.orientation)switch(window.screen.orientation.type){case"portrait-primary":return 270;case"landscape-secondary":return 180;case"portrait-secondary":return 90;default:return 0}else if(window.orientation!==void 0)switch(window.orientation){case 0:return 270;case 90:return 0;case 180:return 90;case-90:return 180}return 0}function HU(t,e,n,i,r,s){let o=ln(),a=ln();x_(a,[-.5,-.5,0]),Kt(o,a,o),s&&(ji(a,[-1,1,1]),Kt(o,a,o)),Ed(a,-1*Tq()*Math.PI/180,[0,0,1]),Kt(o,a,o);let l=Qd();l[0]=n,l[1]=i,l[2]=0,dy(l,l,a);let c=Math.abs(l[0]),u=Math.abs(l[1]);ji(a,[1,-1,1]),Kt(o,a,o);let h=c/u,f=t/e;return h>f?ji(a,[1,f/h,1]):ji(a,[h/f,1,1]),Kt(o,a,o),x_(a,[.5,.5,0]),Kt(o,a,o),Kt(o,r,o),o}class Bq{constructor(e){this._gl=e}dispose(){this._vbo&&this._gl.deleteBuffer(this._vbo),this._normalbo&&this._gl.deleteBuffer(this._normalbo),this._ibo&&this._gl.deleteBuffer(this._ibo),this._shader&&this._gl.deleteProgram(this._shader.prog),this._vbo=void 0,this._normalbo=void 0,this._ibo=void 0,this._shader=void 0}_generateIBO(e,n){if(this._ibo&&this._lastIndices===e)return this._ibo;if(this._lastIndices=e,this._ibo||(this._ibo=n.createBuffer()),!this._ibo)throw new Error("Unable to create buffer object");return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this._ibo),n.bufferData(n.ELEMENT_ARRAY_BUFFER,e,n.STATIC_DRAW),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null),this._ibo}_generateVBO(e,n){if(this._vbo||(this._vbo=n.createBuffer()),!this._vbo)throw new Error("Unable to create buffer object");return n.bindBuffer(n.ARRAY_BUFFER,this._vbo),n.bufferData(n.ARRAY_BUFFER,e,n.STREAM_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),this._vbo}_generateNormalBO(e,n){if(this._normalbo||(this._normalbo=n.createBuffer()),!this._normalbo)throw new Error("Unable to create buffer object");return n.bindBuffer(n.ARRAY_BUFFER,this._normalbo),n.bufferData(n.ARRAY_BUFFER,e,n.STREAM_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),this._normalbo}drawFace(e,n){let i=this._gl,r=this._getShader(i),s=this._generateVBO(n.getVertices(),i),o=this._generateNormalBO(n.getNormals(),i),a=this._generateIBO(n.getIndices(),i);i.enable(i.DEPTH_TEST),i.enable(i.CULL_FACE),i.useProgram(r.prog),i.uniformMatrix4fv(r.unif_matrix,!1,e),i.bindBuffer(i.ARRAY_BUFFER,s),i.vertexAttribPointer(r.attr_position,3,i.FLOAT,!1,3*4,0),i.enableVertexAttribArray(r.attr_position),i.bindBuffer(i.ARRAY_BUFFER,o),i.vertexAttribPointer(r.attr_normal,3,i.FLOAT,!1,3*4,0),i.enableVertexAttribArray(r.attr_normal),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,a),i.drawElements(i.TRIANGLES,n.getIndices().length,i.UNSIGNED_SHORT,0),i.disableVertexAttribArray(r.attr_position),i.disableVertexAttribArray(r.attr_normal),i.bindBuffer(i.ARRAY_BUFFER,null),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,null)}_getShader(e){if(this._shader)return this._shader;let n=e.createProgram();if(!n)throw new Error("Unable to create program");let i=$s(e,e.VERTEX_SHADER,Rq),r=$s(e,e.FRAGMENT_SHADER,Pq);e.attachShader(n,i),e.attachShader(n,r),zd(e,n);let s=e.getUniformLocation(n,"matrix");if(!s)throw new Error("Unable to get uniform location mattrix");return this._shader={prog:n,unif_matrix:s,attr_position:e.getAttribLocation(n,"position"),attr_normal:e.getAttribLocation(n,"normal")},this._shader}}let Rq=`
#ifndef GL_ES
#define highp
#define mediump
#define lowp
#endif

uniform mat4 matrix;
attribute vec4 position;
attribute vec3 normal;
varying highp vec3 vnormal;

void main()
{
    gl_Position = matrix * position;
    vnormal = normal;
}`,Pq=`
#define highp mediump
#ifdef GL_ES
    // define default precision for float, vec, mat.
    precision highp float;
#else
#define highp
#define mediump
#define lowp
#endif

varying vec4 skinTexVarying;
varying highp vec3 vnormal;
uniform lowp sampler2D skinSampler;

void main()
{
    vec3 normal2 = 0.5 * vnormal + 0.5;
    gl_FragColor = vec4(normal2.x , normal2.y, normal2.z, 1.0);
}`;class Dq{constructor(e){this._gl=e}dispose(){this._vbo&&this._gl.deleteBuffer(this._vbo),this._uvbo&&this._gl.deleteBuffer(this._uvbo),this._ibo&&this._gl.deleteBuffer(this._ibo),this._shader&&this._gl.deleteProgram(this._shader.prog),this._vbo=void 0,this._uvbo=void 0,this._ibo=void 0,this._shader=void 0}_generateIBO(e,n){if(this._ibo&&this._lastIndices===e)return this._ibo;if(this._lastIndices=e,this._ibo||(this._ibo=n.createBuffer()),!this._ibo)throw new Error("Unable to create buffer object");return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this._ibo),n.bufferData(n.ELEMENT_ARRAY_BUFFER,e,n.STATIC_DRAW),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null),this._ibo}_generateVBO(e,n){if(this._vbo||(this._vbo=n.createBuffer()),!this._vbo)throw new Error("Unable to create buffer object");return n.bindBuffer(n.ARRAY_BUFFER,this._vbo),n.bufferData(n.ARRAY_BUFFER,e,n.STREAM_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),this._vbo}_generateUVBO(e,n){if(this._uvbo||(this._uvbo=n.createBuffer()),!this._uvbo)throw new Error("Unable to create buffer object");return n.bindBuffer(n.ARRAY_BUFFER,this._uvbo),n.bufferData(n.ARRAY_BUFFER,e,n.STREAM_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),this._uvbo}drawFace(e,n,i,r,s,o){let a=this._gl,l=this._getShader(a),c=this._generateVBO(n,a),u=this._generateUVBO(r,a),h=this._generateIBO(s,a);a.enable(a.DEPTH_TEST),a.enable(a.CULL_FACE),a.useProgram(l.prog),a.uniformMatrix4fv(l.unif_matrix,!1,e),a.uniformMatrix4fv(l.unif_uvmatrix,!1,i),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,o),a.uniform1i(l.unif_sampler,0),a.bindBuffer(a.ARRAY_BUFFER,c),a.vertexAttribPointer(l.attr_position,3,a.FLOAT,!1,3*4,0),a.enableVertexAttribArray(l.attr_position),a.bindBuffer(a.ARRAY_BUFFER,u),a.vertexAttribPointer(l.attr_uv,3,a.FLOAT,!1,3*4,0),a.enableVertexAttribArray(l.attr_uv),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,h),a.drawElements(a.TRIANGLES,2304*3,a.UNSIGNED_SHORT,0),a.disableVertexAttribArray(l.attr_position),a.disableVertexAttribArray(l.attr_uv),a.bindBuffer(a.ARRAY_BUFFER,null),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null)}_getShader(e){if(this._shader)return this._shader;let n=e.createProgram();if(!n)throw new Error("Unable to create program");let i=$s(e,e.VERTEX_SHADER,Fq),r=$s(e,e.FRAGMENT_SHADER,Lq);e.attachShader(n,i),e.attachShader(n,r),zd(e,n);let s=e.getUniformLocation(n,"matrix");if(!s)throw new Error("Unable to get uniform location matrix");let o=e.getUniformLocation(n,"uvmatrix");if(!o)throw new Error("Unable to get uniform location matrix");let a=e.getUniformLocation(n,"uSampler");if(!a)throw new Error("Unable to get uniform location sampler");return this._shader={prog:n,unif_matrix:s,unif_sampler:a,unif_uvmatrix:o,attr_position:e.getAttribLocation(n,"position"),attr_uv:e.getAttribLocation(n,"uv"),attr_texturecoord:e.getAttribLocation(n,"aTextureCoord")},this._shader}}let Fq=`
#ifndef GL_ES
#define highp
#define mediump
#define lowp
#endif

uniform mat4 matrix;
uniform mat4 uvmatrix;
attribute vec4 position;
attribute vec3 normal;
attribute vec3 uv;

// varying highp vec3 vnormal;

varying highp vec2 vTextureCoord;
varying highp float vAlpha;

void main()
{
    gl_Position = matrix * position;
    vec4 ret = uvmatrix * vec4(uv.x, uv.y, uv.z, 1.0);
    ret.x /= ret.w * 2.0;
    ret.y /= ret.w * 2.0;
    ret.x += 0.5;
    ret.y += 0.0;
    vAlpha = 1.0;
    vTextureCoord = ret.xy;
}`,Lq=`
#define highp mediump
#ifdef GL_ES
    // define default precision for float, vec, mat.
    precision highp float;
#else
#define highp
#define mediump
#define lowp
#endif

varying highp vec2 vTextureCoord;
varying highp vec3 vnormal;
varying highp float vAlpha;
uniform lowp sampler2D uSampler;

void main()
{
    // vec3 normal2 = 0.5 * vnormal + 0.5;
    vec4 p = texture2D(uSampler, vTextureCoord);
    p.a = vAlpha;
    gl_FragColor = p; // vec4(normal2.x , normal2.y, normal2.z, 1.0);
}`;var kn;(function(t){t[t.CAMERA_FRAME=0]="CAMERA_FRAME",t[t.ACCELEROMETER=1]="ACCELEROMETER",t[t.ROTATION_RATE=2]="ROTATION_RATE",t[t.ATTITUDE=3]="ATTITUDE",t[t.ATTITUDE_MATRIX=4]="ATTITUDE_MATRIX"})(kn||(kn={}));class wt{constructor(e){this._insertionByte=0,this._numberPackets=0,this._started=!1,this._hasLoggedUnsuppored=!1,this._data=new ArrayBuffer(this._estimatedSize(e,320,240)),this._dataView=new DataView(this._data),this._dataUint8=new Uint8Array(this._data),this._dataFloat32=new Float32Array(this._data)}_estimatedSize(e,n,i){return wt.headerSizeBytes+(wt.psbPacketType+wt.cameraPacketSizeBytes+n*i)*e}start(){this._started=!0,this._insertionByte=0,this._numberPackets=0,this._growArrayBuffer(wt.headerSizeBytes);let n=new TextEncoder().encode("UAR1");this._dataUint8.set(n),this._dataView.setUint32(4,0,!0),this._insertionByte+=8}stop(){this._started=!1;let e=this._data.slice(0,this._insertionByte);this._data=e,this._dataUint8=new Uint8Array(this._data),this._dataFloat32=new Float32Array(this._data),this._dataView=new DataView(this._data)}data(){return this._dataUint8}appendCameraFrame(e){if(!this._started)return;if(!e.data){if(this._hasLoggedUnsuppored)return;this._hasLoggedUnsuppored=!0,b_("Unable to record frames from this camera source");return}if(e.data.byteLength!==e.dataWidth*e.dataHeight){b_("Unable to record frame to sequence: greyscale array doesn't match dimensions");return}let n=wt.psbPacketType+wt.cameraPacketSizeBytes+e.dataWidth*e.dataHeight;this._growArrayBuffer(n),this._dataView.setUint32(this._insertionByte,kn.CAMERA_FRAME,!0),this._insertionByte+=wt.psbPacketType,this._dataView.setUint32(this._insertionByte,e.dataWidth,!0),this._insertionByte+=wt.psbCameraFrameWidth,this._dataView.setUint32(this._insertionByte,e.dataHeight,!0),this._insertionByte+=wt.psbCameraFrameHeight,this._dataFloat32.set(e.cameraToDevice,this._insertionByte/4),this._insertionByte+=wt.psbCameraToDeviceTransform,this._dataFloat32.set(e.cameraModel,this._insertionByte/4),this._insertionByte+=wt.psbCameraModel,this._dataView.setUint32(this._insertionByte,e.userFacing?1:0,!0),this._insertionByte+=wt.psbFlags,this._dataUint8.set(new Uint8Array(e.data),this._insertionByte),this._insertionByte+=e.data.byteLength,this._numberPackets++,this._dataView.setUint32(4,this._numberPackets,!0)}appendAccelerometer(e,n,i,r){this._appendTimestampedVec3(kn.ACCELEROMETER,e,n,i,r)}appendRotationRate(e,n,i,r){this._appendTimestampedVec3(kn.ROTATION_RATE,e,n,i,r)}appendAttitude(e,n,i,r){this._appendTimestampedVec3(kn.ATTITUDE,e,n,i,r)}_appendTimestampedVec3(e,n,i,r,s){if(!this._started)return;let o=wt.psbPacketType+wt.accelerometerPacketSizeBytes;this._growArrayBuffer(o),this._dataView.setUint32(this._insertionByte,e,!0),this._insertionByte+=wt.psbPacketType,this._dataView.setUint32(this._insertionByte,n,!0),this._insertionByte+=4,this._dataView.setFloat32(this._insertionByte,i,!0),this._insertionByte+=4,this._dataView.setFloat32(this._insertionByte,r,!0),this._insertionByte+=4,this._dataView.setFloat32(this._insertionByte,s,!0),this._insertionByte+=4,this._numberPackets++,this._dataView.setUint32(4,this._numberPackets,!0)}appendAttitudeMatrix(e){if(!this._started)return;let n=wt.psbPacketType+wt.attitudeMatrixPacketSizeBytes;this._growArrayBuffer(n),this._dataView.setUint32(this._insertionByte,kn.ATTITUDE_MATRIX,!0),this._insertionByte+=wt.psbPacketType,this._dataFloat32.set(e,this._insertionByte/4),this._insertionByte+=wt.attitudeMatrixPacketSizeBytes,this._numberPackets++,this._dataView.setUint32(4,this._numberPackets,!0)}_growArrayBuffer(e){for(;this._insertionByte+e>this._data.byteLength;){let n=Math.max(this._data.byteLength*2,this._estimatedSize(50,320,240)),i=new ArrayBuffer(n),r=new Uint8Array(i);r.set(this._dataUint8),this._data=i,this._dataUint8=r,this._dataFloat32=new Float32Array(this._data),this._dataView=new DataView(this._data)}}}wt.headerSizeBytes=8;wt.psbPacketType=4;wt.psbCameraFrameWidth=4;wt.psbCameraFrameHeight=4;wt.psbFlags=4;wt.psbCameraToDeviceTransform=4*16;wt.psbCameraModel=4*6;wt.cameraPacketSizeBytes=wt.psbCameraFrameWidth+wt.psbCameraFrameHeight+wt.psbCameraToDeviceTransform+wt.psbCameraModel+wt.psbFlags;wt.accelerometerPacketSizeBytes=4*4;wt.rotationRatePacketSizeBytes=4*4;wt.attitudePacketSizeBytes=4*4;wt.attitudeMatrixPacketSizeBytes=4*16;class kq{constructor(e){this._data=e,this.dataByPacket=new Map,this.dataByCameraFrame=new Map,this.numberPackets=0,this.numberCameraFrames=0,this.numberAccelerometerPackets=0,this.numberRotationRatePackets=0,this.numberAttitudePackets=0,this.numberAttitudeMatrixPackets=0;let n=new TextDecoder,i="";try{i=n.decode(this._data.slice(0,4))}catch{throw new Error("Unable to decode header - perhaps this isn't a sequence file?")}if(i!=="UAR1")throw new Error(`Invalid - perhaps this isn't a sequence file: ${i}`);let r=0,s=new DataView(this._data);this.numberPackets=s.getUint32(4,!0),r+=wt.headerSizeBytes;for(let o=0;o<this.numberPackets;o++){let a=s.getUint32(r,!0);switch(r+=wt.psbPacketType,a){case kn.CAMERA_FRAME:{let l=s.getUint32(r,!0);r+=wt.psbCameraFrameWidth;let c=s.getUint32(r,!0);r+=wt.psbCameraFrameHeight;let u=new Float32Array(this._data,r,wt.psbCameraToDeviceTransform/4);r+=wt.psbCameraToDeviceTransform;let h=new Float32Array(this._data,r,wt.psbCameraModel/4);r+=wt.psbCameraModel;let f=s.getUint32(r,!0);r+=wt.psbFlags;let d=f===1,p=new Uint8Array(this._data,r,l*c);r+=l*c;let m={type:kn.CAMERA_FRAME,width:l,height:c,cameraToDevice:u,cameraModel:h,userFacing:d,greyscale:p};this.dataByPacket.set(o,m),this.dataByCameraFrame.set(this.numberCameraFrames,m),this.numberCameraFrames++;break}case kn.ACCELEROMETER:{let l=s.getUint32(r,!0);r+=4;let c=s.getFloat32(r,!0);r+=4;let u=s.getFloat32(r,!0);r+=4;let h=s.getFloat32(r,!0);r+=4,this.dataByPacket.set(o,{type:kn.ACCELEROMETER,t:l,x:c,y:u,z:h}),this.numberAccelerometerPackets++;break}case kn.ROTATION_RATE:{let l=s.getUint32(r,!0);r+=4;let c=s.getFloat32(r,!0);r+=4;let u=s.getFloat32(r,!0);r+=4;let h=s.getFloat32(r,!0);r+=4,this.dataByPacket.set(o,{type:kn.ROTATION_RATE,t:l,x:c,y:u,z:h}),this.numberRotationRatePackets++;break}case kn.ATTITUDE:{let l=s.getUint32(r,!0);r+=4;let c=s.getFloat32(r,!0);r+=4;let u=s.getFloat32(r,!0);r+=4;let h=s.getFloat32(r,!0);r+=4,this.dataByPacket.set(o,{type:kn.ATTITUDE,t:l,x:c,y:u,z:h}),this.numberAttitudePackets++;break}case kn.ATTITUDE_MATRIX:{let l=new Float32Array(this._data,r,wt.attitudeMatrixPacketSizeBytes/4);r+=wt.attitudeMatrixPacketSizeBytes,this.dataByPacket.set(o,{type:kn.ATTITUDE_MATRIX,attitude:l}),this.numberAttitudeMatrixPackets++;break}}}}}class Ay{}var UR;(function(t){t[t.OBJECT_URL=0]="OBJECT_URL",t[t.SRC_OBJECT=1]="SRC_OBJECT"})(UR||(UR={}));let Mt={deviceMotionMutliplier:-1,blacklisted:!1,showGyroPermissionsWarningIfNecessary:!1,showSafariPermissionsResetIfNecessary:!1,requestHighFrameRate:!1,videoWidth:640,videoHeight:480,dataWidth:320,dataHeight:240,videoElementInDOM:!1,preferMediaStreamTrackProcessorCamera:!1,preferImageBitmapCamera:!1};typeof window<"u"&&(window.zeeProfile=Mt,window.location.href.indexOf("_mstppipeline")>=0&&(console.log("Configuring for MSTP camera pipeline (if supported)"),Mt.preferMediaStreamTrackProcessorCamera=!0),window.location.href.indexOf("_imagebitmappipeline")>=0&&(console.log("Configuring for ImageBitmap camera pipeline (if supported)"),Mt.preferImageBitmapCamera=!0));let Lb=new C_.exports.UAParser,VU=(Lb.getOS().name||"unknown").toLowerCase(),WU=(Lb.getEngine().name||"unknown").toLowerCase();WU==="webkit"&&VU!=="ios"&&(Mt.deviceMotionMutliplier=1,typeof window<"u"&&window.orientation!==void 0&&jU("15.0"));if(WU==="webkit"&&VU==="ios"){Mt.deviceMotionMutliplier=1;const t=Lb.getOS().version||"15.0";jU(t)}function jU(t){let e=t.split(".");if(e.length>=2){const n=parseInt(e[0]),i=parseInt(e[1]);(n<11||n===11&&i<3)&&(Mt.blacklisted=!0),(n<12||n===12&&i<2)&&(Mt.videoElementInDOM=!0),(n===12&&i>=2||n>=13)&&(Mt.showGyroPermissionsWarningIfNecessary=!0),n>=13&&(Mt.showSafariPermissionsResetIfNecessary=!0),(n>=12&&i>1||n>=13)&&navigator.mediaDevices&&navigator.mediaDevices.getSupportedConstraints&&navigator.mediaDevices.getSupportedConstraints().frameRate&&(Mt.requestHighFrameRate=!0,n<14&&(Mt.videoHeight=360,Mt.dataHeight=180))}}const OR=new Map;class kb{constructor(e){this._gl=e,this._viewports=[],this._underlyingViewport=this._gl.viewport,this._viewports.push(this._gl.getParameter(this._gl.VIEWPORT)),this._gl.viewport=(n,i,r,s)=>{this._viewports[this._viewports.length-1]=[n,i,r,s],this._underlyingViewport.call(this._gl,n,i,r,s)}}static get(e){let n=OR.get(e);return n||(n=new kb(e),OR.set(e,n)),n}push(){this._viewports.push(this._viewports[this._viewports.length-1])}pop(){const e=this._viewports.pop(),n=this._viewports[this._viewports.length-1];(!e||e[0]!==n[0]||e[1]!==n[1]||e[2]!==n[2]||e[3]!==n[3])&&this._underlyingViewport.call(this._gl,n[0],n[1],n[2],n[3])}}class Uq{constructor(e){this._gl=e,this._isPaused=!0,this._hadFrames=!1,this._isUserFacing=!1,this._cameraToScreenRotation=0,this._isUploadFrame=!0,this._computedTransformRotation=-1,this._computedFrontCameraRotation=!1,this._cameraUvTransform=ln(),this._framebufferWidth=0,this._framebufferHeight=0,this._framebufferId=null,this._renderTexture=null,this._isWebGL2=!1,this._isWebGL2=e.getParameter(e.VERSION).indexOf("WebGL 2")>=0,this._isWebGL2||(this._instancedArraysExtension=this._gl.getExtension("ANGLE_instanced_arrays"))}resetGLContext(){this._framebufferId=null,this._renderTexture=null,this._vertexBuffer=void 0,this._indexBuffer=void 0,this._greyscaleShader=void 0}destroy(){this.resetGLContext()}uploadFrame(e,n,i,r){let s=this._gl;const o=kb.get(s);o.push();const a=s.isEnabled(s.SCISSOR_TEST),l=s.isEnabled(s.DEPTH_TEST),c=s.isEnabled(s.BLEND),u=s.isEnabled(s.CULL_FACE),h=s.isEnabled(s.STENCIL_TEST),f=s.getParameter(s.ACTIVE_TEXTURE),d=s.getParameter(s.UNPACK_FLIP_Y_WEBGL),p=s.getParameter(s.CURRENT_PROGRAM);s.activeTexture(s.TEXTURE0);const m=s.getParameter(s.TEXTURE_BINDING_2D),g=s.getParameter(s.FRAMEBUFFER_BINDING),_=s.getParameter(s.ARRAY_BUFFER_BINDING),y=s.getParameter(s.ELEMENT_ARRAY_BUFFER_BINDING);s.disable(s.SCISSOR_TEST),s.disable(s.DEPTH_TEST),s.disable(s.BLEND),s.disable(s.CULL_FACE),s.disable(s.STENCIL_TEST),s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,!1),s.bindTexture(s.TEXTURE_2D,e);const x=0,E=s.RGBA,w=s.RGBA,S=s.UNSIGNED_BYTE;s.texImage2D(s.TEXTURE_2D,x,E,w,S,n),typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement?(n.videoWidth,n.videoHeight):(n.width,n.height),this._updateTransforms(i,r);let b=this._getFramebuffer(s,Mt.dataWidth/4,Mt.dataHeight),M=this._getVertexBuffer(s),T=this._getIndexBuffer(s),B=this._getGreyscaleShader(s);const L=s.getVertexAttrib(B.aVertexPositionLoc,s.VERTEX_ATTRIB_ARRAY_SIZE),F=s.getVertexAttrib(B.aVertexPositionLoc,s.VERTEX_ATTRIB_ARRAY_TYPE),U=s.getVertexAttrib(B.aVertexPositionLoc,s.VERTEX_ATTRIB_ARRAY_NORMALIZED),k=s.getVertexAttrib(B.aVertexPositionLoc,s.VERTEX_ATTRIB_ARRAY_STRIDE),X=s.getVertexAttribOffset(B.aVertexPositionLoc,s.VERTEX_ATTRIB_ARRAY_POINTER),Y=s.getVertexAttrib(B.aVertexPositionLoc,s.VERTEX_ATTRIB_ARRAY_ENABLED),Z=s.getVertexAttrib(B.aVertexPositionLoc,s.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING),G=s.getVertexAttrib(B.aTextureCoordLoc,s.VERTEX_ATTRIB_ARRAY_SIZE),O=s.getVertexAttrib(B.aTextureCoordLoc,s.VERTEX_ATTRIB_ARRAY_TYPE),z=s.getVertexAttrib(B.aTextureCoordLoc,s.VERTEX_ATTRIB_ARRAY_NORMALIZED),Q=s.getVertexAttrib(B.aTextureCoordLoc,s.VERTEX_ATTRIB_ARRAY_STRIDE),H=s.getVertexAttribOffset(B.aTextureCoordLoc,s.VERTEX_ATTRIB_ARRAY_POINTER),J=s.getVertexAttrib(B.aTextureCoordLoc,s.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING),j=s.getVertexAttrib(B.aTextureCoordLoc,s.VERTEX_ATTRIB_ARRAY_ENABLED);let oe=0,K=0;this._isWebGL2?(oe=s.getVertexAttrib(B.aVertexPositionLoc,s.VERTEX_ATTRIB_ARRAY_DIVISOR),K=s.getVertexAttrib(B.aTextureCoordLoc,s.VERTEX_ATTRIB_ARRAY_DIVISOR),s.vertexAttribDivisor(B.aVertexPositionLoc,0),s.vertexAttribDivisor(B.aTextureCoordLoc,0)):this._instancedArraysExtension&&(oe=s.getVertexAttrib(B.aVertexPositionLoc,this._instancedArraysExtension.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE),K=s.getVertexAttrib(B.aTextureCoordLoc,this._instancedArraysExtension.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE),this._instancedArraysExtension.vertexAttribDivisorANGLE(B.aVertexPositionLoc,0),this._instancedArraysExtension.vertexAttribDivisorANGLE(B.aTextureCoordLoc,0)),s.bindFramebuffer(s.FRAMEBUFFER,b),s.viewport(0,0,this._framebufferWidth,this._framebufferHeight),s.clear(s.COLOR_BUFFER_BIT),s.bindBuffer(s.ARRAY_BUFFER,M),s.vertexAttribPointer(B.aVertexPositionLoc,2,s.FLOAT,!1,4*4,0),s.enableVertexAttribArray(B.aVertexPositionLoc),s.vertexAttribPointer(B.aTextureCoordLoc,2,s.FLOAT,!1,4*4,2*4),s.enableVertexAttribArray(B.aTextureCoordLoc),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,T),s.useProgram(B.program),s.uniform1f(B.uTexWidthLoc,Mt.dataWidth),s.uniformMatrix4fv(B.uUvTransformLoc,!1,this._cameraUvTransform),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,e),s.uniform1i(B.uSamplerLoc,0),s.drawElements(s.TRIANGLES,6,s.UNSIGNED_SHORT,0),s.bindBuffer(s.ARRAY_BUFFER,Z),s.vertexAttribPointer(B.aVertexPositionLoc,L,F,U,k,X),s.bindBuffer(s.ARRAY_BUFFER,J),s.vertexAttribPointer(B.aTextureCoordLoc,G,O,z,Q,H),s.bindBuffer(s.ARRAY_BUFFER,_),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,y),Y||s.disableVertexAttribArray(B.aVertexPositionLoc),j||s.disableVertexAttribArray(B.aTextureCoordLoc),this._isWebGL2?(s.vertexAttribDivisor(B.aVertexPositionLoc,oe),s.vertexAttribDivisor(B.aTextureCoordLoc,K)):this._instancedArraysExtension&&(this._instancedArraysExtension.vertexAttribDivisorANGLE(B.aVertexPositionLoc,oe),this._instancedArraysExtension.vertexAttribDivisorANGLE(B.aTextureCoordLoc,K)),s.bindFramebuffer(s.FRAMEBUFFER,g),s.useProgram(p),s.bindTexture(s.TEXTURE_2D,m),s.activeTexture(f),s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,d),o.pop(),c&&s.enable(s.BLEND),u&&s.enable(s.CULL_FACE),l&&s.enable(s.DEPTH_TEST),a&&s.enable(s.SCISSOR_TEST),h&&s.enable(s.STENCIL_TEST)}readFrame(e,n){let i=this._gl,r=new Uint8Array(n);const s=i.getParameter(i.FRAMEBUFFER_BINDING);let o=this._getFramebuffer(i,Mt.dataWidth/4,Mt.dataHeight);return i.bindFramebuffer(i.FRAMEBUFFER,o),i.readPixels(0,0,this._framebufferWidth,this._framebufferHeight,i.RGBA,i.UNSIGNED_BYTE,r),i.bindFramebuffer(i.FRAMEBUFFER,s),{uvTransform:this._cameraUvTransform,data:n,texture:e,dataWidth:Mt.dataWidth,dataHeight:Mt.dataHeight,userFacing:this._computedFrontCameraRotation}}_updateTransforms(e,n){e==this._computedTransformRotation&&n==this._computedFrontCameraRotation||(this._computedTransformRotation=e,this._computedFrontCameraRotation=n,this._cameraUvTransform=this._getCameraUvTransform())}_getCameraUvTransform(){switch(this._computedTransformRotation){case 270:return new Float32Array([0,1,0,0,-1,0,0,0,0,0,1,0,1,0,0,1]);case 180:return new Float32Array([-1,0,0,0,0,-1,0,0,0,0,1,0,1,1,0,1]);case 90:return new Float32Array([0,-1,0,0,1,0,0,0,0,0,1,0,0,1,0,1])}return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}_getFramebuffer(e,n,i){if(this._framebufferWidth===n&&this._framebufferHeight===i&&this._framebufferId)return this._framebufferId;if(this._framebufferId&&(e.deleteFramebuffer(this._framebufferId),this._framebufferId=null),this._renderTexture&&(e.deleteTexture(this._renderTexture),this._renderTexture=null),this._framebufferId=e.createFramebuffer(),!this._framebufferId)throw new Error("Unable to create framebuffer");if(e.bindFramebuffer(e.FRAMEBUFFER,this._framebufferId),this._renderTexture=e.createTexture(),!this._renderTexture)throw new Error("Unable to create render texture");e.activeTexture(e.TEXTURE0);const r=e.getParameter(e.TEXTURE_BINDING_2D);e.bindTexture(e.TEXTURE_2D,this._renderTexture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n,i,0,e.RGBA,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameterf(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._renderTexture,0);let s=e.checkFramebufferStatus(e.FRAMEBUFFER);if(s!==e.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer not complete: "+s.toString());return this._framebufferWidth=n,this._framebufferHeight=i,e.bindTexture(e.TEXTURE_2D,r),e.bindFramebuffer(e.FRAMEBUFFER,null),this._framebufferId}_getVertexBuffer(e){if(this._vertexBuffer)return this._vertexBuffer;if(this._vertexBuffer=e.createBuffer(),!this._vertexBuffer)throw new Error("Unable to create vertex buffer");e.bindBuffer(e.ARRAY_BUFFER,this._vertexBuffer);let n=new Float32Array([-1,-1,0,0,-1,1,0,1,1,1,1,1,1,-1,1,0]);return e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW),this._vertexBuffer}_getIndexBuffer(e){if(this._indexBuffer)return this._indexBuffer;if(this._indexBuffer=e.createBuffer(),!this._indexBuffer)throw new Error("Unable to create index buffer");e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._indexBuffer);let n=new Uint16Array([0,1,2,0,2,3]);return e.bufferData(e.ELEMENT_ARRAY_BUFFER,n,e.STATIC_DRAW),this._indexBuffer}_getGreyscaleShader(e){if(this._greyscaleShader)return this._greyscaleShader;let n=e.createProgram();if(!n)throw new Error("Unable to create program");let i=$s(e,e.VERTEX_SHADER,Oq),r=$s(e,e.FRAGMENT_SHADER,Nq);e.attachShader(n,i),e.attachShader(n,r),zd(e,n);let s=e.getUniformLocation(n,"uTexWidth");if(!s)throw new Error("Unable to get uniform location uTexWidth");let o=e.getUniformLocation(n,"uUvTransform");if(!o)throw new Error("Unable to get uniform location uUvTransform");let a=e.getUniformLocation(n,"uSampler");if(!a)throw new Error("Unable to get uniform location uSampler");return this._greyscaleShader={program:n,aVertexPositionLoc:e.getAttribLocation(n,"aVertexPosition"),aTextureCoordLoc:e.getAttribLocation(n,"aTextureCoord"),uTexWidthLoc:s,uUvTransformLoc:o,uSamplerLoc:a},this._greyscaleShader}}let Oq=`
    attribute vec4 aVertexPosition;
    attribute vec2 aTextureCoord;

    varying highp vec2 vTextureCoord1;
    varying highp vec2 vTextureCoord2;
    varying highp vec2 vTextureCoord3;
    varying highp vec2 vTextureCoord4;

    uniform float uTexWidth;
	uniform mat4 uUvTransform;

    void main(void) {
      highp vec2 offset1 = vec2(1.5 / uTexWidth, 0);
      highp vec2 offset2 = vec2(0.5 / uTexWidth, 0);

      gl_Position = aVertexPosition;
      vTextureCoord1 = (uUvTransform * vec4(aTextureCoord - offset1, 0, 1)).xy;
      vTextureCoord2 = (uUvTransform * vec4(aTextureCoord - offset2, 0, 1)).xy;
      vTextureCoord3 = (uUvTransform * vec4(aTextureCoord + offset2, 0, 1)).xy;
      vTextureCoord4 = (uUvTransform * vec4(aTextureCoord + offset1, 0, 1)).xy;
    }
`,Nq=`
  varying highp vec2 vTextureCoord1;
  varying highp vec2 vTextureCoord2;
  varying highp vec2 vTextureCoord3;
  varying highp vec2 vTextureCoord4;

  uniform sampler2D uSampler;

  const lowp vec3 colorWeights = vec3(77.0 / 256.0, 150.0 / 256.0, 29.0 / 256.0);

  void main(void) {
    lowp vec4 outpx;

    outpx.r = dot(colorWeights, texture2D(uSampler, vTextureCoord1).xyz);
    outpx.g = dot(colorWeights, texture2D(uSampler, vTextureCoord2).xyz);
    outpx.b = dot(colorWeights, texture2D(uSampler, vTextureCoord3).xyz);
    outpx.a = dot(colorWeights, texture2D(uSampler, vTextureCoord4).xyz);

    gl_FragColor = outpx;
  }
`,Gq=1,NR=new Map;class Cu extends Ay{constructor(e,n){super(),this._video=e,this._pipeline=n,this._isPaused=!0,this._hadFrames=!1,this._isUserFacing=!1,this._cameraToScreenRotation=0,this._isUploadFrame=!0,this._cameraToDeviceTransform=ln(),this._cameraToDeviceTransformUserFacing=ln(),this._cameraModel=new Float32Array([300,300,160,120,0,0]),ji(this._cameraToDeviceTransformUserFacing,[-1,1,-1]);let i=this._video;this._video instanceof HTMLVideoElement?i.addEventListener("loadedmetadata",()=>{this._hadFrames=!0}):this._hadFrames=!0,this._resetGLContext=this._resetGLContext.bind(this);let r=yt.get(this._pipeline);r&&r.onGLContextReset.bind(this._resetGLContext)}static createVideoElementSource(e,n){let i=Gq++;return NR.set(i,new Cu(n,e)),To("html_element_source_t initialized"),i}static getVideoElementSource(e){return NR.get(e)}_resetGLContext(){var e,n;this._currentVideoTexture=void 0,(n=(e=this._imageProcessor)===null||e===void 0?void 0:e.resetGLContext)===null||n===void 0||n.call(e)}destroy(){let e=yt.get(this._pipeline);e&&e.onGLContextReset.unbind(this._resetGLContext),this.pause(),this._resetGLContext()}pause(){this._isPaused=!0;let e=yt.get(this._pipeline);e&&e.currentCameraSource===this&&(e.currentCameraSource=void 0)}start(){var e;this._isPaused&&(this._isUploadFrame=!0,this._video instanceof HTMLVideoElement&&(this._hadFrames=!1)),this._isPaused=!1;let n=yt.get(this._pipeline);n&&n.currentCameraSource!==this&&((e=n.currentCameraSource)===null||e===void 0||e.pause(),n.currentCameraSource=this)}getFrame(e){let n=yt.get(this._pipeline);if(!n)return;let i=n.glContext;if(!!i&&!this._isPaused&&!!this._hadFrames)try{let r=this._processFrame(i,this._cameraToScreenRotation,e);if(r){let s=n.registerToken(r);n.sendDataToWorker(r.data||new ArrayBuffer(0),s,r.dataWidth,r.dataHeight,r.userFacing,r.cameraToDevice,r.cameraModel)}}catch{console.log("Unable to process frame")}}_processFrame(e,n,i){let r=yt.get(this._pipeline);if(!r)return;if(this._imageProcessor||(this._imageProcessor=new Uq(e)),this._isUploadFrame){if(this._currentVideoTexture||(this._currentVideoTexture=r.getVideoTexture()),!this._currentVideoTexture)return;this._imageProcessor.uploadFrame(this._currentVideoTexture,this._video,n,this._isUserFacing),this._isUploadFrame=!this._isUploadFrame;return}if(i||!this._currentVideoTexture)return;this._isUploadFrame=!this._isUploadFrame;let s=Mt.dataWidth*Mt.dataHeight,o=r.cameraPixelArrays.pop();for(;o&&o.byteLength!==s;)o=r.cameraPixelArrays.pop();o||(o=new ArrayBuffer(s));let a=this._currentVideoTexture;this._currentVideoTexture=void 0;let l=300*Mt.dataWidth/320;return this._cameraModel[0]=l,this._cameraModel[1]=l,this._cameraModel[2]=Mt.dataWidth*.5,this._cameraModel[3]=Mt.dataHeight*.5,Object.assign(Object.assign({},this._imageProcessor.readFrame(a,o)),{cameraModel:this._cameraModel,cameraSource:this,cameraToDevice:this._isUserFacing?this._cameraToDeviceTransformUserFacing:this._cameraToDeviceTransform})}uploadGL(){}}var $2=globalThis&&globalThis.__awaiter||function(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(h){o(h)}}function l(u){try{c(i.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(t,e||[])).next())})};let od=document.createElement("video");od.setAttribute("playsinline","");od.setAttribute("webkit-playsinline","");Mt.videoElementInDOM&&(od.style.width="0px",od.style.height="0px",document.body.appendChild(od));class yo extends Cu{constructor(e,n,i){super(od,n),this._impl=e,this._deviceId=i,this._currentStream=null,this._activeDeviceId=null,this._hasStartedOrientation=!1,this._deviceMotionListener=r=>{let s=yt.get(this._pipeline);if(!s)return;let o=r.timeStamp!==void 0&&r.timeStamp!==null?r.timeStamp:performance.now();r.accelerationIncludingGravity!==null&&r.accelerationIncludingGravity.x!==null&&r.accelerationIncludingGravity.y!==null&&r.accelerationIncludingGravity.z!==null&&s.motionAccelerometerSubmit(o,r.accelerationIncludingGravity.x*Mt.deviceMotionMutliplier,r.accelerationIncludingGravity.y*Mt.deviceMotionMutliplier,r.accelerationIncludingGravity.z*Mt.deviceMotionMutliplier),r.rotationRate!==null&&r.rotationRate.alpha!==null&&r.rotationRate.beta!==null&&r.rotationRate.gamma!==null&&!this._hasStartedOrientation?(r.timeStamp,s.motionRotationRateSubmit(o,r.rotationRate.alpha*Math.PI/-180,r.rotationRate.beta*Math.PI/-180,r.rotationRate.gamma*Math.PI/-180)):this._hasStartedOrientation||this._startDeviceOrientation()}}destroy(){Ob(this._impl),super.destroy()}_stop(){if(!this._currentStream)return;this._currentStream.getTracks().forEach(n=>n.stop()),this._currentStream=null}pause(){super.pause(),this._stopDeviceMotion(),this._syncCamera()}start(){super.start(),this._startDeviceMotion(),this._syncCamera()}_getConstraints(){return $2(this,void 0,void 0,function*(){let e,n;this._deviceId!==yo.DEFAULT_DEVICE_ID&&this._deviceId!==yo.USER_DEFAULT_DEVICE_ID?e=this._deviceId:n=this._deviceId===yo.DEFAULT_DEVICE_ID?"environment":"user";let i={audio:!1,video:{facingMode:n,width:Mt.videoWidth,height:Mt.videoHeight,frameRate:Mt.requestHighFrameRate?60:void 0,deviceId:e}};if(e||!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return i;let r=yield navigator.mediaDevices.enumerateDevices(),s=!1;return r=r.filter(o=>{if(o.kind!=="videoinput")return!1;if(o.getCapabilities){s=!0;let a=o.getCapabilities();if(a&&a.facingMode&&a.facingMode.indexOf(n==="user"?"user":"environment")<0)return!1}return!0}),!s||r.length===0||typeof i.video=="object"&&(To("choosing device ID",r[r.length-1].deviceId),i.video.deviceId=r[r.length-1].deviceId),i})}getFrame(e){this._cameraToScreenRotation=eh(!1),super.getFrame(e)}_getUserMedia(){return $2(this,void 0,void 0,function*(){let e=yield this._getConstraints();return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?yield navigator.mediaDevices.getUserMedia(e):yield new Promise((n,i)=>{navigator.getUserMedia(e,n,i)})})}_syncCamera(){return $2(this,void 0,void 0,function*(){if(this._currentStream&&this._isPaused){this._stop();return}if(this._currentStream&&this._activeDeviceId!==this._deviceId&&this._stop(),!this._isPaused){if(this._activeDeviceId=this._deviceId,this._currentStream=yield this._getUserMedia(),this._isPaused){yield this._syncCamera();return}if(this._isUserFacing=!1,this._currentStream){let e=this._currentStream.getVideoTracks();e.length>0&&(this._isUserFacing=e[0].getSettings().facingMode==="user")}if(!(this._video instanceof HTMLVideoElement))return;this._video.src="",this._video.loop=!1,this._video.muted=!0,this._video.srcObject=this._currentStream,this._video.play()}})}_startDeviceOrientation(){this._hasStartedOrientation||(this._hasStartedOrientation=!0,this._deviceOrientationListener=e=>{let n=yt.get(this._pipeline);if(!n)return;let i=e.timeStamp!==void 0&&e.timeStamp!==null?e.timeStamp:performance.now();e.alpha===null||e.beta===null||e.gamma===null||n.motionAttitudeSubmit(i,e.alpha,e.beta,e.gamma)},window.addEventListener("deviceorientation",this._deviceOrientationListener))}_startDeviceMotion(){window.addEventListener("devicemotion",this._deviceMotionListener,!1)}_stopDeviceMotion(){window.removeEventListener("devicemotion",this._deviceMotionListener),this._deviceOrientationListener&&window.removeEventListener("deviceorientation",this._deviceOrientationListener)}}yo.USER_DEFAULT_DEVICE_ID="Simulated User Default Device ID: a908df7f-5661-4d20-b227-a1c15d2fdb4b";yo.DEFAULT_DEVICE_ID="Simulated Default Device ID: a908df7f-5661-4d20-b227-a1c15d2fdb4b";var eE=globalThis&&globalThis.__awaiter||function(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(h){o(h)}}function l(u){try{c(i.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(t,e||[])).next())})};class Lu extends Ay{constructor(e,n,i){super(),this._impl=e,this._pipeline=n,this._deviceId=i,this._currentStream=null,this._activeDeviceId=null,this._isPaused=!0,this._isUserFacing=!1,this._hadFrames=!1,this._canvas=new OffscreenCanvas(640,480),this._context=this._canvas.getContext("2d"),this._lastFrameTime=-1,this._video=document.createElement("video"),this._cameraToDeviceTransform=ln(),this._cameraToDeviceTransformUserFacing=ln(),this._cameraModel=new Float32Array([300,300,160,120,0,0]),this._hasStartedOrientation=!1,this._deviceMotionListener=r=>{let s=yt.get(this._pipeline);if(!s)return;let o=r.timeStamp!==void 0&&r.timeStamp!==null?r.timeStamp:performance.now();r.accelerationIncludingGravity!==null&&r.accelerationIncludingGravity.x!==null&&r.accelerationIncludingGravity.y!==null&&r.accelerationIncludingGravity.z!==null&&s.motionAccelerometerSubmit(o,r.accelerationIncludingGravity.x*Mt.deviceMotionMutliplier,r.accelerationIncludingGravity.y*Mt.deviceMotionMutliplier,r.accelerationIncludingGravity.z*Mt.deviceMotionMutliplier),r.rotationRate!==null&&r.rotationRate.alpha!==null&&r.rotationRate.beta!==null&&r.rotationRate.gamma!==null&&!this._hasStartedOrientation?(r.timeStamp,s.motionRotationRateSubmit(o,r.rotationRate.alpha*Math.PI/-180,r.rotationRate.beta*Math.PI/-180,r.rotationRate.gamma*Math.PI/-180)):this._hasStartedOrientation||this._startDeviceOrientation()},To("Using ImageBitmap camera source"),ji(this._cameraToDeviceTransformUserFacing,[-1,1,-1]),this._video.muted=!0,this._video.setAttribute("playsinline",""),this._video.setAttribute("webkit-playsinline",""),Mt.videoElementInDOM&&(this._video.style.width="0px",this._video.style.height="0px",document.body.appendChild(this._video)),this._video.addEventListener("loadedmetadata",()=>{this._hadFrames=!0})}destroy(){this.pause(),Ob(this._impl)}_stop(){if(!this._currentStream)return;this._currentStream.getTracks().forEach(n=>n.stop()),this._currentStream=null}pause(){this._isPaused=!0;let e=yt.get(this._pipeline);e&&e.currentCameraSource===this&&(e.currentCameraSource=void 0),this._stopDeviceMotion(),this._syncCamera()}start(){var e;let n=yt.get(this._pipeline);n&&n.currentCameraSource!==this&&((e=n.currentCameraSource)===null||e===void 0||e.pause(),n.currentCameraSource=this),this._isPaused=!1,this._startDeviceMotion(),this._syncCamera()}_getConstraints(){return eE(this,void 0,void 0,function*(){let e,n;this._deviceId!==Lu.DEFAULT_DEVICE_ID&&this._deviceId!==Lu.USER_DEFAULT_DEVICE_ID?e=this._deviceId:n=this._deviceId===Lu.DEFAULT_DEVICE_ID?"environment":"user";let i={audio:!1,video:{facingMode:n,width:Mt.videoWidth,height:Mt.videoHeight,frameRate:Mt.requestHighFrameRate?60:void 0,deviceId:e}};if(e||!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return i;let r=yield navigator.mediaDevices.enumerateDevices(),s=!1;return r=r.filter(o=>{if(o.kind!=="videoinput")return!1;if(o.getCapabilities){s=!0;let a=o.getCapabilities();if(a&&a.facingMode&&a.facingMode.indexOf(n==="user"?"user":"environment")<0)return!1}return!0}),!s||r.length===0||typeof i.video=="object"&&(To("choosing device ID",r[r.length-1].deviceId),i.video.deviceId=r[r.length-1].deviceId),i})}getFrame(e){var n,i;if(!this._context||!this._hadFrames||e)return;let r=performance.now();if(r<this._lastFrameTime+25)return;this._lastFrameTime=r,this._canvas.width!==this._video.videoWidth&&(this._canvas.width=this._video.videoWidth),this._canvas.height!==this._video.videoHeight&&(this._canvas.height=this._video.videoHeight),this._context.drawImage(this._video,0,0);const s=this._canvas.transferToImageBitmap();let o=eh(!1),a=yt.get(this._pipeline);if(!a)return;let l=300*Mt.dataWidth/320;this._cameraModel[0]=l,this._cameraModel[1]=l,this._cameraModel[2]=Mt.dataWidth*.5,this._cameraModel[3]=Mt.dataHeight*.5;let c=a.registerToken({dataWidth:this._canvas.width,dataHeight:this._canvas.height,texture:void 0,userFacing:this._isUserFacing,cameraSource:this,cameraModel:this._cameraModel.slice(),cameraToDevice:this._isUserFacing?this._cameraToDeviceTransformUserFacing:this._cameraToDeviceTransform});(i=(n=yt.get(this._pipeline))===null||n===void 0?void 0:n.sendImageBitmapToWorker)===null||i===void 0||i.call(n,s,o,this._isUserFacing,c,this._cameraModel,this._isUserFacing?this._cameraToDeviceTransformUserFacing:this._cameraToDeviceTransform)}_getUserMedia(){return eE(this,void 0,void 0,function*(){let e=yield this._getConstraints();return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?yield navigator.mediaDevices.getUserMedia(e):yield new Promise((n,i)=>{navigator.getUserMedia(e,n,i)})})}_syncCamera(){return eE(this,void 0,void 0,function*(){if(this._currentStream&&this._isPaused){this._stop();return}if(this._currentStream&&this._activeDeviceId!==this._deviceId&&this._stop(),!this._isPaused){if(this._activeDeviceId=this._deviceId,this._currentStream=yield this._getUserMedia(),this._isPaused){yield this._syncCamera();return}if(this._isUserFacing=!1,this._currentStream){let e=this._currentStream.getVideoTracks();e.length>0&&(this._isUserFacing=e[0].getSettings().facingMode==="user")}this._video.src="",this._video.loop=!1,this._video.muted=!0,this._video.srcObject=this._currentStream,this._video.play()}})}_startDeviceOrientation(){this._hasStartedOrientation||(this._hasStartedOrientation=!0,window.addEventListener("deviceorientation",e=>{let n=yt.get(this._pipeline);if(!n)return;let i=e.timeStamp!==void 0&&e.timeStamp!==null?e.timeStamp:performance.now();e.alpha===null||e.beta===null||e.gamma===null||n.motionAttitudeSubmit(i,e.alpha,e.beta,e.gamma)}))}_startDeviceMotion(){window.addEventListener("devicemotion",this._deviceMotionListener,!1)}_stopDeviceMotion(){window.removeEventListener("devicemotion",this._deviceMotionListener)}uploadGL(e){const n=yt.get(this._pipeline),i=n==null?void 0:n.glContext;if(!e||e.texture||!e.frame||!n||!i)return;let r=n.getVideoTexture();!r||(i.bindTexture(i.TEXTURE_2D,r),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!1),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,e.frame),i.bindTexture(i.TEXTURE_2D,null),e.texture=r,e.frame.close(),delete e.frame)}}Lu.USER_DEFAULT_DEVICE_ID="Simulated User Default Device ID: a908df7f-5661-4d20-b227-a1c15d2fdb4b";Lu.DEFAULT_DEVICE_ID="Simulated Default Device ID: a908df7f-5661-4d20-b227-a1c15d2fdb4b";var tE=globalThis&&globalThis.__awaiter||function(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(h){o(h)}}function l(u){try{c(i.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(t,e||[])).next())})};class ku extends Ay{constructor(e,n,i){super(),this._impl=e,this._pipeline=n,this._deviceId=i,this._currentStream=null,this._activeDeviceId=null,this._isPaused=!0,this._isUserFacing=!1,this._cameraToScreenRotation=0,this._hasStartedOrientation=!1,this._deviceMotionListener=r=>{let s=yt.get(this._pipeline);if(!s)return;let o=r.timeStamp!==void 0&&r.timeStamp!==null?r.timeStamp:performance.now();r.accelerationIncludingGravity!==null&&r.accelerationIncludingGravity.x!==null&&r.accelerationIncludingGravity.y!==null&&r.accelerationIncludingGravity.z!==null&&s.motionAccelerometerSubmit(o,r.accelerationIncludingGravity.x*Mt.deviceMotionMutliplier,r.accelerationIncludingGravity.y*Mt.deviceMotionMutliplier,r.accelerationIncludingGravity.z*Mt.deviceMotionMutliplier),r.rotationRate!==null&&r.rotationRate.alpha!==null&&r.rotationRate.beta!==null&&r.rotationRate.gamma!==null&&!this._hasStartedOrientation?(r.timeStamp,s.motionRotationRateSubmit(o,r.rotationRate.alpha*Math.PI/-180,r.rotationRate.beta*Math.PI/-180,r.rotationRate.gamma*Math.PI/-180)):this._hasStartedOrientation||this._startDeviceOrientation()},To("Using MSTP camera source")}destroy(){this.pause(),Ob(this._impl)}_stop(){if(!this._currentStream)return;this._currentStream.getTracks().forEach(n=>n.stop()),this._currentStream=null}pause(){this._isPaused=!0;let e=yt.get(this._pipeline);e&&e.currentCameraSource===this&&(e.currentCameraSource=void 0),this._stopDeviceMotion(),this._syncCamera()}start(){var e;let n=yt.get(this._pipeline);n&&n.currentCameraSource!==this&&((e=n.currentCameraSource)===null||e===void 0||e.pause(),n.currentCameraSource=this),this._isPaused=!1,this._startDeviceMotion(),this._syncCamera()}_getConstraints(){return tE(this,void 0,void 0,function*(){let e,n;this._deviceId!==ku.DEFAULT_DEVICE_ID&&this._deviceId!==ku.USER_DEFAULT_DEVICE_ID?e=this._deviceId:n=this._deviceId===ku.DEFAULT_DEVICE_ID?"environment":"user";let i={audio:!1,video:{facingMode:n,width:Mt.videoWidth,height:Mt.videoHeight,frameRate:Mt.requestHighFrameRate?60:30,deviceId:e}};if(e||!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return i;let r=yield navigator.mediaDevices.enumerateDevices(),s=!1;return r=r.filter(o=>{if(o.kind!=="videoinput")return!1;if(o.getCapabilities){s=!0;let a=o.getCapabilities();if(a&&a.facingMode&&a.facingMode.indexOf(n==="user"?"user":"environment")<0)return!1}return!0}),!s||r.length===0||typeof i.video=="object"&&(To("choosing device ID",r[r.length-1].deviceId),i.video.deviceId=r[r.length-1].deviceId),i})}getFrame(e){var n,i;let r=eh(!1);r!=this._cameraToScreenRotation&&((i=(n=yt.get(this._pipeline))===null||n===void 0?void 0:n.sendCameraToScreenRotationToWorker)===null||i===void 0||i.call(n,r),this._cameraToScreenRotation=r)}_getUserMedia(){return tE(this,void 0,void 0,function*(){let e=yield this._getConstraints();return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?yield navigator.mediaDevices.getUserMedia(e):yield new Promise((n,i)=>{navigator.getUserMedia(e,n,i)})})}_syncCamera(){return tE(this,void 0,void 0,function*(){if(this._currentStream&&this._isPaused){this._stop();return}if(this._currentStream&&this._activeDeviceId!==this._deviceId&&this._stop(),!this._isPaused){if(this._activeDeviceId=this._deviceId,this._currentStream=yield this._getUserMedia(),this._isPaused){yield this._syncCamera();return}if(this._isUserFacing=!1,this._currentStream){let e=this._currentStream.getVideoTracks();if(e.length>0){this._isUserFacing=e[0].getSettings().facingMode==="user";let n=new MediaStreamTrackProcessor({track:e[0]}),i=yt.get(this._pipeline);i&&i.sendCameraStreamToWorker(this._impl,n.readable,this._isUserFacing)}}}})}_startDeviceOrientation(){this._hasStartedOrientation||(this._hasStartedOrientation=!0,window.addEventListener("deviceorientation",e=>{let n=yt.get(this._pipeline);if(!n)return;let i=e.timeStamp!==void 0&&e.timeStamp!==null?e.timeStamp:performance.now();e.alpha===null||e.beta===null||e.gamma===null||n.motionAttitudeSubmit(i,e.alpha,e.beta,e.gamma)}))}_startDeviceMotion(){window.addEventListener("devicemotion",this._deviceMotionListener,!1)}_stopDeviceMotion(){window.removeEventListener("devicemotion",this._deviceMotionListener)}uploadGL(e){const n=yt.get(this._pipeline),i=n==null?void 0:n.glContext;if(!e||e.texture||!e.frame||!n||!i)return;let r=n.getVideoTexture();!r||(i.bindTexture(i.TEXTURE_2D,r),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!1),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,e.frame),i.bindTexture(i.TEXTURE_2D,null),e.texture=r,e.frame.close(),delete e.frame)}}ku.USER_DEFAULT_DEVICE_ID="Simulated User Default Device ID: a908df7f-5661-4d20-b227-a1c15d2fdb4b";ku.DEFAULT_DEVICE_ID="Simulated Default Device ID: a908df7f-5661-4d20-b227-a1c15d2fdb4b";let zq=1,Ub=new Map;function Qq(){return zq++}function nE(t,e){Ub.set(t,e)}function Rv(t){return Ub.get(t)}function Ob(t){Ub.delete(t)}function Hq(t,e){let n=Qq();return Mt.preferMediaStreamTrackProcessorCamera&&"MediaStreamTrackProcessor"in window&&"MediaStreamTrackGenerator"in window?nE(n,new ku(n,t,e)):Mt.preferImageBitmapCamera&&typeof OffscreenCanvas<"u"?nE(n,new Lu(n,t,e)):nE(n,new yo(n,t,e)),To("camera_source_t initialized"),n}class Vq{constructor(e){this._gl=e}dispose(){this._vbo&&this._gl.deleteBuffer(this._vbo),this._uvbo&&this._gl.deleteBuffer(this._uvbo),this._ibo&&this._gl.deleteBuffer(this._ibo),this._shader&&this._gl.deleteProgram(this._shader.prog),this._vbo=void 0,this._uvbo=void 0,this._ibo=void 0,this._shader=void 0}_generateIBO(e,n){if(this._ibo&&this._lastIndices===e)return this._ibo;if(this._lastIndices=e,this._ibo||(this._ibo=n.createBuffer()),!this._ibo)throw new Error("Unable to create buffer object");return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this._ibo),n.bufferData(n.ELEMENT_ARRAY_BUFFER,e,n.STATIC_DRAW),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null),this._ibo}_generateVBO(e,n){if(this._vbo||(this._vbo=n.createBuffer()),!this._vbo)throw new Error("Unable to create buffer object");return n.bindBuffer(n.ARRAY_BUFFER,this._vbo),n.bufferData(n.ARRAY_BUFFER,e,n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),this._vbo}_generateUVBO(e,n){if(this._uvbo||(this._uvbo=n.createBuffer()),!this._uvbo)throw new Error("Unable to create buffer object");return n.bindBuffer(n.ARRAY_BUFFER,this._uvbo),n.bufferData(n.ARRAY_BUFFER,e,n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),this._uvbo}draw(e,n,i){var r;const s=n.getPreviewMesh(i),o=(r=n.getTargetInfo(i).preview)===null||r===void 0?void 0:r.image;if(!s||!o||!o.complete)return;let a=this._gl,l=this._getShader(a),c=this._generateVBO(s.vertices,a),u=this._generateUVBO(s.uvs,a),h=this._generateIBO(s.indices,a);a.enable(a.DEPTH_TEST),a.enable(a.CULL_FACE),a.useProgram(l.prog),a.uniformMatrix4fv(l.unif_matrix,!1,e),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,Wq(a,o)),a.uniform1i(l.unif_skinSampler,0),a.bindBuffer(a.ARRAY_BUFFER,c),a.vertexAttribPointer(l.attr_position,3,a.FLOAT,!1,0,0),a.enableVertexAttribArray(l.attr_position),a.bindBuffer(a.ARRAY_BUFFER,u),a.vertexAttribPointer(l.attr_textureCoord,2,a.FLOAT,!1,0,0),a.enableVertexAttribArray(l.attr_textureCoord),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,h),a.drawElements(a.TRIANGLES,s.indices.length,a.UNSIGNED_SHORT,0),a.disableVertexAttribArray(l.attr_position),a.disableVertexAttribArray(l.attr_textureCoord),a.bindBuffer(a.ARRAY_BUFFER,null),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null)}_getShader(e){if(this._shader)return this._shader;let n=e.createProgram();if(!n)throw new Error("Unable to create program");let i=$s(e,e.VERTEX_SHADER,jq),r=$s(e,e.FRAGMENT_SHADER,Xq);e.attachShader(n,i),e.attachShader(n,r),zd(e,n);let s=e.getUniformLocation(n,"matrix");if(!s)throw new Error("Unable to get uniform location mattrix");let o=e.getUniformLocation(n,"skinSampler");if(!o)throw new Error("Unable to get uniform location skinSampler");return this._shader={prog:n,unif_matrix:s,unif_skinSampler:o,attr_position:e.getAttribLocation(n,"position"),attr_textureCoord:e.getAttribLocation(n,"textureCoord")},this._shader}}const GR=new Map;function Wq(t,e){let n=GR.get(e);if(n)return n;if(n=t.createTexture()||void 0,!n)throw new Error("Unable to create texture");GR.set(e,n),t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE);const i=0,r=t.RGBA,s=t.RGBA,o=t.UNSIGNED_BYTE;return t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,i,r,s,o,e),e.addEventListener("load",()=>{if(!n)return;t.bindTexture(t.TEXTURE_2D,n);const a=0,l=t.RGBA,c=t.RGBA,u=t.UNSIGNED_BYTE;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,a,l,c,u,e)}),n}let jq=`
#ifndef GL_ES
#define highp
#define mediump
#define lowp
#endif

uniform mat4 matrix;
attribute vec4 position;
attribute vec2 textureCoord;

varying highp vec2 vTextureCoord;

void main()
{
    gl_Position = matrix * position;
    vTextureCoord = textureCoord;
}`,Xq=`
#define highp mediump
#ifdef GL_ES
    // define default precision for float, vec, mat.
    precision highp float;
#else
#define highp
#define mediump
#define lowp
#endif

varying highp vec2 vTextureCoord;
uniform sampler2D skinSampler;

void main()
{
    gl_FragColor = texture2D(skinSampler, vTextureCoord);
}`,iE=new Map,Yq=ln();class yt{constructor(e,n,i){this._client=e,this._impl=n,this._mgr=i,this.pendingMessages=[],this.cameraTokens=new Map,this.nextCameraToken=1,this.tokensInFlight=0,this.videoTextures=[],this.cameraPixelArrays=[],this._sequenceRecordDeviceAttitudeMatrices=!0,this._sequenceRecorderFirstCameraToken=0,this.onGLContextReset=new UU}static create(e,n){let i=e.pipeline_create();return iE.set(i,new yt(e,i,n)),i}static get(e){return iE.get(e)}frameUpdate(e){for(let n of this.pendingMessages)e.processMessages(n),this._mgr.postOutgoingMessage({t:"buf",p:this._impl,d:n},[n]);this.pendingMessages=[],this.cleanOldFrames()}cleanOldFrames(){var e,n;let i=this._client.pipeline_camera_frame_user_data(this._impl);if(!!i)for(let r of this.cameraTokens)r[0]<i&&(r[1].texture&&this.videoTextures.push(r[1].texture),(n=(e=r[1].frame)===null||e===void 0?void 0:e.close)===null||n===void 0||n.call(e),this.cameraTokens.delete(r[0]))}cameraTokenReturn(e){if(this._sequenceRecorder&&this._sequenceRecordDeviceAttitudeMatrices&&e.token>=this._sequenceRecorderFirstCameraToken){let n=this.cameraTokens.get(e.token);n&&(e.att&&this._sequenceRecorder.appendAttitudeMatrix(e.att),n.data=e.d,this._sequenceRecorder.appendCameraFrame(n))}this.cameraPixelArrays.push(e.d),this.tokensInFlight--}sequenceRecordStart(e){this._sequenceRecorder||(this._sequenceRecorder=new wt(e)),this._sequenceRecorder.start(),this._sequenceRecorderFirstCameraToken=this.nextCameraToken}sequenceRecordStop(){var e;(e=this._sequenceRecorder)===null||e===void 0||e.stop()}sequenceRecordData(){var e;return((e=this._sequenceRecorder)===null||e===void 0?void 0:e.data())||new Uint8Array(0)}sequenceRecordClear(){delete this._sequenceRecorder}sequenceRecordDeviceAttitudeMatrices(e){this._sequenceRecordDeviceAttitudeMatrices=e}getVideoTexture(){return this.videoTextures.pop()}destroy(){this._client.pipeline_destroy(this._impl),iE.delete(this._impl)}getCurrentCameraInfo(){let e=this._client.pipeline_camera_frame_user_data(this._impl);if(!!e)return this.cameraTokens.get(e)}cameraFrameDrawGL(e,n,i){if(!this.glContext)return;let r=this.getCurrentCameraInfo();!r||(this._cameraDraw||(this._cameraDraw=new Sq(this.glContext)),this._cameraDraw.drawCameraFrame(e,n,r,i===!0))}glContextLost(){this._cameraDraw&&this._cameraDraw.dispose(),this._faceDraw&&this._faceDraw.dispose(),this._imageTargetPreviewDraw&&this._imageTargetPreviewDraw.dispose(),this._faceProjectDraw&&this._faceProjectDraw.dispose(),delete this._cameraDraw,delete this._faceDraw,delete this._imageTargetPreviewDraw,delete this._faceProjectDraw,qH(),this.onGLContextReset.emit();for(let e of this.videoTextures)this.glContext&&this.glContext.deleteTexture(e);this.videoTextures=[];for(let e of this.cameraTokens)this.glContext&&e[1].texture&&this.glContext.deleteTexture(e[1].texture),e[1].texture=void 0;this.glContext=void 0}glContextSet(e,n){this.glContextLost(),this.glContext=e,n=n||[];for(let i=0;i<4;i++){let r=n[i]||e.createTexture();r&&(e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),this.videoTextures.push(r))}e.bindTexture(e.TEXTURE_2D,null)}drawFace(e,n,i,r){if(!this.glContext)return;this._faceDraw||(this._faceDraw=new Bq(this.glContext));let s=ln();Kt(s,e,n),Kt(s,s,i),this._faceDraw.drawFace(s,r)}drawImageTargetPreview(e,n,i,r,s){if(!this.glContext)return;this._imageTargetPreviewDraw||(this._imageTargetPreviewDraw=new Vq(this.glContext));let o=ln();Kt(o,e,n),Kt(o,o,i),this._imageTargetPreviewDraw.draw(o,s,r)}drawFaceProject(e,n,i,r,s,o){!this.glContext||(this._faceProjectDraw||(this._faceProjectDraw=new Dq(this.glContext)),this._faceProjectDraw.drawFace(e,n,i,r,s,o))}cameraFrameTexture(){var e;return(e=this.getCurrentCameraInfo())===null||e===void 0?void 0:e.texture}cameraFrameTextureMatrix(e,n,i){let r=this.getCurrentCameraInfo();return r?HU(r.dataWidth,r.dataHeight,e,n,r.uvTransform||Yq,i):ln()}cameraFrameUserFacing(){var e;return((e=this.getCurrentCameraInfo())===null||e===void 0?void 0:e.userFacing)||!1}cameraPoseWithAttitude(e){let n=mu(this.getCurrentCameraInfo(),this._client.pipeline_camera_frame_camera_attitude(this._impl));if(e){let i=ln();ji(i,[-1,1,1]),Kt(n,i,n),Kt(n,n,i)}return wb(n,n),n}videoFrameFromWorker(e){let n=this.nextCameraToken++;const i=Rv(e.source);!i||(this.cameraTokens.set(n,{dataWidth:e.w,dataHeight:e.h,texture:void 0,frame:e.d,userFacing:e.userFacing,uvTransform:e.uvTransform,cameraModel:e.cameraModel,cameraToDevice:e.cameraToDevice,cameraSource:i}),this.cleanOldFrames())}imageBitmapFromWorker(e){let n=this.cameraTokens.get(e.tokenId);!n||(n.dataWidth=e.dataWidth,n.dataHeight=e.dataHeight,n.frame=e.frame,n.userFacing=e.userFacing,n.uvTransform=e.uvTransform,this.tokensInFlight--,this.cleanOldFrames())}uploadGL(){var e,n;let i=this.getCurrentCameraInfo();(n=(e=i==null?void 0:i.cameraSource)===null||e===void 0?void 0:e.uploadGL)===null||n===void 0||n.call(e,i)}registerToken(e){let n=this.nextCameraToken++;return this.cameraTokens.set(n,e),this.tokensInFlight++,n}processGL(){if(!this.glContext){b_("no GL context for camera frames - please call pipeline_gl_context_set");return}if(!!this.currentCameraSource){if(this.tokensInFlight>0){this.currentCameraSource.getFrame(!0);return}this.currentCameraSource.getFrame(!1)}}motionAccelerometerSubmit(e,n,i,r){var s;this._sequenceRecordDeviceAttitudeMatrices||(s=this._sequenceRecorder)===null||s===void 0||s.appendAccelerometer(e,n,i,r),this._client.pipeline_motion_accelerometer_submit(this._impl,e,n,i,r)}motionRotationRateSubmit(e,n,i,r){var s;this._sequenceRecordDeviceAttitudeMatrices||(s=this._sequenceRecorder)===null||s===void 0||s.appendRotationRate(e,n,i,r),this._client.pipeline_motion_rotation_rate_submit(this._impl,e,n,i,r)}motionAttitudeSubmit(e,n,i,r){var s;this._sequenceRecordDeviceAttitudeMatrices||(s=this._sequenceRecorder)===null||s===void 0||s.appendAttitude(e,n,i,r),this._client.pipeline_motion_attitude_submit(this._impl,e,n,i,r)}motionAttitudeMatrix(e){this._client.pipeline_motion_attitude_matrix_submit(this._impl,e)}sendCameraStreamToWorker(e,n,i){let r={t:"streamC2S",p:this._impl,s:n,userFacing:i,source:e};this._mgr.postOutgoingMessage(r,[r.s])}sendCameraToScreenRotationToWorker(e){let n={p:this._impl,t:"cameraToScreenC2S",r:e};this._mgr.postOutgoingMessage(n,[])}sendImageBitmapToWorker(e,n,i,r,s,o){let a={p:this._impl,t:"imageBitmapC2S",i:e,r:n,tokenId:r,userFacing:i,cameraModel:s,cameraToDevice:o};this._mgr.postOutgoingMessage(a,[e])}sendDataToWorker(e,n,i,r,s,o,a){let l={d:e,p:this._impl,width:i,height:r,token:n,userFacing:s,c2d:o,cm:a,t:"cameraFrameC2S"};this._mgr.postOutgoingMessage(l,[e])}}function mu(t,e){let n=!1;n=t?t.userFacing:!1;let i=ln();return Ed(i,eh(n)*Math.PI/180,[0,0,1]),Kt(i,i,e),i}const qq={0:[{mean:[.235,.2344,.7305],identity:[.008,.0087,.0024,-.0026,6e-4,-.0022,5e-4,.0033,.0026,.0017,-.0055,-8e-4,.0011,.0059,0,2e-4,.001,-.001,-.0044,-.0011,-1e-4,.0024,.0019,-9e-4,4e-4,-.0015,0,.0038,.0013,3e-4,.002,-.0021,.0018,.0023,.0011,.0012,-.0011,-.0017,9e-4,-.0012,-8e-4,7e-4,-.0017,.0029,-.0029,8e-4,-.0027,8e-4,-.0017,4e-4,9e-4,-.001,-3e-4,8e-4,-.0016,-3e-4,-7e-4,.0016,-9e-4,.0021,-5e-4,.0011,-.0024,-1e-4,6e-4,1e-4,-.0026,-4e-4,-3e-4,-9e-4,5e-4,3e-4,-8e-4,-.001,-4e-4,-8e-4,.0022,-.0014,-1e-4,-.0023,0,-.0018,7e-4,-.0036,.0017,.0017,-.0018,-2e-4,-4e-4,-9e-4,-8e-4,3e-4,.0012,9e-4,-4e-4,-.0016,5e-4,-.0013,.0011,.0023,.0029,.0024,.0017,-.0027,-4e-4,-.001,-.0018,-.0015,-.001,.001,-.0013,-1e-4,-2e-4,7e-4,3e-4,3e-4,-.0016,9e-4,-.0021,4e-4,.0014,.002,-7e-4,-4e-4,2e-4,-4e-4,-6e-4,-9e-4,.0015,4e-4,-4e-4,5e-4,-.0015,9e-4,3e-4,3e-4,-2e-4,-8e-4,-9e-4,.0023,4e-4,1e-4,-4e-4,-1e-4,7e-4,2e-4,.001,1e-4,-.0029,-5e-4],expression:[0,3e-4,.0052,-7e-4,-.0051,-.0103,0,.0019,.0027,-.0054,.0135,.035,-5e-4,-6e-4,.0025,-.0045,-.0557,-.003,-.0191,-.1199,.0548,-.0036,-.0682,-.0167,2e-4,-.0085,-.0085,.0044,.0041,-.0568,.0044,.179,.0065,-.0017,-.1006,.0036,-.0267,-.3279,.0301,-.0011,-.0173,-.001,.0046,.2808,.0207,.0162,.238,-.0225,.0017,.1041,.0203,5e-4,.0161,.0031,-.0436,.6504,.0873,-.0099,.1039,.0048,-.0254,.2534,-.0042,.003,-.0106,-.0153,-.0118,.0252,9e-4,-.0071,.0099,.007,-.0724,.0461,-.0235,.0833,.004,.0141,-.0219,.0132,-.0042,-.0179,.0045,-.0215,.3638,.0054,-.0445]},{mean:[.2358,.1466,.7183],identity:[.0077,.0093,1e-4,-.0022,0,-.0041,5e-4,.0022,.0028,.0018,-.0038,-.0013,.001,.0044,-2e-4,0,.0017,-.0016,-.0043,-2e-4,-1e-4,.0023,9e-4,5e-4,-7e-4,-4e-4,-.0017,.003,7e-4,6e-4,.0011,-.0018,5e-4,.0018,-8e-4,4e-4,-.0023,-6e-4,-3e-4,-.0015,-.0014,-1e-4,-.0018,.0027,-.0026,3e-4,-.0031,.0011,-.0026,-.0011,.0012,-.0013,-2e-4,7e-4,-.0021,.0021,4e-4,.0012,-.001,.002,-3e-4,2e-4,-.0026,-3e-4,.001,1e-4,-.0018,-.001,9e-4,-.0011,.001,4e-4,-8e-4,-7e-4,-.001,-3e-4,7e-4,-5e-4,-6e-4,-.0019,-5e-4,-.002,7e-4,-.0027,.0014,.0013,6e-4,-5e-4,-3e-4,-3e-4,-.001,0,.0019,1e-4,6e-4,-.0012,4e-4,-9e-4,4e-4,.0025,3e-4,.0024,.0017,-9e-4,-.0015,-.0015,-.001,-.0023,-.001,-5e-4,-4e-4,8e-4,9e-4,7e-4,2e-4,7e-4,-9e-4,9e-4,-.0013,1e-4,9e-4,2e-4,6e-4,-6e-4,-8e-4,-4e-4,-7e-4,8e-4,.0019,3e-4,.0015,2e-4,-.0015,-3e-4,0,6e-4,3e-4,6e-4,-6e-4,2e-4,5e-4,-4e-4,.0012,-4e-4,2e-4,-8e-4,6e-4,-4e-4,2e-4,-.0021],expression:[-.0034,.0054,.0069,.004,6e-4,-.0104,-3e-4,.0036,.0025,.0065,.0296,.0208,-9e-4,.0154,.0029,-.0167,.0124,.004,-.0102,.0351,.028,-.019,.0146,-.0035,-.0023,-.0069,-.0051,-.01,.0262,-.028,.0112,.082,.023,-.0019,-.066,-.0104,-.0408,.0164,.0075,-.0074,.0367,.0041,.0517,-.0207,.0045,.0291,-.0672,-.0129,.0345,-.1558,-.0106,.0037,-.0437,-.0021,.0854,-.1121,.0187,.0041,.0072,.0011,.0193,-.0143,-.0119,.005,-.02,-.0122,-.008,.0527,.0036,-.006,.0222,.007,-.0429,.046,-.0046,.0226,-.0059,.0202,-.0173,.0087,0,-.0067,-.0095,-.0153,.1506,-.0017,.0021]}],1:[{mean:[-.2271,.2323,.7319],identity:[-.0084,.0097,.0018,.0041,2e-4,-.002,-.0012,.0036,.0019,-9e-4,-.0063,-.001,-3e-4,.0053,6e-4,1e-4,5e-4,-.0015,.0044,-.0025,-.0015,-.002,.0016,-6e-4,2e-4,-.0013,0,-.0022,2e-4,2e-4,-.0025,-.0014,.0015,8e-4,2e-4,.0012,6e-4,-6e-4,.0017,0,3e-4,-1e-4,.0024,.0025,-.0029,-.0015,-.0015,1e-4,.0031,-.0016,7e-4,.0019,6e-4,.002,9e-4,.001,-.0014,-.002,-.0015,.0029,1e-4,5e-4,-.0023,8e-4,-.0011,.0019,.0017,-3e-4,-.0011,-3e-4,.0011,-8e-4,.0019,-.0022,1e-4,.0015,.0017,-8e-4,-.0011,-.0022,3e-4,.0022,6e-4,-.003,-2e-4,0,-.0017,-2e-4,0,1e-4,4e-4,.0012,.0019,-.0014,4e-4,-.0017,-.0012,-.0011,.0021,-.0029,.0026,.0018,-.0023,-.0029,1e-4,.0014,-.0019,-4e-4,-4e-4,.0023,-.0016,0,-9e-4,.0014,-.0015,.0015,-.0016,-.0011,-.0022,1e-4,-.0018,.0027,-.0013,4e-4,-1e-4,-5e-4,.0011,-2e-4,.0015,5e-4,-9e-4,-1e-4,.0029,6e-4,0,-3e-4,7e-4,-8e-4,-5e-4,.0025,3e-4,2e-4,-8e-4,-1e-4,3e-4,0,.0014,2e-4,-.0024,1e-4],expression:[-.0025,-9e-4,.006,.004,-.0027,-.0113,-8e-4,.001,.0031,-.0016,.0144,.0382,-3e-4,-5e-4,.0035,-.0044,-.0511,-.0014,-7e-4,-.1007,.0582,-6e-4,-.0606,-.0165,5e-4,-.0087,-.0093,.0036,.0057,-.0576,-.0039,.1488,.0127,.0016,-.0666,-9e-4,-.0153,.3162,-.0445,-.0021,.0023,.0043,-.0033,.2382,.0063,-.0217,.167,-.039,.0097,-.1144,-.0189,-.0145,.6831,.0632,-.0012,-.1959,-.0133,4e-4,.1108,-3e-4,.0062,.2593,-.0161,-.0018,-.0051,-.012,.0162,.016,-.0022,-.0052,-.0201,.0101,.0115,.0365,-.024,-.0059,.0188,-.0336,.0352,.0224,-.0229,.0146,.0086,-.0273,-.0032,.0103,-.0112]},{mean:[-.2288,.1541,.7202],identity:[-.0082,.0101,2e-4,.0036,-7e-4,-.0037,-8e-4,.0024,.0022,-.0013,-.0045,-.0013,-6e-4,.0045,-4e-4,4e-4,.0012,-.0014,.0042,-.001,-7e-4,-.0019,3e-4,-2e-4,.0012,-4e-4,-.0012,-.0018,-4e-4,-1e-4,-.0014,-.0012,1e-4,1e-4,-.0017,.001,.0015,-1e-4,6e-4,1e-4,0,-6e-4,.0028,.0021,-.0025,-.002,-.0015,7e-4,.0028,-.0023,9e-4,.0013,1e-4,.0016,.0012,.0032,-6e-4,-.0013,-.0011,.0021,3e-4,-5e-4,-.0024,4e-4,-4e-4,.0014,.0015,-8e-4,-3e-4,3e-4,.0017,-6e-4,.002,-.0018,-3e-4,9e-4,1e-4,2e-4,-6e-4,-.0015,-4e-4,.0022,7e-4,-.0023,0,-2e-4,-2e-4,-3e-4,-1e-4,6e-4,-2e-4,6e-4,.0022,-3e-4,.0013,-.0014,-5e-4,-3e-4,.0013,-.0027,6e-4,.0025,-.0023,-8e-4,-.0013,.0017,-9e-4,-.0019,1e-4,8e-4,-7e-4,-4e-4,0,.001,-.001,.0019,-8e-4,-.0015,-6e-4,-2e-4,-.0011,8e-4,1e-4,9e-4,-8e-4,-4e-4,6e-4,7e-4,.0021,-4e-4,7e-4,-5e-4,.0021,-7e-4,-4e-4,-9e-4,8e-4,3e-4,1e-4,3e-4,1e-4,9e-4,.001,-5e-4,5e-4,-.001,.001,4e-4,-5e-4,-.0012],expression:[8e-4,.0037,.0078,-4e-4,5e-4,-.012,-2e-4,-.0046,.0033,-.0089,.0295,.0221,-.0024,-.0084,.0013,.0057,.0125,.0049,-.0036,.0373,.0285,.0115,.0135,-.0035,.0048,.0108,-.0033,.0106,.0281,-.0301,-.0082,.0803,.0244,-7e-4,-.0725,-.0105,-.0247,-.0036,-.0143,-.0045,-.029,2e-4,-.0303,.0093,-.0021,-.0196,-.0754,-.0211,.0326,.1246,.006,-.0804,-.1499,.0109,.0182,-.0029,-.0014,-.0035,.0072,-8e-4,-.0152,-.0108,-.0166,-.0073,-.0144,-.0095,.0101,.047,-.0018,-.004,-.0189,.0027,.0104,.0298,-.0042,-.0096,.0191,-.0217,.0228,.0226,-.0105,.0047,-.0048,-.0172,.0061,-.0043,-.0016]}],2:{mean:[.5396,.2028,.2496],identity:[.0204,.0146,-.0182,-.0052,.0158,-.0038,-.0025,-.0108,-.006,.0085,-.0044,.0029,.0042,.001,.0095,.0015,-.0034,-.0064,-.0057,7e-4,.0026,7e-4,.0037,-6e-4,.0037,.0026,.0024,5e-4,-.0019,-.0013,.003,-.0028,.0018,-9e-4,.002,-.0047,.004,-.003,.0031,-.0027,-.0026,-.0017,.0016,.0014,-4e-4,.0021,-.002,0,.0017,7e-4,-4e-4,-7e-4,-.0018,-9e-4,2e-4,-.0012,1e-4,-5e-4,-.0011,4e-4,2e-4,.0011,1e-4,8e-4,.0017,-.0013,.0025,.0017,.001,2e-4,3e-4,5e-4,-4e-4,-1e-4,-5e-4,7e-4,-.0022,-.0029,6e-4,-8e-4,-6e-4,6e-4,-5e-4,5e-4,.0013,3e-4,-5e-4,-.003,7e-4,2e-4,.0016,-4e-4,0,0,4e-4,1e-4,.0014,.0012,1e-4,4e-4,-1e-4,8e-4,9e-4,4e-4,-4e-4,9e-4,-2e-4,.001,9e-4,4e-4,1e-4,7e-4,7e-4,.001,-.0017,-8e-4,2e-4,.0017,-3e-4,-1e-4,4e-4,5e-4,7e-4,5e-4,-1e-4,-6e-4,-1e-4,1e-4,-3e-4,-7e-4,-2e-4,-5e-4,0,-3e-4,3e-4,8e-4,-2e-4,-3e-4,5e-4,1e-4,-7e-4,-.001,-2e-4,3e-4,4e-4,-1e-4,7e-4,0,4e-4,4e-4],expression:[1e-4,-4e-4,1e-4,0,5e-4,2e-4,0,0,3e-4,-2e-4,3e-4,5e-4,-1e-4,2e-4,8e-4,1e-4,-2e-4,-5e-4,-3e-4,6e-4,5e-4,0,1e-4,2e-4,1e-4,-1e-4,-6e-4,-2e-4,5e-4,0,-4e-4,4e-4,.0016,4e-4,-4e-4,-.0015,0,1e-4,1e-4,-3e-4,3e-4,.0019,-2e-4,7e-4,4e-4,4e-4,-8e-4,-.0015,.0013,-.0016,-.0069,4e-4,-6e-4,-.0019,0,-1e-4,5e-4,-3e-4,2e-4,.0014,-3e-4,6e-4,.0011,4e-4,-3e-4,-.0032,-6e-4,8e-4,.0025,-3e-4,3e-4,.0015,-1e-4,1e-4,3e-4,-1e-4,0,0,-3e-4,4e-4,.0019,1e-4,0,-8e-4,-1e-4,1e-4,5e-4]},3:{mean:[-.5464,.2141,.26],identity:[-.0207,.0172,-.0176,.0068,.0148,-.0051,.0042,-.0101,-.0058,-.0087,-.0059,.0045,-.0056,.0017,.0097,-.0048,-.004,-.0044,.0019,2e-4,.0041,-.0052,.0041,2e-4,-.0027,6e-4,.002,-.0027,-.0033,-6e-4,-.004,9e-4,-.0012,-1e-4,-.0026,.0021,-.003,-.0025,.0052,.0025,.0022,-1e-4,-8e-4,.0013,.001,4e-4,.0018,.0014,6e-4,-5e-4,-.0015,-.0039,.0014,-1e-4,8e-4,-2e-4,6e-4,-5e-4,-.0038,-.0012,-.0018,-3e-4,.001,9e-4,.0012,.0024,-.0024,-7e-4,-.0016,-.0016,3e-4,-.001,-.0014,-.0014,.001,-3e-4,-7e-4,-.0012,3e-4,6e-4,3e-4,-5e-4,3e-4,.0012,6e-4,-8e-4,4e-4,4e-4,8e-4,-2e-4,-.0014,3e-4,0,.0023,-3e-4,-.0012,-.0013,.0011,-2e-4,-.0014,-1e-4,.0014,0,3e-4,3e-4,-8e-4,-5e-4,-7e-4,-7e-4,-2e-4,3e-4,5e-4,2e-4,-1e-4,.0011,-.0014,1e-4,-.0015,-1e-4,-3e-4,0,-.001,-1e-4,-8e-4,8e-4,-8e-4,-2e-4,-.0011,-3e-4,-4e-4,1e-4,-2e-4,3e-4,-7e-4,0,3e-4,1e-4,-8e-4,5e-4,1e-4,4e-4,.0014,-6e-4,-.001,-3e-4,-2e-4,1e-4,-1e-4,-1e-4,7e-4],expression:[-3e-4,-1e-4,6e-4,4e-4,0,-7e-4,0,-3e-4,-2e-4,-4e-4,.0012,8e-4,1e-4,-5e-4,-7e-4,-4e-4,0,1e-4,-4e-4,.0017,7e-4,0,1e-4,3e-4,0,4e-4,4e-4,5e-4,1e-4,-.001,-7e-4,.0022,.0026,5e-4,-.0024,-.0023,0,1e-4,3e-4,0,-.0013,-.0015,6e-4,.0014,8e-4,-2e-4,-.0025,-.0023,-3e-4,.0049,.006,-2e-4,-7e-4,-2e-4,0,-.0019,-.0018,-2e-4,.0017,.0017,3e-4,.0015,7e-4,1e-4,-.0023,-.0036,2e-4,.0023,.0017,0,-5e-4,-3e-4,-3e-4,4e-4,2e-4,-1e-4,-3e-4,-5e-4,1e-4,.0018,.0025,1e-4,-6e-4,-.0011,0,1e-4,1e-4]},4:{mean:[.0018,.1864,.853],identity:[-.0011,.0134,.0085,9e-4,-.0025,-7e-4,-3e-4,.0033,4e-4,-5e-4,-.0047,-.002,7e-4,.0026,-.0069,-1e-4,.0036,.0072,5e-4,-8e-4,-.0047,4e-4,-8e-4,-.001,0,2e-4,-.0036,-2e-4,-.001,-.0048,-1e-4,.0018,.0044,-7e-4,-2e-4,.0043,3e-4,.002,-.0031,0,-7e-4,.0013,0,.0037,.0033,-.0016,-.0012,.002,-1e-4,-.0027,.0051,5e-4,8e-4,7e-4,-.0017,.0054,.0023,-3e-4,.0032,1e-4,0,7e-4,-5e-4,-.0011,2e-4,8e-4,0,-.0033,-8e-4,-7e-4,7e-4,.0033,5e-4,-3e-4,.0029,-1e-4,-.0024,-.0011,-.002,-.0015,-.0019,2e-4,7e-4,.0031,6e-4,.0012,0,0,-.0021,0,-9e-4,-.0011,-.0011,-2e-4,.0015,.001,.0013,8e-4,.001,-3e-4,9e-4,.0027,-2e-4,-.0011,-.0011,6e-4,7e-4,2e-4,1e-4,-5e-4,-.0022,.0011,-.0014,9e-4,3e-4,2e-4,0,-6e-4,-4e-4,-.0011,-7e-4,.001,-.0012,6e-4,-.0012,-.0015,3e-4,-9e-4,-.0013,-.0013,7e-4,.001,-.0011,-.0013,.0015,4e-4,1e-4,4e-4,-1e-4,-.0016,-.0016,9e-4,-7e-4,-.0024,5e-4,-1e-4,-.0017,-2e-4,3e-4,-9e-4],expression:[-.0017,.0019,.0097,.003,-.0103,-.0093,9e-4,6e-4,.0023,-.0017,-.0204,.0376,.0033,-.0034,.0033,-.0026,-.0322,.0396,-.0032,-.0947,.0942,-7e-4,-.0175,.0266,-.001,-6e-4,.0016,.0025,.0157,-.0142,-.0022,.037,.015,.0021,-.0102,-.0107,.0036,.0055,-.0051,.0021,3e-4,-3e-4,4e-4,-.0177,.0074,-6e-4,-.0357,.0149,-.0066,9e-4,.0013,-.0031,.0016,.0095,.002,.0052,.0035,-3e-4,.0053,-.0082,.002,.0022,-.0071,-.0011,5e-4,.0055,.0011,3e-4,-.0126,-4e-4,3e-4,-.0023,-.0015,.0059,.0063,-.0042,-.0023,.0055,.0019,.0017,-.0075,6e-4,-8e-4,.0018,.0012,.0012,-5e-4]},5:{mean:[-.002,-.0469,1.0039],identity:[-.0017,.0018,.0156,6e-4,-.0038,5e-4,4e-4,.0013,.002,-4e-4,-.0015,-.0051,5e-4,-7e-4,-.0055,-1e-4,-9e-4,.008,-2e-4,.0036,-.0053,4e-4,-.0026,-.0016,7e-4,9e-4,-.009,-3e-4,7e-4,-.0084,.0015,.0021,.0032,-.0015,.0018,.0046,-3e-4,-4e-4,-1e-4,8e-4,-.0044,-7e-4,-8e-4,7e-4,.0048,-.0024,-3e-4,.0024,2e-4,-.0051,.0058,-6e-4,.0028,.0018,-.0021,.0035,.0057,.0011,.0065,0,-2e-4,.0011,.003,-.0027,8e-4,7e-4,3e-4,-.0039,-.002,-2e-4,-.0015,.0034,.0012,-.0025,.0024,-2e-4,4e-4,-.0042,-.0024,-.001,-.0023,.0016,-7e-4,.0039,1e-4,-5e-4,.0018,3e-4,-2e-4,-9e-4,-.0015,3e-4,-7e-4,-1e-4,-2e-4,.0023,.0032,.002,-.0013,.0013,-.0038,.0045,1e-4,-.0031,1e-4,.0019,-1e-4,.0016,.0013,0,-.002,.0023,2e-4,.0011,.0018,-.0024,6e-4,-.0017,.002,-8e-4,-.0021,7e-4,.0011,8e-4,4e-4,-.001,.0012,2e-4,-6e-4,-.0027,-5e-4,.001,-9e-4,1e-4,-1e-4,8e-4,-.0011,.0022,-.001,-5e-4,-.0011,.0016,-.0015,8e-4,-3e-4,9e-4,.0013,-7e-4,-7e-4,-2e-4],expression:[-.0018,-.0168,.0088,.0389,.1026,.0414,.2201,-.0262,-.0016,-.0017,.0612,-.0298,-.0323,.0093,.0013,-.005,.2207,.1315,-4e-4,.0858,-.0303,-.0133,.015,-.008,.1454,.0114,.0177,-.0077,.1022,.0356,-.0023,.1088,.0232,.003,-.0706,.0347,-1e-4,.004,-.0011,.0397,-.0096,-.0033,.0029,-.01,-.0083,-6e-4,-.0135,.0016,-.0087,-.0019,.0022,-.004,-.0087,.0105,8e-4,-.005,.0069,.0028,.0409,-.0391,.003,.0103,.0051,.0026,.0776,-.0083,-.0062,-.0567,.0268,.0175,.0017,.0156,-.0043,.0299,-.0395,-.0015,.0051,-.0148,.0125,.0035,.0603,.0109,-.0645,-.0257,.002,6e-4,-8e-4]},6:{mean:[-6e-4,-.1542,.8789],identity:[-7e-4,-.0032,.01,0,-.0027,.0031,6e-4,5e-4,-6e-4,-3e-4,.0013,-.0049,-2e-4,-.002,-.0046,8e-4,-.0011,.0054,2e-4,.0043,-.0027,3e-4,-.0022,-.0019,8e-4,.0032,-.0069,0,4e-4,-.0071,.0016,.0027,.0039,-.0017,9e-4,.0031,-1e-4,-5e-4,-4e-4,7e-4,-.0026,-.0012,-5e-4,6e-4,2e-4,-.0014,-.0013,.0019,-2e-4,-.0053,.0031,-6e-4,.0016,.0023,-.0013,.0021,.0029,8e-4,.0052,0,4e-4,0,.0037,-.0026,3e-4,.002,-2e-4,-.0024,4e-4,-4e-4,-.0012,8e-4,7e-4,-.0023,5e-4,0,.0014,-.0022,-.0016,0,-.0012,8e-4,-7e-4,.0014,-6e-4,-.0012,-3e-4,2e-4,.0012,-3e-4,-.002,-1e-4,1e-4,-2e-4,-.0016,9e-4,.002,.0019,0,6e-4,-.0022,.0016,1e-4,-.0017,-.0013,.001,9e-4,-1e-4,.0011,3e-4,-7e-4,.0014,8e-4,.0013,.0011,-.002,0,-.0015,.0014,.001,-.0015,7e-4,3e-4,.001,-1e-4,.0012,7e-4,6e-4,-4e-4,-.0013,-.0012,-9e-4,-.0011,2e-4,-5e-4,5e-4,4e-4,2e-4,1e-4,0,5e-4,5e-4,-.0014,.0015,-9e-4,5e-4,.0014,-8e-4,-8e-4,.0012],expression:[8e-4,.0481,.1653,.0784,.1008,-.3992,.5088,-.02,.0542,.001,.3723,-.0151,-.0986,.0283,-.0033,-.0121,.2634,.1202,.0036,-.0529,-.0245,-.0297,-.1085,.0495,.3264,.0083,4e-4,-.0314,.1459,-.1142,-.003,1e-4,.1154,-.0035,-.0285,-.0184,-1e-4,.0012,.0035,.079,-.0103,.0043,.011,-.004,-.0774,-.0047,-.023,.0284,-.0048,-.001,.0149,-.0039,.0046,.0528,-6e-4,.0063,.0376,.0096,.0558,-.0295,0,-.0311,-.0634,.0062,.0176,-.0154,-.0109,-.1149,.0192,.0326,.0121,.0237,.0034,.0262,-.0778,.0014,-.0045,-.0203,.0077,.0588,.0575,.008,-.0557,-.0095,.0032,.0054,-.0042]},7:{mean:[.0038,-.2927,.833],identity:[6e-4,-.0109,.0073,-6e-4,-.0044,.0017,-1e-4,-.0022,-6e-4,-3e-4,.0065,-.0014,-6e-4,-.0051,-.0046,3e-4,-.0029,.003,2e-4,.0038,-6e-4,0,-.0012,6e-4,-4e-4,.0053,-.0075,-2e-4,-7e-4,-.0063,.0014,.0026,.0019,-.0022,.0018,.0028,-1e-4,-.0012,.0011,9e-4,.0019,-.0019,-1e-4,.0012,-.0022,-3e-4,-.0012,4e-4,-8e-4,3e-4,-3e-4,0,.0017,.0021,-4e-4,.0012,.0022,-3e-4,.0026,-3e-4,4e-4,-.0026,.0032,-.0019,3e-4,.0015,1e-4,-.0015,.0013,-1e-4,1e-4,-.0029,0,-2e-4,-.0028,-7e-4,.0019,-3e-4,-2e-4,.0012,9e-4,4e-4,-.001,-.002,-.0016,.0011,-1e-4,3e-4,.0021,2e-4,-.0014,-9e-4,-1e-4,0,-2e-4,-.001,.0015,.0018,1e-4,7e-4,8e-4,.0017,.001,-9e-4,1e-4,4e-4,.0023,-1e-4,.0012,1e-4,-8e-4,2e-4,.0018,6e-4,3e-4,1e-4,.0012,-3e-4,.002,-6e-4,0,-1e-4,-.0022,4e-4,5e-4,.0011,2e-4,-.0013,-.0023,6e-4,6e-4,-5e-4,-5e-4,9e-4,2e-4,2e-4,.0011,-3e-4,.0011,.0015,.0011,3e-4,2e-4,8e-4,-4e-4,-8e-4,3e-4,0,.0012,-1e-4],expression:[.026,.1107,.3257,.1917,.3206,-1.1348,1.0791,-.035,.1549,-.0103,.6953,1e-4,-.3262,.068,.0219,-.0044,.3643,.2178,.0168,-.2478,-.1321,-.0414,-.3782,-.0617,.5088,-.0031,-.0311,-.0497,.0948,-.385,.0148,-.2224,-.1415,-.0074,.0863,-.203,3e-4,-.0081,.0057,.1164,-.0039,.0015,-.0024,.0505,.1532,.0039,-.0148,-.0753,.0163,.0058,-.0339,.0036,.0252,-.0569,-.0041,.0163,-.0361,.0035,-.018,.1266,0,-.0163,-.0046,.0133,-.1656,.2134,.0191,.0057,.0734,.0681,.0039,-.0144,.029,-.074,-.046,.0122,.0072,-.0162,-.0349,-.1234,.0212,-.0355,.0535,.1218,.0043,-.024,.0016]},8:{mean:[-.0018,-.3037,.8491],identity:[2e-4,-.0112,.0077,-4e-4,-.0044,.0024,1e-4,-.0021,-4e-4,-4e-4,.0066,-.002,-4e-4,-.0052,-.0044,3e-4,-.0032,.0039,4e-4,.0042,-3e-4,2e-4,-.0012,-2e-4,-2e-4,.0052,-.0083,-1e-4,-8e-4,-.0056,.0017,.0024,.0019,-.0023,.002,.0027,-2e-4,-.0013,.002,9e-4,.0017,-.0028,-2e-4,.0012,-.0026,0,-.0016,2e-4,-5e-4,3e-4,-.001,-1e-4,.0016,.0016,-3e-4,.0012,.0012,-3e-4,.0027,-3e-4,3e-4,-.0026,.0037,-.0017,1e-4,.0016,1e-4,-.0015,.0024,1e-4,2e-4,-.0039,0,-3e-4,-.0033,-6e-4,.0017,-4e-4,-4e-4,.0012,.0018,2e-4,-.0012,-.002,-.0017,.0013,-.001,3e-4,.0021,4e-4,-.0012,-6e-4,-2e-4,0,-4e-4,-9e-4,.0016,.0017,4e-4,7e-4,7e-4,.001,9e-4,-8e-4,5e-4,5e-4,.0023,.001,.0013,2e-4,-4e-4,2e-4,.0017,8e-4,3e-4,-1e-4,9e-4,-4e-4,.0019,-5e-4,3e-4,0,-.0025,3e-4,3e-4,.0011,1e-4,-.0015,-.001,7e-4,7e-4,-7e-4,-7e-4,8e-4,0,1e-4,.0013,-4e-4,.0012,.0014,.0017,4e-4,2e-4,3e-4,-3e-4,-9e-4,1e-4,0,.001,-4e-4],expression:[-.0092,2.8809,1.416,.2018,1.1982,-.9351,1.4492,-.1902,.1749,.0305,-.167,-.1572,-.7354,-.0492,.0115,.0608,.2971,.1179,.0046,-.0997,-.0041,-.0104,.3379,-.1854,.009,.0366,-.0583,.0269,-.0029,-.4175,-8e-4,.1794,.0752,-.0135,.1158,.1234,5e-4,.003,-.0032,.1034,-.0504,-.0055,-.0076,-.0772,.224,.0047,.0229,-.1044,.0162,-.0161,-.0241,-.0083,-.1388,-.0434,-.0125,-.0997,-.0327,-.0111,.1576,-.3911,.0199,.2522,.142,.0059,-.0721,-.0045,.031,-.1136,-.1685,.0641,.0142,.0312,.0426,-.1366,.1011,.0101,-.0157,.0018,-.0103,-.0344,.0907,.0016,.1168,-.0806,.0104,-.0057,.0111]},9:[{mean:[.0038,-.2927,.833],identity:[6e-4,-.0109,.0073,-6e-4,-.0044,.0017,-1e-4,-.0022,-6e-4,-3e-4,.0065,-.0014,-6e-4,-.0051,-.0046,3e-4,-.0029,.003,2e-4,.0038,-6e-4,0,-.0012,6e-4,-4e-4,.0053,-.0075,-2e-4,-7e-4,-.0063,.0014,.0026,.0019,-.0022,.0018,.0028,-1e-4,-.0012,.0011,9e-4,.0019,-.0019,-1e-4,.0012,-.0022,-3e-4,-.0012,4e-4,-8e-4,3e-4,-3e-4,0,.0017,.0021,-4e-4,.0012,.0022,-3e-4,.0026,-3e-4,4e-4,-.0026,.0032,-.0019,3e-4,.0015,1e-4,-.0015,.0013,-1e-4,1e-4,-.0029,0,-2e-4,-.0028,-7e-4,.0019,-3e-4,-2e-4,.0012,9e-4,4e-4,-.001,-.002,-.0016,.0011,-1e-4,3e-4,.0021,2e-4,-.0014,-9e-4,-1e-4,0,-2e-4,-.001,.0015,.0018,1e-4,7e-4,8e-4,.0017,.001,-9e-4,1e-4,4e-4,.0023,-1e-4,.0012,1e-4,-8e-4,2e-4,.0018,6e-4,3e-4,1e-4,.0012,-3e-4,.002,-6e-4,0,-1e-4,-.0022,4e-4,5e-4,.0011,2e-4,-.0013,-.0023,6e-4,6e-4,-5e-4,-5e-4,9e-4,2e-4,2e-4,.0011,-3e-4,.0011,.0015,.0011,3e-4,2e-4,8e-4,-4e-4,-8e-4,3e-4,0,.0012,-1e-4],expression:[.026,.1107,.3257,.1917,.3206,-1.1348,1.0791,-.035,.1549,-.0103,.6953,1e-4,-.3262,.068,.0219,-.0044,.3643,.2178,.0168,-.2478,-.1321,-.0414,-.3782,-.0617,.5088,-.0031,-.0311,-.0497,.0948,-.385,.0148,-.2224,-.1415,-.0074,.0863,-.203,3e-4,-.0081,.0057,.1164,-.0039,.0015,-.0024,.0505,.1532,.0039,-.0148,-.0753,.0163,.0058,-.0339,.0036,.0252,-.0569,-.0041,.0163,-.0361,.0035,-.018,.1266,0,-.0163,-.0046,.0133,-.1656,.2134,.0191,.0057,.0734,.0681,.0039,-.0144,.029,-.074,-.046,.0122,.0072,-.0162,-.0349,-.1234,.0212,-.0355,.0535,.1218,.0043,-.024,.0016]},{mean:[-.0018,-.3037,.8491],identity:[2e-4,-.0112,.0077,-4e-4,-.0044,.0024,1e-4,-.0021,-4e-4,-4e-4,.0066,-.002,-4e-4,-.0052,-.0044,3e-4,-.0032,.0039,4e-4,.0042,-3e-4,2e-4,-.0012,-2e-4,-2e-4,.0052,-.0083,-1e-4,-8e-4,-.0056,.0017,.0024,.0019,-.0023,.002,.0027,-2e-4,-.0013,.002,9e-4,.0017,-.0028,-2e-4,.0012,-.0026,0,-.0016,2e-4,-5e-4,3e-4,-.001,-1e-4,.0016,.0016,-3e-4,.0012,.0012,-3e-4,.0027,-3e-4,3e-4,-.0026,.0037,-.0017,1e-4,.0016,1e-4,-.0015,.0024,1e-4,2e-4,-.0039,0,-3e-4,-.0033,-6e-4,.0017,-4e-4,-4e-4,.0012,.0018,2e-4,-.0012,-.002,-.0017,.0013,-.001,3e-4,.0021,4e-4,-.0012,-6e-4,-2e-4,0,-4e-4,-9e-4,.0016,.0017,4e-4,7e-4,7e-4,.001,9e-4,-8e-4,5e-4,5e-4,.0023,.001,.0013,2e-4,-4e-4,2e-4,.0017,8e-4,3e-4,-1e-4,9e-4,-4e-4,.0019,-5e-4,3e-4,0,-.0025,3e-4,3e-4,.0011,1e-4,-.0015,-.001,7e-4,7e-4,-7e-4,-7e-4,8e-4,0,1e-4,.0013,-4e-4,.0012,.0014,.0017,4e-4,2e-4,3e-4,-3e-4,-9e-4,1e-4,0,.001,-4e-4],expression:[-.0092,2.8809,1.416,.2018,1.1982,-.9351,1.4492,-.1902,.1749,.0305,-.167,-.1572,-.7354,-.0492,.0115,.0608,.2971,.1179,.0046,-.0997,-.0041,-.0104,.3379,-.1854,.009,.0366,-.0583,.0269,-.0029,-.4175,-8e-4,.1794,.0752,-.0135,.1158,.1234,5e-4,.003,-.0032,.1034,-.0504,-.0055,-.0076,-.0772,.224,.0047,.0229,-.1044,.0162,-.0161,-.0241,-.0083,-.1388,-.0434,-.0125,-.0997,-.0327,-.0111,.1576,-.3911,.0199,.2522,.142,.0059,-.0721,-.0045,.031,-.1136,-.1685,.0641,.0142,.0312,.0426,-.1366,.1011,.0101,-.0157,.0018,-.0103,-.0344,.0907,.0016,.1168,-.0806,.0104,-.0057,.0111]}],10:{mean:[-.007,-.6338,.7695],identity:[1e-4,-.0296,.0089,-6e-4,-.0073,-.0065,-1e-4,-.0029,-.0031,-2e-4,.0128,.0065,0,-.0116,-.014,-1e-4,-.0037,-.0052,-5e-4,.0028,.003,-4e-4,.0041,.0015,6e-4,.0088,-.0076,-.0011,-.0015,-.0073,7e-4,-.0011,.0019,-.0011,-5e-4,.0031,-1e-4,-.0018,9e-4,.0018,.0038,.0068,-4e-4,-1e-4,.0061,.0024,.0024,-.0066,-6e-4,.0051,.0014,.002,.005,-.0035,1e-4,-.0034,-.004,-7e-4,.001,-8e-4,1e-4,-5e-4,-.0021,2e-4,.0045,-.0043,-.0012,-.0024,-.0014,6e-4,.0034,.0027,-8e-4,-.0053,.0014,1e-4,.0013,-.0018,6e-4,-.0015,.0029,-2e-4,-.0035,1e-4,-.002,.0012,.0048,.0011,1e-4,-2e-4,-3e-4,-.0012,.0033,6e-4,.002,-.0033,4e-4,.0028,2e-4,8e-4,-1e-4,-.0018,8e-4,.0017,1e-4,9e-4,8e-4,3e-4,.0019,-.001,.001,-7e-4,-.0013,0,1e-4,.0032,-1e-4,1e-4,.0011,-4e-4,5e-4,-7e-4,.0018,-3e-4,2e-4,7e-4,8e-4,-.0014,7e-4,.0015,-6e-4,-1e-4,-4e-4,.0019,-9e-4,-6e-4,-6e-4,-.0012,2e-4,-.0012,-8e-4,4e-4,6e-4,-.0011,3e-4,9e-4,-4e-4,6e-4,-7e-4,-4e-4],expression:[-.0603,2.0527,1.9014,.1025,.6143,.3804,.7881,-.1023,-.0764,.0454,-.2487,-.5073,-.6704,-.031,-.0181,.0466,.0651,-.0726,-.0033,-.0022,.2944,.0101,.1669,-.5225,-.4685,.0236,.0079,.011,.2173,.4529,.0121,-.2104,-.0673,.0225,-.4023,.0317,-9e-4,.0076,-.0032,.0333,.0523,.0129,-.001,-.0319,-.0139,.0015,-.0044,.0247,-5e-4,.0161,.0061,.0074,.0776,-.0176,.007,.055,-.017,.0052,-.1819,.0294,-.0161,-.0337,.0226,-.008,-.0297,.1967,-.0095,.0383,.2039,.0434,.0271,-.0064,-.0037,-.0294,-.024,.0024,-.0137,-.0209,-.0031,.0628,.1003,-.0126,-.056,-.0097,-.0012,-.0041,.0162]},11:{mean:[.2505,.3833,.7793],identity:[.0098,.012,.0077,-6e-4,-3e-4,0,1e-4,.0082,-7e-4,.0019,-.0036,-.0012,2e-4,.0119,-.0039,.001,1e-4,.0031,-.0036,-.0059,-7e-4,.0026,.0028,-.0011,9e-4,-.0032,8e-4,.0029,.0043,3e-4,.0025,-9e-4,.0047,.0016,.0022,.0018,-.001,.0025,-.003,-.001,.0033,.0034,4e-4,-.0052,.0024,-2e-4,.001,-.0014,-6e-4,.0038,-.0015,-6e-4,-.001,-.0011,-4e-4,-.001,4e-4,-7e-4,.0036,-8e-4,-2e-4,-.0019,5e-4,3e-4,-6e-4,-.0024,-.0017,-.0014,6e-4,-4e-4,-.0031,-.0013,-6e-4,.0042,2e-4,-2e-4,-.002,-3e-4,8e-4,.0018,-5e-4,-6e-4,-2e-4,-6e-4,.0025,.0019,.001,8e-4,-.0015,-.0012,-1e-4,-6e-4,-4e-4,.0023,-.001,6e-4,-2e-4,-.001,0,-9e-4,-.002,-.0011,1e-4,0,-1e-4,5e-4,6e-4,9e-4,-6e-4,5e-4,8e-4,-1e-4,-2e-4,-.0017,-6e-4,-4e-4,4e-4,-6e-4,.0012,4e-4,3e-4,-7e-4,3e-4,-2e-4,6e-4,1e-4,5e-4,-.0019,-6e-4,4e-4,7e-4,-1e-4,1e-4,5e-4,.001,-6e-4,-.002,-7e-4,-5e-4,5e-4,3e-4,7e-4,.0014,0,5e-4,-5e-4,-2e-4,3e-4,-6e-4,-1e-4],expression:[-9e-4,-3e-4,.0032,-.003,-.0034,-.0031,.0014,0,4e-4,-.0139,-.0764,.0275,-.002,-.0089,.0031,-.0503,-.0771,.038,-.1323,-.3523,.1368,-.0474,-.0564,.0296,-.0045,.007,-.0013,.0153,.1259,-.0464,.0866,.2175,-.0786,-.0413,-.1248,.0448,-.1777,-.4607,.1782,-5e-4,-.005,.0016,.0629,.1506,-.0624,.0545,.2576,-.0864,-.0231,-.0552,.0244,-.0136,-.0359,.0169,-.1158,-.2996,.1214,-.0235,-.0354,.0165,-.0745,-.1079,.0475,-.0116,-.0039,.0012,.0013,-.0108,-8e-4,.0044,-.0027,-1e-4,-.0694,.0363,.0071,.1462,-.136,.0047,.009,-.0177,.0038,-.0271,.0118,.0011,-.0399,-.0111,.0123]},12:{mean:[-.2981,.3828,.7563],identity:[-.0116,.014,.0054,.0018,5e-4,0,-4e-4,.0068,-.0013,-.0019,-.0048,-5e-4,5e-4,.0108,-.0036,-.0029,-.0018,.0029,.0043,-.0077,6e-4,-.0017,.002,-.0011,-.0014,-.0035,.0015,-.0024,.0011,4e-4,-.0048,2e-4,.0029,-1e-4,-1e-4,.003,.0019,.0035,-.0016,-4e-4,.0039,.0019,1e-4,-.0064,.004,3e-4,.002,-.0021,.0017,.0011,-.001,.0026,.0025,-5e-4,2e-4,-3e-4,-5e-4,-7e-4,9e-4,-4e-4,-.001,-.0022,.001,9e-4,-.0014,7e-4,.0011,-.001,-5e-4,-8e-4,-.0017,-.0021,9e-4,.0036,5e-4,4e-4,-.0031,6e-4,-.0015,.0027,2e-4,1e-4,-.0011,2e-4,-.0011,-.0018,4e-4,-.0013,-2e-4,7e-4,9e-4,-3e-4,.001,-.0021,8e-4,6e-4,-9e-4,4e-4,-7e-4,8e-4,-.002,-.0013,0,7e-4,-.0012,-1e-4,.0014,.0014,-1e-4,.0013,6e-4,6e-4,-.0014,-.0015,-9e-4,1e-4,1e-4,9e-4,7e-4,0,1e-4,-.001,-4e-4,0,-5e-4,1e-4,-3e-4,4e-4,-5e-4,-1e-4,-.0011,2e-4,0,1e-4,8e-4,8e-4,0,-7e-4,-8e-4,0,2e-4,-1e-4,.001,3e-4,4e-4,-2e-4,0,5e-4,.0018,-1e-4],expression:[0,-4e-4,.0028,.0036,-8e-4,-.0026,-.0015,-8e-4,3e-4,.0075,-.0608,.025,.0019,-.0076,.0033,.0379,-.0437,.0335,.0964,-.2452,.1233,.0368,-.0251,.0253,.0033,.0097,-.0021,-.0095,.1171,-.0475,-.064,.1548,-.0718,.0228,-.0831,.0343,-.1924,.6206,-.2771,.0021,-.0143,.0056,-.0705,.2522,-.1116,-.0692,.4229,-.1592,-.0093,.05,-.0185,.0948,-.3196,.1437,-.0184,.0194,-.0131,.0205,-.0353,.0201,.0676,-.135,.0672,.0137,-.0311,.0118,3e-4,-.0077,-2e-4,-.0151,4e-4,-.0058,.029,-.0139,.0163,.1324,.1819,-.0039,.0406,.0501,.0017,.0331,.0161,.0062,-.0235,-.0446,.0047]}};let Jq=1,Nb=new Map;function Kq(t){let e=Jq++;return Nb.set(e,new $q(t)),To("face_landmark_t initialized"),e}function Zq(t){Nb.delete(t)}function zR(t){return Nb.get(t)}class $q{constructor(e){this._name=e,this.anchor_pose=ln()}_getVertex(e,n,i){let r=i.mean.slice();for(let s=0;s<50;s++)r[0]+=e[s]*i.identity[s*3+0],r[1]+=e[s]*i.identity[s*3+1],r[2]+=e[s]*i.identity[s*3+2];for(let s=0;s<29;s++)r[0]+=n[s]*i.expression[s*3+0],r[1]+=n[s]*i.expression[s*3+1],r[2]+=n[s]*i.expression[s*3+2];return r}update(e,n,i){let r,s=qq[this._name.toString()];if(!!s){if(Array.isArray(s)){r=this._getVertex(e,n,s[0]);let o=this._getVertex(e,n,s[1]);r[0]=.5*(r[0]+o[0]),r[1]=.5*(r[1]+o[1]),r[2]=.5*(r[2]+o[2])}else r=this._getVertex(e,n,s);i&&(r[0]*=-1),x_(this.anchor_pose,r)}}}function eJ(){let t=document.createElement("div"),e="a recent web browser";navigator.userAgent.match(/Android/i)?(e="Chrome for Android",window.location.href="googlechrome://navigate?url="+encodeURI(window.location.href),setTimeout(()=>{window.location.href="samsunginternet://open?url="+encodeURI(window.location.href)},2e3)):navigator.userAgent.match(/iPhone|iPod|iPad/i)&&(e="Safari",t.classList.add("zee-launcher-browser-safari")),t.classList.add("zee-launcher-unsupported"),t.innerHTML=`
            <style>.zee-launcher-unsupported {
               display: flex;
               flex-direction: column;
               height: 100%;
               justify-content: center;
               position: absolute;
               width: 100%;
               height: 100%;
               top: 0;
               left: 0;
               align-items: center;
               }
               .zee-launcher-browser-logo {
               background-image: url("data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg version='1.1' viewBox='0 0 210 211' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg transform='translate(-82 -146)' fill-rule='nonzero' stroke='%23ffffff' stroke-width='2'%3E%3Cg transform='translate(83 146.5)'%3E%3Cpath d='m55.146 88.785l-32.039-49.472c19.962-24.947 49.904-38.684 80.517-38.81 17.739-0.12642 35.855 4.4246 52.336 13.99 18.2 10.619 32.039 25.874 40.846 43.404l-86.095-4.5511c-24.365-1.4327-47.556 12.347-55.565 35.439zm13.797 16.224c0 19.468 15.684 35.229 35.059 35.229 19.374 0 35.059-15.76 35.059-35.229 0-19.468-15.684-35.229-35.059-35.229-19.374 0-35.059 15.718-35.059 35.229zm132.06-37.588l-58.585 3.034c15.894 18.668 16.145 45.595 2.7678 66.243l-47.01 72.648c19.5 1.0535 39.588-3.2447 57.788-13.864 45.039-26.126 63.282-80.908 45.039-128.06zm-144.93 57.647l-39.126-77.326c-10.694 16.434-16.942 36.156-16.942 57.267 0 52.253 38.078 95.53 87.856 103.2l26.713-52.59c-24.155 4.5511-47.472-8.765-58.501-30.551z'/%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E%0A");
               width: 211px;
               height: 211px;
               margin-bottom: 25%;
               margin-top: -60px;
               background-repeat: no-repeat;
               }
               .zee-launcher-browser-safari .zee-launcher-browser-logo {
               background-image: url("data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg version='1.1' viewBox='0 0 211 211' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg transform='translate(-82 -146)' fill-rule='nonzero' stroke='%23ffffff' stroke-width='2'%3E%3Cpath d='m180 251.86c0-4.0385 2.9377-7.855 7.2552-7.855 3.9614 0 7.7448 2.8402 7.7448 7.145 0 4.0385-2.8487 7.855-7.1662 7.855-4.0059 0-7.8338-2.9734-7.8338-7.145zm112-0.35503c0 57.728-46.772 104.5-104.5 104.5s-104.5-46.772-104.5-104.5 46.772-104.5 104.5-104.5 104.5 46.772 104.5 104.5zm-12-1c0-51.649-41.851-93.5-93.5-93.5s-93.5 41.851-93.5 93.5 41.851 93.5 93.5 93.5 93.5-41.851 93.5-93.5zm-30.624 40.983c0 1.5095 5.4495 4.2768 6.8328 5.1154-11.486 17.401-29.26 29.938-49.423 34.928l-1.8444-7.757c-0.12576-1.0482-0.79646-1.174-1.7606-1.174-0.79646 0-1.2576 1.174-1.1737 1.7611l1.8444 7.8828c-5.5753 1.174-11.234 1.7611-16.935 1.7611-15.217 0-30.182-4.2768-43.177-12.202 0.71263-1.174 5.1141-7.5474 5.1141-8.4698 0-0.79666-0.71263-1.5095-1.5091-1.5095-1.6348 0-5.1141 6.9603-6.1621 8.344-17.522-11.615-30.182-29.602-35.044-50.148l8.0066-1.761c0.92222-0.25158 1.1737-0.92246 1.1737-1.7611 0-0.79667-1.1737-1.2579-1.8444-1.174l-7.8389 1.803c-1.048-5.3251-1.6348-10.692-1.6348-16.143 0-15.556 4.4015-30.86 12.66-43.984 1.1737 0.71281 6.749 4.5284 7.6712 4.5284 0.79646 0 1.5091-0.58702 1.5091-1.3837 0-1.6353-6.1621-4.7381-7.5455-5.7024 11.821-17.275 29.805-29.728 50.219-34.34l1.7606 7.757c0.25152 0.92246 0.92222 1.174 1.7606 1.174 0.83838 0 1.2576-1.174 1.1737-1.8449l-1.7606-7.6732c5.1141-0.92246 10.312-1.5095 15.552-1.5095 15.552 0 30.727 4.4026 43.973 12.663-0.79646 1.174-4.5273 6.6249-4.5273 7.5474 0 0.79667 0.58687 1.5095 1.3833 1.5095 1.6348 0 4.7369-6.0379 5.5753-7.4216 17.187 11.615 29.469 29.351 34.248 49.561l-6.4975 1.3837c-1.048 0.25158-1.1737 0.92246-1.1737 1.8449 0 0.79667 1.1737 1.2579 1.7606 1.174l6.6232-1.5095c1.048 5.3251 1.6348 10.776 1.6348 16.227 0 15.221-4.1919 30.189-12.073 43.062-1.1737-0.58702-6.0364-4.0672-6.9586-4.0672-0.8803 0-1.5929 0.71281-1.5929 1.5095zm-14.876-98.483c-5.2178 4.88-53.863 49.48-55.228 51.8l-38.772 64.2c5.0974-4.76 53.863-49.6 55.108-51.72l38.892-64.28z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
               }
               .zee-launcher-unsupported-message {
               text-align: center;
               width: 250px;
               font-family: sans-serif;
               color: #ffffff;
               }
               .zee-launcher-unsupported-message-copy {
               border: 1px solid #ffffff;
               border-radius: 5px;
               margin-top: 10px;
               }
               #zee-launcher-unsupported-message-input {
               border: none;
               padding: 10px;
               border-radius: 0px;
               border-right: 1px solid #344B60;
               height: 40px;
               color: #ffffff;
               background-color: black;
               box-sizing: border-box;
               width: calc(100% - 65px);
               margin-left: 5px;
               }
               #zee-launcher-unsupported-message-button {
               background: none;
               border: none;
               outline: none;
               text-transform: uppercase;
               color: #ffffff;
               height: 40px;
               display: inline-block;
               width: 59px;
               }
               .zee-launcher-unsupported-message-before-copy {
               height: 100px;
               display: flex;
               flex-direction: column;
               justify-content: center;
               margin-top: 20px;
               }
               .zee-launcher-unsupported-message-copied .zee-launcher-unsupported-message-before-copy {
               display: none;
               }
               .zee-launcher-unsupported-message-after-copy {
               display: none;
               }
               .zee-launcher-unsupported-message-copied .zee-launcher-unsupported-message-after-copy {
               height: 100px;
               display: flex;
               flex-direction: column;
               justify-content: center;
               margin-top: 20px;
               }
            </style>
            <div class="zee-launcher-browser-logo"></div>
            <div class="zee-launcher-unsupported-message">Open with ${e} to access this content.</div>
            <div class="zee-launcher-unsupported-message-before-copy">
               <div class="zee-launcher-unsupported-message ">Tap below to copy the address for easy pasting into ${e}.</div>
               <div class="zee-launcher-unsupported-message-copy"><input id="zee-launcher-unsupported-message-input" type="text/"><button id="zee-launcher-unsupported-message-button">Copy</button></div>
            </div>
            <div class="zee-launcher-unsupported-message zee-launcher-unsupported-message-after-copy">COPIED! Now paste into ${e}'s address bar to experience the content.</div>
    `;let n=t.querySelector("#zee-launcher-unsupported-message-input")||document.createElement("input");n.value=window.location.href;let i=t.querySelector("#zee-launcher-unsupported-message-button")||document.createElement("button"),r=()=>{if(navigator.userAgent.match(/iPhone|iPod|iPad/i)){let s=document.createRange();s.selectNodeContents(n);let o=window.getSelection();if(!o)return;o.removeAllRanges(),o.addRange(s),n.setSelectionRange(0,999999999)}else n.select();document.execCommand("copy"),n.blur(),t.classList.toggle("zee-launcher-unsupported-message-copied",!0)};return i.addEventListener("click",r),n.addEventListener("click",r),t}const tJ=()=>{const t=document.createElement("div");t.append(eJ()),Object.assign(t.style,{position:"fixed",width:"100%",height:"100%",top:"0px",left:"0px",zIndex:1001,backgroundColor:"rgba(0, 0, 0, 0.9)",fontFamily:"sans-serif",color:"white",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}),t.classList.add("zee_launcher_compatibility"),document.body.append(t)};function nJ(){return!(typeof Promise!="function"||typeof WebAssembly!="object"||!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices||!navigator.mediaDevices.getUserMedia)}const QR={incompatible:()=>!nJ(),incompatible_ui:tJ};let iJ=1,rE=new Map;class ka extends Ay{constructor(e,n){super(),this._impl=e,this._pipeline=n,this._packetNumber=0,this._motionUpdatesQueued=0,this._motionUpdatesSent=0,this._minFrameGapMs=0,this._lastUpdateTime=0}static create(e){let n=iJ++;return rE.set(n,new ka(n,e)),To("sequence_source_source_t initialized"),n}static get(e){return rE.get(e)}loadFromMemory(e){try{this._decoder=new kq(e),this._packetNumber=0,this._lastUpdateTime=0}catch(n){b_("Unable to decode sequence:",n)}}maxPlaybackFpsSet(e){if(e<=0){this._minFrameGapMs=0;return}this._minFrameGapMs=1e3/e}setTime(e){e<0?delete this._time:this._time=e}getFrame(e){var n;let i=yt.get(this._pipeline);if(!i||!this._decoder||(this._submitMotionUpdates(i),this._motionUpdatesQueued>this._motionUpdatesSent)||e)return;let r=(n=this._time)!==null&&n!==void 0?n:performance.now();if(r<this._lastUpdateTime+this._minFrameGapMs||this._packetNumber>=this._decoder.numberPackets)return;let s=this._decoder.dataByPacket.get(this._packetNumber);if(s.type!=kn.CAMERA_FRAME)return;this._packetNumber++;let o=i.cameraPixelArrays.pop();for(;o&&o.byteLength!==s.greyscale.byteLength;)o=i.cameraPixelArrays.pop();o||(o=new ArrayBuffer(s.greyscale.byteLength)),new Uint8Array(o).set(s.greyscale),this._lastUpdateTime=r;let a={data:o,cameraSourceData:s.greyscale,cameraModel:s.cameraModel,cameraToDevice:s.cameraToDevice,dataWidth:s.width,dataHeight:s.height,texture:void 0,userFacing:s.userFacing,uvTransform:ln(),cameraSource:this};this._submitMotionUpdates(i);const l=i.registerToken(a);i.sendDataToWorker(a.data||new ArrayBuffer(0),l,a.dataWidth,a.dataHeight,a.userFacing,a.cameraToDevice,a.cameraModel)}destroy(){rE.delete(this._impl),this.pause()}start(){var e;let n=yt.get(this._pipeline);n&&n.currentCameraSource!==this&&((e=n.currentCameraSource)===null||e===void 0||e.pause(),n.currentCameraSource=this)}pause(){let e=yt.get(this._pipeline);e&&e.currentCameraSource===this&&(e.currentCameraSource=void 0)}uploadGL(e){let n=yt.get(this._pipeline);if(!n)return;let i=n==null?void 0:n.glContext;!i||(e.texture||(e.texture=n.getVideoTexture()),e.texture&&(!e.cameraSourceData||(i.bindTexture(i.TEXTURE_2D,e.texture),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!1),i.texImage2D(i.TEXTURE_2D,0,i.LUMINANCE,e.dataWidth,e.dataHeight,0,i.LUMINANCE,i.UNSIGNED_BYTE,new Uint8Array(e.cameraSourceData)),i.bindTexture(i.TEXTURE_2D,null))))}_submitMotionUpdates(e){let n=!1;for(;this._packetNumber<this._decoder.numberPackets;){let i=this._decoder.dataByPacket.get(this._packetNumber);if(i.type==kn.CAMERA_FRAME)break;switch(i.type){case kn.ACCELEROMETER:e.motionAccelerometerSubmit(i.t,i.x,i.y,i.z),n=!0;break;case kn.ROTATION_RATE:e.motionRotationRateSubmit(i.t,i.x,i.y,i.z),n=!0;break;case kn.ATTITUDE:e.motionAttitudeSubmit(i.t,i.x,i.y,i.z),n=!0;break;case kn.ATTITUDE_MATRIX:e.motionAttitudeMatrix(i.attitude),n=!0;break}this._packetNumber++}n&&(this._motionUpdatesQueued++,setTimeout(()=>{this._motionUpdatesSent++},0))}}const rJ='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="250" height="80.408" viewBox="0 0 250 80.408"><defs><filter id="a" x="0" y="1.182" width="250" height="79.226" filterUnits="userSpaceOnUse"><feOffset dy="3" input="SourceAlpha"/><feGaussianBlur stdDeviation="3" result="b"/><feFlood flood-opacity="0.161"/><feComposite operator="in" in2="b"/><feComposite in="SourceGraphic"/></filter><filter id="c" x="6.929" y="0" width="111.975" height="40.988" filterUnits="userSpaceOnUse"><feOffset dy="3" input="SourceAlpha"/><feGaussianBlur stdDeviation="3" result="d"/><feFlood flood-opacity="0.161"/><feComposite operator="in" in2="d"/><feComposite in="SourceGraphic"/></filter></defs><g transform="translate(-26.873 -414.029)"><g transform="translate(44 423.332)"><g transform="translate(0 0.635)" style="isolation:isolate"><g transform="translate(0 0)"><g transform="matrix(1, 0, 0, 1, -17.13, -9.94)" filter="url(#a)"><path d="M55.766,44.97V11.8h8.272v2.6h.089a8.258,8.258,0,0,1,7.046-3.357,11.4,11.4,0,0,1,8.5,3.686,12.667,12.667,0,0,1,3.278,8.622,12.509,12.509,0,0,1-3.25,8.57,11.353,11.353,0,0,1-8.429,3.6,9.533,9.533,0,0,1-7.229-2.95V43.378l-8.269,1.594h0Zm8-21.671a4.958,4.958,0,0,0,5.319,5.15A4.957,4.957,0,0,0,74.4,23.3a5.321,5.321,0,0,0-10.638,0ZM16.105,18.412H2.752V11.038H30.9L14.887,37.16H38.22L0,44.534ZM131.469,38.45a.761.761,0,0,1-.484-.166.582.582,0,0,1-.228-.419l-.553-3.586a12.243,12.243,0,0,1-1.782-.721l-2.789,2.084a.718.718,0,0,1-.5.176.688.688,0,0,1-.495-.214,25.864,25.864,0,0,1-3.264-3.274.754.754,0,0,1,.018-.9c.2-.277.543-.713,1.01-1.3.483-.6.832-1.05,1.068-1.374a9.614,9.614,0,0,1-.811-1.929l-3.62-.527a.631.631,0,0,1-.416-.243.728.728,0,0,1-.159-.458V21.283a.743.743,0,0,1,.159-.448.6.6,0,0,1,.376-.253l3.68-.546a9.511,9.511,0,0,1,.772-1.792c-.523-.733-1.235-1.638-2.117-2.69a.731.731,0,0,1-.2-.467.82.82,0,0,1,.178-.449,19.577,19.577,0,0,1,1.949-2.095c.953-.924,1.582-1.393,1.87-1.393a.861.861,0,0,1,.515.195l2.729,2.084a11.551,11.551,0,0,1,1.8-.741,31.446,31.446,0,0,1,.573-3.623.666.666,0,0,1,.712-.546h4.392a.757.757,0,0,1,.485.166.58.58,0,0,1,.228.419l.553,3.584a12.576,12.576,0,0,1,1.782.722l2.809-2.085a.641.641,0,0,1,.475-.176.776.776,0,0,1,.5.195,27.035,27.035,0,0,1,3.264,3.313.625.625,0,0,1,.139.429.742.742,0,0,1-.159.447c-.2.271-.525.7-1.008,1.3-.467.581-.827,1.043-1.069,1.373a11.8,11.8,0,0,1,.812,1.91l3.62.545a.626.626,0,0,1,.416.244.736.736,0,0,1,.158.457v4.325a.755.755,0,0,1-.158.449.6.6,0,0,1-.4.253l-3.66.545a12.692,12.692,0,0,1-.772,1.774c.465.653,1.177,1.559,2.117,2.688a.751.751,0,0,1,.2.488.648.648,0,0,1-.178.448,19.638,19.638,0,0,1-1.958,2.1c-.947.918-1.573,1.384-1.861,1.384a.976.976,0,0,1-.515-.176l-2.731-2.1a11.361,11.361,0,0,1-1.8.741,31.849,31.849,0,0,1-.573,3.625.668.668,0,0,1-.713.546Zm-1.385-18.491a4.935,4.935,0,0,0,0,7.053,5.12,5.12,0,0,0,7.163,0,4.931,4.931,0,0,0,0-7.053,5.117,5.117,0,0,0-7.163,0Zm69.969,14.868a18.523,18.523,0,0,1-4.932-2.073l1.705-6.1A13.441,13.441,0,0,0,200.779,29a12.14,12.14,0,0,0,4.344.818,4.644,4.644,0,0,0,2.351-.482,1.538,1.538,0,0,0,.806-1.4q0-1.5-3.25-2.242-1.061-.246-1.705-.425a12.335,12.335,0,0,1-5.358-2.589,5.5,5.5,0,0,1-1.671-4.157,6.323,6.323,0,0,1,2.547-5.267,10.993,10.993,0,0,1,6.9-1.972,21.351,21.351,0,0,1,4.552.5,25.439,25.439,0,0,1,4.736,1.557l-1.705,5.491a14.244,14.244,0,0,0-3.319-1.636,10.6,10.6,0,0,0-3.364-.561,4.227,4.227,0,0,0-2.121.426,1.357,1.357,0,0,0-.714,1.232q0,1.211,3.227,2.04.737.2,1.106.291,4.264,1.187,5.935,2.79a5.728,5.728,0,0,1,1.67,4.337A6.781,6.781,0,0,1,213,33.37a11.48,11.48,0,0,1-7.259,2.14A22.577,22.577,0,0,1,200.053,34.827ZM30.568,31.834a12.566,12.566,0,0,1-3.292-8.59,12.567,12.567,0,0,1,3.247-8.568,11.3,11.3,0,0,1,8.423-3.638,9.519,9.519,0,0,1,7.217,3V11.8h8.264V34.735H46.163V32.186h-.09c-1.32,2.071-3.951,3.308-7.038,3.308A11.412,11.412,0,0,1,30.568,31.834Zm5.245-8.545a4.95,4.95,0,0,0,5.312,5.141,4.95,4.95,0,0,0,5.312-5.141A5.023,5.023,0,0,0,41.125,18.1,5.023,5.023,0,0,0,35.813,23.289Zm69.2,11.554-3.527-10.452q-.282-.892-.505-1.8t-.412-1.8a30.821,30.821,0,0,1-.917,3.454l-.047.16L96.1,34.842H90.176l-9.925-23.1h8.632l3.552,10.223q.4,1.12.634,1.955t.377,1.635a23.558,23.558,0,0,1,.917-3.179q.093-.274.141-.411l3.528-10.223h5.056l3.5,10.2.07.183a20.724,20.724,0,0,1,.988,3.43q.141-.732.364-1.532t.647-2.058l3.574-10.223h8.678l-9.971,23.1Zm80.154-.092-8.587-9.841v9.841h-7.888V1.5L176.583,0V22.28l8.272-9.665h9.96L184.584,23.266l11.156,11.485Zm-35.09,0V11.782h8.272v3.761h.091a8.131,8.131,0,0,1,7.546-4.074h1.593V19.3a6.8,6.8,0,0,0-3.5-.761c-4.593,0-5.728,3-5.728,6.941v9.268Z" transform="translate(17.13 15.31)"/></g><g transform="matrix(1, 0, 0, 1, -17.13, -9.94)" filter="url(#c)"><path d="M3.576-12.852v-4.3H6.628a2.867,2.867,0,0,1,1.945.55A2.034,2.034,0,0,1,9.188-15a2.06,2.06,0,0,1-.615,1.608,2.784,2.784,0,0,1-1.945.542ZM2.017-18.464V-6.748H3.576v-4.792H7.153a3.569,3.569,0,0,0,2.683-.9A3.478,3.478,0,0,0,10.747-15a3.45,3.45,0,0,0-.911-2.552,3.638,3.638,0,0,0-2.683-.911Zm11.421,7.483a4.221,4.221,0,0,1,.205-1.37,2.957,2.957,0,0,1,.566-1.009,2.411,2.411,0,0,1,.845-.624A2.515,2.515,0,0,1,16.08-14.2a2.515,2.515,0,0,1,1.026.213,2.411,2.411,0,0,1,.845.624,2.957,2.957,0,0,1,.566,1.009,4.221,4.221,0,0,1,.205,1.37,4.221,4.221,0,0,1-.205,1.37,2.867,2.867,0,0,1-.566,1,2.457,2.457,0,0,1-.845.615,2.515,2.515,0,0,1-1.026.213,2.515,2.515,0,0,1-1.026-.213,2.457,2.457,0,0,1-.845-.615,2.867,2.867,0,0,1-.566-1A4.221,4.221,0,0,1,13.438-10.981Zm-1.477,0a5.573,5.573,0,0,0,.263,1.739,3.97,3.97,0,0,0,.788,1.4,3.623,3.623,0,0,0,1.3.935,4.4,4.4,0,0,0,1.772.336A4.381,4.381,0,0,0,17.86-6.9a3.641,3.641,0,0,0,1.288-.935,3.97,3.97,0,0,0,.788-1.4,5.573,5.573,0,0,0,.263-1.739,5.65,5.65,0,0,0-.263-1.748,3.96,3.96,0,0,0-.788-1.411,3.729,3.729,0,0,0-1.288-.944,4.29,4.29,0,0,0-1.78-.345,4.3,4.3,0,0,0-1.772.345,3.71,3.71,0,0,0-1.3.944,3.96,3.96,0,0,0-.788,1.411A5.65,5.65,0,0,0,11.961-10.981Zm18.28,4.234,2.708-8.484H31.5L29.6-8.29h-.033L27.8-15.231H26.27L24.564-8.29h-.033l-1.92-6.941H21.068l2.724,8.484H25.3l1.707-6.744h.033l1.723,6.744ZM40.169-11.8H35.3a2.905,2.905,0,0,1,.213-.927A2.473,2.473,0,0,1,36-13.492a2.255,2.255,0,0,1,.747-.517,2.429,2.429,0,0,1,.976-.189,2.386,2.386,0,0,1,.96.189,2.415,2.415,0,0,1,.755.509,2.391,2.391,0,0,1,.509.763A2.854,2.854,0,0,1,40.169-11.8Zm1.346,2.363H40.136a1.983,1.983,0,0,1-.747,1.247,2.414,2.414,0,0,1-1.452.41,2.889,2.889,0,0,1-1.2-.23,2.348,2.348,0,0,1-.837-.615,2.4,2.4,0,0,1-.476-.886,3.367,3.367,0,0,1-.131-1.058h6.35a6.754,6.754,0,0,0-.139-1.625,4.7,4.7,0,0,0-.624-1.575,3.716,3.716,0,0,0-1.2-1.19,3.48,3.48,0,0,0-1.879-.468,3.858,3.858,0,0,0-1.6.328,3.76,3.76,0,0,0-1.264.919,4.236,4.236,0,0,0-.829,1.395,5.105,5.105,0,0,0-.3,1.772,6.8,6.8,0,0,0,.287,1.789,3.9,3.9,0,0,0,.763,1.411,3.478,3.478,0,0,0,1.255.919,4.358,4.358,0,0,0,1.764.328,3.851,3.851,0,0,0,2.4-.722A3.39,3.39,0,0,0,41.515-9.439Zm1.526-5.793v8.484h1.395v-3.774a5.8,5.8,0,0,1,.164-1.452,2.784,2.784,0,0,1,.525-1.075,2.251,2.251,0,0,1,.952-.673,3.945,3.945,0,0,1,1.428-.23v-1.477a3.135,3.135,0,0,0-1.871.459,3.779,3.779,0,0,0-1.247,1.526h-.033v-1.789ZM54.15-11.8H49.276a2.905,2.905,0,0,1,.213-.927,2.473,2.473,0,0,1,.492-.763,2.255,2.255,0,0,1,.747-.517A2.429,2.429,0,0,1,51.7-14.2a2.386,2.386,0,0,1,.96.189,2.415,2.415,0,0,1,.755.509,2.391,2.391,0,0,1,.509.763A2.854,2.854,0,0,1,54.15-11.8ZM55.5-9.439H54.117a1.983,1.983,0,0,1-.747,1.247,2.414,2.414,0,0,1-1.452.41,2.889,2.889,0,0,1-1.2-.23,2.348,2.348,0,0,1-.837-.615,2.4,2.4,0,0,1-.476-.886,3.367,3.367,0,0,1-.131-1.058h6.35a6.754,6.754,0,0,0-.139-1.625,4.7,4.7,0,0,0-.624-1.575,3.716,3.716,0,0,0-1.2-1.19,3.48,3.48,0,0,0-1.879-.468,3.858,3.858,0,0,0-1.6.328,3.76,3.76,0,0,0-1.264.919,4.236,4.236,0,0,0-.829,1.395,5.1,5.1,0,0,0-.3,1.772,6.8,6.8,0,0,0,.287,1.789,3.9,3.9,0,0,0,.763,1.411,3.478,3.478,0,0,0,1.255.919,4.358,4.358,0,0,0,1.764.328,3.851,3.851,0,0,0,2.4-.722A3.39,3.39,0,0,0,55.5-9.439Zm2.593-1.477a5.581,5.581,0,0,1,.131-1.214,3.212,3.212,0,0,1,.427-1.05,2.221,2.221,0,0,1,.788-.738,2.4,2.4,0,0,1,1.2-.279,2.589,2.589,0,0,1,1.231.271,2.389,2.389,0,0,1,.829.714,2.985,2.985,0,0,1,.468,1.026,4.889,4.889,0,0,1,.148,1.206,4.919,4.919,0,0,1-.139,1.165,3.053,3.053,0,0,1-.451,1.026,2.4,2.4,0,0,1-.8.73,2.4,2.4,0,0,1-1.2.279,2.491,2.491,0,0,1-1.173-.263,2.332,2.332,0,0,1-.82-.706,3.122,3.122,0,0,1-.476-1.009A4.338,4.338,0,0,1,58.088-10.916Zm6.564,4.168V-18.464H63.257V-14.1h-.033a2.247,2.247,0,0,0-.566-.632,3.216,3.216,0,0,0-.714-.41,3.583,3.583,0,0,0-.755-.222,4.132,4.132,0,0,0-.706-.066,3.861,3.861,0,0,0-1.7.353,3.487,3.487,0,0,0-1.214.952,4.018,4.018,0,0,0-.722,1.4,5.985,5.985,0,0,0-.238,1.707,5.8,5.8,0,0,0,.246,1.707,4.218,4.218,0,0,0,.73,1.411,3.529,3.529,0,0,0,1.214.968,3.827,3.827,0,0,0,1.715.361,4.135,4.135,0,0,0,1.625-.312A2.053,2.053,0,0,0,63.224-7.9h.033v1.149Zm6.761-11.716V-6.748h1.395V-7.88h.033a2.247,2.247,0,0,0,.566.632,2.982,2.982,0,0,0,.714.4,3.874,3.874,0,0,0,.763.213,4.193,4.193,0,0,0,.7.066,3.94,3.94,0,0,0,1.7-.345,3.4,3.4,0,0,0,1.214-.944,4.018,4.018,0,0,0,.722-1.4,5.985,5.985,0,0,0,.238-1.707,5.8,5.8,0,0,0-.246-1.707,4.312,4.312,0,0,0-.73-1.419,3.488,3.488,0,0,0-1.214-.976,3.827,3.827,0,0,0-1.715-.361,4.043,4.043,0,0,0-1.625.32,2.088,2.088,0,0,0-1.083,1.026h-.033v-4.381Zm6.564,7.4a5.581,5.581,0,0,1-.131,1.214,3.212,3.212,0,0,1-.427,1.05,2.243,2.243,0,0,1-.779.738,2.385,2.385,0,0,1-1.206.279A2.589,2.589,0,0,1,74.2-8.052a2.389,2.389,0,0,1-.829-.714,2.985,2.985,0,0,1-.468-1.026A4.889,4.889,0,0,1,72.758-11a4.919,4.919,0,0,1,.139-1.165,3.053,3.053,0,0,1,.451-1.026,2.4,2.4,0,0,1,.8-.73,2.4,2.4,0,0,1,1.2-.279,2.491,2.491,0,0,1,1.173.263,2.332,2.332,0,0,1,.82.706,3.122,3.122,0,0,1,.476,1.009A4.338,4.338,0,0,1,77.976-11.063Zm6.449,5.448a8.871,8.871,0,0,1-.484,1.05,2.871,2.871,0,0,1-.525.7,1.782,1.782,0,0,1-.64.394,2.462,2.462,0,0,1-.812.123,3.721,3.721,0,0,1-.492-.033A2.324,2.324,0,0,1,81-3.5v-1.28a2.342,2.342,0,0,0,.418.139,1.765,1.765,0,0,0,.4.057,1.2,1.2,0,0,0,.714-.205,1.255,1.255,0,0,0,.435-.583L83.539-6.8l-3.364-8.434h1.575L84.228-8.29h.033l2.379-6.941h1.477Z" transform="translate(17.85 28.4)"/></g></g></g><g transform="translate(0 0)"><g transform="translate(0 5.371)"><path d="M11.76,24.456A11.41,11.41,0,0,1,3.292,20.8,12.564,12.564,0,0,1,0,12.206,12.569,12.569,0,0,1,3.246,3.638,11.307,11.307,0,0,1,11.67,0a9.519,9.519,0,0,1,7.217,3V.759h8.264V23.7H18.887V21.148H18.8C17.478,23.219,14.846,24.456,11.76,24.456ZM13.849,7.064A5.023,5.023,0,0,0,8.537,12.25a4.95,4.95,0,0,0,5.312,5.141A4.95,4.95,0,0,0,19.16,12.25,5.023,5.023,0,0,0,13.849,7.064Z" transform="translate(27.277 11.038)" fill="#fff"/><path d="M0,33.931V.758H8.271v2.6H8.36A8.258,8.258,0,0,1,15.406,0,11.4,11.4,0,0,1,23.9,3.686a12.665,12.665,0,0,1,3.278,8.622,12.508,12.508,0,0,1-3.25,8.57,11.351,11.351,0,0,1-8.429,3.6,9.535,9.535,0,0,1-7.229-2.95V32.337L0,33.931ZM13.317,7.07A5.028,5.028,0,0,0,8,12.259a4.957,4.957,0,0,0,5.319,5.15,4.957,4.957,0,0,0,5.319-5.15A5.028,5.028,0,0,0,13.317,7.07Z" transform="translate(55.766 11.041)" fill="#fff"/><path d="M22.836,0l3.5,10.2.07.183a20.748,20.748,0,0,1,.988,3.43q.141-.731.364-1.532t.647-2.058L31.985,0h8.678L30.691,23.1H24.764L21.237,12.647q-.282-.891-.505-1.8t-.412-1.8A30.927,30.927,0,0,1,19.4,12.51l-.047.16L15.851,23.1H9.925L0,0H8.631l3.552,10.223q.4,1.121.635,1.955t.377,1.635a23.522,23.522,0,0,1,.917-3.179q.093-.274.141-.411L17.78,0h5.056" transform="translate(80.251 11.743)" fill="#fff"/><path d="M0,34.75V1.5L7.888,0V22.28l8.272-9.665H26.12L15.889,23.266,27.045,34.75H16.475L7.888,24.91v9.84H0" transform="translate(168.695 0)" fill="#fff"/><path d="M0,21.47l1.705-6.1a13.453,13.453,0,0,0,3.952,2.342A12.145,12.145,0,0,0,10,18.534a4.643,4.643,0,0,0,2.351-.482,1.539,1.539,0,0,0,.807-1.4q0-1.5-3.25-2.241-1.06-.246-1.705-.426A12.325,12.325,0,0,1,2.846,11.4,5.5,5.5,0,0,1,1.176,7.239,6.324,6.324,0,0,1,3.722,1.972,11,11,0,0,1,10.624,0a21.365,21.365,0,0,1,4.551.5,25.45,25.45,0,0,1,4.736,1.558l-1.706,5.49a14.24,14.24,0,0,0-3.319-1.636,10.6,10.6,0,0,0-3.364-.56A4.22,4.22,0,0,0,9.4,5.782a1.356,1.356,0,0,0-.714,1.233q0,1.211,3.227,2.04.737.2,1.106.291,4.264,1.188,5.935,2.79a5.728,5.728,0,0,1,1.671,4.337,6.782,6.782,0,0,1-2.743,5.614,11.478,11.478,0,0,1-7.259,2.14,22.565,22.565,0,0,1-5.693-.683A18.517,18.517,0,0,1,0,21.47" transform="translate(195.121 11.284)" fill="#fff"/><path d="M8.273,4.075h.091A8.13,8.13,0,0,1,15.909,0H17.5V7.834A6.8,6.8,0,0,0,14,7.074c-4.593,0-5.728,3-5.728,6.941v9.268H0V.313H8.273V4.075" transform="translate(150.08 11.469)" fill="#fff"/><path d="M17.392,29.929H13a.76.76,0,0,1-.485-.166.579.579,0,0,1-.227-.419l-.553-3.586a12.3,12.3,0,0,1-1.781-.721L7.163,27.123a.719.719,0,0,1-.495.176.687.687,0,0,1-.495-.214A25.873,25.873,0,0,1,2.91,23.81a.753.753,0,0,1,.019-.9c.2-.277.542-.713,1.009-1.3.483-.6.832-1.05,1.068-1.374a9.591,9.591,0,0,1-.811-1.929l-3.62-.526a.63.63,0,0,1-.416-.243A.729.729,0,0,1,0,17.089V12.762a.746.746,0,0,1,.159-.448.6.6,0,0,1,.376-.253l3.68-.546a9.5,9.5,0,0,1,.772-1.792C4.464,8.991,3.752,8.085,2.87,7.034a.732.732,0,0,1-.2-.468.82.82,0,0,1,.179-.449A19.622,19.622,0,0,1,4.8,4.023C5.751,3.1,6.38,2.631,6.668,2.631a.859.859,0,0,1,.515.194L9.913,4.91a11.536,11.536,0,0,1,1.8-.741A31.372,31.372,0,0,1,12.287.546.665.665,0,0,1,13,0h4.392a.755.755,0,0,1,.485.166.581.581,0,0,1,.229.419l.553,3.584a12.543,12.543,0,0,1,1.781.722L23.25,2.807a.641.641,0,0,1,.475-.176.775.775,0,0,1,.495.194,27.092,27.092,0,0,1,3.264,3.313.625.625,0,0,1,.139.429.745.745,0,0,1-.159.448c-.2.271-.525.695-1.008,1.3-.467.581-.827,1.043-1.069,1.373a11.784,11.784,0,0,1,.812,1.91l3.62.545a.625.625,0,0,1,.416.244.736.736,0,0,1,.157.458v4.325a.754.754,0,0,1-.157.449.606.606,0,0,1-.4.253l-3.66.545a12.628,12.628,0,0,1-.772,1.774c.465.654,1.177,1.559,2.117,2.688a.752.752,0,0,1,.2.488.648.648,0,0,1-.177.448,19.641,19.641,0,0,1-1.959,2.1c-.947.918-1.573,1.384-1.86,1.384a.978.978,0,0,1-.515-.176l-2.731-2.1a11.429,11.429,0,0,1-1.8.741,32.016,32.016,0,0,1-.573,3.624A.668.668,0,0,1,17.392,29.929ZM15.2,9.976a4.938,4.938,0,0,0-3.582,1.463,4.935,4.935,0,0,0,0,7.053,5.12,5.12,0,0,0,7.163,0,4.932,4.932,0,0,0,0-7.053A4.938,4.938,0,0,0,15.2,9.976Z" transform="translate(118.47 8.521)" fill="#fff"/><path d="M0,33.5,16.106,7.374H2.752V0H30.9L14.887,26.122H38.22L0,33.5" transform="translate(0 11.038)" fill="#fff"/></g><path d="M3.576-12.852v-4.3H6.628a2.867,2.867,0,0,1,1.945.55A2.034,2.034,0,0,1,9.188-15a2.06,2.06,0,0,1-.615,1.608,2.784,2.784,0,0,1-1.945.542ZM2.017-18.464V-6.748H3.576v-4.792H7.153a3.569,3.569,0,0,0,2.683-.9A3.478,3.478,0,0,0,10.747-15a3.45,3.45,0,0,0-.911-2.552,3.638,3.638,0,0,0-2.683-.911Zm11.421,7.483a4.221,4.221,0,0,1,.205-1.37,2.957,2.957,0,0,1,.566-1.009,2.411,2.411,0,0,1,.845-.624A2.515,2.515,0,0,1,16.08-14.2a2.515,2.515,0,0,1,1.026.213,2.411,2.411,0,0,1,.845.624,2.957,2.957,0,0,1,.566,1.009,4.221,4.221,0,0,1,.205,1.37,4.221,4.221,0,0,1-.205,1.37,2.867,2.867,0,0,1-.566,1,2.457,2.457,0,0,1-.845.615,2.515,2.515,0,0,1-1.026.213,2.515,2.515,0,0,1-1.026-.213,2.457,2.457,0,0,1-.845-.615,2.867,2.867,0,0,1-.566-1A4.221,4.221,0,0,1,13.438-10.981Zm-1.477,0a5.573,5.573,0,0,0,.263,1.739,3.97,3.97,0,0,0,.788,1.4,3.623,3.623,0,0,0,1.3.935,4.4,4.4,0,0,0,1.772.336A4.381,4.381,0,0,0,17.86-6.9a3.641,3.641,0,0,0,1.288-.935,3.97,3.97,0,0,0,.788-1.4,5.573,5.573,0,0,0,.263-1.739,5.65,5.65,0,0,0-.263-1.748,3.96,3.96,0,0,0-.788-1.411,3.729,3.729,0,0,0-1.288-.944,4.29,4.29,0,0,0-1.78-.345,4.3,4.3,0,0,0-1.772.345,3.71,3.71,0,0,0-1.3.944,3.96,3.96,0,0,0-.788,1.411A5.65,5.65,0,0,0,11.961-10.981Zm18.28,4.234,2.708-8.484H31.5L29.6-8.29h-.033L27.8-15.231H26.27L24.564-8.29h-.033l-1.92-6.941H21.068l2.724,8.484H25.3l1.707-6.744h.033l1.723,6.744ZM40.169-11.8H35.3a2.905,2.905,0,0,1,.213-.927A2.473,2.473,0,0,1,36-13.492a2.255,2.255,0,0,1,.747-.517,2.429,2.429,0,0,1,.976-.189,2.386,2.386,0,0,1,.96.189,2.415,2.415,0,0,1,.755.509,2.391,2.391,0,0,1,.509.763A2.854,2.854,0,0,1,40.169-11.8Zm1.346,2.363H40.136a1.983,1.983,0,0,1-.747,1.247,2.414,2.414,0,0,1-1.452.41,2.889,2.889,0,0,1-1.2-.23,2.348,2.348,0,0,1-.837-.615,2.4,2.4,0,0,1-.476-.886,3.367,3.367,0,0,1-.131-1.058h6.35a6.754,6.754,0,0,0-.139-1.625,4.7,4.7,0,0,0-.624-1.575,3.716,3.716,0,0,0-1.2-1.19,3.48,3.48,0,0,0-1.879-.468,3.858,3.858,0,0,0-1.6.328,3.76,3.76,0,0,0-1.264.919,4.236,4.236,0,0,0-.829,1.395,5.105,5.105,0,0,0-.3,1.772,6.8,6.8,0,0,0,.287,1.789,3.9,3.9,0,0,0,.763,1.411,3.478,3.478,0,0,0,1.255.919,4.358,4.358,0,0,0,1.764.328,3.851,3.851,0,0,0,2.4-.722A3.39,3.39,0,0,0,41.515-9.439Zm1.526-5.793v8.484h1.395v-3.774a5.8,5.8,0,0,1,.164-1.452,2.784,2.784,0,0,1,.525-1.075,2.251,2.251,0,0,1,.952-.673,3.945,3.945,0,0,1,1.428-.23v-1.477a3.135,3.135,0,0,0-1.871.459,3.779,3.779,0,0,0-1.247,1.526h-.033v-1.789ZM54.15-11.8H49.276a2.905,2.905,0,0,1,.213-.927,2.473,2.473,0,0,1,.492-.763,2.255,2.255,0,0,1,.747-.517A2.429,2.429,0,0,1,51.7-14.2a2.386,2.386,0,0,1,.96.189,2.415,2.415,0,0,1,.755.509,2.391,2.391,0,0,1,.509.763A2.854,2.854,0,0,1,54.15-11.8ZM55.5-9.439H54.117a1.983,1.983,0,0,1-.747,1.247,2.414,2.414,0,0,1-1.452.41,2.889,2.889,0,0,1-1.2-.23,2.348,2.348,0,0,1-.837-.615,2.4,2.4,0,0,1-.476-.886,3.367,3.367,0,0,1-.131-1.058h6.35a6.754,6.754,0,0,0-.139-1.625,4.7,4.7,0,0,0-.624-1.575,3.716,3.716,0,0,0-1.2-1.19,3.48,3.48,0,0,0-1.879-.468,3.858,3.858,0,0,0-1.6.328,3.76,3.76,0,0,0-1.264.919,4.236,4.236,0,0,0-.829,1.395,5.1,5.1,0,0,0-.3,1.772,6.8,6.8,0,0,0,.287,1.789,3.9,3.9,0,0,0,.763,1.411,3.478,3.478,0,0,0,1.255.919,4.358,4.358,0,0,0,1.764.328,3.851,3.851,0,0,0,2.4-.722A3.39,3.39,0,0,0,55.5-9.439Zm2.593-1.477a5.581,5.581,0,0,1,.131-1.214,3.212,3.212,0,0,1,.427-1.05,2.221,2.221,0,0,1,.788-.738,2.4,2.4,0,0,1,1.2-.279,2.589,2.589,0,0,1,1.231.271,2.389,2.389,0,0,1,.829.714,2.985,2.985,0,0,1,.468,1.026,4.889,4.889,0,0,1,.148,1.206,4.919,4.919,0,0,1-.139,1.165,3.053,3.053,0,0,1-.451,1.026,2.4,2.4,0,0,1-.8.73,2.4,2.4,0,0,1-1.2.279,2.491,2.491,0,0,1-1.173-.263,2.332,2.332,0,0,1-.82-.706,3.122,3.122,0,0,1-.476-1.009A4.338,4.338,0,0,1,58.088-10.916Zm6.564,4.168V-18.464H63.257V-14.1h-.033a2.247,2.247,0,0,0-.566-.632,3.216,3.216,0,0,0-.714-.41,3.583,3.583,0,0,0-.755-.222,4.132,4.132,0,0,0-.706-.066,3.861,3.861,0,0,0-1.7.353,3.487,3.487,0,0,0-1.214.952,4.018,4.018,0,0,0-.722,1.4,5.985,5.985,0,0,0-.238,1.707,5.8,5.8,0,0,0,.246,1.707,4.218,4.218,0,0,0,.73,1.411,3.529,3.529,0,0,0,1.214.968,3.827,3.827,0,0,0,1.715.361,4.135,4.135,0,0,0,1.625-.312A2.053,2.053,0,0,0,63.224-7.9h.033v1.149Zm6.761-11.716V-6.748h1.395V-7.88h.033a2.247,2.247,0,0,0,.566.632,2.982,2.982,0,0,0,.714.4,3.874,3.874,0,0,0,.763.213,4.193,4.193,0,0,0,.7.066,3.94,3.94,0,0,0,1.7-.345,3.4,3.4,0,0,0,1.214-.944,4.018,4.018,0,0,0,.722-1.4,5.985,5.985,0,0,0,.238-1.707,5.8,5.8,0,0,0-.246-1.707,4.312,4.312,0,0,0-.73-1.419,3.488,3.488,0,0,0-1.214-.976,3.827,3.827,0,0,0-1.715-.361,4.043,4.043,0,0,0-1.625.32,2.088,2.088,0,0,0-1.083,1.026h-.033v-4.381Zm6.564,7.4a5.581,5.581,0,0,1-.131,1.214,3.212,3.212,0,0,1-.427,1.05,2.243,2.243,0,0,1-.779.738,2.385,2.385,0,0,1-1.206.279A2.589,2.589,0,0,1,74.2-8.052a2.389,2.389,0,0,1-.829-.714,2.985,2.985,0,0,1-.468-1.026A4.889,4.889,0,0,1,72.758-11a4.919,4.919,0,0,1,.139-1.165,3.053,3.053,0,0,1,.451-1.026,2.4,2.4,0,0,1,.8-.73,2.4,2.4,0,0,1,1.2-.279,2.491,2.491,0,0,1,1.173.263,2.332,2.332,0,0,1,.82.706,3.122,3.122,0,0,1,.476,1.009A4.338,4.338,0,0,1,77.976-11.063Zm6.449,5.448a8.871,8.871,0,0,1-.484,1.05,2.871,2.871,0,0,1-.525.7,1.782,1.782,0,0,1-.64.394,2.462,2.462,0,0,1-.812.123,3.721,3.721,0,0,1-.492-.033A2.324,2.324,0,0,1,81-3.5v-1.28a2.342,2.342,0,0,0,.418.139,1.765,1.765,0,0,0,.4.057,1.2,1.2,0,0,0,.714-.205,1.255,1.255,0,0,0,.435-.583L83.539-6.8l-3.364-8.434h1.575L84.228-8.29h.033l2.379-6.941h1.477Z" transform="translate(0.722 18.464)" fill="#fff"/></g></g></g></svg>';function sJ(t){switch(t.type){case Za.IMAGE_TRACKER_TYPE_PLANAR:return oJ(t);case Za.IMAGE_TRACKER_TYPE_CYLINDRICAL:return aJ(t);case Za.IMAGE_TRACKER_TYPE_CONICAL:return lJ(t)}return XU()}function oJ(t){const e=t.trainedWidth/t.trainedHeight;if(isNaN(e))return XU();const n=t.physicalScaleFactor>0?t.physicalScaleFactor:1,i=new Float32Array([-1*e*n,-1*n,0,-1*e*n,n,0,e*n,n,0,e*n,-1*n,0]),r=new Uint16Array([0,2,1,0,3,2]),s=new Float32Array([0,0,0,1,1,1,1,0]),o=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1]);return{vertices:i,indices:r,uvs:s,normals:o}}function XU(){return{indices:new Uint16Array(0),vertices:new Float32Array(0),normals:new Float32Array(0),uvs:new Float32Array(0)}}function aJ(t){const e=2*t.trainedWidth/(t.trainedHeight*t.topRadius);return YU(t,2,!1,0,0,0,vo(),t.trainedWidth/t.trainedHeight,e,t.physicalScaleFactor)}function lJ(t){const e=t.topRadius-t.bottomRadius,n=Math.sqrt(t.sideLength*t.sideLength-e*e),i=t.bottomRadius>t.topRadius;let r=t.trainedWidth/t.trainedHeight;isNaN(r)&&(r=1);const s=!(t.bottomRadius>0)||!(t.topRadius>0),o=t.sideLength<2*Math.abs(t.topRadius-t.bottomRadius),a=vo(),l=vo(),c=vo();if(s)if(o)if(i){c[1]=r-1;const _=Math.acos((2-r)/r);a[0]=r*Math.sin(_),a[1]=r-1+r*Math.cos(_),Mu(l,c)}else{c[1]=1-r;const _=Math.PI+Math.acos((2-r)/r);a[0]=r*Math.sin(_),a[1]=1-r+r*Math.cos(_),Mu(l,c)}else i?(c[1]=1,Mu(l,c),a[0]=r,a[1]=1-Math.sqrt(4-Math.pow(r,2))):(c[1]=-1,Mu(l,c),a[0]=-r,a[1]=Math.sqrt(4-Math.pow(r,2))-1);else if(o)if(i){c[1]=r-1;const _=Math.acos((2-r)/r);a[0]=r*Math.sin(_),a[1]=r-1+r*Math.cos(_),l[0]=(r-t.sideLength)*Math.sin(_),l[1]=r-1+(r-t.sideLength)*Math.cos(_)}else{c[1]=1-r;const _=Math.PI+Math.acos((2-r)/r);a[0]=r*Math.sin(_),a[1]=1-r+r*Math.cos(_),l[0]=(r-t.sideLength)*Math.sin(_),l[1]=1-r+(r-t.sideLength)*Math.cos(_)}else{const _=i?t.topRadius/t.bottomRadius:t.bottomRadius/t.topRadius;i?(l[0]=_*r,l[1]=1,a[0]=r,a[1]=1-Math.sqrt(t.sideLength*t.sideLength-(l[0]-a[0])*(l[0]-a[0])),c[1]=a[1]+a[0]/(a[0]-l[0])*(l[1]-a[1])):(l[0]=-_*r,l[1]=-1,a[0]=-r,a[1]=Math.sqrt(t.sideLength*t.sideLength-(l[0]-a[0])*(l[0]-a[0]))-1,c[1]=a[1]- -a[0]/(l[0]-a[0])*(a[1]-l[1]))}const u=vo();w_(u,a,c);const h=vo();w_(h,l,c);const f=M_(u),d=M_(h);let p=2*Math.abs(Math.atan(u[0]/u[1]));o&&(p=2*Math.PI-p);let m=f*p/t.topRadius,g=Math.abs(Math.atan(u[0]/u[1]));return o&&(g=Math.PI-g),YU(t,n,i,g,d,f,c,r,m,t.physicalScaleFactor)}function YU(t,e,n,i,r,s,o,a,l,c){isNaN(a)&&(a=1);const u=[],h=[],f=c>0?c:1,d=f*2/e,p=64;for(let g=0;g<=p;++g){const _=g*l/p+(2*Math.PI-l)/2,y=t.bottomRadius*Math.sin(_)*d,x=t.bottomRadius*Math.cos(_)*d,E=t.topRadius*Math.sin(_)*d,w=t.topRadius*Math.cos(_)*d,S=-1*f,b=f;n?(u.push(y,S,x),u.push(E,b,w)):(u.push(E,b,-w),u.push(y,S,-x))}for(let g=0;g<=p;++g)if(t.type==Za.IMAGE_TRACKER_TYPE_CYLINDRICAL){const _=1-g/p;h.push(_,1),h.push(_,0)}else{let _=-(g/p-.5)*2*i;n&&(_=-_+i,_>i&&(_=-i+(_-i)));const y=vo();y[0]=Math.sin(_),y[1]=Math.cos(_),n&&(y[1]*=-1);const x=vo();Mu(x,y),eC(x,x,r),$M(x,o,x);const E=vo();Mu(E,y),eC(E,E,s),$M(E,o,E),h.push((E[0]+a)/(2*a),1-(-E[1]+1)/2),h.push((x[0]+a)/(2*a),1-(-x[1]+1)/2)}const m=[];for(let g=0;g<p;++g){const _=g*2;m.push(_+1,_+2,_+3),m.push(_+0,_+2,_+1)}return{vertices:new Float32Array(u),indices:new Uint16Array(m),normals:new Float32Array(0),uvs:new Float32Array(h)}}const sE=new TextDecoder;class cJ{constructor(e,n=!1){this._data=e,this._paddingBytes=n,this.truncatedChunks=!1,this._view=new DataView(this._data),this.root=this._parse()}_parse(){if(sE.decode(this._data.slice(0,4))!=="RIFF")throw new Error("Not a valid ZPT file");return this._parseChunk(0)}_parseChunk(e){const n=sE.decode(this._data.slice(e,e+4)),i=this._view.getUint32(e+4,!0),r=new Uint8Array(this._data,e+8,i);r.byteLength!==i&&(this.truncatedChunks=!0);let s,o;if(n==="RIFF"||n==="LIST"){o=sE.decode(this._data.slice(e+8,e+12)),s=[];let a=4;for(;a<r.byteLength-1;){const l=this._parseChunk(e+8+a);s.push(l),a+=l.data.byteLength+8,this._paddingBytes&&l.data.byteLength&1&&a++}}return{ident:n,data:r,subident:o,subchunks:s}}find(e,n=this.root){if(n.ident===e)return n;if(!!n.subchunks)for(let i of n.subchunks){const r=this.find(e,i);if(r)return r}}has(e){return this.find(e)!==void 0}}let oE=new Map;const HR=new TextDecoder;class Rn{constructor(e,n){this._client=e,this._impl=n,this._targets=[]}static create(e,n){let i=n.image_tracker_create(e);return oE.set(i,new Rn(n,i)),i}static get(e){return oE.get(e)}destroy(){this._client.image_tracker_destroy(this._impl),oE.delete(this._impl)}loadFromMemory(e){this._targets.push({data:e}),this._client.image_tracker_target_load_from_memory(this._impl,e)}targetCount(){return this._targets.length}getTargetInfo(e){let n=this._targets[e];if(n&&n.info)return n.info;n.info={topRadius:-1,bottomRadius:-1,sideLength:-1,physicalScaleFactor:-1,trainedWidth:0,trainedHeight:0,type:Za.IMAGE_TRACKER_TYPE_PLANAR};try{const i=new cJ(n.data,!1),r=i.find("IMG ");if(r){let o="image/png";const a=i.find("IMGM");a&&(o=HR.decode(a.data)),n.info.preview={mimeType:o,compressed:r.data}}const s=i.find("ODLE");if(s){const o=HR.decode(s.data);this._parseOdle(o,n.info)}}catch{}return n.info}_parseOdle(e,n){let i=0,r="0";if([r,i]=bl(i,e),r==="1")return this._parseOdleV1(e,i,n);if(r==="3")return this._parseOdleV3(e,i,n)}_parseOdleV1(e,n,i){let r="0";if([r,n]=bl(n,e),r!=="0"&&r!=="1")return;let s="";if([s,n]=bl(n,e),s.length!==0)return;let o="";[o,n]=bl(n,e);const a=o.split(" ");a.length<5||(i.trainedWidth=parseInt(a[3].replace("[","")),i.trainedHeight=parseInt(a[4].replace("]","")))}_parseOdleV3(e,n,i){let r="0";if([r,n]=bl(n,e),r!=="0"&&r!=="1")return;let s="0";[s,n]=bl(n,e);const o=parseInt(s);if(isNaN(o)||o<1)return;let a="";if([a,n]=bl(n,e),a.length!==0)return;let l="";[l,n]=bl(n,e);const c=l.split(" ");if(c.length<6)return;const u=parseInt(c[0]);(u===0||u===1||u===2)&&(i.type=u),i.trainedWidth=parseInt(c[4].replace("[","")),i.trainedHeight=parseInt(c[5].replace("]","")),c.length>=7&&(i.physicalScaleFactor=parseFloat(c[6]),isNaN(i.physicalScaleFactor)&&(i.physicalScaleFactor=-1)),c.length>=8&&(i.topRadius=parseFloat(c[7]),isNaN(i.topRadius)&&(i.topRadius=-1),i.bottomRadius=i.topRadius),c.length>=9&&(i.bottomRadius=parseFloat(c[8]),isNaN(i.bottomRadius)&&(i.bottomRadius=-1)),c.length>=10&&(i.sideLength=parseFloat(c[9]),isNaN(i.sideLength)&&(i.sideLength=-1))}getDecodedPreview(e){const n=this.getTargetInfo(e);if(!!n.preview){if(!n.preview.image){const i=new Blob([n.preview.compressed],{type:n.preview.mimeType});n.preview.image=new Image,n.preview.image.src=URL.createObjectURL(i)}return n.preview.image}}getPreviewMesh(e){const n=this.getTargetInfo(e);return n.previewMesh||(n.previewMesh=sJ(n)),n.previewMesh}}function bl(t,e){let n=e.indexOf(`
`,t);return[e.substring(t,n>=0?n:void 0).replace("\r",""),n+1]}var Sp=globalThis&&globalThis.__awaiter||function(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(h){o(h)}}function l(u){try{c(i.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(t,e||[])).next())})};let Su;function uJ(t){if(Su)return Su;let e=!1;cq(t==null?void 0:t.worker).then(()=>{To("Fully loaded"),e=!0});let n=new YH(i=>{sd.postOutgoingMessage({t:"zappar",d:i},[i])});if(window.location.hostname.toLowerCase().indexOf(".zappar.io")>0||window.location.hostname.toLowerCase().indexOf(".webar.run")>0){let i=window.location.pathname.split("/");i.length>1&&i[1].length>0&&n.impl.analytics_project_id_set(".wiz"+i[1])}return sd.onIncomingMessage.bind(i=>{var r,s,o,a,l,c,u;switch(i.t){case"zappar":(r=yt.get(i.p))===null||r===void 0||r.pendingMessages.push(i.d);break;case"buf":n.serializer.bufferReturn(i.d);break;case"cameraFrameRecycleS2C":{let h=i;(o=(s=yt.get(h.p))===null||s===void 0?void 0:s.cameraTokenReturn)===null||o===void 0||o.call(s,i);break}case"videoFrameS2C":{let h=i;(l=(a=yt.get(h.p))===null||a===void 0?void 0:a.videoFrameFromWorker)===null||l===void 0||l.call(a,h);break}case"imageBitmapS2C":{let h=i;(u=(c=yt.get(h.p))===null||c===void 0?void 0:c.imageBitmapFromWorker)===null||u===void 0||u.call(c,h);break}case"licerr":{let h=document.createElement("div");h.innerHTML="Visit <a href='https://docs.zap.works/universal-ar/licensing/' style='color: white;'>our licensing page</a> to find out about hosting on your own domain.",h.style.position="absolute",h.style.bottom="20px",h.style.width="80%",h.style.backgroundColor="black",h.style.color="white",h.style.borderRadius="10px",h.style.padding="10px",h.style.fontFamily="sans-serif",h.style.textAlign="center",h.style.left="10%",h.style.zIndex=Number.MAX_SAFE_INTEGER.toString();let f=document.createElement("span");f.innerText=" (30)",h.append(f);let d=30;setInterval(function(){d--,d>=0&&(f.innerText=" ("+d.toString()+")")},1e3),document.body.append(h)}case"gfx":{let h=document.createElement("div");h.innerHTML=rJ,h.style.position="absolute",h.style.bottom="20px",h.style.width="250px",h.style.left="50%",h.style.marginLeft="-125px",h.style.zIndex=Number.MAX_SAFE_INTEGER.toString(),h.style.opacity="0",h.style.transition="opacity 0.5s",document.body.append(h),setTimeout(function(){h.style.opacity="1"},500),setTimeout(function(){h.style.opacity="0"},3e3),setTimeout(function(){h.remove()},4e3)}}}),Su=Object.assign(Object.assign({},n.impl),{loaded:()=>e,camera_default_device_id:i=>i?yo.USER_DEFAULT_DEVICE_ID:yo.DEFAULT_DEVICE_ID,camera_source_create:(i,r)=>Hq(i,r),camera_source_destroy:i=>{var r;return(r=Rv(i))===null||r===void 0?void 0:r.destroy()},camera_source_pause:i=>{var r;return(r=Rv(i))===null||r===void 0?void 0:r.pause()},camera_source_start:i=>{var r;return(r=Rv(i))===null||r===void 0?void 0:r.start()},camera_count:()=>2,camera_id:i=>i===0?yo.DEFAULT_DEVICE_ID:yo.USER_DEFAULT_DEVICE_ID,camera_name:i=>i===0?"Rear-facing Camera":"User-facing Camera",camera_user_facing:i=>i!==0,pipeline_create:()=>yt.create(n.impl,sd),pipeline_frame_update:i=>{var r;return(r=yt.get(i))===null||r===void 0?void 0:r.frameUpdate(n)},pipeline_camera_frame_draw_gl:(i,r,s,o)=>{var a;(a=yt.get(i))===null||a===void 0||a.cameraFrameDrawGL(r,s,o)},draw_plane:(i,r,s,o,a)=>{ZH(i,r,s,o,a)},pipeline_draw_face:(i,r,s,o,a)=>{var l;let c=Er(a);if(!c)return Xt("attempting to call draw_face on a destroyed zappar_face_mesh_t"),new Uint16Array;(l=yt.get(i))===null||l===void 0||l.drawFace(r,s,o,c)},pipeline_draw_face_project:(i,r,s,o,a,l,c)=>{var u;(u=yt.get(i))===null||u===void 0||u.drawFaceProject(r,s,o,a,l,c)},pipeline_draw_image_target_preview:(i,r,s,o,a,l)=>{var c;let u=Rn.get(a);if(!u){Xt("image tracker not found");return}(c=yt.get(i))===null||c===void 0||c.drawImageTargetPreview(r,s,o,l,u)},projection_matrix_from_camera_model:LR,projection_matrix_from_camera_model_ext:LR,pipeline_process_gl:i=>{var r;return(r=yt.get(i))===null||r===void 0?void 0:r.processGL()},pipeline_gl_context_set:(i,r,s)=>{var o;return(o=yt.get(i))===null||o===void 0?void 0:o.glContextSet(r,s)},pipeline_gl_context_lost:i=>{var r;return(r=yt.get(i))===null||r===void 0?void 0:r.glContextLost()},pipeline_camera_frame_upload_gl:i=>{var r;return(r=yt.get(i))===null||r===void 0?void 0:r.uploadGL()},pipeline_camera_frame_texture_gl:i=>{var r;return(r=yt.get(i))===null||r===void 0?void 0:r.cameraFrameTexture()},pipeline_camera_frame_texture_matrix:(i,r,s,o)=>{var a;return((a=yt.get(i))===null||a===void 0?void 0:a.cameraFrameTextureMatrix(r,s,o))||ln()},pipeline_camera_frame_user_facing:i=>{var r;return((r=yt.get(i))===null||r===void 0?void 0:r.cameraFrameUserFacing())||!1},pipeline_camera_pose_default:()=>ln(),pipeline_camera_pose_with_attitude:(i,r)=>{var s;return((s=yt.get(i))===null||s===void 0?void 0:s.cameraPoseWithAttitude(r))||ln()},pipeline_camera_pose_with_origin:(i,r)=>{let s=ln();return wb(s,r),s},pipeline_sequence_record_clear:i=>{var r;return(r=yt.get(i))===null||r===void 0?void 0:r.sequenceRecordClear()},pipeline_sequence_record_start:(i,r)=>{var s;return(s=yt.get(i))===null||s===void 0?void 0:s.sequenceRecordStart(r)},pipeline_sequence_record_stop:i=>{var r;return(r=yt.get(i))===null||r===void 0?void 0:r.sequenceRecordStop()},pipeline_sequence_record_device_attitude_matrices_set:(i,r)=>{var s;return(s=yt.get(i))===null||s===void 0?void 0:s.sequenceRecordDeviceAttitudeMatrices(r)},pipeline_sequence_record_data:i=>{var r;return((r=yt.get(i))===null||r===void 0?void 0:r.sequenceRecordData())||new Uint8Array(0)},pipeline_sequence_record_data_size:i=>{var r;return((r=yt.get(i))===null||r===void 0?void 0:r.sequenceRecordData().byteLength)||0},instant_world_tracker_anchor_pose_camera_relative:(i,r)=>{let s=mu(void 0,n.impl.instant_world_tracker_anchor_pose_raw(i));if(r){let o=ln();ji(o,[-1,1,1]),Kt(s,o,s),Kt(s,s,o)}return s},instant_world_tracker_anchor_pose:(i,r,s)=>{let o=mu(void 0,n.impl.instant_world_tracker_anchor_pose_raw(i));if(s){let a=ln();ji(a,[-1,1,1]),Kt(o,a,o),Kt(o,o,a)}return Kt(o,r,o),o},instant_world_tracker_anchor_pose_set_from_camera_offset:(i,r,s,o,a)=>{let c=eh(!1)*Math.PI/180,u=ln();Ed(u,-c,[0,0,1]);let h=Qd();dy(h,[r,s,o],u),n.impl.instant_world_tracker_anchor_pose_set_from_camera_offset_raw(i,h[0],h[1],h[2],a)},image_tracker_create:i=>Rn.create(i,n.impl),image_tracker_destroy:i=>{var r;return(r=Rn.get(i))===null||r===void 0?void 0:r.destroy()},image_tracker_target_type:(i,r)=>{let s=Rn.get(i);return s?s.getTargetInfo(r).type:(Xt("attempting to call image_tracker_target_type on a destroyed zappar_image_tracker_t"),Za.IMAGE_TRACKER_TYPE_PLANAR)},image_tracker_target_count:i=>{let r=Rn.get(i);return r?r.targetCount():(Xt("attempting to call image_tracker_target_count on a destroyed zappar_image_tracker_t"),0)},image_tracker_target_load_from_memory:(i,r)=>{let s=Rn.get(i);if(!s)return Xt("attempting to call image_tracker_target_load_from_memory on a destroyed zappar_image_tracker_t"),0;s.loadFromMemory(r)},image_tracker_target_preview_compressed:(i,r)=>{var s;let o=Rn.get(i);return o?((s=o.getTargetInfo(r).preview)===null||s===void 0?void 0:s.compressed)||new Uint8Array(0):(Xt("attempting to call image_tracker_target_preview_compressed on a destroyed zappar_image_tracker_t"),new Uint8Array(0))},image_tracker_target_preview_compressed_mimetype:(i,r)=>{var s;let o=Rn.get(i);return o?((s=o.getTargetInfo(r).preview)===null||s===void 0?void 0:s.mimeType)||"":(Xt("attempting to call image_tracker_target_preview_compressed_mimetype on a destroyed zappar_image_tracker_t"),"")},image_tracker_target_preview_compressed_size:(i,r)=>{var s,o;let a=Rn.get(i);return a?((o=(s=a.getTargetInfo(r).preview)===null||s===void 0?void 0:s.compressed)===null||o===void 0?void 0:o.byteLength)||0:(Xt("attempting to call image_tracker_target_preview_compressed_size on a destroyed zappar_image_tracker_t"),0)},image_tracker_target_physical_scale_factor:(i,r)=>{let s=Rn.get(i);return s?s.getTargetInfo(r).physicalScaleFactor:(Xt("attempting to call image_tracker_target_physical_scale_factor on a destroyed zappar_image_tracker_t"),0)},image_tracker_target_radius_top:(i,r)=>{let s=Rn.get(i);return s?s.getTargetInfo(r).topRadius:(Xt("attempting to call image_tracker_target_radius_top on a destroyed zappar_image_tracker_t"),0)},image_tracker_target_radius_bottom:(i,r)=>{let s=Rn.get(i);return s?s.getTargetInfo(r).bottomRadius:(Xt("attempting to call image_tracker_target_radius_bottom on a destroyed zappar_image_tracker_t"),0)},image_tracker_target_side_length:(i,r)=>{let s=Rn.get(i);return s?s.getTargetInfo(r).sideLength:(Xt("attempting to call image_tracker_target_side_length on a destroyed zappar_image_tracker_t"),0)},image_tracker_target_image:(i,r)=>{let s=Rn.get(i);return s?s.getDecodedPreview(r):(Xt("attempting to call image_tracker_target_image on a destroyed zappar_image_tracker_t"),new Image)},image_tracker_anchor_pose_camera_relative:(i,r,s)=>{let o=mu(void 0,n.impl.image_tracker_anchor_pose_raw(i,r));if(s){let a=ln();ji(a,[-1,1,1]),Kt(o,a,o),Kt(o,o,a)}return o},image_tracker_anchor_pose:(i,r,s,o)=>{let a=mu(void 0,n.impl.image_tracker_anchor_pose_raw(i,r));if(o){let l=ln();ji(l,[-1,1,1]),Kt(a,l,a),Kt(a,a,l)}return Kt(a,s,a),a},image_tracker_target_preview_mesh_indices:(i,r)=>{let s=Rn.get(i);return s?s.getPreviewMesh(r).indices:(Xt("attempting to call image_tracker_target_preview_mesh_indices on a destroyed zappar_image_tracker_t"),new Uint16Array)},image_tracker_target_preview_mesh_vertices:(i,r)=>{let s=Rn.get(i);return s?s.getPreviewMesh(r).vertices:(Xt("attempting to call image_tracker_target_preview_mesh_vertices on a destroyed zappar_image_tracker_t"),new Float32Array)},image_tracker_target_preview_mesh_uvs:(i,r)=>{let s=Rn.get(i);return s?s.getPreviewMesh(r).uvs:(Xt("attempting to call image_tracker_target_preview_mesh_uvs on a destroyed zappar_image_tracker_t"),new Float32Array)},image_tracker_target_preview_mesh_normals:(i,r)=>{let s=Rn.get(i);return s?s.getPreviewMesh(r).normals:(Xt("attempting to call image_tracker_target_preview_mesh_normals on a destroyed zappar_image_tracker_t"),new Float32Array)},image_tracker_target_preview_mesh_indices_size:(i,r)=>{let s=Rn.get(i);return s?s.getPreviewMesh(r).indices.length:(Xt("attempting to call image_tracker_target_preview_mesh_indices_size on a destroyed zappar_image_tracker_t"),0)},image_tracker_target_preview_mesh_vertices_size:(i,r)=>{let s=Rn.get(i);return s?s.getPreviewMesh(r).vertices.length:(Xt("attempting to call image_tracker_target_preview_mesh_vertices_size on a destroyed zappar_image_tracker_t"),0)},image_tracker_target_preview_mesh_uvs_size:(i,r)=>{let s=Rn.get(i);return s?s.getPreviewMesh(r).uvs.length:(Xt("attempting to call image_tracker_target_preview_mesh_uvs_size on a destroyed zappar_image_tracker_t"),0)},image_tracker_target_preview_mesh_normals_size:(i,r)=>{let s=Rn.get(i);return s?s.getPreviewMesh(r).normals.length:(Xt("attempting to call image_tracker_target_preview_mesh_normals_size on a destroyed zappar_image_tracker_t"),0)},face_tracker_anchor_pose_camera_relative:(i,r,s)=>{let o=mu(void 0,n.impl.face_tracker_anchor_pose_raw(i,r));if(s){let a=ln();ji(a,[-1,1,1]),Kt(o,a,o),Kt(o,o,a)}return o},face_tracker_anchor_pose:(i,r,s,o)=>{let a=mu(void 0,n.impl.face_tracker_anchor_pose_raw(i,r));if(o){let l=ln();ji(l,[-1,1,1]),Kt(a,l,a),Kt(a,a,l)}return Kt(a,s,a),a},face_tracker_model_load_default:i=>Sp(this,void 0,void 0,function*(){yield hJ(i)}),face_mesh_create:()=>Eq(),face_mesh_destroy:i=>{wq(i)},face_mesh_indices:i=>{let r=Er(i);return r?r.getIndices():(Xt("attempting to call face_mesh_indices on a destroyed zappar_face_mesh_t"),new Uint16Array)},face_mesh_indices_size:i=>{let r=Er(i);return r?r.getIndices().length:(Xt("attempting to call face_mesh_indices_size on a destroyed zappar_face_mesh_t"),0)},face_mesh_uvs:i=>{let r=Er(i);return r?r.getUVs():(Xt("attempting to call face_mesh_uvs on a destroyed zappar_face_mesh_t"),new Float32Array)},face_mesh_uvs_size:i=>{let r=Er(i);return r?r.getUVs().length:(Xt("attempting to call face_mesh_uvs_size on a destroyed zappar_face_mesh_t"),0)},face_mesh_vertices:i=>{let r=Er(i);return r?r.getVertices():(Xt("attempting to call face_mesh_vertices on a destroyed zappar_face_mesh_t"),new Float32Array)},face_mesh_vertices_size:i=>{let r=Er(i);return r?r.getVertices().length:(Xt("attempting to call face_mesh_vertices_size on a destroyed zappar_face_mesh_t"),0)},face_mesh_normals:i=>{let r=Er(i);return r?r.getNormals():(Xt("attempting to call face_mesh_normals on a destroyed zappar_face_mesh_t"),new Float32Array)},face_mesh_normals_size:i=>{let r=Er(i);return r?r.getNormals().length:(Xt("attempting to call face_mesh_normals_size on a destroyed zappar_face_mesh_t"),0)},face_mesh_load_from_memory:(i,r,s,o,a,l)=>{let c=Er(i);if(!c){Xt("attempting to call face_mesh_load_from_memory on a destroyed zappar_face_mesh_t");return}c.loadFromMemory(r,s,o,a,l)},face_mesh_update:(i,r,s,o)=>{let a=Er(i);if(!a){Xt("attempting to call face_mesh_update on a destroyed zappar_face_mesh_t");return}a.update(r,s,o)},face_mesh_load_default:i=>Sp(this,void 0,void 0,function*(){let r=Er(i);if(!r){Xt("attempting to call face_mesh_load_default on a destroyed zappar_face_mesh_t");return}let s=new URL("/assets/face_mesh_face_model.03bc63d9.zbin",self.location),o=yield fetch(s.toString());r.loadFromMemory(yield o.arrayBuffer(),!1,!1,!1,!1)}),face_mesh_load_default_face:(i,r,s,o)=>Sp(this,void 0,void 0,function*(){let a=Er(i);if(!a){Xt("attempting to call face_mesh_load_default_face on a destroyed zappar_face_mesh_t");return}let l=new URL("/assets/face_mesh_face_model.03bc63d9.zbin",self.location),c=yield fetch(l.toString());a.loadFromMemory(yield c.arrayBuffer(),r,s,o,!1)}),face_mesh_load_default_full_head_simplified:(i,r,s,o,a)=>Sp(this,void 0,void 0,function*(){let l=Er(i);if(!l){Xt("attempting to call face_mesh_load_default_full_head_simplified on a destroyed zappar_face_mesh_t");return}let c=new URL("/assets/face_mesh_full_head_simplified_model.e52374bf.zbin",self.location),u=yield fetch(c.toString());l.loadFromMemory(yield u.arrayBuffer(),r,s,o,a)}),face_mesh_loaded_version:i=>{let r=Er(i);return r?r.getModelVersion():(Xt("attempting to call face_mesh_load_default on a destroyed zappar_face_mesh_t"),-1)},face_landmark_create:i=>Kq(i),face_landmark_destroy:i=>{Zq(i)},face_landmark_update:(i,r,s,o)=>{let a=zR(i);if(!a){Xt("attempting to call face_landmark_update on a destroyed zappar_face_landmark_t");return}a.update(r,s,o)},face_landmark_anchor_pose:i=>{let r=zR(i);return r?r.anchor_pose:(Xt("attempting to call face_landmark_anchor_pose on a destroyed zappar_face_landmark_t"),ln())},html_element_source_create:(i,r)=>Cu.createVideoElementSource(i,r),html_element_source_start:i=>{var r;return(r=Cu.getVideoElementSource(i))===null||r===void 0?void 0:r.start()},html_element_source_pause:i=>{var r;return(r=Cu.getVideoElementSource(i))===null||r===void 0?void 0:r.pause()},html_element_source_destroy:i=>{var r;return(r=Cu.getVideoElementSource(i))===null||r===void 0?void 0:r.destroy()},sequence_source_create:i=>ka.create(i),sequence_source_load_from_memory:(i,r)=>{var s;return(s=ka.get(i))===null||s===void 0?void 0:s.loadFromMemory(r)},sequence_source_pause:i=>{var r;return(r=ka.get(i))===null||r===void 0?void 0:r.pause()},sequence_source_start:i=>{var r;return(r=ka.get(i))===null||r===void 0?void 0:r.start()},sequence_source_max_playback_fps_set:(i,r)=>{var s;return(s=ka.get(i))===null||s===void 0?void 0:s.maxPlaybackFpsSet(r)},sequence_source_time_set:(i,r)=>{var s;return(s=ka.get(i))===null||s===void 0?void 0:s.setTime(r)},sequence_source_destroy:i=>{var r;return(r=ka.get(i))===null||r===void 0?void 0:r.destroy()},permission_granted_all:tC,permission_granted_camera:fq,permission_granted_motion:dq,permission_denied_any:NU,permission_denied_camera:pq,permission_denied_motion:mq,permission_request_motion:QU,permission_request_camera:zU,permission_request_all:GU,permission_request_ui:kR,permission_request_ui_promise:kR,permission_denied_ui:gq,browser_incompatible:QR.incompatible,browser_incompatible_ui:QR.incompatible_ui,log_level_set:i=>{yq(i),n.impl.log_level_set(i)}}),Su}function hJ(t){return Sp(this,void 0,void 0,function*(){let e=new URL("/assets/face_tracking_model.565855d3.zbin",self.location),i=yield(yield fetch(e.toString())).arrayBuffer();Su==null||Su.face_tracker_model_load_from_memory(t,i)})}const fJ="2.0.0";function dJ(t){return console.log(`Zappar CV v${fJ}`),uJ(t)}const pJ=Object.freeze(Object.defineProperty({__proto__:null,initialize:dJ,get barcode_format_t(){return qM},get face_landmark_name_t(){return JM},get instant_world_tracker_transform_orientation_t(){return KM},get log_level_t(){return $u},get image_target_type_t(){return Za}},Symbol.toStringTag,{value:"Module"})),o1=Ud(pJ),Gb=Ud(sq);var gy={};Object.defineProperty(gy,"__esModule",{value:!0});gy.VERSION=void 0;gy.VERSION="2.0.0";var mJ=Qe&&Qe.__awaiter||function(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(h){o(h)}}function l(u){try{c(i.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(t,e||[])).next())})};Object.defineProperty(tn,"__esModule",{value:!0});tn.loadedPromise=tn.loaded=tn.browserIncompatibleUI=tn.browserIncompatible=tn.drawPlane=tn.projectionMatrixFromCameraModel=tn.invert=tn.cameraDefaultDeviceID=tn.z=tn.setOptions=void 0;const AJ=o1,VR=Gb,gJ=gy;let Pv,qU;function vJ(t){Pv&&console.warn("setOptions called after Zappar JS initialization"),qU=t}tn.setOptions=vJ;function dh(){return Pv||(console.log(`Zappar JS v${gJ.VERSION}`),Pv=AJ.initialize(qU)),Pv}tn.z=dh;function _J(t){return dh().camera_default_device_id(t||!1)}tn.cameraDefaultDeviceID=_J;function yJ(t){const e=VR.mat4.create();return VR.mat4.invert(e,t),e}tn.invert=yJ;function xJ(t,e,n,i=.1,r=100){return dh().projection_matrix_from_camera_model_ext(t,e,n,i,r)}tn.projectionMatrixFromCameraModel=xJ;function EJ(t,e,n,i,r){dh().draw_plane(t,e,n,i,r)}tn.drawPlane=EJ;function wJ(){return dh().browser_incompatible()}tn.browserIncompatible=wJ;function MJ(){dh().browser_incompatible_ui()}tn.browserIncompatibleUI=MJ;function JU(){return dh().loaded()}tn.loaded=JU;function CJ(){return mJ(this,void 0,void 0,function*(){for(;;){if(JU())return;yield SJ(50)}})}tn.loadedPromise=CJ;function SJ(t){return new Promise(e=>setTimeout(e,t))}var bJ=Qe&&Qe.__awaiter||function(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(h){o(h)}}function l(u){try{c(i.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(t,e||[])).next())})};Object.defineProperty(hc,"__esModule",{value:!0});hc.ImageTargetPreview=hc.ImageTarget=hc.ImageTracker=void 0;const V0=Io,IJ=tn;class TJ{constructor(e,n){this._pipeline=e,this.onVisible=new V0.Event1,this.onNotVisible=new V0.Event1,this.onNewAnchor=new V0.Event1,this.visible=new Set,this.anchors=new Map,this._visibleLastFrame=new Set,this._frameUpdate=()=>{const i=new Set,r=this.visible;this.visible=this._visibleLastFrame,this._visibleLastFrame=r,this.visible.clear();const s=this._z.image_tracker_anchor_count(this._impl);for(let o=0;o<s;o++){const a=this._z.image_tracker_anchor_id(this._impl,o);let l=this.anchors.get(a);l||(l={onVisible:new V0.Event,onNotVisible:new V0.Event,id:a,poseCameraRelative:c=>this._z.image_tracker_anchor_pose_camera_relative(this._impl,o,c===!0),pose:(c,u)=>this._z.image_tracker_anchor_pose(this._impl,o,c,u===!0),visible:!0},this.anchors.set(a,l),i.add(l)),l.visible=!0,this.visible.add(l)}for(const o of i)this.onNewAnchor.emit(o);for(const o of this.visible)this._visibleLastFrame.has(o)?this._visibleLastFrame.delete(o):(this.onVisible.emit(o),o.onVisible.emit());for(const o of this._visibleLastFrame)this.onNotVisible.emit(o),o.onNotVisible.emit()},this._pipeline._onFrameUpdateInternal.bind(this._frameUpdate),this._z=IJ.z(),this._impl=this._z.image_tracker_create(this._pipeline._getImpl()),n&&this.loadTarget(n)}destroy(){this._pipeline._onFrameUpdateInternal.unbind(this._frameUpdate),this.anchors.clear(),this.visible.clear(),this._z.image_tracker_destroy(this._impl)}loadTarget(e){return bJ(this,void 0,void 0,function*(){typeof e=="string"&&(e=yield(yield fetch(e)).arrayBuffer()),this._targets=void 0,this._z.image_tracker_target_load_from_memory(this._impl,e)})}get enabled(){return this._z.image_tracker_enabled(this._impl)}set enabled(e){this._z.image_tracker_enabled_set(this._impl,e)}get targets(){if(!this._targets){this._targets=[];const e=this._z.image_tracker_target_count(this._impl);for(let n=0;n<e;n++)this._targets.push(new KU(this._z,this._impl,n))}return this._targets}}hc.ImageTracker=TJ;class KU{constructor(e,n,i){this._z=e,this._impl=n,this._indx=i,this.physicalScaleFactor=this._z.image_tracker_target_physical_scale_factor(this._impl,this._indx),this.physicalScaleFactor<0&&(this.physicalScaleFactor=void 0),this.topRadius=this._z.image_tracker_target_radius_top(this._impl,this._indx),this.topRadius<0&&(this.topRadius=void 0),this.bottomRadius=this._z.image_tracker_target_radius_bottom(this._impl,this._indx),this.bottomRadius<0&&(this.bottomRadius=void 0),this.sideLength=this._z.image_tracker_target_side_length(this._impl,this._indx),this.sideLength<0&&(this.sideLength=void 0)}get image(){return this._image===void 0&&(this._image=this._z.image_tracker_target_image(this._impl,this._indx)||null),this._image||void 0}get preview(){return this._preview===void 0&&(this._preview=new ZU(this._z,this._impl,this._indx)),this._preview}}hc.ImageTarget=KU;class ZU{constructor(e,n,i){this._z=e,this._impl=n,this._indx=i,this.vertices=this._z.image_tracker_target_preview_mesh_vertices(this._impl,this._indx),this.indices=this._z.image_tracker_target_preview_mesh_indices(this._impl,this._indx),this.uvs=this._z.image_tracker_target_preview_mesh_uvs(this._impl,this._indx)}}hc.ImageTargetPreview=ZU;var vy={};Object.defineProperty(vy,"__esModule",{value:!0});vy.InstantWorldTracker=void 0;const BJ=o1,RJ=tn;class PJ{constructor(e){this._pipeline=e,this.anchor={poseCameraRelative:n=>this._anchorPoseCameraRelative(n),pose:(n,i)=>this._anchorPose(n,i)},this._z=RJ.z(),this._impl=this._z.instant_world_tracker_create(this._pipeline._getImpl())}destroy(){this._z.instant_world_tracker_destroy(this._impl)}_anchorPoseCameraRelative(e){return this._z.instant_world_tracker_anchor_pose_camera_relative(this._impl,e===!0)}_anchorPose(e,n){return this._z.instant_world_tracker_anchor_pose(this._impl,e,n===!0)}get enabled(){return this._z.instant_world_tracker_enabled(this._impl)}set enabled(e){this._z.instant_world_tracker_enabled_set(this._impl,e)}setAnchorPoseFromCameraOffset(e,n,i,r){this._z.instant_world_tracker_anchor_pose_set_from_camera_offset(this._impl,e,n,i,r||BJ.instant_world_tracker_transform_orientation_t.MINUS_Z_AWAY_FROM_USER)}}vy.InstantWorldTracker=PJ;var _y={};Object.defineProperty(_y,"__esModule",{value:!0});_y.BarcodeFinder=void 0;const DJ=Io,Gi=o1,FJ=tn;class LJ{constructor(e){this._pipeline=e,this.onDetection=new DJ.Event1,this._lastDetected=[],this._found=[],this._formats=[],this._frameUpdate=()=>{this._found=[];const n=this._z.barcode_finder_found_number(this._impl);for(let i=0;i<n;i++)this._found.push({text:this._z.barcode_finder_found_text(this._impl,i),format:this._z.barcode_finder_found_format(this._impl,i)});if(this._found.length===0)return;e:for(const i of this._found){for(const r of this._lastDetected)if(r.text===i.text)continue e;this.onDetection.emit(i)}this._lastDetected=this._found},this._pipeline._onFrameUpdateInternal.bind(this._frameUpdate),this._z=FJ.z(),this._impl=this._z.barcode_finder_create(this._pipeline._getImpl()),this._formats.push.apply(this._formats,[Gi.barcode_format_t.AZTEC,Gi.barcode_format_t.CODABAR,Gi.barcode_format_t.CODE_39,Gi.barcode_format_t.CODE_93,Gi.barcode_format_t.CODE_128,Gi.barcode_format_t.DATA_MATRIX,Gi.barcode_format_t.EAN_8,Gi.barcode_format_t.EAN_13,Gi.barcode_format_t.ITF,Gi.barcode_format_t.MAXICODE,Gi.barcode_format_t.PDF_417,Gi.barcode_format_t.QR_CODE,Gi.barcode_format_t.RSS_14,Gi.barcode_format_t.RSS_EXPANDED,Gi.barcode_format_t.UPC_A,Gi.barcode_format_t.UPC_E,Gi.barcode_format_t.UPC_EAN_EXTENSION])}destroy(){this._pipeline._onFrameUpdateInternal.unbind(this._frameUpdate),this._found=[],this._lastDetected=[],this._z.barcode_finder_destroy(this._impl)}get found(){return this._found}get enabled(){return this._z.barcode_finder_enabled(this._impl)}set enabled(e){this._z.barcode_finder_enabled_set(this._impl,e)}get formats(){return this._formats}set formats(e){this._formats=e.slice();let n=0;for(const i of this._formats)n|=i;this._z.barcode_finder_formats_set(this._impl,n)}}_y.BarcodeFinder=LJ;var yy={},WR=Qe&&Qe.__awaiter||function(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(h){o(h)}}function l(u){try{c(i.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(t,e||[])).next())})};Object.defineProperty(yy,"__esModule",{value:!0});yy.FaceTracker=void 0;const W0=Io,kJ=tn;class UJ{constructor(e){this._pipeline=e,this.onVisible=new W0.Event1,this.onNotVisible=new W0.Event1,this.onNewAnchor=new W0.Event1,this.visible=new Set,this.anchors=new Map,this._visibleLastFrame=new Set,this._frameUpdate=()=>{const n=new Set,i=this.visible;this.visible=this._visibleLastFrame,this._visibleLastFrame=i,this.visible.clear();const r=this._z.face_tracker_anchor_count(this._impl);for(let s=0;s<r;s++){const o=this._z.face_tracker_anchor_id(this._impl,s);let a=this.anchors.get(o);a||(a={onVisible:new W0.Event,onNotVisible:new W0.Event,indx:0,id:o,poseCameraRelative:l=>this._z.face_tracker_anchor_pose_camera_relative(this._impl,a.indx,l===!0),pose:(l,c)=>this._z.face_tracker_anchor_pose(this._impl,a.indx,l,c===!0),identity:new Float32Array(50),expression:new Float32Array(29),visible:!0},this.anchors.set(o,a),n.add(a)),a.indx=s,a.visible=!0,a.identity=this._z.face_tracker_anchor_identity_coefficients(this._impl,s),a.expression=this._z.face_tracker_anchor_expression_coefficients(this._impl,s),this.visible.add(a)}for(const s of n)this.onNewAnchor.emit(s);for(const s of this.visible)this._visibleLastFrame.has(s)?this._visibleLastFrame.delete(s):(this.onVisible.emit(s),s.onVisible.emit());for(const s of this._visibleLastFrame)this.onNotVisible.emit(s),s.onNotVisible.emit()},this._pipeline._onFrameUpdateInternal.bind(this._frameUpdate),this._z=kJ.z(),this._impl=this._z.face_tracker_create(this._pipeline._getImpl())}destroy(){this._pipeline._onFrameUpdateInternal.unbind(this._frameUpdate),this.anchors.clear(),this.visible.clear(),this._z.face_tracker_destroy(this._impl)}loadModel(e){return WR(this,void 0,void 0,function*(){typeof e=="string"&&(e=yield(yield fetch(e)).arrayBuffer()),this._z.face_tracker_model_load_from_memory(this._impl,e)})}loadDefaultModel(){return WR(this,void 0,void 0,function*(){yield this._z.face_tracker_model_load_default(this._impl)})}get enabled(){return this._z.face_tracker_enabled(this._impl)}set enabled(e){this._z.face_tracker_enabled_set(this._impl,e)}get maxFaces(){return this._z.face_tracker_max_faces(this._impl)}set maxFaces(e){this._z.face_tracker_max_faces_set(this._impl,e)}}yy.FaceTracker=UJ;var xy={},VA=Qe&&Qe.__awaiter||function(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(h){o(h)}}function l(u){try{c(i.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(t,e||[])).next())})};Object.defineProperty(xy,"__esModule",{value:!0});xy.FaceMesh=void 0;const OJ=tn;class NJ{constructor(){this._z=OJ.z(),this._impl=this._z.face_mesh_create()}destroy(){this._z.face_mesh_destroy(this._impl)}load(e,n,i,r,s){return VA(this,void 0,void 0,function*(){if(e)typeof e=="string"&&(e=yield(yield fetch(e)).arrayBuffer());else{this.loadDefault();return}this._z.face_mesh_load_from_memory(this._impl,e,n||!1,i||!1,r||!1,s||!1)})}loadDefault(){return VA(this,void 0,void 0,function*(){yield this._z.face_mesh_load_default(this._impl)})}loadDefaultFace(e,n,i){return VA(this,void 0,void 0,function*(){yield this._z.face_mesh_load_default_face(this._impl,e||!1,n||!1,i||!1)})}loadDefaultFullHeadSimplified(e,n,i,r){return VA(this,void 0,void 0,function*(){yield this._z.face_mesh_load_default_full_head_simplified(this._impl,e||!1,n||!1,i||!1,r||!1)})}updateFromFaceAnchor(e,n){this._z.face_mesh_update(this._impl,e.identity,e.expression,n||!1)}updateFromIdentityExpression(e,n,i){this._z.face_mesh_update(this._impl,e,n,i||!1)}get vertices(){return this._z.face_mesh_vertices(this._impl)}get indices(){return this._z.face_mesh_indices(this._impl)}get uvs(){return this._z.face_mesh_uvs(this._impl)}get normals(){return this._z.face_mesh_normals(this._impl)}_getImpl(){return this._impl}}xy.FaceMesh=NJ;var Ey={};Object.defineProperty(Ey,"__esModule",{value:!0});Ey.CameraSource=void 0;const GJ=tn;class zJ{constructor(e,n){this._z=GJ.z(),this._impl=this._z.camera_source_create(e._getImpl(),n)}destroy(){this._z.camera_source_destroy(this._impl)}start(){this._z.camera_source_start(this._impl)}pause(){this._z.camera_source_pause(this._impl)}}Ey.CameraSource=zJ;var wy={};Object.defineProperty(wy,"__esModule",{value:!0});wy.HTMLElementSource=void 0;const QJ=tn;class HJ{constructor(e,n){this._z=QJ.z(),this._impl=this._z.html_element_source_create(e._getImpl(),n)}destroy(){this._z.html_element_source_destroy(this._impl)}start(){this._z.html_element_source_start(this._impl)}pause(){this._z.html_element_source_pause(this._impl)}}wy.HTMLElementSource=HJ;var My={},VJ=Qe&&Qe.__awaiter||function(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(h){o(h)}}function l(u){try{c(i.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(t,e||[])).next())})};Object.defineProperty(My,"__esModule",{value:!0});My.SequenceSource=void 0;const WJ=tn;class jJ{constructor(e){this._z=WJ.z(),this._impl=this._z.sequence_source_create(e._getImpl())}destroy(){this._z.sequence_source_destroy(this._impl)}start(){this._z.sequence_source_start(this._impl)}pause(){this._z.sequence_source_pause(this._impl)}load(e){return VJ(this,void 0,void 0,function*(){typeof e=="string"&&(e=yield(yield fetch(e)).arrayBuffer()),this._z.sequence_source_load_from_memory(this._impl,e)})}setTime(e){this._z.sequence_source_time_set(this._impl,e!=null?e:-1)}}My.SequenceSource=jJ;var Cy={};Object.defineProperty(Cy,"__esModule",{value:!0});Cy.Pipeline=void 0;const XJ=tn,jR=Io;class YJ{constructor(){this.onFrameUpdate=new jR.Event,this._onFrameUpdateInternal=new jR.Event,this._lastFrameNumber=-1,this._z=XJ.z(),this._impl=this._z.pipeline_create()}destroy(){this._z.pipeline_destroy(this._impl)}frameUpdate(){this._z.pipeline_frame_update(this._impl);const e=this._z.pipeline_frame_number(this._impl);e!==this._lastFrameNumber&&(this._lastFrameNumber=e,this._onFrameUpdateInternal.emit(),this.onFrameUpdate.emit())}_getImpl(){return this._impl}glContextSet(e){this._z.pipeline_gl_context_set(this._impl,e)}glContextLost(){this._z.pipeline_gl_context_lost(this._impl)}cameraFrameTextureGL(){return this._z.pipeline_camera_frame_texture_gl(this._impl)}cameraFrameTextureMatrix(e,n,i){return this._z.pipeline_camera_frame_texture_matrix(this._impl,e,n,i===!0)}cameraFrameDrawGL(e,n,i){this._z.pipeline_camera_frame_draw_gl(this._impl,e,n,i)}cameraFrameUploadGL(){this._z.pipeline_camera_frame_upload_gl(this._impl)}processGL(){this._z.pipeline_process_gl(this._impl)}cameraModel(){return this._z.pipeline_camera_model(this._impl)}cameraPoseDefault(){return this._z.pipeline_camera_pose_default(this._impl)}cameraPoseWithAttitude(e){return this._z.pipeline_camera_pose_with_attitude(this._impl,e||!1)}cameraPoseWithOrigin(e){return this._z.pipeline_camera_pose_with_origin(this._impl,e)}cameraFrameUserFacing(){return this._z.pipeline_camera_frame_user_facing(this._impl)}drawFace(e,n,i,r){this._z.pipeline_draw_face(this._impl,e,n,i,r._getImpl())}frameNumber(){return this._z.pipeline_frame_number(this._impl)}sequenceRecordStart(e){e===void 0&&(e=30*5),this._z.pipeline_sequence_record_start(this._impl,e)}sequenceRecordStop(){this._z.pipeline_sequence_record_stop(this._impl)}sequenceRecordClear(){this._z.pipeline_sequence_record_clear(this._impl)}sequenceRecordData(){return this._z.pipeline_sequence_record_data(this._impl)}}Cy.Pipeline=YJ;var $U={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.FaceLandmark=t.FaceLandmarkName=void 0;const e=tn,n=Gb;var i=o1;Object.defineProperty(t,"FaceLandmarkName",{enumerable:!0,get:function(){return i.face_landmark_name_t}});class r{constructor(o){this._name=o,this.pose=n.mat4.create(),this._z=e.z(),this._impl=this._z.face_landmark_create(this._name)}destroy(){this._z.face_landmark_destroy(this._impl)}updateFromFaceAnchor(o,a){this._z.face_landmark_update(this._impl,o.identity,o.expression,a||!1),this.pose=this._z.face_landmark_anchor_pose(this._impl)}updateFromIdentityExpression(o,a,l){this._z.face_landmark_update(this._impl,o,a,l||!1),this.pose=this._z.face_landmark_anchor_pose(this._impl)}_getImpl(){return this._impl}}t.FaceLandmark=r})($U);var eO={};(function(t){var e=Qe&&Qe.__awaiter||function(u,h,f,d){function p(m){return m instanceof f?m:new f(function(g){g(m)})}return new(f||(f=Promise))(function(m,g){function _(E){try{x(d.next(E))}catch(w){g(w)}}function y(E){try{x(d.throw(E))}catch(w){g(w)}}function x(E){E.done?m(E.value):p(E.value).then(_,y)}x((d=d.apply(u,h||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.permissionDeniedUI=t.permissionRequestUI=t.permissionRequest=t.permissionDenied=t.permissionGranted=t.Permission=void 0;const n=tn;var i;(function(u){u[u.CAMERA=0]="CAMERA",u[u.MOTION=1]="MOTION"})(i=t.Permission||(t.Permission={}));function r(u){switch(u){case i.CAMERA:return n.z().permission_granted_camera();case i.MOTION:return n.z().permission_granted_motion();default:return n.z().permission_granted_all()}}t.permissionGranted=r;function s(u){switch(u){case i.CAMERA:return n.z().permission_denied_camera();case i.MOTION:return n.z().permission_denied_motion();default:return n.z().permission_denied_any()}}t.permissionDenied=s;function o(u){switch(u){case i.CAMERA:n.z().permission_request_camera();break;case i.MOTION:n.z().permission_request_motion();break;default:n.z().permission_request_all();break}return new Promise(h=>e(this,void 0,void 0,function*(){for(;;)switch(yield c(),u){case i.CAMERA:if(n.z().permission_granted_camera()){h(!0);return}if(n.z().permission_denied_camera()){h(!1);return}break;case i.MOTION:if(n.z().permission_granted_motion()){h(!0);return}if(n.z().permission_denied_motion()){h(!1);return}break;default:if(n.z().permission_granted_camera()&&n.z().permission_granted_motion()){h(!0);return}if(n.z().permission_denied_camera()||n.z().permission_denied_motion()){h(!1);return}break}}))}t.permissionRequest=o;function a(){return e(this,void 0,void 0,function*(){return yield n.z().permission_request_ui_promise()})}t.permissionRequestUI=a;function l(){return n.z().permission_denied_ui()}t.permissionDeniedUI=l;function c(){return new Promise(u=>requestAnimationFrame(()=>u()))}})(eO);var tO={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.setLogLevel=t.logLevel=t.LogLevel=void 0;const e=tn;var n=o1;Object.defineProperty(t,"LogLevel",{enumerable:!0,get:function(){return n.log_level_t}});function i(){return e.z().log_level()}t.logLevel=i;function r(s){e.z().log_level_set(s)}t.setLogLevel=r})(tO);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.loadedPromise=t.loaded=t.browserIncompatibleUI=t.browserIncompatible=t.projectionMatrixFromCameraModel=t.drawPlane=t.invert=t.cameraDefaultDeviceID=t.Event1=t.Event=t.logLevel=t.setLogLevel=t.LogLevel=t.Permission=t.permissionRequestUI=t.permissionRequest=t.permissionDenied=t.permissionGranted=t.permissionDeniedUI=t.FaceLandmark=t.FaceLandmarkName=t.Pipeline=t.SequenceSource=t.HTMLElementSource=t.CameraSource=t.FaceMesh=t.FaceTracker=t.BarcodeFinder=t.InstantWorldTracker=t.ImageTracker=void 0;var e=hc;Object.defineProperty(t,"ImageTracker",{enumerable:!0,get:function(){return e.ImageTracker}});var n=vy;Object.defineProperty(t,"InstantWorldTracker",{enumerable:!0,get:function(){return n.InstantWorldTracker}});var i=_y;Object.defineProperty(t,"BarcodeFinder",{enumerable:!0,get:function(){return i.BarcodeFinder}});var r=yy;Object.defineProperty(t,"FaceTracker",{enumerable:!0,get:function(){return r.FaceTracker}});var s=xy;Object.defineProperty(t,"FaceMesh",{enumerable:!0,get:function(){return s.FaceMesh}});var o=Ey;Object.defineProperty(t,"CameraSource",{enumerable:!0,get:function(){return o.CameraSource}});var a=wy;Object.defineProperty(t,"HTMLElementSource",{enumerable:!0,get:function(){return a.HTMLElementSource}});var l=My;Object.defineProperty(t,"SequenceSource",{enumerable:!0,get:function(){return l.SequenceSource}});var c=Cy;Object.defineProperty(t,"Pipeline",{enumerable:!0,get:function(){return c.Pipeline}});var u=$U;Object.defineProperty(t,"FaceLandmarkName",{enumerable:!0,get:function(){return u.FaceLandmarkName}}),Object.defineProperty(t,"FaceLandmark",{enumerable:!0,get:function(){return u.FaceLandmark}});var h=eO;Object.defineProperty(t,"permissionDeniedUI",{enumerable:!0,get:function(){return h.permissionDeniedUI}}),Object.defineProperty(t,"permissionGranted",{enumerable:!0,get:function(){return h.permissionGranted}}),Object.defineProperty(t,"permissionDenied",{enumerable:!0,get:function(){return h.permissionDenied}}),Object.defineProperty(t,"permissionRequest",{enumerable:!0,get:function(){return h.permissionRequest}}),Object.defineProperty(t,"permissionRequestUI",{enumerable:!0,get:function(){return h.permissionRequestUI}}),Object.defineProperty(t,"Permission",{enumerable:!0,get:function(){return h.Permission}});var f=tO;Object.defineProperty(t,"LogLevel",{enumerable:!0,get:function(){return f.LogLevel}}),Object.defineProperty(t,"setLogLevel",{enumerable:!0,get:function(){return f.setLogLevel}}),Object.defineProperty(t,"logLevel",{enumerable:!0,get:function(){return f.logLevel}});var d=Io;Object.defineProperty(t,"Event",{enumerable:!0,get:function(){return d.Event}}),Object.defineProperty(t,"Event1",{enumerable:!0,get:function(){return d.Event1}});var p=tn;Object.defineProperty(t,"cameraDefaultDeviceID",{enumerable:!0,get:function(){return p.cameraDefaultDeviceID}}),Object.defineProperty(t,"invert",{enumerable:!0,get:function(){return p.invert}}),Object.defineProperty(t,"drawPlane",{enumerable:!0,get:function(){return p.drawPlane}}),Object.defineProperty(t,"projectionMatrixFromCameraModel",{enumerable:!0,get:function(){return p.projectionMatrixFromCameraModel}}),Object.defineProperty(t,"browserIncompatible",{enumerable:!0,get:function(){return p.browserIncompatible}}),Object.defineProperty(t,"browserIncompatibleUI",{enumerable:!0,get:function(){return p.browserIncompatibleUI}}),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return p.loaded}}),Object.defineProperty(t,"loadedPromise",{enumerable:!0,get:function(){return p.loadedPromise}})})(fh);var fi={},V={};/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */Object.defineProperty(V,"__esModule",{value:!0});const Sy="145",qJ={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},JJ={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},nO=0,nC=1,iO=2,KJ=3,ZJ=0,zb=1,rO=2,Vf=3,th=0,ds=1,ja=2,$a=0,Uu=1,iC=2,rC=3,sC=4,sO=5,vu=100,oO=101,aO=102,oC=103,aC=104,lO=200,cO=201,uO=202,hO=203,Qb=204,Hb=205,fO=206,dO=207,pO=208,mO=209,AO=210,gO=0,vO=1,_O=2,I_=3,yO=4,xO=5,EO=6,wO=7,a1=0,MO=1,CO=2,aa=0,SO=1,bO=2,IO=3,TO=4,BO=5,by=300,vc=301,_c=302,wm=303,Mm=304,Hd=306,Cm=1e3,Sr=1001,Sm=1002,ui=1003,T_=1004,$J=1004,B_=1005,eK=1005,ni=1006,Vb=1007,tK=1007,ph=1008,nK=1008,yc=1009,RO=1010,PO=1011,Wb=1012,DO=1013,Jl=1014,Xa=1015,Md=1016,FO=1017,LO=1018,Ou=1020,kO=1021,UO=1022,Xs=1023,OO=1024,NO=1025,fc=1026,nh=1027,GO=1028,zO=1029,QO=1030,HO=1031,VO=1033,Dv=33776,Fv=33777,Lv=33778,kv=33779,lC=35840,cC=35841,uC=35842,hC=35843,WO=36196,fC=37492,dC=37496,pC=37808,mC=37809,AC=37810,gC=37811,vC=37812,_C=37813,yC=37814,xC=37815,EC=37816,wC=37817,MC=37818,CC=37819,SC=37820,bC=37821,IC=36492,jO=2200,XO=2201,YO=2202,bm=2300,Im=2301,Uv=2302,bu=2400,Iu=2401,Tm=2402,Iy=2500,jb=2501,iK=0,rK=1,sK=2,xc=3e3,Ln=3001,qO=3200,JO=3201,Tc=0,KO=1,oK="",qo="srgb",Kl="srgb-linear",aK=0,Ov=7680,lK=7681,cK=7682,uK=7683,hK=34055,fK=34056,dK=5386,pK=512,mK=513,AK=514,gK=515,vK=516,_K=517,yK=518,ZO=519,Bm=35044,xK=35048,EK=35040,wK=35045,MK=35049,CK=35041,SK=35046,bK=35050,IK=35042,TK="100",TC="300 es",R_=1035;class hl{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(n)===-1&&i[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(n);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const or=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let XR=1234567;const Nu=Math.PI/180,Rm=180/Math.PI;function ps(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(or[t&255]+or[t>>8&255]+or[t>>16&255]+or[t>>24&255]+"-"+or[e&255]+or[e>>8&255]+"-"+or[e>>16&15|64]+or[e>>24&255]+"-"+or[n&63|128]+or[n>>8&255]+"-"+or[n>>16&255]+or[n>>24&255]+or[i&255]+or[i>>8&255]+or[i>>16&255]+or[i>>24&255]).toLowerCase()}function ii(t,e,n){return Math.max(e,Math.min(n,t))}function Xb(t,e){return(t%e+e)%e}function BK(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)}function RK(t,e,n){return t!==e?(n-t)/(e-t):0}function Vp(t,e,n){return(1-n)*t+n*e}function PK(t,e,n,i){return Vp(t,e,1-Math.exp(-n*i))}function DK(t,e=1){return e-Math.abs(Xb(t,e*2)-e)}function FK(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function LK(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function kK(t,e){return t+Math.floor(Math.random()*(e-t+1))}function UK(t,e){return t+Math.random()*(e-t)}function OK(t){return t*(.5-Math.random())}function NK(t){t!==void 0&&(XR=t);let e=XR+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function GK(t){return t*Nu}function zK(t){return t*Rm}function BC(t){return(t&t-1)===0&&t!==0}function $O(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function P_(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function QK(t,e,n,i,r){const s=Math.cos,o=Math.sin,a=s(n/2),l=o(n/2),c=s((e+i)/2),u=o((e+i)/2),h=s((e-i)/2),f=o((e-i)/2),d=s((i-e)/2),p=o((i-e)/2);switch(r){case"XYX":t.set(a*u,l*h,l*f,a*c);break;case"YZY":t.set(l*f,a*u,l*h,a*c);break;case"ZXZ":t.set(l*h,l*f,a*u,a*c);break;case"XZX":t.set(a*u,l*p,l*d,a*c);break;case"YXY":t.set(l*d,a*u,l*p,a*c);break;case"ZYZ":t.set(l*p,l*d,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Ya(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function xn(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}var HK=Object.freeze({__proto__:null,DEG2RAD:Nu,RAD2DEG:Rm,generateUUID:ps,clamp:ii,euclideanModulo:Xb,mapLinear:BK,inverseLerp:RK,lerp:Vp,damp:PK,pingpong:DK,smoothstep:FK,smootherstep:LK,randInt:kK,randFloat:UK,randFloatSpread:OK,seededRandom:NK,degToRad:GK,radToDeg:zK,isPowerOfTwo:BC,ceilPowerOfTwo:$O,floorPowerOfTwo:P_,setQuaternionFromProperEuler:QK,normalize:xn,denormalize:Ya});class Ve{constructor(e=0,n=0){Ve.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,i=this.y,r=e.elements;return this.x=r[0]*n+r[3]*i+r[6],this.y=r[1]*n+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y;return n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const i=Math.cos(n),r=Math.sin(n),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Wr{constructor(){Wr.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,n,i,r,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=n,u[4]=s,u[5]=l,u[6]=i,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],this}extractBasis(e,n,i){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,r=n.elements,s=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],u=i[4],h=i[7],f=i[2],d=i[5],p=i[8],m=r[0],g=r[3],_=r[6],y=r[1],x=r[4],E=r[7],w=r[2],S=r[5],b=r[8];return s[0]=o*m+a*y+l*w,s[3]=o*g+a*x+l*S,s[6]=o*_+a*E+l*b,s[1]=c*m+u*y+h*w,s[4]=c*g+u*x+h*S,s[7]=c*_+u*E+h*b,s[2]=f*m+d*y+p*w,s[5]=f*g+d*x+p*S,s[8]=f*_+d*E+p*b,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return n*o*u-n*a*c-i*s*u+i*a*l+r*s*c-r*o*l}invert(){const e=this.elements,n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=u*o-a*c,f=a*l-u*s,d=c*s-o*l,p=n*h+i*f+r*d;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);const m=1/p;return e[0]=h*m,e[1]=(r*c-u*i)*m,e[2]=(a*i-r*o)*m,e[3]=f*m,e[4]=(u*n-r*l)*m,e[5]=(r*s-a*n)*m,e[6]=d*m,e[7]=(i*l-c*n)*m,e[8]=(o*n-i*s)*m,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,i,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+n,0,0,1),this}scale(e,n){const i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=n,i[4]*=n,i[7]*=n,this}rotate(e){const n=Math.cos(e),i=Math.sin(e),r=this.elements,s=r[0],o=r[3],a=r[6],l=r[1],c=r[4],u=r[7];return r[0]=n*s+i*l,r[3]=n*o+i*c,r[6]=n*a+i*u,r[1]=-i*s+n*l,r[4]=-i*o+n*c,r[7]=-i*a+n*u,this}translate(e,n){const i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=n*i[2],i[4]+=n*i[5],i[7]+=n*i[8],this}equals(e){const n=this.elements,i=e.elements;for(let r=0;r<9;r++)if(n[r]!==i[r])return!1;return!0}fromArray(e,n=0){for(let i=0;i<9;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}function e8(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}const VK={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Wf(t,e){return new VK[t](e)}function Pm(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function Gu(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function Nv(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}const aE={[qo]:{[Kl]:Gu},[Kl]:{[qo]:Nv}},ks={legacyMode:!0,get workingColorSpace(){return Kl},set workingColorSpace(t){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(t,e,n){if(this.legacyMode||e===n||!e||!n)return t;if(aE[e]&&aE[e][n]!==void 0){const i=aE[e][n];return t.r=i(t.r),t.g=i(t.g),t.b=i(t.b),t}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)}},t8={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},gi={r:0,g:0,b:0},oo={h:0,s:0,l:0},WA={h:0,s:0,l:0};function lE(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}function jA(t,e){return e.r=t.r,e.g=t.g,e.b=t.b,e}class ot{constructor(e,n,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,n===void 0&&i===void 0?this.set(e):this.setRGB(e,n,i)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=qo){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,ks.toWorkingColorSpace(this,n),this}setRGB(e,n,i,r=Kl){return this.r=e,this.g=n,this.b=i,ks.toWorkingColorSpace(this,r),this}setHSL(e,n,i,r=Kl){if(e=Xb(e,1),n=ii(n,0,1),i=ii(i,0,1),n===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+n):i+n-i*n,o=2*i-s;this.r=lE(o,s,e+1/3),this.g=lE(o,s,e),this.b=lE(o,s,e-1/3)}return ks.toWorkingColorSpace(this,r),this}setStyle(e,n=qo){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,ks.toWorkingColorSpace(this,n),i(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,ks.toWorkingColorSpace(this,n),i(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const l=parseFloat(s[1])/360,c=parseFloat(s[2])/100,u=parseFloat(s[3])/100;return i(s[4]),this.setHSL(l,c,u,n)}break}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,ks.toWorkingColorSpace(this,n),this;if(o===6)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,ks.toWorkingColorSpace(this,n),this}return e&&e.length>0?this.setColorName(e,n):this}setColorName(e,n=qo){const i=t8[e.toLowerCase()];return i!==void 0?this.setHex(i,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Gu(e.r),this.g=Gu(e.g),this.b=Gu(e.b),this}copyLinearToSRGB(e){return this.r=Nv(e.r),this.g=Nv(e.g),this.b=Nv(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=qo){return ks.fromWorkingColorSpace(jA(this,gi),e),ii(gi.r*255,0,255)<<16^ii(gi.g*255,0,255)<<8^ii(gi.b*255,0,255)<<0}getHexString(e=qo){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=Kl){ks.fromWorkingColorSpace(jA(this,gi),n);const i=gi.r,r=gi.g,s=gi.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const h=o-a;switch(c=u<=.5?h/(o+a):h/(2-o-a),o){case i:l=(r-s)/h+(r<s?6:0);break;case r:l=(s-i)/h+2;break;case s:l=(i-r)/h+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,n=Kl){return ks.fromWorkingColorSpace(jA(this,gi),n),e.r=gi.r,e.g=gi.g,e.b=gi.b,e}getStyle(e=qo){return ks.fromWorkingColorSpace(jA(this,gi),e),e!==qo?`color(${e} ${gi.r} ${gi.g} ${gi.b})`:`rgb(${gi.r*255|0},${gi.g*255|0},${gi.b*255|0})`}offsetHSL(e,n,i){return this.getHSL(oo),oo.h+=e,oo.s+=n,oo.l+=i,this.setHSL(oo.h,oo.s,oo.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,i){return this.r=e.r+(n.r-e.r)*i,this.g=e.g+(n.g-e.g)*i,this.b=e.b+(n.b-e.b)*i,this}lerpHSL(e,n){this.getHSL(oo),e.getHSL(WA);const i=Vp(oo.h,WA.h,n),r=Vp(oo.s,WA.s,n),s=Vp(oo.l,WA.l,n);return this.setHSL(i,r,s),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}ot.NAMES=t8;let Xh;class Yb{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{Xh===void 0&&(Xh=Pm("canvas")),Xh.width=e.width,Xh.height=e.height;const i=Xh.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),n=Xh}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=Pm("canvas");n.width=e.width,n.height=e.height;const i=n.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=Gu(s[o]/255)*255;return i.putImageData(r,0,0),n}else if(e.data){const n=e.data.slice(0);for(let i=0;i<n.length;i++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[i]=Math.floor(Gu(n[i]/255)*255):n[i]=Gu(n[i]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class Tu{constructor(e=null){this.isSource=!0,this.uuid=ps(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(cE(r[o].image)):s.push(cE(r[o]))}else s=cE(r);i.url=s}return n||(e.images[this.uuid]=i),i}}function cE(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?Yb.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let WK=0;class xi extends hl{constructor(e=xi.DEFAULT_IMAGE,n=xi.DEFAULT_MAPPING,i=Sr,r=Sr,s=ni,o=ph,a=Xs,l=yc,c=1,u=xc){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:WK++}),this.uuid=ps(),this.name="",this.source=new Tu(e),this.mipmaps=[],this.mapping=n,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Ve(0,0),this.repeat=new Ve(1,1),this.center=new Ve(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Wr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),n||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==by)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Cm:e.x=e.x-Math.floor(e.x);break;case Sr:e.x=e.x<0?0:1;break;case Sm:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Cm:e.y=e.y-Math.floor(e.y);break;case Sr:e.y=e.y<0?0:1;break;case Sm:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}xi.DEFAULT_IMAGE=null;xi.DEFAULT_MAPPING=by;class An{constructor(e=0,n=0,i=0,r=1){An.prototype.isVector4=!0,this.x=e,this.y=n,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,i,r){return this.x=e,this.y=n,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*n+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*n+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*n+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*n+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,i,r,s;const l=e.elements,c=l[0],u=l[4],h=l[8],f=l[1],d=l[5],p=l[9],m=l[2],g=l[6],_=l[10];if(Math.abs(u-f)<.01&&Math.abs(h-m)<.01&&Math.abs(p-g)<.01){if(Math.abs(u+f)<.1&&Math.abs(h+m)<.1&&Math.abs(p+g)<.1&&Math.abs(c+d+_-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const x=(c+1)/2,E=(d+1)/2,w=(_+1)/2,S=(u+f)/4,b=(h+m)/4,M=(p+g)/4;return x>E&&x>w?x<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(x),r=S/i,s=b/i):E>w?E<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(E),i=S/r,s=M/r):w<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(w),i=b/s,r=M/s),this.set(i,r,s,n),this}let y=Math.sqrt((g-p)*(g-p)+(h-m)*(h-m)+(f-u)*(f-u));return Math.abs(y)<.001&&(y=1),this.x=(g-p)/y,this.y=(h-m)/y,this.z=(f-u)/y,this.w=Math.acos((c+d+_-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this.w=e.w+(n.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class eo extends hl{constructor(e,n,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new An(0,0,e,n),this.scissorTest=!1,this.viewport=new An(0,0,e,n);const r={width:e,height:n,depth:1};this.texture=new xi(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:ni,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null,this.samples=i.samples!==void 0?i.samples:0}setSize(e,n,i=1){(this.width!==e||this.height!==n||this.depth!==i)&&(this.width=e,this.height=n,this.depth=i,this.texture.image.width=e,this.texture.image.height=n,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new Tu(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class l1 extends xi{constructor(e=null,n=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:i,depth:r},this.magFilter=ui,this.minFilter=ui,this.wrapR=Sr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class jK extends eo{constructor(e,n,i){super(e,n),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new l1(null,e,n,i),this.texture.isRenderTargetTexture=!0}}class Ty extends xi{constructor(e=null,n=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:i,depth:r},this.magFilter=ui,this.minFilter=ui,this.wrapR=Sr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class XK extends eo{constructor(e,n,i){super(e,n),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new Ty(null,e,n,i),this.texture.isRenderTargetTexture=!0}}class YK extends eo{constructor(e,n,i,r={}){super(e,n,r),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<i;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,n,i=1){if(this.width!==e||this.height!==n||this.depth!==i){this.width=e,this.height=n,this.depth=i;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=e,this.texture[r].image.height=n,this.texture[r].image.depth=i;this.dispose()}return this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let n=0,i=e.texture.length;n<i;n++)this.texture[n]=e.texture[n].clone(),this.texture[n].isRenderTargetTexture=!0;return this}}class qr{constructor(e=0,n=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=i,this._w=r}static slerpFlat(e,n,i,r,s,o,a){let l=i[r+0],c=i[r+1],u=i[r+2],h=i[r+3];const f=s[o+0],d=s[o+1],p=s[o+2],m=s[o+3];if(a===0){e[n+0]=l,e[n+1]=c,e[n+2]=u,e[n+3]=h;return}if(a===1){e[n+0]=f,e[n+1]=d,e[n+2]=p,e[n+3]=m;return}if(h!==m||l!==f||c!==d||u!==p){let g=1-a;const _=l*f+c*d+u*p+h*m,y=_>=0?1:-1,x=1-_*_;if(x>Number.EPSILON){const w=Math.sqrt(x),S=Math.atan2(w,_*y);g=Math.sin(g*S)/w,a=Math.sin(a*S)/w}const E=a*y;if(l=l*g+f*E,c=c*g+d*E,u=u*g+p*E,h=h*g+m*E,g===1-a){const w=1/Math.sqrt(l*l+c*c+u*u+h*h);l*=w,c*=w,u*=w,h*=w}}e[n]=l,e[n+1]=c,e[n+2]=u,e[n+3]=h}static multiplyQuaternionsFlat(e,n,i,r,s,o){const a=i[r],l=i[r+1],c=i[r+2],u=i[r+3],h=s[o],f=s[o+1],d=s[o+2],p=s[o+3];return e[n]=a*p+u*h+l*d-c*f,e[n+1]=l*p+u*f+c*h-a*d,e[n+2]=c*p+u*d+a*f-l*h,e[n+3]=u*p-a*h-l*f-c*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,i,r){return this._x=e,this._y=n,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(i/2),u=a(r/2),h=a(s/2),f=l(i/2),d=l(r/2),p=l(s/2);switch(o){case"XYZ":this._x=f*u*h+c*d*p,this._y=c*d*h-f*u*p,this._z=c*u*p+f*d*h,this._w=c*u*h-f*d*p;break;case"YXZ":this._x=f*u*h+c*d*p,this._y=c*d*h-f*u*p,this._z=c*u*p-f*d*h,this._w=c*u*h+f*d*p;break;case"ZXY":this._x=f*u*h-c*d*p,this._y=c*d*h+f*u*p,this._z=c*u*p+f*d*h,this._w=c*u*h-f*d*p;break;case"ZYX":this._x=f*u*h-c*d*p,this._y=c*d*h+f*u*p,this._z=c*u*p-f*d*h,this._w=c*u*h+f*d*p;break;case"YZX":this._x=f*u*h+c*d*p,this._y=c*d*h+f*u*p,this._z=c*u*p-f*d*h,this._w=c*u*h-f*d*p;break;case"XZY":this._x=f*u*h-c*d*p,this._y=c*d*h-f*u*p,this._z=c*u*p+f*d*h,this._w=c*u*h+f*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return n!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const i=n/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,i=n[0],r=n[4],s=n[8],o=n[1],a=n[5],l=n[9],c=n[2],u=n[6],h=n[10],f=i+a+h;if(f>0){const d=.5/Math.sqrt(f+1);this._w=.25/d,this._x=(u-l)*d,this._y=(s-c)*d,this._z=(o-r)*d}else if(i>a&&i>h){const d=2*Math.sqrt(1+i-a-h);this._w=(u-l)/d,this._x=.25*d,this._y=(r+o)/d,this._z=(s+c)/d}else if(a>h){const d=2*Math.sqrt(1+a-i-h);this._w=(s-c)/d,this._x=(r+o)/d,this._y=.25*d,this._z=(l+u)/d}else{const d=2*Math.sqrt(1+h-i-a);this._w=(o-r)/d,this._x=(s+c)/d,this._y=(l+u)/d,this._z=.25*d}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let i=e.dot(n)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(ii(this.dot(e),-1,1)))}rotateTowards(e,n){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,n/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const i=e._x,r=e._y,s=e._z,o=e._w,a=n._x,l=n._y,c=n._z,u=n._w;return this._x=i*u+o*a+r*c-s*l,this._y=r*u+o*l+s*a-i*c,this._z=s*u+o*c+i*l-r*a,this._w=o*u-i*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const d=1-n;return this._w=d*o+n*this._w,this._x=d*i+n*this._x,this._y=d*r+n*this._y,this._z=d*s+n*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),h=Math.sin((1-n)*u)/c,f=Math.sin(n*u)/c;return this._w=o*h+this._w*f,this._x=i*h+this._x*f,this._y=r*h+this._y*f,this._z=s*h+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,n,i){return this.copy(e).slerp(n,i)}random(){const e=Math.random(),n=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(n*Math.cos(r),i*Math.sin(s),i*Math.cos(s),n*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class te{constructor(e=0,n=0,i=0){te.prototype.isVector3=!0,this.x=e,this.y=n,this.z=i}set(e,n,i){return i===void 0&&(i=this.z),this.x=e,this.y=n,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(YR.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(YR.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*n+s[3]*i+s[6]*r,this.y=s[1]*n+s[4]*i+s[7]*r,this.z=s[2]*n+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*n+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*n+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*n+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*n+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const n=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=l*n+o*r-a*i,u=l*i+a*n-s*r,h=l*r+s*i-o*n,f=-s*n-o*i-a*r;return this.x=c*l+f*-s+u*-a-h*-o,this.y=u*l+f*-o+h*-s-c*-a,this.z=h*l+f*-a+c*-o-u*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*n+s[4]*i+s[8]*r,this.y=s[1]*n+s[5]*i+s[9]*r,this.z=s[2]*n+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const i=e.x,r=e.y,s=e.z,o=n.x,a=n.y,l=n.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const i=e.dot(this)/n;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return uE.copy(this).projectOnVector(e),this.sub(uE)}reflect(e){return this.sub(uE.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(e)/n;return Math.acos(ii(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return n*n+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,i){const r=Math.sin(n)*e;return this.x=r*Math.sin(i),this.y=Math.cos(n)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,i){return this.x=e*Math.sin(n),this.y=i,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=i,this.z=r,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,n=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(n),this.y=i*Math.sin(n),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const uE=new te,YR=new qr;class mh{constructor(e=new te(1/0,1/0,1/0),n=new te(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){let n=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=e.length;l<c;l+=3){const u=e[l],h=e[l+1],f=e[l+2];u<n&&(n=u),h<i&&(i=h),f<r&&(r=f),u>s&&(s=u),h>o&&(o=h),f>a&&(a=f)}return this.min.set(n,i,r),this.max.set(s,o,a),this}setFromBufferAttribute(e){let n=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=e.count;l<c;l++){const u=e.getX(l),h=e.getY(l),f=e.getZ(l);u<n&&(n=u),h<i&&(i=h),f<r&&(r=f),u>s&&(s=u),h>o&&(o=h),f>a&&(a=f)}return this.min.set(n,i,r),this.max.set(s,o,a),this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=Kc.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0)if(n&&i.attributes!=null&&i.attributes.position!==void 0){const s=i.attributes.position;for(let o=0,a=s.count;o<a;o++)Kc.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(Kc)}else i.boundingBox===null&&i.computeBoundingBox(),hE.copy(i.boundingBox),hE.applyMatrix4(e.matrixWorld),this.union(hE);const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],n);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Kc),Kc.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,i;return e.normal.x>0?(n=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),n<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(j0),XA.subVectors(this.max,j0),Yh.subVectors(e.a,j0),qh.subVectors(e.b,j0),Jh.subVectors(e.c,j0),Il.subVectors(qh,Yh),Tl.subVectors(Jh,qh),Zc.subVectors(Yh,Jh);let n=[0,-Il.z,Il.y,0,-Tl.z,Tl.y,0,-Zc.z,Zc.y,Il.z,0,-Il.x,Tl.z,0,-Tl.x,Zc.z,0,-Zc.x,-Il.y,Il.x,0,-Tl.y,Tl.x,0,-Zc.y,Zc.x,0];return!fE(n,Yh,qh,Jh,XA)||(n=[1,0,0,0,1,0,0,0,1],!fE(n,Yh,qh,Jh,XA))?!1:(YA.crossVectors(Il,Tl),n=[YA.x,YA.y,YA.z],fE(n,Yh,qh,Jh,XA))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Kc.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(Kc).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Sa[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Sa[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Sa[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Sa[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Sa[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Sa[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Sa[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Sa[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Sa),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Sa=[new te,new te,new te,new te,new te,new te,new te,new te],Kc=new te,hE=new mh,Yh=new te,qh=new te,Jh=new te,Il=new te,Tl=new te,Zc=new te,j0=new te,XA=new te,YA=new te,$c=new te;function fE(t,e,n,i,r){for(let s=0,o=t.length-3;s<=o;s+=3){$c.fromArray(t,s);const a=r.x*Math.abs($c.x)+r.y*Math.abs($c.y)+r.z*Math.abs($c.z),l=e.dot($c),c=n.dot($c),u=i.dot($c);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const qK=new mh,qR=new te,qA=new te,dE=new te;class Ah{constructor(e=new te,n=-1){this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const i=this.center;n!==void 0?i.copy(n):qK.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const i=this.center.distanceToSquared(e);return n.copy(e),i>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;dE.subVectors(e,this.center);const n=dE.lengthSq();if(n>this.radius*this.radius){const i=Math.sqrt(n),r=(i-this.radius)*.5;this.center.add(dE.multiplyScalar(r/i)),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?qA.set(0,0,1).multiplyScalar(e.radius):qA.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(qR.copy(e.center).add(qA)),this.expandByPoint(qR.copy(e.center).sub(qA)),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const ba=new te,pE=new te,JA=new te,Bl=new te,mE=new te,KA=new te,AE=new te;class c1{constructor(e=new te,n=new te(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ba)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const i=n.dot(this.direction);return i<0?n.copy(this.origin):n.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=ba.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(ba.copy(this.direction).multiplyScalar(n).add(this.origin),ba.distanceToSquared(e))}distanceSqToSegment(e,n,i,r){pE.copy(e).add(n).multiplyScalar(.5),JA.copy(n).sub(e).normalize(),Bl.copy(this.origin).sub(pE);const s=e.distanceTo(n)*.5,o=-this.direction.dot(JA),a=Bl.dot(this.direction),l=-Bl.dot(JA),c=Bl.lengthSq(),u=Math.abs(1-o*o);let h,f,d,p;if(u>0)if(h=o*l-a,f=o*a-l,p=s*u,h>=0)if(f>=-p)if(f<=p){const m=1/u;h*=m,f*=m,d=h*(h+o*f+2*a)+f*(o*h+f+2*l)+c}else f=s,h=Math.max(0,-(o*f+a)),d=-h*h+f*(f+2*l)+c;else f=-s,h=Math.max(0,-(o*f+a)),d=-h*h+f*(f+2*l)+c;else f<=-p?(h=Math.max(0,-(-o*s+a)),f=h>0?-s:Math.min(Math.max(-s,-l),s),d=-h*h+f*(f+2*l)+c):f<=p?(h=0,f=Math.min(Math.max(-s,-l),s),d=f*(f+2*l)+c):(h=Math.max(0,-(o*s+a)),f=h>0?s:Math.min(Math.max(-s,-l),s),d=-h*h+f*(f+2*l)+c);else f=o>0?-s:s,h=Math.max(0,-(o*f+a)),d=-h*h+f*(f+2*l)+c;return i&&i.copy(this.direction).multiplyScalar(h).add(this.origin),r&&r.copy(JA).multiplyScalar(f).add(pE),d}intersectSphere(e,n){ba.subVectors(e.center,this.origin);const i=ba.dot(this.direction),r=ba.dot(ba)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return a<0&&l<0?null:a<0?this.at(l,n):this.at(a,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/n;return i>=0?i:null}intersectPlane(e,n){const i=this.distanceToPlane(e);return i===null?null:this.at(i,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let i,r,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,h=1/this.direction.z,f=this.origin;return c>=0?(i=(e.min.x-f.x)*c,r=(e.max.x-f.x)*c):(i=(e.max.x-f.x)*c,r=(e.min.x-f.x)*c),u>=0?(s=(e.min.y-f.y)*u,o=(e.max.y-f.y)*u):(s=(e.max.y-f.y)*u,o=(e.min.y-f.y)*u),i>o||s>r||((s>i||i!==i)&&(i=s),(o<r||r!==r)&&(r=o),h>=0?(a=(e.min.z-f.z)*h,l=(e.max.z-f.z)*h):(a=(e.max.z-f.z)*h,l=(e.min.z-f.z)*h),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,n)}intersectsBox(e){return this.intersectBox(e,ba)!==null}intersectTriangle(e,n,i,r,s){mE.subVectors(n,e),KA.subVectors(i,e),AE.crossVectors(mE,KA);let o=this.direction.dot(AE),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Bl.subVectors(this.origin,e);const l=a*this.direction.dot(KA.crossVectors(Bl,KA));if(l<0)return null;const c=a*this.direction.dot(mE.cross(Bl));if(c<0||l+c>o)return null;const u=-a*Bl.dot(AE);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Lt{constructor(){Lt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,n,i,r,s,o,a,l,c,u,h,f,d,p,m,g){const _=this.elements;return _[0]=e,_[4]=n,_[8]=i,_[12]=r,_[1]=s,_[5]=o,_[9]=a,_[13]=l,_[2]=c,_[6]=u,_[10]=h,_[14]=f,_[3]=d,_[7]=p,_[11]=m,_[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Lt().fromArray(this.elements)}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],this}copyPosition(e){const n=this.elements,i=e.elements;return n[12]=i[12],n[13]=i[13],n[14]=i[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,i){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,n,i){return this.set(e.x,n.x,i.x,0,e.y,n.y,i.y,0,e.z,n.z,i.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,i=e.elements,r=1/Kh.setFromMatrixColumn(e,0).length(),s=1/Kh.setFromMatrixColumn(e,1).length(),o=1/Kh.setFromMatrixColumn(e,2).length();return n[0]=i[0]*r,n[1]=i[1]*r,n[2]=i[2]*r,n[3]=0,n[4]=i[4]*s,n[5]=i[5]*s,n[6]=i[6]*s,n[7]=0,n[8]=i[8]*o,n[9]=i[9]*o,n[10]=i[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),u=Math.cos(s),h=Math.sin(s);if(e.order==="XYZ"){const f=o*u,d=o*h,p=a*u,m=a*h;n[0]=l*u,n[4]=-l*h,n[8]=c,n[1]=d+p*c,n[5]=f-m*c,n[9]=-a*l,n[2]=m-f*c,n[6]=p+d*c,n[10]=o*l}else if(e.order==="YXZ"){const f=l*u,d=l*h,p=c*u,m=c*h;n[0]=f+m*a,n[4]=p*a-d,n[8]=o*c,n[1]=o*h,n[5]=o*u,n[9]=-a,n[2]=d*a-p,n[6]=m+f*a,n[10]=o*l}else if(e.order==="ZXY"){const f=l*u,d=l*h,p=c*u,m=c*h;n[0]=f-m*a,n[4]=-o*h,n[8]=p+d*a,n[1]=d+p*a,n[5]=o*u,n[9]=m-f*a,n[2]=-o*c,n[6]=a,n[10]=o*l}else if(e.order==="ZYX"){const f=o*u,d=o*h,p=a*u,m=a*h;n[0]=l*u,n[4]=p*c-d,n[8]=f*c+m,n[1]=l*h,n[5]=m*c+f,n[9]=d*c-p,n[2]=-c,n[6]=a*l,n[10]=o*l}else if(e.order==="YZX"){const f=o*l,d=o*c,p=a*l,m=a*c;n[0]=l*u,n[4]=m-f*h,n[8]=p*h+d,n[1]=h,n[5]=o*u,n[9]=-a*u,n[2]=-c*u,n[6]=d*h+p,n[10]=f-m*h}else if(e.order==="XZY"){const f=o*l,d=o*c,p=a*l,m=a*c;n[0]=l*u,n[4]=-h,n[8]=c*u,n[1]=f*h+m,n[5]=o*u,n[9]=d*h-p,n[2]=p*h-d,n[6]=a*u,n[10]=m*h+f}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(JK,e,KK)}lookAt(e,n,i){const r=this.elements;return is.subVectors(e,n),is.lengthSq()===0&&(is.z=1),is.normalize(),Rl.crossVectors(i,is),Rl.lengthSq()===0&&(Math.abs(i.z)===1?is.x+=1e-4:is.z+=1e-4,is.normalize(),Rl.crossVectors(i,is)),Rl.normalize(),ZA.crossVectors(is,Rl),r[0]=Rl.x,r[4]=ZA.x,r[8]=is.x,r[1]=Rl.y,r[5]=ZA.y,r[9]=is.y,r[2]=Rl.z,r[6]=ZA.z,r[10]=is.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,r=n.elements,s=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],u=i[1],h=i[5],f=i[9],d=i[13],p=i[2],m=i[6],g=i[10],_=i[14],y=i[3],x=i[7],E=i[11],w=i[15],S=r[0],b=r[4],M=r[8],T=r[12],B=r[1],L=r[5],F=r[9],U=r[13],k=r[2],X=r[6],Y=r[10],Z=r[14],G=r[3],O=r[7],z=r[11],Q=r[15];return s[0]=o*S+a*B+l*k+c*G,s[4]=o*b+a*L+l*X+c*O,s[8]=o*M+a*F+l*Y+c*z,s[12]=o*T+a*U+l*Z+c*Q,s[1]=u*S+h*B+f*k+d*G,s[5]=u*b+h*L+f*X+d*O,s[9]=u*M+h*F+f*Y+d*z,s[13]=u*T+h*U+f*Z+d*Q,s[2]=p*S+m*B+g*k+_*G,s[6]=p*b+m*L+g*X+_*O,s[10]=p*M+m*F+g*Y+_*z,s[14]=p*T+m*U+g*Z+_*Q,s[3]=y*S+x*B+E*k+w*G,s[7]=y*b+x*L+E*X+w*O,s[11]=y*M+x*F+E*Y+w*z,s[15]=y*T+x*U+E*Z+w*Q,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],h=e[6],f=e[10],d=e[14],p=e[3],m=e[7],g=e[11],_=e[15];return p*(+s*l*h-r*c*h-s*a*f+i*c*f+r*a*d-i*l*d)+m*(+n*l*d-n*c*f+s*o*f-r*o*d+r*c*u-s*l*u)+g*(+n*c*h-n*a*d-s*o*h+i*o*d+s*a*u-i*c*u)+_*(-r*a*u-n*l*h+n*a*f+r*o*h-i*o*f+i*l*u)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=n,r[14]=i),this}invert(){const e=this.elements,n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],f=e[10],d=e[11],p=e[12],m=e[13],g=e[14],_=e[15],y=h*g*c-m*f*c+m*l*d-a*g*d-h*l*_+a*f*_,x=p*f*c-u*g*c-p*l*d+o*g*d+u*l*_-o*f*_,E=u*m*c-p*h*c+p*a*d-o*m*d-u*a*_+o*h*_,w=p*h*l-u*m*l-p*a*f+o*m*f+u*a*g-o*h*g,S=n*y+i*x+r*E+s*w;if(S===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const b=1/S;return e[0]=y*b,e[1]=(m*f*s-h*g*s-m*r*d+i*g*d+h*r*_-i*f*_)*b,e[2]=(a*g*s-m*l*s+m*r*c-i*g*c-a*r*_+i*l*_)*b,e[3]=(h*l*s-a*f*s-h*r*c+i*f*c+a*r*d-i*l*d)*b,e[4]=x*b,e[5]=(u*g*s-p*f*s+p*r*d-n*g*d-u*r*_+n*f*_)*b,e[6]=(p*l*s-o*g*s-p*r*c+n*g*c+o*r*_-n*l*_)*b,e[7]=(o*f*s-u*l*s+u*r*c-n*f*c-o*r*d+n*l*d)*b,e[8]=E*b,e[9]=(p*h*s-u*m*s-p*i*d+n*m*d+u*i*_-n*h*_)*b,e[10]=(o*m*s-p*a*s+p*i*c-n*m*c-o*i*_+n*a*_)*b,e[11]=(u*a*s-o*h*s-u*i*c+n*h*c+o*i*d-n*a*d)*b,e[12]=w*b,e[13]=(u*m*r-p*h*r+p*i*f-n*m*f-u*i*g+n*h*g)*b,e[14]=(p*a*r-o*m*r-p*i*l+n*m*l+o*i*g-n*a*g)*b,e[15]=(o*h*r-u*a*r+u*i*l-n*h*l-o*i*f+n*a*f)*b,this}scale(e){const n=this.elements,i=e.x,r=e.y,s=e.z;return n[0]*=i,n[4]*=r,n[8]*=s,n[1]*=i,n[5]*=r,n[9]*=s,n[2]*=i,n[6]*=r,n[10]*=s,n[3]*=i,n[7]*=r,n[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,i,r))}makeTranslation(e,n,i){return this.set(1,0,0,e,0,1,0,n,0,0,1,i,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,n,-i,0,0,i,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,0,i,0,0,1,0,0,-i,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,0,i,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const i=Math.cos(n),r=Math.sin(n),s=1-i,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+i,c*a-r*l,c*l+r*a,0,c*a+r*l,u*a+i,u*l-r*o,0,c*l-r*a,u*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,n,i){return this.set(e,0,0,0,0,n,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,n,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,n,r,1,0,0,0,0,1),this}compose(e,n,i){const r=this.elements,s=n._x,o=n._y,a=n._z,l=n._w,c=s+s,u=o+o,h=a+a,f=s*c,d=s*u,p=s*h,m=o*u,g=o*h,_=a*h,y=l*c,x=l*u,E=l*h,w=i.x,S=i.y,b=i.z;return r[0]=(1-(m+_))*w,r[1]=(d+E)*w,r[2]=(p-x)*w,r[3]=0,r[4]=(d-E)*S,r[5]=(1-(f+_))*S,r[6]=(g+y)*S,r[7]=0,r[8]=(p+x)*b,r[9]=(g-y)*b,r[10]=(1-(f+m))*b,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,n,i){const r=this.elements;let s=Kh.set(r[0],r[1],r[2]).length();const o=Kh.set(r[4],r[5],r[6]).length(),a=Kh.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],ao.copy(this);const c=1/s,u=1/o,h=1/a;return ao.elements[0]*=c,ao.elements[1]*=c,ao.elements[2]*=c,ao.elements[4]*=u,ao.elements[5]*=u,ao.elements[6]*=u,ao.elements[8]*=h,ao.elements[9]*=h,ao.elements[10]*=h,n.setFromRotationMatrix(ao),i.x=s,i.y=o,i.z=a,this}makePerspective(e,n,i,r,s,o){const a=this.elements,l=2*s/(n-e),c=2*s/(i-r),u=(n+e)/(n-e),h=(i+r)/(i-r),f=-(o+s)/(o-s),d=-2*o*s/(o-s);return a[0]=l,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=c,a[9]=h,a[13]=0,a[2]=0,a[6]=0,a[10]=f,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,n,i,r,s,o){const a=this.elements,l=1/(n-e),c=1/(i-r),u=1/(o-s),h=(n+e)*l,f=(i+r)*c,d=(o+s)*u;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-h,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-f,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const n=this.elements,i=e.elements;for(let r=0;r<16;r++)if(n[r]!==i[r])return!1;return!0}fromArray(e,n=0){for(let i=0;i<16;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e[n+9]=i[9],e[n+10]=i[10],e[n+11]=i[11],e[n+12]=i[12],e[n+13]=i[13],e[n+14]=i[14],e[n+15]=i[15],e}}const Kh=new te,ao=new Lt,JK=new te(0,0,0),KK=new te(1,1,1),Rl=new te,ZA=new te,is=new te,JR=new Lt,KR=new qr;class Vd{constructor(e=0,n=0,i=0,r=Vd.DefaultOrder){this.isEuler=!0,this._x=e,this._y=n,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,i,r=this._order){return this._x=e,this._y=n,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],c=r[5],u=r[9],h=r[2],f=r[6],d=r[10];switch(n){case"XYZ":this._y=Math.asin(ii(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,d),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(f,c),this._z=0);break;case"YXZ":this._x=Math.asin(-ii(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin(ii(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,d),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-ii(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,d),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(ii(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-ii(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(f,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,i){return JR.makeRotationFromQuaternion(e),this.setFromRotationMatrix(JR,n,i)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return KR.setFromEuler(this),this.setFromQuaternion(KR,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}Vd.DefaultOrder="XYZ";Vd.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class By{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let ZK=0;const ZR=new te,Zh=new qr,Ia=new Lt,$A=new te,X0=new te,$K=new te,eZ=new qr,$R=new te(1,0,0),eP=new te(0,1,0),tP=new te(0,0,1),tZ={type:"added"},nP={type:"removed"};class an extends hl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:ZK++}),this.uuid=ps(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=an.DefaultUp.clone();const e=new te,n=new Vd,i=new qr,r=new te(1,1,1);function s(){i.setFromEuler(n,!1)}function o(){n.setFromQuaternion(i,void 0,!1)}n._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Lt},normalMatrix:{value:new Wr}}),this.matrix=new Lt,this.matrixWorld=new Lt,this.matrixAutoUpdate=an.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=an.DefaultMatrixWorldAutoUpdate,this.layers=new By,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return Zh.setFromAxisAngle(e,n),this.quaternion.multiply(Zh),this}rotateOnWorldAxis(e,n){return Zh.setFromAxisAngle(e,n),this.quaternion.premultiply(Zh),this}rotateX(e){return this.rotateOnAxis($R,e)}rotateY(e){return this.rotateOnAxis(eP,e)}rotateZ(e){return this.rotateOnAxis(tP,e)}translateOnAxis(e,n){return ZR.copy(e).applyQuaternion(this.quaternion),this.position.add(ZR.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis($R,e)}translateY(e){return this.translateOnAxis(eP,e)}translateZ(e){return this.translateOnAxis(tP,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(Ia.copy(this.matrixWorld).invert())}lookAt(e,n,i){e.isVector3?$A.copy(e):$A.set(e,n,i);const r=this.parent;this.updateWorldMatrix(!0,!1),X0.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ia.lookAt(X0,$A,this.up):Ia.lookAt($A,X0,this.up),this.quaternion.setFromRotationMatrix(Ia),r&&(Ia.extractRotation(r.matrixWorld),Zh.setFromRotationMatrix(Ia),this.quaternion.premultiply(Zh.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(tZ)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(nP)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const n=this.children[e];n.parent=null,n.dispatchEvent(nP)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Ia.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Ia.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ia),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,n);if(o!==void 0)return o}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(X0,e,$K),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(X0,eZ,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let i=0,r=n.length;i<r;i++)n[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let i=0,r=n.length;i<r;i++)n[i].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let i=0,r=n.length;i<r;i++){const s=n[i];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++){const a=r[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=e===void 0||typeof e=="string",i={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const h=l[c];s(e.shapes,h)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(n){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),h=o(e.shapes),f=o(e.skeletons),d=o(e.animations),p=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),u.length>0&&(i.images=u),h.length>0&&(i.shapes=h),f.length>0&&(i.skeletons=f),d.length>0&&(i.animations=d),p.length>0&&(i.nodes=p)}return i.object=r,i;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}an.DefaultUp=new te(0,1,0);an.DefaultMatrixAutoUpdate=!0;an.DefaultMatrixWorldAutoUpdate=!0;const lo=new te,Ta=new te,gE=new te,Ba=new te,$h=new te,ef=new te,iP=new te,vE=new te,_E=new te,yE=new te;class Hs{constructor(e=new te,n=new te,i=new te){this.a=e,this.b=n,this.c=i}static getNormal(e,n,i,r){r.subVectors(i,n),lo.subVectors(e,n),r.cross(lo);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,n,i,r,s){lo.subVectors(r,n),Ta.subVectors(i,n),gE.subVectors(e,n);const o=lo.dot(lo),a=lo.dot(Ta),l=lo.dot(gE),c=Ta.dot(Ta),u=Ta.dot(gE),h=o*c-a*a;if(h===0)return s.set(-2,-1,-1);const f=1/h,d=(c*l-a*u)*f,p=(o*u-a*l)*f;return s.set(1-d-p,p,d)}static containsPoint(e,n,i,r){return this.getBarycoord(e,n,i,r,Ba),Ba.x>=0&&Ba.y>=0&&Ba.x+Ba.y<=1}static getUV(e,n,i,r,s,o,a,l){return this.getBarycoord(e,n,i,r,Ba),l.set(0,0),l.addScaledVector(s,Ba.x),l.addScaledVector(o,Ba.y),l.addScaledVector(a,Ba.z),l}static isFrontFacing(e,n,i,r){return lo.subVectors(i,n),Ta.subVectors(e,n),lo.cross(Ta).dot(r)<0}set(e,n,i){return this.a.copy(e),this.b.copy(n),this.c.copy(i),this}setFromPointsAndIndices(e,n,i,r){return this.a.copy(e[n]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,n,i,r){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return lo.subVectors(this.c,this.b),Ta.subVectors(this.a,this.b),lo.cross(Ta).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Hs.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return Hs.getBarycoord(e,this.a,this.b,this.c,n)}getUV(e,n,i,r,s){return Hs.getUV(e,this.a,this.b,this.c,n,i,r,s)}containsPoint(e){return Hs.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Hs.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const i=this.a,r=this.b,s=this.c;let o,a;$h.subVectors(r,i),ef.subVectors(s,i),vE.subVectors(e,i);const l=$h.dot(vE),c=ef.dot(vE);if(l<=0&&c<=0)return n.copy(i);_E.subVectors(e,r);const u=$h.dot(_E),h=ef.dot(_E);if(u>=0&&h<=u)return n.copy(r);const f=l*h-u*c;if(f<=0&&l>=0&&u<=0)return o=l/(l-u),n.copy(i).addScaledVector($h,o);yE.subVectors(e,s);const d=$h.dot(yE),p=ef.dot(yE);if(p>=0&&d<=p)return n.copy(s);const m=d*c-l*p;if(m<=0&&c>=0&&p<=0)return a=c/(c-p),n.copy(i).addScaledVector(ef,a);const g=u*p-d*h;if(g<=0&&h-u>=0&&d-p>=0)return iP.subVectors(s,r),a=(h-u)/(h-u+(d-p)),n.copy(r).addScaledVector(iP,a);const _=1/(g+m+f);return o=m*_,a=f*_,n.copy(i).addScaledVector($h,o).addScaledVector(ef,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let nZ=0;class pr extends hl{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:nZ++}),this.uuid=ps(),this.name="",this.type="Material",this.blending=Uu,this.side=th,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=Qb,this.blendDst=Hb,this.blendEquation=vu,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=I_,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=ZO,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Ov,this.stencilZFail=Ov,this.stencilZPass=Ov,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const i=e[n];if(i===void 0){console.warn("THREE.Material: '"+n+"' parameter is undefined.");continue}const r=this[n];if(r===void 0){console.warn("THREE."+this.type+": '"+n+"' is not a property of this material.");continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[n]=i}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Uu&&(i.blending=this.blending),this.side!==th&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(n){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let i=null;if(n!==null){const r=n.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=n[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Bc extends pr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ot(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=a1,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const li=new te,eg=new Ve;class En{constructor(e,n,i){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=i===!0,this.usage=Bm,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,n,i){e*=this.itemSize,i*=n.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=n.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,i=this.count;n<i;n++)eg.fromBufferAttribute(this,n),eg.applyMatrix3(e),this.setXY(n,eg.x,eg.y);else if(this.itemSize===3)for(let n=0,i=this.count;n<i;n++)li.fromBufferAttribute(this,n),li.applyMatrix3(e),this.setXYZ(n,li.x,li.y,li.z);return this}applyMatrix4(e){for(let n=0,i=this.count;n<i;n++)li.fromBufferAttribute(this,n),li.applyMatrix4(e),this.setXYZ(n,li.x,li.y,li.z);return this}applyNormalMatrix(e){for(let n=0,i=this.count;n<i;n++)li.fromBufferAttribute(this,n),li.applyNormalMatrix(e),this.setXYZ(n,li.x,li.y,li.z);return this}transformDirection(e){for(let n=0,i=this.count;n<i;n++)li.fromBufferAttribute(this,n),li.transformDirection(e),this.setXYZ(n,li.x,li.y,li.z);return this}set(e,n=0){return this.array.set(e,n),this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=Ya(n,this.array)),n}setX(e,n){return this.normalized&&(n=xn(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=Ya(n,this.array)),n}setY(e,n){return this.normalized&&(n=xn(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=Ya(n,this.array)),n}setZ(e,n){return this.normalized&&(n=xn(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=Ya(n,this.array)),n}setW(e,n){return this.normalized&&(n=xn(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,i){return e*=this.itemSize,this.normalized&&(n=xn(n,this.array),i=xn(i,this.array)),this.array[e+0]=n,this.array[e+1]=i,this}setXYZ(e,n,i,r){return e*=this.itemSize,this.normalized&&(n=xn(n,this.array),i=xn(i,this.array),r=xn(r,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,n,i,r,s){return e*=this.itemSize,this.normalized&&(n=xn(n,this.array),i=xn(i,this.array),r=xn(r,this.array),s=xn(s,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Bm&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class iZ extends En{constructor(e,n,i){super(new Int8Array(e),n,i)}}class rZ extends En{constructor(e,n,i){super(new Uint8Array(e),n,i)}}class sZ extends En{constructor(e,n,i){super(new Uint8ClampedArray(e),n,i)}}class oZ extends En{constructor(e,n,i){super(new Int16Array(e),n,i)}}class qb extends En{constructor(e,n,i){super(new Uint16Array(e),n,i)}}class aZ extends En{constructor(e,n,i){super(new Int32Array(e),n,i)}}class Jb extends En{constructor(e,n,i){super(new Uint32Array(e),n,i)}}class lZ extends En{constructor(e,n,i){super(new Uint16Array(e),n,i),this.isFloat16BufferAttribute=!0}}class ut extends En{constructor(e,n,i){super(new Float32Array(e),n,i)}}class cZ extends En{constructor(e,n,i){super(new Float64Array(e),n,i)}}let uZ=0;const Fs=new Lt,xE=new an,tf=new te,rs=new mh,Y0=new mh,Bi=new te;class zt extends hl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:uZ++}),this.uuid=ps(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(e8(e)?Jb:qb)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,i=0){this.groups.push({start:e,count:n,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new Wr().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Fs.makeRotationFromQuaternion(e),this.applyMatrix4(Fs),this}rotateX(e){return Fs.makeRotationX(e),this.applyMatrix4(Fs),this}rotateY(e){return Fs.makeRotationY(e),this.applyMatrix4(Fs),this}rotateZ(e){return Fs.makeRotationZ(e),this.applyMatrix4(Fs),this}translate(e,n,i){return Fs.makeTranslation(e,n,i),this.applyMatrix4(Fs),this}scale(e,n,i){return Fs.makeScale(e,n,i),this.applyMatrix4(Fs),this}lookAt(e){return xE.lookAt(e),xE.updateMatrix(),this.applyMatrix4(xE.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(tf).negate(),this.translate(tf.x,tf.y,tf.z),this}setFromPoints(e){const n=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];n.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new ut(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new mh);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new te(-1/0,-1/0,-1/0),new te(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let i=0,r=n.length;i<r;i++){const s=n[i];rs.setFromBufferAttribute(s),this.morphTargetsRelative?(Bi.addVectors(this.boundingBox.min,rs.min),this.boundingBox.expandByPoint(Bi),Bi.addVectors(this.boundingBox.max,rs.max),this.boundingBox.expandByPoint(Bi)):(this.boundingBox.expandByPoint(rs.min),this.boundingBox.expandByPoint(rs.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ah);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new te,1/0);return}if(e){const i=this.boundingSphere.center;if(rs.setFromBufferAttribute(e),n)for(let s=0,o=n.length;s<o;s++){const a=n[s];Y0.setFromBufferAttribute(a),this.morphTargetsRelative?(Bi.addVectors(rs.min,Y0.min),rs.expandByPoint(Bi),Bi.addVectors(rs.max,Y0.max),rs.expandByPoint(Bi)):(rs.expandByPoint(Y0.min),rs.expandByPoint(Y0.max))}rs.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)Bi.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Bi));if(n)for(let s=0,o=n.length;s<o;s++){const a=n[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)Bi.fromBufferAttribute(a,c),l&&(tf.fromBufferAttribute(e,c),Bi.add(tf)),r=Math.max(r,i.distanceToSquared(Bi))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,r=n.position.array,s=n.normal.array,o=n.uv.array,a=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new En(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],u=[];for(let B=0;B<a;B++)c[B]=new te,u[B]=new te;const h=new te,f=new te,d=new te,p=new Ve,m=new Ve,g=new Ve,_=new te,y=new te;function x(B,L,F){h.fromArray(r,B*3),f.fromArray(r,L*3),d.fromArray(r,F*3),p.fromArray(o,B*2),m.fromArray(o,L*2),g.fromArray(o,F*2),f.sub(h),d.sub(h),m.sub(p),g.sub(p);const U=1/(m.x*g.y-g.x*m.y);!isFinite(U)||(_.copy(f).multiplyScalar(g.y).addScaledVector(d,-m.y).multiplyScalar(U),y.copy(d).multiplyScalar(m.x).addScaledVector(f,-g.x).multiplyScalar(U),c[B].add(_),c[L].add(_),c[F].add(_),u[B].add(y),u[L].add(y),u[F].add(y))}let E=this.groups;E.length===0&&(E=[{start:0,count:i.length}]);for(let B=0,L=E.length;B<L;++B){const F=E[B],U=F.start,k=F.count;for(let X=U,Y=U+k;X<Y;X+=3)x(i[X+0],i[X+1],i[X+2])}const w=new te,S=new te,b=new te,M=new te;function T(B){b.fromArray(s,B*3),M.copy(b);const L=c[B];w.copy(L),w.sub(b.multiplyScalar(b.dot(L))).normalize(),S.crossVectors(M,L);const U=S.dot(u[B])<0?-1:1;l[B*4]=w.x,l[B*4+1]=w.y,l[B*4+2]=w.z,l[B*4+3]=U}for(let B=0,L=E.length;B<L;++B){const F=E[B],U=F.start,k=F.count;for(let X=U,Y=U+k;X<Y;X+=3)T(i[X+0]),T(i[X+1]),T(i[X+2])}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new En(new Float32Array(n.count*3),3),this.setAttribute("normal",i);else for(let f=0,d=i.count;f<d;f++)i.setXYZ(f,0,0,0);const r=new te,s=new te,o=new te,a=new te,l=new te,c=new te,u=new te,h=new te;if(e)for(let f=0,d=e.count;f<d;f+=3){const p=e.getX(f+0),m=e.getX(f+1),g=e.getX(f+2);r.fromBufferAttribute(n,p),s.fromBufferAttribute(n,m),o.fromBufferAttribute(n,g),u.subVectors(o,s),h.subVectors(r,s),u.cross(h),a.fromBufferAttribute(i,p),l.fromBufferAttribute(i,m),c.fromBufferAttribute(i,g),a.add(u),l.add(u),c.add(u),i.setXYZ(p,a.x,a.y,a.z),i.setXYZ(m,l.x,l.y,l.z),i.setXYZ(g,c.x,c.y,c.z)}else for(let f=0,d=n.count;f<d;f+=3)r.fromBufferAttribute(n,f+0),s.fromBufferAttribute(n,f+1),o.fromBufferAttribute(n,f+2),u.subVectors(o,s),h.subVectors(r,s),u.cross(h),i.setXYZ(f+0,u.x,u.y,u.z),i.setXYZ(f+1,u.x,u.y,u.z),i.setXYZ(f+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let n=0,i=e.count;n<i;n++)Bi.fromBufferAttribute(e,n),Bi.normalize(),e.setXYZ(n,Bi.x,Bi.y,Bi.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,h=a.normalized,f=new c.constructor(l.length*u);let d=0,p=0;for(let m=0,g=l.length;m<g;m++){a.isInterleavedBufferAttribute?d=l[m]*a.data.stride+a.offset:d=l[m]*u;for(let _=0;_<u;_++)f[p++]=c[d++]}return new En(f,u,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new zt,i=this.index.array,r=this.attributes;for(const a in r){const l=r[a],c=e(l,i);n.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,h=c.length;u<h;u++){const f=c[u],d=e(f,i);l.push(d)}n.morphAttributes[a]=l}n.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];n.addGroup(c.start,c.count,c.materialIndex)}return n}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let h=0,f=c.length;h<f;h++){const d=c[h];u.push(d.toJSON(e.data))}u.length>0&&(r[l]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(n));const r=e.attributes;for(const c in r){const u=r[c];this.setAttribute(c,u.clone(n))}const s=e.morphAttributes;for(const c in s){const u=[],h=s[c];for(let f=0,d=h.length;f<d;f++)u.push(h[f].clone(n));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const h=o[c];this.addGroup(h.start,h.count,h.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const rP=new Lt,nf=new c1,EE=new Ah,Pl=new te,Dl=new te,Fl=new te,wE=new te,ME=new te,CE=new te,tg=new te,ng=new te,ig=new te,rg=new Ve,sg=new Ve,og=new Ve,SE=new te,ag=new te;class Yi extends an{constructor(e=new zt,n=new Bc){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}raycast(e,n){const i=this.geometry,r=this.material,s=this.matrixWorld;if(r===void 0||(i.boundingSphere===null&&i.computeBoundingSphere(),EE.copy(i.boundingSphere),EE.applyMatrix4(s),e.ray.intersectsSphere(EE)===!1)||(rP.copy(s).invert(),nf.copy(e.ray).applyMatrix4(rP),i.boundingBox!==null&&nf.intersectsBox(i.boundingBox)===!1))return;let o;const a=i.index,l=i.attributes.position,c=i.morphAttributes.position,u=i.morphTargetsRelative,h=i.attributes.uv,f=i.attributes.uv2,d=i.groups,p=i.drawRange;if(a!==null)if(Array.isArray(r))for(let m=0,g=d.length;m<g;m++){const _=d[m],y=r[_.materialIndex],x=Math.max(_.start,p.start),E=Math.min(a.count,Math.min(_.start+_.count,p.start+p.count));for(let w=x,S=E;w<S;w+=3){const b=a.getX(w),M=a.getX(w+1),T=a.getX(w+2);o=lg(this,y,e,nf,l,c,u,h,f,b,M,T),o&&(o.faceIndex=Math.floor(w/3),o.face.materialIndex=_.materialIndex,n.push(o))}}else{const m=Math.max(0,p.start),g=Math.min(a.count,p.start+p.count);for(let _=m,y=g;_<y;_+=3){const x=a.getX(_),E=a.getX(_+1),w=a.getX(_+2);o=lg(this,r,e,nf,l,c,u,h,f,x,E,w),o&&(o.faceIndex=Math.floor(_/3),n.push(o))}}else if(l!==void 0)if(Array.isArray(r))for(let m=0,g=d.length;m<g;m++){const _=d[m],y=r[_.materialIndex],x=Math.max(_.start,p.start),E=Math.min(l.count,Math.min(_.start+_.count,p.start+p.count));for(let w=x,S=E;w<S;w+=3){const b=w,M=w+1,T=w+2;o=lg(this,y,e,nf,l,c,u,h,f,b,M,T),o&&(o.faceIndex=Math.floor(w/3),o.face.materialIndex=_.materialIndex,n.push(o))}}else{const m=Math.max(0,p.start),g=Math.min(l.count,p.start+p.count);for(let _=m,y=g;_<y;_+=3){const x=_,E=_+1,w=_+2;o=lg(this,r,e,nf,l,c,u,h,f,x,E,w),o&&(o.faceIndex=Math.floor(_/3),n.push(o))}}}}function hZ(t,e,n,i,r,s,o,a){let l;if(e.side===ds?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,e.side!==ja,a),l===null)return null;ag.copy(a),ag.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(ag);return c<n.near||c>n.far?null:{distance:c,point:ag.clone(),object:t}}function lg(t,e,n,i,r,s,o,a,l,c,u,h){Pl.fromBufferAttribute(r,c),Dl.fromBufferAttribute(r,u),Fl.fromBufferAttribute(r,h);const f=t.morphTargetInfluences;if(s&&f){tg.set(0,0,0),ng.set(0,0,0),ig.set(0,0,0);for(let p=0,m=s.length;p<m;p++){const g=f[p],_=s[p];g!==0&&(wE.fromBufferAttribute(_,c),ME.fromBufferAttribute(_,u),CE.fromBufferAttribute(_,h),o?(tg.addScaledVector(wE,g),ng.addScaledVector(ME,g),ig.addScaledVector(CE,g)):(tg.addScaledVector(wE.sub(Pl),g),ng.addScaledVector(ME.sub(Dl),g),ig.addScaledVector(CE.sub(Fl),g)))}Pl.add(tg),Dl.add(ng),Fl.add(ig)}t.isSkinnedMesh&&(t.boneTransform(c,Pl),t.boneTransform(u,Dl),t.boneTransform(h,Fl));const d=hZ(t,e,n,i,Pl,Dl,Fl,SE);if(d){a&&(rg.fromBufferAttribute(a,c),sg.fromBufferAttribute(a,u),og.fromBufferAttribute(a,h),d.uv=Hs.getUV(SE,Pl,Dl,Fl,rg,sg,og,new Ve)),l&&(rg.fromBufferAttribute(l,c),sg.fromBufferAttribute(l,u),og.fromBufferAttribute(l,h),d.uv2=Hs.getUV(SE,Pl,Dl,Fl,rg,sg,og,new Ve));const p={a:c,b:u,c:h,normal:new te,materialIndex:0};Hs.getNormal(Pl,Dl,Fl,p.normal),d.face=p}return d}class Rc extends zt{constructor(e=1,n=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],h=[];let f=0,d=0;p("z","y","x",-1,-1,i,n,e,o,s,0),p("z","y","x",1,-1,i,n,-e,o,s,1),p("x","z","y",1,1,e,i,n,r,o,2),p("x","z","y",1,-1,e,i,-n,r,o,3),p("x","y","z",1,-1,e,n,i,r,s,4),p("x","y","z",-1,-1,e,n,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new ut(c,3)),this.setAttribute("normal",new ut(u,3)),this.setAttribute("uv",new ut(h,2));function p(m,g,_,y,x,E,w,S,b,M,T){const B=E/b,L=w/M,F=E/2,U=w/2,k=S/2,X=b+1,Y=M+1;let Z=0,G=0;const O=new te;for(let z=0;z<Y;z++){const Q=z*L-U;for(let H=0;H<X;H++){const J=H*B-F;O[m]=J*y,O[g]=Q*x,O[_]=k,c.push(O.x,O.y,O.z),O[m]=0,O[g]=0,O[_]=S>0?1:-1,u.push(O.x,O.y,O.z),h.push(H/b),h.push(1-z/M),Z+=1}}for(let z=0;z<M;z++)for(let Q=0;Q<b;Q++){const H=f+Q+X*z,J=f+Q+X*(z+1),j=f+(Q+1)+X*(z+1),oe=f+(Q+1)+X*z;l.push(H,J,oe),l.push(J,j,oe),G+=6}a.addGroup(d,G,T),d+=G,f+=Z}}static fromJSON(e){return new Rc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Cd(t){const e={};for(const n in t){e[n]={};for(const i in t[n]){const r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}}return e}function ar(t){const e={};for(let n=0;n<t.length;n++){const i=Cd(t[n]);for(const r in i)e[r]=i[r]}return e}function fZ(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}const n8={clone:Cd,merge:ar};var dZ=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,pZ=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ha extends pr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=dZ,this.fragmentShader=pZ,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Cd(e.uniforms),this.uniformsGroups=fZ(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?n.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?n.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?n.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?n.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?n.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?n.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?n.uniforms[r]={type:"m4",value:o.toArray()}:n.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(n.extensions=i),n}}class Ry extends an{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Lt,this.projectionMatrix=new Lt,this.projectionMatrixInverse=new Lt}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(-n[8],-n[9],-n[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Xi extends Ry{constructor(e=50,n=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=Rm*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Nu*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Rm*2*Math.atan(Math.tan(Nu*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,n,i,r,s,o){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(Nu*.5*this.fov)/this.zoom,i=2*n,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,n-=o.offsetY*i/c,r*=o.width/l,i*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,n,n-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const rf=90,sf=1;class i8 extends an{constructor(e,n,i){super(),this.type="CubeCamera",this.renderTarget=i;const r=new Xi(rf,sf,e,n);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new te(1,0,0)),this.add(r);const s=new Xi(rf,sf,e,n);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new te(-1,0,0)),this.add(s);const o=new Xi(rf,sf,e,n);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new te(0,1,0)),this.add(o);const a=new Xi(rf,sf,e,n);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new te(0,-1,0)),this.add(a);const l=new Xi(rf,sf,e,n);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new te(0,0,1)),this.add(l);const c=new Xi(rf,sf,e,n);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new te(0,0,-1)),this.add(c)}update(e,n){this.parent===null&&this.updateMatrixWorld();const i=this.renderTarget,[r,s,o,a,l,c]=this.children,u=e.getRenderTarget(),h=e.toneMapping,f=e.xr.enabled;e.toneMapping=aa,e.xr.enabled=!1;const d=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(n,r),e.setRenderTarget(i,1),e.render(n,s),e.setRenderTarget(i,2),e.render(n,o),e.setRenderTarget(i,3),e.render(n,a),e.setRenderTarget(i,4),e.render(n,l),i.texture.generateMipmaps=d,e.setRenderTarget(i,5),e.render(n,c),e.setRenderTarget(u),e.toneMapping=h,e.xr.enabled=f,i.texture.needsPMREMUpdate=!0}}class u1 extends xi{constructor(e,n,i,r,s,o,a,l,c,u){e=e!==void 0?e:[],n=n!==void 0?n:vc,super(e,n,i,r,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class r8 extends eo{constructor(e,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new u1(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:ni}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.encoding=n.encoding,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Rc(5,5,5),s=new ha({name:"CubemapFromEquirect",uniforms:Cd(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:ds,blending:$a});s.uniforms.tEquirect.value=n;const o=new Yi(r,s),a=n.minFilter;return n.minFilter===ph&&(n.minFilter=ni),new i8(1,10,this).update(e,o),n.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,n,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(n,i,r);e.setRenderTarget(s)}}const bE=new te,mZ=new te,AZ=new Wr;class Vl{constructor(e=new te(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,i,r){return this.normal.set(e,n,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,i){const r=bE.subVectors(i,n).cross(mZ.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,n){const i=e.delta(bE),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:n.copy(i).multiplyScalar(s).add(e.start)}intersectsLine(e){const n=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return n<0&&i>0||i<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const i=n||AZ.getNormalMatrix(e),r=this.coplanarPoint(bE).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const of=new Ah,cg=new te;class Py{constructor(e=new Vl,n=new Vl,i=new Vl,r=new Vl,s=new Vl,o=new Vl){this.planes=[e,n,i,r,s,o]}set(e,n,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(n),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const n=this.planes;for(let i=0;i<6;i++)n[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const n=this.planes,i=e.elements,r=i[0],s=i[1],o=i[2],a=i[3],l=i[4],c=i[5],u=i[6],h=i[7],f=i[8],d=i[9],p=i[10],m=i[11],g=i[12],_=i[13],y=i[14],x=i[15];return n[0].setComponents(a-r,h-l,m-f,x-g).normalize(),n[1].setComponents(a+r,h+l,m+f,x+g).normalize(),n[2].setComponents(a+s,h+c,m+d,x+_).normalize(),n[3].setComponents(a-s,h-c,m-d,x-_).normalize(),n[4].setComponents(a-o,h-u,m-p,x-y).normalize(),n[5].setComponents(a+o,h+u,m+p,x+y).normalize(),this}intersectsObject(e){const n=e.geometry;return n.boundingSphere===null&&n.computeBoundingSphere(),of.copy(n.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(of)}intersectsSprite(e){return of.center.set(0,0,0),of.radius=.7071067811865476,of.applyMatrix4(e.matrixWorld),this.intersectsSphere(of)}intersectsSphere(e){const n=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(n[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const n=this.planes;for(let i=0;i<6;i++){const r=n[i];if(cg.x=r.normal.x>0?e.max.x:e.min.x,cg.y=r.normal.y>0?e.max.y:e.min.y,cg.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(cg)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let i=0;i<6;i++)if(n[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function s8(){let t=null,e=!1,n=null,i=null;function r(s,o){n(s,o),i=t.requestAnimationFrame(r)}return{start:function(){e!==!0&&n!==null&&(i=t.requestAnimationFrame(r),e=!0)},stop:function(){t.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){n=s},setContext:function(s){t=s}}}function gZ(t,e){const n=e.isWebGL2,i=new WeakMap;function r(c,u){const h=c.array,f=c.usage,d=t.createBuffer();t.bindBuffer(u,d),t.bufferData(u,h,f),c.onUploadCallback();let p;if(h instanceof Float32Array)p=t.FLOAT;else if(h instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(n)p=t.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else p=t.UNSIGNED_SHORT;else if(h instanceof Int16Array)p=t.SHORT;else if(h instanceof Uint32Array)p=t.UNSIGNED_INT;else if(h instanceof Int32Array)p=t.INT;else if(h instanceof Int8Array)p=t.BYTE;else if(h instanceof Uint8Array)p=t.UNSIGNED_BYTE;else if(h instanceof Uint8ClampedArray)p=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);return{buffer:d,type:p,bytesPerElement:h.BYTES_PER_ELEMENT,version:c.version}}function s(c,u,h){const f=u.array,d=u.updateRange;t.bindBuffer(h,c),d.count===-1?t.bufferSubData(h,0,f):(n?t.bufferSubData(h,d.offset*f.BYTES_PER_ELEMENT,f,d.offset,d.count):t.bufferSubData(h,d.offset*f.BYTES_PER_ELEMENT,f.subarray(d.offset,d.offset+d.count)),d.count=-1)}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=i.get(c);u&&(t.deleteBuffer(u.buffer),i.delete(c))}function l(c,u){if(c.isGLBufferAttribute){const f=i.get(c);(!f||f.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const h=i.get(c);h===void 0?i.set(c,r(c,u)):h.version<c.version&&(s(h.buffer,c,u),h.version=c.version)}return{get:o,remove:a,update:l}}class Wd extends zt{constructor(e=1,n=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:i,heightSegments:r};const s=e/2,o=n/2,a=Math.floor(i),l=Math.floor(r),c=a+1,u=l+1,h=e/a,f=n/l,d=[],p=[],m=[],g=[];for(let _=0;_<u;_++){const y=_*f-o;for(let x=0;x<c;x++){const E=x*h-s;p.push(E,-y,0),m.push(0,0,1),g.push(x/a),g.push(1-_/l)}}for(let _=0;_<l;_++)for(let y=0;y<a;y++){const x=y+c*_,E=y+c*(_+1),w=y+1+c*(_+1),S=y+1+c*_;d.push(x,E,S),d.push(E,w,S)}this.setIndex(d),this.setAttribute("position",new ut(p,3)),this.setAttribute("normal",new ut(m,3)),this.setAttribute("uv",new ut(g,2))}static fromJSON(e){return new Wd(e.width,e.height,e.widthSegments,e.heightSegments)}}var vZ=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,_Z=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,yZ=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,xZ=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,EZ=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,wZ=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,MZ="vec3 transformed = vec3( position );",CZ=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,SZ=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
		float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
		float x2 = x * x;
		float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
		return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,bZ=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,	0.0556434,
		-1.5371385,	1.8760108, -0.2040259,
		-0.4985314,	0.0415560,	1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,IZ=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,TZ=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,BZ=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,RZ=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,PZ=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,DZ=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,FZ=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,LZ=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,kZ=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,UZ=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,OZ=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,NZ=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,GZ=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,zZ=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,QZ=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,HZ=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,VZ="gl_FragColor = linearToOutputTexel( gl_FragColor );",WZ=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,jZ=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,XZ=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,YZ=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,qZ=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,JZ=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,KZ=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,ZZ=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,$Z=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,e$=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,t$=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,n$=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,i$=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,r$=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,s$=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert
#define Material_LightProbeLOD( material )	(0)`,o$=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,a$=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,l$=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,c$=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,u$=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,h$=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,f$=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,d$=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(		0, 1,		0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,p$=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,m$=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,A$=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,g$=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,v$=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,_$=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,y$=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,x$=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,E$=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,w$=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,M$=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,C$=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,S$=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,b$=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,I$=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,T$=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,B$=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,R$=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,P$=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,D$=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,F$=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,L$=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,k$=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,U$=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,O$=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,N$=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,G$=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,z$=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Q$=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,H$=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,V$=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,W$=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,j$=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,X$=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Y$=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,q$=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
							texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
							f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
							texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
							f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,J$=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,K$=`#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,Z$=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,$$=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,eee=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,tee=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,nee=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,iee=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,ree=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,see=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,oee=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(	1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,	1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,	1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,aee=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,lee=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,cee=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,uee=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,hee=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,fee=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,dee=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,pee=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,mee=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Aee=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,gee=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	gl_FragColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		gl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );
	#endif
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,vee=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,_ee=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,yee=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,xee=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,Eee=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,wee=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Mee=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Cee=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,See=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,bee=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Iee=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Tee=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Bee=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Ree=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Pee=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Dee=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Fee=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Lee=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,kee=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Uee=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Oee=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Nee=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Gee=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,zee=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Qee=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Hee=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Vee=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Wee=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,jee=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Xee=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Ht={alphamap_fragment:vZ,alphamap_pars_fragment:_Z,alphatest_fragment:yZ,alphatest_pars_fragment:xZ,aomap_fragment:EZ,aomap_pars_fragment:wZ,begin_vertex:MZ,beginnormal_vertex:CZ,bsdfs:SZ,iridescence_fragment:bZ,bumpmap_pars_fragment:IZ,clipping_planes_fragment:TZ,clipping_planes_pars_fragment:BZ,clipping_planes_pars_vertex:RZ,clipping_planes_vertex:PZ,color_fragment:DZ,color_pars_fragment:FZ,color_pars_vertex:LZ,color_vertex:kZ,common:UZ,cube_uv_reflection_fragment:OZ,defaultnormal_vertex:NZ,displacementmap_pars_vertex:GZ,displacementmap_vertex:zZ,emissivemap_fragment:QZ,emissivemap_pars_fragment:HZ,encodings_fragment:VZ,encodings_pars_fragment:WZ,envmap_fragment:jZ,envmap_common_pars_fragment:XZ,envmap_pars_fragment:YZ,envmap_pars_vertex:qZ,envmap_physical_pars_fragment:a$,envmap_vertex:JZ,fog_vertex:KZ,fog_pars_vertex:ZZ,fog_fragment:$Z,fog_pars_fragment:e$,gradientmap_pars_fragment:t$,lightmap_fragment:n$,lightmap_pars_fragment:i$,lights_lambert_fragment:r$,lights_lambert_pars_fragment:s$,lights_pars_begin:o$,lights_toon_fragment:l$,lights_toon_pars_fragment:c$,lights_phong_fragment:u$,lights_phong_pars_fragment:h$,lights_physical_fragment:f$,lights_physical_pars_fragment:d$,lights_fragment_begin:p$,lights_fragment_maps:m$,lights_fragment_end:A$,logdepthbuf_fragment:g$,logdepthbuf_pars_fragment:v$,logdepthbuf_pars_vertex:_$,logdepthbuf_vertex:y$,map_fragment:x$,map_pars_fragment:E$,map_particle_fragment:w$,map_particle_pars_fragment:M$,metalnessmap_fragment:C$,metalnessmap_pars_fragment:S$,morphcolor_vertex:b$,morphnormal_vertex:I$,morphtarget_pars_vertex:T$,morphtarget_vertex:B$,normal_fragment_begin:R$,normal_fragment_maps:P$,normal_pars_fragment:D$,normal_pars_vertex:F$,normal_vertex:L$,normalmap_pars_fragment:k$,clearcoat_normal_fragment_begin:U$,clearcoat_normal_fragment_maps:O$,clearcoat_pars_fragment:N$,iridescence_pars_fragment:G$,output_fragment:z$,packing:Q$,premultiplied_alpha_fragment:H$,project_vertex:V$,dithering_fragment:W$,dithering_pars_fragment:j$,roughnessmap_fragment:X$,roughnessmap_pars_fragment:Y$,shadowmap_pars_fragment:q$,shadowmap_pars_vertex:J$,shadowmap_vertex:K$,shadowmask_pars_fragment:Z$,skinbase_vertex:$$,skinning_pars_vertex:eee,skinning_vertex:tee,skinnormal_vertex:nee,specularmap_fragment:iee,specularmap_pars_fragment:ree,tonemapping_fragment:see,tonemapping_pars_fragment:oee,transmission_fragment:aee,transmission_pars_fragment:lee,uv_pars_fragment:cee,uv_pars_vertex:uee,uv_vertex:hee,uv2_pars_fragment:fee,uv2_pars_vertex:dee,uv2_vertex:pee,worldpos_vertex:mee,background_vert:Aee,background_frag:gee,cube_vert:vee,cube_frag:_ee,depth_vert:yee,depth_frag:xee,distanceRGBA_vert:Eee,distanceRGBA_frag:wee,equirect_vert:Mee,equirect_frag:Cee,linedashed_vert:See,linedashed_frag:bee,meshbasic_vert:Iee,meshbasic_frag:Tee,meshlambert_vert:Bee,meshlambert_frag:Ree,meshmatcap_vert:Pee,meshmatcap_frag:Dee,meshnormal_vert:Fee,meshnormal_frag:Lee,meshphong_vert:kee,meshphong_frag:Uee,meshphysical_vert:Oee,meshphysical_frag:Nee,meshtoon_vert:Gee,meshtoon_frag:zee,points_vert:Qee,points_frag:Hee,shadow_vert:Vee,shadow_frag:Wee,sprite_vert:jee,sprite_frag:Xee},et={common:{diffuse:{value:new ot(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Wr},uv2Transform:{value:new Wr},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ve(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ot(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ot(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Wr}},sprite:{diffuse:{value:new ot(16777215)},opacity:{value:1},center:{value:new Ve(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Wr}}},Ao={basic:{uniforms:ar([et.common,et.specularmap,et.envmap,et.aomap,et.lightmap,et.fog]),vertexShader:Ht.meshbasic_vert,fragmentShader:Ht.meshbasic_frag},lambert:{uniforms:ar([et.common,et.specularmap,et.envmap,et.aomap,et.lightmap,et.emissivemap,et.bumpmap,et.normalmap,et.displacementmap,et.fog,et.lights,{emissive:{value:new ot(0)}}]),vertexShader:Ht.meshlambert_vert,fragmentShader:Ht.meshlambert_frag},phong:{uniforms:ar([et.common,et.specularmap,et.envmap,et.aomap,et.lightmap,et.emissivemap,et.bumpmap,et.normalmap,et.displacementmap,et.fog,et.lights,{emissive:{value:new ot(0)},specular:{value:new ot(1118481)},shininess:{value:30}}]),vertexShader:Ht.meshphong_vert,fragmentShader:Ht.meshphong_frag},standard:{uniforms:ar([et.common,et.envmap,et.aomap,et.lightmap,et.emissivemap,et.bumpmap,et.normalmap,et.displacementmap,et.roughnessmap,et.metalnessmap,et.fog,et.lights,{emissive:{value:new ot(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ht.meshphysical_vert,fragmentShader:Ht.meshphysical_frag},toon:{uniforms:ar([et.common,et.aomap,et.lightmap,et.emissivemap,et.bumpmap,et.normalmap,et.displacementmap,et.gradientmap,et.fog,et.lights,{emissive:{value:new ot(0)}}]),vertexShader:Ht.meshtoon_vert,fragmentShader:Ht.meshtoon_frag},matcap:{uniforms:ar([et.common,et.bumpmap,et.normalmap,et.displacementmap,et.fog,{matcap:{value:null}}]),vertexShader:Ht.meshmatcap_vert,fragmentShader:Ht.meshmatcap_frag},points:{uniforms:ar([et.points,et.fog]),vertexShader:Ht.points_vert,fragmentShader:Ht.points_frag},dashed:{uniforms:ar([et.common,et.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ht.linedashed_vert,fragmentShader:Ht.linedashed_frag},depth:{uniforms:ar([et.common,et.displacementmap]),vertexShader:Ht.depth_vert,fragmentShader:Ht.depth_frag},normal:{uniforms:ar([et.common,et.bumpmap,et.normalmap,et.displacementmap,{opacity:{value:1}}]),vertexShader:Ht.meshnormal_vert,fragmentShader:Ht.meshnormal_frag},sprite:{uniforms:ar([et.sprite,et.fog]),vertexShader:Ht.sprite_vert,fragmentShader:Ht.sprite_frag},background:{uniforms:{uvTransform:{value:new Wr},t2D:{value:null}},vertexShader:Ht.background_vert,fragmentShader:Ht.background_frag},cube:{uniforms:ar([et.envmap,{opacity:{value:1}}]),vertexShader:Ht.cube_vert,fragmentShader:Ht.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ht.equirect_vert,fragmentShader:Ht.equirect_frag},distanceRGBA:{uniforms:ar([et.common,et.displacementmap,{referencePosition:{value:new te},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ht.distanceRGBA_vert,fragmentShader:Ht.distanceRGBA_frag},shadow:{uniforms:ar([et.lights,et.fog,{color:{value:new ot(0)},opacity:{value:1}}]),vertexShader:Ht.shadow_vert,fragmentShader:Ht.shadow_frag}};Ao.physical={uniforms:ar([Ao.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Ve(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new ot(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Ve},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new ot(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new ot(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Ht.meshphysical_vert,fragmentShader:Ht.meshphysical_frag};function Yee(t,e,n,i,r,s){const o=new ot(0);let a=r===!0?0:1,l,c,u=null,h=0,f=null;function d(m,g){let _=!1,y=g.isScene===!0?g.background:null;y&&y.isTexture&&(y=e.get(y));const x=t.xr,E=x.getSession&&x.getSession();E&&E.environmentBlendMode==="additive"&&(y=null),y===null?p(o,a):y&&y.isColor&&(p(y,1),_=!0),(t.autoClear||_)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),y&&(y.isCubeTexture||y.mapping===Hd)?(c===void 0&&(c=new Yi(new Rc(1,1,1),new ha({name:"BackgroundCubeMaterial",uniforms:Cd(Ao.cube.uniforms),vertexShader:Ao.cube.vertexShader,fragmentShader:Ao.cube.fragmentShader,side:ds,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(w,S,b){this.matrixWorld.copyPosition(b.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),c.material.uniforms.envMap.value=y,c.material.uniforms.flipEnvMap.value=y.isCubeTexture&&y.isRenderTargetTexture===!1?-1:1,(u!==y||h!==y.version||f!==t.toneMapping)&&(c.material.needsUpdate=!0,u=y,h=y.version,f=t.toneMapping),c.layers.enableAll(),m.unshift(c,c.geometry,c.material,0,0,null)):y&&y.isTexture&&(l===void 0&&(l=new Yi(new Wd(2,2),new ha({name:"BackgroundMaterial",uniforms:Cd(Ao.background.uniforms),vertexShader:Ao.background.vertexShader,fragmentShader:Ao.background.fragmentShader,side:th,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(l)),l.material.uniforms.t2D.value=y,y.matrixAutoUpdate===!0&&y.updateMatrix(),l.material.uniforms.uvTransform.value.copy(y.matrix),(u!==y||h!==y.version||f!==t.toneMapping)&&(l.material.needsUpdate=!0,u=y,h=y.version,f=t.toneMapping),l.layers.enableAll(),m.unshift(l,l.geometry,l.material,0,0,null))}function p(m,g){n.buffers.color.setClear(m.r,m.g,m.b,g,s)}return{getClearColor:function(){return o},setClearColor:function(m,g=1){o.set(m),a=g,p(o,a)},getClearAlpha:function(){return a},setClearAlpha:function(m){a=m,p(o,a)},render:d}}function qee(t,e,n,i){const r=t.getParameter(t.MAX_VERTEX_ATTRIBS),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||s!==null,a={},l=g(null);let c=l,u=!1;function h(k,X,Y,Z,G){let O=!1;if(o){const z=m(Z,Y,X);c!==z&&(c=z,d(c.object)),O=_(k,Z,Y,G),O&&y(k,Z,Y,G)}else{const z=X.wireframe===!0;(c.geometry!==Z.id||c.program!==Y.id||c.wireframe!==z)&&(c.geometry=Z.id,c.program=Y.id,c.wireframe=z,O=!0)}G!==null&&n.update(G,t.ELEMENT_ARRAY_BUFFER),(O||u)&&(u=!1,M(k,X,Y,Z),G!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.get(G).buffer))}function f(){return i.isWebGL2?t.createVertexArray():s.createVertexArrayOES()}function d(k){return i.isWebGL2?t.bindVertexArray(k):s.bindVertexArrayOES(k)}function p(k){return i.isWebGL2?t.deleteVertexArray(k):s.deleteVertexArrayOES(k)}function m(k,X,Y){const Z=Y.wireframe===!0;let G=a[k.id];G===void 0&&(G={},a[k.id]=G);let O=G[X.id];O===void 0&&(O={},G[X.id]=O);let z=O[Z];return z===void 0&&(z=g(f()),O[Z]=z),z}function g(k){const X=[],Y=[],Z=[];for(let G=0;G<r;G++)X[G]=0,Y[G]=0,Z[G]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:X,enabledAttributes:Y,attributeDivisors:Z,object:k,attributes:{},index:null}}function _(k,X,Y,Z){const G=c.attributes,O=X.attributes;let z=0;const Q=Y.getAttributes();for(const H in Q)if(Q[H].location>=0){const j=G[H];let oe=O[H];if(oe===void 0&&(H==="instanceMatrix"&&k.instanceMatrix&&(oe=k.instanceMatrix),H==="instanceColor"&&k.instanceColor&&(oe=k.instanceColor)),j===void 0||j.attribute!==oe||oe&&j.data!==oe.data)return!0;z++}return c.attributesNum!==z||c.index!==Z}function y(k,X,Y,Z){const G={},O=X.attributes;let z=0;const Q=Y.getAttributes();for(const H in Q)if(Q[H].location>=0){let j=O[H];j===void 0&&(H==="instanceMatrix"&&k.instanceMatrix&&(j=k.instanceMatrix),H==="instanceColor"&&k.instanceColor&&(j=k.instanceColor));const oe={};oe.attribute=j,j&&j.data&&(oe.data=j.data),G[H]=oe,z++}c.attributes=G,c.attributesNum=z,c.index=Z}function x(){const k=c.newAttributes;for(let X=0,Y=k.length;X<Y;X++)k[X]=0}function E(k){w(k,0)}function w(k,X){const Y=c.newAttributes,Z=c.enabledAttributes,G=c.attributeDivisors;Y[k]=1,Z[k]===0&&(t.enableVertexAttribArray(k),Z[k]=1),G[k]!==X&&((i.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](k,X),G[k]=X)}function S(){const k=c.newAttributes,X=c.enabledAttributes;for(let Y=0,Z=X.length;Y<Z;Y++)X[Y]!==k[Y]&&(t.disableVertexAttribArray(Y),X[Y]=0)}function b(k,X,Y,Z,G,O){i.isWebGL2===!0&&(Y===t.INT||Y===t.UNSIGNED_INT)?t.vertexAttribIPointer(k,X,Y,G,O):t.vertexAttribPointer(k,X,Y,Z,G,O)}function M(k,X,Y,Z){if(i.isWebGL2===!1&&(k.isInstancedMesh||Z.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;x();const G=Z.attributes,O=Y.getAttributes(),z=X.defaultAttributeValues;for(const Q in O){const H=O[Q];if(H.location>=0){let J=G[Q];if(J===void 0&&(Q==="instanceMatrix"&&k.instanceMatrix&&(J=k.instanceMatrix),Q==="instanceColor"&&k.instanceColor&&(J=k.instanceColor)),J!==void 0){const j=J.normalized,oe=J.itemSize,K=n.get(J);if(K===void 0)continue;const ce=K.buffer,he=K.type,ve=K.bytesPerElement;if(J.isInterleavedBufferAttribute){const Me=J.data,Se=Me.stride,le=J.offset;if(Me.isInstancedInterleavedBuffer){for(let pe=0;pe<H.locationSize;pe++)w(H.location+pe,Me.meshPerAttribute);k.isInstancedMesh!==!0&&Z._maxInstanceCount===void 0&&(Z._maxInstanceCount=Me.meshPerAttribute*Me.count)}else for(let pe=0;pe<H.locationSize;pe++)E(H.location+pe);t.bindBuffer(t.ARRAY_BUFFER,ce);for(let pe=0;pe<H.locationSize;pe++)b(H.location+pe,oe/H.locationSize,he,j,Se*ve,(le+oe/H.locationSize*pe)*ve)}else{if(J.isInstancedBufferAttribute){for(let Me=0;Me<H.locationSize;Me++)w(H.location+Me,J.meshPerAttribute);k.isInstancedMesh!==!0&&Z._maxInstanceCount===void 0&&(Z._maxInstanceCount=J.meshPerAttribute*J.count)}else for(let Me=0;Me<H.locationSize;Me++)E(H.location+Me);t.bindBuffer(t.ARRAY_BUFFER,ce);for(let Me=0;Me<H.locationSize;Me++)b(H.location+Me,oe/H.locationSize,he,j,oe*ve,oe/H.locationSize*Me*ve)}}else if(z!==void 0){const j=z[Q];if(j!==void 0)switch(j.length){case 2:t.vertexAttrib2fv(H.location,j);break;case 3:t.vertexAttrib3fv(H.location,j);break;case 4:t.vertexAttrib4fv(H.location,j);break;default:t.vertexAttrib1fv(H.location,j)}}}}S()}function T(){F();for(const k in a){const X=a[k];for(const Y in X){const Z=X[Y];for(const G in Z)p(Z[G].object),delete Z[G];delete X[Y]}delete a[k]}}function B(k){if(a[k.id]===void 0)return;const X=a[k.id];for(const Y in X){const Z=X[Y];for(const G in Z)p(Z[G].object),delete Z[G];delete X[Y]}delete a[k.id]}function L(k){for(const X in a){const Y=a[X];if(Y[k.id]===void 0)continue;const Z=Y[k.id];for(const G in Z)p(Z[G].object),delete Z[G];delete Y[k.id]}}function F(){U(),u=!0,c!==l&&(c=l,d(c.object))}function U(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:h,reset:F,resetDefaultState:U,dispose:T,releaseStatesOfGeometry:B,releaseStatesOfProgram:L,initAttributes:x,enableAttribute:E,disableUnusedAttributes:S}}function Jee(t,e,n,i){const r=i.isWebGL2;let s;function o(c){s=c}function a(c,u){t.drawArrays(s,c,u),n.update(u,s,1)}function l(c,u,h){if(h===0)return;let f,d;if(r)f=t,d="drawArraysInstanced";else if(f=e.get("ANGLE_instanced_arrays"),d="drawArraysInstancedANGLE",f===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}f[d](s,c,u,h),n.update(u,s,h)}this.setMode=o,this.render=a,this.renderInstances=l}function Kee(t,e,n){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const b=e.get("EXT_texture_filter_anisotropic");i=t.getParameter(b.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(b){if(b==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";b="mediump"}return b==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&t instanceof WebGL2ComputeRenderingContext;let a=n.precision!==void 0?n.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),u=n.logarithmicDepthBuffer===!0,h=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),f=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),d=t.getParameter(t.MAX_TEXTURE_SIZE),p=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),m=t.getParameter(t.MAX_VERTEX_ATTRIBS),g=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),_=t.getParameter(t.MAX_VARYING_VECTORS),y=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),x=f>0,E=o||e.has("OES_texture_float"),w=x&&E,S=o?t.getParameter(t.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:r,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:u,maxTextures:h,maxVertexTextures:f,maxTextureSize:d,maxCubemapSize:p,maxAttributes:m,maxVertexUniforms:g,maxVaryings:_,maxFragmentUniforms:y,vertexTextures:x,floatFragmentTextures:E,floatVertexTextures:w,maxSamples:S}}function Zee(t){const e=this;let n=null,i=0,r=!1,s=!1;const o=new Vl,a=new Wr,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,f,d){const p=h.length!==0||f||i!==0||r;return r=f,n=u(h,d,0),i=h.length,p},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1,c()},this.setState=function(h,f,d){const p=h.clippingPlanes,m=h.clipIntersection,g=h.clipShadows,_=t.get(h);if(!r||p===null||p.length===0||s&&!g)s?u(null):c();else{const y=s?0:i,x=y*4;let E=_.clippingState||null;l.value=E,E=u(p,f,x,d);for(let w=0;w!==x;++w)E[w]=n[w];_.clippingState=E,this.numIntersection=m?this.numPlanes:0,this.numPlanes+=y}};function c(){l.value!==n&&(l.value=n,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(h,f,d,p){const m=h!==null?h.length:0;let g=null;if(m!==0){if(g=l.value,p!==!0||g===null){const _=d+m*4,y=f.matrixWorldInverse;a.getNormalMatrix(y),(g===null||g.length<_)&&(g=new Float32Array(_));for(let x=0,E=d;x!==m;++x,E+=4)o.copy(h[x]).applyMatrix4(y,a),o.normal.toArray(g,E),g[E+3]=o.constant}l.value=g,l.needsUpdate=!0}return e.numPlanes=m,e.numIntersection=0,g}}function $ee(t){let e=new WeakMap;function n(o,a){return a===wm?o.mapping=vc:a===Mm&&(o.mapping=_c),o}function i(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===wm||a===Mm)if(e.has(o)){const l=e.get(o).texture;return n(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new r8(l.height/2);return c.fromEquirectangularTexture(t,o),e.set(o,c),o.addEventListener("dispose",r),n(c.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class Dy extends Ry{constructor(e=-1,n=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+n,l=r-n;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const jf=4,sP=[.125,.215,.35,.446,.526,.582],_u=20,IE=new Dy,oP=new ot;let TE=null;const Au=(1+Math.sqrt(5))/2,af=1/Au,aP=[new te(1,1,1),new te(-1,1,1),new te(1,1,-1),new te(-1,1,-1),new te(0,Au,af),new te(0,Au,-af),new te(af,0,Au),new te(-af,0,Au),new te(Au,af,0),new te(-Au,af,0)];class RC{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,i=.1,r=100){TE=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),n>0&&this._blur(s,0,0,n),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=uP(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=cP(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(TE),e.scissorTest=!1,ug(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===vc||e.mapping===_c?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),TE=this._renderer.getRenderTarget();const i=n||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,i={magFilter:ni,minFilter:ni,generateMipmaps:!1,type:Md,format:Xs,encoding:xc,depthBuffer:!1},r=lP(e,n,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=lP(e,n,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=ete(s)),this._blurMaterial=tte(s,e,n)}return r}_compileMaterial(e){const n=new Yi(this._lodPlanes[0],e);this._renderer.compile(n,IE)}_sceneToCubeUV(e,n,i,r){const a=new Xi(90,1,n,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,h=u.autoClear,f=u.toneMapping;u.getClearColor(oP),u.toneMapping=aa,u.autoClear=!1;const d=new Bc({name:"PMREM.Background",side:ds,depthWrite:!1,depthTest:!1}),p=new Yi(new Rc,d);let m=!1;const g=e.background;g?g.isColor&&(d.color.copy(g),e.background=null,m=!0):(d.color.copy(oP),m=!0);for(let _=0;_<6;_++){const y=_%3;y===0?(a.up.set(0,l[_],0),a.lookAt(c[_],0,0)):y===1?(a.up.set(0,0,l[_]),a.lookAt(0,c[_],0)):(a.up.set(0,l[_],0),a.lookAt(0,0,c[_]));const x=this._cubeSize;ug(r,y*x,_>2?x:0,x,x),u.setRenderTarget(r),m&&u.render(p,a),u.render(e,a)}p.geometry.dispose(),p.material.dispose(),u.toneMapping=f,u.autoClear=h,e.background=g}_textureToCubeUV(e,n){const i=this._renderer,r=e.mapping===vc||e.mapping===_c;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=uP()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=cP());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Yi(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;ug(n,0,0,3*l,2*l),i.setRenderTarget(n),i.render(o,IE)}_applyPMREM(e){const n=this._renderer,i=n.autoClear;n.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),o=aP[(r-1)%aP.length];this._blur(e,r-1,r,s,o)}n.autoClear=i}_blur(e,n,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,n,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,n,i,r,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,h=new Yi(this._lodPlanes[r],c),f=c.uniforms,d=this._sizeLods[i]-1,p=isFinite(s)?Math.PI/(2*d):2*Math.PI/(2*_u-1),m=s/p,g=isFinite(s)?1+Math.floor(u*m):_u;g>_u&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${g} samples when the maximum is set to ${_u}`);const _=[];let y=0;for(let b=0;b<_u;++b){const M=b/m,T=Math.exp(-M*M/2);_.push(T),b===0?y+=T:b<g&&(y+=2*T)}for(let b=0;b<_.length;b++)_[b]=_[b]/y;f.envMap.value=e.texture,f.samples.value=g,f.weights.value=_,f.latitudinal.value=o==="latitudinal",a&&(f.poleAxis.value=a);const{_lodMax:x}=this;f.dTheta.value=p,f.mipInt.value=x-i;const E=this._sizeLods[r],w=3*E*(r>x-jf?r-x+jf:0),S=4*(this._cubeSize-E);ug(n,w,S,3*E,2*E),l.setRenderTarget(n),l.render(h,IE)}}function ete(t){const e=[],n=[],i=[];let r=t;const s=t-jf+1+sP.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);n.push(a);let l=1/a;o>t-jf?l=sP[o-t+jf-1]:o===0&&(l=0),i.push(l);const c=1/(a-2),u=-c,h=1+c,f=[u,u,h,u,h,h,u,u,h,h,u,h],d=6,p=6,m=3,g=2,_=1,y=new Float32Array(m*p*d),x=new Float32Array(g*p*d),E=new Float32Array(_*p*d);for(let S=0;S<d;S++){const b=S%3*2/3-1,M=S>2?0:-1,T=[b,M,0,b+2/3,M,0,b+2/3,M+1,0,b,M,0,b+2/3,M+1,0,b,M+1,0];y.set(T,m*p*S),x.set(f,g*p*S);const B=[S,S,S,S,S,S];E.set(B,_*p*S)}const w=new zt;w.setAttribute("position",new En(y,m)),w.setAttribute("uv",new En(x,g)),w.setAttribute("faceIndex",new En(E,_)),e.push(w),r>jf&&r--}return{lodPlanes:e,sizeLods:n,sigmas:i}}function lP(t,e,n){const i=new eo(t,e,n);return i.texture.mapping=Hd,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function ug(t,e,n,i,r){t.viewport.set(e,n,i,r),t.scissor.set(e,n,i,r)}function tte(t,e,n){const i=new Float32Array(_u),r=new te(0,1,0);return new ha({name:"SphericalGaussianBlur",defines:{n:_u,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:Kb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:$a,depthTest:!1,depthWrite:!1})}function cP(){return new ha({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Kb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:$a,depthTest:!1,depthWrite:!1})}function uP(){return new ha({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Kb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:$a,depthTest:!1,depthWrite:!1})}function Kb(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function nte(t){let e=new WeakMap,n=null;function i(a){if(a&&a.isTexture){const l=a.mapping,c=l===wm||l===Mm,u=l===vc||l===_c;if(c||u)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let h=e.get(a);return n===null&&(n=new RC(t)),h=c?n.fromEquirectangular(a,h):n.fromCubemap(a,h),e.set(a,h),h.texture}else{if(e.has(a))return e.get(a).texture;{const h=a.image;if(c&&h&&h.height>0||u&&h&&r(h)){n===null&&(n=new RC(t));const f=c?n.fromEquirectangular(a):n.fromCubemap(a);return e.set(a,f),a.addEventListener("dispose",s),f.texture}else return null}}}return a}function r(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:i,dispose:o}}function ite(t){const e={};function n(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(i)}return e[i]=r,r}return{has:function(i){return n(i)!==null},init:function(i){i.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(i){const r=n(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function rte(t,e,n,i){const r={},s=new WeakMap;function o(h){const f=h.target;f.index!==null&&e.remove(f.index);for(const p in f.attributes)e.remove(f.attributes[p]);f.removeEventListener("dispose",o),delete r[f.id];const d=s.get(f);d&&(e.remove(d),s.delete(f)),i.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,n.memory.geometries--}function a(h,f){return r[f.id]===!0||(f.addEventListener("dispose",o),r[f.id]=!0,n.memory.geometries++),f}function l(h){const f=h.attributes;for(const p in f)e.update(f[p],t.ARRAY_BUFFER);const d=h.morphAttributes;for(const p in d){const m=d[p];for(let g=0,_=m.length;g<_;g++)e.update(m[g],t.ARRAY_BUFFER)}}function c(h){const f=[],d=h.index,p=h.attributes.position;let m=0;if(d!==null){const y=d.array;m=d.version;for(let x=0,E=y.length;x<E;x+=3){const w=y[x+0],S=y[x+1],b=y[x+2];f.push(w,S,S,b,b,w)}}else{const y=p.array;m=p.version;for(let x=0,E=y.length/3-1;x<E;x+=3){const w=x+0,S=x+1,b=x+2;f.push(w,S,S,b,b,w)}}const g=new(e8(f)?Jb:qb)(f,1);g.version=m;const _=s.get(h);_&&e.remove(_),s.set(h,g)}function u(h){const f=s.get(h);if(f){const d=h.index;d!==null&&f.version<d.version&&c(h)}else c(h);return s.get(h)}return{get:a,update:l,getWireframeAttribute:u}}function ste(t,e,n,i){const r=i.isWebGL2;let s;function o(f){s=f}let a,l;function c(f){a=f.type,l=f.bytesPerElement}function u(f,d){t.drawElements(s,d,a,f*l),n.update(d,s,1)}function h(f,d,p){if(p===0)return;let m,g;if(r)m=t,g="drawElementsInstanced";else if(m=e.get("ANGLE_instanced_arrays"),g="drawElementsInstancedANGLE",m===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}m[g](s,d,a,f*l,p),n.update(d,s,p)}this.setMode=o,this.setIndex=c,this.render=u,this.renderInstances=h}function ote(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(n.calls++,o){case t.TRIANGLES:n.triangles+=a*(s/3);break;case t.LINES:n.lines+=a*(s/2);break;case t.LINE_STRIP:n.lines+=a*(s-1);break;case t.LINE_LOOP:n.lines+=a*s;break;case t.POINTS:n.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:r,update:i}}function ate(t,e){return t[0]-e[0]}function lte(t,e){return Math.abs(e[1])-Math.abs(t[1])}function cte(t,e,n){const i={},r=new Float32Array(8),s=new WeakMap,o=new An,a=[];for(let c=0;c<8;c++)a[c]=[c,0];function l(c,u,h,f){const d=c.morphTargetInfluences;if(e.isWebGL2===!0){const m=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,g=m!==void 0?m.length:0;let _=s.get(u);if(_===void 0||_.count!==g){let Y=function(){k.dispose(),s.delete(u),u.removeEventListener("dispose",Y)};var p=Y;_!==void 0&&_.texture.dispose();const E=u.morphAttributes.position!==void 0,w=u.morphAttributes.normal!==void 0,S=u.morphAttributes.color!==void 0,b=u.morphAttributes.position||[],M=u.morphAttributes.normal||[],T=u.morphAttributes.color||[];let B=0;E===!0&&(B=1),w===!0&&(B=2),S===!0&&(B=3);let L=u.attributes.position.count*B,F=1;L>e.maxTextureSize&&(F=Math.ceil(L/e.maxTextureSize),L=e.maxTextureSize);const U=new Float32Array(L*F*4*g),k=new l1(U,L,F,g);k.type=Xa,k.needsUpdate=!0;const X=B*4;for(let Z=0;Z<g;Z++){const G=b[Z],O=M[Z],z=T[Z],Q=L*F*4*Z;for(let H=0;H<G.count;H++){const J=H*X;E===!0&&(o.fromBufferAttribute(G,H),U[Q+J+0]=o.x,U[Q+J+1]=o.y,U[Q+J+2]=o.z,U[Q+J+3]=0),w===!0&&(o.fromBufferAttribute(O,H),U[Q+J+4]=o.x,U[Q+J+5]=o.y,U[Q+J+6]=o.z,U[Q+J+7]=0),S===!0&&(o.fromBufferAttribute(z,H),U[Q+J+8]=o.x,U[Q+J+9]=o.y,U[Q+J+10]=o.z,U[Q+J+11]=z.itemSize===4?o.w:1)}}_={count:g,texture:k,size:new Ve(L,F)},s.set(u,_),u.addEventListener("dispose",Y)}let y=0;for(let E=0;E<d.length;E++)y+=d[E];const x=u.morphTargetsRelative?1:1-y;f.getUniforms().setValue(t,"morphTargetBaseInfluence",x),f.getUniforms().setValue(t,"morphTargetInfluences",d),f.getUniforms().setValue(t,"morphTargetsTexture",_.texture,n),f.getUniforms().setValue(t,"morphTargetsTextureSize",_.size)}else{const m=d===void 0?0:d.length;let g=i[u.id];if(g===void 0||g.length!==m){g=[];for(let w=0;w<m;w++)g[w]=[w,0];i[u.id]=g}for(let w=0;w<m;w++){const S=g[w];S[0]=w,S[1]=d[w]}g.sort(lte);for(let w=0;w<8;w++)w<m&&g[w][1]?(a[w][0]=g[w][0],a[w][1]=g[w][1]):(a[w][0]=Number.MAX_SAFE_INTEGER,a[w][1]=0);a.sort(ate);const _=u.morphAttributes.position,y=u.morphAttributes.normal;let x=0;for(let w=0;w<8;w++){const S=a[w],b=S[0],M=S[1];b!==Number.MAX_SAFE_INTEGER&&M?(_&&u.getAttribute("morphTarget"+w)!==_[b]&&u.setAttribute("morphTarget"+w,_[b]),y&&u.getAttribute("morphNormal"+w)!==y[b]&&u.setAttribute("morphNormal"+w,y[b]),r[w]=M,x+=M):(_&&u.hasAttribute("morphTarget"+w)===!0&&u.deleteAttribute("morphTarget"+w),y&&u.hasAttribute("morphNormal"+w)===!0&&u.deleteAttribute("morphNormal"+w),r[w]=0)}const E=u.morphTargetsRelative?1:1-x;f.getUniforms().setValue(t,"morphTargetBaseInfluence",E),f.getUniforms().setValue(t,"morphTargetInfluences",r)}}return{update:l}}function ute(t,e,n,i){let r=new WeakMap;function s(l){const c=i.render.frame,u=l.geometry,h=e.get(l,u);return r.get(h)!==c&&(e.update(h),r.set(h,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),n.update(l.instanceMatrix,t.ARRAY_BUFFER),l.instanceColor!==null&&n.update(l.instanceColor,t.ARRAY_BUFFER)),h}function o(){r=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),n.remove(c.instanceMatrix),c.instanceColor!==null&&n.remove(c.instanceColor)}return{update:s,dispose:o}}const o8=new xi,a8=new l1,l8=new Ty,c8=new u1,hP=[],fP=[],dP=new Float32Array(16),pP=new Float32Array(9),mP=new Float32Array(4);function jd(t,e,n){const i=t[0];if(i<=0||i>0)return t;const r=e*n;let s=hP[r];if(s===void 0&&(s=new Float32Array(r),hP[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=n,t[o].toArray(s,a)}return s}function Ei(t,e){if(t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function wi(t,e){for(let n=0,i=e.length;n<i;n++)t[n]=e[n]}function Fy(t,e){let n=fP[e];n===void 0&&(n=new Int32Array(e),fP[e]=n);for(let i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function hte(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function fte(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Ei(n,e))return;t.uniform2fv(this.addr,e),wi(n,e)}}function dte(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Ei(n,e))return;t.uniform3fv(this.addr,e),wi(n,e)}}function pte(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Ei(n,e))return;t.uniform4fv(this.addr,e),wi(n,e)}}function mte(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(Ei(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),wi(n,e)}else{if(Ei(n,i))return;mP.set(i),t.uniformMatrix2fv(this.addr,!1,mP),wi(n,i)}}function Ate(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(Ei(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),wi(n,e)}else{if(Ei(n,i))return;pP.set(i),t.uniformMatrix3fv(this.addr,!1,pP),wi(n,i)}}function gte(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(Ei(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),wi(n,e)}else{if(Ei(n,i))return;dP.set(i),t.uniformMatrix4fv(this.addr,!1,dP),wi(n,i)}}function vte(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function _te(t,e){const n=this.cache;Ei(n,e)||(t.uniform2iv(this.addr,e),wi(n,e))}function yte(t,e){const n=this.cache;Ei(n,e)||(t.uniform3iv(this.addr,e),wi(n,e))}function xte(t,e){const n=this.cache;Ei(n,e)||(t.uniform4iv(this.addr,e),wi(n,e))}function Ete(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function wte(t,e){const n=this.cache;Ei(n,e)||(t.uniform2uiv(this.addr,e),wi(n,e))}function Mte(t,e){const n=this.cache;Ei(n,e)||(t.uniform3uiv(this.addr,e),wi(n,e))}function Cte(t,e){const n=this.cache;Ei(n,e)||(t.uniform4uiv(this.addr,e),wi(n,e))}function Ste(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2D(e||o8,r)}function bte(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||l8,r)}function Ite(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(e||c8,r)}function Tte(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||a8,r)}function Bte(t){switch(t){case 5126:return hte;case 35664:return fte;case 35665:return dte;case 35666:return pte;case 35674:return mte;case 35675:return Ate;case 35676:return gte;case 5124:case 35670:return vte;case 35667:case 35671:return _te;case 35668:case 35672:return yte;case 35669:case 35673:return xte;case 5125:return Ete;case 36294:return wte;case 36295:return Mte;case 36296:return Cte;case 35678:case 36198:case 36298:case 36306:case 35682:return Ste;case 35679:case 36299:case 36307:return bte;case 35680:case 36300:case 36308:case 36293:return Ite;case 36289:case 36303:case 36311:case 36292:return Tte}}function Rte(t,e){t.uniform1fv(this.addr,e)}function Pte(t,e){const n=jd(e,this.size,2);t.uniform2fv(this.addr,n)}function Dte(t,e){const n=jd(e,this.size,3);t.uniform3fv(this.addr,n)}function Fte(t,e){const n=jd(e,this.size,4);t.uniform4fv(this.addr,n)}function Lte(t,e){const n=jd(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function kte(t,e){const n=jd(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function Ute(t,e){const n=jd(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function Ote(t,e){t.uniform1iv(this.addr,e)}function Nte(t,e){t.uniform2iv(this.addr,e)}function Gte(t,e){t.uniform3iv(this.addr,e)}function zte(t,e){t.uniform4iv(this.addr,e)}function Qte(t,e){t.uniform1uiv(this.addr,e)}function Hte(t,e){t.uniform2uiv(this.addr,e)}function Vte(t,e){t.uniform3uiv(this.addr,e)}function Wte(t,e){t.uniform4uiv(this.addr,e)}function jte(t,e,n){const i=this.cache,r=e.length,s=Fy(n,r);Ei(i,s)||(t.uniform1iv(this.addr,s),wi(i,s));for(let o=0;o!==r;++o)n.setTexture2D(e[o]||o8,s[o])}function Xte(t,e,n){const i=this.cache,r=e.length,s=Fy(n,r);Ei(i,s)||(t.uniform1iv(this.addr,s),wi(i,s));for(let o=0;o!==r;++o)n.setTexture3D(e[o]||l8,s[o])}function Yte(t,e,n){const i=this.cache,r=e.length,s=Fy(n,r);Ei(i,s)||(t.uniform1iv(this.addr,s),wi(i,s));for(let o=0;o!==r;++o)n.setTextureCube(e[o]||c8,s[o])}function qte(t,e,n){const i=this.cache,r=e.length,s=Fy(n,r);Ei(i,s)||(t.uniform1iv(this.addr,s),wi(i,s));for(let o=0;o!==r;++o)n.setTexture2DArray(e[o]||a8,s[o])}function Jte(t){switch(t){case 5126:return Rte;case 35664:return Pte;case 35665:return Dte;case 35666:return Fte;case 35674:return Lte;case 35675:return kte;case 35676:return Ute;case 5124:case 35670:return Ote;case 35667:case 35671:return Nte;case 35668:case 35672:return Gte;case 35669:case 35673:return zte;case 5125:return Qte;case 36294:return Hte;case 36295:return Vte;case 36296:return Wte;case 35678:case 36198:case 36298:case 36306:case 35682:return jte;case 35679:case 36299:case 36307:return Xte;case 35680:case 36300:case 36308:case 36293:return Yte;case 36289:case 36303:case 36311:case 36292:return qte}}class Kte{constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.setValue=Bte(n.type)}}class Zte{constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.size=n.size,this.setValue=Jte(n.type)}}class $te{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,n[a.id],i)}}}const BE=/(\w+)(\])?(\[|\.)?/g;function AP(t,e){t.seq.push(e),t.map[e.id]=e}function ene(t,e,n){const i=t.name,r=i.length;for(BE.lastIndex=0;;){const s=BE.exec(i),o=BE.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===r){AP(n,c===void 0?new Kte(a,t,e):new Zte(a,t,e));break}else{let h=n.map[a];h===void 0&&(h=new $te(a),AP(n,h)),n=h}}}class Gv{constructor(e,n){this.seq=[],this.map={};const i=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(n,r),o=e.getUniformLocation(n,s.name);ene(s,o,this)}}setValue(e,n,i,r){const s=this.map[n];s!==void 0&&s.setValue(e,i,r)}setOptional(e,n,i){const r=n[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,n,i,r){for(let s=0,o=n.length;s!==o;++s){const a=n[s],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,n){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in n&&i.push(o)}return i}}function gP(t,e,n){const i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}let tne=0;function nne(t,e){const n=t.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,n.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${n[o]}`)}return i.join(`
`)}function ine(t){switch(t){case xc:return["Linear","( value )"];case Ln:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}function vP(t,e,n){const i=t.getShaderParameter(e,t.COMPILE_STATUS),r=t.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return n.toUpperCase()+`

`+r+`

`+nne(t.getShaderSource(e),o)}else return r}function rne(t,e){const n=ine(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function sne(t,e){let n;switch(e){case SO:n="Linear";break;case bO:n="Reinhard";break;case IO:n="OptimizedCineon";break;case TO:n="ACESFilmic";break;case BO:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function one(t){return[t.extensionDerivatives||!!t.envMapCubeUVHeight||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||t.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(bp).join(`
`)}function ane(t){const e=[];for(const n in t){const i=t[n];i!==!1&&e.push("#define "+n+" "+i)}return e.join(`
`)}function lne(t,e){const n={},i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=t.getActiveAttrib(e,r),o=s.name;let a=1;s.type===t.FLOAT_MAT2&&(a=2),s.type===t.FLOAT_MAT3&&(a=3),s.type===t.FLOAT_MAT4&&(a=4),n[o]={type:s.type,location:t.getAttribLocation(e,o),locationSize:a}}return n}function bp(t){return t!==""}function _P(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function yP(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const cne=/^[ \t]*#include +<([\w\d./]+)>/gm;function PC(t){return t.replace(cne,une)}function une(t,e){const n=Ht[e];if(n===void 0)throw new Error("Can not resolve #include <"+e+">");return PC(n)}const hne=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function xP(t){return t.replace(hne,fne)}function fne(t,e,n,i){let r="";for(let s=parseInt(e);s<parseInt(n);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function EP(t){let e="precision "+t.precision+` float;
precision `+t.precision+" int;";return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function dne(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===zb?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===rO?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===Vf&&(e="SHADOWMAP_TYPE_VSM"),e}function pne(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case vc:case _c:e="ENVMAP_TYPE_CUBE";break;case Hd:e="ENVMAP_TYPE_CUBE_UV";break}return e}function mne(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case _c:e="ENVMAP_MODE_REFRACTION";break}return e}function Ane(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case a1:e="ENVMAP_BLENDING_MULTIPLY";break;case MO:e="ENVMAP_BLENDING_MIX";break;case CO:e="ENVMAP_BLENDING_ADD";break}return e}function gne(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:i,maxMip:n}}function vne(t,e,n,i){const r=t.getContext(),s=n.defines;let o=n.vertexShader,a=n.fragmentShader;const l=dne(n),c=pne(n),u=mne(n),h=Ane(n),f=gne(n),d=n.isWebGL2?"":one(n),p=ane(s),m=r.createProgram();let g,_,y=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(g=[p].filter(bp).join(`
`),g.length>0&&(g+=`
`),_=[d,p].filter(bp).join(`
`),_.length>0&&(_+=`
`)):(g=[EP(n),"#define SHADER_NAME "+n.shaderName,p,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(bp).join(`
`),_=[d,EP(n),"#define SHADER_NAME "+n.shaderName,p,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+h:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==aa?"#define TONE_MAPPING":"",n.toneMapping!==aa?Ht.tonemapping_pars_fragment:"",n.toneMapping!==aa?sne("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Ht.encodings_pars_fragment,rne("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(bp).join(`
`)),o=PC(o),o=_P(o,n),o=yP(o,n),a=PC(a),a=_P(a,n),a=yP(a,n),o=xP(o),a=xP(a),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(y=`#version 300 es
`,g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,_=["#define varying in",n.glslVersion===TC?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===TC?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+_);const x=y+g+o,E=y+_+a,w=gP(r,r.VERTEX_SHADER,x),S=gP(r,r.FRAGMENT_SHADER,E);if(r.attachShader(m,w),r.attachShader(m,S),n.index0AttributeName!==void 0?r.bindAttribLocation(m,0,n.index0AttributeName):n.morphTargets===!0&&r.bindAttribLocation(m,0,"position"),r.linkProgram(m),t.debug.checkShaderErrors){const T=r.getProgramInfoLog(m).trim(),B=r.getShaderInfoLog(w).trim(),L=r.getShaderInfoLog(S).trim();let F=!0,U=!0;if(r.getProgramParameter(m,r.LINK_STATUS)===!1){F=!1;const k=vP(r,w,"vertex"),X=vP(r,S,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(m,r.VALIDATE_STATUS)+`

Program Info Log: `+T+`
`+k+`
`+X)}else T!==""?console.warn("THREE.WebGLProgram: Program Info Log:",T):(B===""||L==="")&&(U=!1);U&&(this.diagnostics={runnable:F,programLog:T,vertexShader:{log:B,prefix:g},fragmentShader:{log:L,prefix:_}})}r.deleteShader(w),r.deleteShader(S);let b;this.getUniforms=function(){return b===void 0&&(b=new Gv(r,m)),b};let M;return this.getAttributes=function(){return M===void 0&&(M=lne(r,m)),M},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(m),this.program=void 0},this.name=n.shaderName,this.id=tne++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=w,this.fragmentShader=S,this}let _ne=0;class yne{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(n),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const i of n)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let i=n.get(e);return i===void 0&&(i=new Set,n.set(e,i)),i}_getShaderStage(e){const n=this.shaderCache;let i=n.get(e);return i===void 0&&(i=new xne(e),n.set(e,i)),i}}class xne{constructor(e){this.id=_ne++,this.code=e,this.usedTimes=0}}function Ene(t,e,n,i,r,s,o){const a=new By,l=new yne,c=[],u=r.isWebGL2,h=r.logarithmicDepthBuffer,f=r.vertexTextures;let d=r.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(M,T,B,L,F){const U=L.fog,k=F.geometry,X=M.isMeshStandardMaterial?L.environment:null,Y=(M.isMeshStandardMaterial?n:e).get(M.envMap||X),Z=!!Y&&Y.mapping===Hd?Y.image.height:null,G=p[M.type];M.precision!==null&&(d=r.getMaxPrecision(M.precision),d!==M.precision&&console.warn("THREE.WebGLProgram.getParameters:",M.precision,"not supported, using",d,"instead."));const O=k.morphAttributes.position||k.morphAttributes.normal||k.morphAttributes.color,z=O!==void 0?O.length:0;let Q=0;k.morphAttributes.position!==void 0&&(Q=1),k.morphAttributes.normal!==void 0&&(Q=2),k.morphAttributes.color!==void 0&&(Q=3);let H,J,j,oe;if(G){const Se=Ao[G];H=Se.vertexShader,J=Se.fragmentShader}else H=M.vertexShader,J=M.fragmentShader,l.update(M),j=l.getVertexShaderID(M),oe=l.getFragmentShaderID(M);const K=t.getRenderTarget(),ce=M.alphaTest>0,he=M.clearcoat>0,ve=M.iridescence>0;return{isWebGL2:u,shaderID:G,shaderName:M.type,vertexShader:H,fragmentShader:J,defines:M.defines,customVertexShaderID:j,customFragmentShaderID:oe,isRawShaderMaterial:M.isRawShaderMaterial===!0,glslVersion:M.glslVersion,precision:d,instancing:F.isInstancedMesh===!0,instancingColor:F.isInstancedMesh===!0&&F.instanceColor!==null,supportsVertexTextures:f,outputEncoding:K===null?t.outputEncoding:K.isXRRenderTarget===!0?K.texture.encoding:xc,map:!!M.map,matcap:!!M.matcap,envMap:!!Y,envMapMode:Y&&Y.mapping,envMapCubeUVHeight:Z,lightMap:!!M.lightMap,aoMap:!!M.aoMap,emissiveMap:!!M.emissiveMap,bumpMap:!!M.bumpMap,normalMap:!!M.normalMap,objectSpaceNormalMap:M.normalMapType===KO,tangentSpaceNormalMap:M.normalMapType===Tc,decodeVideoTexture:!!M.map&&M.map.isVideoTexture===!0&&M.map.encoding===Ln,clearcoat:he,clearcoatMap:he&&!!M.clearcoatMap,clearcoatRoughnessMap:he&&!!M.clearcoatRoughnessMap,clearcoatNormalMap:he&&!!M.clearcoatNormalMap,iridescence:ve,iridescenceMap:ve&&!!M.iridescenceMap,iridescenceThicknessMap:ve&&!!M.iridescenceThicknessMap,displacementMap:!!M.displacementMap,roughnessMap:!!M.roughnessMap,metalnessMap:!!M.metalnessMap,specularMap:!!M.specularMap,specularIntensityMap:!!M.specularIntensityMap,specularColorMap:!!M.specularColorMap,opaque:M.transparent===!1&&M.blending===Uu,alphaMap:!!M.alphaMap,alphaTest:ce,gradientMap:!!M.gradientMap,sheen:M.sheen>0,sheenColorMap:!!M.sheenColorMap,sheenRoughnessMap:!!M.sheenRoughnessMap,transmission:M.transmission>0,transmissionMap:!!M.transmissionMap,thicknessMap:!!M.thicknessMap,combine:M.combine,vertexTangents:!!M.normalMap&&!!k.attributes.tangent,vertexColors:M.vertexColors,vertexAlphas:M.vertexColors===!0&&!!k.attributes.color&&k.attributes.color.itemSize===4,vertexUvs:!!M.map||!!M.bumpMap||!!M.normalMap||!!M.specularMap||!!M.alphaMap||!!M.emissiveMap||!!M.roughnessMap||!!M.metalnessMap||!!M.clearcoatMap||!!M.clearcoatRoughnessMap||!!M.clearcoatNormalMap||!!M.iridescenceMap||!!M.iridescenceThicknessMap||!!M.displacementMap||!!M.transmissionMap||!!M.thicknessMap||!!M.specularIntensityMap||!!M.specularColorMap||!!M.sheenColorMap||!!M.sheenRoughnessMap,uvsVertexOnly:!(!!M.map||!!M.bumpMap||!!M.normalMap||!!M.specularMap||!!M.alphaMap||!!M.emissiveMap||!!M.roughnessMap||!!M.metalnessMap||!!M.clearcoatNormalMap||!!M.iridescenceMap||!!M.iridescenceThicknessMap||M.transmission>0||!!M.transmissionMap||!!M.thicknessMap||!!M.specularIntensityMap||!!M.specularColorMap||M.sheen>0||!!M.sheenColorMap||!!M.sheenRoughnessMap)&&!!M.displacementMap,fog:!!U,useFog:M.fog===!0,fogExp2:U&&U.isFogExp2,flatShading:!!M.flatShading,sizeAttenuation:M.sizeAttenuation,logarithmicDepthBuffer:h,skinning:F.isSkinnedMesh===!0,morphTargets:k.morphAttributes.position!==void 0,morphNormals:k.morphAttributes.normal!==void 0,morphColors:k.morphAttributes.color!==void 0,morphTargetsCount:z,morphTextureStride:Q,numDirLights:T.directional.length,numPointLights:T.point.length,numSpotLights:T.spot.length,numSpotLightMaps:T.spotLightMap.length,numRectAreaLights:T.rectArea.length,numHemiLights:T.hemi.length,numDirLightShadows:T.directionalShadowMap.length,numPointLightShadows:T.pointShadowMap.length,numSpotLightShadows:T.spotShadowMap.length,numSpotLightShadowsWithMaps:T.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:M.dithering,shadowMapEnabled:t.shadowMap.enabled&&B.length>0,shadowMapType:t.shadowMap.type,toneMapping:M.toneMapped?t.toneMapping:aa,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:M.premultipliedAlpha,doubleSided:M.side===ja,flipSided:M.side===ds,useDepthPacking:!!M.depthPacking,depthPacking:M.depthPacking||0,index0AttributeName:M.index0AttributeName,extensionDerivatives:M.extensions&&M.extensions.derivatives,extensionFragDepth:M.extensions&&M.extensions.fragDepth,extensionDrawBuffers:M.extensions&&M.extensions.drawBuffers,extensionShaderTextureLOD:M.extensions&&M.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||i.has("EXT_shader_texture_lod"),customProgramCacheKey:M.customProgramCacheKey()}}function g(M){const T=[];if(M.shaderID?T.push(M.shaderID):(T.push(M.customVertexShaderID),T.push(M.customFragmentShaderID)),M.defines!==void 0)for(const B in M.defines)T.push(B),T.push(M.defines[B]);return M.isRawShaderMaterial===!1&&(_(T,M),y(T,M),T.push(t.outputEncoding)),T.push(M.customProgramCacheKey),T.join()}function _(M,T){M.push(T.precision),M.push(T.outputEncoding),M.push(T.envMapMode),M.push(T.envMapCubeUVHeight),M.push(T.combine),M.push(T.vertexUvs),M.push(T.fogExp2),M.push(T.sizeAttenuation),M.push(T.morphTargetsCount),M.push(T.morphAttributeCount),M.push(T.numDirLights),M.push(T.numPointLights),M.push(T.numSpotLights),M.push(T.numSpotLightMaps),M.push(T.numHemiLights),M.push(T.numRectAreaLights),M.push(T.numDirLightShadows),M.push(T.numPointLightShadows),M.push(T.numSpotLightShadows),M.push(T.numSpotLightShadowsWithMaps),M.push(T.shadowMapType),M.push(T.toneMapping),M.push(T.numClippingPlanes),M.push(T.numClipIntersection),M.push(T.depthPacking)}function y(M,T){a.disableAll(),T.isWebGL2&&a.enable(0),T.supportsVertexTextures&&a.enable(1),T.instancing&&a.enable(2),T.instancingColor&&a.enable(3),T.map&&a.enable(4),T.matcap&&a.enable(5),T.envMap&&a.enable(6),T.lightMap&&a.enable(7),T.aoMap&&a.enable(8),T.emissiveMap&&a.enable(9),T.bumpMap&&a.enable(10),T.normalMap&&a.enable(11),T.objectSpaceNormalMap&&a.enable(12),T.tangentSpaceNormalMap&&a.enable(13),T.clearcoat&&a.enable(14),T.clearcoatMap&&a.enable(15),T.clearcoatRoughnessMap&&a.enable(16),T.clearcoatNormalMap&&a.enable(17),T.iridescence&&a.enable(18),T.iridescenceMap&&a.enable(19),T.iridescenceThicknessMap&&a.enable(20),T.displacementMap&&a.enable(21),T.specularMap&&a.enable(22),T.roughnessMap&&a.enable(23),T.metalnessMap&&a.enable(24),T.gradientMap&&a.enable(25),T.alphaMap&&a.enable(26),T.alphaTest&&a.enable(27),T.vertexColors&&a.enable(28),T.vertexAlphas&&a.enable(29),T.vertexUvs&&a.enable(30),T.vertexTangents&&a.enable(31),T.uvsVertexOnly&&a.enable(32),M.push(a.mask),a.disableAll(),T.fog&&a.enable(0),T.useFog&&a.enable(1),T.flatShading&&a.enable(2),T.logarithmicDepthBuffer&&a.enable(3),T.skinning&&a.enable(4),T.morphTargets&&a.enable(5),T.morphNormals&&a.enable(6),T.morphColors&&a.enable(7),T.premultipliedAlpha&&a.enable(8),T.shadowMapEnabled&&a.enable(9),T.physicallyCorrectLights&&a.enable(10),T.doubleSided&&a.enable(11),T.flipSided&&a.enable(12),T.useDepthPacking&&a.enable(13),T.dithering&&a.enable(14),T.specularIntensityMap&&a.enable(15),T.specularColorMap&&a.enable(16),T.transmission&&a.enable(17),T.transmissionMap&&a.enable(18),T.thicknessMap&&a.enable(19),T.sheen&&a.enable(20),T.sheenColorMap&&a.enable(21),T.sheenRoughnessMap&&a.enable(22),T.decodeVideoTexture&&a.enable(23),T.opaque&&a.enable(24),M.push(a.mask)}function x(M){const T=p[M.type];let B;if(T){const L=Ao[T];B=n8.clone(L.uniforms)}else B=M.uniforms;return B}function E(M,T){let B;for(let L=0,F=c.length;L<F;L++){const U=c[L];if(U.cacheKey===T){B=U,++B.usedTimes;break}}return B===void 0&&(B=new vne(t,T,M,s),c.push(B)),B}function w(M){if(--M.usedTimes===0){const T=c.indexOf(M);c[T]=c[c.length-1],c.pop(),M.destroy()}}function S(M){l.remove(M)}function b(){l.dispose()}return{getParameters:m,getProgramCacheKey:g,getUniforms:x,acquireProgram:E,releaseProgram:w,releaseShaderCache:S,programs:c,dispose:b}}function wne(){let t=new WeakMap;function e(s){let o=t.get(s);return o===void 0&&(o={},t.set(s,o)),o}function n(s){t.delete(s)}function i(s,o,a){t.get(s)[o]=a}function r(){t=new WeakMap}return{get:e,remove:n,update:i,dispose:r}}function Mne(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function wP(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function MP(){const t=[];let e=0;const n=[],i=[],r=[];function s(){e=0,n.length=0,i.length=0,r.length=0}function o(h,f,d,p,m,g){let _=t[e];return _===void 0?(_={id:h.id,object:h,geometry:f,material:d,groupOrder:p,renderOrder:h.renderOrder,z:m,group:g},t[e]=_):(_.id=h.id,_.object=h,_.geometry=f,_.material=d,_.groupOrder=p,_.renderOrder=h.renderOrder,_.z=m,_.group=g),e++,_}function a(h,f,d,p,m,g){const _=o(h,f,d,p,m,g);d.transmission>0?i.push(_):d.transparent===!0?r.push(_):n.push(_)}function l(h,f,d,p,m,g){const _=o(h,f,d,p,m,g);d.transmission>0?i.unshift(_):d.transparent===!0?r.unshift(_):n.unshift(_)}function c(h,f){n.length>1&&n.sort(h||Mne),i.length>1&&i.sort(f||wP),r.length>1&&r.sort(f||wP)}function u(){for(let h=e,f=t.length;h<f;h++){const d=t[h];if(d.id===null)break;d.id=null,d.object=null,d.geometry=null,d.material=null,d.group=null}}return{opaque:n,transmissive:i,transparent:r,init:s,push:a,unshift:l,finish:u,sort:c}}function Cne(){let t=new WeakMap;function e(i,r){const s=t.get(i);let o;return s===void 0?(o=new MP,t.set(i,[o])):r>=s.length?(o=new MP,s.push(o)):o=s[r],o}function n(){t=new WeakMap}return{get:e,dispose:n}}function Sne(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new te,color:new ot};break;case"SpotLight":n={position:new te,direction:new te,color:new ot,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new te,color:new ot,distance:0,decay:0};break;case"HemisphereLight":n={direction:new te,skyColor:new ot,groundColor:new ot};break;case"RectAreaLight":n={color:new ot,position:new te,halfWidth:new te,halfHeight:new te};break}return t[e.id]=n,n}}}function bne(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ve};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ve};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ve,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let Ine=0;function Tne(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function Bne(t,e){const n=new Sne,i=bne(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let u=0;u<9;u++)r.probe.push(new te);const s=new te,o=new Lt,a=new Lt;function l(u,h){let f=0,d=0,p=0;for(let L=0;L<9;L++)r.probe[L].set(0,0,0);let m=0,g=0,_=0,y=0,x=0,E=0,w=0,S=0,b=0,M=0;u.sort(Tne);const T=h!==!0?Math.PI:1;for(let L=0,F=u.length;L<F;L++){const U=u[L],k=U.color,X=U.intensity,Y=U.distance,Z=U.shadow&&U.shadow.map?U.shadow.map.texture:null;if(U.isAmbientLight)f+=k.r*X*T,d+=k.g*X*T,p+=k.b*X*T;else if(U.isLightProbe)for(let G=0;G<9;G++)r.probe[G].addScaledVector(U.sh.coefficients[G],X);else if(U.isDirectionalLight){const G=n.get(U);if(G.color.copy(U.color).multiplyScalar(U.intensity*T),U.castShadow){const O=U.shadow,z=i.get(U);z.shadowBias=O.bias,z.shadowNormalBias=O.normalBias,z.shadowRadius=O.radius,z.shadowMapSize=O.mapSize,r.directionalShadow[m]=z,r.directionalShadowMap[m]=Z,r.directionalShadowMatrix[m]=U.shadow.matrix,E++}r.directional[m]=G,m++}else if(U.isSpotLight){const G=n.get(U);G.position.setFromMatrixPosition(U.matrixWorld),G.color.copy(k).multiplyScalar(X*T),G.distance=Y,G.coneCos=Math.cos(U.angle),G.penumbraCos=Math.cos(U.angle*(1-U.penumbra)),G.decay=U.decay,r.spot[_]=G;const O=U.shadow;if(U.map&&(r.spotLightMap[b]=U.map,b++,O.updateMatrices(U),U.castShadow&&M++),r.spotLightMatrix[_]=O.matrix,U.castShadow){const z=i.get(U);z.shadowBias=O.bias,z.shadowNormalBias=O.normalBias,z.shadowRadius=O.radius,z.shadowMapSize=O.mapSize,r.spotShadow[_]=z,r.spotShadowMap[_]=Z,S++}_++}else if(U.isRectAreaLight){const G=n.get(U);G.color.copy(k).multiplyScalar(X),G.halfWidth.set(U.width*.5,0,0),G.halfHeight.set(0,U.height*.5,0),r.rectArea[y]=G,y++}else if(U.isPointLight){const G=n.get(U);if(G.color.copy(U.color).multiplyScalar(U.intensity*T),G.distance=U.distance,G.decay=U.decay,U.castShadow){const O=U.shadow,z=i.get(U);z.shadowBias=O.bias,z.shadowNormalBias=O.normalBias,z.shadowRadius=O.radius,z.shadowMapSize=O.mapSize,z.shadowCameraNear=O.camera.near,z.shadowCameraFar=O.camera.far,r.pointShadow[g]=z,r.pointShadowMap[g]=Z,r.pointShadowMatrix[g]=U.shadow.matrix,w++}r.point[g]=G,g++}else if(U.isHemisphereLight){const G=n.get(U);G.skyColor.copy(U.color).multiplyScalar(X*T),G.groundColor.copy(U.groundColor).multiplyScalar(X*T),r.hemi[x]=G,x++}}y>0&&(e.isWebGL2||t.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=et.LTC_FLOAT_1,r.rectAreaLTC2=et.LTC_FLOAT_2):t.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=et.LTC_HALF_1,r.rectAreaLTC2=et.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=f,r.ambient[1]=d,r.ambient[2]=p;const B=r.hash;(B.directionalLength!==m||B.pointLength!==g||B.spotLength!==_||B.rectAreaLength!==y||B.hemiLength!==x||B.numDirectionalShadows!==E||B.numPointShadows!==w||B.numSpotShadows!==S||B.numSpotMaps!==b)&&(r.directional.length=m,r.spot.length=_,r.rectArea.length=y,r.point.length=g,r.hemi.length=x,r.directionalShadow.length=E,r.directionalShadowMap.length=E,r.pointShadow.length=w,r.pointShadowMap.length=w,r.spotShadow.length=S,r.spotShadowMap.length=S,r.directionalShadowMatrix.length=E,r.pointShadowMatrix.length=w,r.spotLightMatrix.length=S+b-M,r.spotLightMap.length=b,r.numSpotLightShadowsWithMaps=M,B.directionalLength=m,B.pointLength=g,B.spotLength=_,B.rectAreaLength=y,B.hemiLength=x,B.numDirectionalShadows=E,B.numPointShadows=w,B.numSpotShadows=S,B.numSpotMaps=b,r.version=Ine++)}function c(u,h){let f=0,d=0,p=0,m=0,g=0;const _=h.matrixWorldInverse;for(let y=0,x=u.length;y<x;y++){const E=u[y];if(E.isDirectionalLight){const w=r.directional[f];w.direction.setFromMatrixPosition(E.matrixWorld),s.setFromMatrixPosition(E.target.matrixWorld),w.direction.sub(s),w.direction.transformDirection(_),f++}else if(E.isSpotLight){const w=r.spot[p];w.position.setFromMatrixPosition(E.matrixWorld),w.position.applyMatrix4(_),w.direction.setFromMatrixPosition(E.matrixWorld),s.setFromMatrixPosition(E.target.matrixWorld),w.direction.sub(s),w.direction.transformDirection(_),p++}else if(E.isRectAreaLight){const w=r.rectArea[m];w.position.setFromMatrixPosition(E.matrixWorld),w.position.applyMatrix4(_),a.identity(),o.copy(E.matrixWorld),o.premultiply(_),a.extractRotation(o),w.halfWidth.set(E.width*.5,0,0),w.halfHeight.set(0,E.height*.5,0),w.halfWidth.applyMatrix4(a),w.halfHeight.applyMatrix4(a),m++}else if(E.isPointLight){const w=r.point[d];w.position.setFromMatrixPosition(E.matrixWorld),w.position.applyMatrix4(_),d++}else if(E.isHemisphereLight){const w=r.hemi[g];w.direction.setFromMatrixPosition(E.matrixWorld),w.direction.transformDirection(_),g++}}}return{setup:l,setupView:c,state:r}}function CP(t,e){const n=new Bne(t,e),i=[],r=[];function s(){i.length=0,r.length=0}function o(h){i.push(h)}function a(h){r.push(h)}function l(h){n.setup(i,h)}function c(h){n.setupView(i,h)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:n},setupLights:l,setupLightsView:c,pushLight:o,pushShadow:a}}function Rne(t,e){let n=new WeakMap;function i(s,o=0){const a=n.get(s);let l;return a===void 0?(l=new CP(t,e),n.set(s,[l])):o>=a.length?(l=new CP(t,e),a.push(l)):l=a[o],l}function r(){n=new WeakMap}return{get:i,dispose:r}}class Zb extends pr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=qO,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class $b extends pr{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new te,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const Pne=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Dne=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Fne(t,e,n){let i=new Py;const r=new Ve,s=new Ve,o=new An,a=new Zb({depthPacking:JO}),l=new $b,c={},u=n.maxTextureSize,h={0:ds,1:th,2:ja},f=new ha({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ve},radius:{value:4}},vertexShader:Pne,fragmentShader:Dne}),d=f.clone();d.defines.HORIZONTAL_PASS=1;const p=new zt;p.setAttribute("position",new En(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new Yi(p,f),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=zb,this.render=function(E,w,S){if(g.enabled===!1||g.autoUpdate===!1&&g.needsUpdate===!1||E.length===0)return;const b=t.getRenderTarget(),M=t.getActiveCubeFace(),T=t.getActiveMipmapLevel(),B=t.state;B.setBlending($a),B.buffers.color.setClear(1,1,1,1),B.buffers.depth.setTest(!0),B.setScissorTest(!1);for(let L=0,F=E.length;L<F;L++){const U=E[L],k=U.shadow;if(k===void 0){console.warn("THREE.WebGLShadowMap:",U,"has no shadow.");continue}if(k.autoUpdate===!1&&k.needsUpdate===!1)continue;r.copy(k.mapSize);const X=k.getFrameExtents();if(r.multiply(X),s.copy(k.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/X.x),r.x=s.x*X.x,k.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/X.y),r.y=s.y*X.y,k.mapSize.y=s.y)),k.map===null){const Z=this.type!==Vf?{minFilter:ui,magFilter:ui}:{};k.map=new eo(r.x,r.y,Z),k.map.texture.name=U.name+".shadowMap",k.camera.updateProjectionMatrix()}t.setRenderTarget(k.map),t.clear();const Y=k.getViewportCount();for(let Z=0;Z<Y;Z++){const G=k.getViewport(Z);o.set(s.x*G.x,s.y*G.y,s.x*G.z,s.y*G.w),B.viewport(o),k.updateMatrices(U,Z),i=k.getFrustum(),x(w,S,k.camera,U,this.type)}k.isPointLightShadow!==!0&&this.type===Vf&&_(k,S),k.needsUpdate=!1}g.needsUpdate=!1,t.setRenderTarget(b,M,T)};function _(E,w){const S=e.update(m);f.defines.VSM_SAMPLES!==E.blurSamples&&(f.defines.VSM_SAMPLES=E.blurSamples,d.defines.VSM_SAMPLES=E.blurSamples,f.needsUpdate=!0,d.needsUpdate=!0),E.mapPass===null&&(E.mapPass=new eo(r.x,r.y)),f.uniforms.shadow_pass.value=E.map.texture,f.uniforms.resolution.value=E.mapSize,f.uniforms.radius.value=E.radius,t.setRenderTarget(E.mapPass),t.clear(),t.renderBufferDirect(w,null,S,f,m,null),d.uniforms.shadow_pass.value=E.mapPass.texture,d.uniforms.resolution.value=E.mapSize,d.uniforms.radius.value=E.radius,t.setRenderTarget(E.map),t.clear(),t.renderBufferDirect(w,null,S,d,m,null)}function y(E,w,S,b,M,T){let B=null;const L=S.isPointLight===!0?E.customDistanceMaterial:E.customDepthMaterial;if(L!==void 0?B=L:B=S.isPointLight===!0?l:a,t.localClippingEnabled&&w.clipShadows===!0&&Array.isArray(w.clippingPlanes)&&w.clippingPlanes.length!==0||w.displacementMap&&w.displacementScale!==0||w.alphaMap&&w.alphaTest>0){const F=B.uuid,U=w.uuid;let k=c[F];k===void 0&&(k={},c[F]=k);let X=k[U];X===void 0&&(X=B.clone(),k[U]=X),B=X}return B.visible=w.visible,B.wireframe=w.wireframe,T===Vf?B.side=w.shadowSide!==null?w.shadowSide:w.side:B.side=w.shadowSide!==null?w.shadowSide:h[w.side],B.alphaMap=w.alphaMap,B.alphaTest=w.alphaTest,B.clipShadows=w.clipShadows,B.clippingPlanes=w.clippingPlanes,B.clipIntersection=w.clipIntersection,B.displacementMap=w.displacementMap,B.displacementScale=w.displacementScale,B.displacementBias=w.displacementBias,B.wireframeLinewidth=w.wireframeLinewidth,B.linewidth=w.linewidth,S.isPointLight===!0&&B.isMeshDistanceMaterial===!0&&(B.referencePosition.setFromMatrixPosition(S.matrixWorld),B.nearDistance=b,B.farDistance=M),B}function x(E,w,S,b,M){if(E.visible===!1)return;if(E.layers.test(w.layers)&&(E.isMesh||E.isLine||E.isPoints)&&(E.castShadow||E.receiveShadow&&M===Vf)&&(!E.frustumCulled||i.intersectsObject(E))){E.modelViewMatrix.multiplyMatrices(S.matrixWorldInverse,E.matrixWorld);const L=e.update(E),F=E.material;if(Array.isArray(F)){const U=L.groups;for(let k=0,X=U.length;k<X;k++){const Y=U[k],Z=F[Y.materialIndex];if(Z&&Z.visible){const G=y(E,Z,b,S.near,S.far,M);t.renderBufferDirect(S,null,L,G,E,Y)}}}else if(F.visible){const U=y(E,F,b,S.near,S.far,M);t.renderBufferDirect(S,null,L,U,E,null)}}const B=E.children;for(let L=0,F=B.length;L<F;L++)x(B[L],w,S,b,M)}}function Lne(t,e,n){const i=n.isWebGL2;function r(){let ae=!1;const qe=new An;let ze=null;const we=new An(0,0,0,0);return{setMask:function(We){ze!==We&&!ae&&(t.colorMask(We,We,We,We),ze=We)},setLocked:function(We){ae=We},setClear:function(We,ht,bt,cn,Vt){Vt===!0&&(We*=cn,ht*=cn,bt*=cn),qe.set(We,ht,bt,cn),we.equals(qe)===!1&&(t.clearColor(We,ht,bt,cn),we.copy(qe))},reset:function(){ae=!1,ze=null,we.set(-1,0,0,0)}}}function s(){let ae=!1,qe=null,ze=null,we=null;return{setTest:function(We){We?ce(t.DEPTH_TEST):he(t.DEPTH_TEST)},setMask:function(We){qe!==We&&!ae&&(t.depthMask(We),qe=We)},setFunc:function(We){if(ze!==We){switch(We){case gO:t.depthFunc(t.NEVER);break;case vO:t.depthFunc(t.ALWAYS);break;case _O:t.depthFunc(t.LESS);break;case I_:t.depthFunc(t.LEQUAL);break;case yO:t.depthFunc(t.EQUAL);break;case xO:t.depthFunc(t.GEQUAL);break;case EO:t.depthFunc(t.GREATER);break;case wO:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}ze=We}},setLocked:function(We){ae=We},setClear:function(We){we!==We&&(t.clearDepth(We),we=We)},reset:function(){ae=!1,qe=null,ze=null,we=null}}}function o(){let ae=!1,qe=null,ze=null,we=null,We=null,ht=null,bt=null,cn=null,Vt=null;return{setTest:function(At){ae||(At?ce(t.STENCIL_TEST):he(t.STENCIL_TEST))},setMask:function(At){qe!==At&&!ae&&(t.stencilMask(At),qe=At)},setFunc:function(At,un,dn){(ze!==At||we!==un||We!==dn)&&(t.stencilFunc(At,un,dn),ze=At,we=un,We=dn)},setOp:function(At,un,dn){(ht!==At||bt!==un||cn!==dn)&&(t.stencilOp(At,un,dn),ht=At,bt=un,cn=dn)},setLocked:function(At){ae=At},setClear:function(At){Vt!==At&&(t.clearStencil(At),Vt=At)},reset:function(){ae=!1,qe=null,ze=null,we=null,We=null,ht=null,bt=null,cn=null,Vt=null}}}const a=new r,l=new s,c=new o,u=new WeakMap,h=new WeakMap;let f={},d={},p=new WeakMap,m=[],g=null,_=!1,y=null,x=null,E=null,w=null,S=null,b=null,M=null,T=!1,B=null,L=null,F=null,U=null,k=null;const X=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Y=!1,Z=0;const G=t.getParameter(t.VERSION);G.indexOf("WebGL")!==-1?(Z=parseFloat(/^WebGL (\d)/.exec(G)[1]),Y=Z>=1):G.indexOf("OpenGL ES")!==-1&&(Z=parseFloat(/^OpenGL ES (\d)/.exec(G)[1]),Y=Z>=2);let O=null,z={};const Q=t.getParameter(t.SCISSOR_BOX),H=t.getParameter(t.VIEWPORT),J=new An().fromArray(Q),j=new An().fromArray(H);function oe(ae,qe,ze){const we=new Uint8Array(4),We=t.createTexture();t.bindTexture(ae,We),t.texParameteri(ae,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(ae,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let ht=0;ht<ze;ht++)t.texImage2D(qe+ht,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,we);return We}const K={};K[t.TEXTURE_2D]=oe(t.TEXTURE_2D,t.TEXTURE_2D,1),K[t.TEXTURE_CUBE_MAP]=oe(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),ce(t.DEPTH_TEST),l.setFunc(I_),ke(!1),Ke(nC),ce(t.CULL_FACE),Pe($a);function ce(ae){f[ae]!==!0&&(t.enable(ae),f[ae]=!0)}function he(ae){f[ae]!==!1&&(t.disable(ae),f[ae]=!1)}function ve(ae,qe){return d[ae]!==qe?(t.bindFramebuffer(ae,qe),d[ae]=qe,i&&(ae===t.DRAW_FRAMEBUFFER&&(d[t.FRAMEBUFFER]=qe),ae===t.FRAMEBUFFER&&(d[t.DRAW_FRAMEBUFFER]=qe)),!0):!1}function Me(ae,qe){let ze=m,we=!1;if(ae)if(ze=p.get(qe),ze===void 0&&(ze=[],p.set(qe,ze)),ae.isWebGLMultipleRenderTargets){const We=ae.texture;if(ze.length!==We.length||ze[0]!==t.COLOR_ATTACHMENT0){for(let ht=0,bt=We.length;ht<bt;ht++)ze[ht]=t.COLOR_ATTACHMENT0+ht;ze.length=We.length,we=!0}}else ze[0]!==t.COLOR_ATTACHMENT0&&(ze[0]=t.COLOR_ATTACHMENT0,we=!0);else ze[0]!==t.BACK&&(ze[0]=t.BACK,we=!0);we&&(n.isWebGL2?t.drawBuffers(ze):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(ze))}function Se(ae){return g!==ae?(t.useProgram(ae),g=ae,!0):!1}const le={[vu]:t.FUNC_ADD,[oO]:t.FUNC_SUBTRACT,[aO]:t.FUNC_REVERSE_SUBTRACT};if(i)le[oC]=t.MIN,le[aC]=t.MAX;else{const ae=e.get("EXT_blend_minmax");ae!==null&&(le[oC]=ae.MIN_EXT,le[aC]=ae.MAX_EXT)}const pe={[lO]:t.ZERO,[cO]:t.ONE,[uO]:t.SRC_COLOR,[Qb]:t.SRC_ALPHA,[AO]:t.SRC_ALPHA_SATURATE,[pO]:t.DST_COLOR,[fO]:t.DST_ALPHA,[hO]:t.ONE_MINUS_SRC_COLOR,[Hb]:t.ONE_MINUS_SRC_ALPHA,[mO]:t.ONE_MINUS_DST_COLOR,[dO]:t.ONE_MINUS_DST_ALPHA};function Pe(ae,qe,ze,we,We,ht,bt,cn){if(ae===$a){_===!0&&(he(t.BLEND),_=!1);return}if(_===!1&&(ce(t.BLEND),_=!0),ae!==sO){if(ae!==y||cn!==T){if((x!==vu||S!==vu)&&(t.blendEquation(t.FUNC_ADD),x=vu,S=vu),cn)switch(ae){case Uu:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case iC:t.blendFunc(t.ONE,t.ONE);break;case rC:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case sC:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",ae);break}else switch(ae){case Uu:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case iC:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case rC:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case sC:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",ae);break}E=null,w=null,b=null,M=null,y=ae,T=cn}return}We=We||qe,ht=ht||ze,bt=bt||we,(qe!==x||We!==S)&&(t.blendEquationSeparate(le[qe],le[We]),x=qe,S=We),(ze!==E||we!==w||ht!==b||bt!==M)&&(t.blendFuncSeparate(pe[ze],pe[we],pe[ht],pe[bt]),E=ze,w=we,b=ht,M=bt),y=ae,T=null}function Oe(ae,qe){ae.side===ja?he(t.CULL_FACE):ce(t.CULL_FACE);let ze=ae.side===ds;qe&&(ze=!ze),ke(ze),ae.blending===Uu&&ae.transparent===!1?Pe($a):Pe(ae.blending,ae.blendEquation,ae.blendSrc,ae.blendDst,ae.blendEquationAlpha,ae.blendSrcAlpha,ae.blendDstAlpha,ae.premultipliedAlpha),l.setFunc(ae.depthFunc),l.setTest(ae.depthTest),l.setMask(ae.depthWrite),a.setMask(ae.colorWrite);const we=ae.stencilWrite;c.setTest(we),we&&(c.setMask(ae.stencilWriteMask),c.setFunc(ae.stencilFunc,ae.stencilRef,ae.stencilFuncMask),c.setOp(ae.stencilFail,ae.stencilZFail,ae.stencilZPass)),Ue(ae.polygonOffset,ae.polygonOffsetFactor,ae.polygonOffsetUnits),ae.alphaToCoverage===!0?ce(t.SAMPLE_ALPHA_TO_COVERAGE):he(t.SAMPLE_ALPHA_TO_COVERAGE)}function ke(ae){B!==ae&&(ae?t.frontFace(t.CW):t.frontFace(t.CCW),B=ae)}function Ke(ae){ae!==nO?(ce(t.CULL_FACE),ae!==L&&(ae===nC?t.cullFace(t.BACK):ae===iO?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):he(t.CULL_FACE),L=ae}function xe(ae){ae!==F&&(Y&&t.lineWidth(ae),F=ae)}function Ue(ae,qe,ze){ae?(ce(t.POLYGON_OFFSET_FILL),(U!==qe||k!==ze)&&(t.polygonOffset(qe,ze),U=qe,k=ze)):he(t.POLYGON_OFFSET_FILL)}function He(ae){ae?ce(t.SCISSOR_TEST):he(t.SCISSOR_TEST)}function be(ae){ae===void 0&&(ae=t.TEXTURE0+X-1),O!==ae&&(t.activeTexture(ae),O=ae)}function q(ae,qe,ze){ze===void 0&&(O===null?ze=t.TEXTURE0+X-1:ze=O);let we=z[ze];we===void 0&&(we={type:void 0,texture:void 0},z[ze]=we),(we.type!==ae||we.texture!==qe)&&(O!==ze&&(t.activeTexture(ze),O=ze),t.bindTexture(ae,qe||K[ae]),we.type=ae,we.texture=qe)}function W(){const ae=z[O];ae!==void 0&&ae.type!==void 0&&(t.bindTexture(ae.type,null),ae.type=void 0,ae.texture=void 0)}function ie(){try{t.compressedTexImage2D.apply(t,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function fe(){try{t.texSubImage2D.apply(t,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function _e(){try{t.texSubImage3D.apply(t,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function Ge(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function Ie(){try{t.texStorage2D.apply(t,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function Le(){try{t.texStorage3D.apply(t,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function ye(){try{t.texImage2D.apply(t,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function je(){try{t.texImage3D.apply(t,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function re(ae){J.equals(ae)===!1&&(t.scissor(ae.x,ae.y,ae.z,ae.w),J.copy(ae))}function ge(ae){j.equals(ae)===!1&&(t.viewport(ae.x,ae.y,ae.z,ae.w),j.copy(ae))}function Ce(ae,qe){let ze=h.get(qe);ze===void 0&&(ze=new WeakMap,h.set(qe,ze));let we=ze.get(ae);we===void 0&&(we=t.getUniformBlockIndex(qe,ae.name),ze.set(ae,we))}function Re(ae,qe){const we=h.get(qe).get(ae);u.get(ae)!==we&&(t.uniformBlockBinding(qe,we,ae.__bindingPointIndex),u.set(ae,we))}function Je(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),i===!0&&(t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),f={},O=null,z={},d={},p=new WeakMap,m=[],g=null,_=!1,y=null,x=null,E=null,w=null,S=null,b=null,M=null,T=!1,B=null,L=null,F=null,U=null,k=null,J.set(0,0,t.canvas.width,t.canvas.height),j.set(0,0,t.canvas.width,t.canvas.height),a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:ce,disable:he,bindFramebuffer:ve,drawBuffers:Me,useProgram:Se,setBlending:Pe,setMaterial:Oe,setFlipSided:ke,setCullFace:Ke,setLineWidth:xe,setPolygonOffset:Ue,setScissorTest:He,activeTexture:be,bindTexture:q,unbindTexture:W,compressedTexImage2D:ie,texImage2D:ye,texImage3D:je,updateUBOMapping:Ce,uniformBlockBinding:Re,texStorage2D:Ie,texStorage3D:Le,texSubImage2D:fe,texSubImage3D:_e,compressedTexSubImage2D:Ge,scissor:re,viewport:ge,reset:Je}}function kne(t,e,n,i,r,s,o){const a=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,u=r.maxTextureSize,h=r.maxSamples,f=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,d=/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap;let m;const g=new WeakMap;let _=!1;try{_=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y(q,W){return _?new OffscreenCanvas(q,W):Pm("canvas")}function x(q,W,ie,fe){let _e=1;if((q.width>fe||q.height>fe)&&(_e=fe/Math.max(q.width,q.height)),_e<1||W===!0)if(typeof HTMLImageElement<"u"&&q instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&q instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&q instanceof ImageBitmap){const Ge=W?P_:Math.floor,Ie=Ge(_e*q.width),Le=Ge(_e*q.height);m===void 0&&(m=y(Ie,Le));const ye=ie?y(Ie,Le):m;return ye.width=Ie,ye.height=Le,ye.getContext("2d").drawImage(q,0,0,Ie,Le),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+q.width+"x"+q.height+") to ("+Ie+"x"+Le+")."),ye}else return"data"in q&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+q.width+"x"+q.height+")."),q;return q}function E(q){return BC(q.width)&&BC(q.height)}function w(q){return a?!1:q.wrapS!==Sr||q.wrapT!==Sr||q.minFilter!==ui&&q.minFilter!==ni}function S(q,W){return q.generateMipmaps&&W&&q.minFilter!==ui&&q.minFilter!==ni}function b(q){t.generateMipmap(q)}function M(q,W,ie,fe,_e=!1){if(a===!1)return W;if(q!==null){if(t[q]!==void 0)return t[q];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+q+"'")}let Ge=W;return W===t.RED&&(ie===t.FLOAT&&(Ge=t.R32F),ie===t.HALF_FLOAT&&(Ge=t.R16F),ie===t.UNSIGNED_BYTE&&(Ge=t.R8)),W===t.RG&&(ie===t.FLOAT&&(Ge=t.RG32F),ie===t.HALF_FLOAT&&(Ge=t.RG16F),ie===t.UNSIGNED_BYTE&&(Ge=t.RG8)),W===t.RGBA&&(ie===t.FLOAT&&(Ge=t.RGBA32F),ie===t.HALF_FLOAT&&(Ge=t.RGBA16F),ie===t.UNSIGNED_BYTE&&(Ge=fe===Ln&&_e===!1?t.SRGB8_ALPHA8:t.RGBA8),ie===t.UNSIGNED_SHORT_4_4_4_4&&(Ge=t.RGBA4),ie===t.UNSIGNED_SHORT_5_5_5_1&&(Ge=t.RGB5_A1)),(Ge===t.R16F||Ge===t.R32F||Ge===t.RG16F||Ge===t.RG32F||Ge===t.RGBA16F||Ge===t.RGBA32F)&&e.get("EXT_color_buffer_float"),Ge}function T(q,W,ie){return S(q,ie)===!0||q.isFramebufferTexture&&q.minFilter!==ui&&q.minFilter!==ni?Math.log2(Math.max(W.width,W.height))+1:q.mipmaps!==void 0&&q.mipmaps.length>0?q.mipmaps.length:q.isCompressedTexture&&Array.isArray(q.image)?W.mipmaps.length:1}function B(q){return q===ui||q===T_||q===B_?t.NEAREST:t.LINEAR}function L(q){const W=q.target;W.removeEventListener("dispose",L),U(W),W.isVideoTexture&&p.delete(W)}function F(q){const W=q.target;W.removeEventListener("dispose",F),X(W)}function U(q){const W=i.get(q);if(W.__webglInit===void 0)return;const ie=q.source,fe=g.get(ie);if(fe){const _e=fe[W.__cacheKey];_e.usedTimes--,_e.usedTimes===0&&k(q),Object.keys(fe).length===0&&g.delete(ie)}i.remove(q)}function k(q){const W=i.get(q);t.deleteTexture(W.__webglTexture);const ie=q.source,fe=g.get(ie);delete fe[W.__cacheKey],o.memory.textures--}function X(q){const W=q.texture,ie=i.get(q),fe=i.get(W);if(fe.__webglTexture!==void 0&&(t.deleteTexture(fe.__webglTexture),o.memory.textures--),q.depthTexture&&q.depthTexture.dispose(),q.isWebGLCubeRenderTarget)for(let _e=0;_e<6;_e++)t.deleteFramebuffer(ie.__webglFramebuffer[_e]),ie.__webglDepthbuffer&&t.deleteRenderbuffer(ie.__webglDepthbuffer[_e]);else{if(t.deleteFramebuffer(ie.__webglFramebuffer),ie.__webglDepthbuffer&&t.deleteRenderbuffer(ie.__webglDepthbuffer),ie.__webglMultisampledFramebuffer&&t.deleteFramebuffer(ie.__webglMultisampledFramebuffer),ie.__webglColorRenderbuffer)for(let _e=0;_e<ie.__webglColorRenderbuffer.length;_e++)ie.__webglColorRenderbuffer[_e]&&t.deleteRenderbuffer(ie.__webglColorRenderbuffer[_e]);ie.__webglDepthRenderbuffer&&t.deleteRenderbuffer(ie.__webglDepthRenderbuffer)}if(q.isWebGLMultipleRenderTargets)for(let _e=0,Ge=W.length;_e<Ge;_e++){const Ie=i.get(W[_e]);Ie.__webglTexture&&(t.deleteTexture(Ie.__webglTexture),o.memory.textures--),i.remove(W[_e])}i.remove(W),i.remove(q)}let Y=0;function Z(){Y=0}function G(){const q=Y;return q>=l&&console.warn("THREE.WebGLTextures: Trying to use "+q+" texture units while this GPU supports only "+l),Y+=1,q}function O(q){const W=[];return W.push(q.wrapS),W.push(q.wrapT),W.push(q.magFilter),W.push(q.minFilter),W.push(q.anisotropy),W.push(q.internalFormat),W.push(q.format),W.push(q.type),W.push(q.generateMipmaps),W.push(q.premultiplyAlpha),W.push(q.flipY),W.push(q.unpackAlignment),W.push(q.encoding),W.join()}function z(q,W){const ie=i.get(q);if(q.isVideoTexture&&He(q),q.isRenderTargetTexture===!1&&q.version>0&&ie.__version!==q.version){const fe=q.image;if(fe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(fe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{he(ie,q,W);return}}n.bindTexture(t.TEXTURE_2D,ie.__webglTexture,t.TEXTURE0+W)}function Q(q,W){const ie=i.get(q);if(q.version>0&&ie.__version!==q.version){he(ie,q,W);return}n.bindTexture(t.TEXTURE_2D_ARRAY,ie.__webglTexture,t.TEXTURE0+W)}function H(q,W){const ie=i.get(q);if(q.version>0&&ie.__version!==q.version){he(ie,q,W);return}n.bindTexture(t.TEXTURE_3D,ie.__webglTexture,t.TEXTURE0+W)}function J(q,W){const ie=i.get(q);if(q.version>0&&ie.__version!==q.version){ve(ie,q,W);return}n.bindTexture(t.TEXTURE_CUBE_MAP,ie.__webglTexture,t.TEXTURE0+W)}const j={[Cm]:t.REPEAT,[Sr]:t.CLAMP_TO_EDGE,[Sm]:t.MIRRORED_REPEAT},oe={[ui]:t.NEAREST,[T_]:t.NEAREST_MIPMAP_NEAREST,[B_]:t.NEAREST_MIPMAP_LINEAR,[ni]:t.LINEAR,[Vb]:t.LINEAR_MIPMAP_NEAREST,[ph]:t.LINEAR_MIPMAP_LINEAR};function K(q,W,ie){if(ie?(t.texParameteri(q,t.TEXTURE_WRAP_S,j[W.wrapS]),t.texParameteri(q,t.TEXTURE_WRAP_T,j[W.wrapT]),(q===t.TEXTURE_3D||q===t.TEXTURE_2D_ARRAY)&&t.texParameteri(q,t.TEXTURE_WRAP_R,j[W.wrapR]),t.texParameteri(q,t.TEXTURE_MAG_FILTER,oe[W.magFilter]),t.texParameteri(q,t.TEXTURE_MIN_FILTER,oe[W.minFilter])):(t.texParameteri(q,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(q,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),(q===t.TEXTURE_3D||q===t.TEXTURE_2D_ARRAY)&&t.texParameteri(q,t.TEXTURE_WRAP_R,t.CLAMP_TO_EDGE),(W.wrapS!==Sr||W.wrapT!==Sr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(q,t.TEXTURE_MAG_FILTER,B(W.magFilter)),t.texParameteri(q,t.TEXTURE_MIN_FILTER,B(W.minFilter)),W.minFilter!==ui&&W.minFilter!==ni&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const fe=e.get("EXT_texture_filter_anisotropic");if(W.type===Xa&&e.has("OES_texture_float_linear")===!1||a===!1&&W.type===Md&&e.has("OES_texture_half_float_linear")===!1)return;(W.anisotropy>1||i.get(W).__currentAnisotropy)&&(t.texParameterf(q,fe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(W.anisotropy,r.getMaxAnisotropy())),i.get(W).__currentAnisotropy=W.anisotropy)}}function ce(q,W){let ie=!1;q.__webglInit===void 0&&(q.__webglInit=!0,W.addEventListener("dispose",L));const fe=W.source;let _e=g.get(fe);_e===void 0&&(_e={},g.set(fe,_e));const Ge=O(W);if(Ge!==q.__cacheKey){_e[Ge]===void 0&&(_e[Ge]={texture:t.createTexture(),usedTimes:0},o.memory.textures++,ie=!0),_e[Ge].usedTimes++;const Ie=_e[q.__cacheKey];Ie!==void 0&&(_e[q.__cacheKey].usedTimes--,Ie.usedTimes===0&&k(W)),q.__cacheKey=Ge,q.__webglTexture=_e[Ge].texture}return ie}function he(q,W,ie){let fe=t.TEXTURE_2D;W.isDataArrayTexture&&(fe=t.TEXTURE_2D_ARRAY),W.isData3DTexture&&(fe=t.TEXTURE_3D);const _e=ce(q,W),Ge=W.source;n.bindTexture(fe,q.__webglTexture,t.TEXTURE0+ie);const Ie=i.get(Ge);if(Ge.version!==Ie.__version||_e===!0){n.activeTexture(t.TEXTURE0+ie),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,W.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,W.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,W.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE);const Le=w(W)&&E(W.image)===!1;let ye=x(W.image,Le,!1,u);ye=be(W,ye);const je=E(ye)||a,re=s.convert(W.format,W.encoding);let ge=s.convert(W.type),Ce=M(W.internalFormat,re,ge,W.encoding,W.isVideoTexture);K(fe,W,je);let Re;const Je=W.mipmaps,ae=a&&W.isVideoTexture!==!0,qe=Ie.__version===void 0||_e===!0,ze=T(W,ye,je);if(W.isDepthTexture)Ce=t.DEPTH_COMPONENT,a?W.type===Xa?Ce=t.DEPTH_COMPONENT32F:W.type===Jl?Ce=t.DEPTH_COMPONENT24:W.type===Ou?Ce=t.DEPTH24_STENCIL8:Ce=t.DEPTH_COMPONENT16:W.type===Xa&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),W.format===fc&&Ce===t.DEPTH_COMPONENT&&W.type!==Wb&&W.type!==Jl&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),W.type=Jl,ge=s.convert(W.type)),W.format===nh&&Ce===t.DEPTH_COMPONENT&&(Ce=t.DEPTH_STENCIL,W.type!==Ou&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),W.type=Ou,ge=s.convert(W.type))),qe&&(ae?n.texStorage2D(t.TEXTURE_2D,1,Ce,ye.width,ye.height):n.texImage2D(t.TEXTURE_2D,0,Ce,ye.width,ye.height,0,re,ge,null));else if(W.isDataTexture)if(Je.length>0&&je){ae&&qe&&n.texStorage2D(t.TEXTURE_2D,ze,Ce,Je[0].width,Je[0].height);for(let we=0,We=Je.length;we<We;we++)Re=Je[we],ae?n.texSubImage2D(t.TEXTURE_2D,we,0,0,Re.width,Re.height,re,ge,Re.data):n.texImage2D(t.TEXTURE_2D,we,Ce,Re.width,Re.height,0,re,ge,Re.data);W.generateMipmaps=!1}else ae?(qe&&n.texStorage2D(t.TEXTURE_2D,ze,Ce,ye.width,ye.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,ye.width,ye.height,re,ge,ye.data)):n.texImage2D(t.TEXTURE_2D,0,Ce,ye.width,ye.height,0,re,ge,ye.data);else if(W.isCompressedTexture){ae&&qe&&n.texStorage2D(t.TEXTURE_2D,ze,Ce,Je[0].width,Je[0].height);for(let we=0,We=Je.length;we<We;we++)Re=Je[we],W.format!==Xs?re!==null?ae?n.compressedTexSubImage2D(t.TEXTURE_2D,we,0,0,Re.width,Re.height,re,Re.data):n.compressedTexImage2D(t.TEXTURE_2D,we,Ce,Re.width,Re.height,0,Re.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ae?n.texSubImage2D(t.TEXTURE_2D,we,0,0,Re.width,Re.height,re,ge,Re.data):n.texImage2D(t.TEXTURE_2D,we,Ce,Re.width,Re.height,0,re,ge,Re.data)}else if(W.isDataArrayTexture)ae?(qe&&n.texStorage3D(t.TEXTURE_2D_ARRAY,ze,Ce,ye.width,ye.height,ye.depth),n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,ye.width,ye.height,ye.depth,re,ge,ye.data)):n.texImage3D(t.TEXTURE_2D_ARRAY,0,Ce,ye.width,ye.height,ye.depth,0,re,ge,ye.data);else if(W.isData3DTexture)ae?(qe&&n.texStorage3D(t.TEXTURE_3D,ze,Ce,ye.width,ye.height,ye.depth),n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,ye.width,ye.height,ye.depth,re,ge,ye.data)):n.texImage3D(t.TEXTURE_3D,0,Ce,ye.width,ye.height,ye.depth,0,re,ge,ye.data);else if(W.isFramebufferTexture){if(qe)if(ae)n.texStorage2D(t.TEXTURE_2D,ze,Ce,ye.width,ye.height);else{let we=ye.width,We=ye.height;for(let ht=0;ht<ze;ht++)n.texImage2D(t.TEXTURE_2D,ht,Ce,we,We,0,re,ge,null),we>>=1,We>>=1}}else if(Je.length>0&&je){ae&&qe&&n.texStorage2D(t.TEXTURE_2D,ze,Ce,Je[0].width,Je[0].height);for(let we=0,We=Je.length;we<We;we++)Re=Je[we],ae?n.texSubImage2D(t.TEXTURE_2D,we,0,0,re,ge,Re):n.texImage2D(t.TEXTURE_2D,we,Ce,re,ge,Re);W.generateMipmaps=!1}else ae?(qe&&n.texStorage2D(t.TEXTURE_2D,ze,Ce,ye.width,ye.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,re,ge,ye)):n.texImage2D(t.TEXTURE_2D,0,Ce,re,ge,ye);S(W,je)&&b(fe),Ie.__version=Ge.version,W.onUpdate&&W.onUpdate(W)}q.__version=W.version}function ve(q,W,ie){if(W.image.length!==6)return;const fe=ce(q,W),_e=W.source;n.bindTexture(t.TEXTURE_CUBE_MAP,q.__webglTexture,t.TEXTURE0+ie);const Ge=i.get(_e);if(_e.version!==Ge.__version||fe===!0){n.activeTexture(t.TEXTURE0+ie),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,W.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,W.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,W.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE);const Ie=W.isCompressedTexture||W.image[0].isCompressedTexture,Le=W.image[0]&&W.image[0].isDataTexture,ye=[];for(let we=0;we<6;we++)!Ie&&!Le?ye[we]=x(W.image[we],!1,!0,c):ye[we]=Le?W.image[we].image:W.image[we],ye[we]=be(W,ye[we]);const je=ye[0],re=E(je)||a,ge=s.convert(W.format,W.encoding),Ce=s.convert(W.type),Re=M(W.internalFormat,ge,Ce,W.encoding),Je=a&&W.isVideoTexture!==!0,ae=Ge.__version===void 0||fe===!0;let qe=T(W,je,re);K(t.TEXTURE_CUBE_MAP,W,re);let ze;if(Ie){Je&&ae&&n.texStorage2D(t.TEXTURE_CUBE_MAP,qe,Re,je.width,je.height);for(let we=0;we<6;we++){ze=ye[we].mipmaps;for(let We=0;We<ze.length;We++){const ht=ze[We];W.format!==Xs?ge!==null?Je?n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+we,We,0,0,ht.width,ht.height,ge,ht.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+we,We,Re,ht.width,ht.height,0,ht.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Je?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+we,We,0,0,ht.width,ht.height,ge,Ce,ht.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+we,We,Re,ht.width,ht.height,0,ge,Ce,ht.data)}}}else{ze=W.mipmaps,Je&&ae&&(ze.length>0&&qe++,n.texStorage2D(t.TEXTURE_CUBE_MAP,qe,Re,ye[0].width,ye[0].height));for(let we=0;we<6;we++)if(Le){Je?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+we,0,0,0,ye[we].width,ye[we].height,ge,Ce,ye[we].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+we,0,Re,ye[we].width,ye[we].height,0,ge,Ce,ye[we].data);for(let We=0;We<ze.length;We++){const bt=ze[We].image[we].image;Je?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+we,We+1,0,0,bt.width,bt.height,ge,Ce,bt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+we,We+1,Re,bt.width,bt.height,0,ge,Ce,bt.data)}}else{Je?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+we,0,0,0,ge,Ce,ye[we]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+we,0,Re,ge,Ce,ye[we]);for(let We=0;We<ze.length;We++){const ht=ze[We];Je?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+we,We+1,0,0,ge,Ce,ht.image[we]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+we,We+1,Re,ge,Ce,ht.image[we])}}}S(W,re)&&b(t.TEXTURE_CUBE_MAP),Ge.__version=_e.version,W.onUpdate&&W.onUpdate(W)}q.__version=W.version}function Me(q,W,ie,fe,_e){const Ge=s.convert(ie.format,ie.encoding),Ie=s.convert(ie.type),Le=M(ie.internalFormat,Ge,Ie,ie.encoding);i.get(W).__hasExternalTextures||(_e===t.TEXTURE_3D||_e===t.TEXTURE_2D_ARRAY?n.texImage3D(_e,0,Le,W.width,W.height,W.depth,0,Ge,Ie,null):n.texImage2D(_e,0,Le,W.width,W.height,0,Ge,Ie,null)),n.bindFramebuffer(t.FRAMEBUFFER,q),Ue(W)?f.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,fe,_e,i.get(ie).__webglTexture,0,xe(W)):t.framebufferTexture2D(t.FRAMEBUFFER,fe,_e,i.get(ie).__webglTexture,0),n.bindFramebuffer(t.FRAMEBUFFER,null)}function Se(q,W,ie){if(t.bindRenderbuffer(t.RENDERBUFFER,q),W.depthBuffer&&!W.stencilBuffer){let fe=t.DEPTH_COMPONENT16;if(ie||Ue(W)){const _e=W.depthTexture;_e&&_e.isDepthTexture&&(_e.type===Xa?fe=t.DEPTH_COMPONENT32F:_e.type===Jl&&(fe=t.DEPTH_COMPONENT24));const Ge=xe(W);Ue(W)?f.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Ge,fe,W.width,W.height):t.renderbufferStorageMultisample(t.RENDERBUFFER,Ge,fe,W.width,W.height)}else t.renderbufferStorage(t.RENDERBUFFER,fe,W.width,W.height);t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,q)}else if(W.depthBuffer&&W.stencilBuffer){const fe=xe(W);ie&&Ue(W)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,fe,t.DEPTH24_STENCIL8,W.width,W.height):Ue(W)?f.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,fe,t.DEPTH24_STENCIL8,W.width,W.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,W.width,W.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,q)}else{const fe=W.isWebGLMultipleRenderTargets===!0?W.texture:[W.texture];for(let _e=0;_e<fe.length;_e++){const Ge=fe[_e],Ie=s.convert(Ge.format,Ge.encoding),Le=s.convert(Ge.type),ye=M(Ge.internalFormat,Ie,Le,Ge.encoding),je=xe(W);ie&&Ue(W)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,je,ye,W.width,W.height):Ue(W)?f.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,je,ye,W.width,W.height):t.renderbufferStorage(t.RENDERBUFFER,ye,W.width,W.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function le(q,W){if(W&&W.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,q),!(W.depthTexture&&W.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(W.depthTexture).__webglTexture||W.depthTexture.image.width!==W.width||W.depthTexture.image.height!==W.height)&&(W.depthTexture.image.width=W.width,W.depthTexture.image.height=W.height,W.depthTexture.needsUpdate=!0),z(W.depthTexture,0);const fe=i.get(W.depthTexture).__webglTexture,_e=xe(W);if(W.depthTexture.format===fc)Ue(W)?f.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,fe,0,_e):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,fe,0);else if(W.depthTexture.format===nh)Ue(W)?f.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,fe,0,_e):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,fe,0);else throw new Error("Unknown depthTexture format")}function pe(q){const W=i.get(q),ie=q.isWebGLCubeRenderTarget===!0;if(q.depthTexture&&!W.__autoAllocateDepthBuffer){if(ie)throw new Error("target.depthTexture not supported in Cube render targets");le(W.__webglFramebuffer,q)}else if(ie){W.__webglDepthbuffer=[];for(let fe=0;fe<6;fe++)n.bindFramebuffer(t.FRAMEBUFFER,W.__webglFramebuffer[fe]),W.__webglDepthbuffer[fe]=t.createRenderbuffer(),Se(W.__webglDepthbuffer[fe],q,!1)}else n.bindFramebuffer(t.FRAMEBUFFER,W.__webglFramebuffer),W.__webglDepthbuffer=t.createRenderbuffer(),Se(W.__webglDepthbuffer,q,!1);n.bindFramebuffer(t.FRAMEBUFFER,null)}function Pe(q,W,ie){const fe=i.get(q);W!==void 0&&Me(fe.__webglFramebuffer,q,q.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D),ie!==void 0&&pe(q)}function Oe(q){const W=q.texture,ie=i.get(q),fe=i.get(W);q.addEventListener("dispose",F),q.isWebGLMultipleRenderTargets!==!0&&(fe.__webglTexture===void 0&&(fe.__webglTexture=t.createTexture()),fe.__version=W.version,o.memory.textures++);const _e=q.isWebGLCubeRenderTarget===!0,Ge=q.isWebGLMultipleRenderTargets===!0,Ie=E(q)||a;if(_e){ie.__webglFramebuffer=[];for(let Le=0;Le<6;Le++)ie.__webglFramebuffer[Le]=t.createFramebuffer()}else{if(ie.__webglFramebuffer=t.createFramebuffer(),Ge)if(r.drawBuffers){const Le=q.texture;for(let ye=0,je=Le.length;ye<je;ye++){const re=i.get(Le[ye]);re.__webglTexture===void 0&&(re.__webglTexture=t.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&q.samples>0&&Ue(q)===!1){const Le=Ge?W:[W];ie.__webglMultisampledFramebuffer=t.createFramebuffer(),ie.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,ie.__webglMultisampledFramebuffer);for(let ye=0;ye<Le.length;ye++){const je=Le[ye];ie.__webglColorRenderbuffer[ye]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,ie.__webglColorRenderbuffer[ye]);const re=s.convert(je.format,je.encoding),ge=s.convert(je.type),Ce=M(je.internalFormat,re,ge,je.encoding,q.isXRRenderTarget===!0),Re=xe(q);t.renderbufferStorageMultisample(t.RENDERBUFFER,Re,Ce,q.width,q.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+ye,t.RENDERBUFFER,ie.__webglColorRenderbuffer[ye])}t.bindRenderbuffer(t.RENDERBUFFER,null),q.depthBuffer&&(ie.__webglDepthRenderbuffer=t.createRenderbuffer(),Se(ie.__webglDepthRenderbuffer,q,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(_e){n.bindTexture(t.TEXTURE_CUBE_MAP,fe.__webglTexture),K(t.TEXTURE_CUBE_MAP,W,Ie);for(let Le=0;Le<6;Le++)Me(ie.__webglFramebuffer[Le],q,W,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Le);S(W,Ie)&&b(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(Ge){const Le=q.texture;for(let ye=0,je=Le.length;ye<je;ye++){const re=Le[ye],ge=i.get(re);n.bindTexture(t.TEXTURE_2D,ge.__webglTexture),K(t.TEXTURE_2D,re,Ie),Me(ie.__webglFramebuffer,q,re,t.COLOR_ATTACHMENT0+ye,t.TEXTURE_2D),S(re,Ie)&&b(t.TEXTURE_2D)}n.unbindTexture()}else{let Le=t.TEXTURE_2D;(q.isWebGL3DRenderTarget||q.isWebGLArrayRenderTarget)&&(a?Le=q.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(Le,fe.__webglTexture),K(Le,W,Ie),Me(ie.__webglFramebuffer,q,W,t.COLOR_ATTACHMENT0,Le),S(W,Ie)&&b(Le),n.unbindTexture()}q.depthBuffer&&pe(q)}function ke(q){const W=E(q)||a,ie=q.isWebGLMultipleRenderTargets===!0?q.texture:[q.texture];for(let fe=0,_e=ie.length;fe<_e;fe++){const Ge=ie[fe];if(S(Ge,W)){const Ie=q.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,Le=i.get(Ge).__webglTexture;n.bindTexture(Ie,Le),b(Ie),n.unbindTexture()}}}function Ke(q){if(a&&q.samples>0&&Ue(q)===!1){const W=q.isWebGLMultipleRenderTargets?q.texture:[q.texture],ie=q.width,fe=q.height;let _e=t.COLOR_BUFFER_BIT;const Ge=[],Ie=q.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Le=i.get(q),ye=q.isWebGLMultipleRenderTargets===!0;if(ye)for(let je=0;je<W.length;je++)n.bindFramebuffer(t.FRAMEBUFFER,Le.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+je,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,Le.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+je,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,Le.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Le.__webglFramebuffer);for(let je=0;je<W.length;je++){Ge.push(t.COLOR_ATTACHMENT0+je),q.depthBuffer&&Ge.push(Ie);const re=Le.__ignoreDepthValues!==void 0?Le.__ignoreDepthValues:!1;if(re===!1&&(q.depthBuffer&&(_e|=t.DEPTH_BUFFER_BIT),q.stencilBuffer&&(_e|=t.STENCIL_BUFFER_BIT)),ye&&t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,Le.__webglColorRenderbuffer[je]),re===!0&&(t.invalidateFramebuffer(t.READ_FRAMEBUFFER,[Ie]),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[Ie])),ye){const ge=i.get(W[je]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,ge,0)}t.blitFramebuffer(0,0,ie,fe,0,0,ie,fe,_e,t.NEAREST),d&&t.invalidateFramebuffer(t.READ_FRAMEBUFFER,Ge)}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),ye)for(let je=0;je<W.length;je++){n.bindFramebuffer(t.FRAMEBUFFER,Le.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+je,t.RENDERBUFFER,Le.__webglColorRenderbuffer[je]);const re=i.get(W[je]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,Le.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+je,t.TEXTURE_2D,re,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Le.__webglMultisampledFramebuffer)}}function xe(q){return Math.min(h,q.samples)}function Ue(q){const W=i.get(q);return a&&q.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&W.__useRenderToTexture!==!1}function He(q){const W=o.render.frame;p.get(q)!==W&&(p.set(q,W),q.update())}function be(q,W){const ie=q.encoding,fe=q.format,_e=q.type;return q.isCompressedTexture===!0||q.isVideoTexture===!0||q.format===R_||ie!==xc&&(ie===Ln?a===!1?e.has("EXT_sRGB")===!0&&fe===Xs?(q.format=R_,q.minFilter=ni,q.generateMipmaps=!1):W=Yb.sRGBToLinear(W):(fe!==Xs||_e!==yc)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",ie)),W}this.allocateTextureUnit=G,this.resetTextureUnits=Z,this.setTexture2D=z,this.setTexture2DArray=Q,this.setTexture3D=H,this.setTextureCube=J,this.rebindTextures=Pe,this.setupRenderTarget=Oe,this.updateRenderTargetMipmap=ke,this.updateMultisampleRenderTarget=Ke,this.setupDepthRenderbuffer=pe,this.setupFrameBufferTexture=Me,this.useMultisampledRTT=Ue}function u8(t,e,n){const i=n.isWebGL2;function r(s,o=null){let a;if(s===yc)return t.UNSIGNED_BYTE;if(s===FO)return t.UNSIGNED_SHORT_4_4_4_4;if(s===LO)return t.UNSIGNED_SHORT_5_5_5_1;if(s===RO)return t.BYTE;if(s===PO)return t.SHORT;if(s===Wb)return t.UNSIGNED_SHORT;if(s===DO)return t.INT;if(s===Jl)return t.UNSIGNED_INT;if(s===Xa)return t.FLOAT;if(s===Md)return i?t.HALF_FLOAT:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===kO)return t.ALPHA;if(s===Xs)return t.RGBA;if(s===OO)return t.LUMINANCE;if(s===NO)return t.LUMINANCE_ALPHA;if(s===fc)return t.DEPTH_COMPONENT;if(s===nh)return t.DEPTH_STENCIL;if(s===GO)return t.RED;if(s===UO)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),t.RGBA;if(s===R_)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===zO)return t.RED_INTEGER;if(s===QO)return t.RG;if(s===HO)return t.RG_INTEGER;if(s===VO)return t.RGBA_INTEGER;if(s===Dv||s===Fv||s===Lv||s===kv)if(o===Ln)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===Dv)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===Fv)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===Lv)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===kv)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===Dv)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===Fv)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===Lv)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===kv)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===lC||s===cC||s===uC||s===hC)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===lC)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===cC)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===uC)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===hC)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===WO)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===fC||s===dC)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===fC)return o===Ln?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===dC)return o===Ln?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===pC||s===mC||s===AC||s===gC||s===vC||s===_C||s===yC||s===xC||s===EC||s===wC||s===MC||s===CC||s===SC||s===bC)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===pC)return o===Ln?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===mC)return o===Ln?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===AC)return o===Ln?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===gC)return o===Ln?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===vC)return o===Ln?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===_C)return o===Ln?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===yC)return o===Ln?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===xC)return o===Ln?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===EC)return o===Ln?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===wC)return o===Ln?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===MC)return o===Ln?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===CC)return o===Ln?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===SC)return o===Ln?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===bC)return o===Ln?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===IC)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===IC)return o===Ln?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return s===Ou?i?t.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):t[s]!==void 0?t[s]:null}return{convert:r}}class h8 extends Xi{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Xf extends an{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Une={type:"move"};class RE{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Xf,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Xf,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new te,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new te),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Xf,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new te,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new te),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const m of e.hand.values()){const g=n.getJointPose(m,i);if(c.joints[m.jointName]===void 0){const y=new Xf;y.matrixAutoUpdate=!1,y.visible=!1,c.joints[m.jointName]=y,c.add(y)}const _=c.joints[m.jointName];g!==null&&(_.matrix.fromArray(g.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.jointRadius=g.radius),_.visible=g!==null}const u=c.joints["index-finger-tip"],h=c.joints["thumb-tip"],f=u.position.distanceTo(h.position),d=.02,p=.005;c.inputState.pinching&&f>d+p?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&f<=d-p&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=n.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=n.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Une)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}}class f8 extends xi{constructor(e,n,i,r,s,o,a,l,c,u){if(u=u!==void 0?u:fc,u!==fc&&u!==nh)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&u===fc&&(i=Jl),i===void 0&&u===nh&&(i=Ou),super(null,r,s,o,a,l,u,i,c),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=a!==void 0?a:ui,this.minFilter=l!==void 0?l:ui,this.flipY=!1,this.generateMipmaps=!1}}class One extends hl{constructor(e,n){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=null,c=null,u=null,h=null,f=null,d=null;const p=n.getContextAttributes();let m=null,g=null;const _=[],y=[],x=new Xi;x.layers.enable(1),x.viewport=new An;const E=new Xi;E.layers.enable(2),E.viewport=new An;const w=[x,E],S=new h8;S.layers.enable(1),S.layers.enable(2);let b=null,M=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(O){let z=_[O];return z===void 0&&(z=new RE,_[O]=z),z.getTargetRaySpace()},this.getControllerGrip=function(O){let z=_[O];return z===void 0&&(z=new RE,_[O]=z),z.getGripSpace()},this.getHand=function(O){let z=_[O];return z===void 0&&(z=new RE,_[O]=z),z.getHandSpace()};function T(O){const z=y.indexOf(O.inputSource);if(z===-1)return;const Q=_[z];Q!==void 0&&Q.dispatchEvent({type:O.type,data:O.inputSource})}function B(){r.removeEventListener("select",T),r.removeEventListener("selectstart",T),r.removeEventListener("selectend",T),r.removeEventListener("squeeze",T),r.removeEventListener("squeezestart",T),r.removeEventListener("squeezeend",T),r.removeEventListener("end",B),r.removeEventListener("inputsourceschange",L);for(let O=0;O<_.length;O++){const z=y[O];z!==null&&(y[O]=null,_[O].disconnect(z))}b=null,M=null,e.setRenderTarget(m),f=null,h=null,u=null,r=null,g=null,G.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(O){s=O,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(O){a=O,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||o},this.setReferenceSpace=function(O){l=O},this.getBaseLayer=function(){return h!==null?h:f},this.getBinding=function(){return u},this.getFrame=function(){return d},this.getSession=function(){return r},this.setSession=async function(O){if(r=O,r!==null){if(m=e.getRenderTarget(),r.addEventListener("select",T),r.addEventListener("selectstart",T),r.addEventListener("selectend",T),r.addEventListener("squeeze",T),r.addEventListener("squeezestart",T),r.addEventListener("squeezeend",T),r.addEventListener("end",B),r.addEventListener("inputsourceschange",L),p.xrCompatible!==!0&&await n.makeXRCompatible(),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const z={antialias:r.renderState.layers===void 0?p.antialias:!0,alpha:p.alpha,depth:p.depth,stencil:p.stencil,framebufferScaleFactor:s};f=new XRWebGLLayer(r,n,z),r.updateRenderState({baseLayer:f}),g=new eo(f.framebufferWidth,f.framebufferHeight,{format:Xs,type:yc,encoding:e.outputEncoding,stencilBuffer:p.stencil})}else{let z=null,Q=null,H=null;p.depth&&(H=p.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,z=p.stencil?nh:fc,Q=p.stencil?Ou:Jl);const J={colorFormat:n.RGBA8,depthFormat:H,scaleFactor:s};u=new XRWebGLBinding(r,n),h=u.createProjectionLayer(J),r.updateRenderState({layers:[h]}),g=new eo(h.textureWidth,h.textureHeight,{format:Xs,type:yc,depthTexture:new f8(h.textureWidth,h.textureHeight,Q,void 0,void 0,void 0,void 0,void 0,void 0,z),stencilBuffer:p.stencil,encoding:e.outputEncoding,samples:p.antialias?4:0});const j=e.properties.get(g);j.__ignoreDepthValues=h.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(1),l=null,o=await r.requestReferenceSpace(a),G.setContext(r),G.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}};function L(O){for(let z=0;z<O.removed.length;z++){const Q=O.removed[z],H=y.indexOf(Q);H>=0&&(y[H]=null,_[H].dispatchEvent({type:"disconnected",data:Q}))}for(let z=0;z<O.added.length;z++){const Q=O.added[z];let H=y.indexOf(Q);if(H===-1){for(let j=0;j<_.length;j++)if(j>=y.length){y.push(Q),H=j;break}else if(y[j]===null){y[j]=Q,H=j;break}if(H===-1)break}const J=_[H];J&&J.dispatchEvent({type:"connected",data:Q})}}const F=new te,U=new te;function k(O,z,Q){F.setFromMatrixPosition(z.matrixWorld),U.setFromMatrixPosition(Q.matrixWorld);const H=F.distanceTo(U),J=z.projectionMatrix.elements,j=Q.projectionMatrix.elements,oe=J[14]/(J[10]-1),K=J[14]/(J[10]+1),ce=(J[9]+1)/J[5],he=(J[9]-1)/J[5],ve=(J[8]-1)/J[0],Me=(j[8]+1)/j[0],Se=oe*ve,le=oe*Me,pe=H/(-ve+Me),Pe=pe*-ve;z.matrixWorld.decompose(O.position,O.quaternion,O.scale),O.translateX(Pe),O.translateZ(pe),O.matrixWorld.compose(O.position,O.quaternion,O.scale),O.matrixWorldInverse.copy(O.matrixWorld).invert();const Oe=oe+pe,ke=K+pe,Ke=Se-Pe,xe=le+(H-Pe),Ue=ce*K/ke*Oe,He=he*K/ke*Oe;O.projectionMatrix.makePerspective(Ke,xe,Ue,He,Oe,ke)}function X(O,z){z===null?O.matrixWorld.copy(O.matrix):O.matrixWorld.multiplyMatrices(z.matrixWorld,O.matrix),O.matrixWorldInverse.copy(O.matrixWorld).invert()}this.updateCamera=function(O){if(r===null)return;S.near=E.near=x.near=O.near,S.far=E.far=x.far=O.far,(b!==S.near||M!==S.far)&&(r.updateRenderState({depthNear:S.near,depthFar:S.far}),b=S.near,M=S.far);const z=O.parent,Q=S.cameras;X(S,z);for(let J=0;J<Q.length;J++)X(Q[J],z);S.matrixWorld.decompose(S.position,S.quaternion,S.scale),O.matrix.copy(S.matrix),O.matrix.decompose(O.position,O.quaternion,O.scale);const H=O.children;for(let J=0,j=H.length;J<j;J++)H[J].updateMatrixWorld(!0);Q.length===2?k(S,x,E):S.projectionMatrix.copy(x.projectionMatrix)},this.getCamera=function(){return S},this.getFoveation=function(){if(h!==null)return h.fixedFoveation;if(f!==null)return f.fixedFoveation},this.setFoveation=function(O){h!==null&&(h.fixedFoveation=O),f!==null&&f.fixedFoveation!==void 0&&(f.fixedFoveation=O)};let Y=null;function Z(O,z){if(c=z.getViewerPose(l||o),d=z,c!==null){const Q=c.views;f!==null&&(e.setRenderTargetFramebuffer(g,f.framebuffer),e.setRenderTarget(g));let H=!1;Q.length!==S.cameras.length&&(S.cameras.length=0,H=!0);for(let J=0;J<Q.length;J++){const j=Q[J];let oe=null;if(f!==null)oe=f.getViewport(j);else{const ce=u.getViewSubImage(h,j);oe=ce.viewport,J===0&&(e.setRenderTargetTextures(g,ce.colorTexture,h.ignoreDepthValues?void 0:ce.depthStencilTexture),e.setRenderTarget(g))}let K=w[J];K===void 0&&(K=new Xi,K.layers.enable(J),K.viewport=new An,w[J]=K),K.matrix.fromArray(j.transform.matrix),K.projectionMatrix.fromArray(j.projectionMatrix),K.viewport.set(oe.x,oe.y,oe.width,oe.height),J===0&&S.matrix.copy(K.matrix),H===!0&&S.cameras.push(K)}}for(let Q=0;Q<_.length;Q++){const H=y[Q],J=_[Q];H!==null&&J!==void 0&&J.update(H,z,l||o)}Y&&Y(O,z),d=null}const G=new s8;G.setAnimationLoop(Z),this.setAnimationLoop=function(O){Y=O},this.dispose=function(){}}}function Nne(t,e){function n(m,g){m.fogColor.value.copy(g.color),g.isFog?(m.fogNear.value=g.near,m.fogFar.value=g.far):g.isFogExp2&&(m.fogDensity.value=g.density)}function i(m,g,_,y,x){g.isMeshBasicMaterial||g.isMeshLambertMaterial?r(m,g):g.isMeshToonMaterial?(r(m,g),u(m,g)):g.isMeshPhongMaterial?(r(m,g),c(m,g)):g.isMeshStandardMaterial?(r(m,g),h(m,g),g.isMeshPhysicalMaterial&&f(m,g,x)):g.isMeshMatcapMaterial?(r(m,g),d(m,g)):g.isMeshDepthMaterial?r(m,g):g.isMeshDistanceMaterial?(r(m,g),p(m,g)):g.isMeshNormalMaterial?r(m,g):g.isLineBasicMaterial?(s(m,g),g.isLineDashedMaterial&&o(m,g)):g.isPointsMaterial?a(m,g,_,y):g.isSpriteMaterial?l(m,g):g.isShadowMaterial?(m.color.value.copy(g.color),m.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function r(m,g){m.opacity.value=g.opacity,g.color&&m.diffuse.value.copy(g.color),g.emissive&&m.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.bumpMap&&(m.bumpMap.value=g.bumpMap,m.bumpScale.value=g.bumpScale,g.side===ds&&(m.bumpScale.value*=-1)),g.displacementMap&&(m.displacementMap.value=g.displacementMap,m.displacementScale.value=g.displacementScale,m.displacementBias.value=g.displacementBias),g.emissiveMap&&(m.emissiveMap.value=g.emissiveMap),g.normalMap&&(m.normalMap.value=g.normalMap,m.normalScale.value.copy(g.normalScale),g.side===ds&&m.normalScale.value.negate()),g.specularMap&&(m.specularMap.value=g.specularMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest);const _=e.get(g).envMap;if(_&&(m.envMap.value=_,m.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,m.reflectivity.value=g.reflectivity,m.ior.value=g.ior,m.refractionRatio.value=g.refractionRatio),g.lightMap){m.lightMap.value=g.lightMap;const E=t.physicallyCorrectLights!==!0?Math.PI:1;m.lightMapIntensity.value=g.lightMapIntensity*E}g.aoMap&&(m.aoMap.value=g.aoMap,m.aoMapIntensity.value=g.aoMapIntensity);let y;g.map?y=g.map:g.specularMap?y=g.specularMap:g.displacementMap?y=g.displacementMap:g.normalMap?y=g.normalMap:g.bumpMap?y=g.bumpMap:g.roughnessMap?y=g.roughnessMap:g.metalnessMap?y=g.metalnessMap:g.alphaMap?y=g.alphaMap:g.emissiveMap?y=g.emissiveMap:g.clearcoatMap?y=g.clearcoatMap:g.clearcoatNormalMap?y=g.clearcoatNormalMap:g.clearcoatRoughnessMap?y=g.clearcoatRoughnessMap:g.iridescenceMap?y=g.iridescenceMap:g.iridescenceThicknessMap?y=g.iridescenceThicknessMap:g.specularIntensityMap?y=g.specularIntensityMap:g.specularColorMap?y=g.specularColorMap:g.transmissionMap?y=g.transmissionMap:g.thicknessMap?y=g.thicknessMap:g.sheenColorMap?y=g.sheenColorMap:g.sheenRoughnessMap&&(y=g.sheenRoughnessMap),y!==void 0&&(y.isWebGLRenderTarget&&(y=y.texture),y.matrixAutoUpdate===!0&&y.updateMatrix(),m.uvTransform.value.copy(y.matrix));let x;g.aoMap?x=g.aoMap:g.lightMap&&(x=g.lightMap),x!==void 0&&(x.isWebGLRenderTarget&&(x=x.texture),x.matrixAutoUpdate===!0&&x.updateMatrix(),m.uv2Transform.value.copy(x.matrix))}function s(m,g){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity}function o(m,g){m.dashSize.value=g.dashSize,m.totalSize.value=g.dashSize+g.gapSize,m.scale.value=g.scale}function a(m,g,_,y){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.size.value=g.size*_,m.scale.value=y*.5,g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest);let x;g.map?x=g.map:g.alphaMap&&(x=g.alphaMap),x!==void 0&&(x.matrixAutoUpdate===!0&&x.updateMatrix(),m.uvTransform.value.copy(x.matrix))}function l(m,g){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.rotation.value=g.rotation,g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest);let _;g.map?_=g.map:g.alphaMap&&(_=g.alphaMap),_!==void 0&&(_.matrixAutoUpdate===!0&&_.updateMatrix(),m.uvTransform.value.copy(_.matrix))}function c(m,g){m.specular.value.copy(g.specular),m.shininess.value=Math.max(g.shininess,1e-4)}function u(m,g){g.gradientMap&&(m.gradientMap.value=g.gradientMap)}function h(m,g){m.roughness.value=g.roughness,m.metalness.value=g.metalness,g.roughnessMap&&(m.roughnessMap.value=g.roughnessMap),g.metalnessMap&&(m.metalnessMap.value=g.metalnessMap),e.get(g).envMap&&(m.envMapIntensity.value=g.envMapIntensity)}function f(m,g,_){m.ior.value=g.ior,g.sheen>0&&(m.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),m.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(m.sheenColorMap.value=g.sheenColorMap),g.sheenRoughnessMap&&(m.sheenRoughnessMap.value=g.sheenRoughnessMap)),g.clearcoat>0&&(m.clearcoat.value=g.clearcoat,m.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(m.clearcoatMap.value=g.clearcoatMap),g.clearcoatRoughnessMap&&(m.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap),g.clearcoatNormalMap&&(m.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),m.clearcoatNormalMap.value=g.clearcoatNormalMap,g.side===ds&&m.clearcoatNormalScale.value.negate())),g.iridescence>0&&(m.iridescence.value=g.iridescence,m.iridescenceIOR.value=g.iridescenceIOR,m.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],m.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(m.iridescenceMap.value=g.iridescenceMap),g.iridescenceThicknessMap&&(m.iridescenceThicknessMap.value=g.iridescenceThicknessMap)),g.transmission>0&&(m.transmission.value=g.transmission,m.transmissionSamplerMap.value=_.texture,m.transmissionSamplerSize.value.set(_.width,_.height),g.transmissionMap&&(m.transmissionMap.value=g.transmissionMap),m.thickness.value=g.thickness,g.thicknessMap&&(m.thicknessMap.value=g.thicknessMap),m.attenuationDistance.value=g.attenuationDistance,m.attenuationColor.value.copy(g.attenuationColor)),m.specularIntensity.value=g.specularIntensity,m.specularColor.value.copy(g.specularColor),g.specularIntensityMap&&(m.specularIntensityMap.value=g.specularIntensityMap),g.specularColorMap&&(m.specularColorMap.value=g.specularColorMap)}function d(m,g){g.matcap&&(m.matcap.value=g.matcap)}function p(m,g){m.referencePosition.value.copy(g.referencePosition),m.nearDistance.value=g.nearDistance,m.farDistance.value=g.farDistance}return{refreshFogUniforms:n,refreshMaterialUniforms:i}}function Gne(t,e,n,i){let r={},s={},o=[];const a=n.isWebGL2?t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(y,x){const E=x.program;i.uniformBlockBinding(y,E)}function c(y,x){let E=r[y.id];E===void 0&&(p(y),E=u(y),r[y.id]=E,y.addEventListener("dispose",g));const w=x.program;i.updateUBOMapping(y,w);const S=e.render.frame;s[y.id]!==S&&(f(y),s[y.id]=S)}function u(y){const x=h();y.__bindingPointIndex=x;const E=t.createBuffer(),w=y.__size,S=y.usage;return t.bindBuffer(t.UNIFORM_BUFFER,E),t.bufferData(t.UNIFORM_BUFFER,w,S),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,x,E),E}function h(){for(let y=0;y<a;y++)if(o.indexOf(y)===-1)return o.push(y),y;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function f(y){const x=r[y.id],E=y.uniforms,w=y.__cache;t.bindBuffer(t.UNIFORM_BUFFER,x);for(let S=0,b=E.length;S<b;S++){const M=E[S];if(d(M,S,w)===!0){const T=M.value,B=M.__offset;typeof T=="number"?(M.__data[0]=T,t.bufferSubData(t.UNIFORM_BUFFER,B,M.__data)):(M.value.isMatrix3?(M.__data[0]=M.value.elements[0],M.__data[1]=M.value.elements[1],M.__data[2]=M.value.elements[2],M.__data[3]=M.value.elements[0],M.__data[4]=M.value.elements[3],M.__data[5]=M.value.elements[4],M.__data[6]=M.value.elements[5],M.__data[7]=M.value.elements[0],M.__data[8]=M.value.elements[6],M.__data[9]=M.value.elements[7],M.__data[10]=M.value.elements[8],M.__data[11]=M.value.elements[0]):T.toArray(M.__data),t.bufferSubData(t.UNIFORM_BUFFER,B,M.__data))}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function d(y,x,E){const w=y.value;if(E[x]===void 0)return typeof w=="number"?E[x]=w:E[x]=w.clone(),!0;if(typeof w=="number"){if(E[x]!==w)return E[x]=w,!0}else{const S=E[x];if(S.equals(w)===!1)return S.copy(w),!0}return!1}function p(y){const x=y.uniforms;let E=0;const w=16;let S=0;for(let b=0,M=x.length;b<M;b++){const T=x[b],B=m(T);if(T.__data=new Float32Array(B.storage/Float32Array.BYTES_PER_ELEMENT),T.__offset=E,b>0){S=E%w;const L=w-S;S!==0&&L-B.boundary<0&&(E+=w-S,T.__offset=E)}E+=B.storage}return S=E%w,S>0&&(E+=w-S),y.__size=E,y.__cache={},this}function m(y){const x=y.value,E={boundary:0,storage:0};return typeof x=="number"?(E.boundary=4,E.storage=4):x.isVector2?(E.boundary=8,E.storage=8):x.isVector3||x.isColor?(E.boundary=16,E.storage=12):x.isVector4?(E.boundary=16,E.storage=16):x.isMatrix3?(E.boundary=48,E.storage=48):x.isMatrix4?(E.boundary=64,E.storage=64):x.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",x),E}function g(y){const x=y.target;x.removeEventListener("dispose",g);const E=o.indexOf(x.__bindingPointIndex);o.splice(E,1),t.deleteBuffer(r[x.id]),delete r[x.id],delete s[x.id]}function _(){for(const y in r)t.deleteBuffer(r[y]);o=[],r={},s={}}return{bind:l,update:c,dispose:_}}function zne(){const t=Pm("canvas");return t.style.display="block",t}function d8(t={}){this.isWebGLRenderer=!0;const e=t.canvas!==void 0?t.canvas:zne(),n=t.context!==void 0?t.context:null,i=t.depth!==void 0?t.depth:!0,r=t.stencil!==void 0?t.stencil:!0,s=t.antialias!==void 0?t.antialias:!1,o=t.premultipliedAlpha!==void 0?t.premultipliedAlpha:!0,a=t.preserveDrawingBuffer!==void 0?t.preserveDrawingBuffer:!1,l=t.powerPreference!==void 0?t.powerPreference:"default",c=t.failIfMajorPerformanceCaveat!==void 0?t.failIfMajorPerformanceCaveat:!1;let u;n!==null?u=n.getContextAttributes().alpha:u=t.alpha!==void 0?t.alpha:!1;let h=null,f=null;const d=[],p=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=xc,this.physicallyCorrectLights=!1,this.toneMapping=aa,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const m=this;let g=!1,_=0,y=0,x=null,E=-1,w=null;const S=new An,b=new An;let M=null,T=e.width,B=e.height,L=1,F=null,U=null;const k=new An(0,0,T,B),X=new An(0,0,T,B);let Y=!1;const Z=new Py;let G=!1,O=!1,z=null;const Q=new Lt,H=new Ve,J=new te,j={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function oe(){return x===null?L:1}let K=n;function ce(ee,me){for(let De=0;De<ee.length;De++){const Ae=ee[De],Ne=e.getContext(Ae,me);if(Ne!==null)return Ne}return null}try{const ee={alpha:!0,depth:i,stencil:r,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:a,powerPreference:l,failIfMajorPerformanceCaveat:c};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${Sy}`),e.addEventListener("webglcontextlost",Ce,!1),e.addEventListener("webglcontextrestored",Re,!1),e.addEventListener("webglcontextcreationerror",Je,!1),K===null){const me=["webgl2","webgl","experimental-webgl"];if(m.isWebGL1Renderer===!0&&me.shift(),K=ce(me,ee),K===null)throw ce(me)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}K.getShaderPrecisionFormat===void 0&&(K.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ee){throw console.error("THREE.WebGLRenderer: "+ee.message),ee}let he,ve,Me,Se,le,pe,Pe,Oe,ke,Ke,xe,Ue,He,be,q,W,ie,fe,_e,Ge,Ie,Le,ye,je;function re(){he=new ite(K),ve=new Kee(K,he,t),he.init(ve),Le=new u8(K,he,ve),Me=new Lne(K,he,ve),Se=new ote(K),le=new wne,pe=new kne(K,he,Me,le,ve,Le,Se),Pe=new $ee(m),Oe=new nte(m),ke=new gZ(K,ve),ye=new qee(K,he,ke,ve),Ke=new rte(K,ke,Se,ye),xe=new ute(K,Ke,ke,Se),_e=new cte(K,ve,pe),W=new Zee(le),Ue=new Ene(m,Pe,Oe,he,ve,ye,W),He=new Nne(m,le),be=new Cne,q=new Rne(he,ve),fe=new Yee(m,Pe,Me,xe,u,o),ie=new Fne(m,xe,ve),je=new Gne(K,Se,ve,Me),Ge=new Jee(K,he,Se,ve),Ie=new ste(K,he,Se,ve),Se.programs=Ue.programs,m.capabilities=ve,m.extensions=he,m.properties=le,m.renderLists=be,m.shadowMap=ie,m.state=Me,m.info=Se}re();const ge=new One(m,K);this.xr=ge,this.getContext=function(){return K},this.getContextAttributes=function(){return K.getContextAttributes()},this.forceContextLoss=function(){const ee=he.get("WEBGL_lose_context");ee&&ee.loseContext()},this.forceContextRestore=function(){const ee=he.get("WEBGL_lose_context");ee&&ee.restoreContext()},this.getPixelRatio=function(){return L},this.setPixelRatio=function(ee){ee!==void 0&&(L=ee,this.setSize(T,B,!1))},this.getSize=function(ee){return ee.set(T,B)},this.setSize=function(ee,me,De){if(ge.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}T=ee,B=me,e.width=Math.floor(ee*L),e.height=Math.floor(me*L),De!==!1&&(e.style.width=ee+"px",e.style.height=me+"px"),this.setViewport(0,0,ee,me)},this.getDrawingBufferSize=function(ee){return ee.set(T*L,B*L).floor()},this.setDrawingBufferSize=function(ee,me,De){T=ee,B=me,L=De,e.width=Math.floor(ee*De),e.height=Math.floor(me*De),this.setViewport(0,0,ee,me)},this.getCurrentViewport=function(ee){return ee.copy(S)},this.getViewport=function(ee){return ee.copy(k)},this.setViewport=function(ee,me,De,Ae){ee.isVector4?k.set(ee.x,ee.y,ee.z,ee.w):k.set(ee,me,De,Ae),Me.viewport(S.copy(k).multiplyScalar(L).floor())},this.getScissor=function(ee){return ee.copy(X)},this.setScissor=function(ee,me,De,Ae){ee.isVector4?X.set(ee.x,ee.y,ee.z,ee.w):X.set(ee,me,De,Ae),Me.scissor(b.copy(X).multiplyScalar(L).floor())},this.getScissorTest=function(){return Y},this.setScissorTest=function(ee){Me.setScissorTest(Y=ee)},this.setOpaqueSort=function(ee){F=ee},this.setTransparentSort=function(ee){U=ee},this.getClearColor=function(ee){return ee.copy(fe.getClearColor())},this.setClearColor=function(){fe.setClearColor.apply(fe,arguments)},this.getClearAlpha=function(){return fe.getClearAlpha()},this.setClearAlpha=function(){fe.setClearAlpha.apply(fe,arguments)},this.clear=function(ee=!0,me=!0,De=!0){let Ae=0;ee&&(Ae|=K.COLOR_BUFFER_BIT),me&&(Ae|=K.DEPTH_BUFFER_BIT),De&&(Ae|=K.STENCIL_BUFFER_BIT),K.clear(Ae)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Ce,!1),e.removeEventListener("webglcontextrestored",Re,!1),e.removeEventListener("webglcontextcreationerror",Je,!1),be.dispose(),q.dispose(),le.dispose(),Pe.dispose(),Oe.dispose(),xe.dispose(),ye.dispose(),je.dispose(),Ue.dispose(),ge.dispose(),ge.removeEventListener("sessionstart",ht),ge.removeEventListener("sessionend",bt),z&&(z.dispose(),z=null),cn.stop()};function Ce(ee){ee.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function Re(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;const ee=Se.autoReset,me=ie.enabled,De=ie.autoUpdate,Ae=ie.needsUpdate,Ne=ie.type;re(),Se.autoReset=ee,ie.enabled=me,ie.autoUpdate=De,ie.needsUpdate=Ae,ie.type=Ne}function Je(ee){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",ee.statusMessage)}function ae(ee){const me=ee.target;me.removeEventListener("dispose",ae),qe(me)}function qe(ee){ze(ee),le.remove(ee)}function ze(ee){const me=le.get(ee).programs;me!==void 0&&(me.forEach(function(De){Ue.releaseProgram(De)}),ee.isShaderMaterial&&Ue.releaseShaderCache(ee))}this.renderBufferDirect=function(ee,me,De,Ae,Ne,pt){me===null&&(me=j);const Et=Ne.isMesh&&Ne.matrixWorld.determinant()<0,Pt=qn(ee,me,De,Ae,Ne);Me.setMaterial(Ae,Et);let St=De.index;const Wt=De.attributes.position;if(St===null){if(Wt===void 0||Wt.count===0)return}else if(St.count===0)return;let Ot=1;Ae.wireframe===!0&&(St=Ke.getWireframeAttribute(De),Ot=2),ye.setup(Ne,Ae,Pt,De,St);let jt,vn=Ge;St!==null&&(jt=ke.get(St),vn=Ie,vn.setIndex(jt));const Fr=St!==null?St.count:Wt.count,ws=De.drawRange.start*Ot,Ms=De.drawRange.count*Ot,it=pt!==null?pt.start*Ot:0,Dt=pt!==null?pt.count*Ot:1/0,Cs=Math.max(ws,it),pn=Math.min(Fr,ws+Ms,it+Dt)-1,ki=Math.max(0,pn-Cs+1);if(ki!==0){if(Ne.isMesh)Ae.wireframe===!0?(Me.setLineWidth(Ae.wireframeLinewidth*oe()),vn.setMode(K.LINES)):vn.setMode(K.TRIANGLES);else if(Ne.isLine){let Ki=Ae.linewidth;Ki===void 0&&(Ki=1),Me.setLineWidth(Ki*oe()),Ne.isLineSegments?vn.setMode(K.LINES):Ne.isLineLoop?vn.setMode(K.LINE_LOOP):vn.setMode(K.LINE_STRIP)}else Ne.isPoints?vn.setMode(K.POINTS):Ne.isSprite&&vn.setMode(K.TRIANGLES);if(Ne.isInstancedMesh)vn.renderInstances(Cs,ki,Ne.count);else if(De.isInstancedBufferGeometry){const Ki=Math.min(De.instanceCount,De._maxInstanceCount);vn.renderInstances(Cs,ki,Ki)}else vn.render(Cs,ki)}},this.compile=function(ee,me){function De(Ae,Ne,pt){Ae.transparent===!0&&Ae.side===ja?(Ae.side=ds,Ae.needsUpdate=!0,Vn(Ae,Ne,pt),Ae.side=th,Ae.needsUpdate=!0,Vn(Ae,Ne,pt),Ae.side=ja):Vn(Ae,Ne,pt)}f=q.get(ee),f.init(),p.push(f),ee.traverseVisible(function(Ae){Ae.isLight&&Ae.layers.test(me.layers)&&(f.pushLight(Ae),Ae.castShadow&&f.pushShadow(Ae))}),f.setupLights(m.physicallyCorrectLights),ee.traverse(function(Ae){const Ne=Ae.material;if(Ne)if(Array.isArray(Ne))for(let pt=0;pt<Ne.length;pt++){const Et=Ne[pt];De(Et,ee,Ae)}else De(Ne,ee,Ae)}),p.pop(),f=null};let we=null;function We(ee){we&&we(ee)}function ht(){cn.stop()}function bt(){cn.start()}const cn=new s8;cn.setAnimationLoop(We),typeof self<"u"&&cn.setContext(self),this.setAnimationLoop=function(ee){we=ee,ge.setAnimationLoop(ee),ee===null?cn.stop():cn.start()},ge.addEventListener("sessionstart",ht),ge.addEventListener("sessionend",bt),this.render=function(ee,me){if(me!==void 0&&me.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(g===!0)return;ee.matrixWorldAutoUpdate===!0&&ee.updateMatrixWorld(),me.parent===null&&me.matrixWorldAutoUpdate===!0&&me.updateMatrixWorld(),ge.enabled===!0&&ge.isPresenting===!0&&(ge.cameraAutoUpdate===!0&&ge.updateCamera(me),me=ge.getCamera()),ee.isScene===!0&&ee.onBeforeRender(m,ee,me,x),f=q.get(ee,p.length),f.init(),p.push(f),Q.multiplyMatrices(me.projectionMatrix,me.matrixWorldInverse),Z.setFromProjectionMatrix(Q),O=this.localClippingEnabled,G=W.init(this.clippingPlanes,O,me),h=be.get(ee,d.length),h.init(),d.push(h),Vt(ee,me,0,m.sortObjects),h.finish(),m.sortObjects===!0&&h.sort(F,U),G===!0&&W.beginShadows();const De=f.state.shadowsArray;if(ie.render(De,ee,me),G===!0&&W.endShadows(),this.info.autoReset===!0&&this.info.reset(),fe.render(h,ee),f.setupLights(m.physicallyCorrectLights),me.isArrayCamera){const Ae=me.cameras;for(let Ne=0,pt=Ae.length;Ne<pt;Ne++){const Et=Ae[Ne];At(h,ee,Et,Et.viewport)}}else At(h,ee,me);x!==null&&(pe.updateMultisampleRenderTarget(x),pe.updateRenderTargetMipmap(x)),ee.isScene===!0&&ee.onAfterRender(m,ee,me),ye.resetDefaultState(),E=-1,w=null,p.pop(),p.length>0?f=p[p.length-1]:f=null,d.pop(),d.length>0?h=d[d.length-1]:h=null};function Vt(ee,me,De,Ae){if(ee.visible===!1)return;if(ee.layers.test(me.layers)){if(ee.isGroup)De=ee.renderOrder;else if(ee.isLOD)ee.autoUpdate===!0&&ee.update(me);else if(ee.isLight)f.pushLight(ee),ee.castShadow&&f.pushShadow(ee);else if(ee.isSprite){if(!ee.frustumCulled||Z.intersectsSprite(ee)){Ae&&J.setFromMatrixPosition(ee.matrixWorld).applyMatrix4(Q);const Et=xe.update(ee),Pt=ee.material;Pt.visible&&h.push(ee,Et,Pt,De,J.z,null)}}else if((ee.isMesh||ee.isLine||ee.isPoints)&&(ee.isSkinnedMesh&&ee.skeleton.frame!==Se.render.frame&&(ee.skeleton.update(),ee.skeleton.frame=Se.render.frame),!ee.frustumCulled||Z.intersectsObject(ee))){Ae&&J.setFromMatrixPosition(ee.matrixWorld).applyMatrix4(Q);const Et=xe.update(ee),Pt=ee.material;if(Array.isArray(Pt)){const St=Et.groups;for(let Wt=0,Ot=St.length;Wt<Ot;Wt++){const jt=St[Wt],vn=Pt[jt.materialIndex];vn&&vn.visible&&h.push(ee,Et,vn,De,J.z,jt)}}else Pt.visible&&h.push(ee,Et,Pt,De,J.z,null)}}const pt=ee.children;for(let Et=0,Pt=pt.length;Et<Pt;Et++)Vt(pt[Et],me,De,Ae)}function At(ee,me,De,Ae){const Ne=ee.opaque,pt=ee.transmissive,Et=ee.transparent;f.setupLightsView(De),pt.length>0&&un(Ne,me,De),Ae&&Me.viewport(S.copy(Ae)),Ne.length>0&&dn(Ne,me,De),pt.length>0&&dn(pt,me,De),Et.length>0&&dn(Et,me,De),Me.buffers.depth.setTest(!0),Me.buffers.depth.setMask(!0),Me.buffers.color.setMask(!0),Me.setPolygonOffset(!1)}function un(ee,me,De){const Ae=ve.isWebGL2;z===null&&(z=new eo(1,1,{generateMipmaps:!0,type:he.has("EXT_color_buffer_half_float")?Md:yc,minFilter:ph,samples:Ae&&s===!0?4:0})),m.getDrawingBufferSize(H),Ae?z.setSize(H.x,H.y):z.setSize(P_(H.x),P_(H.y));const Ne=m.getRenderTarget();m.setRenderTarget(z),m.clear();const pt=m.toneMapping;m.toneMapping=aa,dn(ee,me,De),m.toneMapping=pt,pe.updateMultisampleRenderTarget(z),pe.updateRenderTargetMipmap(z),m.setRenderTarget(Ne)}function dn(ee,me,De){const Ae=me.isScene===!0?me.overrideMaterial:null;for(let Ne=0,pt=ee.length;Ne<pt;Ne++){const Et=ee[Ne],Pt=Et.object,St=Et.geometry,Wt=Ae===null?Et.material:Ae,Ot=Et.group;Pt.layers.test(De.layers)&&hn(Pt,me,De,St,Wt,Ot)}}function hn(ee,me,De,Ae,Ne,pt){ee.onBeforeRender(m,me,De,Ae,Ne,pt),ee.modelViewMatrix.multiplyMatrices(De.matrixWorldInverse,ee.matrixWorld),ee.normalMatrix.getNormalMatrix(ee.modelViewMatrix),Ne.onBeforeRender(m,me,De,Ae,ee,pt),Ne.transparent===!0&&Ne.side===ja?(Ne.side=ds,Ne.needsUpdate=!0,m.renderBufferDirect(De,me,Ae,Ne,ee,pt),Ne.side=th,Ne.needsUpdate=!0,m.renderBufferDirect(De,me,Ae,Ne,ee,pt),Ne.side=ja):m.renderBufferDirect(De,me,Ae,Ne,ee,pt),ee.onAfterRender(m,me,De,Ae,Ne,pt)}function Vn(ee,me,De){me.isScene!==!0&&(me=j);const Ae=le.get(ee),Ne=f.state.lights,pt=f.state.shadowsArray,Et=Ne.state.version,Pt=Ue.getParameters(ee,Ne.state,pt,me,De),St=Ue.getProgramCacheKey(Pt);let Wt=Ae.programs;Ae.environment=ee.isMeshStandardMaterial?me.environment:null,Ae.fog=me.fog,Ae.envMap=(ee.isMeshStandardMaterial?Oe:Pe).get(ee.envMap||Ae.environment),Wt===void 0&&(ee.addEventListener("dispose",ae),Wt=new Map,Ae.programs=Wt);let Ot=Wt.get(St);if(Ot!==void 0){if(Ae.currentProgram===Ot&&Ae.lightsStateVersion===Et)return mr(ee,Pt),Ot}else Pt.uniforms=Ue.getUniforms(ee),ee.onBuild(De,Pt,m),ee.onBeforeCompile(Pt,m),Ot=Ue.acquireProgram(Pt,St),Wt.set(St,Ot),Ae.uniforms=Pt.uniforms;const jt=Ae.uniforms;(!ee.isShaderMaterial&&!ee.isRawShaderMaterial||ee.clipping===!0)&&(jt.clippingPlanes=W.uniform),mr(ee,Pt),Ae.needsLights=pi(ee),Ae.lightsStateVersion=Et,Ae.needsLights&&(jt.ambientLightColor.value=Ne.state.ambient,jt.lightProbe.value=Ne.state.probe,jt.directionalLights.value=Ne.state.directional,jt.directionalLightShadows.value=Ne.state.directionalShadow,jt.spotLights.value=Ne.state.spot,jt.spotLightShadows.value=Ne.state.spotShadow,jt.rectAreaLights.value=Ne.state.rectArea,jt.ltc_1.value=Ne.state.rectAreaLTC1,jt.ltc_2.value=Ne.state.rectAreaLTC2,jt.pointLights.value=Ne.state.point,jt.pointLightShadows.value=Ne.state.pointShadow,jt.hemisphereLights.value=Ne.state.hemi,jt.directionalShadowMap.value=Ne.state.directionalShadowMap,jt.directionalShadowMatrix.value=Ne.state.directionalShadowMatrix,jt.spotShadowMap.value=Ne.state.spotShadowMap,jt.spotLightMatrix.value=Ne.state.spotLightMatrix,jt.spotLightMap.value=Ne.state.spotLightMap,jt.pointShadowMap.value=Ne.state.pointShadowMap,jt.pointShadowMatrix.value=Ne.state.pointShadowMatrix);const vn=Ot.getUniforms(),Fr=Gv.seqWithValue(vn.seq,jt);return Ae.currentProgram=Ot,Ae.uniformsList=Fr,Ot}function mr(ee,me){const De=le.get(ee);De.outputEncoding=me.outputEncoding,De.instancing=me.instancing,De.skinning=me.skinning,De.morphTargets=me.morphTargets,De.morphNormals=me.morphNormals,De.morphColors=me.morphColors,De.morphTargetsCount=me.morphTargetsCount,De.numClippingPlanes=me.numClippingPlanes,De.numIntersection=me.numClipIntersection,De.vertexAlphas=me.vertexAlphas,De.vertexTangents=me.vertexTangents,De.toneMapping=me.toneMapping}function qn(ee,me,De,Ae,Ne){me.isScene!==!0&&(me=j),pe.resetTextureUnits();const pt=me.fog,Et=Ae.isMeshStandardMaterial?me.environment:null,Pt=x===null?m.outputEncoding:x.isXRRenderTarget===!0?x.texture.encoding:xc,St=(Ae.isMeshStandardMaterial?Oe:Pe).get(Ae.envMap||Et),Wt=Ae.vertexColors===!0&&!!De.attributes.color&&De.attributes.color.itemSize===4,Ot=!!Ae.normalMap&&!!De.attributes.tangent,jt=!!De.morphAttributes.position,vn=!!De.morphAttributes.normal,Fr=!!De.morphAttributes.color,ws=Ae.toneMapped?m.toneMapping:aa,Ms=De.morphAttributes.position||De.morphAttributes.normal||De.morphAttributes.color,it=Ms!==void 0?Ms.length:0,Dt=le.get(Ae),Cs=f.state.lights;if(G===!0&&(O===!0||ee!==w)){const en=ee===w&&Ae.id===E;W.setState(Ae,ee,en)}let pn=!1;Ae.version===Dt.__version?(Dt.needsLights&&Dt.lightsStateVersion!==Cs.state.version||Dt.outputEncoding!==Pt||Ne.isInstancedMesh&&Dt.instancing===!1||!Ne.isInstancedMesh&&Dt.instancing===!0||Ne.isSkinnedMesh&&Dt.skinning===!1||!Ne.isSkinnedMesh&&Dt.skinning===!0||Dt.envMap!==St||Ae.fog===!0&&Dt.fog!==pt||Dt.numClippingPlanes!==void 0&&(Dt.numClippingPlanes!==W.numPlanes||Dt.numIntersection!==W.numIntersection)||Dt.vertexAlphas!==Wt||Dt.vertexTangents!==Ot||Dt.morphTargets!==jt||Dt.morphNormals!==vn||Dt.morphColors!==Fr||Dt.toneMapping!==ws||ve.isWebGL2===!0&&Dt.morphTargetsCount!==it)&&(pn=!0):(pn=!0,Dt.__version=Ae.version);let ki=Dt.currentProgram;pn===!0&&(ki=Vn(Ae,me,Ne));let Ki=!1,Ui=!1,Oi=!1;const It=ki.getUniforms(),Nt=Dt.uniforms;if(Me.useProgram(ki.program)&&(Ki=!0,Ui=!0,Oi=!0),Ae.id!==E&&(E=Ae.id,Ui=!0),Ki||w!==ee){if(It.setValue(K,"projectionMatrix",ee.projectionMatrix),ve.logarithmicDepthBuffer&&It.setValue(K,"logDepthBufFC",2/(Math.log(ee.far+1)/Math.LN2)),w!==ee&&(w=ee,Ui=!0,Oi=!0),Ae.isShaderMaterial||Ae.isMeshPhongMaterial||Ae.isMeshToonMaterial||Ae.isMeshStandardMaterial||Ae.envMap){const en=It.map.cameraPosition;en!==void 0&&en.setValue(K,J.setFromMatrixPosition(ee.matrixWorld))}(Ae.isMeshPhongMaterial||Ae.isMeshToonMaterial||Ae.isMeshLambertMaterial||Ae.isMeshBasicMaterial||Ae.isMeshStandardMaterial||Ae.isShaderMaterial)&&It.setValue(K,"isOrthographic",ee.isOrthographicCamera===!0),(Ae.isMeshPhongMaterial||Ae.isMeshToonMaterial||Ae.isMeshLambertMaterial||Ae.isMeshBasicMaterial||Ae.isMeshStandardMaterial||Ae.isShaderMaterial||Ae.isShadowMaterial||Ne.isSkinnedMesh)&&It.setValue(K,"viewMatrix",ee.matrixWorldInverse)}if(Ne.isSkinnedMesh){It.setOptional(K,Ne,"bindMatrix"),It.setOptional(K,Ne,"bindMatrixInverse");const en=Ne.skeleton;en&&(ve.floatVertexTextures?(en.boneTexture===null&&en.computeBoneTexture(),It.setValue(K,"boneTexture",en.boneTexture,pe),It.setValue(K,"boneTextureSize",en.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Ar=De.morphAttributes;if((Ar.position!==void 0||Ar.normal!==void 0||Ar.color!==void 0&&ve.isWebGL2===!0)&&_e.update(Ne,De,Ae,ki),(Ui||Dt.receiveShadow!==Ne.receiveShadow)&&(Dt.receiveShadow=Ne.receiveShadow,It.setValue(K,"receiveShadow",Ne.receiveShadow)),Ae.isMeshGouraudMaterial&&Ae.envMap!==null&&(Nt.envMap.value=St,Nt.flipEnvMap.value=St.isCubeTexture&&St.isRenderTargetTexture===!1?-1:1),Ui&&(It.setValue(K,"toneMappingExposure",m.toneMappingExposure),Dt.needsLights&&Dn(Nt,Oi),pt&&Ae.fog===!0&&He.refreshFogUniforms(Nt,pt),He.refreshMaterialUniforms(Nt,Ae,L,B,z),Gv.upload(K,Dt.uniformsList,Nt,pe)),Ae.isShaderMaterial&&Ae.uniformsNeedUpdate===!0&&(Gv.upload(K,Dt.uniformsList,Nt,pe),Ae.uniformsNeedUpdate=!1),Ae.isSpriteMaterial&&It.setValue(K,"center",Ne.center),It.setValue(K,"modelViewMatrix",Ne.modelViewMatrix),It.setValue(K,"normalMatrix",Ne.normalMatrix),It.setValue(K,"modelMatrix",Ne.matrixWorld),Ae.isShaderMaterial||Ae.isRawShaderMaterial){const en=Ae.uniformsGroups;for(let Jn=0,gr=en.length;Jn<gr;Jn++)if(ve.isWebGL2){const Jr=en[Jn];je.update(Jr,ki),je.bind(Jr,ki)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return ki}function Dn(ee,me){ee.ambientLightColor.needsUpdate=me,ee.lightProbe.needsUpdate=me,ee.directionalLights.needsUpdate=me,ee.directionalLightShadows.needsUpdate=me,ee.pointLights.needsUpdate=me,ee.pointLightShadows.needsUpdate=me,ee.spotLights.needsUpdate=me,ee.spotLightShadows.needsUpdate=me,ee.rectAreaLights.needsUpdate=me,ee.hemisphereLights.needsUpdate=me}function pi(ee){return ee.isMeshLambertMaterial||ee.isMeshToonMaterial||ee.isMeshPhongMaterial||ee.isMeshStandardMaterial||ee.isShadowMaterial||ee.isShaderMaterial&&ee.lights===!0}this.getActiveCubeFace=function(){return _},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return x},this.setRenderTargetTextures=function(ee,me,De){le.get(ee.texture).__webglTexture=me,le.get(ee.depthTexture).__webglTexture=De;const Ae=le.get(ee);Ae.__hasExternalTextures=!0,Ae.__hasExternalTextures&&(Ae.__autoAllocateDepthBuffer=De===void 0,Ae.__autoAllocateDepthBuffer||he.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Ae.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(ee,me){const De=le.get(ee);De.__webglFramebuffer=me,De.__useDefaultFramebuffer=me===void 0},this.setRenderTarget=function(ee,me=0,De=0){x=ee,_=me,y=De;let Ae=!0;if(ee){const St=le.get(ee);St.__useDefaultFramebuffer!==void 0?(Me.bindFramebuffer(K.FRAMEBUFFER,null),Ae=!1):St.__webglFramebuffer===void 0?pe.setupRenderTarget(ee):St.__hasExternalTextures&&pe.rebindTextures(ee,le.get(ee.texture).__webglTexture,le.get(ee.depthTexture).__webglTexture)}let Ne=null,pt=!1,Et=!1;if(ee){const St=ee.texture;(St.isData3DTexture||St.isDataArrayTexture)&&(Et=!0);const Wt=le.get(ee).__webglFramebuffer;ee.isWebGLCubeRenderTarget?(Ne=Wt[me],pt=!0):ve.isWebGL2&&ee.samples>0&&pe.useMultisampledRTT(ee)===!1?Ne=le.get(ee).__webglMultisampledFramebuffer:Ne=Wt,S.copy(ee.viewport),b.copy(ee.scissor),M=ee.scissorTest}else S.copy(k).multiplyScalar(L).floor(),b.copy(X).multiplyScalar(L).floor(),M=Y;if(Me.bindFramebuffer(K.FRAMEBUFFER,Ne)&&ve.drawBuffers&&Ae&&Me.drawBuffers(ee,Ne),Me.viewport(S),Me.scissor(b),Me.setScissorTest(M),pt){const St=le.get(ee.texture);K.framebufferTexture2D(K.FRAMEBUFFER,K.COLOR_ATTACHMENT0,K.TEXTURE_CUBE_MAP_POSITIVE_X+me,St.__webglTexture,De)}else if(Et){const St=le.get(ee.texture),Wt=me||0;K.framebufferTextureLayer(K.FRAMEBUFFER,K.COLOR_ATTACHMENT0,St.__webglTexture,De||0,Wt)}E=-1},this.readRenderTargetPixels=function(ee,me,De,Ae,Ne,pt,Et){if(!(ee&&ee.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Pt=le.get(ee).__webglFramebuffer;if(ee.isWebGLCubeRenderTarget&&Et!==void 0&&(Pt=Pt[Et]),Pt){Me.bindFramebuffer(K.FRAMEBUFFER,Pt);try{const St=ee.texture,Wt=St.format,Ot=St.type;if(Wt!==Xs&&Le.convert(Wt)!==K.getParameter(K.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const jt=Ot===Md&&(he.has("EXT_color_buffer_half_float")||ve.isWebGL2&&he.has("EXT_color_buffer_float"));if(Ot!==yc&&Le.convert(Ot)!==K.getParameter(K.IMPLEMENTATION_COLOR_READ_TYPE)&&!(Ot===Xa&&(ve.isWebGL2||he.has("OES_texture_float")||he.has("WEBGL_color_buffer_float")))&&!jt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}me>=0&&me<=ee.width-Ae&&De>=0&&De<=ee.height-Ne&&K.readPixels(me,De,Ae,Ne,Le.convert(Wt),Le.convert(Ot),pt)}finally{const St=x!==null?le.get(x).__webglFramebuffer:null;Me.bindFramebuffer(K.FRAMEBUFFER,St)}}},this.copyFramebufferToTexture=function(ee,me,De=0){const Ae=Math.pow(2,-De),Ne=Math.floor(me.image.width*Ae),pt=Math.floor(me.image.height*Ae);pe.setTexture2D(me,0),K.copyTexSubImage2D(K.TEXTURE_2D,De,0,0,ee.x,ee.y,Ne,pt),Me.unbindTexture()},this.copyTextureToTexture=function(ee,me,De,Ae=0){const Ne=me.image.width,pt=me.image.height,Et=Le.convert(De.format),Pt=Le.convert(De.type);pe.setTexture2D(De,0),K.pixelStorei(K.UNPACK_FLIP_Y_WEBGL,De.flipY),K.pixelStorei(K.UNPACK_PREMULTIPLY_ALPHA_WEBGL,De.premultiplyAlpha),K.pixelStorei(K.UNPACK_ALIGNMENT,De.unpackAlignment),me.isDataTexture?K.texSubImage2D(K.TEXTURE_2D,Ae,ee.x,ee.y,Ne,pt,Et,Pt,me.image.data):me.isCompressedTexture?K.compressedTexSubImage2D(K.TEXTURE_2D,Ae,ee.x,ee.y,me.mipmaps[0].width,me.mipmaps[0].height,Et,me.mipmaps[0].data):K.texSubImage2D(K.TEXTURE_2D,Ae,ee.x,ee.y,Et,Pt,me.image),Ae===0&&De.generateMipmaps&&K.generateMipmap(K.TEXTURE_2D),Me.unbindTexture()},this.copyTextureToTexture3D=function(ee,me,De,Ae,Ne=0){if(m.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const pt=ee.max.x-ee.min.x+1,Et=ee.max.y-ee.min.y+1,Pt=ee.max.z-ee.min.z+1,St=Le.convert(Ae.format),Wt=Le.convert(Ae.type);let Ot;if(Ae.isData3DTexture)pe.setTexture3D(Ae,0),Ot=K.TEXTURE_3D;else if(Ae.isDataArrayTexture)pe.setTexture2DArray(Ae,0),Ot=K.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}K.pixelStorei(K.UNPACK_FLIP_Y_WEBGL,Ae.flipY),K.pixelStorei(K.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ae.premultiplyAlpha),K.pixelStorei(K.UNPACK_ALIGNMENT,Ae.unpackAlignment);const jt=K.getParameter(K.UNPACK_ROW_LENGTH),vn=K.getParameter(K.UNPACK_IMAGE_HEIGHT),Fr=K.getParameter(K.UNPACK_SKIP_PIXELS),ws=K.getParameter(K.UNPACK_SKIP_ROWS),Ms=K.getParameter(K.UNPACK_SKIP_IMAGES),it=De.isCompressedTexture?De.mipmaps[0]:De.image;K.pixelStorei(K.UNPACK_ROW_LENGTH,it.width),K.pixelStorei(K.UNPACK_IMAGE_HEIGHT,it.height),K.pixelStorei(K.UNPACK_SKIP_PIXELS,ee.min.x),K.pixelStorei(K.UNPACK_SKIP_ROWS,ee.min.y),K.pixelStorei(K.UNPACK_SKIP_IMAGES,ee.min.z),De.isDataTexture||De.isData3DTexture?K.texSubImage3D(Ot,Ne,me.x,me.y,me.z,pt,Et,Pt,St,Wt,it.data):De.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),K.compressedTexSubImage3D(Ot,Ne,me.x,me.y,me.z,pt,Et,Pt,St,it.data)):K.texSubImage3D(Ot,Ne,me.x,me.y,me.z,pt,Et,Pt,St,Wt,it),K.pixelStorei(K.UNPACK_ROW_LENGTH,jt),K.pixelStorei(K.UNPACK_IMAGE_HEIGHT,vn),K.pixelStorei(K.UNPACK_SKIP_PIXELS,Fr),K.pixelStorei(K.UNPACK_SKIP_ROWS,ws),K.pixelStorei(K.UNPACK_SKIP_IMAGES,Ms),Ne===0&&Ae.generateMipmaps&&K.generateMipmap(Ot),Me.unbindTexture()},this.initTexture=function(ee){ee.isCubeTexture?pe.setTextureCube(ee,0):ee.isData3DTexture?pe.setTexture3D(ee,0):ee.isDataArrayTexture?pe.setTexture2DArray(ee,0):pe.setTexture2D(ee,0),Me.unbindTexture()},this.resetState=function(){_=0,y=0,x=null,Me.reset(),ye.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class p8 extends d8{}p8.prototype.isWebGL1Renderer=!0;class Ly{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new ot(e),this.density=n}clone(){return new Ly(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class ky{constructor(e,n=1,i=1e3){this.isFog=!0,this.name="",this.color=new ot(e),this.near=n,this.far=i}clone(){return new ky(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class m8 extends an{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),n}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class Uy{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=Bm,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=ps()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,i){e*=this.stride,i*=n.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=n.array[i+r];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ps()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(n,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ps()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const wr=new te;class ih{constructor(e,n,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=i,this.normalized=r===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,i=this.data.count;n<i;n++)wr.fromBufferAttribute(this,n),wr.applyMatrix4(e),this.setXYZ(n,wr.x,wr.y,wr.z);return this}applyNormalMatrix(e){for(let n=0,i=this.count;n<i;n++)wr.fromBufferAttribute(this,n),wr.applyNormalMatrix(e),this.setXYZ(n,wr.x,wr.y,wr.z);return this}transformDirection(e){for(let n=0,i=this.count;n<i;n++)wr.fromBufferAttribute(this,n),wr.transformDirection(e),this.setXYZ(n,wr.x,wr.y,wr.z);return this}setX(e,n){return this.normalized&&(n=xn(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=xn(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=xn(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=xn(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=Ya(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=Ya(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=Ya(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=Ya(n,this.array)),n}setXY(e,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(n=xn(n,this.array),i=xn(i,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this}setXYZ(e,n,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=xn(n,this.array),i=xn(i,this.array),r=xn(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,n,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(n=xn(n,this.array),i=xn(i,this.array),r=xn(r,this.array),s=xn(s,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");const n=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[r+s])}return new En(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new ih(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");const n=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class e3 extends pr{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new ot(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let lf;const q0=new te,cf=new te,uf=new te,hf=new Ve,J0=new Ve,A8=new Lt,hg=new te,K0=new te,fg=new te,SP=new Ve,PE=new Ve,bP=new Ve;class g8 extends an{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",lf===void 0){lf=new zt;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new Uy(n,5);lf.setIndex([0,1,2,0,2,3]),lf.setAttribute("position",new ih(i,3,0,!1)),lf.setAttribute("uv",new ih(i,2,3,!1))}this.geometry=lf,this.material=e!==void 0?e:new e3,this.center=new Ve(.5,.5)}raycast(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),cf.setFromMatrixScale(this.matrixWorld),A8.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),uf.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&cf.multiplyScalar(-uf.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;dg(hg.set(-.5,-.5,0),uf,o,cf,r,s),dg(K0.set(.5,-.5,0),uf,o,cf,r,s),dg(fg.set(.5,.5,0),uf,o,cf,r,s),SP.set(0,0),PE.set(1,0),bP.set(1,1);let a=e.ray.intersectTriangle(hg,K0,fg,!1,q0);if(a===null&&(dg(K0.set(-.5,.5,0),uf,o,cf,r,s),PE.set(0,1),a=e.ray.intersectTriangle(hg,fg,K0,!1,q0),a===null))return;const l=e.ray.origin.distanceTo(q0);l<e.near||l>e.far||n.push({distance:l,point:q0.clone(),uv:Hs.getUV(q0,hg,K0,fg,SP,PE,bP,new Ve),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function dg(t,e,n,i,r,s){hf.subVectors(t,n).addScalar(.5).multiply(i),r!==void 0?(J0.x=s*hf.x-r*hf.y,J0.y=r*hf.x+s*hf.y):J0.copy(hf),t.copy(e),t.x+=J0.x,t.y+=J0.y,t.applyMatrix4(A8)}const pg=new te,IP=new te;class v8 extends an{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const n=e.levels;for(let i=0,r=n.length;i<r;i++){const s=n[i];this.addLevel(s.object.clone(),s.distance)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0){n=Math.abs(n);const i=this.levels;let r;for(r=0;r<i.length&&!(n<i[r].distance);r++);return i.splice(r,0,{distance:n,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const n=this.levels;if(n.length>0){let i,r;for(i=1,r=n.length;i<r&&!(e<n[i].distance);i++);return n[i-1].object}return null}raycast(e,n){if(this.levels.length>0){pg.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(pg);this.getObjectForDistance(r).raycast(e,n)}}update(e){const n=this.levels;if(n.length>1){pg.setFromMatrixPosition(e.matrixWorld),IP.setFromMatrixPosition(this.matrixWorld);const i=pg.distanceTo(IP)/e.zoom;n[0].object.visible=!0;let r,s;for(r=1,s=n.length;r<s&&i>=n[r].distance;r++)n[r-1].object.visible=!1,n[r].object.visible=!0;for(this._currentLevel=r-1;r<s;r++)n[r].object.visible=!1}}toJSON(e){const n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];n.object.levels.push({object:o.object.uuid,distance:o.distance})}return n}}const TP=new te,BP=new An,RP=new An,Qne=new te,PP=new Lt;class _8 extends Yi{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Lt,this.bindMatrixInverse=new Lt}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new An,n=this.geometry.attributes.skinWeight;for(let i=0,r=n.count;i<r;i++){e.fromBufferAttribute(n,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),n.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,n){const i=this.skeleton,r=this.geometry;BP.fromBufferAttribute(r.attributes.skinIndex,e),RP.fromBufferAttribute(r.attributes.skinWeight,e),TP.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let s=0;s<4;s++){const o=RP.getComponent(s);if(o!==0){const a=BP.getComponent(s);PP.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),n.addScaledVector(Qne.copy(TP).applyMatrix4(PP),o)}}return n.applyMatrix4(this.bindMatrixInverse)}}class t3 extends an{constructor(){super(),this.isBone=!0,this.type="Bone"}}class ad extends xi{constructor(e=null,n=1,i=1,r,s,o,a,l,c=ui,u=ui,h,f){super(null,o,a,l,c,u,r,s,h,f),this.isDataTexture=!0,this.image={data:e,width:n,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const DP=new Lt,Hne=new Lt;class Oy{constructor(e=[],n=[]){this.uuid=ps(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new Lt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const i=new Lt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,n=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:Hne;DP.multiplyMatrices(a,n[s]),DP.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new Oy(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=$O(e),e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const i=new ad(n,e,e,Xs,Xa);return i.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let n=0,i=this.bones.length;n<i;n++){const r=this.bones[n];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=n[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new t3),this.bones.push(o),this.boneInverses.push(new Lt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,i=this.boneInverses;for(let r=0,s=n.length;r<s;r++){const o=n[r];e.bones.push(o.uuid);const a=i[r];e.boneInverses.push(a.toArray())}return e}}class Sd extends En{constructor(e,n,i,r=1){super(e,n,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const FP=new Lt,LP=new Lt,mg=[],Z0=new Yi;class y8 extends Yi{constructor(e,n,i){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new Sd(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}raycast(e,n){const i=this.matrixWorld,r=this.count;if(Z0.geometry=this.geometry,Z0.material=this.material,Z0.material!==void 0)for(let s=0;s<r;s++){this.getMatrixAt(s,FP),LP.multiplyMatrices(i,FP),Z0.matrixWorld=LP,Z0.raycast(e,mg);for(let o=0,a=mg.length;o<a;o++){const l=mg[o];l.instanceId=s,l.object=this,n.push(l)}mg.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new Sd(new Float32Array(this.instanceMatrix.count*3),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Pr extends pr{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ot(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const kP=new te,UP=new te,OP=new Lt,DE=new c1,Ag=new Ah;class Ec extends an{constructor(e=new zt,n=new Pr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,i=[0];for(let r=1,s=n.count;r<s;r++)kP.fromBufferAttribute(n,r-1),UP.fromBufferAttribute(n,r),i[r]=i[r-1],i[r]+=kP.distanceTo(UP);e.setAttribute("lineDistance",new ut(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Ag.copy(i.boundingSphere),Ag.applyMatrix4(r),Ag.radius+=s,e.ray.intersectsSphere(Ag)===!1)return;OP.copy(r).invert(),DE.copy(e.ray).applyMatrix4(OP);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new te,u=new te,h=new te,f=new te,d=this.isLineSegments?2:1,p=i.index,g=i.attributes.position;if(p!==null){const _=Math.max(0,o.start),y=Math.min(p.count,o.start+o.count);for(let x=_,E=y-1;x<E;x+=d){const w=p.getX(x),S=p.getX(x+1);if(c.fromBufferAttribute(g,w),u.fromBufferAttribute(g,S),DE.distanceSqToSegment(c,u,f,h)>l)continue;f.applyMatrix4(this.matrixWorld);const M=e.ray.origin.distanceTo(f);M<e.near||M>e.far||n.push({distance:M,point:h.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}else{const _=Math.max(0,o.start),y=Math.min(g.count,o.start+o.count);for(let x=_,E=y-1;x<E;x+=d){if(c.fromBufferAttribute(g,x),u.fromBufferAttribute(g,x+1),DE.distanceSqToSegment(c,u,f,h)>l)continue;f.applyMatrix4(this.matrixWorld);const S=e.ray.origin.distanceTo(f);S<e.near||S>e.far||n.push({distance:S,point:h.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const NP=new te,GP=new te;class ma extends Ec{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,i=[];for(let r=0,s=n.count;r<s;r+=2)NP.fromBufferAttribute(n,r),GP.fromBufferAttribute(n,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+NP.distanceTo(GP);e.setAttribute("lineDistance",new ut(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class x8 extends Ec{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class n3 extends pr{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new ot(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const zP=new Lt,DC=new c1,gg=new Ah,vg=new te;class E8 extends an{constructor(e=new zt,n=new n3){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=e.material,this.geometry=e.geometry,this}raycast(e,n){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),gg.copy(i.boundingSphere),gg.applyMatrix4(r),gg.radius+=s,e.ray.intersectsSphere(gg)===!1)return;zP.copy(r).invert(),DC.copy(e.ray).applyMatrix4(zP);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=i.index,h=i.attributes.position;if(c!==null){const f=Math.max(0,o.start),d=Math.min(c.count,o.start+o.count);for(let p=f,m=d;p<m;p++){const g=c.getX(p);vg.fromBufferAttribute(h,g),QP(vg,g,l,r,e,n,this)}}else{const f=Math.max(0,o.start),d=Math.min(h.count,o.start+o.count);for(let p=f,m=d;p<m;p++)vg.fromBufferAttribute(h,p),QP(vg,p,l,r,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function QP(t,e,n,i,r,s,o){const a=DC.distanceSqToPoint(t);if(a<n){const l=new te;DC.closestPointToPoint(t,l),l.applyMatrix4(i);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class Vne extends xi{constructor(e,n,i,r,s,o,a,l,c){super(e,n,i,r,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:ni,this.magFilter=s!==void 0?s:ni,this.generateMipmaps=!1;const u=this;function h(){u.needsUpdate=!0,e.requestVideoFrameCallback(h)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(h)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class Wne extends xi{constructor(e,n,i){super({width:e,height:n}),this.isFramebufferTexture=!0,this.format=i,this.magFilter=ui,this.minFilter=ui,this.generateMipmaps=!1,this.needsUpdate=!0}}class w8 extends xi{constructor(e,n,i,r,s,o,a,l,c,u,h,f){super(null,o,a,l,c,u,r,s,h,f),this.isCompressedTexture=!0,this.image={width:n,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class jne extends xi{constructor(e,n,i,r,s,o,a,l,c){super(e,n,i,r,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Bo{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,n){const i=this.getUtoTmapping(e);return this.getPoint(i,n)}getPoints(e=5){const n=[];for(let i=0;i<=e;i++)n.push(this.getPoint(i/e));return n}getSpacedPoints(e=5){const n=[];for(let i=0;i<=e;i++)n.push(this.getPointAt(i/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let i,r=this.getPoint(0),s=0;n.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),n.push(s),r=i;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n){const i=this.getLengths();let r=0;const s=i.length;let o;n?o=n:o=e*i[s-1];let a=0,l=s-1,c;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=i[r]-o,c<0)a=r+1;else if(c>0)l=r-1;else{l=r;break}if(r=l,i[r]===o)return r/(s-1);const u=i[r],f=i[r+1]-u,d=(o-u)/f;return(r+d)/(s-1)}getTangent(e,n){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=n||(o.isVector2?new Ve:new te);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,n){const i=this.getUtoTmapping(e);return this.getTangent(i,n)}computeFrenetFrames(e,n){const i=new te,r=[],s=[],o=[],a=new te,l=new Lt;for(let d=0;d<=e;d++){const p=d/e;r[d]=this.getTangentAt(p,new te)}s[0]=new te,o[0]=new te;let c=Number.MAX_VALUE;const u=Math.abs(r[0].x),h=Math.abs(r[0].y),f=Math.abs(r[0].z);u<=c&&(c=u,i.set(1,0,0)),h<=c&&(c=h,i.set(0,1,0)),f<=c&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let d=1;d<=e;d++){if(s[d]=s[d-1].clone(),o[d]=o[d-1].clone(),a.crossVectors(r[d-1],r[d]),a.length()>Number.EPSILON){a.normalize();const p=Math.acos(ii(r[d-1].dot(r[d]),-1,1));s[d].applyMatrix4(l.makeRotationAxis(a,p))}o[d].crossVectors(r[d],s[d])}if(n===!0){let d=Math.acos(ii(s[0].dot(s[e]),-1,1));d/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(d=-d);for(let p=1;p<=e;p++)s[p].applyMatrix4(l.makeRotationAxis(r[p],d*p)),o[p].crossVectors(r[p],s[p])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Ny extends Bo{constructor(e=0,n=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,n){const i=n||new Ve,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),h=Math.sin(this.aRotation),f=l-this.aX,d=c-this.aY;l=f*u-d*h+this.aX,c=f*h+d*u+this.aY}return i.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class M8 extends Ny{constructor(e,n,i,r,s,o){super(e,n,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function i3(){let t=0,e=0,n=0,i=0;function r(s,o,a,l){t=s,e=a,n=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,h){let f=(o-s)/c-(a-s)/(c+u)+(a-o)/u,d=(a-o)/u-(l-o)/(u+h)+(l-a)/h;f*=u,d*=u,r(o,a,f,d)},calc:function(s){const o=s*s,a=o*s;return t+e*s+n*o+i*a}}}const _g=new te,FE=new i3,LE=new i3,kE=new i3;class C8 extends Bo{constructor(e=[],n=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=i,this.tension=r}getPoint(e,n=new te){const i=n,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,u;this.closed||a>0?c=r[(a-1)%s]:(_g.subVectors(r[0],r[1]).add(r[0]),c=_g);const h=r[a%s],f=r[(a+1)%s];if(this.closed||a+2<s?u=r[(a+2)%s]:(_g.subVectors(r[s-1],r[s-2]).add(r[s-1]),u=_g),this.curveType==="centripetal"||this.curveType==="chordal"){const d=this.curveType==="chordal"?.5:.25;let p=Math.pow(c.distanceToSquared(h),d),m=Math.pow(h.distanceToSquared(f),d),g=Math.pow(f.distanceToSquared(u),d);m<1e-4&&(m=1),p<1e-4&&(p=m),g<1e-4&&(g=m),FE.initNonuniformCatmullRom(c.x,h.x,f.x,u.x,p,m,g),LE.initNonuniformCatmullRom(c.y,h.y,f.y,u.y,p,m,g),kE.initNonuniformCatmullRom(c.z,h.z,f.z,u.z,p,m,g)}else this.curveType==="catmullrom"&&(FE.initCatmullRom(c.x,h.x,f.x,u.x,this.tension),LE.initCatmullRom(c.y,h.y,f.y,u.y,this.tension),kE.initCatmullRom(c.z,h.z,f.z,u.z,this.tension));return i.set(FE.calc(l),LE.calc(l),kE.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,i=this.points.length;n<i;n++){const r=this.points[n];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(new te().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function HP(t,e,n,i,r){const s=(i-e)*.5,o=(r-n)*.5,a=t*t,l=t*a;return(2*n-2*i+s+o)*l+(-3*n+3*i-2*s-o)*a+s*t+n}function Xne(t,e){const n=1-t;return n*n*e}function Yne(t,e){return 2*(1-t)*t*e}function qne(t,e){return t*t*e}function Wp(t,e,n,i){return Xne(t,e)+Yne(t,n)+qne(t,i)}function Jne(t,e){const n=1-t;return n*n*n*e}function Kne(t,e){const n=1-t;return 3*n*n*t*e}function Zne(t,e){return 3*(1-t)*t*t*e}function $ne(t,e){return t*t*t*e}function jp(t,e,n,i,r){return Jne(t,e)+Kne(t,n)+Zne(t,i)+$ne(t,r)}class r3 extends Bo{constructor(e=new Ve,n=new Ve,i=new Ve,r=new Ve){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=i,this.v3=r}getPoint(e,n=new Ve){const i=n,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(jp(e,r.x,s.x,o.x,a.x),jp(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class S8 extends Bo{constructor(e=new te,n=new te,i=new te,r=new te){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=i,this.v3=r}getPoint(e,n=new te){const i=n,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(jp(e,r.x,s.x,o.x,a.x),jp(e,r.y,s.y,o.y,a.y),jp(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Gy extends Bo{constructor(e=new Ve,n=new Ve){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new Ve){const i=n;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n){const i=n||new Ve;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class b8 extends Bo{constructor(e=new te,n=new te){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new te){const i=n;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,n){return this.getPoint(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class s3 extends Bo{constructor(e=new Ve,n=new Ve,i=new Ve){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=i}getPoint(e,n=new Ve){const i=n,r=this.v0,s=this.v1,o=this.v2;return i.set(Wp(e,r.x,s.x,o.x),Wp(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class o3 extends Bo{constructor(e=new te,n=new te,i=new te){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=i}getPoint(e,n=new te){const i=n,r=this.v0,s=this.v1,o=this.v2;return i.set(Wp(e,r.x,s.x,o.x),Wp(e,r.y,s.y,o.y),Wp(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class a3 extends Bo{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new Ve){const i=n,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],c=r[o],u=r[o>r.length-2?r.length-1:o+1],h=r[o>r.length-3?r.length-1:o+2];return i.set(HP(a,l.x,c.x,u.x,h.x),HP(a,l.y,c.y,u.y,h.y)),i}copy(e){super.copy(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,i=this.points.length;n<i;n++){const r=this.points[n];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(new Ve().fromArray(r))}return this}}var l3=Object.freeze({__proto__:null,ArcCurve:M8,CatmullRomCurve3:C8,CubicBezierCurve:r3,CubicBezierCurve3:S8,EllipseCurve:Ny,LineCurve:Gy,LineCurve3:b8,QuadraticBezierCurve:s3,QuadraticBezierCurve3:o3,SplineCurve:a3});class I8 extends Bo{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);e.equals(n)||this.curves.push(new Gy(n,e))}getPoint(e,n){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,n)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let i=0,r=this.curves.length;i<r;i++)n+=this.curves[i].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let i=0;i<=e;i++)n.push(this.getPoint(i/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const u=l[c];i&&i.equals(u)||(n.push(u),i=u)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,i=e.curves.length;n<i;n++){const r=e.curves[n];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,i=this.curves.length;n<i;n++){const r=this.curves[n];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,i=e.curves.length;n<i;n++){const r=e.curves[n];this.curves.push(new l3[r.type]().fromJSON(r))}return this}}class Dm extends I8{constructor(e){super(),this.type="Path",this.currentPoint=new Ve,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,i=e.length;n<i;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const i=new Gy(this.currentPoint.clone(),new Ve(e,n));return this.curves.push(i),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,i,r){const s=new s3(this.currentPoint.clone(),new Ve(e,n),new Ve(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,n,i,r,s,o){const a=new r3(this.currentPoint.clone(),new Ve(e,n),new Ve(i,r),new Ve(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),i=new a3(n);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,i,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,n+l,i,r,s,o),this}absarc(e,n,i,r,s,o){return this.absellipse(e,n,i,i,r,s,o),this}ellipse(e,n,i,r,s,o,a,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,n+u,i,r,s,o,a,l),this}absellipse(e,n,i,r,s,o,a,l){const c=new Ny(e,n,i,r,s,o,a,l);if(this.curves.length>0){const h=c.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Xd extends zt{constructor(e=[new Ve(0,-.5),new Ve(.5,0),new Ve(0,.5)],n=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:i,phiLength:r},n=Math.floor(n),r=ii(r,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],u=1/n,h=new te,f=new Ve,d=new te,p=new te,m=new te;let g=0,_=0;for(let y=0;y<=e.length-1;y++)switch(y){case 0:g=e[y+1].x-e[y].x,_=e[y+1].y-e[y].y,d.x=_*1,d.y=-g,d.z=_*0,m.copy(d),d.normalize(),l.push(d.x,d.y,d.z);break;case e.length-1:l.push(m.x,m.y,m.z);break;default:g=e[y+1].x-e[y].x,_=e[y+1].y-e[y].y,d.x=_*1,d.y=-g,d.z=_*0,p.copy(d),d.x+=m.x,d.y+=m.y,d.z+=m.z,d.normalize(),l.push(d.x,d.y,d.z),m.copy(p)}for(let y=0;y<=n;y++){const x=i+y*u*r,E=Math.sin(x),w=Math.cos(x);for(let S=0;S<=e.length-1;S++){h.x=e[S].x*E,h.y=e[S].y,h.z=e[S].x*w,o.push(h.x,h.y,h.z),f.x=y/n,f.y=S/(e.length-1),a.push(f.x,f.y);const b=l[3*S+0]*E,M=l[3*S+1],T=l[3*S+0]*w;c.push(b,M,T)}}for(let y=0;y<n;y++)for(let x=0;x<e.length-1;x++){const E=x+y*e.length,w=E,S=E+e.length,b=E+e.length+1,M=E+1;s.push(w,S,M),s.push(b,M,S)}this.setIndex(s),this.setAttribute("position",new ut(o,3)),this.setAttribute("uv",new ut(a,2)),this.setAttribute("normal",new ut(c,3))}static fromJSON(e){return new Xd(e.points,e.segments,e.phiStart,e.phiLength)}}class h1 extends Xd{constructor(e=1,n=1,i=4,r=8){const s=new Dm;s.absarc(0,-n/2,e,Math.PI*1.5,0),s.absarc(0,n/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,height:n,capSegments:i,radialSegments:r}}static fromJSON(e){return new h1(e.radius,e.length,e.capSegments,e.radialSegments)}}class f1 extends zt{constructor(e=1,n=8,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:i,thetaLength:r},n=Math.max(3,n);const s=[],o=[],a=[],l=[],c=new te,u=new Ve;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let h=0,f=3;h<=n;h++,f+=3){const d=i+h/n*r;c.x=e*Math.cos(d),c.y=e*Math.sin(d),o.push(c.x,c.y,c.z),a.push(0,0,1),u.x=(o[f]/e+1)/2,u.y=(o[f+1]/e+1)/2,l.push(u.x,u.y)}for(let h=1;h<=n;h++)s.push(h,h+1,0);this.setIndex(s),this.setAttribute("position",new ut(o,3)),this.setAttribute("normal",new ut(a,3)),this.setAttribute("uv",new ut(l,2))}static fromJSON(e){return new f1(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class gh extends zt{constructor(e=1,n=1,i=1,r=8,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;r=Math.floor(r),s=Math.floor(s);const u=[],h=[],f=[],d=[];let p=0;const m=[],g=i/2;let _=0;y(),o===!1&&(e>0&&x(!0),n>0&&x(!1)),this.setIndex(u),this.setAttribute("position",new ut(h,3)),this.setAttribute("normal",new ut(f,3)),this.setAttribute("uv",new ut(d,2));function y(){const E=new te,w=new te;let S=0;const b=(n-e)/i;for(let M=0;M<=s;M++){const T=[],B=M/s,L=B*(n-e)+e;for(let F=0;F<=r;F++){const U=F/r,k=U*l+a,X=Math.sin(k),Y=Math.cos(k);w.x=L*X,w.y=-B*i+g,w.z=L*Y,h.push(w.x,w.y,w.z),E.set(X,b,Y).normalize(),f.push(E.x,E.y,E.z),d.push(U,1-B),T.push(p++)}m.push(T)}for(let M=0;M<r;M++)for(let T=0;T<s;T++){const B=m[T][M],L=m[T+1][M],F=m[T+1][M+1],U=m[T][M+1];u.push(B,L,U),u.push(L,F,U),S+=6}c.addGroup(_,S,0),_+=S}function x(E){const w=p,S=new Ve,b=new te;let M=0;const T=E===!0?e:n,B=E===!0?1:-1;for(let F=1;F<=r;F++)h.push(0,g*B,0),f.push(0,B,0),d.push(.5,.5),p++;const L=p;for(let F=0;F<=r;F++){const k=F/r*l+a,X=Math.cos(k),Y=Math.sin(k);b.x=T*Y,b.y=g*B,b.z=T*X,h.push(b.x,b.y,b.z),f.push(0,B,0),S.x=X*.5+.5,S.y=Y*.5*B+.5,d.push(S.x,S.y),p++}for(let F=0;F<r;F++){const U=w+F,k=L+F;E===!0?u.push(k,k+1,U):u.push(k+1,k,U),M+=3}c.addGroup(_,M,E===!0?1:2),_+=M}}static fromJSON(e){return new gh(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class d1 extends gh{constructor(e=1,n=1,i=8,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,n,i,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new d1(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class fl extends zt{constructor(e=[],n=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:i,detail:r};const s=[],o=[];a(r),c(i),u(),this.setAttribute("position",new ut(s,3)),this.setAttribute("normal",new ut(s.slice(),3)),this.setAttribute("uv",new ut(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(y){const x=new te,E=new te,w=new te;for(let S=0;S<n.length;S+=3)d(n[S+0],x),d(n[S+1],E),d(n[S+2],w),l(x,E,w,y)}function l(y,x,E,w){const S=w+1,b=[];for(let M=0;M<=S;M++){b[M]=[];const T=y.clone().lerp(E,M/S),B=x.clone().lerp(E,M/S),L=S-M;for(let F=0;F<=L;F++)F===0&&M===S?b[M][F]=T:b[M][F]=T.clone().lerp(B,F/L)}for(let M=0;M<S;M++)for(let T=0;T<2*(S-M)-1;T++){const B=Math.floor(T/2);T%2===0?(f(b[M][B+1]),f(b[M+1][B]),f(b[M][B])):(f(b[M][B+1]),f(b[M+1][B+1]),f(b[M+1][B]))}}function c(y){const x=new te;for(let E=0;E<s.length;E+=3)x.x=s[E+0],x.y=s[E+1],x.z=s[E+2],x.normalize().multiplyScalar(y),s[E+0]=x.x,s[E+1]=x.y,s[E+2]=x.z}function u(){const y=new te;for(let x=0;x<s.length;x+=3){y.x=s[x+0],y.y=s[x+1],y.z=s[x+2];const E=g(y)/2/Math.PI+.5,w=_(y)/Math.PI+.5;o.push(E,1-w)}p(),h()}function h(){for(let y=0;y<o.length;y+=6){const x=o[y+0],E=o[y+2],w=o[y+4],S=Math.max(x,E,w),b=Math.min(x,E,w);S>.9&&b<.1&&(x<.2&&(o[y+0]+=1),E<.2&&(o[y+2]+=1),w<.2&&(o[y+4]+=1))}}function f(y){s.push(y.x,y.y,y.z)}function d(y,x){const E=y*3;x.x=e[E+0],x.y=e[E+1],x.z=e[E+2]}function p(){const y=new te,x=new te,E=new te,w=new te,S=new Ve,b=new Ve,M=new Ve;for(let T=0,B=0;T<s.length;T+=9,B+=6){y.set(s[T+0],s[T+1],s[T+2]),x.set(s[T+3],s[T+4],s[T+5]),E.set(s[T+6],s[T+7],s[T+8]),S.set(o[B+0],o[B+1]),b.set(o[B+2],o[B+3]),M.set(o[B+4],o[B+5]),w.copy(y).add(x).add(E).divideScalar(3);const L=g(w);m(S,B+0,y,L),m(b,B+2,x,L),m(M,B+4,E,L)}}function m(y,x,E,w){w<0&&y.x===1&&(o[x]=y.x-1),E.x===0&&E.z===0&&(o[x]=w/2/Math.PI+.5)}function g(y){return Math.atan2(y.z,-y.x)}function _(y){return Math.atan2(-y.y,Math.sqrt(y.x*y.x+y.z*y.z))}}static fromJSON(e){return new fl(e.vertices,e.indices,e.radius,e.details)}}class p1 extends fl{constructor(e=1,n=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new p1(e.radius,e.detail)}}const yg=new te,xg=new te,UE=new te,Eg=new Hs;class T8 extends zt{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const r=Math.pow(10,4),s=Math.cos(Nu*n),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],u=["a","b","c"],h=new Array(3),f={},d=[];for(let p=0;p<l;p+=3){o?(c[0]=o.getX(p),c[1]=o.getX(p+1),c[2]=o.getX(p+2)):(c[0]=p,c[1]=p+1,c[2]=p+2);const{a:m,b:g,c:_}=Eg;if(m.fromBufferAttribute(a,c[0]),g.fromBufferAttribute(a,c[1]),_.fromBufferAttribute(a,c[2]),Eg.getNormal(UE),h[0]=`${Math.round(m.x*r)},${Math.round(m.y*r)},${Math.round(m.z*r)}`,h[1]=`${Math.round(g.x*r)},${Math.round(g.y*r)},${Math.round(g.z*r)}`,h[2]=`${Math.round(_.x*r)},${Math.round(_.y*r)},${Math.round(_.z*r)}`,!(h[0]===h[1]||h[1]===h[2]||h[2]===h[0]))for(let y=0;y<3;y++){const x=(y+1)%3,E=h[y],w=h[x],S=Eg[u[y]],b=Eg[u[x]],M=`${E}_${w}`,T=`${w}_${E}`;T in f&&f[T]?(UE.dot(f[T].normal)<=s&&(d.push(S.x,S.y,S.z),d.push(b.x,b.y,b.z)),f[T]=null):M in f||(f[M]={index0:c[y],index1:c[x],normal:UE.clone()})}}for(const p in f)if(f[p]){const{index0:m,index1:g}=f[p];yg.fromBufferAttribute(a,m),xg.fromBufferAttribute(a,g),d.push(yg.x,yg.y,yg.z),d.push(xg.x,xg.y,xg.z)}this.setAttribute("position",new ut(d,3))}}}class zu extends Dm{constructor(e){super(e),this.uuid=ps(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let i=0,r=this.holes.length;i<r;i++)n[i]=this.holes[i].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,i=e.holes.length;n<i;n++){const r=e.holes[n];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,i=this.holes.length;n<i;n++){const r=this.holes[n];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,i=e.holes.length;n<i;n++){const r=e.holes[n];this.holes.push(new Dm().fromJSON(r))}return this}}const eie={triangulate:function(t,e,n=2){const i=e&&e.length,r=i?e[0]*n:t.length;let s=B8(t,0,r,n,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,u,h,f,d;if(i&&(s=sie(t,e,s,n)),t.length>80*n){a=c=t[0],l=u=t[1];for(let p=n;p<r;p+=n)h=t[p],f=t[p+1],h<a&&(a=h),f<l&&(l=f),h>c&&(c=h),f>u&&(u=f);d=Math.max(c-a,u-l),d=d!==0?1/d:0}return Fm(s,o,n,a,l,d),o}};function B8(t,e,n,i,r){let s,o;if(r===Aie(t,e,n,i)>0)for(s=e;s<n;s+=i)o=VP(s,t[s],t[s+1],o);else for(s=n-i;s>=e;s-=i)o=VP(s,t[s],t[s+1],o);return o&&zy(o,o.next)&&(km(o),o=o.next),o}function wc(t,e){if(!t)return t;e||(e=t);let n=t,i;do if(i=!1,!n.steiner&&(zy(n,n.next)||Nn(n.prev,n,n.next)===0)){if(km(n),n=e=n.prev,n===n.next)break;i=!0}else n=n.next;while(i||n!==e);return e}function Fm(t,e,n,i,r,s,o){if(!t)return;!o&&s&&uie(t,i,r,s);let a=t,l,c;for(;t.prev!==t.next;){if(l=t.prev,c=t.next,s?nie(t,i,r,s):tie(t)){e.push(l.i/n),e.push(t.i/n),e.push(c.i/n),km(t),t=c.next,a=c.next;continue}if(t=c,t===a){o?o===1?(t=iie(wc(t),e,n),Fm(t,e,n,i,r,s,2)):o===2&&rie(t,e,n,i,r,s):Fm(wc(t),e,n,i,r,s,1);break}}}function tie(t){const e=t.prev,n=t,i=t.next;if(Nn(e,n,i)>=0)return!1;let r=t.next.next;for(;r!==t.prev;){if(Yf(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&Nn(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function nie(t,e,n,i){const r=t.prev,s=t,o=t.next;if(Nn(r,s,o)>=0)return!1;const a=r.x<s.x?r.x<o.x?r.x:o.x:s.x<o.x?s.x:o.x,l=r.y<s.y?r.y<o.y?r.y:o.y:s.y<o.y?s.y:o.y,c=r.x>s.x?r.x>o.x?r.x:o.x:s.x>o.x?s.x:o.x,u=r.y>s.y?r.y>o.y?r.y:o.y:s.y>o.y?s.y:o.y,h=FC(a,l,e,n,i),f=FC(c,u,e,n,i);let d=t.prevZ,p=t.nextZ;for(;d&&d.z>=h&&p&&p.z<=f;){if(d!==t.prev&&d!==t.next&&Yf(r.x,r.y,s.x,s.y,o.x,o.y,d.x,d.y)&&Nn(d.prev,d,d.next)>=0||(d=d.prevZ,p!==t.prev&&p!==t.next&&Yf(r.x,r.y,s.x,s.y,o.x,o.y,p.x,p.y)&&Nn(p.prev,p,p.next)>=0))return!1;p=p.nextZ}for(;d&&d.z>=h;){if(d!==t.prev&&d!==t.next&&Yf(r.x,r.y,s.x,s.y,o.x,o.y,d.x,d.y)&&Nn(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;p&&p.z<=f;){if(p!==t.prev&&p!==t.next&&Yf(r.x,r.y,s.x,s.y,o.x,o.y,p.x,p.y)&&Nn(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function iie(t,e,n){let i=t;do{const r=i.prev,s=i.next.next;!zy(r,s)&&R8(r,i,i.next,s)&&Lm(r,s)&&Lm(s,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(s.i/n),km(i),km(i.next),i=t=s),i=i.next}while(i!==t);return wc(i)}function rie(t,e,n,i,r,s){let o=t;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&die(o,a)){let l=P8(o,a);o=wc(o,o.next),l=wc(l,l.next),Fm(o,e,n,i,r,s),Fm(l,e,n,i,r,s);return}a=a.next}o=o.next}while(o!==t)}function sie(t,e,n,i){const r=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:t.length,c=B8(t,a,l,i,!1),c===c.next&&(c.steiner=!0),r.push(fie(c));for(r.sort(oie),s=0;s<r.length;s++)aie(r[s],n),n=wc(n,n.next);return n}function oie(t,e){return t.x-e.x}function aie(t,e){if(e=lie(t,e),e){const n=P8(e,t);wc(e,e.next),wc(n,n.next)}}function lie(t,e){let n=e;const i=t.x,r=t.y;let s=-1/0,o;do{if(r<=n.y&&r>=n.next.y&&n.next.y!==n.y){const f=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(f<=i&&f>s){if(s=f,f===i){if(r===n.y)return n;if(r===n.next.y)return n.next}o=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!o)return null;if(i===s)return o;const a=o,l=o.x,c=o.y;let u=1/0,h;n=o;do i>=n.x&&n.x>=l&&i!==n.x&&Yf(r<c?i:s,r,l,c,r<c?s:i,r,n.x,n.y)&&(h=Math.abs(r-n.y)/(i-n.x),Lm(n,t)&&(h<u||h===u&&(n.x>o.x||n.x===o.x&&cie(o,n)))&&(o=n,u=h)),n=n.next;while(n!==a);return o}function cie(t,e){return Nn(t.prev,t,e.prev)<0&&Nn(e.next,t,t.next)<0}function uie(t,e,n,i){let r=t;do r.z===null&&(r.z=FC(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,hie(r)}function hie(t){let e,n,i,r,s,o,a,l,c=1;do{for(n=t,t=null,s=null,o=0;n;){for(o++,i=n,a=0,e=0;e<c&&(a++,i=i.nextZ,!!i);e++);for(l=c;a>0||l>0&&i;)a!==0&&(l===0||!i||n.z<=i.z)?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:t=r,r.prevZ=s,s=r;n=i}s.nextZ=null,c*=2}while(o>1);return t}function FC(t,e,n,i,r){return t=32767*(t-n)*r,e=32767*(e-i)*r,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function fie(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function Yf(t,e,n,i,r,s,o,a){return(r-o)*(e-a)-(t-o)*(s-a)>=0&&(t-o)*(i-a)-(n-o)*(e-a)>=0&&(n-o)*(s-a)-(r-o)*(i-a)>=0}function die(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!pie(t,e)&&(Lm(t,e)&&Lm(e,t)&&mie(t,e)&&(Nn(t.prev,t,e.prev)||Nn(t,e.prev,e))||zy(t,e)&&Nn(t.prev,t,t.next)>0&&Nn(e.prev,e,e.next)>0)}function Nn(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function zy(t,e){return t.x===e.x&&t.y===e.y}function R8(t,e,n,i){const r=Mg(Nn(t,e,n)),s=Mg(Nn(t,e,i)),o=Mg(Nn(n,i,t)),a=Mg(Nn(n,i,e));return!!(r!==s&&o!==a||r===0&&wg(t,n,e)||s===0&&wg(t,i,e)||o===0&&wg(n,t,i)||a===0&&wg(n,e,i))}function wg(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function Mg(t){return t>0?1:t<0?-1:0}function pie(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&R8(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function Lm(t,e){return Nn(t.prev,t,t.next)<0?Nn(t,e,t.next)>=0&&Nn(t,t.prev,e)>=0:Nn(t,e,t.prev)<0||Nn(t,t.next,e)<0}function mie(t,e){let n=t,i=!1;const r=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&r<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next;while(n!==t);return i}function P8(t,e){const n=new LC(t.i,t.x,t.y),i=new LC(e.i,e.x,e.y),r=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,s.next=i,i.prev=s,i}function VP(t,e,n,i){const r=new LC(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function km(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function LC(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Aie(t,e,n,i){let r=0;for(let s=e,o=n-i;s<n;s+=i)r+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return r}class la{static area(e){const n=e.length;let i=0;for(let r=n-1,s=0;s<n;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return la.area(e)<0}static triangulateShape(e,n){const i=[],r=[],s=[];WP(e),jP(i,e);let o=e.length;n.forEach(WP);for(let l=0;l<n.length;l++)r.push(o),o+=n[l].length,jP(i,n[l]);const a=eie.triangulate(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function WP(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function jP(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class m1 extends zt{constructor(e=new zu([new Ve(.5,.5),new Ve(-.5,.5),new Ve(-.5,-.5),new Ve(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new ut(r,3)),this.setAttribute("uv",new ut(s,2)),this.computeVertexNormals();function o(a){const l=[],c=n.curveSegments!==void 0?n.curveSegments:12,u=n.steps!==void 0?n.steps:1,h=n.depth!==void 0?n.depth:1;let f=n.bevelEnabled!==void 0?n.bevelEnabled:!0,d=n.bevelThickness!==void 0?n.bevelThickness:.2,p=n.bevelSize!==void 0?n.bevelSize:d-.1,m=n.bevelOffset!==void 0?n.bevelOffset:0,g=n.bevelSegments!==void 0?n.bevelSegments:3;const _=n.extrudePath,y=n.UVGenerator!==void 0?n.UVGenerator:gie;let x,E=!1,w,S,b,M;_&&(x=_.getSpacedPoints(u),E=!0,f=!1,w=_.computeFrenetFrames(u,!1),S=new te,b=new te,M=new te),f||(g=0,d=0,p=0,m=0);const T=a.extractPoints(c);let B=T.shape;const L=T.holes;if(!la.isClockWise(B)){B=B.reverse();for(let le=0,pe=L.length;le<pe;le++){const Pe=L[le];la.isClockWise(Pe)&&(L[le]=Pe.reverse())}}const U=la.triangulateShape(B,L),k=B;for(let le=0,pe=L.length;le<pe;le++){const Pe=L[le];B=B.concat(Pe)}function X(le,pe,Pe){return pe||console.error("THREE.ExtrudeGeometry: vec does not exist"),pe.clone().multiplyScalar(Pe).add(le)}const Y=B.length,Z=U.length;function G(le,pe,Pe){let Oe,ke,Ke;const xe=le.x-pe.x,Ue=le.y-pe.y,He=Pe.x-le.x,be=Pe.y-le.y,q=xe*xe+Ue*Ue,W=xe*be-Ue*He;if(Math.abs(W)>Number.EPSILON){const ie=Math.sqrt(q),fe=Math.sqrt(He*He+be*be),_e=pe.x-Ue/ie,Ge=pe.y+xe/ie,Ie=Pe.x-be/fe,Le=Pe.y+He/fe,ye=((Ie-_e)*be-(Le-Ge)*He)/(xe*be-Ue*He);Oe=_e+xe*ye-le.x,ke=Ge+Ue*ye-le.y;const je=Oe*Oe+ke*ke;if(je<=2)return new Ve(Oe,ke);Ke=Math.sqrt(je/2)}else{let ie=!1;xe>Number.EPSILON?He>Number.EPSILON&&(ie=!0):xe<-Number.EPSILON?He<-Number.EPSILON&&(ie=!0):Math.sign(Ue)===Math.sign(be)&&(ie=!0),ie?(Oe=-Ue,ke=xe,Ke=Math.sqrt(q)):(Oe=xe,ke=Ue,Ke=Math.sqrt(q/2))}return new Ve(Oe/Ke,ke/Ke)}const O=[];for(let le=0,pe=k.length,Pe=pe-1,Oe=le+1;le<pe;le++,Pe++,Oe++)Pe===pe&&(Pe=0),Oe===pe&&(Oe=0),O[le]=G(k[le],k[Pe],k[Oe]);const z=[];let Q,H=O.concat();for(let le=0,pe=L.length;le<pe;le++){const Pe=L[le];Q=[];for(let Oe=0,ke=Pe.length,Ke=ke-1,xe=Oe+1;Oe<ke;Oe++,Ke++,xe++)Ke===ke&&(Ke=0),xe===ke&&(xe=0),Q[Oe]=G(Pe[Oe],Pe[Ke],Pe[xe]);z.push(Q),H=H.concat(Q)}for(let le=0;le<g;le++){const pe=le/g,Pe=d*Math.cos(pe*Math.PI/2),Oe=p*Math.sin(pe*Math.PI/2)+m;for(let ke=0,Ke=k.length;ke<Ke;ke++){const xe=X(k[ke],O[ke],Oe);ce(xe.x,xe.y,-Pe)}for(let ke=0,Ke=L.length;ke<Ke;ke++){const xe=L[ke];Q=z[ke];for(let Ue=0,He=xe.length;Ue<He;Ue++){const be=X(xe[Ue],Q[Ue],Oe);ce(be.x,be.y,-Pe)}}}const J=p+m;for(let le=0;le<Y;le++){const pe=f?X(B[le],H[le],J):B[le];E?(b.copy(w.normals[0]).multiplyScalar(pe.x),S.copy(w.binormals[0]).multiplyScalar(pe.y),M.copy(x[0]).add(b).add(S),ce(M.x,M.y,M.z)):ce(pe.x,pe.y,0)}for(let le=1;le<=u;le++)for(let pe=0;pe<Y;pe++){const Pe=f?X(B[pe],H[pe],J):B[pe];E?(b.copy(w.normals[le]).multiplyScalar(Pe.x),S.copy(w.binormals[le]).multiplyScalar(Pe.y),M.copy(x[le]).add(b).add(S),ce(M.x,M.y,M.z)):ce(Pe.x,Pe.y,h/u*le)}for(let le=g-1;le>=0;le--){const pe=le/g,Pe=d*Math.cos(pe*Math.PI/2),Oe=p*Math.sin(pe*Math.PI/2)+m;for(let ke=0,Ke=k.length;ke<Ke;ke++){const xe=X(k[ke],O[ke],Oe);ce(xe.x,xe.y,h+Pe)}for(let ke=0,Ke=L.length;ke<Ke;ke++){const xe=L[ke];Q=z[ke];for(let Ue=0,He=xe.length;Ue<He;Ue++){const be=X(xe[Ue],Q[Ue],Oe);E?ce(be.x,be.y+x[u-1].y,x[u-1].x+Pe):ce(be.x,be.y,h+Pe)}}}j(),oe();function j(){const le=r.length/3;if(f){let pe=0,Pe=Y*pe;for(let Oe=0;Oe<Z;Oe++){const ke=U[Oe];he(ke[2]+Pe,ke[1]+Pe,ke[0]+Pe)}pe=u+g*2,Pe=Y*pe;for(let Oe=0;Oe<Z;Oe++){const ke=U[Oe];he(ke[0]+Pe,ke[1]+Pe,ke[2]+Pe)}}else{for(let pe=0;pe<Z;pe++){const Pe=U[pe];he(Pe[2],Pe[1],Pe[0])}for(let pe=0;pe<Z;pe++){const Pe=U[pe];he(Pe[0]+Y*u,Pe[1]+Y*u,Pe[2]+Y*u)}}i.addGroup(le,r.length/3-le,0)}function oe(){const le=r.length/3;let pe=0;K(k,pe),pe+=k.length;for(let Pe=0,Oe=L.length;Pe<Oe;Pe++){const ke=L[Pe];K(ke,pe),pe+=ke.length}i.addGroup(le,r.length/3-le,1)}function K(le,pe){let Pe=le.length;for(;--Pe>=0;){const Oe=Pe;let ke=Pe-1;ke<0&&(ke=le.length-1);for(let Ke=0,xe=u+g*2;Ke<xe;Ke++){const Ue=Y*Ke,He=Y*(Ke+1),be=pe+Oe+Ue,q=pe+ke+Ue,W=pe+ke+He,ie=pe+Oe+He;ve(be,q,W,ie)}}}function ce(le,pe,Pe){l.push(le),l.push(pe),l.push(Pe)}function he(le,pe,Pe){Me(le),Me(pe),Me(Pe);const Oe=r.length/3,ke=y.generateTopUV(i,r,Oe-3,Oe-2,Oe-1);Se(ke[0]),Se(ke[1]),Se(ke[2])}function ve(le,pe,Pe,Oe){Me(le),Me(pe),Me(Oe),Me(pe),Me(Pe),Me(Oe);const ke=r.length/3,Ke=y.generateSideWallUV(i,r,ke-6,ke-3,ke-2,ke-1);Se(Ke[0]),Se(Ke[1]),Se(Ke[3]),Se(Ke[1]),Se(Ke[2]),Se(Ke[3])}function Me(le){r.push(l[le*3+0]),r.push(l[le*3+1]),r.push(l[le*3+2])}function Se(le){s.push(le.x),s.push(le.y)}}}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,i=this.parameters.options;return vie(n,i,e)}static fromJSON(e,n){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=n[e.shapes[s]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new l3[r.type]().fromJSON(r)),new m1(i,e.options)}}const gie={generateTopUV:function(t,e,n,i,r){const s=e[n*3],o=e[n*3+1],a=e[i*3],l=e[i*3+1],c=e[r*3],u=e[r*3+1];return[new Ve(s,o),new Ve(a,l),new Ve(c,u)]},generateSideWallUV:function(t,e,n,i,r,s){const o=e[n*3],a=e[n*3+1],l=e[n*3+2],c=e[i*3],u=e[i*3+1],h=e[i*3+2],f=e[r*3],d=e[r*3+1],p=e[r*3+2],m=e[s*3],g=e[s*3+1],_=e[s*3+2];return Math.abs(a-u)<Math.abs(o-c)?[new Ve(o,1-l),new Ve(c,1-h),new Ve(f,1-p),new Ve(m,1-_)]:[new Ve(a,1-l),new Ve(u,1-h),new Ve(d,1-p),new Ve(g,1-_)]}};function vie(t,e,n){if(n.shapes=[],Array.isArray(t))for(let i=0,r=t.length;i<r;i++){const s=t[i];n.shapes.push(s.uuid)}else n.shapes.push(t.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class A1 extends fl{constructor(e=1,n=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new A1(e.radius,e.detail)}}class Yd extends fl{constructor(e=1,n=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Yd(e.radius,e.detail)}}class g1 extends zt{constructor(e=.5,n=1,i=8,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const a=[],l=[],c=[],u=[];let h=e;const f=(n-e)/r,d=new te,p=new Ve;for(let m=0;m<=r;m++){for(let g=0;g<=i;g++){const _=s+g/i*o;d.x=h*Math.cos(_),d.y=h*Math.sin(_),l.push(d.x,d.y,d.z),c.push(0,0,1),p.x=(d.x/n+1)/2,p.y=(d.y/n+1)/2,u.push(p.x,p.y)}h+=f}for(let m=0;m<r;m++){const g=m*(i+1);for(let _=0;_<i;_++){const y=_+g,x=y,E=y+i+1,w=y+i+2,S=y+1;a.push(x,E,S),a.push(E,w,S)}}this.setIndex(a),this.setAttribute("position",new ut(l,3)),this.setAttribute("normal",new ut(c,3)),this.setAttribute("uv",new ut(u,2))}static fromJSON(e){return new g1(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class v1 extends zt{constructor(e=new zu([new Ve(0,.5),new Ve(-.5,-.5),new Ve(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const i=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new ut(r,3)),this.setAttribute("normal",new ut(s,3)),this.setAttribute("uv",new ut(o,2));function c(u){const h=r.length/3,f=u.extractPoints(n);let d=f.shape;const p=f.holes;la.isClockWise(d)===!1&&(d=d.reverse());for(let g=0,_=p.length;g<_;g++){const y=p[g];la.isClockWise(y)===!0&&(p[g]=y.reverse())}const m=la.triangulateShape(d,p);for(let g=0,_=p.length;g<_;g++){const y=p[g];d=d.concat(y)}for(let g=0,_=d.length;g<_;g++){const y=d[g];r.push(y.x,y.y,0),s.push(0,0,1),o.push(y.x,y.y)}for(let g=0,_=m.length;g<_;g++){const y=m[g],x=y[0]+h,E=y[1]+h,w=y[2]+h;i.push(x,E,w),l+=3}}}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return _ie(n,e)}static fromJSON(e,n){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=n[e.shapes[r]];i.push(o)}return new v1(i,e.curveSegments)}}function _ie(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,i=t.length;n<i;n++){const r=t[n];e.shapes.push(r.uuid)}else e.shapes.push(t.uuid);return e}class qd extends zt{constructor(e=1,n=32,i=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},n=Math.max(3,Math.floor(n)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let c=0;const u=[],h=new te,f=new te,d=[],p=[],m=[],g=[];for(let _=0;_<=i;_++){const y=[],x=_/i;let E=0;_==0&&o==0?E=.5/n:_==i&&l==Math.PI&&(E=-.5/n);for(let w=0;w<=n;w++){const S=w/n;h.x=-e*Math.cos(r+S*s)*Math.sin(o+x*a),h.y=e*Math.cos(o+x*a),h.z=e*Math.sin(r+S*s)*Math.sin(o+x*a),p.push(h.x,h.y,h.z),f.copy(h).normalize(),m.push(f.x,f.y,f.z),g.push(S+E,1-x),y.push(c++)}u.push(y)}for(let _=0;_<i;_++)for(let y=0;y<n;y++){const x=u[_][y+1],E=u[_][y],w=u[_+1][y],S=u[_+1][y+1];(_!==0||o>0)&&d.push(x,E,S),(_!==i-1||l<Math.PI)&&d.push(E,w,S)}this.setIndex(d),this.setAttribute("position",new ut(p,3)),this.setAttribute("normal",new ut(m,3)),this.setAttribute("uv",new ut(g,2))}static fromJSON(e){return new qd(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class _1 extends fl{constructor(e=1,n=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new _1(e.radius,e.detail)}}class y1 extends zt{constructor(e=1,n=.4,i=8,r=6,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],a=[],l=[],c=[],u=new te,h=new te,f=new te;for(let d=0;d<=i;d++)for(let p=0;p<=r;p++){const m=p/r*s,g=d/i*Math.PI*2;h.x=(e+n*Math.cos(g))*Math.cos(m),h.y=(e+n*Math.cos(g))*Math.sin(m),h.z=n*Math.sin(g),a.push(h.x,h.y,h.z),u.x=e*Math.cos(m),u.y=e*Math.sin(m),f.subVectors(h,u).normalize(),l.push(f.x,f.y,f.z),c.push(p/r),c.push(d/i)}for(let d=1;d<=i;d++)for(let p=1;p<=r;p++){const m=(r+1)*d+p-1,g=(r+1)*(d-1)+p-1,_=(r+1)*(d-1)+p,y=(r+1)*d+p;o.push(m,g,y),o.push(g,_,y)}this.setIndex(o),this.setAttribute("position",new ut(a,3)),this.setAttribute("normal",new ut(l,3)),this.setAttribute("uv",new ut(c,2))}static fromJSON(e){return new y1(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class x1 extends zt{constructor(e=1,n=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const a=[],l=[],c=[],u=[],h=new te,f=new te,d=new te,p=new te,m=new te,g=new te,_=new te;for(let x=0;x<=i;++x){const E=x/i*s*Math.PI*2;y(E,s,o,e,d),y(E+.01,s,o,e,p),g.subVectors(p,d),_.addVectors(p,d),m.crossVectors(g,_),_.crossVectors(m,g),m.normalize(),_.normalize();for(let w=0;w<=r;++w){const S=w/r*Math.PI*2,b=-n*Math.cos(S),M=n*Math.sin(S);h.x=d.x+(b*_.x+M*m.x),h.y=d.y+(b*_.y+M*m.y),h.z=d.z+(b*_.z+M*m.z),l.push(h.x,h.y,h.z),f.subVectors(h,d).normalize(),c.push(f.x,f.y,f.z),u.push(x/i),u.push(w/r)}}for(let x=1;x<=i;x++)for(let E=1;E<=r;E++){const w=(r+1)*(x-1)+(E-1),S=(r+1)*x+(E-1),b=(r+1)*x+E,M=(r+1)*(x-1)+E;a.push(w,S,M),a.push(S,b,M)}this.setIndex(a),this.setAttribute("position",new ut(l,3)),this.setAttribute("normal",new ut(c,3)),this.setAttribute("uv",new ut(u,2));function y(x,E,w,S,b){const M=Math.cos(x),T=Math.sin(x),B=w/E*x,L=Math.cos(B);b.x=S*(2+L)*.5*M,b.y=S*(2+L)*T*.5,b.z=S*Math.sin(B)*.5}}static fromJSON(e){return new x1(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class E1 extends zt{constructor(e=new o3(new te(-1,-1,0),new te(-1,1,0),new te(1,1,0)),n=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(n,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new te,l=new te,c=new Ve;let u=new te;const h=[],f=[],d=[],p=[];m(),this.setIndex(p),this.setAttribute("position",new ut(h,3)),this.setAttribute("normal",new ut(f,3)),this.setAttribute("uv",new ut(d,2));function m(){for(let x=0;x<n;x++)g(x);g(s===!1?n:0),y(),_()}function g(x){u=e.getPointAt(x/n,u);const E=o.normals[x],w=o.binormals[x];for(let S=0;S<=r;S++){const b=S/r*Math.PI*2,M=Math.sin(b),T=-Math.cos(b);l.x=T*E.x+M*w.x,l.y=T*E.y+M*w.y,l.z=T*E.z+M*w.z,l.normalize(),f.push(l.x,l.y,l.z),a.x=u.x+i*l.x,a.y=u.y+i*l.y,a.z=u.z+i*l.z,h.push(a.x,a.y,a.z)}}function _(){for(let x=1;x<=n;x++)for(let E=1;E<=r;E++){const w=(r+1)*(x-1)+(E-1),S=(r+1)*x+(E-1),b=(r+1)*x+E,M=(r+1)*(x-1)+E;p.push(w,S,M),p.push(S,b,M)}}function y(){for(let x=0;x<=n;x++)for(let E=0;E<=r;E++)c.x=x/n,c.y=E/r,d.push(c.x,c.y)}}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new E1(new l3[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class D8 extends zt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],i=new Set,r=new te,s=new te;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const h=l[c],f=h.start,d=h.count;for(let p=f,m=f+d;p<m;p+=3)for(let g=0;g<3;g++){const _=a.getX(p+g),y=a.getX(p+(g+1)%3);r.fromBufferAttribute(o,_),s.fromBufferAttribute(o,y),XP(r,s,i)===!0&&(n.push(r.x,r.y,r.z),n.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const u=3*a+c,h=3*a+(c+1)%3;r.fromBufferAttribute(o,u),s.fromBufferAttribute(o,h),XP(r,s,i)===!0&&(n.push(r.x,r.y,r.z),n.push(s.x,s.y,s.z))}}this.setAttribute("position",new ut(n,3))}}}function XP(t,e,n){const i=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return n.has(i)===!0||n.has(r)===!0?!1:(n.add(i),n.add(r),!0)}var YP=Object.freeze({__proto__:null,BoxGeometry:Rc,CapsuleGeometry:h1,CircleGeometry:f1,ConeGeometry:d1,CylinderGeometry:gh,DodecahedronGeometry:p1,EdgesGeometry:T8,ExtrudeGeometry:m1,IcosahedronGeometry:A1,LatheGeometry:Xd,OctahedronGeometry:Yd,PlaneGeometry:Wd,PolyhedronGeometry:fl,RingGeometry:g1,ShapeGeometry:v1,SphereGeometry:qd,TetrahedronGeometry:_1,TorusGeometry:y1,TorusKnotGeometry:x1,TubeGeometry:E1,WireframeGeometry:D8});class F8 extends pr{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new ot(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class L8 extends ha{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class c3 extends pr{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ot(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ot(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Tc,this.normalScale=new Ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class k8 extends c3{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ve(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return ii(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new ot(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new ot(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ot(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class U8 extends pr{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new ot(16777215),this.specular=new ot(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ot(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Tc,this.normalScale=new Ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=a1,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class O8 extends pr{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new ot(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ot(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Tc,this.normalScale=new Ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class N8 extends pr{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Tc,this.normalScale=new Ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class G8 extends pr{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new ot(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ot(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Tc,this.normalScale=new Ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=a1,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class z8 extends pr{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ot(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Tc,this.normalScale=new Ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Q8 extends Pr{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Us(t,e,n){return u3(t)?new t.constructor(t.subarray(e,n!==void 0?n:t.length)):t.slice(e,n)}function Bu(t,e,n){return!t||!n&&t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)}function u3(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function H8(t){function e(r,s){return t[r]-t[s]}const n=t.length,i=new Array(n);for(let r=0;r!==n;++r)i[r]=r;return i.sort(e),i}function kC(t,e,n){const i=t.length,r=new t.constructor(i);for(let s=0,o=0;o!==i;++s){const a=n[s]*e;for(let l=0;l!==e;++l)r[o++]=t[a+l]}return r}function h3(t,e,n,i){let r=1,s=t[0];for(;s!==void 0&&s[i]===void 0;)s=t[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),n.push.apply(n,o)),s=t[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(n,n.length)),s=t[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),n.push(o)),s=t[r++];while(s!==void 0)}function yie(t,e,n,i,r=30){const s=t.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),h=[],f=[];for(let d=0;d<c.times.length;++d){const p=c.times[d]*r;if(!(p<n||p>=i)){h.push(c.times[d]);for(let m=0;m<u;++m)f.push(c.values[d*u+m])}}h.length!==0&&(c.times=Bu(h,c.times.constructor),c.values=Bu(f,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function xie(t,e=0,n=t,i=30){i<=0&&(i=30);const r=n.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=n.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=t.tracks.find(function(_){return _.name===a.name&&_.ValueTypeName===l});if(c===void 0)continue;let u=0;const h=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=h/3);let f=0;const d=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=d/3);const p=a.times.length-1;let m;if(s<=a.times[0]){const _=u,y=h-u;m=Us(a.values,_,y)}else if(s>=a.times[p]){const _=p*h+u,y=_+h-u;m=Us(a.values,_,y)}else{const _=a.createInterpolant(),y=u,x=h-u;_.evaluate(s),m=Us(_.resultBuffer,y,x)}l==="quaternion"&&new qr().fromArray(m).normalize().conjugate().toArray(m);const g=c.times.length;for(let _=0;_<g;++_){const y=_*d+f;if(l==="quaternion")qr.multiplyQuaternionsFlat(c.values,y,m,0,c.values,y);else{const x=d-f*2;for(let E=0;E<x;++E)c.values[y+E]-=m[E]}}}return t.blendMode=jb,t}var Eie=Object.freeze({__proto__:null,arraySlice:Us,convertArray:Bu,isTypedArray:u3,getKeyframeOrder:H8,sortedArray:kC,flattenJSON:h3,subclip:yie,makeClipAdditive:xie});class w1{constructor(e,n,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new n.constructor(i),this.sampleValues=n,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let i=this._cachedIndex,r=n[i],s=n[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=n.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=n[++i],e<r)break t}o=n.length;break n}if(!(e>=s)){const a=n[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=n[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<n[a]?o=a:i=a+1}if(r=n[i],s=n[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=n.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)n[o]=i[s+o];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class V8 extends w1{constructor(e,n,i,r){super(e,n,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:bu,endingEnd:bu}}intervalChanged_(e,n,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case Iu:s=e,a=2*n-i;break;case Tm:s=r.length-2,a=n+r[s]-r[s+1];break;default:s=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case Iu:o=e,l=2*i-n;break;case Tm:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=n}const c=(i-n)*.5,u=this.valueSize;this._weightPrev=c/(n-a),this._weightNext=c/(l-i),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,n,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,h=this._offsetNext,f=this._weightPrev,d=this._weightNext,p=(i-n)/(r-n),m=p*p,g=m*p,_=-f*g+2*f*m-f*p,y=(1+f)*g+(-1.5-2*f)*m+(-.5+f)*p+1,x=(-1-d)*g+(1.5+d)*m+.5*p,E=d*g-d*m;for(let w=0;w!==a;++w)s[w]=_*o[u+w]+y*o[c+w]+x*o[l+w]+E*o[h+w];return s}}class f3 extends w1{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e,n,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(i-n)/(r-n),h=1-u;for(let f=0;f!==a;++f)s[f]=o[c+f]*h+o[l+f]*u;return s}}class W8 extends w1{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ro{constructor(e,n,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Bu(n,this.TimeBufferType),this.values=Bu(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let i;if(n.toJSON!==this.toJSON)i=n.toJSON(e);else{i={name:e.name,times:Bu(e.times,Array),values:Bu(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new W8(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new f3(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new V8(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case bm:n=this.InterpolantFactoryMethodDiscrete;break;case Im:n=this.InterpolantFactoryMethodLinear;break;case Uv:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return bm;case this.InterpolantFactoryMethodLinear:return Im;case this.InterpolantFactoryMethodSmooth:return Uv}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let i=0,r=n.length;i!==r;++i)n[i]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let i=0,r=n.length;i!==r;++i)n[i]*=e}return this}trim(e,n){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>n;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=Us(i,s,o),this.values=Us(this.values,s*a,o*a)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&u3(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=Us(this.times),n=Us(this.values),i=this.getValueSize(),r=this.getInterpolation()===Uv,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],u=e[a+1];if(c!==u&&(a!==1||c!==e[0]))if(r)l=!0;else{const h=a*i,f=h-i,d=h+i;for(let p=0;p!==i;++p){const m=n[h+p];if(m!==n[f+p]||m!==n[d+p]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const h=a*i,f=o*i;for(let d=0;d!==i;++d)n[f+d]=n[h+d]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,c=0;c!==i;++c)n[l+c]=n[a+c];++o}return o!==e.length?(this.times=Us(e,0,o),this.values=Us(n,0,o*i)):(this.times=e,this.values=n),this}clone(){const e=Us(this.times,0),n=Us(this.values,0),i=this.constructor,r=new i(this.name,e,n);return r.createInterpolant=this.createInterpolant,r}}Ro.prototype.TimeBufferType=Float32Array;Ro.prototype.ValueBufferType=Float32Array;Ro.prototype.DefaultInterpolation=Im;class vh extends Ro{}vh.prototype.ValueTypeName="bool";vh.prototype.ValueBufferType=Array;vh.prototype.DefaultInterpolation=bm;vh.prototype.InterpolantFactoryMethodLinear=void 0;vh.prototype.InterpolantFactoryMethodSmooth=void 0;class d3 extends Ro{}d3.prototype.ValueTypeName="color";class Um extends Ro{}Um.prototype.ValueTypeName="number";class j8 extends w1{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e,n,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-n)/(r-n);let c=e*a;for(let u=c+a;c!==u;c+=4)qr.slerpFlat(s,0,o,c-a,o,c,l);return s}}class Jd extends Ro{InterpolantFactoryMethodLinear(e){return new j8(this.times,this.values,this.getValueSize(),e)}}Jd.prototype.ValueTypeName="quaternion";Jd.prototype.DefaultInterpolation=Im;Jd.prototype.InterpolantFactoryMethodSmooth=void 0;class _h extends Ro{}_h.prototype.ValueTypeName="string";_h.prototype.ValueBufferType=Array;_h.prototype.DefaultInterpolation=bm;_h.prototype.InterpolantFactoryMethodLinear=void 0;_h.prototype.InterpolantFactoryMethodSmooth=void 0;class Om extends Ro{}Om.prototype.ValueTypeName="vector";class Nm{constructor(e,n=-1,i,r=Iy){this.name=e,this.tracks=i,this.duration=n,this.blendMode=r,this.uuid=ps(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)n.push(Mie(i[o]).scale(r));const s=new this(e.name,e.duration,n,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const n=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)n.push(Ro.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,n,i,r){const s=n.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=H8(l);l=kC(l,1,u),c=kC(c,1,u),!r&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new Um(".morphTargetInfluences["+n[a].name+"]",l,c).scale(1/i))}return new this(e,-1,o)}static findByName(e,n){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===n)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,n,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(s);if(u&&u.length>1){const h=u[1];let f=r[h];f||(r[h]=f=[]),f.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],n,i));return o}static parseAnimation(e,n){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(h,f,d,p,m){if(d.length!==0){const g=[],_=[];h3(d,g,_,p),g.length!==0&&m.push(new h(f,g,_))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let h=0;h<c.length;h++){const f=c[h].keys;if(!(!f||f.length===0))if(f[0].morphTargets){const d={};let p;for(p=0;p<f.length;p++)if(f[p].morphTargets)for(let m=0;m<f[p].morphTargets.length;m++)d[f[p].morphTargets[m]]=-1;for(const m in d){const g=[],_=[];for(let y=0;y!==f[p].morphTargets.length;++y){const x=f[p];g.push(x.time),_.push(x.morphTarget===m?1:0)}r.push(new Um(".morphTargetInfluence["+m+"]",g,_))}l=d.length*o}else{const d=".bones["+n[h].name+"]";i(Om,d+".position",f,"pos",r),i(Jd,d+".quaternion",f,"rot",r),i(Om,d+".scale",f,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let n=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];n=Math.max(n,s.times[s.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function wie(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Um;case"vector":case"vector2":case"vector3":case"vector4":return Om;case"color":return d3;case"quaternion":return Jd;case"bool":case"boolean":return vh;case"string":return _h}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function Mie(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=wie(t.type);if(t.times===void 0){const n=[],i=[];h3(t.keys,n,i,"value"),t.times=n,t.values=i}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const rh={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class p3{constructor(e,n,i){const r=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=i,this.itemStart=function(u){a++,s===!1&&r.onStart!==void 0&&r.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,r.onProgress!==void 0&&r.onProgress(u,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(u){r.onError!==void 0&&r.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,h){return c.push(u,h),this},this.removeHandler=function(u){const h=c.indexOf(u);return h!==-1&&c.splice(h,2),this},this.getHandler=function(u){for(let h=0,f=c.length;h<f;h+=2){const d=c[h],p=c[h+1];if(d.global&&(d.lastIndex=0),d.test(u))return p}return null}}}const X8=new p3;class xs{constructor(e){this.manager=e!==void 0?e:X8,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const i=this;return new Promise(function(r,s){i.load(e,r,n,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Ra={};class Cie extends Error{constructor(e,n){super(e),this.response=n}}class sl extends xs{constructor(e){super(e)}load(e,n,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=rh.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(s),this.manager.itemEnd(e)},0),s;if(Ra[e]!==void 0){Ra[e].push({onLoad:n,onProgress:i,onError:r});return}Ra[e]=[],Ra[e].push({onLoad:n,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=Ra[e],h=c.body.getReader(),f=c.headers.get("Content-Length"),d=f?parseInt(f):0,p=d!==0;let m=0;const g=new ReadableStream({start(_){y();function y(){h.read().then(({done:x,value:E})=>{if(x)_.close();else{m+=E.byteLength;const w=new ProgressEvent("progress",{lengthComputable:p,loaded:m,total:d});for(let S=0,b=u.length;S<b;S++){const M=u[S];M.onProgress&&M.onProgress(w)}_.enqueue(E),y()}})}}});return new Response(g)}else throw new Cie(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return c.json();default:if(a===void 0)return c.text();{const h=/charset="?([^;"\s]*)"?/i.exec(a),f=h&&h[1]?h[1].toLowerCase():void 0,d=new TextDecoder(f);return c.arrayBuffer().then(p=>d.decode(p))}}}).then(c=>{rh.add(e,c);const u=Ra[e];delete Ra[e];for(let h=0,f=u.length;h<f;h++){const d=u[h];d.onLoad&&d.onLoad(c)}}).catch(c=>{const u=Ra[e];if(u===void 0)throw this.manager.itemError(e),c;delete Ra[e];for(let h=0,f=u.length;h<f;h++){const d=u[h];d.onError&&d.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Sie extends xs{constructor(e){super(e)}load(e,n,i,r){const s=this,o=new sl(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const n=[];for(let i=0;i<e.length;i++){const r=Nm.parse(e[i]);n.push(r)}return n}}class bie extends xs{constructor(e){super(e)}load(e,n,i,r){const s=this,o=[],a=new w8,l=new sl(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function u(h){l.load(e[h],function(f){const d=s.parse(f,!0);o[h]={width:d.width,height:d.height,format:d.format,mipmaps:d.mipmaps},c+=1,c===6&&(d.mipmapCount===1&&(a.minFilter=ni),a.image=o,a.format=d.format,a.needsUpdate=!0,n&&n(a))},i,r)}if(Array.isArray(e))for(let h=0,f=e.length;h<f;++h)u(h);else l.load(e,function(h){const f=s.parse(h,!0);if(f.isCubemap){const d=f.mipmaps.length/f.mipmapCount;for(let p=0;p<d;p++){o[p]={mipmaps:[]};for(let m=0;m<f.mipmapCount;m++)o[p].mipmaps.push(f.mipmaps[p*f.mipmapCount+m]),o[p].format=f.format,o[p].width=f.width,o[p].height=f.height}a.image=o}else a.image.width=f.width,a.image.height=f.height,a.mipmaps=f.mipmaps;f.mipmapCount===1&&(a.minFilter=ni),a.format=f.format,a.needsUpdate=!0,n&&n(a)},i,r);return a}}class Gm extends xs{constructor(e){super(e)}load(e,n,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=rh.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o;const a=Pm("img");function l(){u(),rh.add(e,this),n&&n(this),s.manager.itemEnd(e)}function c(h){u(),r&&r(h),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class Iie extends xs{constructor(e){super(e)}load(e,n,i,r){const s=new u1,o=new Gm(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(u){s.images[c]=u,a++,a===6&&(s.needsUpdate=!0,n&&n(s))},void 0,r)}for(let c=0;c<e.length;++c)l(c);return s}}class Tie extends xs{constructor(e){super(e)}load(e,n,i,r){const s=this,o=new ad,a=new sl(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){const c=s.parse(l);!c||(c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:Sr,o.wrapT=c.wrapT!==void 0?c.wrapT:Sr,o.magFilter=c.magFilter!==void 0?c.magFilter:ni,o.minFilter=c.minFilter!==void 0?c.minFilter:ni,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.encoding!==void 0&&(o.encoding=c.encoding),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=ph),c.mipmapCount===1&&(o.minFilter=ni),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,n&&n(o,c))},i,r),o}}class Bie extends xs{constructor(e){super(e)}load(e,n,i,r){const s=new xi,o=new Gm(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,n!==void 0&&n(s)},i,r),s}}class Pc extends an{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new ot(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}}class Y8 extends Pc{constructor(e,n,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(an.DefaultUp),this.updateMatrix(),this.groundColor=new ot(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const OE=new Lt,qP=new te,JP=new te;class m3{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ve(512,512),this.map=null,this.mapPass=null,this.matrix=new Lt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Py,this._frameExtents=new Ve(1,1),this._viewportCount=1,this._viewports=[new An(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,i=this.matrix;qP.setFromMatrixPosition(e.matrixWorld),n.position.copy(qP),JP.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(JP),n.updateMatrixWorld(),OE.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(OE),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(OE)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Rie extends m3{constructor(){super(new Xi(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const n=this.camera,i=Rm*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||n.far;(i!==n.fov||r!==n.aspect||s!==n.far)&&(n.fov=i,n.aspect=r,n.far=s,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class q8 extends Pc{constructor(e,n,i=0,r=Math.PI/3,s=0,o=1){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(an.DefaultUp),this.updateMatrix(),this.target=new an,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new Rie}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const KP=new Lt,$0=new te,NE=new te;class Pie extends m3{constructor(){super(new Xi(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ve(4,2),this._viewportCount=6,this._viewports=[new An(2,1,1,1),new An(0,1,1,1),new An(3,1,1,1),new An(1,1,1,1),new An(3,0,1,1),new An(1,0,1,1)],this._cubeDirections=[new te(1,0,0),new te(-1,0,0),new te(0,0,1),new te(0,0,-1),new te(0,1,0),new te(0,-1,0)],this._cubeUps=[new te(0,1,0),new te(0,1,0),new te(0,1,0),new te(0,1,0),new te(0,0,1),new te(0,0,-1)]}updateMatrices(e,n=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),$0.setFromMatrixPosition(e.matrixWorld),i.position.copy($0),NE.copy(i.position),NE.add(this._cubeDirections[n]),i.up.copy(this._cubeUps[n]),i.lookAt(NE),i.updateMatrixWorld(),r.makeTranslation(-$0.x,-$0.y,-$0.z),KP.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(KP)}}class J8 extends Pc{constructor(e,n,i=0,r=1){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new Pie}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Die extends m3{constructor(){super(new Dy(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class K8 extends Pc{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(an.DefaultUp),this.updateMatrix(),this.target=new an,this.shadow=new Die}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Z8 extends Pc{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class $8 extends Pc{constructor(e,n,i=10,r=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class e6{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new te)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.282095),n.addScaledVector(o[1],.488603*r),n.addScaledVector(o[2],.488603*s),n.addScaledVector(o[3],.488603*i),n.addScaledVector(o[4],1.092548*(i*r)),n.addScaledVector(o[5],1.092548*(r*s)),n.addScaledVector(o[6],.315392*(3*s*s-1)),n.addScaledVector(o[7],1.092548*(i*s)),n.addScaledVector(o[8],.546274*(i*i-r*r)),n}getIrradianceAt(e,n){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.886227),n.addScaledVector(o[1],2*.511664*r),n.addScaledVector(o[2],2*.511664*s),n.addScaledVector(o[3],2*.511664*i),n.addScaledVector(o[4],2*.429043*i*r),n.addScaledVector(o[5],2*.429043*r*s),n.addScaledVector(o[6],.743125*s*s-.247708),n.addScaledVector(o[7],2*.429043*i*s),n.addScaledVector(o[8],.429043*(i*i-r*r)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,n+r*3);return this}toArray(e=[],n=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,n+r*3);return e}static getBasisAt(e,n){const i=e.x,r=e.y,s=e.z;n[0]=.282095,n[1]=.488603*r,n[2]=.488603*s,n[3]=.488603*i,n[4]=1.092548*i*r,n[5]=1.092548*r*s,n[6]=.315392*(3*s*s-1),n[7]=1.092548*i*s,n[8]=.546274*(i*i-r*r)}}class Qy extends Pc{constructor(e=new e6,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}class Hy extends xs{constructor(e){super(e),this.textures={}}load(e,n,i,r){const s=this,o=new sl(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const n=this.textures;function i(s){return n[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),n[s]}const r=Hy.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new ot().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==1&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new ot().setHex(o.value);break;case"v2":r.uniforms[s].value=new Ve().fromArray(o.value);break;case"v3":r.uniforms[s].value=new te().fromArray(o.value);break;case"v4":r.uniforms[s].value=new An().fromArray(o.value);break;case"m3":r.uniforms[s].value=new Wr().fromArray(o.value);break;case"m4":r.uniforms[s].value=new Lt().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new Ve().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new Ve().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const n={ShadowMaterial:F8,SpriteMaterial:e3,RawShaderMaterial:L8,ShaderMaterial:ha,PointsMaterial:n3,MeshPhysicalMaterial:k8,MeshStandardMaterial:c3,MeshPhongMaterial:U8,MeshToonMaterial:O8,MeshNormalMaterial:N8,MeshLambertMaterial:G8,MeshDepthMaterial:Zb,MeshDistanceMaterial:$b,MeshBasicMaterial:Bc,MeshMatcapMaterial:z8,LineDashedMaterial:Q8,LineBasicMaterial:Pr,Material:pr};return new n[e]}}class UC{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let n="";for(let i=0,r=e.length;i<r;i++)n+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class t6 extends zt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class n6 extends xs{constructor(e){super(e)}load(e,n,i,r){const s=this,o=new sl(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const n={},i={};function r(d,p){if(n[p]!==void 0)return n[p];const g=d.interleavedBuffers[p],_=s(d,g.buffer),y=Wf(g.type,_),x=new Uy(y,g.stride);return x.uuid=g.uuid,n[p]=x,x}function s(d,p){if(i[p]!==void 0)return i[p];const g=d.arrayBuffers[p],_=new Uint32Array(g).buffer;return i[p]=_,_}const o=e.isInstancedBufferGeometry?new t6:new zt,a=e.data.index;if(a!==void 0){const d=Wf(a.type,a.array);o.setIndex(new En(d,1))}const l=e.data.attributes;for(const d in l){const p=l[d];let m;if(p.isInterleavedBufferAttribute){const g=r(e.data,p.data);m=new ih(g,p.itemSize,p.offset,p.normalized)}else{const g=Wf(p.type,p.array),_=p.isInstancedBufferAttribute?Sd:En;m=new _(g,p.itemSize,p.normalized)}p.name!==void 0&&(m.name=p.name),p.usage!==void 0&&m.setUsage(p.usage),p.updateRange!==void 0&&(m.updateRange.offset=p.updateRange.offset,m.updateRange.count=p.updateRange.count),o.setAttribute(d,m)}const c=e.data.morphAttributes;if(c)for(const d in c){const p=c[d],m=[];for(let g=0,_=p.length;g<_;g++){const y=p[g];let x;if(y.isInterleavedBufferAttribute){const E=r(e.data,y.data);x=new ih(E,y.itemSize,y.offset,y.normalized)}else{const E=Wf(y.type,y.array);x=new En(E,y.itemSize,y.normalized)}y.name!==void 0&&(x.name=y.name),m.push(x)}o.morphAttributes[d]=m}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const h=e.data.groups||e.data.drawcalls||e.data.offsets;if(h!==void 0)for(let d=0,p=h.length;d!==p;++d){const m=h[d];o.addGroup(m.start,m.count,m.materialIndex)}const f=e.data.boundingSphere;if(f!==void 0){const d=new te;f.center!==void 0&&d.fromArray(f.center),o.boundingSphere=new Ah(d,f.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class Fie extends xs{constructor(e){super(e)}load(e,n,i,r){const s=this,o=this.path===""?UC.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new sl(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(h){r!==void 0&&r(h),console.error("THREE:ObjectLoader: Can't parse "+e+".",h.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,n)},i,r)}async loadAsync(e,n){const i=this,r=this.path===""?UC.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new sl(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,n),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,n){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){n!==void 0&&n(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,i),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),n!==void 0){let h=!1;for(const f in o)if(o[f].data instanceof HTMLImageElement){h=!0;break}h===!1&&n(c)}return c}async parseAsync(e){const n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,a,o,n),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),l}parseShapes(e){const n={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new zu().fromJSON(e[i]);n[s.uuid]=s}return n}parseSkeletons(e,n){const i={},r={};if(n.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new Oy().fromJSON(e[s],r);i[a.uuid]=a}return i}parseGeometries(e,n){const i={};if(e!==void 0){const r=new n6;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in YP?a=YP[l.type].fromJSON(l,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),a.isBufferGeometry===!0&&l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,n){const i={},r={};if(e!==void 0){const s=new Hy;s.setTextures(n);for(let o=0,a=e.length;o<a;o++){const l=e[o];i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const n={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=Nm.parse(r);n[s.uuid]=s}return n}parseImages(e,n){const i=this,r={};let s;function o(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:i.resourcePath+c;return o(u)}else return l.data?{data:Wf(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new p3(n);s=new Gm(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const h=e[c],f=h.url;if(Array.isArray(f)){const d=[];for(let p=0,m=f.length;p<m;p++){const g=f[p],_=a(g);_!==null&&(_ instanceof HTMLImageElement?d.push(_):d.push(new ad(_.data,_.width,_.height)))}r[h.uuid]=new Tu(d)}else{const d=a(h.url);r[h.uuid]=new Tu(d)}}}return r}async parseImagesAsync(e){const n=this,i={};let r;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:n.resourcePath+a;return await r.loadAsync(l)}else return o.data?{data:Wf(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new Gm(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const u=[];for(let h=0,f=c.length;h<f;h++){const d=c[h],p=await s(d);p!==null&&(p instanceof HTMLImageElement?u.push(p):u.push(new ad(p.data,p.width,p.height)))}i[l.uuid]=new Tu(u)}else{const u=await s(l.url);i[l.uuid]=new Tu(u)}}}return i}parseTextures(e,n){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),n[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=n[a.image],c=l.data;let u;Array.isArray(c)?(u=new u1,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new ad:u=new xi,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=a.uuid,a.name!==void 0&&(u.name=a.name),a.mapping!==void 0&&(u.mapping=i(a.mapping,Lie)),a.offset!==void 0&&u.offset.fromArray(a.offset),a.repeat!==void 0&&u.repeat.fromArray(a.repeat),a.center!==void 0&&u.center.fromArray(a.center),a.rotation!==void 0&&(u.rotation=a.rotation),a.wrap!==void 0&&(u.wrapS=i(a.wrap[0],ZP),u.wrapT=i(a.wrap[1],ZP)),a.format!==void 0&&(u.format=a.format),a.type!==void 0&&(u.type=a.type),a.encoding!==void 0&&(u.encoding=a.encoding),a.minFilter!==void 0&&(u.minFilter=i(a.minFilter,$P)),a.magFilter!==void 0&&(u.magFilter=i(a.magFilter,$P)),a.anisotropy!==void 0&&(u.anisotropy=a.anisotropy),a.flipY!==void 0&&(u.flipY=a.flipY),a.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(u.unpackAlignment=a.unpackAlignment),a.userData!==void 0&&(u.userData=a.userData),r[a.uuid]=u}return r}parseObject(e,n,i,r,s){let o;function a(f){return n[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",f),n[f]}function l(f){if(f!==void 0){if(Array.isArray(f)){const d=[];for(let p=0,m=f.length;p<m;p++){const g=f[p];i[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",g),d.push(i[g])}return d}return i[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",f),i[f]}}function c(f){return r[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",f),r[f]}let u,h;switch(e.type){case"Scene":o=new m8,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new ot(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new ky(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new Ly(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":o=new Xi(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Dy(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new Z8(e.color,e.intensity);break;case"DirectionalLight":o=new K8(e.color,e.intensity);break;case"PointLight":o=new J8(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new $8(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new q8(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new Y8(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new Qy().fromJSON(e);break;case"SkinnedMesh":u=a(e.geometry),h=l(e.material),o=new _8(u,h),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":u=a(e.geometry),h=l(e.material),o=new Yi(u,h);break;case"InstancedMesh":u=a(e.geometry),h=l(e.material);const f=e.count,d=e.instanceMatrix,p=e.instanceColor;o=new y8(u,h,f),o.instanceMatrix=new Sd(new Float32Array(d.array),16),p!==void 0&&(o.instanceColor=new Sd(new Float32Array(p.array),p.itemSize));break;case"LOD":o=new v8;break;case"Line":o=new Ec(a(e.geometry),l(e.material));break;case"LineLoop":o=new x8(a(e.geometry),l(e.material));break;case"LineSegments":o=new ma(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new E8(a(e.geometry),l(e.material));break;case"Sprite":o=new g8(l(e.material));break;case"Group":o=new Xf;break;case"Bone":o=new t3;break;default:o=new an}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const f=e.children;for(let d=0;d<f.length;d++)o.add(this.parseObject(f[d],n,i,r,s))}if(e.animations!==void 0){const f=e.animations;for(let d=0;d<f.length;d++){const p=f[d];o.animations.push(s[p])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const f=e.levels;for(let d=0;d<f.length;d++){const p=f[d],m=o.getObjectByProperty("uuid",p.object);m!==void 0&&o.addLevel(m,p.distance)}}return o}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=n[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}}const Lie={UVMapping:by,CubeReflectionMapping:vc,CubeRefractionMapping:_c,EquirectangularReflectionMapping:wm,EquirectangularRefractionMapping:Mm,CubeUVReflectionMapping:Hd},ZP={RepeatWrapping:Cm,ClampToEdgeWrapping:Sr,MirroredRepeatWrapping:Sm},$P={NearestFilter:ui,NearestMipmapNearestFilter:T_,NearestMipmapLinearFilter:B_,LinearFilter:ni,LinearMipmapNearestFilter:Vb,LinearMipmapLinearFilter:ph};class kie extends xs{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,n,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=rh.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){rh.add(e,l),n&&n(l),s.manager.itemEnd(e)}).catch(function(l){r&&r(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let Cg;const A3={getContext:function(){return Cg===void 0&&(Cg=new(window.AudioContext||window.webkitAudioContext)),Cg},setContext:function(t){Cg=t}};class Uie extends xs{constructor(e){super(e)}load(e,n,i,r){const s=this,o=new sl(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{const l=a.slice(0);A3.getContext().decodeAudioData(l,function(u){n(u)})}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}}class Oie extends Qy{constructor(e,n,i=1){super(void 0,i),this.isHemisphereLightProbe=!0;const r=new ot().set(e),s=new ot().set(n),o=new te(r.r,r.g,r.b),a=new te(s.r,s.g,s.b),l=Math.sqrt(Math.PI),c=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(c)}}class Nie extends Qy{constructor(e,n=1){super(void 0,n),this.isAmbientLightProbe=!0;const i=new ot().set(e);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const eD=new Lt,tD=new Lt,eu=new Lt;class Gie{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Xi,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Xi,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,eu.copy(e.projectionMatrix);const r=n.eyeSep/2,s=r*n.near/n.focus,o=n.near*Math.tan(Nu*n.fov*.5)/n.zoom;let a,l;tD.elements[12]=-r,eD.elements[12]=r,a=-o*n.aspect+s,l=o*n.aspect+s,eu.elements[0]=2*n.near/(l-a),eu.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(eu),a=-o*n.aspect-s,l=o*n.aspect-s,eu.elements[0]=2*n.near/(l-a),eu.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(eu)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(tD),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(eD)}}class i6{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=nD(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=nD();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function nD(){return(typeof performance>"u"?Date:performance).now()}const tu=new te,iD=new qr,zie=new te,nu=new te;class Qie extends an{constructor(){super(),this.type="AudioListener",this.context=A3.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new i6}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(tu,iD,zie),nu.set(0,0,-1).applyQuaternion(iD),n.positionX){const r=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(tu.x,r),n.positionY.linearRampToValueAtTime(tu.y,r),n.positionZ.linearRampToValueAtTime(tu.z,r),n.forwardX.linearRampToValueAtTime(nu.x,r),n.forwardY.linearRampToValueAtTime(nu.y,r),n.forwardZ.linearRampToValueAtTime(nu.z,r),n.upX.linearRampToValueAtTime(i.x,r),n.upY.linearRampToValueAtTime(i.y,r),n.upZ.linearRampToValueAtTime(i.z,r)}else n.setPosition(tu.x,tu.y,tu.z),n.setOrientation(nu.x,nu.y,nu.z,i.x,i.y,i.z)}}class r6 extends an{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const iu=new te,rD=new qr,Hie=new te,ru=new te;class Vie extends r6{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(iu,rD,Hie),ru.set(0,0,1).applyQuaternion(rD);const n=this.panner;if(n.positionX){const i=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(iu.x,i),n.positionY.linearRampToValueAtTime(iu.y,i),n.positionZ.linearRampToValueAtTime(iu.z,i),n.orientationX.linearRampToValueAtTime(ru.x,i),n.orientationY.linearRampToValueAtTime(ru.y,i),n.orientationZ.linearRampToValueAtTime(ru.z,i)}else n.setPosition(iu.x,iu.y,iu.z),n.setOrientation(ru.x,ru.y,ru.z)}}class Wie{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let i=0;i<n.length;i++)e+=n[i];return e/n.length}}class s6{constructor(e,n,i){this.binding=e,this.valueSize=i;let r,s,o;switch(n){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=n}else{o+=n;const a=n/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const n=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,i=this.buffer,r=e*n+n,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=n*this._origIndex;this._mixBufferRegion(i,r,l,1-s,n)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*n,1,n);for(let l=n,c=n+n;l!==c;++l)if(i[l]!==i[l+n]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,n=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(n,r);for(let s=i,o=r;s!==o;++s)n[s]=n[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let i=e;i<n;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[n+i]=this.buffer[e+i]}_select(e,n,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[n+o]=e[i+o]}_slerp(e,n,i,r){qr.slerpFlat(e,n,e,n,e,i,r)}_slerpAdditive(e,n,i,r,s){const o=this._workIndex*s;qr.multiplyQuaternionsFlat(e,o,e,n,e,i),qr.slerpFlat(e,n,e,n,e,o,r)}_lerp(e,n,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=n+a;e[l]=e[l]*o+e[i+a]*r}}_lerpAdditive(e,n,i,r,s){for(let o=0;o!==s;++o){const a=n+o;e[a]=e[a]+e[i+o]*r}}}const g3="\\[\\]\\.:\\/",jie=new RegExp("["+g3+"]","g"),v3="[^"+g3+"]",Xie="[^"+g3.replace("\\.","")+"]",Yie=/((?:WC+[\/:])*)/.source.replace("WC",v3),qie=/(WCOD+)?/.source.replace("WCOD",Xie),Jie=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",v3),Kie=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",v3),Zie=new RegExp("^"+Yie+qie+Jie+Kie+"$"),$ie=["material","materials","bones","map"];class ere{constructor(e,n,i){const r=i||nn.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,r)}getValue(e,n){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,n)}setValue(e,n){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=e.length;n!==i;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=e.length;n!==i;++n)e[n].unbind()}}class nn{constructor(e,n,i){this.path=n,this.parsedPath=i||nn.parseTrackName(n),this.node=nn.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,i){return e&&e.isAnimationObjectGroup?new nn.Composite(e,n,i):new nn(e,n,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(jie,"")}static parseTrackName(e){const n=Zie.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);$ie.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(n);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===n||a.uuid===n)return a;const l=i(a.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[n++]=i[r]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,i=n.objectName,r=n.propertyName;let s=n.propertyIndex;if(e||(e=nn.findNode(this.rootNode,n.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(i){let c=n.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[r];if(o===void 0){const c=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}nn.Composite=ere;nn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};nn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};nn.prototype.GetterByBindingType=[nn.prototype._getValue_direct,nn.prototype._getValue_array,nn.prototype._getValue_arrayElement,nn.prototype._getValue_toArray];nn.prototype.SetterByBindingTypeAndVersioning=[[nn.prototype._setValue_direct,nn.prototype._setValue_direct_setNeedsUpdate,nn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[nn.prototype._setValue_array,nn.prototype._setValue_array_setNeedsUpdate,nn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[nn.prototype._setValue_arrayElement,nn.prototype._setValue_arrayElement_setNeedsUpdate,nn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[nn.prototype._setValue_fromArray,nn.prototype._setValue_fromArray_setNeedsUpdate,nn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class tre{constructor(){this.isAnimationObjectGroup=!0,this.uuid=ps(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let u=0,h=arguments.length;u!==h;++u){const f=arguments[u],d=f.uuid;let p=n[d];if(p===void 0){p=l++,n[d]=p,e.push(f);for(let m=0,g=o;m!==g;++m)s[m].push(new nn(f,i[m],r[m]))}else if(p<c){a=e[p];const m=--c,g=e[m];n[g.uuid]=p,e[p]=g,n[d]=m,e[m]=f;for(let _=0,y=o;_!==y;++_){const x=s[_],E=x[m];let w=x[p];x[p]=E,w===void 0&&(w=new nn(f,i[_],r[_])),x[m]=w}}else e[p]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,n=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,u=n[c];if(u!==void 0&&u>=s){const h=s++,f=e[h];n[f.uuid]=u,e[u]=f,n[c]=h,e[h]=l;for(let d=0,p=r;d!==p;++d){const m=i[d],g=m[h],_=m[u];m[u]=g,m[h]=_}}}this.nCachedObjects_=s}uncache(){const e=this._objects,n=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],u=c.uuid,h=n[u];if(h!==void 0)if(delete n[u],h<s){const f=--s,d=e[f],p=--o,m=e[p];n[d.uuid]=h,e[h]=d,n[m.uuid]=f,e[f]=m,e.pop();for(let g=0,_=r;g!==_;++g){const y=i[g],x=y[f],E=y[p];y[h]=x,y[f]=E,y.pop()}}else{const f=--o,d=e[f];f>0&&(n[d.uuid]=h),e[h]=d,e.pop();for(let p=0,m=r;p!==m;++p){const g=i[p];g[h]=g[f],g.pop()}}}this.nCachedObjects_=s}subscribe_(e,n){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,u=this.nCachedObjects_,h=new Array(c);r=s.length,i[e]=r,o.push(e),a.push(n),s.push(h);for(let f=u,d=l.length;f!==d;++f){const p=l[f];h[f]=new nn(p,e,n)}return h}unsubscribe_(e){const n=this._bindingsIndicesByPath,i=n[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];n[c]=i,o[i]=l,o.pop(),s[i]=s[a],s.pop(),r[i]=r[a],r.pop()}}}class nre{constructor(e,n,i=null,r=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=i,this.blendMode=r;const s=n.tracks,o=s.length,a=new Array(o),l={endingStart:bu,endingEnd:bu};for(let c=0;c!==o;++c){const u=s[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=XO,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,i){if(e.fadeOut(n),this.fadeIn(n),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,n),this.warp(a,1,n)}return this}crossFadeTo(e,n,i){return e.crossFadeFrom(this,n,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+i,c[0]=e/o,c[1]=n/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?n=0:(this._startTime=null,n=i*l)}n*=this._updateTimeScale(e);const o=this._updateTime(n),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case jb:for(let u=0,h=l.length;u!==h;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);break;case Iy:default:for(let u=0,h=l.length;u!==h;++u)l[u].evaluate(o),c[u].accumulate(r,a)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];n*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const i=this._timeScaleInterpolant;i!==null&&(n*=i.evaluate(e)[0],e>i.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n))}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===YO;if(e===0)return s===-1?r:o&&(s&1)===1?n-r:r;if(i===jO){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=n)r=n;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=n||r<0){const a=Math.floor(r/n);r-=n*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?n:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return n-r}return r}_setEndings(e,n,i){const r=this._interpolantSettings;i?(r.endingStart=Iu,r.endingEnd=Iu):(e?r.endingStart=this.zeroSlopeAtStart?Iu:bu:r.endingStart=Tm,n?r.endingEnd=this.zeroSlopeAtEnd?Iu:bu:r.endingEnd=Tm)}_scheduleFading(e,n,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=n,a[1]=s+e,l[1]=i,this}}const ire=new Float32Array(1);class rre extends hl{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let h=0;h!==s;++h){const f=r[h],d=f.name;let p=u[d];if(p!==void 0)++p.referenceCount,o[h]=p;else{if(p=o[h],p!==void 0){p._cacheIndex===null&&(++p.referenceCount,this._addInactiveBinding(p,l,d));continue}const m=n&&n._propertyBindings[h].binding.parsedPath;p=new s6(nn.create(i,d,m),f.ValueTypeName,f.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,l,d),o[h]=p}a[h].resultBuffer=p.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const s=n[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const s=n[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,i){const r=this._actions,s=this._actionsByClip;let o=s[n];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[n]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const n=this._actions,i=n[n.length-1],r=e._cacheIndex;i._cacheIndex=r,n[r]=i,n.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const h=a.actionByRoot,f=(e._localRoot||this._root).uuid;delete h[f],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const s=n[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const n=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=i,n[i]=s}_takeBackAction(e){const n=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=i,n[i]=s}_addInactiveBinding(e,n,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[n];o===void 0&&(o={},r[n]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const n=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],l=n[n.length-1],c=e._cacheIndex;l._cacheIndex=c,n[c]=l,n.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const n=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=i,n[i]=s}_takeBackBinding(e){const n=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=i,n[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let i=e[n];return i===void 0&&(i=new f3(new Float32Array(2),new Float32Array(2),1,ire),i.__cacheIndex=n,e[n]=i),i}_takeBackControlInterpolant(e){const n=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=n[r];e.__cacheIndex=r,n[r]=e,s.__cacheIndex=i,n[i]=s}clipAction(e,n,i){const r=n||this._root,s=r.uuid;let o=typeof e=="string"?Nm.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(i===void 0&&(o!==null?i=o.blendMode:i=Iy),l!==void 0){const h=l.actionByRoot[s];if(h!==void 0&&h.blendMode===i)return h;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const u=new nre(this,o,n,i);return this._bindAction(u,c),this._addInactiveAction(u,a,s),u}existingAction(e,n){const i=n||this._root,r=i.uuid,s=typeof e=="string"?Nm.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let i=n-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const n=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==i;++c)n[c]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const u=c._cacheIndex,h=n[n.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,h._cacheIndex=u,n[u]=h,n.pop(),this._removeInactiveBindingsForAction(c)}delete r[i]}}uncacheRoot(e){const n=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,l=a[n];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[n];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,n){const i=this.existingAction(e,n);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class _3{constructor(e){this.value=e}clone(){return new _3(this.value.clone===void 0?this.value:this.value.clone())}}let sre=0;class ore extends hl{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:sre++}),this.name="",this.usage=Bm,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const n=e.uniforms;this.uniforms.length=0;for(let i=0,r=n.length;i<r;i++)this.uniforms.push(n[i].clone());return this}clone(){return new this.constructor().copy(this)}}class are extends Uy{constructor(e,n,i=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class lre{constructor(e,n,i,r,s){this.isGLBufferAttribute=!0,this.buffer=e,this.type=n,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class cre{constructor(e,n,i=0,r=1/0){this.ray=new c1(e,n),this.near=i,this.far=r,this.camera=null,this.layers=new By,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}intersectObject(e,n=!0,i=[]){return OC(e,this,i,n),i.sort(sD),i}intersectObjects(e,n=!0,i=[]){for(let r=0,s=e.length;r<s;r++)OC(e[r],this,i,n);return i.sort(sD),i}}function sD(t,e){return t.distance-e.distance}function OC(t,e,n,i){if(t.layers.test(e.layers)&&t.raycast(e,n),i===!0){const r=t.children;for(let s=0,o=r.length;s<o;s++)OC(r[s],e,n,!0)}}class ure{constructor(e=1,n=0,i=0){return this.radius=e,this.phi=n,this.theta=i,this}set(e,n,i){return this.radius=e,this.phi=n,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,i){return this.radius=Math.sqrt(e*e+n*n+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(ii(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class hre{constructor(e=1,n=0,i=0){return this.radius=e,this.theta=n,this.y=i,this}set(e,n,i){return this.radius=e,this.theta=n,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=n,this}clone(){return new this.constructor().copy(this)}}const oD=new Ve;class fre{constructor(e=new Ve(1/0,1/0),n=new Ve(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=oD.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return oD.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const aD=new te,Sg=new te;class dre{constructor(e=new te,n=new te){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){aD.subVectors(e,this.start),Sg.subVectors(this.end,this.start);const i=Sg.dot(Sg);let s=Sg.dot(aD)/i;return n&&(s=ii(s,0,1)),s}closestPointToPoint(e,n,i){const r=this.closestPointToPointParameter(e,n);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const lD=new te;class pre extends an{constructor(e,n){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;const i=new zt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,u=a/l*Math.PI*2;r.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}i.setAttribute("position",new ut(r,3));const s=new Pr({fog:!1,toneMapped:!1});this.cone=new ma(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),lD.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(lD),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Ll=new te,bg=new Lt,GE=new Lt;class mre extends ma{constructor(e){const n=o6(e),i=new zt,r=[],s=[],o=new ot(0,0,1),a=new ot(0,1,0);for(let c=0;c<n.length;c++){const u=n[c];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new ut(r,3)),i.setAttribute("color",new ut(s,3));const l=new Pr({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const n=this.bones,i=this.geometry,r=i.getAttribute("position");GE.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<n.length;s++){const a=n[s];a.parent&&a.parent.isBone&&(bg.multiplyMatrices(GE,a.matrixWorld),Ll.setFromMatrixPosition(bg),r.setXYZ(o,Ll.x,Ll.y,Ll.z),bg.multiplyMatrices(GE,a.parent.matrixWorld),Ll.setFromMatrixPosition(bg),r.setXYZ(o+1,Ll.x,Ll.y,Ll.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function o6(t){const e=[];t.isBone===!0&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,o6(t.children[n]));return e}class Are extends Yi{constructor(e,n,i){const r=new qd(n,4,2),s=new Bc({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.light.updateMatrixWorld(),this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const gre=new te,cD=new ot,uD=new ot;class vre extends an{constructor(e,n,i){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i;const r=new Yd(n);r.rotateY(Math.PI*.5),this.material=new Bc({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new En(o,3)),this.add(new Yi(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");cD.copy(this.light.color),uD.copy(this.light.groundColor);for(let i=0,r=n.count;i<r;i++){const s=i<r/2?cD:uD;n.setXYZ(i,s.r,s.g,s.b)}n.needsUpdate=!0}e.lookAt(gre.setFromMatrixPosition(this.light.matrixWorld).negate())}}class _re extends ma{constructor(e=10,n=10,i=4473924,r=8947848){i=new ot(i),r=new ot(r);const s=n/2,o=e/n,a=e/2,l=[],c=[];for(let f=0,d=0,p=-a;f<=n;f++,p+=o){l.push(-a,0,p,a,0,p),l.push(p,0,-a,p,0,a);const m=f===s?i:r;m.toArray(c,d),d+=3,m.toArray(c,d),d+=3,m.toArray(c,d),d+=3,m.toArray(c,d),d+=3}const u=new zt;u.setAttribute("position",new ut(l,3)),u.setAttribute("color",new ut(c,3));const h=new Pr({vertexColors:!0,toneMapped:!1});super(u,h),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class yre extends ma{constructor(e=10,n=16,i=8,r=64,s=4473924,o=8947848){s=new ot(s),o=new ot(o);const a=[],l=[];if(n>1)for(let h=0;h<n;h++){const f=h/n*(Math.PI*2),d=Math.sin(f)*e,p=Math.cos(f)*e;a.push(0,0,0),a.push(d,0,p);const m=h&1?s:o;l.push(m.r,m.g,m.b),l.push(m.r,m.g,m.b)}for(let h=0;h<i;h++){const f=h&1?s:o,d=e-e/i*h;for(let p=0;p<r;p++){let m=p/r*(Math.PI*2),g=Math.sin(m)*d,_=Math.cos(m)*d;a.push(g,0,_),l.push(f.r,f.g,f.b),m=(p+1)/r*(Math.PI*2),g=Math.sin(m)*d,_=Math.cos(m)*d,a.push(g,0,_),l.push(f.r,f.g,f.b)}}const c=new zt;c.setAttribute("position",new ut(a,3)),c.setAttribute("color",new ut(l,3));const u=new Pr({vertexColors:!0,toneMapped:!1});super(c,u),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const hD=new te,Ig=new te,fD=new te;class xre extends an{constructor(e,n,i){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,n===void 0&&(n=1);let r=new zt;r.setAttribute("position",new ut([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const s=new Pr({fog:!1,toneMapped:!1});this.lightPlane=new Ec(r,s),this.add(this.lightPlane),r=new zt,r.setAttribute("position",new ut([0,0,0,0,0,1],3)),this.targetLine=new Ec(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){hD.setFromMatrixPosition(this.light.matrixWorld),Ig.setFromMatrixPosition(this.light.target.matrixWorld),fD.subVectors(Ig,hD),this.lightPlane.lookAt(Ig),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Ig),this.targetLine.scale.z=fD.length()}}const Tg=new te,jn=new Ry;class Ere extends ma{constructor(e){const n=new zt,i=new Pr({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(p,m){l(p),l(m)}function l(p){r.push(0,0,0),s.push(0,0,0),o[p]===void 0&&(o[p]=[]),o[p].push(r.length/3-1)}n.setAttribute("position",new ut(r,3)),n.setAttribute("color",new ut(s,3)),super(n,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new ot(16755200),u=new ot(16711680),h=new ot(43775),f=new ot(16777215),d=new ot(3355443);this.setColors(c,u,h,f,d)}setColors(e,n,i,r,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,n.r,n.g,n.b),a.setXYZ(25,n.r,n.g,n.b),a.setXYZ(26,n.r,n.g,n.b),a.setXYZ(27,n.r,n.g,n.b),a.setXYZ(28,n.r,n.g,n.b),a.setXYZ(29,n.r,n.g,n.b),a.setXYZ(30,n.r,n.g,n.b),a.setXYZ(31,n.r,n.g,n.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,n=this.pointMap,i=1,r=1;jn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),$n("c",n,e,jn,0,0,-1),$n("t",n,e,jn,0,0,1),$n("n1",n,e,jn,-i,-r,-1),$n("n2",n,e,jn,i,-r,-1),$n("n3",n,e,jn,-i,r,-1),$n("n4",n,e,jn,i,r,-1),$n("f1",n,e,jn,-i,-r,1),$n("f2",n,e,jn,i,-r,1),$n("f3",n,e,jn,-i,r,1),$n("f4",n,e,jn,i,r,1),$n("u1",n,e,jn,i*.7,r*1.1,-1),$n("u2",n,e,jn,-i*.7,r*1.1,-1),$n("u3",n,e,jn,0,r*2,-1),$n("cf1",n,e,jn,-i,0,1),$n("cf2",n,e,jn,i,0,1),$n("cf3",n,e,jn,0,-r,1),$n("cf4",n,e,jn,0,r,1),$n("cn1",n,e,jn,-i,0,-1),$n("cn2",n,e,jn,i,0,-1),$n("cn3",n,e,jn,0,-r,-1),$n("cn4",n,e,jn,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function $n(t,e,n,i,r,s,o){Tg.set(r,s,o).unproject(i);const a=e[t];if(a!==void 0){const l=n.getAttribute("position");for(let c=0,u=a.length;c<u;c++)l.setXYZ(a[c],Tg.x,Tg.y,Tg.z)}}const Bg=new mh;class wre extends ma{constructor(e,n=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new zt;s.setIndex(new En(i,1)),s.setAttribute("position",new En(r,3)),super(s,new Pr({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Bg.setFromObject(this.object),Bg.isEmpty())return;const n=Bg.min,i=Bg.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=n.x,s[4]=i.y,s[5]=i.z,s[6]=n.x,s[7]=n.y,s[8]=i.z,s[9]=i.x,s[10]=n.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=n.z,s[15]=n.x,s[16]=i.y,s[17]=n.z,s[18]=n.x,s[19]=n.y,s[20]=n.z,s[21]=i.x,s[22]=n.y,s[23]=n.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,n){return super.copy(e,n),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Mre extends ma{constructor(e,n=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new zt;s.setIndex(new En(i,1)),s.setAttribute("position",new ut(r,3)),super(s,new Pr({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class Cre extends Ec{constructor(e,n=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new zt;o.setAttribute("position",new ut(s,3)),o.computeBoundingSphere(),super(o,new Pr({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new zt;l.setAttribute("position",new ut(a,3)),l.computeBoundingSphere(),this.add(new Yi(l,new Bc({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const dD=new te;let Rg,zE;class Sre extends an{constructor(e=new te(0,0,1),n=new te(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",Rg===void 0&&(Rg=new zt,Rg.setAttribute("position",new ut([0,0,0,0,1,0],3)),zE=new gh(0,.5,1,5,1),zE.translate(0,-.5,0)),this.position.copy(n),this.line=new Ec(Rg,new Pr({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Yi(zE,new Bc({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{dD.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle(dD,n)}}setLength(e,n=e*.2,i=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(i,n,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class bre extends ma{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new zt;r.setAttribute("position",new ut(n,3)),r.setAttribute("color",new ut(i,3));const s=new Pr({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,n,i){const r=new ot,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(n),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Ire{constructor(){this.type="ShapePath",this.color=new ot,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new Dm,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,i,r){return this.currentPath.quadraticCurveTo(e,n,i,r),this}bezierCurveTo(e,n,i,r,s,o){return this.currentPath.bezierCurveTo(e,n,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(_){const y=[];for(let x=0,E=_.length;x<E;x++){const w=_[x],S=new zu;S.curves=w.curves,y.push(S)}return y}function i(_,y){const x=y.length;let E=!1;for(let w=x-1,S=0;S<x;w=S++){let b=y[w],M=y[S],T=M.x-b.x,B=M.y-b.y;if(Math.abs(B)>Number.EPSILON){if(B<0&&(b=y[S],T=-T,M=y[w],B=-B),_.y<b.y||_.y>M.y)continue;if(_.y===b.y){if(_.x===b.x)return!0}else{const L=B*(_.x-b.x)-T*(_.y-b.y);if(L===0)return!0;if(L<0)continue;E=!E}}else{if(_.y!==b.y)continue;if(M.x<=_.x&&_.x<=b.x||b.x<=_.x&&_.x<=M.x)return!0}}return E}const r=la.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new zu,l.curves=a.curves,c.push(l),c;let u=!r(s[0].getPoints());u=e?!u:u;const h=[],f=[];let d=[],p=0,m;f[p]=void 0,d[p]=[];for(let _=0,y=s.length;_<y;_++)a=s[_],m=a.getPoints(),o=r(m),o=e?!o:o,o?(!u&&f[p]&&p++,f[p]={s:new zu,p:m},f[p].s.curves=a.curves,u&&p++,d[p]=[]):d[p].push({h:a,p:m[0]});if(!f[0])return n(s);if(f.length>1){let _=!1,y=0;for(let x=0,E=f.length;x<E;x++)h[x]=[];for(let x=0,E=f.length;x<E;x++){const w=d[x];for(let S=0;S<w.length;S++){const b=w[S];let M=!0;for(let T=0;T<f.length;T++)i(b.p,f[T].p)&&(x!==T&&y++,M?(M=!1,h[T].push(b)):_=!0);M&&h[x].push(b)}}y>0&&_===!1&&(d=h)}let g;for(let _=0,y=f.length;_<y;_++){l=f[_].s,c.push(l),g=d[_];for(let x=0,E=g.length;x<E;x++)l.holes.push(g[x].h)}return c}}const za=Tre();function Tre(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):c<-14?(i[l]=1024>>-c-14,i[l|256]=1024>>-c-14|32768,r[l]=-c-1,r[l|256]=-c-1):c<=15?(i[l]=c+15<<10,i[l|256]=c+15<<10|32768,r[l]=13,r[l|256]=13):c<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;(c&8388608)===0;)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:n,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function Bre(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=ii(t,-65504,65504),za.floatView[0]=t;const e=za.uint32View[0],n=e>>23&511;return za.baseTable[n]+((e&8388607)>>za.shiftTable[n])}function Rre(t){const e=t>>10;return za.uint32View[0]=za.mantissaTable[za.offsetTable[e]+(t&1023)]+za.exponentTable[e],za.floatView[0]}var Pre=Object.freeze({__proto__:null,toHalfFloat:Bre,fromHalfFloat:Rre});function Dre(){console.error("THREE.ImmediateRenderObject has been removed.")}class Fre extends eo{constructor(e,n,i){console.error('THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the "samples" property to greater 0 to enable multisampling.'),super(e,n,i),this.samples=4}}class Lre extends l1{constructor(e,n,i,r){console.warn("THREE.DataTexture2DArray has been renamed to DataArrayTexture."),super(e,n,i,r)}}class kre extends Ty{constructor(e,n,i,r){console.warn("THREE.DataTexture3D has been renamed to Data3DTexture."),super(e,n,i,r)}}class Ure extends Rc{constructor(e,n,i,r,s,o){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(e,n,i,r,s,o)}}class Ore extends h1{constructor(e,n,i,r){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(e,n,i,r)}}class Nre extends f1{constructor(e,n,i,r){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(e,n,i,r)}}class Gre extends d1{constructor(e,n,i,r,s,o,a){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(e,n,i,r,s,o,a)}}class zre extends gh{constructor(e,n,i,r,s,o,a,l){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(e,n,i,r,s,o,a,l)}}class Qre extends p1{constructor(e,n){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(e,n)}}class Hre extends m1{constructor(e,n){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(e,n)}}class Vre extends A1{constructor(e,n){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(e,n)}}class Wre extends Xd{constructor(e,n,i,r){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(e,n,i,r)}}class jre extends Yd{constructor(e,n){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(e,n)}}class Xre extends Wd{constructor(e,n,i,r){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(e,n,i,r)}}class Yre extends fl{constructor(e,n,i,r){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(e,n,i,r)}}class qre extends g1{constructor(e,n,i,r,s,o){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(e,n,i,r,s,o)}}class Jre extends v1{constructor(e,n){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(e,n)}}class Kre extends qd{constructor(e,n,i,r,s,o,a){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(e,n,i,r,s,o,a)}}class Zre extends _1{constructor(e,n){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(e,n)}}class $re extends y1{constructor(e,n,i,r,s){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(e,n,i,r,s)}}class ese extends x1{constructor(e,n,i,r,s,o){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(e,n,i,r,s,o)}}class tse extends E1{constructor(e,n,i,r,s){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(e,n,i,r,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Sy}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Sy);var a6=V.ACESFilmicToneMapping=TO,nse=V.AddEquation=vu,ise=V.AddOperation=CO,rse=V.AdditiveAnimationBlendMode=jb,l6=V.AdditiveBlending=iC,sse=V.AlphaFormat=kO,ose=V.AlwaysDepth=vO,c6=V.AlwaysStencilFunc=ZO,u6=V.AmbientLight=Z8,ase=V.AmbientLightProbe=Nie,y3=V.AnimationClip=Nm,lse=V.AnimationLoader=Sie,h6=V.AnimationMixer=rre,cse=V.AnimationObjectGroup=tre,use=V.AnimationUtils=Eie,hse=V.ArcCurve=M8,fse=V.ArrayCamera=h8,dse=V.ArrowHelper=Sre,pse=V.Audio=r6,mse=V.AudioAnalyser=Wie,Ase=V.AudioContext=A3,f6=V.AudioListener=Qie,d6=V.AudioLoader=Uie,gse=V.AxesHelper=bre,Vy=V.BackSide=ds,vse=V.BasicDepthPacking=qO,_se=V.BasicShadowMap=ZJ,D_=V.Bone=t3,yse=V.BooleanKeyframeTrack=vh,xse=V.Box2=fre,di=V.Box3=mh,Ese=V.Box3Helper=Mre,wse=V.BoxBufferGeometry=Ure,Ua=V.BoxGeometry=Rc,Mse=V.BoxHelper=wre,On=V.BufferAttribute=En,ri=V.BufferGeometry=zt,Cse=V.BufferGeometryLoader=n6,NC=V.ByteType=RO,Sse=V.Cache=rh,Wy=V.Camera=Ry,bse=V.CameraHelper=Ere,x3=V.CanvasTexture=jne,Ise=V.CapsuleBufferGeometry=Ore,Tse=V.CapsuleGeometry=h1,p6=V.CatmullRomCurve3=C8,Bse=V.CineonToneMapping=IO,Rse=V.CircleBufferGeometry=Nre,Pse=V.CircleGeometry=f1,F_=V.ClampToEdgeWrapping=Sr,E3=V.Clock=i6,xt=V.Color=ot,Dse=V.ColorKeyframeTrack=d3,Fse=V.ColorManagement=ks,m6=V.CompressedTexture=w8,Lse=V.CompressedTextureLoader=bie,kse=V.ConeBufferGeometry=Gre,Use=V.ConeGeometry=d1,A6=V.CubeCamera=i8,g6=V.CubeReflectionMapping=vc,Ose=V.CubeRefractionMapping=_c,Nse=V.CubeTexture=u1,jy=V.CubeTextureLoader=Iie,Gse=V.CubeUVReflectionMapping=Hd,zse=V.CubicBezierCurve=r3,v6=V.CubicBezierCurve3=S8,Qse=V.CubicInterpolant=V8,Hse=V.CullFaceBack=nC,Vse=V.CullFaceFront=iO,Wse=V.CullFaceFrontBack=KJ,jse=V.CullFaceNone=nO,_6=V.Curve=Bo,Xse=V.CurvePath=I8,Yse=V.CustomBlending=sO,qse=V.CustomToneMapping=BO,Jse=V.CylinderBufferGeometry=zre,os=V.CylinderGeometry=gh,Kse=V.Cylindrical=hre,y6=V.Data3DTexture=Ty,Zse=V.DataArrayTexture=l1,bd=V.DataTexture=ad,$se=V.DataTexture2DArray=Lre,eoe=V.DataTexture3D=kre,x6=V.DataTextureLoader=Tie,Ip=V.DataUtils=Pre,toe=V.DecrementStencilOp=uK,noe=V.DecrementWrapStencilOp=fK,Tp=V.DefaultLoadingManager=X8,Xy=V.DepthFormat=fc,ioe=V.DepthStencilFormat=nh,Yy=V.DepthTexture=f8,w3=V.DirectionalLight=K8,roe=V.DirectionalLightHelper=xre,soe=V.DiscreteInterpolant=W8,ooe=V.DodecahedronBufferGeometry=Qre,aoe=V.DodecahedronGeometry=p1,Po=V.DoubleSide=ja,loe=V.DstAlphaFactor=fO,coe=V.DstColorFactor=pO,uoe=V.DynamicCopyUsage=bK,cs=V.DynamicDrawUsage=xK,hoe=V.DynamicReadUsage=MK,E6=V.EdgesGeometry=T8,zv=V.EllipseCurve=Ny,foe=V.EqualDepth=yO,w6=V.EqualStencilFunc=AK,M3=V.EquirectangularReflectionMapping=wm,doe=V.EquirectangularRefractionMapping=Mm,xo=V.Euler=Vd,Dc=V.EventDispatcher=hl,poe=V.ExtrudeBufferGeometry=Hre,M6=V.ExtrudeGeometry=m1,ca=V.FileLoader=sl,moe=V.Float16BufferAttribute=lZ,ur=V.Float32BufferAttribute=ut,Aoe=V.Float64BufferAttribute=cZ,Tr=V.FloatType=Xa,goe=V.Fog=ky,voe=V.FogExp2=Ly,_oe=V.FramebufferTexture=Wne,zm=V.FrontSide=th,C6=V.Frustum=Py,yoe=V.GLBufferAttribute=lre,xoe=V.GLSL1=TK,Eoe=V.GLSL3=TC,woe=V.GreaterDepth=EO,Moe=V.GreaterEqualDepth=xO,Coe=V.GreaterEqualStencilFunc=yK,Soe=V.GreaterStencilFunc=vK,S6=V.GridHelper=_re,el=V.Group=Xf,br=V.HalfFloatType=Md,boe=V.HemisphereLight=Y8,Ioe=V.HemisphereLightHelper=vre,Toe=V.HemisphereLightProbe=Oie,Boe=V.IcosahedronBufferGeometry=Vre,b6=V.IcosahedronGeometry=A1,I6=V.ImageBitmapLoader=kie,Roe=V.ImageLoader=Gm,Poe=V.ImageUtils=Yb,Doe=V.ImmediateRenderObject=Dre,Foe=V.IncrementStencilOp=cK,Loe=V.IncrementWrapStencilOp=hK,C3=V.InstancedBufferAttribute=Sd,S3=V.InstancedBufferGeometry=t6,L_=V.InstancedInterleavedBuffer=are,T6=V.InstancedMesh=y8,koe=V.Int16BufferAttribute=oZ,Uoe=V.Int32BufferAttribute=aZ,Ooe=V.Int8BufferAttribute=iZ,Qv=V.IntType=DO,B6=V.InterleavedBuffer=Uy,Zl=V.InterleavedBufferAttribute=ih,R6=V.Interpolant=w1,P6=V.InterpolateDiscrete=bm,b3=V.InterpolateLinear=Im,Noe=V.InterpolateSmooth=Uv,Goe=V.InvertStencilOp=dK,Hv=V.KeepStencilOp=Ov,zoe=V.KeyframeTrack=Ro,Qoe=V.LOD=v8,Hoe=V.LatheBufferGeometry=Wre,Voe=V.LatheGeometry=Xd,Vv=V.Layers=By,Woe=V.LessDepth=_O,joe=V.LessEqualDepth=I_,Xoe=V.LessEqualStencilFunc=gK,Yoe=V.LessStencilFunc=mK,qoe=V.Light=Pc,Joe=V.LightProbe=Qy,Yt=V.Line=Ec,Co=V.Line3=dre,Qu=V.LineBasicMaterial=Pr,Koe=V.LineCurve=Gy,Zoe=V.LineCurve3=b8,$oe=V.LineDashedMaterial=Q8,D6=V.LineLoop=x8,I3=V.LineSegments=ma,Kd=V.LinearEncoding=xc,Mi=V.LinearFilter=ni,eae=V.LinearInterpolant=f3,tae=V.LinearMipMapLinearFilter=nK,nae=V.LinearMipMapNearestFilter=tK,qy=V.LinearMipmapLinearFilter=ph,F6=V.LinearMipmapNearestFilter=Vb,iae=V.LinearSRGBColorSpace=Kl,rae=V.LinearToneMapping=SO,Zd=V.Loader=xs,So=V.LoaderUtils=UC,sae=V.LoadingManager=p3,oae=V.LoopOnce=jO,aae=V.LoopPingPong=YO,lae=V.LoopRepeat=XO,cae=V.LuminanceAlphaFormat=NO,uae=V.LuminanceFormat=OO,zs=V.MOUSE=qJ,Xp=V.Material=pr,hae=V.MaterialLoader=Hy,ct=V.MathUtils=HK,T3=V.Matrix3=Wr,Ze=V.Matrix4=Lt,fae=V.MaxEquation=aC,rt=V.Mesh=Yi,qa=V.MeshBasicMaterial=Bc,B3=V.MeshDepthMaterial=Zb,L6=V.MeshDistanceMaterial=$b,k6=V.MeshLambertMaterial=G8,dae=V.MeshMatcapMaterial=z8,pae=V.MeshNormalMaterial=N8,Yp=V.MeshPhongMaterial=U8,dl=V.MeshPhysicalMaterial=k8,$d=V.MeshStandardMaterial=c3,mae=V.MeshToonMaterial=O8,Aae=V.MinEquation=oC,U6=V.MirroredRepeatWrapping=Sm,gae=V.MixOperation=MO,vae=V.MultiplyBlending=sC,_ae=V.MultiplyOperation=a1,Ja=V.NearestFilter=ui,yae=V.NearestMipMapLinearFilter=eK,xae=V.NearestMipMapNearestFilter=$J,O6=V.NearestMipmapLinearFilter=B_,N6=V.NearestMipmapNearestFilter=T_,Eae=V.NeverDepth=gO,wae=V.NeverStencilFunc=pK,G6=V.NoBlending=$a,Mae=V.NoColorSpace=oK,z6=V.NoToneMapping=aa,Cae=V.NormalAnimationBlendMode=Iy,Sae=V.NormalBlending=Uu,bae=V.NotEqualDepth=wO,Q6=V.NotEqualStencilFunc=_K,R3=V.NumberKeyframeTrack=Um,hr=V.Object3D=an,Iae=V.ObjectLoader=Fie,Tae=V.ObjectSpaceNormalMap=KO,Bae=V.OctahedronBufferGeometry=jre,zl=V.OctahedronGeometry=Yd,Rae=V.OneFactor=cO,Pae=V.OneMinusDstAlphaFactor=dO,Dae=V.OneMinusDstColorFactor=mO,Fae=V.OneMinusSrcAlphaFactor=Hb,Lae=V.OneMinusSrcColorFactor=hO,ua=V.OrthographicCamera=Dy,kae=V.PCFShadowMap=zb,H6=V.PCFSoftShadowMap=rO,Uae=V.PMREMGenerator=RC,Oae=V.Path=Dm,Hr=V.PerspectiveCamera=Xi,yh=V.Plane=Vl,k_=V.PlaneBufferGeometry=Xre,Ko=V.PlaneGeometry=Wd,Nae=V.PlaneHelper=Cre,U_=V.PointLight=J8,Gae=V.PointLightHelper=Are,V6=V.Points=E8,P3=V.PointsMaterial=n3,zae=V.PolarGridHelper=yre,Qae=V.PolyhedronBufferGeometry=Yre,Hae=V.PolyhedronGeometry=fl,Vae=V.PositionalAudio=Vie,Id=V.PropertyBinding=nn,Wae=V.PropertyMixer=s6,jae=V.QuadraticBezierCurve=s3,W6=V.QuadraticBezierCurve3=o3,$t=V.Quaternion=qr,O_=V.QuaternionKeyframeTrack=Jd,Xae=V.QuaternionLinearInterpolant=j8,Yae=V.REVISION=Sy,j6=V.RGBADepthPacking=JO,us=V.RGBAFormat=Xs,N_=V.RGBAIntegerFormat=VO,qae=V.RGBA_ASTC_10x10_Format=CC,Jae=V.RGBA_ASTC_10x5_Format=EC,Kae=V.RGBA_ASTC_10x6_Format=wC,Zae=V.RGBA_ASTC_10x8_Format=MC,$ae=V.RGBA_ASTC_12x10_Format=SC,ele=V.RGBA_ASTC_12x12_Format=bC,X6=V.RGBA_ASTC_4x4_Format=pC,tle=V.RGBA_ASTC_5x4_Format=mC,nle=V.RGBA_ASTC_5x5_Format=AC,ile=V.RGBA_ASTC_6x5_Format=gC,rle=V.RGBA_ASTC_6x6_Format=vC,sle=V.RGBA_ASTC_8x5_Format=_C,ole=V.RGBA_ASTC_8x6_Format=yC,ale=V.RGBA_ASTC_8x8_Format=xC,Y6=V.RGBA_BPTC_Format=IC,q6=V.RGBA_ETC2_EAC_Format=dC,lle=V.RGBA_PVRTC_2BPPV1_Format=hC,J6=V.RGBA_PVRTC_4BPPV1_Format=uC,cle=V.RGBA_S3TC_DXT1_Format=Fv,ule=V.RGBA_S3TC_DXT3_Format=Lv,K6=V.RGBA_S3TC_DXT5_Format=kv,hle=V.RGBFormat=UO,Z6=V.RGB_ETC1_Format=WO,$6=V.RGB_ETC2_Format=fC,fle=V.RGB_PVRTC_2BPPV1_Format=cC,eN=V.RGB_PVRTC_4BPPV1_Format=lC,tN=V.RGB_S3TC_DXT1_Format=Dv,qf=V.RGFormat=QO,D3=V.RGIntegerFormat=HO,dle=V.RawShaderMaterial=L8,xh=V.Ray=c1,e0=V.Raycaster=cre,ple=V.RectAreaLight=$8,Jf=V.RedFormat=GO,nN=V.RedIntegerFormat=zO,mle=V.ReinhardToneMapping=bO,ol=V.RepeatWrapping=Cm,Wv=V.ReplaceStencilOp=lK,Ale=V.ReverseSubtractEquation=aO,gle=V.RingBufferGeometry=qre,vle=V.RingGeometry=g1,_le=V.SRGBColorSpace=qo,Fc=V.Scene=m8,Ri=V.ShaderChunk=Ht,qp=V.ShaderLib=Ao,As=V.ShaderMaterial=ha,yle=V.ShadowMaterial=F8,iN=V.Shape=zu,xle=V.ShapeBufferGeometry=Jre,Ele=V.ShapeGeometry=v1,rN=V.ShapePath=Ire,wle=V.ShapeUtils=la,sN=V.ShortType=PO,F3=V.Skeleton=Oy,Mle=V.SkeletonHelper=mre,L3=V.SkinnedMesh=_8,Cle=V.Source=Tu,to=V.Sphere=Ah,Sle=V.SphereBufferGeometry=Kre,oN=V.SphereGeometry=qd,Qm=V.Spherical=ure,ble=V.SphericalHarmonics3=e6,Ile=V.SplineCurve=a3,k3=V.SpotLight=q8,Tle=V.SpotLightHelper=pre,Ble=V.Sprite=g8,Rle=V.SpriteMaterial=e3,Ple=V.SrcAlphaFactor=Qb,Dle=V.SrcAlphaSaturateFactor=AO,Fle=V.SrcColorFactor=uO,Lle=V.StaticCopyUsage=SK,kle=V.StaticDrawUsage=Bm,Ule=V.StaticReadUsage=wK,Ole=V.StereoCamera=Gie,Nle=V.StreamCopyUsage=IK,Gle=V.StreamDrawUsage=EK,zle=V.StreamReadUsage=CK,Qle=V.StringKeyframeTrack=_h,Hle=V.SubtractEquation=oO,Vle=V.SubtractiveBlending=rC,Ga=V.TOUCH=JJ,aN=V.TangentSpaceNormalMap=Tc,Wle=V.TetrahedronBufferGeometry=Zre,jle=V.TetrahedronGeometry=_1,Mc=V.Texture=xi,t0=V.TextureLoader=Bie,Xle=V.TorusBufferGeometry=$re,Bp=V.TorusGeometry=y1,Yle=V.TorusKnotBufferGeometry=ese,qle=V.TorusKnotGeometry=x1,Hm=V.Triangle=Hs,U3=V.TriangleFanDrawMode=sK,lN=V.TriangleStripDrawMode=rK,Jle=V.TrianglesDrawMode=iK,Kle=V.TubeBufferGeometry=tse,Zle=V.TubeGeometry=E1,$le=V.UVMapping=by,cN=V.Uint16BufferAttribute=qb,ece=V.Uint32BufferAttribute=Jb,tce=V.Uint8BufferAttribute=rZ,nce=V.Uint8ClampedBufferAttribute=sZ,Gr=V.Uniform=_3,ice=V.UniformsGroup=ore,ld=V.UniformsLib=et,Eh=V.UniformsUtils=n8,Zo=V.UnsignedByteType=yc,rce=V.UnsignedInt248Type=Ou,cd=V.UnsignedIntType=Jl,sce=V.UnsignedShort4444Type=FO,oce=V.UnsignedShort5551Type=LO,M1=V.UnsignedShortType=Wb,ace=V.VSMShadowMap=Vf,mt=V.Vector2=Ve,$=V.Vector3=te,dr=V.Vector4=An,O3=V.VectorKeyframeTrack=Om,uN=V.VideoTexture=Vne,lce=V.WebGL1Renderer=p8,cce=V.WebGL3DRenderTarget=XK,uce=V.WebGLArrayRenderTarget=jK,Jy=V.WebGLCubeRenderTarget=r8,hce=V.WebGLMultipleRenderTargets=YK,fce=V.WebGLMultisampleRenderTarget=Fre,gs=V.WebGLRenderTarget=eo,hN=V.WebGLRenderer=d8,dce=V.WebGLUtils=u8,fN=V.WireframeGeometry=D8,pce=V.WrapAroundEnding=Tm,mce=V.ZeroCurvatureEnding=bu,Ace=V.ZeroFactor=lO,gce=V.ZeroSlopeEnding=Iu,vce=V.ZeroStencilOp=aK,_ce=V._SRGBAFormat=R_,yi=V.sRGBEncoding=Ln;const Vm=C7({__proto__:null,ACESFilmicToneMapping:a6,AddEquation:nse,AddOperation:ise,AdditiveAnimationBlendMode:rse,AdditiveBlending:l6,AlphaFormat:sse,AlwaysDepth:ose,AlwaysStencilFunc:c6,AmbientLight:u6,AmbientLightProbe:ase,AnimationClip:y3,AnimationLoader:lse,AnimationMixer:h6,AnimationObjectGroup:cse,AnimationUtils:use,ArcCurve:hse,ArrayCamera:fse,ArrowHelper:dse,Audio:pse,AudioAnalyser:mse,AudioContext:Ase,AudioListener:f6,AudioLoader:d6,AxesHelper:gse,BackSide:Vy,BasicDepthPacking:vse,BasicShadowMap:_se,Bone:D_,BooleanKeyframeTrack:yse,Box2:xse,Box3:di,Box3Helper:Ese,BoxBufferGeometry:wse,BoxGeometry:Ua,BoxHelper:Mse,BufferAttribute:On,BufferGeometry:ri,BufferGeometryLoader:Cse,ByteType:NC,Cache:Sse,Camera:Wy,CameraHelper:bse,CanvasTexture:x3,CapsuleBufferGeometry:Ise,CapsuleGeometry:Tse,CatmullRomCurve3:p6,CineonToneMapping:Bse,CircleBufferGeometry:Rse,CircleGeometry:Pse,ClampToEdgeWrapping:F_,Clock:E3,Color:xt,ColorKeyframeTrack:Dse,ColorManagement:Fse,CompressedTexture:m6,CompressedTextureLoader:Lse,ConeBufferGeometry:kse,ConeGeometry:Use,CubeCamera:A6,CubeReflectionMapping:g6,CubeRefractionMapping:Ose,CubeTexture:Nse,CubeTextureLoader:jy,CubeUVReflectionMapping:Gse,CubicBezierCurve:zse,CubicBezierCurve3:v6,CubicInterpolant:Qse,CullFaceBack:Hse,CullFaceFront:Vse,CullFaceFrontBack:Wse,CullFaceNone:jse,Curve:_6,CurvePath:Xse,CustomBlending:Yse,CustomToneMapping:qse,CylinderBufferGeometry:Jse,CylinderGeometry:os,Cylindrical:Kse,Data3DTexture:y6,DataArrayTexture:Zse,DataTexture:bd,DataTexture2DArray:$se,DataTexture3D:eoe,DataTextureLoader:x6,DataUtils:Ip,DecrementStencilOp:toe,DecrementWrapStencilOp:noe,DefaultLoadingManager:Tp,DepthFormat:Xy,DepthStencilFormat:ioe,DepthTexture:Yy,DirectionalLight:w3,DirectionalLightHelper:roe,DiscreteInterpolant:soe,DodecahedronBufferGeometry:ooe,DodecahedronGeometry:aoe,DoubleSide:Po,DstAlphaFactor:loe,DstColorFactor:coe,DynamicCopyUsage:uoe,DynamicDrawUsage:cs,DynamicReadUsage:hoe,EdgesGeometry:E6,EllipseCurve:zv,EqualDepth:foe,EqualStencilFunc:w6,EquirectangularReflectionMapping:M3,EquirectangularRefractionMapping:doe,Euler:xo,EventDispatcher:Dc,ExtrudeBufferGeometry:poe,ExtrudeGeometry:M6,FileLoader:ca,Float16BufferAttribute:moe,Float32BufferAttribute:ur,Float64BufferAttribute:Aoe,FloatType:Tr,Fog:goe,FogExp2:voe,FramebufferTexture:_oe,FrontSide:zm,Frustum:C6,GLBufferAttribute:yoe,GLSL1:xoe,GLSL3:Eoe,GreaterDepth:woe,GreaterEqualDepth:Moe,GreaterEqualStencilFunc:Coe,GreaterStencilFunc:Soe,GridHelper:S6,Group:el,HalfFloatType:br,HemisphereLight:boe,HemisphereLightHelper:Ioe,HemisphereLightProbe:Toe,IcosahedronBufferGeometry:Boe,IcosahedronGeometry:b6,ImageBitmapLoader:I6,ImageLoader:Roe,ImageUtils:Poe,ImmediateRenderObject:Doe,IncrementStencilOp:Foe,IncrementWrapStencilOp:Loe,InstancedBufferAttribute:C3,InstancedBufferGeometry:S3,InstancedInterleavedBuffer:L_,InstancedMesh:T6,Int16BufferAttribute:koe,Int32BufferAttribute:Uoe,Int8BufferAttribute:Ooe,IntType:Qv,InterleavedBuffer:B6,InterleavedBufferAttribute:Zl,Interpolant:R6,InterpolateDiscrete:P6,InterpolateLinear:b3,InterpolateSmooth:Noe,InvertStencilOp:Goe,KeepStencilOp:Hv,KeyframeTrack:zoe,LOD:Qoe,LatheBufferGeometry:Hoe,LatheGeometry:Voe,Layers:Vv,LessDepth:Woe,LessEqualDepth:joe,LessEqualStencilFunc:Xoe,LessStencilFunc:Yoe,Light:qoe,LightProbe:Joe,Line:Yt,Line3:Co,LineBasicMaterial:Qu,LineCurve:Koe,LineCurve3:Zoe,LineDashedMaterial:$oe,LineLoop:D6,LineSegments:I3,LinearEncoding:Kd,LinearFilter:Mi,LinearInterpolant:eae,LinearMipMapLinearFilter:tae,LinearMipMapNearestFilter:nae,LinearMipmapLinearFilter:qy,LinearMipmapNearestFilter:F6,LinearSRGBColorSpace:iae,LinearToneMapping:rae,Loader:Zd,LoaderUtils:So,LoadingManager:sae,LoopOnce:oae,LoopPingPong:aae,LoopRepeat:lae,LuminanceAlphaFormat:cae,LuminanceFormat:uae,MOUSE:zs,Material:Xp,MaterialLoader:hae,MathUtils:ct,Matrix3:T3,Matrix4:Ze,MaxEquation:fae,Mesh:rt,MeshBasicMaterial:qa,MeshDepthMaterial:B3,MeshDistanceMaterial:L6,MeshLambertMaterial:k6,MeshMatcapMaterial:dae,MeshNormalMaterial:pae,MeshPhongMaterial:Yp,MeshPhysicalMaterial:dl,MeshStandardMaterial:$d,MeshToonMaterial:mae,MinEquation:Aae,MirroredRepeatWrapping:U6,MixOperation:gae,MultiplyBlending:vae,MultiplyOperation:_ae,NearestFilter:Ja,NearestMipMapLinearFilter:yae,NearestMipMapNearestFilter:xae,NearestMipmapLinearFilter:O6,NearestMipmapNearestFilter:N6,NeverDepth:Eae,NeverStencilFunc:wae,NoBlending:G6,NoColorSpace:Mae,NoToneMapping:z6,NormalAnimationBlendMode:Cae,NormalBlending:Sae,NotEqualDepth:bae,NotEqualStencilFunc:Q6,NumberKeyframeTrack:R3,Object3D:hr,ObjectLoader:Iae,ObjectSpaceNormalMap:Tae,OctahedronBufferGeometry:Bae,OctahedronGeometry:zl,OneFactor:Rae,OneMinusDstAlphaFactor:Pae,OneMinusDstColorFactor:Dae,OneMinusSrcAlphaFactor:Fae,OneMinusSrcColorFactor:Lae,OrthographicCamera:ua,PCFShadowMap:kae,PCFSoftShadowMap:H6,PMREMGenerator:Uae,Path:Oae,PerspectiveCamera:Hr,Plane:yh,PlaneBufferGeometry:k_,PlaneGeometry:Ko,PlaneHelper:Nae,PointLight:U_,PointLightHelper:Gae,Points:V6,PointsMaterial:P3,PolarGridHelper:zae,PolyhedronBufferGeometry:Qae,PolyhedronGeometry:Hae,PositionalAudio:Vae,PropertyBinding:Id,PropertyMixer:Wae,QuadraticBezierCurve:jae,QuadraticBezierCurve3:W6,Quaternion:$t,QuaternionKeyframeTrack:O_,QuaternionLinearInterpolant:Xae,REVISION:Yae,RGBADepthPacking:j6,RGBAFormat:us,RGBAIntegerFormat:N_,RGBA_ASTC_10x10_Format:qae,RGBA_ASTC_10x5_Format:Jae,RGBA_ASTC_10x6_Format:Kae,RGBA_ASTC_10x8_Format:Zae,RGBA_ASTC_12x10_Format:$ae,RGBA_ASTC_12x12_Format:ele,RGBA_ASTC_4x4_Format:X6,RGBA_ASTC_5x4_Format:tle,RGBA_ASTC_5x5_Format:nle,RGBA_ASTC_6x5_Format:ile,RGBA_ASTC_6x6_Format:rle,RGBA_ASTC_8x5_Format:sle,RGBA_ASTC_8x6_Format:ole,RGBA_ASTC_8x8_Format:ale,RGBA_BPTC_Format:Y6,RGBA_ETC2_EAC_Format:q6,RGBA_PVRTC_2BPPV1_Format:lle,RGBA_PVRTC_4BPPV1_Format:J6,RGBA_S3TC_DXT1_Format:cle,RGBA_S3TC_DXT3_Format:ule,RGBA_S3TC_DXT5_Format:K6,RGBFormat:hle,RGB_ETC1_Format:Z6,RGB_ETC2_Format:$6,RGB_PVRTC_2BPPV1_Format:fle,RGB_PVRTC_4BPPV1_Format:eN,RGB_S3TC_DXT1_Format:tN,RGFormat:qf,RGIntegerFormat:D3,RawShaderMaterial:dle,Ray:xh,Raycaster:e0,RectAreaLight:ple,RedFormat:Jf,RedIntegerFormat:nN,ReinhardToneMapping:mle,RepeatWrapping:ol,ReplaceStencilOp:Wv,ReverseSubtractEquation:Ale,RingBufferGeometry:gle,RingGeometry:vle,SRGBColorSpace:_le,Scene:Fc,ShaderChunk:Ri,ShaderLib:qp,ShaderMaterial:As,ShadowMaterial:yle,Shape:iN,ShapeBufferGeometry:xle,ShapeGeometry:Ele,ShapePath:rN,ShapeUtils:wle,ShortType:sN,Skeleton:F3,SkeletonHelper:Mle,SkinnedMesh:L3,Source:Cle,Sphere:to,SphereBufferGeometry:Sle,SphereGeometry:oN,Spherical:Qm,SphericalHarmonics3:ble,SplineCurve:Ile,SpotLight:k3,SpotLightHelper:Tle,Sprite:Ble,SpriteMaterial:Rle,SrcAlphaFactor:Ple,SrcAlphaSaturateFactor:Dle,SrcColorFactor:Fle,StaticCopyUsage:Lle,StaticDrawUsage:kle,StaticReadUsage:Ule,StereoCamera:Ole,StreamCopyUsage:Nle,StreamDrawUsage:Gle,StreamReadUsage:zle,StringKeyframeTrack:Qle,SubtractEquation:Hle,SubtractiveBlending:Vle,TOUCH:Ga,TangentSpaceNormalMap:aN,TetrahedronBufferGeometry:Wle,TetrahedronGeometry:jle,Texture:Mc,TextureLoader:t0,TorusBufferGeometry:Xle,TorusGeometry:Bp,TorusKnotBufferGeometry:Yle,TorusKnotGeometry:qle,Triangle:Hm,TriangleFanDrawMode:U3,TriangleStripDrawMode:lN,TrianglesDrawMode:Jle,TubeBufferGeometry:Kle,TubeGeometry:Zle,UVMapping:$le,Uint16BufferAttribute:cN,Uint32BufferAttribute:ece,Uint8BufferAttribute:tce,Uint8ClampedBufferAttribute:nce,Uniform:Gr,UniformsGroup:ice,UniformsLib:ld,UniformsUtils:Eh,UnsignedByteType:Zo,UnsignedInt248Type:rce,UnsignedIntType:cd,UnsignedShort4444Type:sce,UnsignedShort5551Type:oce,UnsignedShortType:M1,VSMShadowMap:ace,Vector2:mt,Vector3:$,Vector4:dr,VectorKeyframeTrack:O3,VideoTexture:uN,WebGL1Renderer:lce,WebGL3DRenderTarget:cce,WebGLArrayRenderTarget:uce,WebGLCubeRenderTarget:Jy,WebGLMultipleRenderTargets:hce,WebGLMultisampleRenderTarget:fce,WebGLRenderTarget:gs,WebGLRenderer:hN,WebGLUtils:dce,WireframeGeometry:fN,WrapAroundEnding:pce,ZeroCurvatureEnding:mce,ZeroFactor:Ace,ZeroSlopeEnding:gce,ZeroStencilOp:vce,_SRGBAFormat:_ce,sRGBEncoding:yi,default:V},[V]);Object.defineProperty(fi,"__esModule",{value:!0});fi.THREE=void 0;const yce=V;fi.THREE=yce;var C1={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.glContextLost=t.glContextSet=t.HTMLElementSource=t.CameraSource=t.InstantWorldTracker=t.FaceTracker=t.BarcodeFinder=t.ImageTracker=t.getDefaultPipeline=t.onFrameUpdate=void 0;const e=fh,n=Io;let i;t.onFrameUpdate=new n.Event;function r(){return i||(i=new e.Pipeline,i.onFrameUpdate.bind(()=>t.onFrameUpdate.emit())),i}t.getDefaultPipeline=r;class s extends e.ImageTracker{constructor(p,m){super(m||r(),p)}}t.ImageTracker=s;class o extends e.BarcodeFinder{constructor(p){super(p||r())}}t.BarcodeFinder=o;class a extends e.FaceTracker{constructor(p){super(p||r())}}t.FaceTracker=a;class l extends e.InstantWorldTracker{constructor(p){super(p||r())}}t.InstantWorldTracker=l;class c extends e.CameraSource{constructor(p,m){super(m||r(),p)}}t.CameraSource=c;class u extends e.HTMLElementSource{constructor(p,m){super(m||r(),p)}}t.HTMLElementSource=u;function h(d){r().glContextSet(d)}t.glContextSet=h;function f(){r().glContextLost()}t.glContextLost=f})(C1);var ep={},pD;function dN(){if(pD)return ep;pD=1,Object.defineProperty(ep,"__esModule",{value:!0}),ep.CameraTexture=void 0;const t=n0(),e=fi;class n extends e.THREE.Texture{constructor(){super(...arguments),this.MirrorMode=t.CameraMirrorMode.None,this.isVideoTexture=!0}update(){}updateFromPipeline(r,s){this.encoding=r.outputEncoding,s.cameraFrameUploadGL();const o=s.cameraFrameTextureGL();if(!o)return;const a=r.properties.get(this);a.__webglTexture=o,a.__webglInit=!0;const l=new e.THREE.Matrix4;l.fromArray(s.cameraFrameTextureMatrix(r.domElement.width,r.domElement.height,this.MirrorMode===t.CameraMirrorMode.Poses));const c=new e.THREE.Matrix3;c.setFromMatrix4(l),c.elements[6]=l.elements[12],c.elements[7]=l.elements[13],c.elements[8]=1,this.matrixAutoUpdate=!1,this.matrix=c}}return ep.CameraTexture=n,ep}var mD;function n0(){return mD||(mD=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Camera=t.CameraMirrorMode=t.CameraPoseMode=void 0;const e=fh,n=fi,i=C1,r=dN();var s;(function(c){c[c.Default=0]="Default",c[c.Attitude=1]="Attitude",c[c.AnchorOrigin=2]="AnchorOrigin"})(s=t.CameraPoseMode||(t.CameraPoseMode={}));var o;(function(c){c[c.None=0]="None",c[c.Poses=1]="Poses",c[c.CSS=2]="CSS"})(o=t.CameraMirrorMode||(t.CameraMirrorMode={}));var a;(function(c){c[c.None=0]="None",c[c.User=1]="User",c[c.Rear=2]="Rear"})(a||(a={}));class l extends n.THREE.Camera{constructor(u){super(),this.poseMode=s.Default,this.rearCameraMirrorMode=o.None,this.userCameraMirrorMode=o.Poses,this._currentMirrorMode=o.None,this.isPerspectiveCamera=!0,this.cameraDirection=a.None,this.hasSetCSSScaleX=!1,this.renderWidth=0,this.renderHeight=0,this.pipeline=u instanceof e.Pipeline?u:(u==null?void 0:u.pipeline)||(0,i.getDefaultPipeline)(),this.rawPose=this.pipeline.cameraPoseDefault(),u&&!(u instanceof e.Pipeline)?(this.zNear=u.zNear?u.zNear:.1,this.zFar=u.zFar?u.zFar:100,this.rearCameraSource=this.cameraSourceFromOpts(u.rearCameraSource),this.userCameraSource=this.cameraSourceFromOpts(u.userCameraSource,!0),this.backgroundTexture=u.backgroundTexture?u.backgroundTexture:new r.CameraTexture):(this.rearCameraSource=new i.CameraSource(e.cameraDefaultDeviceID(),this.pipeline),this.userCameraSource=new i.CameraSource(e.cameraDefaultDeviceID(!0),this.pipeline),this.backgroundTexture=new r.CameraTexture),this.matrixAutoUpdate=!1,document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"?this.resume():this.pause()})}cameraSourceFromOpts(u,h=!1){return u instanceof Element?new e.HTMLElementSource(this.pipeline,u):new i.CameraSource(u||e.cameraDefaultDeviceID(h),this.pipeline)}pause(){this.userCameraSource.pause(),this.rearCameraSource.pause()}resume(){switch(this.cameraDirection){case a.User:this.userCameraSource.start();break;case a.Rear:this.rearCameraSource.start();break}}start(u){this.cameraDirection=u?a.User:a.Rear,this.resume()}stop(){this.cameraDirection=a.None,this.pause()}setPoseModeAnchorOrigin(u){this.poseAnchorOrigin=u,this.poseMode=s.AnchorOrigin}get currentMirrorMode(){return this._currentMirrorMode}updateFrame(u){this.pipeline.processGL(),this.pipeline.frameUpdate(),this._currentMirrorMode=this.pipeline.cameraFrameUserFacing()?this.userCameraMirrorMode:this.rearCameraMirrorMode;const{domElement:h}=u;switch(this.currentMirrorMode!==o.CSS&&this.hasSetCSSScaleX?(h.style.transform="",this.hasSetCSSScaleX=!1):this.currentMirrorMode===o.CSS&&!this.hasSetCSSScaleX&&(h.style.transform="scaleX(-1)",this.hasSetCSSScaleX=!0),this.renderWidth=u.domElement.width,this.renderHeight=u.domElement.height,this._updateProjectionMatrix(),this.poseMode){case s.Default:this.rawPose=this.pipeline.cameraPoseDefault();break;case s.Attitude:this.rawPose=this.pipeline.cameraPoseWithAttitude(this.currentMirrorMode===o.Poses);break;case s.AnchorOrigin:this.rawPose=this.poseAnchorOrigin?this.getOriginPose():this.pipeline.cameraPoseDefault();break;default:this.rawPose=this.pipeline.cameraPoseDefault();break}this.matrixWorldNeedsUpdate=!0,this.backgroundTexture.MirrorMode=this.currentMirrorMode,this.backgroundTexture.updateFromPipeline(u,this.pipeline)}_updateProjectionMatrix(){const u=this.pipeline.cameraModel(),h=e.projectionMatrixFromCameraModel(u,this.renderWidth,this.renderHeight,this.zNear,this.zFar);this.projectionMatrix.fromArray(h),typeof this.projectionMatrixInverse.invert=="function"?this.projectionMatrixInverse.copy(this.projectionMatrix).invert():this.projectionMatrixInverse.getInverse(this.projectionMatrix)}updateMatrixWorld(u){this.matrix.fromArray(this.rawPose),this.matrix.decompose(this.position,this.quaternion,this.scale),super.updateMatrixWorld(u)}getOriginPose(){return this.poseAnchorOrigin?this.pipeline.cameraPoseWithOrigin(this.poseAnchorOrigin.poseCameraRelative(this.currentMirrorMode===o.Poses)):this.pipeline.cameraPoseDefault()}dispose(){this.rearCameraSource.destroy(),this.userCameraSource.destroy()}}t.Camera=l}(Z2)),Z2}var Ky={};Object.defineProperty(Ky,"__esModule",{value:!0});Ky.ImageAnchorGroup=void 0;const xce=fi,Ece=n0();class wce extends xce.THREE.Group{constructor(e,n,i){super(),this.camera=e,this.imageTracker=n,this.anchorId=i,this.isReady=!1,this.matrixAutoUpdate=!1}updateMatrixWorld(e){(!this.currentAnchor||!this.imageTracker.visible.has(this.currentAnchor))&&(this.anchorId?this.currentAnchor=this.imageTracker.anchors.get(this.anchorId):this.currentAnchor=this.imageTracker.visible.values().next().value),this.currentAnchor&&(this.matrix.fromArray(this.currentAnchor.pose(this.camera.rawPose,this.camera.currentMirrorMode===Ece.CameraMirrorMode.Poses)),this.matrix.decompose(this.position,this.quaternion,this.scale)),super.updateMatrixWorld(e)}}Ky.ImageAnchorGroup=wce;var Zy={};Object.defineProperty(Zy,"__esModule",{value:!0});Zy.ImageTrackerLoader=void 0;const Mce=fi,Cce=C1;class Sce extends Mce.THREE.Loader{load(e,n,i,r){const s=new Cce.ImageTracker;return s.loadTarget(e).then(()=>{n==null||n(s),this.manager.itemEnd(e)}).catch(o=>{r==null||r(o),this.manager.itemError(e),this.manager.itemEnd(e)}),s}parse(){}}Zy.ImageTrackerLoader=Sce;var $y={};Object.defineProperty($y,"__esModule",{value:!0});$y.InstantWorldAnchorGroup=void 0;const bce=fi,Ice=n0();class Tce extends bce.THREE.Group{constructor(e,n){super(),this.camera=e,this.instantTracker=n,this.matrixAutoUpdate=!1}setAnchorPoseFromCameraOffset(e,n,i,r){this.instantTracker.setAnchorPoseFromCameraOffset(e,n,i,r)}updateMatrixWorld(e){this.matrix.fromArray(this.instantTracker.anchor.pose(this.camera.rawPose,this.camera.currentMirrorMode===Ice.CameraMirrorMode.Poses)),this.matrix.decompose(this.position,this.quaternion,this.scale),super.updateMatrixWorld(e)}}$y.InstantWorldAnchorGroup=Tce;var ex={};Object.defineProperty(ex,"__esModule",{value:!0});ex.FaceAnchorGroup=void 0;const Bce=fi,Rce=n0();class Pce extends Bce.THREE.Group{constructor(e,n,i){super(),this.camera=e,this.faceTracker=n,this.anchorId=i,this.isReady=!1,this.matrixAutoUpdate=!1}updateMatrixWorld(e){(!this.currentAnchor||!this.faceTracker.visible.has(this.currentAnchor))&&(this.anchorId?this.currentAnchor=this.faceTracker.anchors.get(this.anchorId):this.currentAnchor=this.faceTracker.visible.values().next().value),this.currentAnchor&&(this.matrix.fromArray(this.currentAnchor.pose(this.camera.rawPose,this.camera.currentMirrorMode===Rce.CameraMirrorMode.Poses)),this.matrix.decompose(this.position,this.quaternion,this.scale)),super.updateMatrixWorld(e)}}ex.FaceAnchorGroup=Pce;var tx={};Object.defineProperty(tx,"__esModule",{value:!0});tx.FaceLandmarkGroup=void 0;const Dce=fh,AD=Gb,Fce=fi,gD=n0();class Lce extends Fce.THREE.Group{constructor(e,n,i){super(),this.camera=e,this.faceTracker=n,this.pose=AD.mat4.create(),this.landmark=new Dce.FaceLandmark(i),this.matrixAutoUpdate=!1}updateMatrixWorld(e){(!this.currentAnchor||!this.faceTracker.visible.has(this.currentAnchor))&&(this.currentAnchor=this.faceTracker.visible.values().next().value),this.currentAnchor&&(this.landmark.updateFromFaceAnchor(this.currentAnchor,this.camera.currentMirrorMode===gD.CameraMirrorMode.Poses),AD.mat4.multiply(this.pose,this.currentAnchor.pose(this.camera.rawPose,this.camera.currentMirrorMode===gD.CameraMirrorMode.Poses),this.landmark.pose),this.matrix.fromArray(this.pose),this.matrix.decompose(this.position,this.quaternion,this.scale)),super.updateMatrixWorld(e)}dispose(){this.landmark.destroy()}}tx.FaceLandmarkGroup=Lce;var nx={};Object.defineProperty(nx,"__esModule",{value:!0});nx.FaceTrackerLoader=void 0;const kce=fi,Uce=C1;class Oce extends kce.THREE.Loader{load(e,n,i,r){const s=new Uce.FaceTracker,o=e?s.loadModel(e):s.loadDefaultModel(),a=typeof e=="string"?e:"__zappar_threejs_face_tracker_default";return o.then(()=>{n==null||n(s),this.manager.itemEnd(a)}).catch(l=>{r==null||r(l),this.manager.itemError(a),this.manager.itemEnd(a)}),s}parse(){}}nx.FaceTrackerLoader=Oce;var S1={},b1={};Object.defineProperty(b1,"__esModule",{value:!0});b1.FaceMeshLoader=void 0;const QE=fh,Nce=fi;class Gce extends Nce.THREE.Loader{load(e,n,i,r){const s=new QE.FaceMesh;let o;const a=`__zappar_threejs_face_mesh_${JSON.stringify(e||"default")}`;return this.manager.itemStart(a),e?typeof e=="string"?o=s.load(e):e.customModel?o=s.load(e.customModel,e.fillMouth,e.fillEyeLeft,e.fillEyeRight,e.fillNeck):o=s.loadDefaultFace(e.fillMouth,e.fillEyeLeft,e.fillEyeRight):o=s.loadDefaultFace(),o.then(()=>{n==null||n(s),this.manager.itemEnd(a)}).catch(l=>{r==null||r(l),this.manager.itemError(a),this.manager.itemEnd(a)}),s}loadFace(e,n,i,r){const s=new QE.FaceMesh;let o;const a=`__zappar_threejs_face_mesh_face_${JSON.stringify(e||"default")}`;return e?e.customModel?o=s.load(e.customModel,e.fillMouth,e.fillEyeLeft,e.fillEyeRight,e.fillNeck):o=s.loadDefaultFace(e.fillMouth,e.fillEyeLeft,e.fillEyeRight):o=s.loadDefaultFace(),o.then(()=>{n==null||n(s),this.manager.itemEnd(a)}).catch(l=>{r==null||r(l),this.manager.itemError(a),this.manager.itemEnd(a)}),s}loadFullHeadSimplified(e,n,i,r){const s=new QE.FaceMesh;let o;const a=`__zappar_threejs_face_mesh_full_head_${JSON.stringify(e||"default")}`;return e?e.customModel?o=s.load(e.customModel,e.fillMouth,e.fillEyeLeft,e.fillEyeRight,e.fillNeck):o=s.loadDefaultFullHeadSimplified(e.fillMouth,e.fillEyeLeft,e.fillEyeRight,e.fillNeck):o=s.loadDefaultFullHeadSimplified(),o.then(()=>{n==null||n(s),this.manager.itemEnd(a)}).catch(l=>{r==null||r(l),this.manager.itemError(a),this.manager.itemEnd(a)}),s}parse(){}}b1.FaceMeshLoader=Gce;Object.defineProperty(S1,"__esModule",{value:!0});S1.FaceBufferGeometry=void 0;const kl=fi,zce=b1;let HE;class Qce extends kl.THREE.BufferGeometry{constructor(e){super(),this.hasSetIndices=!1,this.hasSetUVs=!1,this.recalculateNormals=!0,this.setIndex([]),this.setAttribute("position",new kl.THREE.Float32BufferAttribute([],3)),this.setAttribute("normal",new kl.THREE.Float32BufferAttribute([],3)),this.setAttribute("uv",new kl.THREE.Float32BufferAttribute([],2)),e||(HE||(HE=new zce.FaceMeshLoader().load()),e=HE),this._faceMesh=e}_updateIndices(){this.hasSetIndices||this._faceMesh.indices.length!==0&&(this.setIndex(new kl.THREE.Uint16BufferAttribute(this._faceMesh.indices,1)),this.hasSetIndices=!0)}_updateUVs(){this.hasSetUVs||this._faceMesh.uvs.length!==0&&(this.setAttribute("uv",new kl.THREE.BufferAttribute(this._faceMesh.uvs,2)),this.hasSetUVs=!0)}get calculateNormals(){return this.recalculateNormals}set calculateNormals(e){this.recalculateNormals=e,this.recalculateNormals||(typeof this.removeAttribute=="function"&&this.removeAttribute("normal"),delete this.normals)}updateFromFaceAnchorGroup(e){this._faceMesh.vertices.length!==0&&(!e.currentAnchor||this.updateFromFaceAnchor(e.currentAnchor))}updateFromFaceAnchor(e){this.updateFromIdentityExpression(e.identity,e.expression)}updateFromIdentityExpression(e,n){this._faceMesh.vertices.length!==0&&(this._updateIndices(),this._updateUVs(),this._faceMesh.updateFromIdentityExpression(e,n),this.vertices||(this.vertices=new Float32Array(this._faceMesh.vertices.length),this.verticesAttribute=new kl.THREE.BufferAttribute(this.vertices,3),this.setAttribute("position",this.verticesAttribute)),this.vertices.set(this._faceMesh.vertices),this.verticesAttribute&&(this.verticesAttribute.needsUpdate=!0),this.computeBoundingSphere(),this.calculateNormals&&(this.normals||(this.normals=new Float32Array(this._faceMesh.normals.length),this.normalsAttribute=new kl.THREE.BufferAttribute(this.normals,3),this.setAttribute("normal",this.normalsAttribute)),this.normals.set(this._faceMesh.normals),this.normalsAttribute&&(this.normalsAttribute.needsUpdate=!0)))}}S1.FaceBufferGeometry=Qce;var I1={};Object.defineProperty(I1,"__esModule",{value:!0});I1.HeadMaskMesh=void 0;const Hce=fh,vD=fi,Vce=S1;class Wce extends vD.THREE.Mesh{constructor(e,n){super(),this.onLoad=e,this.onError=n,this.faceMesh=new Hce.FaceMesh,this.faceBufferGeometry=new Vce.FaceBufferGeometry(this.faceMesh),this.geometry=this.faceBufferGeometry,this.material=new vD.THREE.MeshBasicMaterial({colorWrite:!1}),this.faceMesh.loadDefaultFullHeadSimplified(!0,!0,!0,!0).then(()=>{var i;return(i=this.onLoad)===null||i===void 0?void 0:i.call(this)}).catch(()=>{var i;return(i=this.onError)===null||i===void 0?void 0:i.call(this)}),this.renderOrder=Number.MIN_SAFE_INTEGER}updateFromFaceAnchorGroup(e){this.faceBufferGeometry.updateFromFaceAnchorGroup(e)}updateFromFaceAnchor(e){this.faceBufferGeometry.updateFromFaceAnchor(e)}updateFromIdentityExpression(e,n){this.faceBufferGeometry.updateFromIdentityExpression(e,n)}dispose(){this.faceMesh.destroy(),this.faceBufferGeometry.dispose()}}I1.HeadMaskMesh=Wce;var ix={};Object.defineProperty(ix,"__esModule",{value:!0});ix.HeadMaskMeshLoader=void 0;const jce=fi,Xce=I1,Pg="__zappar_threejs_head_mask_mesh";class Yce extends jce.THREE.Loader{load(e,n,i){return this.manager.itemStart(Pg),new Xce.HeadMaskMesh(()=>{e==null||e(),this.manager.itemEnd(Pg)},()=>{i==null||i(),this.manager.itemError(Pg),this.manager.itemEnd(Pg)})}parse(){}}ix.HeadMaskMeshLoader=Yce;var tp={},_D;function pN(){if(_D)return tp;_D=1,Object.defineProperty(tp,"__esModule",{value:!0}),tp.LibraryLoader=void 0;const t=Es(),e=fi,n="__zappar_threejs_library";class i extends e.THREE.Loader{load(s,o,a){this.manager.itemStart(n),(0,t.loadedPromise)().then(()=>{s==null||s(),this.manager.itemEnd(n)}).catch(l=>{a==null||a(),this.manager.itemError(n),this.manager.itemEnd(n)})}parse(){}}return tp.LibraryLoader=i,tp}var su={},yD;function qce(){if(yD)return su;yD=1,Object.defineProperty(su,"__esModule",{value:!0}),su.LoadingManager=su.DefaultLoaderUI=void 0;const t=fi,e=pN();class n{constructor(o){this.lastLoadPercentage=0,this.divs={inner:document.createElement("div"),title:document.createElement("div"),progress:document.createElement("div"),progressValue:document.createElement("div")},this.css={container:{position:"fixed",width:"100%",height:"100%",top:"0px",left:"0px",zIndex:"10000",backgroundColor:"rgba(0,0,0,0.8)",fontFamily:"sans-serif",color:"rgba(255,255,255,1)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",transition:"opacity 500ms"},inner:{maxWidth:"400px",textAlign:"center"},title:{fontSize:"20px"},progress:{background:"rgba(255,255,255, 0.1)",justifyContent:"flex-start",borderRadius:"100px",alignItems:"center",position:"relative",padding:"0 5px",display:"flex",height:"15px",width:"250px",margin:"15px"},progressValue:{boxShadow:"0 10px 40px -10px #fff",borderTopLeftRadius:"100px",borderBottomLeftRadius:"100px",background:"rgba(255,255,255,1)",height:"10px",width:"0",transition:"width 500ms"}},this.updateLoader=a=>{if(a<this.lastLoadPercentage)return;this.lastLoadPercentage=a;const l=document.getElementById("zappar-loader-progressValue");l.style.width=`${a}%`,l.style.borderTopRightRadius=`${a}px`,l.style.borderBottomRightRadius=`${a}px`,l.addEventListener("transitionend",()=>{a===100&&(this.containerDiv.style.opacity="0",this.containerDiv.addEventListener("transitionend",c=>{c.propertyName==="opacity"&&this.dispose()}))})},this.dispose=()=>{this.containerDiv.remove()},this.customStyle=o,this.containerDiv=document.createElement("div")}initialize(){for(const o in this.divs)this.divs[o].id=`zappar-loader-${o}`;this.refreshStyle(),this.divs.inner.appendChild(this.divs.title),this.divs.inner.appendChild(this.divs.progress),this.divs.progress.appendChild(this.divs.progressValue),this.containerDiv.appendChild(this.divs.inner),this.divs.title.innerHTML="Loading...",document.body.append(this.containerDiv)}refreshStyle(){var o,a,l,c,u;Object.assign(this.css.container,(o=this.customStyle)===null||o===void 0?void 0:o.container),Object.assign(this.css.inner,(a=this.customStyle)===null||a===void 0?void 0:a.inner),Object.assign(this.css.title,(l=this.customStyle)===null||l===void 0?void 0:l.title),Object.assign(this.css.progress,(c=this.customStyle)===null||c===void 0?void 0:c.progress),Object.assign(this.css.progressValue,(u=this.customStyle)===null||u===void 0?void 0:u.progressValue),Object.assign(this.containerDiv.style,this.css.container),Object.assign(this.divs.inner.style,this.css.inner),Object.assign(this.divs.title.style,this.css.title),Object.assign(this.divs.progress.style,this.css.progress),Object.assign(this.divs.progressValue.style,this.css.progressValue)}}class i extends n{constructor(o){super(o==null?void 0:o.style),t.THREE.DefaultLoadingManager.onStart=()=>{this.initialize()},t.THREE.DefaultLoadingManager.onLoad=()=>{var a;(a=o==null?void 0:o.onLoad)===null||a===void 0||a.call(o)},t.THREE.DefaultLoadingManager.onProgress=(a,l,c)=>{this.updateLoader(l/c*100)}}}su.DefaultLoaderUI=i;class r extends t.THREE.LoadingManager{constructor(o){super(()=>{var a;return(a=o==null?void 0:o.onLoad)===null||a===void 0?void 0:a.call(o)},(a,l,c)=>{var u;this.ui.customStyle=o==null?void 0:o.style,this.ui.refreshStyle(),(u=o==null?void 0:o.onProgress)===null||u===void 0||u.call(o,a,l,c),this.ui.updateLoader(l/c*100)},o==null?void 0:o.onError),this.ui=new n,this.onStartCallback=void 0,this.onStart=()=>{this.ui.initialize(),this.onStartCallback&&this.onStartCallback()},this._onStart=a=>{this.onStartCallback=a},this.dispose=()=>{this.ui.dispose()},new e.LibraryLoader(this).load()}}return su.LoadingManager=r,su}var rx={};Object.defineProperty(rx,"__esModule",{value:!0});rx.CameraEnvironmentMap=void 0;const Qo=fi;class Jce{constructor(){this.cubeMapScene=new Qo.THREE.Scene,this.renderTarget=new Qo.THREE.WebGLCubeRenderTarget(256,{format:Qo.THREE.RGBAFormat,generateMipmaps:!0,minFilter:Qo.THREE.LinearMipmapLinearFilter}),this.cubeCamera=new Qo.THREE.CubeCamera(.1,1e3,this.renderTarget),this.sphereMaterial=new Qo.THREE.MeshBasicMaterial({side:Qo.THREE.DoubleSide}),this.sphereGroup=new Qo.THREE.Group,this.environmentMap=this.renderTarget.texture,this.cubeMapScene.add(this.cubeCamera);const e=new Qo.THREE.Mesh(new Qo.THREE.SphereGeometry(10,16,12),this.sphereMaterial);e.rotation.set(0,-.5*Math.PI,0),this.sphereGroup.add(e),this.cubeMapScene.add(this.sphereGroup)}dispose(){this.renderTarget.dispose(),this.sphereMaterial.dispose()}update(e,n){this.environmentMap.encoding=e.outputEncoding,this.sphereMaterial.map=n.backgroundTexture,this.sphereGroup.quaternion.copy(n.quaternion),this.cubeCamera.update(e,this.cubeMapScene)}}rx.CameraEnvironmentMap=Jce;var sx={};Object.defineProperty(sx,"__esModule",{value:!0});sx.TargetImagePreviewBufferGeometry=void 0;const ou=fi;class Kce extends ou.THREE.BufferGeometry{constructor(e){var n;if(super(),this.imageTarget=e,this.hasSetIndices=!1,this.hasSetUVs=!1,this.recalculateNormals=!0,this.setIndex([]),this.setAttribute("position",new ou.THREE.Float32BufferAttribute([],3)),this.setAttribute("normal",new ou.THREE.Float32BufferAttribute([],3)),this.setAttribute("uv",new ou.THREE.Float32BufferAttribute([],2)),this.imageTarget.preview.vertices.length===0)throw new Error("No vertices found in the image target.");this._updateIndices(),this._updateUVs(),this.vertices||(this.vertices=new Float32Array((n=this.imageTarget)===null||n===void 0?void 0:n.preview.vertices.length),this.verticesAttribute=new ou.THREE.BufferAttribute(this.vertices,3),this.setAttribute("position",this.verticesAttribute)),this.vertices.set(this.imageTarget.preview.vertices),this.verticesAttribute&&(this.verticesAttribute.needsUpdate=!0),this.computeBoundingSphere()}_updateIndices(){var e;this.hasSetIndices||((e=this.imageTarget)===null||e===void 0?void 0:e.preview.indices.length)!==0&&(this.setIndex(new ou.THREE.Uint16BufferAttribute(this.imageTarget.preview.indices,1)),this.hasSetIndices=!0)}_updateUVs(){this.hasSetUVs||this.imageTarget.preview.uvs.length!==0&&(this.setAttribute("uv",new ou.THREE.BufferAttribute(this.imageTarget.preview.uvs,2)),this.hasSetUVs=!0)}get calculateNormals(){return this.recalculateNormals}}sx.TargetImagePreviewBufferGeometry=Kce;var np={},xD;function Zce(){if(xD)return np;xD=1,Object.defineProperty(np,"__esModule",{value:!0}),np.TargetImagePreviewMesh=void 0;const t=Es(),e=fi;class n extends e.THREE.Mesh{constructor(r,s=new e.THREE.MeshBasicMaterial({map:new e.THREE.TextureLoader().load(r.image.src)})){super(new t.TargetImagePreviewBufferGeometry(r),s)}}return np.TargetImagePreviewMesh=n,np}var ED;function Es(){return ED||(ED=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SequenceSource=t.loadedPromise=t.loaded=t.browserIncompatibleUI=t.browserIncompatible=t.permissionRequestUI=t.permissionDeniedUI=t.permissionRequest=t.permissionGranted=t.permissionDenied=t.setLogLevel=t.LogLevel=t.Pipeline=t.FaceLandmarkName=t.FaceLandmark=t.FaceMesh=t.getDefaultPipeline=t.glContextLost=t.glContextSet=t.onFrameUpdate=t.HTMLElementSource=t.CameraSource=t.FaceTracker=t.BarcodeFinder=t.InstantWorldTracker=t.ImageTracker=t.TargetImagePreviewMesh=t.TargetImagePreviewBufferGeometry=t.CameraEnvironmentMap=t.DefaultLoaderUI=t.LoadingManager=t.LibraryLoader=t.HeadMaskMeshLoader=t.HeadMaskMesh=t.FaceMeshLoader=t.FaceBufferGeometry=t.FaceTrackerLoader=t.FaceLandmarkGroup=t.FaceAnchorGroup=t.InstantWorldAnchorGroup=t.ImageTrackerLoader=t.ImageAnchorGroup=t.CameraMirrorMode=t.CameraPoseMode=t.Camera=void 0,console.log(`Zappar for ThreeJS v${fy.VERSION}`);var n=n0();Object.defineProperty(t,"Camera",{enumerable:!0,get:function(){return n.Camera}}),Object.defineProperty(t,"CameraPoseMode",{enumerable:!0,get:function(){return n.CameraPoseMode}}),Object.defineProperty(t,"CameraMirrorMode",{enumerable:!0,get:function(){return n.CameraMirrorMode}});var i=Ky;Object.defineProperty(t,"ImageAnchorGroup",{enumerable:!0,get:function(){return i.ImageAnchorGroup}});var r=Zy;Object.defineProperty(t,"ImageTrackerLoader",{enumerable:!0,get:function(){return r.ImageTrackerLoader}});var s=$y;Object.defineProperty(t,"InstantWorldAnchorGroup",{enumerable:!0,get:function(){return s.InstantWorldAnchorGroup}});var o=ex;Object.defineProperty(t,"FaceAnchorGroup",{enumerable:!0,get:function(){return o.FaceAnchorGroup}});var a=tx;Object.defineProperty(t,"FaceLandmarkGroup",{enumerable:!0,get:function(){return a.FaceLandmarkGroup}});var l=nx;Object.defineProperty(t,"FaceTrackerLoader",{enumerable:!0,get:function(){return l.FaceTrackerLoader}});var c=S1;Object.defineProperty(t,"FaceBufferGeometry",{enumerable:!0,get:function(){return c.FaceBufferGeometry}});var u=b1;Object.defineProperty(t,"FaceMeshLoader",{enumerable:!0,get:function(){return u.FaceMeshLoader}});var h=I1;Object.defineProperty(t,"HeadMaskMesh",{enumerable:!0,get:function(){return h.HeadMaskMesh}});var f=ix;Object.defineProperty(t,"HeadMaskMeshLoader",{enumerable:!0,get:function(){return f.HeadMaskMeshLoader}});var d=pN();Object.defineProperty(t,"LibraryLoader",{enumerable:!0,get:function(){return d.LibraryLoader}});var p=qce();Object.defineProperty(t,"LoadingManager",{enumerable:!0,get:function(){return p.LoadingManager}}),Object.defineProperty(t,"DefaultLoaderUI",{enumerable:!0,get:function(){return p.DefaultLoaderUI}});var m=rx;Object.defineProperty(t,"CameraEnvironmentMap",{enumerable:!0,get:function(){return m.CameraEnvironmentMap}});var g=sx;Object.defineProperty(t,"TargetImagePreviewBufferGeometry",{enumerable:!0,get:function(){return g.TargetImagePreviewBufferGeometry}});var _=Zce();Object.defineProperty(t,"TargetImagePreviewMesh",{enumerable:!0,get:function(){return _.TargetImagePreviewMesh}});var y=C1;Object.defineProperty(t,"ImageTracker",{enumerable:!0,get:function(){return y.ImageTracker}}),Object.defineProperty(t,"InstantWorldTracker",{enumerable:!0,get:function(){return y.InstantWorldTracker}}),Object.defineProperty(t,"BarcodeFinder",{enumerable:!0,get:function(){return y.BarcodeFinder}}),Object.defineProperty(t,"FaceTracker",{enumerable:!0,get:function(){return y.FaceTracker}}),Object.defineProperty(t,"CameraSource",{enumerable:!0,get:function(){return y.CameraSource}}),Object.defineProperty(t,"HTMLElementSource",{enumerable:!0,get:function(){return y.HTMLElementSource}}),Object.defineProperty(t,"onFrameUpdate",{enumerable:!0,get:function(){return y.onFrameUpdate}}),Object.defineProperty(t,"glContextSet",{enumerable:!0,get:function(){return y.glContextSet}}),Object.defineProperty(t,"glContextLost",{enumerable:!0,get:function(){return y.glContextLost}}),Object.defineProperty(t,"getDefaultPipeline",{enumerable:!0,get:function(){return y.getDefaultPipeline}});var x=fh;Object.defineProperty(t,"FaceMesh",{enumerable:!0,get:function(){return x.FaceMesh}}),Object.defineProperty(t,"FaceLandmark",{enumerable:!0,get:function(){return x.FaceLandmark}}),Object.defineProperty(t,"FaceLandmarkName",{enumerable:!0,get:function(){return x.FaceLandmarkName}}),Object.defineProperty(t,"Pipeline",{enumerable:!0,get:function(){return x.Pipeline}}),Object.defineProperty(t,"LogLevel",{enumerable:!0,get:function(){return x.LogLevel}}),Object.defineProperty(t,"setLogLevel",{enumerable:!0,get:function(){return x.setLogLevel}}),Object.defineProperty(t,"permissionDenied",{enumerable:!0,get:function(){return x.permissionDenied}}),Object.defineProperty(t,"permissionGranted",{enumerable:!0,get:function(){return x.permissionGranted}}),Object.defineProperty(t,"permissionRequest",{enumerable:!0,get:function(){return x.permissionRequest}}),Object.defineProperty(t,"permissionDeniedUI",{enumerable:!0,get:function(){return x.permissionDeniedUI}}),Object.defineProperty(t,"permissionRequestUI",{enumerable:!0,get:function(){return x.permissionRequestUI}}),Object.defineProperty(t,"browserIncompatible",{enumerable:!0,get:function(){return x.browserIncompatible}}),Object.defineProperty(t,"browserIncompatibleUI",{enumerable:!0,get:function(){return x.browserIncompatibleUI}}),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return x.loaded}}),Object.defineProperty(t,"loadedPromise",{enumerable:!0,get:function(){return x.loadedPromise}}),Object.defineProperty(t,"SequenceSource",{enumerable:!0,get:function(){return x.SequenceSource}})}(K2)),K2}var N3={};function Hn(t){return function(e){t.forEach(function(n){typeof n=="function"?n(e):n!=null&&(n.current=e)})}}const $ce=Object.freeze(Object.defineProperty({__proto__:null,default:Hn},Symbol.toStringTag,{value:"Module"})),Lc=Ud($ce);var Ru={exports:{}},wh={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */wh.ConcurrentRoot=1;wh.ContinuousEventPriority=4;wh.DefaultEventPriority=16;wh.DiscreteEventPriority=1;wh.IdleEventPriority=536870912;wh.LegacyRoot=0;(function(t){t.exports=wh})(Ru);function eue(t){let e;const n=new Set,i=(c,u)=>{const h=typeof c=="function"?c(e):c;if(h!==e){const f=e;e=u?h:Object.assign({},e,h),n.forEach(d=>d(e,f))}},r=()=>e,s=(c,u=r,h=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let f=u(e);function d(){const p=u(e);if(!h(f,p)){const m=f;c(f=p,m)}}return n.add(d),()=>n.delete(d)},l={setState:i,getState:r,subscribe:(c,u,h)=>u||h?s(c,u,h):(n.add(c),()=>n.delete(c)),destroy:()=>n.clear()};return e=t(i,r,l),l}const tue=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),wD=tue?R.exports.useEffect:R.exports.useLayoutEffect;function ox(t){const e=typeof t=="function"?eue(t):t,n=(i=e.getState,r=Object.is)=>{const[,s]=R.exports.useReducer(g=>g+1,0),o=e.getState(),a=R.exports.useRef(o),l=R.exports.useRef(i),c=R.exports.useRef(r),u=R.exports.useRef(!1),h=R.exports.useRef();h.current===void 0&&(h.current=i(o));let f,d=!1;(a.current!==o||l.current!==i||c.current!==r||u.current)&&(f=i(o),d=!r(h.current,f)),wD(()=>{d&&(h.current=f),a.current=o,l.current=i,c.current=r,u.current=!1});const p=R.exports.useRef(o);wD(()=>{const g=()=>{try{const y=e.getState(),x=l.current(y);c.current(h.current,x)||(a.current=y,h.current=x,s())}catch{u.current=!0,s()}},_=e.subscribe(g);return e.getState()!==p.current&&g(),_},[]);const m=d?f:h.current;return R.exports.useDebugValue(m),m};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[n,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},n}var mN={exports:{}},VE={exports:{}},WE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MD;function nue(){return MD||(MD=1,function(t){function e(G,O){var z=G.length;G.push(O);e:for(;0<z;){var Q=z-1>>>1,H=G[Q];if(0<r(H,O))G[Q]=O,G[z]=H,z=Q;else break e}}function n(G){return G.length===0?null:G[0]}function i(G){if(G.length===0)return null;var O=G[0],z=G.pop();if(z!==O){G[0]=z;e:for(var Q=0,H=G.length,J=H>>>1;Q<J;){var j=2*(Q+1)-1,oe=G[j],K=j+1,ce=G[K];if(0>r(oe,z))K<H&&0>r(ce,oe)?(G[Q]=ce,G[K]=z,Q=K):(G[Q]=oe,G[j]=z,Q=j);else if(K<H&&0>r(ce,z))G[Q]=ce,G[K]=z,Q=K;else break e}}return O}function r(G,O){var z=G.sortIndex-O.sortIndex;return z!==0?z:G.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,f=3,d=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(G){for(var O=n(c);O!==null;){if(O.callback===null)i(c);else if(O.startTime<=G)i(c),O.sortIndex=O.expirationTime,e(l,O);else break;O=n(c)}}function E(G){if(m=!1,x(G),!p)if(n(l)!==null)p=!0,Y(w);else{var O=n(c);O!==null&&Z(E,O.startTime-G)}}function w(G,O){p=!1,m&&(m=!1,_(M),M=-1),d=!0;var z=f;try{for(x(O),h=n(l);h!==null&&(!(h.expirationTime>O)||G&&!L());){var Q=h.callback;if(typeof Q=="function"){h.callback=null,f=h.priorityLevel;var H=Q(h.expirationTime<=O);O=t.unstable_now(),typeof H=="function"?h.callback=H:h===n(l)&&i(l),x(O)}else i(l);h=n(l)}if(h!==null)var J=!0;else{var j=n(c);j!==null&&Z(E,j.startTime-O),J=!1}return J}finally{h=null,f=z,d=!1}}var S=!1,b=null,M=-1,T=5,B=-1;function L(){return!(t.unstable_now()-B<T)}function F(){if(b!==null){var G=t.unstable_now();B=G;var O=!0;try{O=b(!0,G)}finally{O?U():(S=!1,b=null)}}else S=!1}var U;if(typeof y=="function")U=function(){y(F)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,X=k.port2;k.port1.onmessage=F,U=function(){X.postMessage(null)}}else U=function(){g(F,0)};function Y(G){b=G,S||(S=!0,U())}function Z(G,O){M=g(function(){G(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){p||d||(p=!0,Y(w))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(G){switch(f){case 1:case 2:case 3:var O=3;break;default:O=f}var z=f;f=O;try{return G()}finally{f=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,O){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var z=f;f=G;try{return O()}finally{f=z}},t.unstable_scheduleCallback=function(G,O,z){var Q=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?Q+z:Q):z=Q,G){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=z+H,G={id:u++,callback:O,priorityLevel:G,startTime:z,expirationTime:H,sortIndex:-1},z>Q?(G.sortIndex=z,e(c,G),n(l)===null&&G===n(c)&&(m?(_(M),M=-1):m=!0,Z(E,z-Q))):(G.sortIndex=H,e(l,G),p||d||(p=!0,Y(w))),G},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(G){var O=f;return function(){var z=f;f=O;try{return G.apply(this,arguments)}finally{f=z}}}}(WE)),WE}var CD;function iue(){return CD||(CD=1,function(t){t.exports=nue()}(VE)),VE.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rue=function(e){var n={},i=R.exports,r=iue(),s=Object.assign;function o(A){for(var v="https://reactjs.org/docs/error-decoder.html?invariant="+A,C=1;C<arguments.length;C++)v+="&args[]="+encodeURIComponent(arguments[C]);return"Minified React error #"+A+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),d=Symbol.for("react.provider"),p=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),y=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),E=Symbol.for("react.offscreen"),w=Symbol.iterator;function S(A){return A===null||typeof A!="object"?null:(A=w&&A[w]||A["@@iterator"],typeof A=="function"?A:null)}function b(A){if(A==null)return null;if(typeof A=="function")return A.displayName||A.name||null;if(typeof A=="string")return A;switch(A){case u:return"Fragment";case c:return"Portal";case f:return"Profiler";case h:return"StrictMode";case g:return"Suspense";case _:return"SuspenseList"}if(typeof A=="object")switch(A.$$typeof){case p:return(A.displayName||"Context")+".Consumer";case d:return(A._context.displayName||"Context")+".Provider";case m:var v=A.render;return A=A.displayName,A||(A=v.displayName||v.name||"",A=A!==""?"ForwardRef("+A+")":"ForwardRef"),A;case y:return v=A.displayName||null,v!==null?v:b(A.type)||"Memo";case x:v=A._payload,A=A._init;try{return b(A(v))}catch{}}return null}function M(A){var v=A.type;switch(A.tag){case 24:return"Cache";case 9:return(v.displayName||"Context")+".Consumer";case 10:return(v._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return A=v.render,A=A.displayName||A.name||"",v.displayName||(A!==""?"ForwardRef("+A+")":"ForwardRef");case 7:return"Fragment";case 5:return v;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return b(v);case 8:return v===h?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof v=="function")return v.displayName||v.name||null;if(typeof v=="string")return v}return null}function T(A){var v=A,C=A;if(A.alternate)for(;v.return;)v=v.return;else{A=v;do v=A,(v.flags&4098)!==0&&(C=v.return),A=v.return;while(A)}return v.tag===3?C:null}function B(A){if(T(A)!==A)throw Error(o(188))}function L(A){var v=A.alternate;if(!v){if(v=T(A),v===null)throw Error(o(188));return v!==A?null:A}for(var C=A,I=v;;){var P=C.return;if(P===null)break;var N=P.alternate;if(N===null){if(I=P.return,I!==null){C=I;continue}break}if(P.child===N.child){for(N=P.child;N;){if(N===C)return B(P),A;if(N===I)return B(P),v;N=N.sibling}throw Error(o(188))}if(C.return!==I.return)C=P,I=N;else{for(var ne=!1,ue=P.child;ue;){if(ue===C){ne=!0,C=P,I=N;break}if(ue===I){ne=!0,I=P,C=N;break}ue=ue.sibling}if(!ne){for(ue=N.child;ue;){if(ue===C){ne=!0,C=N,I=P;break}if(ue===I){ne=!0,I=N,C=P;break}ue=ue.sibling}if(!ne)throw Error(o(189))}}if(C.alternate!==I)throw Error(o(190))}if(C.tag!==3)throw Error(o(188));return C.stateNode.current===C?A:v}function F(A){return A=L(A),A!==null?U(A):null}function U(A){if(A.tag===5||A.tag===6)return A;for(A=A.child;A!==null;){var v=U(A);if(v!==null)return v;A=A.sibling}return null}function k(A){if(A.tag===5||A.tag===6)return A;for(A=A.child;A!==null;){if(A.tag!==4){var v=k(A);if(v!==null)return v}A=A.sibling}return null}var X=Array.isArray,Y=e.getPublicInstance,Z=e.getRootHostContext,G=e.getChildHostContext,O=e.prepareForCommit,z=e.resetAfterCommit,Q=e.createInstance,H=e.appendInitialChild,J=e.finalizeInitialChildren,j=e.prepareUpdate,oe=e.shouldSetTextContent,K=e.createTextInstance,ce=e.scheduleTimeout,he=e.cancelTimeout,ve=e.noTimeout,Me=e.isPrimaryRenderer,Se=e.supportsMutation,le=e.supportsPersistence,pe=e.supportsHydration,Pe=e.getInstanceFromNode,Oe=e.preparePortalMount,ke=e.getCurrentEventPriority,Ke=e.detachDeletedInstance,xe=e.supportsMicrotasks,Ue=e.scheduleMicrotask,He=e.supportsTestSelectors,be=e.findFiberRoot,q=e.getBoundingRect,W=e.getTextContent,ie=e.isHiddenSubtree,fe=e.matchAccessibilityRole,_e=e.setFocusIfFocusable,Ge=e.setupIntersectionObserver,Ie=e.appendChild,Le=e.appendChildToContainer,ye=e.commitTextUpdate,je=e.commitMount,re=e.commitUpdate,ge=e.insertBefore,Ce=e.insertInContainerBefore,Re=e.removeChild,Je=e.removeChildFromContainer,ae=e.resetTextContent,qe=e.hideInstance,ze=e.hideTextInstance,we=e.unhideInstance,We=e.unhideTextInstance,ht=e.clearContainer,bt=e.cloneInstance,cn=e.createContainerChildSet,Vt=e.appendChildToContainerChildSet,At=e.finalizeContainerChildren,un=e.replaceContainerChildren,dn=e.cloneHiddenInstance,hn=e.cloneHiddenTextInstance,Vn=e.canHydrateInstance,mr=e.canHydrateTextInstance,qn=e.canHydrateSuspenseInstance,Dn=e.isSuspenseInstancePending,pi=e.isSuspenseInstanceFallback,ee=e.registerSuspenseInstanceRetry,me=e.getNextHydratableSibling,De=e.getFirstHydratableChild,Ae=e.getFirstHydratableChildWithinContainer,Ne=e.getFirstHydratableChildWithinSuspenseInstance,pt=e.hydrateInstance,Et=e.hydrateTextInstance,Pt=e.hydrateSuspenseInstance,St=e.getNextHydratableInstanceAfterSuspenseInstance,Wt=e.commitHydratedContainer,Ot=e.commitHydratedSuspenseInstance,jt=e.clearSuspenseBoundary,vn=e.clearSuspenseBoundaryFromContainer,Fr=e.shouldDeleteUnhydratedTailInstances,ws=e.didNotMatchHydratedContainerTextInstance,Ms=e.didNotMatchHydratedTextInstance,it;function Dt(A){if(it===void 0)try{throw Error()}catch(C){var v=C.stack.trim().match(/\n( *(at )?)/);it=v&&v[1]||""}return`
`+it+A}var Cs=!1;function pn(A,v){if(!A||Cs)return"";Cs=!0;var C=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(v)if(v=function(){throw Error()},Object.defineProperty(v.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(v,[])}catch(Ye){var I=Ye}Reflect.construct(A,[],v)}else{try{v.call()}catch(Ye){I=Ye}A.call(v.prototype)}else{try{throw Error()}catch(Ye){I=Ye}A()}}catch(Ye){if(Ye&&I&&typeof Ye.stack=="string"){for(var P=Ye.stack.split(`
`),N=I.stack.split(`
`),ne=P.length-1,ue=N.length-1;1<=ne&&0<=ue&&P[ne]!==N[ue];)ue--;for(;1<=ne&&0<=ue;ne--,ue--)if(P[ne]!==N[ue]){if(ne!==1||ue!==1)do if(ne--,ue--,0>ue||P[ne]!==N[ue]){var Fe=`
`+P[ne].replace(" at new "," at ");return A.displayName&&Fe.includes("<anonymous>")&&(Fe=Fe.replace("<anonymous>",A.displayName)),Fe}while(1<=ne&&0<=ue);break}}}finally{Cs=!1,Error.prepareStackTrace=C}return(A=A?A.displayName||A.name:"")?Dt(A):""}var ki=Object.prototype.hasOwnProperty,Ki=[],Ui=-1;function Oi(A){return{current:A}}function It(A){0>Ui||(A.current=Ki[Ui],Ki[Ui]=null,Ui--)}function Nt(A,v){Ui++,Ki[Ui]=A.current,A.current=v}var Ar={},en=Oi(Ar),Jn=Oi(!1),gr=Ar;function Jr(A,v){var C=A.type.contextTypes;if(!C)return Ar;var I=A.stateNode;if(I&&I.__reactInternalMemoizedUnmaskedChildContext===v)return I.__reactInternalMemoizedMaskedChildContext;var P={},N;for(N in C)P[N]=v[N];return I&&(A=A.stateNode,A.__reactInternalMemoizedUnmaskedChildContext=v,A.__reactInternalMemoizedMaskedChildContext=P),P}function Kn(A){return A=A.childContextTypes,A!=null}function pl(){It(Jn),It(en)}function Ih(A,v,C){if(en.current!==Ar)throw Error(o(168));Nt(en,v),Nt(Jn,C)}function Th(A,v,C){var I=A.stateNode;if(v=v.childContextTypes,typeof I.getChildContext!="function")return C;I=I.getChildContext();for(var P in I)if(!(P in v))throw Error(o(108,M(A)||"Unknown",P));return s({},C,I)}function Do(A){return A=(A=A.stateNode)&&A.__reactInternalMemoizedMergedChildContext||Ar,gr=en.current,Nt(en,A),Nt(Jn,Jn.current),!0}function U1(A,v,C){var I=A.stateNode;if(!I)throw Error(o(169));C?(A=Th(A,v,gr),I.__reactInternalMemoizedMergedChildContext=A,It(Jn),It(en),Nt(en,A)):It(Jn),Nt(Jn,C)}var Zi=Math.clz32?Math.clz32:O1,Bh=Math.log,Uc=Math.LN2;function O1(A){return A>>>=0,A===0?32:31-(Bh(A)/Uc|0)|0}var Aa=64,ga=4194304;function va(A){switch(A&-A){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return A&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return A&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return A}}function Oc(A,v){var C=A.pendingLanes;if(C===0)return 0;var I=0,P=A.suspendedLanes,N=A.pingedLanes,ne=C&268435455;if(ne!==0){var ue=ne&~P;ue!==0?I=va(ue):(N&=ne,N!==0&&(I=va(N)))}else ne=C&~P,ne!==0?I=va(ne):N!==0&&(I=va(N));if(I===0)return 0;if(v!==0&&v!==I&&(v&P)===0&&(P=I&-I,N=v&-v,P>=N||P===16&&(N&4194240)!==0))return v;if((I&4)!==0&&(I|=C&16),v=A.entangledLanes,v!==0)for(A=A.entanglements,v&=I;0<v;)C=31-Zi(v),P=1<<C,I|=A[C],v&=~P;return I}function N1(A,v){switch(A){case 1:case 2:case 4:return v+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return v+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function f0(A,v){for(var C=A.suspendedLanes,I=A.pingedLanes,P=A.expirationTimes,N=A.pendingLanes;0<N;){var ne=31-Zi(N),ue=1<<ne,Fe=P[ne];Fe===-1?((ue&C)===0||(ue&I)!==0)&&(P[ne]=N1(ue,v)):Fe<=v&&(A.expiredLanes|=ue),N&=~ue}}function _a(A){return A=A.pendingLanes&-1073741825,A!==0?A:A&1073741824?1073741824:0}function Rh(A){for(var v=[],C=0;31>C;C++)v.push(A);return v}function Fo(A,v,C){A.pendingLanes|=v,v!==536870912&&(A.suspendedLanes=0,A.pingedLanes=0),A=A.eventTimes,v=31-Zi(v),A[v]=C}function ml(A,v){var C=A.pendingLanes&~v;A.pendingLanes=v,A.suspendedLanes=0,A.pingedLanes=0,A.expiredLanes&=v,A.mutableReadLanes&=v,A.entangledLanes&=v,v=A.entanglements;var I=A.eventTimes;for(A=A.expirationTimes;0<C;){var P=31-Zi(C),N=1<<P;v[P]=0,I[P]=-1,A[P]=-1,C&=~N}}function Lo(A,v){var C=A.entangledLanes|=v;for(A=A.entanglements;C;){var I=31-Zi(C),P=1<<I;P&v|A[I]&v&&(A[I]|=v),C&=~P}}var Qt=0;function d0(A){return A&=-A,1<A?4<A?(A&268435455)!==0?16:536870912:4:1}var ya=r.unstable_scheduleCallback,Ph=r.unstable_cancelCallback,p0=r.unstable_shouldYield,G1=r.unstable_requestPaint,Tn=r.unstable_now,Al=r.unstable_ImmediatePriority,z1=r.unstable_UserBlockingPriority,vr=r.unstable_NormalPriority,m0=r.unstable_IdlePriority,gl=null,Kr=null;function A0(A){if(Kr&&typeof Kr.onCommitFiberRoot=="function")try{Kr.onCommitFiberRoot(gl,A,void 0,(A.current.flags&128)===128)}catch{}}function Dh(A,v){return A===v&&(A!==0||1/A===1/v)||A!==A&&v!==v}var Zr=typeof Object.is=="function"?Object.is:Dh,_r=null,ko=!1,Ss=!1;function g0(A){_r===null?_r=[A]:_r.push(A)}function v0(A){ko=!0,g0(A)}function Lr(){if(!Ss&&_r!==null){Ss=!0;var A=0,v=Qt;try{var C=_r;for(Qt=1;A<C.length;A++){var I=C[A];do I=I(!0);while(I!==null)}_r=null,ko=!1}catch(P){throw _r!==null&&(_r=_r.slice(A+1)),ya(Al,Lr),P}finally{Qt=v,Ss=!1}}return null}var Nc=a.ReactCurrentBatchConfig;function Gc(A,v){if(Zr(A,v))return!0;if(typeof A!="object"||A===null||typeof v!="object"||v===null)return!1;var C=Object.keys(A),I=Object.keys(v);if(C.length!==I.length)return!1;for(I=0;I<C.length;I++){var P=C[I];if(!ki.call(v,P)||!Zr(A[P],v[P]))return!1}return!0}function zc(A){switch(A.tag){case 5:return Dt(A.type);case 16:return Dt("Lazy");case 13:return Dt("Suspense");case 19:return Dt("SuspenseList");case 0:case 2:case 15:return A=pn(A.type,!1),A;case 11:return A=pn(A.type.render,!1),A;case 1:return A=pn(A.type,!0),A;default:return""}}function $i(A,v){if(A&&A.defaultProps){v=s({},v),A=A.defaultProps;for(var C in A)v[C]===void 0&&(v[C]=A[C]);return v}return v}var Si=Oi(null),Fh=null,no=null,vl=null;function Lh(){vl=no=Fh=null}function Q1(A,v,C){Me?(Nt(Si,v._currentValue),v._currentValue=C):(Nt(Si,v._currentValue2),v._currentValue2=C)}function Uo(A){var v=Si.current;It(Si),Me?A._currentValue=v:A._currentValue2=v}function si(A,v,C){for(;A!==null;){var I=A.alternate;if((A.childLanes&v)!==v?(A.childLanes|=v,I!==null&&(I.childLanes|=v)):I!==null&&(I.childLanes&v)!==v&&(I.childLanes|=v),A===C)break;A=A.return}}function bi(A,v){Fh=A,vl=no=null,A=A.dependencies,A!==null&&A.firstContext!==null&&((A.lanes&v)!==0&&(ts=!0),A.firstContext=null)}function _n(A){var v=Me?A._currentValue:A._currentValue2;if(vl!==A)if(A={context:A,memoizedValue:v,next:null},no===null){if(Fh===null)throw Error(o(308));no=A,Fh.dependencies={lanes:0,firstContext:A}}else no=no.next=A;return v}var mi=null,io=!1;function Px(A){A.updateQueue={baseState:A.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ZI(A,v){A=A.updateQueue,v.updateQueue===A&&(v.updateQueue={baseState:A.baseState,firstBaseUpdate:A.firstBaseUpdate,lastBaseUpdate:A.lastBaseUpdate,shared:A.shared,effects:A.effects})}function xa(A,v){return{eventTime:A,lane:v,tag:0,payload:null,callback:null,next:null}}function _l(A,v){var C=A.updateQueue;C!==null&&(C=C.shared,oi!==null&&(A.mode&1)!==0&&(Gt&2)===0?(A=C.interleaved,A===null?(v.next=v,mi===null?mi=[C]:mi.push(C)):(v.next=A.next,A.next=v),C.interleaved=v):(A=C.pending,A===null?v.next=v:(v.next=A.next,A.next=v),C.pending=v))}function H1(A,v,C){if(v=v.updateQueue,v!==null&&(v=v.shared,(C&4194240)!==0)){var I=v.lanes;I&=A.pendingLanes,C|=I,v.lanes=C,Lo(A,C)}}function $I(A,v){var C=A.updateQueue,I=A.alternate;if(I!==null&&(I=I.updateQueue,C===I)){var P=null,N=null;if(C=C.firstBaseUpdate,C!==null){do{var ne={eventTime:C.eventTime,lane:C.lane,tag:C.tag,payload:C.payload,callback:C.callback,next:null};N===null?P=N=ne:N=N.next=ne,C=C.next}while(C!==null);N===null?P=N=v:N=N.next=v}else P=N=v;C={baseState:I.baseState,firstBaseUpdate:P,lastBaseUpdate:N,shared:I.shared,effects:I.effects},A.updateQueue=C;return}A=C.lastBaseUpdate,A===null?C.firstBaseUpdate=v:A.next=v,C.lastBaseUpdate=v}function V1(A,v,C,I){var P=A.updateQueue;io=!1;var N=P.firstBaseUpdate,ne=P.lastBaseUpdate,ue=P.shared.pending;if(ue!==null){P.shared.pending=null;var Fe=ue,Ye=Fe.next;Fe.next=null,ne===null?N=Ye:ne.next=Ye,ne=Fe;var at=A.alternate;at!==null&&(at=at.updateQueue,ue=at.lastBaseUpdate,ue!==ne&&(ue===null?at.firstBaseUpdate=Ye:ue.next=Ye,at.lastBaseUpdate=Fe))}if(N!==null){var Bt=P.baseState;ne=0,at=Ye=Fe=null,ue=N;do{var _t=ue.lane,yn=ue.eventTime;if((I&_t)===_t){at!==null&&(at=at.next={eventTime:yn,lane:0,tag:ue.tag,payload:ue.payload,callback:ue.callback,next:null});e:{var dt=A,ir=ue;switch(_t=v,yn=C,ir.tag){case 1:if(dt=ir.payload,typeof dt=="function"){Bt=dt.call(yn,Bt,_t);break e}Bt=dt;break e;case 3:dt.flags=dt.flags&-65537|128;case 0:if(dt=ir.payload,_t=typeof dt=="function"?dt.call(yn,Bt,_t):dt,_t==null)break e;Bt=s({},Bt,_t);break e;case 2:io=!0}}ue.callback!==null&&ue.lane!==0&&(A.flags|=64,_t=P.effects,_t===null?P.effects=[ue]:_t.push(ue))}else yn={eventTime:yn,lane:_t,tag:ue.tag,payload:ue.payload,callback:ue.callback,next:null},at===null?(Ye=at=yn,Fe=Bt):at=at.next=yn,ne|=_t;if(ue=ue.next,ue===null){if(ue=P.shared.pending,ue===null)break;_t=ue,ue=_t.next,_t.next=null,P.lastBaseUpdate=_t,P.shared.pending=null}}while(1);if(at===null&&(Fe=Bt),P.baseState=Fe,P.firstBaseUpdate=Ye,P.lastBaseUpdate=at,v=P.shared.interleaved,v!==null){P=v;do ne|=P.lane,P=P.next;while(P!==v)}else N===null&&(P.shared.lanes=0);Vh|=ne,A.lanes=ne,A.memoizedState=Bt}}function eT(A,v,C){if(A=v.effects,v.effects=null,A!==null)for(v=0;v<A.length;v++){var I=A[v],P=I.callback;if(P!==null){if(I.callback=null,I=C,typeof P!="function")throw Error(o(191,P));P.call(I)}}}var tT=new i.Component().refs;function Dx(A,v,C,I){v=A.memoizedState,C=C(I,v),C=C==null?v:s({},v,C),A.memoizedState=C,A.lanes===0&&(A.updateQueue.baseState=C)}var W1={isMounted:function(A){return(A=A._reactInternals)?T(A)===A:!1},enqueueSetState:function(A,v,C){A=A._reactInternals;var I=xr(),P=El(A),N=xa(I,P);N.payload=v,C!=null&&(N.callback=C),_l(A,N),v=Rs(A,P,I),v!==null&&H1(v,A,P)},enqueueReplaceState:function(A,v,C){A=A._reactInternals;var I=xr(),P=El(A),N=xa(I,P);N.tag=1,N.payload=v,C!=null&&(N.callback=C),_l(A,N),v=Rs(A,P,I),v!==null&&H1(v,A,P)},enqueueForceUpdate:function(A,v){A=A._reactInternals;var C=xr(),I=El(A),P=xa(C,I);P.tag=2,v!=null&&(P.callback=v),_l(A,P),v=Rs(A,I,C),v!==null&&H1(v,A,I)}};function nT(A,v,C,I,P,N,ne){return A=A.stateNode,typeof A.shouldComponentUpdate=="function"?A.shouldComponentUpdate(I,N,ne):v.prototype&&v.prototype.isPureReactComponent?!Gc(C,I)||!Gc(P,N):!0}function iT(A,v,C){var I=!1,P=Ar,N=v.contextType;return typeof N=="object"&&N!==null?N=_n(N):(P=Kn(v)?gr:en.current,I=v.contextTypes,N=(I=I!=null)?Jr(A,P):Ar),v=new v(C,N),A.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=W1,A.stateNode=v,v._reactInternals=A,I&&(A=A.stateNode,A.__reactInternalMemoizedUnmaskedChildContext=P,A.__reactInternalMemoizedMaskedChildContext=N),v}function rT(A,v,C,I){A=v.state,typeof v.componentWillReceiveProps=="function"&&v.componentWillReceiveProps(C,I),typeof v.UNSAFE_componentWillReceiveProps=="function"&&v.UNSAFE_componentWillReceiveProps(C,I),v.state!==A&&W1.enqueueReplaceState(v,v.state,null)}function Fx(A,v,C,I){var P=A.stateNode;P.props=C,P.state=A.memoizedState,P.refs=tT,Px(A);var N=v.contextType;typeof N=="object"&&N!==null?P.context=_n(N):(N=Kn(v)?gr:en.current,P.context=Jr(A,N)),P.state=A.memoizedState,N=v.getDerivedStateFromProps,typeof N=="function"&&(Dx(A,v,N,C),P.state=A.memoizedState),typeof v.getDerivedStateFromProps=="function"||typeof P.getSnapshotBeforeUpdate=="function"||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(v=P.state,typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount(),v!==P.state&&W1.enqueueReplaceState(P,P.state,null),V1(A,C,P,I),P.state=A.memoizedState),typeof P.componentDidMount=="function"&&(A.flags|=4194308)}var kh=[],Uh=0,j1=null,X1=0,bs=[],Is=0,Qc=null,Ea=1,wa="";function Hc(A,v){kh[Uh++]=X1,kh[Uh++]=j1,j1=A,X1=v}function sT(A,v,C){bs[Is++]=Ea,bs[Is++]=wa,bs[Is++]=Qc,Qc=A;var I=Ea;A=wa;var P=32-Zi(I)-1;I&=~(1<<P),C+=1;var N=32-Zi(v)+P;if(30<N){var ne=P-P%5;N=(I&(1<<ne)-1).toString(32),I>>=ne,P-=ne,Ea=1<<32-Zi(v)+P|C<<P|I,wa=N+A}else Ea=1<<N|C<<P|I,wa=A}function Lx(A){A.return!==null&&(Hc(A,1),sT(A,1,0))}function kx(A){for(;A===j1;)j1=kh[--Uh],kh[Uh]=null,X1=kh[--Uh],kh[Uh]=null;for(;A===Qc;)Qc=bs[--Is],bs[Is]=null,wa=bs[--Is],bs[Is]=null,Ea=bs[--Is],bs[Is]=null}var $r=null,es=null,Bn=!1,_0=!1,ro=null;function oT(A,v){var C=Ps(5,null,null,0);C.elementType="DELETED",C.stateNode=v,C.return=A,v=A.deletions,v===null?(A.deletions=[C],A.flags|=16):v.push(C)}function aT(A,v){switch(A.tag){case 5:return v=Vn(v,A.type,A.pendingProps),v!==null?(A.stateNode=v,$r=A,es=De(v),!0):!1;case 6:return v=mr(v,A.pendingProps),v!==null?(A.stateNode=v,$r=A,es=null,!0):!1;case 13:if(v=qn(v),v!==null){var C=Qc!==null?{id:Ea,overflow:wa}:null;return A.memoizedState={dehydrated:v,treeContext:C,retryLane:1073741824},C=Ps(18,null,null,0),C.stateNode=v,C.return=A,A.child=C,$r=A,es=null,!0}return!1;default:return!1}}function Ux(A){return(A.mode&1)!==0&&(A.flags&128)===0}function Ox(A){if(Bn){var v=es;if(v){var C=v;if(!aT(A,v)){if(Ux(A))throw Error(o(418));v=me(C);var I=$r;v&&aT(A,v)?oT(I,C):(A.flags=A.flags&-4097|2,Bn=!1,$r=A)}}else{if(Ux(A))throw Error(o(418));A.flags=A.flags&-4097|2,Bn=!1,$r=A}}}function lT(A){for(A=A.return;A!==null&&A.tag!==5&&A.tag!==3&&A.tag!==13;)A=A.return;$r=A}function y0(A){if(!pe||A!==$r)return!1;if(!Bn)return lT(A),Bn=!0,!1;if(A.tag!==3&&(A.tag!==5||Fr(A.type)&&!oe(A.type,A.memoizedProps))){var v=es;if(v){if(Ux(A)){for(A=es;A;)A=me(A);throw Error(o(418))}for(;v;)oT(A,v),v=me(v)}}if(lT(A),A.tag===13){if(!pe)throw Error(o(316));if(A=A.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(o(317));es=St(A)}else es=$r?me(A.stateNode):null;return!0}function Oh(){pe&&(es=$r=null,_0=Bn=!1)}function Nx(A){ro===null?ro=[A]:ro.push(A)}function x0(A,v,C){if(A=C.ref,A!==null&&typeof A!="function"&&typeof A!="object"){if(C._owner){if(C=C._owner,C){if(C.tag!==1)throw Error(o(309));var I=C.stateNode}if(!I)throw Error(o(147,A));var P=I,N=""+A;return v!==null&&v.ref!==null&&typeof v.ref=="function"&&v.ref._stringRef===N?v.ref:(v=function(ne){var ue=P.refs;ue===tT&&(ue=P.refs={}),ne===null?delete ue[N]:ue[N]=ne},v._stringRef=N,v)}if(typeof A!="string")throw Error(o(284));if(!C._owner)throw Error(o(290,A))}return A}function Y1(A,v){throw A=Object.prototype.toString.call(v),Error(o(31,A==="[object Object]"?"object with keys {"+Object.keys(v).join(", ")+"}":A))}function cT(A){var v=A._init;return v(A._payload)}function uT(A){function v(Ee,de){if(A){var Be=Ee.deletions;Be===null?(Ee.deletions=[de],Ee.flags|=16):Be.push(de)}}function C(Ee,de){if(!A)return null;for(;de!==null;)v(Ee,de),de=de.sibling;return null}function I(Ee,de){for(Ee=new Map;de!==null;)de.key!==null?Ee.set(de.key,de):Ee.set(de.index,de),de=de.sibling;return Ee}function P(Ee,de){return Ee=Ml(Ee,de),Ee.index=0,Ee.sibling=null,Ee}function N(Ee,de,Be){return Ee.index=Be,A?(Be=Ee.alternate,Be!==null?(Be=Be.index,Be<de?(Ee.flags|=2,de):Be):(Ee.flags|=2,de)):(Ee.flags|=1048576,de)}function ne(Ee){return A&&Ee.alternate===null&&(Ee.flags|=2),Ee}function ue(Ee,de,Be,nt){return de===null||de.tag!==6?(de=E2(Be,Ee.mode,nt),de.return=Ee,de):(de=P(de,Be),de.return=Ee,de)}function Fe(Ee,de,Be,nt){var ft=Be.type;return ft===u?at(Ee,de,Be.props.children,nt,Be.key):de!==null&&(de.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===x&&cT(ft)===de.type)?(nt=P(de,Be.props),nt.ref=x0(Ee,de,Be),nt.return=Ee,nt):(nt=CA(Be.type,Be.key,Be.props,null,Ee.mode,nt),nt.ref=x0(Ee,de,Be),nt.return=Ee,nt)}function Ye(Ee,de,Be,nt){return de===null||de.tag!==4||de.stateNode.containerInfo!==Be.containerInfo||de.stateNode.implementation!==Be.implementation?(de=w2(Be,Ee.mode,nt),de.return=Ee,de):(de=P(de,Be.children||[]),de.return=Ee,de)}function at(Ee,de,Be,nt,ft){return de===null||de.tag!==7?(de=Jc(Be,Ee.mode,nt,ft),de.return=Ee,de):(de=P(de,Be),de.return=Ee,de)}function Bt(Ee,de,Be){if(typeof de=="string"&&de!==""||typeof de=="number")return de=E2(""+de,Ee.mode,Be),de.return=Ee,de;if(typeof de=="object"&&de!==null){switch(de.$$typeof){case l:return Be=CA(de.type,de.key,de.props,null,Ee.mode,Be),Be.ref=x0(Ee,null,de),Be.return=Ee,Be;case c:return de=w2(de,Ee.mode,Be),de.return=Ee,de;case x:var nt=de._init;return Bt(Ee,nt(de._payload),Be)}if(X(de)||S(de))return de=Jc(de,Ee.mode,Be,null),de.return=Ee,de;Y1(Ee,de)}return null}function _t(Ee,de,Be,nt){var ft=de!==null?de.key:null;if(typeof Be=="string"&&Be!==""||typeof Be=="number")return ft!==null?null:ue(Ee,de,""+Be,nt);if(typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case l:return Be.key===ft?Fe(Ee,de,Be,nt):null;case c:return Be.key===ft?Ye(Ee,de,Be,nt):null;case x:return ft=Be._init,_t(Ee,de,ft(Be._payload),nt)}if(X(Be)||S(Be))return ft!==null?null:at(Ee,de,Be,nt,null);Y1(Ee,Be)}return null}function yn(Ee,de,Be,nt,ft){if(typeof nt=="string"&&nt!==""||typeof nt=="number")return Ee=Ee.get(Be)||null,ue(de,Ee,""+nt,ft);if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case l:return Ee=Ee.get(nt.key===null?Be:nt.key)||null,Fe(de,Ee,nt,ft);case c:return Ee=Ee.get(nt.key===null?Be:nt.key)||null,Ye(de,Ee,nt,ft);case x:var kt=nt._init;return yn(Ee,de,Be,kt(nt._payload),ft)}if(X(nt)||S(nt))return Ee=Ee.get(Be)||null,at(de,Ee,nt,ft,null);Y1(de,nt)}return null}function dt(Ee,de,Be,nt){for(var ft=null,kt=null,Rt=de,sn=de=0,Ti=null;Rt!==null&&sn<Be.length;sn++){Rt.index>sn?(Ti=Rt,Rt=null):Ti=Rt.sibling;var on=_t(Ee,Rt,Be[sn],nt);if(on===null){Rt===null&&(Rt=Ti);break}A&&Rt&&on.alternate===null&&v(Ee,Rt),de=N(on,de,sn),kt===null?ft=on:kt.sibling=on,kt=on,Rt=Ti}if(sn===Be.length)return C(Ee,Rt),Bn&&Hc(Ee,sn),ft;if(Rt===null){for(;sn<Be.length;sn++)Rt=Bt(Ee,Be[sn],nt),Rt!==null&&(de=N(Rt,de,sn),kt===null?ft=Rt:kt.sibling=Rt,kt=Rt);return Bn&&Hc(Ee,sn),ft}for(Rt=I(Ee,Rt);sn<Be.length;sn++)Ti=yn(Rt,Ee,sn,Be[sn],nt),Ti!==null&&(A&&Ti.alternate!==null&&Rt.delete(Ti.key===null?sn:Ti.key),de=N(Ti,de,sn),kt===null?ft=Ti:kt.sibling=Ti,kt=Ti);return A&&Rt.forEach(function(Cl){return v(Ee,Cl)}),Bn&&Hc(Ee,sn),ft}function ir(Ee,de,Be,nt){var ft=S(Be);if(typeof ft!="function")throw Error(o(150));if(Be=ft.call(Be),Be==null)throw Error(o(151));for(var kt=ft=null,Rt=de,sn=de=0,Ti=null,on=Be.next();Rt!==null&&!on.done;sn++,on=Be.next()){Rt.index>sn?(Ti=Rt,Rt=null):Ti=Rt.sibling;var Cl=_t(Ee,Rt,on.value,nt);if(Cl===null){Rt===null&&(Rt=Ti);break}A&&Rt&&Cl.alternate===null&&v(Ee,Rt),de=N(Cl,de,sn),kt===null?ft=Cl:kt.sibling=Cl,kt=Cl,Rt=Ti}if(on.done)return C(Ee,Rt),Bn&&Hc(Ee,sn),ft;if(Rt===null){for(;!on.done;sn++,on=Be.next())on=Bt(Ee,on.value,nt),on!==null&&(de=N(on,de,sn),kt===null?ft=on:kt.sibling=on,kt=on);return Bn&&Hc(Ee,sn),ft}for(Rt=I(Ee,Rt);!on.done;sn++,on=Be.next())on=yn(Rt,Ee,sn,on.value,nt),on!==null&&(A&&on.alternate!==null&&Rt.delete(on.key===null?sn:on.key),de=N(on,de,sn),kt===null?ft=on:kt.sibling=on,kt=on);return A&&Rt.forEach(function(M7){return v(Ee,M7)}),Bn&&Hc(Ee,sn),ft}function Ds(Ee,de,Be,nt){if(typeof Be=="object"&&Be!==null&&Be.type===u&&Be.key===null&&(Be=Be.props.children),typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case l:e:{for(var ft=Be.key,kt=de;kt!==null;){if(kt.key===ft){if(ft=Be.type,ft===u){if(kt.tag===7){C(Ee,kt.sibling),de=P(kt,Be.props.children),de.return=Ee,Ee=de;break e}}else if(kt.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===x&&cT(ft)===kt.type){C(Ee,kt.sibling),de=P(kt,Be.props),de.ref=x0(Ee,kt,Be),de.return=Ee,Ee=de;break e}C(Ee,kt);break}else v(Ee,kt);kt=kt.sibling}Be.type===u?(de=Jc(Be.props.children,Ee.mode,nt,Be.key),de.return=Ee,Ee=de):(nt=CA(Be.type,Be.key,Be.props,null,Ee.mode,nt),nt.ref=x0(Ee,de,Be),nt.return=Ee,Ee=nt)}return ne(Ee);case c:e:{for(kt=Be.key;de!==null;){if(de.key===kt)if(de.tag===4&&de.stateNode.containerInfo===Be.containerInfo&&de.stateNode.implementation===Be.implementation){C(Ee,de.sibling),de=P(de,Be.children||[]),de.return=Ee,Ee=de;break e}else{C(Ee,de);break}else v(Ee,de);de=de.sibling}de=w2(Be,Ee.mode,nt),de.return=Ee,Ee=de}return ne(Ee);case x:return kt=Be._init,Ds(Ee,de,kt(Be._payload),nt)}if(X(Be))return dt(Ee,de,Be,nt);if(S(Be))return ir(Ee,de,Be,nt);Y1(Ee,Be)}return typeof Be=="string"&&Be!==""||typeof Be=="number"?(Be=""+Be,de!==null&&de.tag===6?(C(Ee,de.sibling),de=P(de,Be),de.return=Ee,Ee=de):(C(Ee,de),de=E2(Be,Ee.mode,nt),de.return=Ee,Ee=de),ne(Ee)):C(Ee,de)}return Ds}var Nh=uT(!0),hT=uT(!1),E0={},Ts=Oi(E0),w0=Oi(E0),Gh=Oi(E0);function Oo(A){if(A===E0)throw Error(o(174));return A}function Gx(A,v){Nt(Gh,v),Nt(w0,A),Nt(Ts,E0),A=Z(v),It(Ts),Nt(Ts,A)}function zh(){It(Ts),It(w0),It(Gh)}function fT(A){var v=Oo(Gh.current),C=Oo(Ts.current);v=G(C,A.type,v),C!==v&&(Nt(w0,A),Nt(Ts,v))}function zx(A){w0.current===A&&(It(Ts),It(w0))}var Fn=Oi(0);function q1(A){for(var v=A;v!==null;){if(v.tag===13){var C=v.memoizedState;if(C!==null&&(C=C.dehydrated,C===null||Dn(C)||pi(C)))return v}else if(v.tag===19&&v.memoizedProps.revealOrder!==void 0){if((v.flags&128)!==0)return v}else if(v.child!==null){v.child.return=v,v=v.child;continue}if(v===A)break;for(;v.sibling===null;){if(v.return===null||v.return===A)return null;v=v.return}v.sibling.return=v.return,v=v.sibling}return null}var Qx=[];function Hx(){for(var A=0;A<Qx.length;A++){var v=Qx[A];Me?v._workInProgressVersionPrimary=null:v._workInProgressVersionSecondary=null}Qx.length=0}var J1=a.ReactCurrentDispatcher,Bs=a.ReactCurrentBatchConfig,Qh=0,Wn=null,er=null,Ii=null,K1=!1,M0=!1,C0=0,q9=0;function tr(){throw Error(o(321))}function Vx(A,v){if(v===null)return!1;for(var C=0;C<v.length&&C<A.length;C++)if(!Zr(A[C],v[C]))return!1;return!0}function Wx(A,v,C,I,P,N){if(Qh=N,Wn=v,v.memoizedState=null,v.updateQueue=null,v.lanes=0,J1.current=A===null||A.memoizedState===null?$9:e7,A=C(I,P),M0){N=0;do{if(M0=!1,C0=0,25<=N)throw Error(o(301));N+=1,Ii=er=null,v.updateQueue=null,J1.current=t7,A=C(I,P)}while(M0)}if(J1.current=nA,v=er!==null&&er.next!==null,Qh=0,Ii=er=Wn=null,K1=!1,v)throw Error(o(300));return A}function jx(){var A=C0!==0;return C0=0,A}function Ma(){var A={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ii===null?Wn.memoizedState=Ii=A:Ii=Ii.next=A,Ii}function No(){if(er===null){var A=Wn.alternate;A=A!==null?A.memoizedState:null}else A=er.next;var v=Ii===null?Wn.memoizedState:Ii.next;if(v!==null)Ii=v,er=A;else{if(A===null)throw Error(o(310));er=A,A={memoizedState:er.memoizedState,baseState:er.baseState,baseQueue:er.baseQueue,queue:er.queue,next:null},Ii===null?Wn.memoizedState=Ii=A:Ii=Ii.next=A}return Ii}function Vc(A,v){return typeof v=="function"?v(A):v}function Z1(A){var v=No(),C=v.queue;if(C===null)throw Error(o(311));C.lastRenderedReducer=A;var I=er,P=I.baseQueue,N=C.pending;if(N!==null){if(P!==null){var ne=P.next;P.next=N.next,N.next=ne}I.baseQueue=P=N,C.pending=null}if(P!==null){N=P.next,I=I.baseState;var ue=ne=null,Fe=null,Ye=N;do{var at=Ye.lane;if((Qh&at)===at)Fe!==null&&(Fe=Fe.next={lane:0,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null}),I=Ye.hasEagerState?Ye.eagerState:A(I,Ye.action);else{var Bt={lane:at,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null};Fe===null?(ue=Fe=Bt,ne=I):Fe=Fe.next=Bt,Wn.lanes|=at,Vh|=at}Ye=Ye.next}while(Ye!==null&&Ye!==N);Fe===null?ne=I:Fe.next=ue,Zr(I,v.memoizedState)||(ts=!0),v.memoizedState=I,v.baseState=ne,v.baseQueue=Fe,C.lastRenderedState=I}if(A=C.interleaved,A!==null){P=A;do N=P.lane,Wn.lanes|=N,Vh|=N,P=P.next;while(P!==A)}else P===null&&(C.lanes=0);return[v.memoizedState,C.dispatch]}function $1(A){var v=No(),C=v.queue;if(C===null)throw Error(o(311));C.lastRenderedReducer=A;var I=C.dispatch,P=C.pending,N=v.memoizedState;if(P!==null){C.pending=null;var ne=P=P.next;do N=A(N,ne.action),ne=ne.next;while(ne!==P);Zr(N,v.memoizedState)||(ts=!0),v.memoizedState=N,v.baseQueue===null&&(v.baseState=N),C.lastRenderedState=N}return[N,I]}function dT(){}function pT(A,v){var C=Wn,I=No(),P=v(),N=!Zr(I.memoizedState,P);if(N&&(I.memoizedState=P,ts=!0),I=I.queue,b0(gT.bind(null,C,I,A),[A]),I.getSnapshot!==v||N||Ii!==null&&Ii.memoizedState.tag&1){if(C.flags|=2048,S0(9,AT.bind(null,C,I,P,v),void 0,null),oi===null)throw Error(o(349));(Qh&30)!==0||mT(C,v,P)}return P}function mT(A,v,C){A.flags|=16384,A={getSnapshot:v,value:C},v=Wn.updateQueue,v===null?(v={lastEffect:null,stores:null},Wn.updateQueue=v,v.stores=[A]):(C=v.stores,C===null?v.stores=[A]:C.push(A))}function AT(A,v,C,I){v.value=C,v.getSnapshot=I,vT(v)&&Rs(A,1,-1)}function gT(A,v,C){return C(function(){vT(v)&&Rs(A,1,-1)})}function vT(A){var v=A.getSnapshot;A=A.value;try{var C=v();return!Zr(A,C)}catch{return!0}}function Xx(A){var v=Ma();return typeof A=="function"&&(A=A()),v.memoizedState=v.baseState=A,A={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vc,lastRenderedState:A},v.queue=A,A=A.dispatch=Z9.bind(null,Wn,A),[v.memoizedState,A]}function S0(A,v,C,I){return A={tag:A,create:v,destroy:C,deps:I,next:null},v=Wn.updateQueue,v===null?(v={lastEffect:null,stores:null},Wn.updateQueue=v,v.lastEffect=A.next=A):(C=v.lastEffect,C===null?v.lastEffect=A.next=A:(I=C.next,C.next=A,A.next=I,v.lastEffect=A)),A}function _T(){return No().memoizedState}function eA(A,v,C,I){var P=Ma();Wn.flags|=A,P.memoizedState=S0(1|v,C,void 0,I===void 0?null:I)}function tA(A,v,C,I){var P=No();I=I===void 0?null:I;var N=void 0;if(er!==null){var ne=er.memoizedState;if(N=ne.destroy,I!==null&&Vx(I,ne.deps)){P.memoizedState=S0(v,C,N,I);return}}Wn.flags|=A,P.memoizedState=S0(1|v,C,N,I)}function Yx(A,v){return eA(8390656,8,A,v)}function b0(A,v){return tA(2048,8,A,v)}function yT(A,v){return tA(4,2,A,v)}function xT(A,v){return tA(4,4,A,v)}function ET(A,v){if(typeof v=="function")return A=A(),v(A),function(){v(null)};if(v!=null)return A=A(),v.current=A,function(){v.current=null}}function wT(A,v,C){return C=C!=null?C.concat([A]):null,tA(4,4,ET.bind(null,v,A),C)}function qx(){}function MT(A,v){var C=No();v=v===void 0?null:v;var I=C.memoizedState;return I!==null&&v!==null&&Vx(v,I[1])?I[0]:(C.memoizedState=[A,v],A)}function CT(A,v){var C=No();v=v===void 0?null:v;var I=C.memoizedState;return I!==null&&v!==null&&Vx(v,I[1])?I[0]:(A=A(),C.memoizedState=[A,v],A)}function J9(A,v){var C=Qt;Qt=C!==0&&4>C?C:4,A(!0);var I=Bs.transition;Bs.transition={};try{A(!1),v()}finally{Qt=C,Bs.transition=I}}function ST(){return No().memoizedState}function K9(A,v,C){var I=El(A);C={lane:I,action:C,hasEagerState:!1,eagerState:null,next:null},bT(A)?IT(v,C):(TT(A,v,C),C=xr(),A=Rs(A,I,C),A!==null&&BT(A,v,I))}function Z9(A,v,C){var I=El(A),P={lane:I,action:C,hasEagerState:!1,eagerState:null,next:null};if(bT(A))IT(v,P);else{TT(A,v,P);var N=A.alternate;if(A.lanes===0&&(N===null||N.lanes===0)&&(N=v.lastRenderedReducer,N!==null))try{var ne=v.lastRenderedState,ue=N(ne,C);if(P.hasEagerState=!0,P.eagerState=ue,Zr(ue,ne))return}catch{}finally{}C=xr(),A=Rs(A,I,C),A!==null&&BT(A,v,I)}}function bT(A){var v=A.alternate;return A===Wn||v!==null&&v===Wn}function IT(A,v){M0=K1=!0;var C=A.pending;C===null?v.next=v:(v.next=C.next,C.next=v),A.pending=v}function TT(A,v,C){oi!==null&&(A.mode&1)!==0&&(Gt&2)===0?(A=v.interleaved,A===null?(C.next=C,mi===null?mi=[v]:mi.push(v)):(C.next=A.next,A.next=C),v.interleaved=C):(A=v.pending,A===null?C.next=C:(C.next=A.next,A.next=C),v.pending=C)}function BT(A,v,C){if((C&4194240)!==0){var I=v.lanes;I&=A.pendingLanes,C|=I,v.lanes=C,Lo(A,C)}}var nA={readContext:_n,useCallback:tr,useContext:tr,useEffect:tr,useImperativeHandle:tr,useInsertionEffect:tr,useLayoutEffect:tr,useMemo:tr,useReducer:tr,useRef:tr,useState:tr,useDebugValue:tr,useDeferredValue:tr,useTransition:tr,useMutableSource:tr,useSyncExternalStore:tr,useId:tr,unstable_isNewReconciler:!1},$9={readContext:_n,useCallback:function(A,v){return Ma().memoizedState=[A,v===void 0?null:v],A},useContext:_n,useEffect:Yx,useImperativeHandle:function(A,v,C){return C=C!=null?C.concat([A]):null,eA(4194308,4,ET.bind(null,v,A),C)},useLayoutEffect:function(A,v){return eA(4194308,4,A,v)},useInsertionEffect:function(A,v){return eA(4,2,A,v)},useMemo:function(A,v){var C=Ma();return v=v===void 0?null:v,A=A(),C.memoizedState=[A,v],A},useReducer:function(A,v,C){var I=Ma();return v=C!==void 0?C(v):v,I.memoizedState=I.baseState=v,A={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:A,lastRenderedState:v},I.queue=A,A=A.dispatch=K9.bind(null,Wn,A),[I.memoizedState,A]},useRef:function(A){var v=Ma();return A={current:A},v.memoizedState=A},useState:Xx,useDebugValue:qx,useDeferredValue:function(A){var v=Xx(A),C=v[0],I=v[1];return Yx(function(){var P=Bs.transition;Bs.transition={};try{I(A)}finally{Bs.transition=P}},[A]),C},useTransition:function(){var A=Xx(!1),v=A[0];return A=J9.bind(null,A[1]),Ma().memoizedState=A,[v,A]},useMutableSource:function(){},useSyncExternalStore:function(A,v,C){var I=Wn,P=Ma();if(Bn){if(C===void 0)throw Error(o(407));C=C()}else{if(C=v(),oi===null)throw Error(o(349));(Qh&30)!==0||mT(I,v,C)}P.memoizedState=C;var N={value:C,getSnapshot:v};return P.queue=N,Yx(gT.bind(null,I,N,A),[A]),I.flags|=2048,S0(9,AT.bind(null,I,N,C,v),void 0,null),C},useId:function(){var A=Ma(),v=oi.identifierPrefix;if(Bn){var C=wa,I=Ea;C=(I&~(1<<32-Zi(I)-1)).toString(32)+C,v=":"+v+"R"+C,C=C0++,0<C&&(v+="H"+C.toString(32)),v+=":"}else C=q9++,v=":"+v+"r"+C.toString(32)+":";return A.memoizedState=v},unstable_isNewReconciler:!1},e7={readContext:_n,useCallback:MT,useContext:_n,useEffect:b0,useImperativeHandle:wT,useInsertionEffect:yT,useLayoutEffect:xT,useMemo:CT,useReducer:Z1,useRef:_T,useState:function(){return Z1(Vc)},useDebugValue:qx,useDeferredValue:function(A){var v=Z1(Vc),C=v[0],I=v[1];return b0(function(){var P=Bs.transition;Bs.transition={};try{I(A)}finally{Bs.transition=P}},[A]),C},useTransition:function(){var A=Z1(Vc)[0],v=No().memoizedState;return[A,v]},useMutableSource:dT,useSyncExternalStore:pT,useId:ST,unstable_isNewReconciler:!1},t7={readContext:_n,useCallback:MT,useContext:_n,useEffect:b0,useImperativeHandle:wT,useInsertionEffect:yT,useLayoutEffect:xT,useMemo:CT,useReducer:$1,useRef:_T,useState:function(){return $1(Vc)},useDebugValue:qx,useDeferredValue:function(A){var v=$1(Vc),C=v[0],I=v[1];return b0(function(){var P=Bs.transition;Bs.transition={};try{I(A)}finally{Bs.transition=P}},[A]),C},useTransition:function(){var A=$1(Vc)[0],v=No().memoizedState;return[A,v]},useMutableSource:dT,useSyncExternalStore:pT,useId:ST,unstable_isNewReconciler:!1};function Jx(A,v){try{var C="",I=v;do C+=zc(I),I=I.return;while(I);var P=C}catch(N){P=`
Error generating stack: `+N.message+`
`+N.stack}return{value:A,source:v,stack:P}}function Kx(A,v){try{console.error(v.value)}catch(C){setTimeout(function(){throw C})}}var n7=typeof WeakMap=="function"?WeakMap:Map;function RT(A,v,C){C=xa(-1,C),C.tag=3,C.payload={element:null};var I=v.value;return C.callback=function(){vA||(vA=!0,m2=I),Kx(A,v)},C}function PT(A,v,C){C=xa(-1,C),C.tag=3;var I=A.type.getDerivedStateFromError;if(typeof I=="function"){var P=v.value;C.payload=function(){return I(P)},C.callback=function(){Kx(A,v)}}var N=A.stateNode;return N!==null&&typeof N.componentDidCatch=="function"&&(C.callback=function(){Kx(A,v),typeof I!="function"&&(yl===null?yl=new Set([this]):yl.add(this));var ne=v.stack;this.componentDidCatch(v.value,{componentStack:ne!==null?ne:""})}),C}function DT(A,v,C){var I=A.pingCache;if(I===null){I=A.pingCache=new n7;var P=new Set;I.set(v,P)}else P=I.get(v),P===void 0&&(P=new Set,I.set(v,P));P.has(C)||(P.add(C),A=A7.bind(null,A,v,C),v.then(A,A))}function FT(A){do{var v;if((v=A.tag===13)&&(v=A.memoizedState,v=v!==null?v.dehydrated!==null:!0),v)return A;A=A.return}while(A!==null);return null}function LT(A,v,C,I,P){return(A.mode&1)===0?(A===v?A.flags|=65536:(A.flags|=128,C.flags|=131072,C.flags&=-52805,C.tag===1&&(C.alternate===null?C.tag=17:(v=xa(-1,1),v.tag=2,_l(C,v))),C.lanes|=1),A):(A.flags|=65536,A.lanes=P,A)}function Go(A){A.flags|=4}function kT(A,v){if(A!==null&&A.child===v.child)return!0;if((v.flags&16)!==0)return!1;for(A=v.child;A!==null;){if((A.flags&12854)!==0||(A.subtreeFlags&12854)!==0)return!1;A=A.sibling}return!0}var I0,T0,iA,rA;if(Se)I0=function(A,v){for(var C=v.child;C!==null;){if(C.tag===5||C.tag===6)H(A,C.stateNode);else if(C.tag!==4&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===v)break;for(;C.sibling===null;){if(C.return===null||C.return===v)return;C=C.return}C.sibling.return=C.return,C=C.sibling}},T0=function(){},iA=function(A,v,C,I,P){if(A=A.memoizedProps,A!==I){var N=v.stateNode,ne=Oo(Ts.current);C=j(N,C,A,I,P,ne),(v.updateQueue=C)&&Go(v)}},rA=function(A,v,C,I){C!==I&&Go(v)};else if(le){I0=function(A,v,C,I){for(var P=v.child;P!==null;){if(P.tag===5){var N=P.stateNode;C&&I&&(N=dn(N,P.type,P.memoizedProps,P)),H(A,N)}else if(P.tag===6)N=P.stateNode,C&&I&&(N=hn(N,P.memoizedProps,P)),H(A,N);else if(P.tag!==4){if(P.tag===22&&P.memoizedState!==null)N=P.child,N!==null&&(N.return=P),I0(A,P,!0,!0);else if(P.child!==null){P.child.return=P,P=P.child;continue}}if(P===v)break;for(;P.sibling===null;){if(P.return===null||P.return===v)return;P=P.return}P.sibling.return=P.return,P=P.sibling}};var UT=function(A,v,C,I){for(var P=v.child;P!==null;){if(P.tag===5){var N=P.stateNode;C&&I&&(N=dn(N,P.type,P.memoizedProps,P)),Vt(A,N)}else if(P.tag===6)N=P.stateNode,C&&I&&(N=hn(N,P.memoizedProps,P)),Vt(A,N);else if(P.tag!==4){if(P.tag===22&&P.memoizedState!==null)N=P.child,N!==null&&(N.return=P),UT(A,P,!0,!0);else if(P.child!==null){P.child.return=P,P=P.child;continue}}if(P===v)break;for(;P.sibling===null;){if(P.return===null||P.return===v)return;P=P.return}P.sibling.return=P.return,P=P.sibling}};T0=function(A,v){var C=v.stateNode;if(!kT(A,v)){A=C.containerInfo;var I=cn(A);UT(I,v,!1,!1),C.pendingChildren=I,Go(v),At(A,I)}},iA=function(A,v,C,I,P){var N=A.stateNode,ne=A.memoizedProps;if((A=kT(A,v))&&ne===I)v.stateNode=N;else{var ue=v.stateNode,Fe=Oo(Ts.current),Ye=null;ne!==I&&(Ye=j(ue,C,ne,I,P,Fe)),A&&Ye===null?v.stateNode=N:(N=bt(N,Ye,C,ne,I,v,A,ue),J(N,C,I,P,Fe)&&Go(v),v.stateNode=N,A?Go(v):I0(N,v,!1,!1))}},rA=function(A,v,C,I){C!==I?(A=Oo(Gh.current),C=Oo(Ts.current),v.stateNode=K(I,A,C,v),Go(v)):v.stateNode=A.stateNode}}else T0=function(){},iA=function(){},rA=function(){};function B0(A,v){if(!Bn)switch(A.tailMode){case"hidden":v=A.tail;for(var C=null;v!==null;)v.alternate!==null&&(C=v),v=v.sibling;C===null?A.tail=null:C.sibling=null;break;case"collapsed":C=A.tail;for(var I=null;C!==null;)C.alternate!==null&&(I=C),C=C.sibling;I===null?v||A.tail===null?A.tail=null:A.tail.sibling=null:I.sibling=null}}function nr(A){var v=A.alternate!==null&&A.alternate.child===A.child,C=0,I=0;if(v)for(var P=A.child;P!==null;)C|=P.lanes|P.childLanes,I|=P.subtreeFlags&14680064,I|=P.flags&14680064,P.return=A,P=P.sibling;else for(P=A.child;P!==null;)C|=P.lanes|P.childLanes,I|=P.subtreeFlags,I|=P.flags,P.return=A,P=P.sibling;return A.subtreeFlags|=I,A.childLanes=C,v}function i7(A,v,C){var I=v.pendingProps;switch(kx(v),v.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nr(v),null;case 1:return Kn(v.type)&&pl(),nr(v),null;case 3:return I=v.stateNode,zh(),It(Jn),It(en),Hx(),I.pendingContext&&(I.context=I.pendingContext,I.pendingContext=null),(A===null||A.child===null)&&(y0(v)?Go(v):A===null||A.memoizedState.isDehydrated&&(v.flags&256)===0||(v.flags|=1024,ro!==null&&(v2(ro),ro=null))),T0(A,v),nr(v),null;case 5:zx(v),C=Oo(Gh.current);var P=v.type;if(A!==null&&v.stateNode!=null)iA(A,v,P,I,C),A.ref!==v.ref&&(v.flags|=512,v.flags|=2097152);else{if(!I){if(v.stateNode===null)throw Error(o(166));return nr(v),null}if(A=Oo(Ts.current),y0(v)){if(!pe)throw Error(o(175));A=pt(v.stateNode,v.type,v.memoizedProps,C,A,v,!_0),v.updateQueue=A,A!==null&&Go(v)}else{var N=Q(P,I,C,A,v);I0(N,v,!1,!1),v.stateNode=N,J(N,P,I,C,A)&&Go(v)}v.ref!==null&&(v.flags|=512,v.flags|=2097152)}return nr(v),null;case 6:if(A&&v.stateNode!=null)rA(A,v,A.memoizedProps,I);else{if(typeof I!="string"&&v.stateNode===null)throw Error(o(166));if(A=Oo(Gh.current),C=Oo(Ts.current),y0(v)){if(!pe)throw Error(o(176));if(A=v.stateNode,I=v.memoizedProps,(C=Et(A,I,v,!_0))&&(P=$r,P!==null))switch(N=(P.mode&1)!==0,P.tag){case 3:ws(P.stateNode.containerInfo,A,I,N);break;case 5:Ms(P.type,P.memoizedProps,P.stateNode,A,I,N)}C&&Go(v)}else v.stateNode=K(I,A,C,v)}return nr(v),null;case 13:if(It(Fn),I=v.memoizedState,Bn&&es!==null&&(v.mode&1)!==0&&(v.flags&128)===0){for(A=es;A;)A=me(A);return Oh(),v.flags|=98560,v}if(I!==null&&I.dehydrated!==null){if(I=y0(v),A===null){if(!I)throw Error(o(318));if(!pe)throw Error(o(344));if(A=v.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(o(317));Pt(A,v)}else Oh(),(v.flags&128)===0&&(v.memoizedState=null),v.flags|=4;return nr(v),null}return ro!==null&&(v2(ro),ro=null),(v.flags&128)!==0?(v.lanes=C,v):(I=I!==null,C=!1,A===null?y0(v):C=A.memoizedState!==null,I&&!C&&(v.child.flags|=8192,(v.mode&1)!==0&&(A===null||(Fn.current&1)!==0?Ai===0&&(Ai=3):y2())),v.updateQueue!==null&&(v.flags|=4),nr(v),null);case 4:return zh(),T0(A,v),A===null&&Oe(v.stateNode.containerInfo),nr(v),null;case 10:return Uo(v.type._context),nr(v),null;case 17:return Kn(v.type)&&pl(),nr(v),null;case 19:if(It(Fn),P=v.memoizedState,P===null)return nr(v),null;if(I=(v.flags&128)!==0,N=P.rendering,N===null)if(I)B0(P,!1);else{if(Ai!==0||A!==null&&(A.flags&128)!==0)for(A=v.child;A!==null;){if(N=q1(A),N!==null){for(v.flags|=128,B0(P,!1),A=N.updateQueue,A!==null&&(v.updateQueue=A,v.flags|=4),v.subtreeFlags=0,A=C,I=v.child;I!==null;)C=I,P=A,C.flags&=14680066,N=C.alternate,N===null?(C.childLanes=0,C.lanes=P,C.child=null,C.subtreeFlags=0,C.memoizedProps=null,C.memoizedState=null,C.updateQueue=null,C.dependencies=null,C.stateNode=null):(C.childLanes=N.childLanes,C.lanes=N.lanes,C.child=N.child,C.subtreeFlags=0,C.deletions=null,C.memoizedProps=N.memoizedProps,C.memoizedState=N.memoizedState,C.updateQueue=N.updateQueue,C.type=N.type,P=N.dependencies,C.dependencies=P===null?null:{lanes:P.lanes,firstContext:P.firstContext}),I=I.sibling;return Nt(Fn,Fn.current&1|2),v.child}A=A.sibling}P.tail!==null&&Tn()>p2&&(v.flags|=128,I=!0,B0(P,!1),v.lanes=4194304)}else{if(!I)if(A=q1(N),A!==null){if(v.flags|=128,I=!0,A=A.updateQueue,A!==null&&(v.updateQueue=A,v.flags|=4),B0(P,!0),P.tail===null&&P.tailMode==="hidden"&&!N.alternate&&!Bn)return nr(v),null}else 2*Tn()-P.renderingStartTime>p2&&C!==1073741824&&(v.flags|=128,I=!0,B0(P,!1),v.lanes=4194304);P.isBackwards?(N.sibling=v.child,v.child=N):(A=P.last,A!==null?A.sibling=N:v.child=N,P.last=N)}return P.tail!==null?(v=P.tail,P.rendering=v,P.tail=v.sibling,P.renderingStartTime=Tn(),v.sibling=null,A=Fn.current,Nt(Fn,I?A&1|2:A&1),v):(nr(v),null);case 22:case 23:return _2(),I=v.memoizedState!==null,A!==null&&A.memoizedState!==null!==I&&(v.flags|=8192),I&&(v.mode&1)!==0?(ns&1073741824)!==0&&(nr(v),Se&&v.subtreeFlags&6&&(v.flags|=8192)):nr(v),null;case 24:return null;case 25:return null}throw Error(o(156,v.tag))}var r7=a.ReactCurrentOwner,ts=!1;function yr(A,v,C,I){v.child=A===null?hT(v,null,C,I):Nh(v,A.child,C,I)}function OT(A,v,C,I,P){C=C.render;var N=v.ref;return bi(v,P),I=Wx(A,v,C,I,N,P),C=jx(),A!==null&&!ts?(v.updateQueue=A.updateQueue,v.flags&=-2053,A.lanes&=~P,Ca(A,v,P)):(Bn&&C&&Lx(v),v.flags|=1,yr(A,v,I,P),v.child)}function NT(A,v,C,I,P){if(A===null){var N=C.type;return typeof N=="function"&&!x2(N)&&N.defaultProps===void 0&&C.compare===null&&C.defaultProps===void 0?(v.tag=15,v.type=N,GT(A,v,N,I,P)):(A=CA(C.type,null,I,v,v.mode,P),A.ref=v.ref,A.return=v,v.child=A)}if(N=A.child,(A.lanes&P)===0){var ne=N.memoizedProps;if(C=C.compare,C=C!==null?C:Gc,C(ne,I)&&A.ref===v.ref)return Ca(A,v,P)}return v.flags|=1,A=Ml(N,I),A.ref=v.ref,A.return=v,v.child=A}function GT(A,v,C,I,P){if(A!==null&&Gc(A.memoizedProps,I)&&A.ref===v.ref)if(ts=!1,(A.lanes&P)!==0)(A.flags&131072)!==0&&(ts=!0);else return v.lanes=A.lanes,Ca(A,v,P);return Zx(A,v,C,I,P)}function zT(A,v,C){var I=v.pendingProps,P=I.children,N=A!==null?A.memoizedState:null;if(I.mode==="hidden")if((v.mode&1)===0)v.memoizedState={baseLanes:0,cachePool:null},Nt(Hh,ns),ns|=C;else if((C&1073741824)!==0)v.memoizedState={baseLanes:0,cachePool:null},I=N!==null?N.baseLanes:C,Nt(Hh,ns),ns|=I;else return A=N!==null?N.baseLanes|C:C,v.lanes=v.childLanes=1073741824,v.memoizedState={baseLanes:A,cachePool:null},v.updateQueue=null,Nt(Hh,ns),ns|=A,null;else N!==null?(I=N.baseLanes|C,v.memoizedState=null):I=C,Nt(Hh,ns),ns|=I;return yr(A,v,P,C),v.child}function QT(A,v){var C=v.ref;(A===null&&C!==null||A!==null&&A.ref!==C)&&(v.flags|=512,v.flags|=2097152)}function Zx(A,v,C,I,P){var N=Kn(C)?gr:en.current;return N=Jr(v,N),bi(v,P),C=Wx(A,v,C,I,N,P),I=jx(),A!==null&&!ts?(v.updateQueue=A.updateQueue,v.flags&=-2053,A.lanes&=~P,Ca(A,v,P)):(Bn&&I&&Lx(v),v.flags|=1,yr(A,v,C,P),v.child)}function HT(A,v,C,I,P){if(Kn(C)){var N=!0;Do(v)}else N=!1;if(bi(v,P),v.stateNode===null)A!==null&&(A.alternate=null,v.alternate=null,v.flags|=2),iT(v,C,I),Fx(v,C,I,P),I=!0;else if(A===null){var ne=v.stateNode,ue=v.memoizedProps;ne.props=ue;var Fe=ne.context,Ye=C.contextType;typeof Ye=="object"&&Ye!==null?Ye=_n(Ye):(Ye=Kn(C)?gr:en.current,Ye=Jr(v,Ye));var at=C.getDerivedStateFromProps,Bt=typeof at=="function"||typeof ne.getSnapshotBeforeUpdate=="function";Bt||typeof ne.UNSAFE_componentWillReceiveProps!="function"&&typeof ne.componentWillReceiveProps!="function"||(ue!==I||Fe!==Ye)&&rT(v,ne,I,Ye),io=!1;var _t=v.memoizedState;ne.state=_t,V1(v,I,ne,P),Fe=v.memoizedState,ue!==I||_t!==Fe||Jn.current||io?(typeof at=="function"&&(Dx(v,C,at,I),Fe=v.memoizedState),(ue=io||nT(v,C,ue,I,_t,Fe,Ye))?(Bt||typeof ne.UNSAFE_componentWillMount!="function"&&typeof ne.componentWillMount!="function"||(typeof ne.componentWillMount=="function"&&ne.componentWillMount(),typeof ne.UNSAFE_componentWillMount=="function"&&ne.UNSAFE_componentWillMount()),typeof ne.componentDidMount=="function"&&(v.flags|=4194308)):(typeof ne.componentDidMount=="function"&&(v.flags|=4194308),v.memoizedProps=I,v.memoizedState=Fe),ne.props=I,ne.state=Fe,ne.context=Ye,I=ue):(typeof ne.componentDidMount=="function"&&(v.flags|=4194308),I=!1)}else{ne=v.stateNode,ZI(A,v),ue=v.memoizedProps,Ye=v.type===v.elementType?ue:$i(v.type,ue),ne.props=Ye,Bt=v.pendingProps,_t=ne.context,Fe=C.contextType,typeof Fe=="object"&&Fe!==null?Fe=_n(Fe):(Fe=Kn(C)?gr:en.current,Fe=Jr(v,Fe));var yn=C.getDerivedStateFromProps;(at=typeof yn=="function"||typeof ne.getSnapshotBeforeUpdate=="function")||typeof ne.UNSAFE_componentWillReceiveProps!="function"&&typeof ne.componentWillReceiveProps!="function"||(ue!==Bt||_t!==Fe)&&rT(v,ne,I,Fe),io=!1,_t=v.memoizedState,ne.state=_t,V1(v,I,ne,P);var dt=v.memoizedState;ue!==Bt||_t!==dt||Jn.current||io?(typeof yn=="function"&&(Dx(v,C,yn,I),dt=v.memoizedState),(Ye=io||nT(v,C,Ye,I,_t,dt,Fe)||!1)?(at||typeof ne.UNSAFE_componentWillUpdate!="function"&&typeof ne.componentWillUpdate!="function"||(typeof ne.componentWillUpdate=="function"&&ne.componentWillUpdate(I,dt,Fe),typeof ne.UNSAFE_componentWillUpdate=="function"&&ne.UNSAFE_componentWillUpdate(I,dt,Fe)),typeof ne.componentDidUpdate=="function"&&(v.flags|=4),typeof ne.getSnapshotBeforeUpdate=="function"&&(v.flags|=1024)):(typeof ne.componentDidUpdate!="function"||ue===A.memoizedProps&&_t===A.memoizedState||(v.flags|=4),typeof ne.getSnapshotBeforeUpdate!="function"||ue===A.memoizedProps&&_t===A.memoizedState||(v.flags|=1024),v.memoizedProps=I,v.memoizedState=dt),ne.props=I,ne.state=dt,ne.context=Fe,I=Ye):(typeof ne.componentDidUpdate!="function"||ue===A.memoizedProps&&_t===A.memoizedState||(v.flags|=4),typeof ne.getSnapshotBeforeUpdate!="function"||ue===A.memoizedProps&&_t===A.memoizedState||(v.flags|=1024),I=!1)}return $x(A,v,C,I,N,P)}function $x(A,v,C,I,P,N){QT(A,v);var ne=(v.flags&128)!==0;if(!I&&!ne)return P&&U1(v,C,!1),Ca(A,v,N);I=v.stateNode,r7.current=v;var ue=ne&&typeof C.getDerivedStateFromError!="function"?null:I.render();return v.flags|=1,A!==null&&ne?(v.child=Nh(v,A.child,null,N),v.child=Nh(v,null,ue,N)):yr(A,v,ue,N),v.memoizedState=I.state,P&&U1(v,C,!0),v.child}function VT(A){var v=A.stateNode;v.pendingContext?Ih(A,v.pendingContext,v.pendingContext!==v.context):v.context&&Ih(A,v.context,!1),Gx(A,v.containerInfo)}function WT(A,v,C,I,P){return Oh(),Nx(P),v.flags|=256,yr(A,v,C,I),v.child}var sA={dehydrated:null,treeContext:null,retryLane:0};function oA(A){return{baseLanes:A,cachePool:null}}function jT(A,v,C){var I=v.pendingProps,P=Fn.current,N=!1,ne=(v.flags&128)!==0,ue;if((ue=ne)||(ue=A!==null&&A.memoizedState===null?!1:(P&2)!==0),ue?(N=!0,v.flags&=-129):(A===null||A.memoizedState!==null)&&(P|=1),Nt(Fn,P&1),A===null)return Ox(v),A=v.memoizedState,A!==null&&(A=A.dehydrated,A!==null)?((v.mode&1)===0?v.lanes=1:pi(A)?v.lanes=8:v.lanes=1073741824,null):(P=I.children,A=I.fallback,N?(I=v.mode,N=v.child,P={mode:"hidden",children:P},(I&1)===0&&N!==null?(N.childLanes=0,N.pendingProps=P):N=SA(P,I,0,null),A=Jc(A,I,C,null),N.return=v,A.return=v,N.sibling=A,v.child=N,v.child.memoizedState=oA(C),v.memoizedState=sA,A):e2(v,P));if(P=A.memoizedState,P!==null){if(ue=P.dehydrated,ue!==null){if(ne)return v.flags&256?(v.flags&=-257,aA(A,v,C,Error(o(422)))):v.memoizedState!==null?(v.child=A.child,v.flags|=128,null):(N=I.fallback,P=v.mode,I=SA({mode:"visible",children:I.children},P,0,null),N=Jc(N,P,C,null),N.flags|=2,I.return=v,N.return=v,I.sibling=N,v.child=I,(v.mode&1)!==0&&Nh(v,A.child,null,C),v.child.memoizedState=oA(C),v.memoizedState=sA,N);if((v.mode&1)===0)v=aA(A,v,C,null);else if(pi(ue))v=aA(A,v,C,Error(o(419)));else if(I=(C&A.childLanes)!==0,ts||I){if(I=oi,I!==null){switch(C&-C){case 4:N=2;break;case 16:N=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:N=32;break;case 536870912:N=268435456;break;default:N=0}I=(N&(I.suspendedLanes|C))!==0?0:N,I!==0&&I!==P.retryLane&&(P.retryLane=I,Rs(A,I,-1))}y2(),v=aA(A,v,C,Error(o(421)))}else Dn(ue)?(v.flags|=128,v.child=A.child,v=g7.bind(null,A),ee(ue,v),v=null):(C=P.treeContext,pe&&(es=Ne(ue),$r=v,Bn=!0,ro=null,_0=!1,C!==null&&(bs[Is++]=Ea,bs[Is++]=wa,bs[Is++]=Qc,Ea=C.id,wa=C.overflow,Qc=v)),v=e2(v,v.pendingProps.children),v.flags|=4096);return v}return N?(I=YT(A,v,I.children,I.fallback,C),N=v.child,P=A.child.memoizedState,N.memoizedState=P===null?oA(C):{baseLanes:P.baseLanes|C,cachePool:null},N.childLanes=A.childLanes&~C,v.memoizedState=sA,I):(C=XT(A,v,I.children,C),v.memoizedState=null,C)}return N?(I=YT(A,v,I.children,I.fallback,C),N=v.child,P=A.child.memoizedState,N.memoizedState=P===null?oA(C):{baseLanes:P.baseLanes|C,cachePool:null},N.childLanes=A.childLanes&~C,v.memoizedState=sA,I):(C=XT(A,v,I.children,C),v.memoizedState=null,C)}function e2(A,v){return v=SA({mode:"visible",children:v},A.mode,0,null),v.return=A,A.child=v}function XT(A,v,C,I){var P=A.child;return A=P.sibling,C=Ml(P,{mode:"visible",children:C}),(v.mode&1)===0&&(C.lanes=I),C.return=v,C.sibling=null,A!==null&&(I=v.deletions,I===null?(v.deletions=[A],v.flags|=16):I.push(A)),v.child=C}function YT(A,v,C,I,P){var N=v.mode;A=A.child;var ne=A.sibling,ue={mode:"hidden",children:C};return(N&1)===0&&v.child!==A?(C=v.child,C.childLanes=0,C.pendingProps=ue,v.deletions=null):(C=Ml(A,ue),C.subtreeFlags=A.subtreeFlags&14680064),ne!==null?I=Ml(ne,I):(I=Jc(I,N,P,null),I.flags|=2),I.return=v,C.return=v,C.sibling=I,v.child=C,I}function aA(A,v,C,I){return I!==null&&Nx(I),Nh(v,A.child,null,C),A=e2(v,v.pendingProps.children),A.flags|=2,v.memoizedState=null,A}function qT(A,v,C){A.lanes|=v;var I=A.alternate;I!==null&&(I.lanes|=v),si(A.return,v,C)}function t2(A,v,C,I,P){var N=A.memoizedState;N===null?A.memoizedState={isBackwards:v,rendering:null,renderingStartTime:0,last:I,tail:C,tailMode:P}:(N.isBackwards=v,N.rendering=null,N.renderingStartTime=0,N.last=I,N.tail=C,N.tailMode=P)}function JT(A,v,C){var I=v.pendingProps,P=I.revealOrder,N=I.tail;if(yr(A,v,I.children,C),I=Fn.current,(I&2)!==0)I=I&1|2,v.flags|=128;else{if(A!==null&&(A.flags&128)!==0)e:for(A=v.child;A!==null;){if(A.tag===13)A.memoizedState!==null&&qT(A,C,v);else if(A.tag===19)qT(A,C,v);else if(A.child!==null){A.child.return=A,A=A.child;continue}if(A===v)break e;for(;A.sibling===null;){if(A.return===null||A.return===v)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}I&=1}if(Nt(Fn,I),(v.mode&1)===0)v.memoizedState=null;else switch(P){case"forwards":for(C=v.child,P=null;C!==null;)A=C.alternate,A!==null&&q1(A)===null&&(P=C),C=C.sibling;C=P,C===null?(P=v.child,v.child=null):(P=C.sibling,C.sibling=null),t2(v,!1,P,C,N);break;case"backwards":for(C=null,P=v.child,v.child=null;P!==null;){if(A=P.alternate,A!==null&&q1(A)===null){v.child=P;break}A=P.sibling,P.sibling=C,C=P,P=A}t2(v,!0,C,null,N);break;case"together":t2(v,!1,null,null,void 0);break;default:v.memoizedState=null}return v.child}function Ca(A,v,C){if(A!==null&&(v.dependencies=A.dependencies),Vh|=v.lanes,(C&v.childLanes)===0)return null;if(A!==null&&v.child!==A.child)throw Error(o(153));if(v.child!==null){for(A=v.child,C=Ml(A,A.pendingProps),v.child=C,C.return=v;A.sibling!==null;)A=A.sibling,C=C.sibling=Ml(A,A.pendingProps),C.return=v;C.sibling=null}return v.child}function s7(A,v,C){switch(v.tag){case 3:VT(v),Oh();break;case 5:fT(v);break;case 1:Kn(v.type)&&Do(v);break;case 4:Gx(v,v.stateNode.containerInfo);break;case 10:Q1(v,v.type._context,v.memoizedProps.value);break;case 13:var I=v.memoizedState;if(I!==null)return I.dehydrated!==null?(Nt(Fn,Fn.current&1),v.flags|=128,null):(C&v.child.childLanes)!==0?jT(A,v,C):(Nt(Fn,Fn.current&1),A=Ca(A,v,C),A!==null?A.sibling:null);Nt(Fn,Fn.current&1);break;case 19:if(I=(C&v.childLanes)!==0,(A.flags&128)!==0){if(I)return JT(A,v,C);v.flags|=128}var P=v.memoizedState;if(P!==null&&(P.rendering=null,P.tail=null,P.lastEffect=null),Nt(Fn,Fn.current),I)break;return null;case 22:case 23:return v.lanes=0,zT(A,v,C)}return Ca(A,v,C)}function o7(A,v){switch(kx(v),v.tag){case 1:return Kn(v.type)&&pl(),A=v.flags,A&65536?(v.flags=A&-65537|128,v):null;case 3:return zh(),It(Jn),It(en),Hx(),A=v.flags,(A&65536)!==0&&(A&128)===0?(v.flags=A&-65537|128,v):null;case 5:return zx(v),null;case 13:if(It(Fn),A=v.memoizedState,A!==null&&A.dehydrated!==null){if(v.alternate===null)throw Error(o(340));Oh()}return A=v.flags,A&65536?(v.flags=A&-65537|128,v):null;case 19:return It(Fn),null;case 4:return zh(),null;case 10:return Uo(v.type._context),null;case 22:case 23:return _2(),null;case 24:return null;default:return null}}var lA=!1,Wc=!1,a7=typeof WeakSet=="function"?WeakSet:Set,tt=null;function cA(A,v){var C=A.ref;if(C!==null)if(typeof C=="function")try{C(null)}catch(I){Or(A,v,I)}else C.current=null}function n2(A,v,C){try{C()}catch(I){Or(A,v,I)}}var KT=!1;function l7(A,v){for(O(A.containerInfo),tt=v;tt!==null;)if(A=tt,v=A.child,(A.subtreeFlags&1028)!==0&&v!==null)v.return=A,tt=v;else for(;tt!==null;){A=tt;try{var C=A.alternate;if((A.flags&1024)!==0)switch(A.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var I=C.memoizedProps,P=C.memoizedState,N=A.stateNode,ne=N.getSnapshotBeforeUpdate(A.elementType===A.type?I:$i(A.type,I),P);N.__reactInternalSnapshotBeforeUpdate=ne}break;case 3:Se&&ht(A.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(ue){Or(A,A.return,ue)}if(v=A.sibling,v!==null){v.return=A.return,tt=v;break}tt=A.return}return C=KT,KT=!1,C}function jc(A,v,C){var I=v.updateQueue;if(I=I!==null?I.lastEffect:null,I!==null){var P=I=I.next;do{if((P.tag&A)===A){var N=P.destroy;P.destroy=void 0,N!==void 0&&n2(v,C,N)}P=P.next}while(P!==I)}}function R0(A,v){if(v=v.updateQueue,v=v!==null?v.lastEffect:null,v!==null){var C=v=v.next;do{if((C.tag&A)===A){var I=C.create;C.destroy=I()}C=C.next}while(C!==v)}}function i2(A){var v=A.ref;if(v!==null){var C=A.stateNode;switch(A.tag){case 5:A=Y(C);break;default:A=C}typeof v=="function"?v(A):v.current=A}}function ZT(A,v,C){if(Kr&&typeof Kr.onCommitFiberUnmount=="function")try{Kr.onCommitFiberUnmount(gl,v)}catch{}switch(v.tag){case 0:case 11:case 14:case 15:if(A=v.updateQueue,A!==null&&(A=A.lastEffect,A!==null)){var I=A=A.next;do{var P=I,N=P.destroy;P=P.tag,N!==void 0&&((P&2)!==0||(P&4)!==0)&&n2(v,C,N),I=I.next}while(I!==A)}break;case 1:if(cA(v,C),A=v.stateNode,typeof A.componentWillUnmount=="function")try{A.props=v.memoizedProps,A.state=v.memoizedState,A.componentWillUnmount()}catch(ne){Or(v,C,ne)}break;case 5:cA(v,C);break;case 4:Se?rB(A,v,C):le&&le&&(v=v.stateNode.containerInfo,C=cn(v),un(v,C))}}function $T(A,v,C){for(var I=v;;)if(ZT(A,I,C),I.child===null||Se&&I.tag===4){if(I===v)break;for(;I.sibling===null;){if(I.return===null||I.return===v)return;I=I.return}I.sibling.return=I.return,I=I.sibling}else I.child.return=I,I=I.child}function eB(A){var v=A.alternate;v!==null&&(A.alternate=null,eB(v)),A.child=null,A.deletions=null,A.sibling=null,A.tag===5&&(v=A.stateNode,v!==null&&Ke(v)),A.stateNode=null,A.return=null,A.dependencies=null,A.memoizedProps=null,A.memoizedState=null,A.pendingProps=null,A.stateNode=null,A.updateQueue=null}function tB(A){return A.tag===5||A.tag===3||A.tag===4}function nB(A){e:for(;;){for(;A.sibling===null;){if(A.return===null||tB(A.return))return null;A=A.return}for(A.sibling.return=A.return,A=A.sibling;A.tag!==5&&A.tag!==6&&A.tag!==18;){if(A.flags&2||A.child===null||A.tag===4)continue e;A.child.return=A,A=A.child}if(!(A.flags&2))return A.stateNode}}function iB(A){if(Se){e:{for(var v=A.return;v!==null;){if(tB(v))break e;v=v.return}throw Error(o(160))}var C=v;switch(C.tag){case 5:v=C.stateNode,C.flags&32&&(ae(v),C.flags&=-33),C=nB(A),s2(A,C,v);break;case 3:case 4:v=C.stateNode.containerInfo,C=nB(A),r2(A,C,v);break;default:throw Error(o(161))}}}function r2(A,v,C){var I=A.tag;if(I===5||I===6)A=A.stateNode,v?Ce(C,A,v):Le(C,A);else if(I!==4&&(A=A.child,A!==null))for(r2(A,v,C),A=A.sibling;A!==null;)r2(A,v,C),A=A.sibling}function s2(A,v,C){var I=A.tag;if(I===5||I===6)A=A.stateNode,v?ge(C,A,v):Ie(C,A);else if(I!==4&&(A=A.child,A!==null))for(s2(A,v,C),A=A.sibling;A!==null;)s2(A,v,C),A=A.sibling}function rB(A,v,C){for(var I=v,P=!1,N,ne;;){if(!P){P=I.return;e:for(;;){if(P===null)throw Error(o(160));switch(N=P.stateNode,P.tag){case 5:ne=!1;break e;case 3:N=N.containerInfo,ne=!0;break e;case 4:N=N.containerInfo,ne=!0;break e}P=P.return}P=!0}if(I.tag===5||I.tag===6)$T(A,I,C),ne?Je(N,I.stateNode):Re(N,I.stateNode);else if(I.tag===18)ne?vn(N,I.stateNode):jt(N,I.stateNode);else if(I.tag===4){if(I.child!==null){N=I.stateNode.containerInfo,ne=!0,I.child.return=I,I=I.child;continue}}else if(ZT(A,I,C),I.child!==null){I.child.return=I,I=I.child;continue}if(I===v)break;for(;I.sibling===null;){if(I.return===null||I.return===v)return;I=I.return,I.tag===4&&(P=!1)}I.sibling.return=I.return,I=I.sibling}}function o2(A,v){if(Se){switch(v.tag){case 0:case 11:case 14:case 15:jc(3,v,v.return),R0(3,v),jc(5,v,v.return);return;case 1:return;case 5:var C=v.stateNode;if(C!=null){var I=v.memoizedProps;A=A!==null?A.memoizedProps:I;var P=v.type,N=v.updateQueue;v.updateQueue=null,N!==null&&re(C,N,P,A,I,v)}return;case 6:if(v.stateNode===null)throw Error(o(162));C=v.memoizedProps,ye(v.stateNode,A!==null?A.memoizedProps:C,C);return;case 3:pe&&A!==null&&A.memoizedState.isDehydrated&&Wt(v.stateNode.containerInfo);return;case 12:return;case 13:uA(v);return;case 19:uA(v);return;case 17:return}throw Error(o(163))}switch(v.tag){case 0:case 11:case 14:case 15:jc(3,v,v.return),R0(3,v),jc(5,v,v.return);return;case 12:return;case 13:uA(v);return;case 19:uA(v);return;case 3:pe&&A!==null&&A.memoizedState.isDehydrated&&Wt(v.stateNode.containerInfo);break;case 22:case 23:return}e:if(le){switch(v.tag){case 1:case 5:case 6:break e;case 3:case 4:v=v.stateNode,un(v.containerInfo,v.pendingChildren);break e}throw Error(o(163))}}function uA(A){var v=A.updateQueue;if(v!==null){A.updateQueue=null;var C=A.stateNode;C===null&&(C=A.stateNode=new a7),v.forEach(function(I){var P=v7.bind(null,A,I);C.has(I)||(C.add(I),I.then(P,P))})}}function c7(A,v){for(tt=v;tt!==null;){v=tt;var C=v.deletions;if(C!==null)for(var I=0;I<C.length;I++){var P=C[I];try{var N=A;Se?rB(N,P,v):$T(N,P,v);var ne=P.alternate;ne!==null&&(ne.return=null),P.return=null}catch(ft){Or(P,v,ft)}}if(C=v.child,(v.subtreeFlags&12854)!==0&&C!==null)C.return=v,tt=C;else for(;tt!==null;){v=tt;try{var ue=v.flags;if(ue&32&&Se&&ae(v.stateNode),ue&512){var Fe=v.alternate;if(Fe!==null){var Ye=Fe.ref;Ye!==null&&(typeof Ye=="function"?Ye(null):Ye.current=null)}}if(ue&8192)switch(v.tag){case 13:if(v.memoizedState!==null){var at=v.alternate;(at===null||at.memoizedState===null)&&(d2=Tn())}break;case 22:var Bt=v.memoizedState!==null,_t=v.alternate,yn=_t!==null&&_t.memoizedState!==null;if(C=v,Se){e:if(I=C,P=Bt,N=null,Se)for(var dt=I;;){if(dt.tag===5){if(N===null){N=dt;var ir=dt.stateNode;P?qe(ir):we(dt.stateNode,dt.memoizedProps)}}else if(dt.tag===6){if(N===null){var Ds=dt.stateNode;P?ze(Ds):We(Ds,dt.memoizedProps)}}else if((dt.tag!==22&&dt.tag!==23||dt.memoizedState===null||dt===I)&&dt.child!==null){dt.child.return=dt,dt=dt.child;continue}if(dt===I)break;for(;dt.sibling===null;){if(dt.return===null||dt.return===I)break e;N===dt&&(N=null),dt=dt.return}N===dt&&(N=null),dt.sibling.return=dt.return,dt=dt.sibling}}if(Bt&&!yn&&(C.mode&1)!==0){tt=C;for(var Ee=C.child;Ee!==null;){for(C=tt=Ee;tt!==null;){I=tt;var de=I.child;switch(I.tag){case 0:case 11:case 14:case 15:jc(4,I,I.return);break;case 1:cA(I,I.return);var Be=I.stateNode;if(typeof Be.componentWillUnmount=="function"){var nt=I.return;try{Be.props=I.memoizedProps,Be.state=I.memoizedState,Be.componentWillUnmount()}catch(ft){Or(I,nt,ft)}}break;case 5:cA(I,I.return);break;case 22:if(I.memoizedState!==null){aB(C);continue}}de!==null?(de.return=I,tt=de):aB(C)}Ee=Ee.sibling}}}switch(ue&4102){case 2:iB(v),v.flags&=-3;break;case 6:iB(v),v.flags&=-3,o2(v.alternate,v);break;case 4096:v.flags&=-4097;break;case 4100:v.flags&=-4097,o2(v.alternate,v);break;case 4:o2(v.alternate,v)}}catch(ft){Or(v,v.return,ft)}if(C=v.sibling,C!==null){C.return=v.return,tt=C;break}tt=v.return}}}function u7(A,v,C){tt=A,sB(A)}function sB(A,v,C){for(var I=(A.mode&1)!==0;tt!==null;){var P=tt,N=P.child;if(P.tag===22&&I){var ne=P.memoizedState!==null||lA;if(!ne){var ue=P.alternate,Fe=ue!==null&&ue.memoizedState!==null||Wc;ue=lA;var Ye=Wc;if(lA=ne,(Wc=Fe)&&!Ye)for(tt=P;tt!==null;)ne=tt,Fe=ne.child,ne.tag===22&&ne.memoizedState!==null?lB(P):Fe!==null?(Fe.return=ne,tt=Fe):lB(P);for(;N!==null;)tt=N,sB(N),N=N.sibling;tt=P,lA=ue,Wc=Ye}oB(A)}else(P.subtreeFlags&8772)!==0&&N!==null?(N.return=P,tt=N):oB(A)}}function oB(A){for(;tt!==null;){var v=tt;if((v.flags&8772)!==0){var C=v.alternate;try{if((v.flags&8772)!==0)switch(v.tag){case 0:case 11:case 15:Wc||R0(5,v);break;case 1:var I=v.stateNode;if(v.flags&4&&!Wc)if(C===null)I.componentDidMount();else{var P=v.elementType===v.type?C.memoizedProps:$i(v.type,C.memoizedProps);I.componentDidUpdate(P,C.memoizedState,I.__reactInternalSnapshotBeforeUpdate)}var N=v.updateQueue;N!==null&&eT(v,N,I);break;case 3:var ne=v.updateQueue;if(ne!==null){if(C=null,v.child!==null)switch(v.child.tag){case 5:C=Y(v.child.stateNode);break;case 1:C=v.child.stateNode}eT(v,ne,C)}break;case 5:var ue=v.stateNode;C===null&&v.flags&4&&je(ue,v.type,v.memoizedProps,v);break;case 6:break;case 4:break;case 12:break;case 13:if(pe&&v.memoizedState===null){var Fe=v.alternate;if(Fe!==null){var Ye=Fe.memoizedState;if(Ye!==null){var at=Ye.dehydrated;at!==null&&Ot(at)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Wc||v.flags&512&&i2(v)}catch(Bt){Or(v,v.return,Bt)}}if(v===A){tt=null;break}if(C=v.sibling,C!==null){C.return=v.return,tt=C;break}tt=v.return}}function aB(A){for(;tt!==null;){var v=tt;if(v===A){tt=null;break}var C=v.sibling;if(C!==null){C.return=v.return,tt=C;break}tt=v.return}}function lB(A){for(;tt!==null;){var v=tt;try{switch(v.tag){case 0:case 11:case 15:var C=v.return;try{R0(4,v)}catch(Fe){Or(v,C,Fe)}break;case 1:var I=v.stateNode;if(typeof I.componentDidMount=="function"){var P=v.return;try{I.componentDidMount()}catch(Fe){Or(v,P,Fe)}}var N=v.return;try{i2(v)}catch(Fe){Or(v,N,Fe)}break;case 5:var ne=v.return;try{i2(v)}catch(Fe){Or(v,ne,Fe)}}}catch(Fe){Or(v,v.return,Fe)}if(v===A){tt=null;break}var ue=v.sibling;if(ue!==null){ue.return=v.return,tt=ue;break}tt=v.return}}var hA=0,fA=1,dA=2,pA=3,mA=4;if(typeof Symbol=="function"&&Symbol.for){var P0=Symbol.for;hA=P0("selector.component"),fA=P0("selector.has_pseudo_class"),dA=P0("selector.role"),pA=P0("selector.test_id"),mA=P0("selector.text")}function a2(A){var v=Pe(A);if(v!=null){if(typeof v.memoizedProps["data-testname"]!="string")throw Error(o(364));return v}if(A=be(A),A===null)throw Error(o(362));return A.stateNode.current}function l2(A,v){switch(v.$$typeof){case hA:if(A.type===v.value)return!0;break;case fA:e:{v=v.value,A=[A,0];for(var C=0;C<A.length;){var I=A[C++],P=A[C++],N=v[P];if(I.tag!==5||!ie(I)){for(;N!=null&&l2(I,N);)P++,N=v[P];if(P===v.length){v=!0;break e}else for(I=I.child;I!==null;)A.push(I,P),I=I.sibling}}v=!1}return v;case dA:if(A.tag===5&&fe(A.stateNode,v.value))return!0;break;case mA:if((A.tag===5||A.tag===6)&&(A=W(A),A!==null&&0<=A.indexOf(v.value)))return!0;break;case pA:if(A.tag===5&&(A=A.memoizedProps["data-testname"],typeof A=="string"&&A.toLowerCase()===v.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function c2(A){switch(A.$$typeof){case hA:return"<"+(b(A.value)||"Unknown")+">";case fA:return":has("+(c2(A)||"")+")";case dA:return'[role="'+A.value+'"]';case mA:return'"'+A.value+'"';case pA:return'[data-testname="'+A.value+'"]';default:throw Error(o(365))}}function cB(A,v){var C=[];A=[A,0];for(var I=0;I<A.length;){var P=A[I++],N=A[I++],ne=v[N];if(P.tag!==5||!ie(P)){for(;ne!=null&&l2(P,ne);)N++,ne=v[N];if(N===v.length)C.push(P);else for(P=P.child;P!==null;)A.push(P,N),P=P.sibling}}return C}function u2(A,v){if(!He)throw Error(o(363));A=a2(A),A=cB(A,v),v=[],A=Array.from(A);for(var C=0;C<A.length;){var I=A[C++];if(I.tag===5)ie(I)||v.push(I.stateNode);else for(I=I.child;I!==null;)A.push(I),I=I.sibling}return v}var h7=Math.ceil,AA=a.ReactCurrentDispatcher,h2=a.ReactCurrentOwner,Zn=a.ReactCurrentBatchConfig,Gt=0,oi=null,ai=null,Ni=0,ns=0,Hh=Oi(0),Ai=0,D0=null,Vh=0,gA=0,f2=0,F0=null,kr=null,d2=0,p2=1/0;function Wh(){p2=Tn()+500}var vA=!1,m2=null,yl=null,_A=!1,xl=null,yA=0,L0=0,A2=null,xA=-1,EA=0;function xr(){return(Gt&6)!==0?Tn():xA!==-1?xA:xA=Tn()}function El(A){return(A.mode&1)===0?1:(Gt&2)!==0&&Ni!==0?Ni&-Ni:Nc.transition!==null?(EA===0&&(A=Aa,Aa<<=1,(Aa&4194240)===0&&(Aa=64),EA=A),EA):(A=Qt,A!==0?A:ke())}function Rs(A,v,C){if(50<L0)throw L0=0,A2=null,Error(o(185));var I=wA(A,v);return I===null?null:(Fo(I,v,C),((Gt&2)===0||I!==oi)&&(I===oi&&((Gt&2)===0&&(gA|=v),Ai===4&&wl(I,Ni)),Ur(I,C),v===1&&Gt===0&&(A.mode&1)===0&&(Wh(),ko&&Lr())),I)}function wA(A,v){A.lanes|=v;var C=A.alternate;for(C!==null&&(C.lanes|=v),C=A,A=A.return;A!==null;)A.childLanes|=v,C=A.alternate,C!==null&&(C.childLanes|=v),C=A,A=A.return;return C.tag===3?C.stateNode:null}function Ur(A,v){var C=A.callbackNode;f0(A,v);var I=Oc(A,A===oi?Ni:0);if(I===0)C!==null&&Ph(C),A.callbackNode=null,A.callbackPriority=0;else if(v=I&-I,A.callbackPriority!==v){if(C!=null&&Ph(C),v===1)A.tag===0?v0(hB.bind(null,A)):g0(hB.bind(null,A)),xe?Ue(function(){Gt===0&&Lr()}):ya(Al,Lr),C=null;else{switch(d0(I)){case 1:C=Al;break;case 4:C=z1;break;case 16:C=vr;break;case 536870912:C=m0;break;default:C=vr}C=yB(C,uB.bind(null,A))}A.callbackPriority=v,A.callbackNode=C}}function uB(A,v){if(xA=-1,EA=0,(Gt&6)!==0)throw Error(o(327));var C=A.callbackNode;if(qc()&&A.callbackNode!==C)return null;var I=Oc(A,A===oi?Ni:0);if(I===0)return null;if((I&30)!==0||(I&A.expiredLanes)!==0||v)v=MA(A,I);else{v=I;var P=Gt;Gt|=2;var N=pB();(oi!==A||Ni!==v)&&(Wh(),Xc(A,v));do try{p7();break}catch(ue){dB(A,ue)}while(1);Lh(),AA.current=N,Gt=P,ai!==null?v=0:(oi=null,Ni=0,v=Ai)}if(v!==0){if(v===2&&(P=_a(A),P!==0&&(I=P,v=g2(A,P))),v===1)throw C=D0,Xc(A,0),wl(A,I),Ur(A,Tn()),C;if(v===6)wl(A,I);else{if(P=A.current.alternate,(I&30)===0&&!f7(P)&&(v=MA(A,I),v===2&&(N=_a(A),N!==0&&(I=N,v=g2(A,N))),v===1))throw C=D0,Xc(A,0),wl(A,I),Ur(A,Tn()),C;switch(A.finishedWork=P,A.finishedLanes=I,v){case 0:case 1:throw Error(o(345));case 2:Yc(A,kr);break;case 3:if(wl(A,I),(I&130023424)===I&&(v=d2+500-Tn(),10<v)){if(Oc(A,0)!==0)break;if(P=A.suspendedLanes,(P&I)!==I){xr(),A.pingedLanes|=A.suspendedLanes&P;break}A.timeoutHandle=ce(Yc.bind(null,A,kr),v);break}Yc(A,kr);break;case 4:if(wl(A,I),(I&4194240)===I)break;for(v=A.eventTimes,P=-1;0<I;){var ne=31-Zi(I);N=1<<ne,ne=v[ne],ne>P&&(P=ne),I&=~N}if(I=P,I=Tn()-I,I=(120>I?120:480>I?480:1080>I?1080:1920>I?1920:3e3>I?3e3:4320>I?4320:1960*h7(I/1960))-I,10<I){A.timeoutHandle=ce(Yc.bind(null,A,kr),I);break}Yc(A,kr);break;case 5:Yc(A,kr);break;default:throw Error(o(329))}}}return Ur(A,Tn()),A.callbackNode===C?uB.bind(null,A):null}function g2(A,v){var C=F0;return A.current.memoizedState.isDehydrated&&(Xc(A,v).flags|=256),A=MA(A,v),A!==2&&(v=kr,kr=C,v!==null&&v2(v)),A}function v2(A){kr===null?kr=A:kr.push.apply(kr,A)}function f7(A){for(var v=A;;){if(v.flags&16384){var C=v.updateQueue;if(C!==null&&(C=C.stores,C!==null))for(var I=0;I<C.length;I++){var P=C[I],N=P.getSnapshot;P=P.value;try{if(!Zr(N(),P))return!1}catch{return!1}}}if(C=v.child,v.subtreeFlags&16384&&C!==null)C.return=v,v=C;else{if(v===A)break;for(;v.sibling===null;){if(v.return===null||v.return===A)return!0;v=v.return}v.sibling.return=v.return,v=v.sibling}}return!0}function wl(A,v){for(v&=~f2,v&=~gA,A.suspendedLanes|=v,A.pingedLanes&=~v,A=A.expirationTimes;0<v;){var C=31-Zi(v),I=1<<C;A[C]=-1,v&=~I}}function hB(A){if((Gt&6)!==0)throw Error(o(327));qc();var v=Oc(A,0);if((v&1)===0)return Ur(A,Tn()),null;var C=MA(A,v);if(A.tag!==0&&C===2){var I=_a(A);I!==0&&(v=I,C=g2(A,I))}if(C===1)throw C=D0,Xc(A,0),wl(A,v),Ur(A,Tn()),C;if(C===6)throw Error(o(345));return A.finishedWork=A.current.alternate,A.finishedLanes=v,Yc(A,kr),Ur(A,Tn()),null}function fB(A){xl!==null&&xl.tag===0&&(Gt&6)===0&&qc();var v=Gt;Gt|=1;var C=Zn.transition,I=Qt;try{if(Zn.transition=null,Qt=1,A)return A()}finally{Qt=I,Zn.transition=C,Gt=v,(Gt&6)===0&&Lr()}}function _2(){ns=Hh.current,It(Hh)}function Xc(A,v){A.finishedWork=null,A.finishedLanes=0;var C=A.timeoutHandle;if(C!==ve&&(A.timeoutHandle=ve,he(C)),ai!==null)for(C=ai.return;C!==null;){var I=C;switch(kx(I),I.tag){case 1:I=I.type.childContextTypes,I!=null&&pl();break;case 3:zh(),It(Jn),It(en),Hx();break;case 5:zx(I);break;case 4:zh();break;case 13:It(Fn);break;case 19:It(Fn);break;case 10:Uo(I.type._context);break;case 22:case 23:_2()}C=C.return}if(oi=A,ai=A=Ml(A.current,null),Ni=ns=v,Ai=0,D0=null,f2=gA=Vh=0,kr=F0=null,mi!==null){for(v=0;v<mi.length;v++)if(C=mi[v],I=C.interleaved,I!==null){C.interleaved=null;var P=I.next,N=C.pending;if(N!==null){var ne=N.next;N.next=P,I.next=ne}C.pending=I}mi=null}return A}function dB(A,v){do{var C=ai;try{if(Lh(),J1.current=nA,K1){for(var I=Wn.memoizedState;I!==null;){var P=I.queue;P!==null&&(P.pending=null),I=I.next}K1=!1}if(Qh=0,Ii=er=Wn=null,M0=!1,C0=0,h2.current=null,C===null||C.return===null){Ai=1,D0=v,ai=null;break}e:{var N=A,ne=C.return,ue=C,Fe=v;if(v=Ni,ue.flags|=32768,Fe!==null&&typeof Fe=="object"&&typeof Fe.then=="function"){var Ye=Fe,at=ue,Bt=at.tag;if((at.mode&1)===0&&(Bt===0||Bt===11||Bt===15)){var _t=at.alternate;_t?(at.updateQueue=_t.updateQueue,at.memoizedState=_t.memoizedState,at.lanes=_t.lanes):(at.updateQueue=null,at.memoizedState=null)}var yn=FT(ne);if(yn!==null){yn.flags&=-257,LT(yn,ne,ue,N,v),yn.mode&1&&DT(N,Ye,v),v=yn,Fe=Ye;var dt=v.updateQueue;if(dt===null){var ir=new Set;ir.add(Fe),v.updateQueue=ir}else dt.add(Fe);break e}else{if((v&1)===0){DT(N,Ye,v),y2();break e}Fe=Error(o(426))}}else if(Bn&&ue.mode&1){var Ds=FT(ne);if(Ds!==null){(Ds.flags&65536)===0&&(Ds.flags|=256),LT(Ds,ne,ue,N,v),Nx(Fe);break e}}N=Fe,Ai!==4&&(Ai=2),F0===null?F0=[N]:F0.push(N),Fe=Jx(Fe,ue),ue=ne;do{switch(ue.tag){case 3:ue.flags|=65536,v&=-v,ue.lanes|=v;var Ee=RT(ue,Fe,v);$I(ue,Ee);break e;case 1:N=Fe;var de=ue.type,Be=ue.stateNode;if((ue.flags&128)===0&&(typeof de.getDerivedStateFromError=="function"||Be!==null&&typeof Be.componentDidCatch=="function"&&(yl===null||!yl.has(Be)))){ue.flags|=65536,v&=-v,ue.lanes|=v;var nt=PT(ue,N,v);$I(ue,nt);break e}}ue=ue.return}while(ue!==null)}AB(C)}catch(ft){v=ft,ai===C&&C!==null&&(ai=C=C.return);continue}break}while(1)}function pB(){var A=AA.current;return AA.current=nA,A===null?nA:A}function y2(){(Ai===0||Ai===3||Ai===2)&&(Ai=4),oi===null||(Vh&268435455)===0&&(gA&268435455)===0||wl(oi,Ni)}function MA(A,v){var C=Gt;Gt|=2;var I=pB();oi===A&&Ni===v||Xc(A,v);do try{d7();break}catch(P){dB(A,P)}while(1);if(Lh(),Gt=C,AA.current=I,ai!==null)throw Error(o(261));return oi=null,Ni=0,Ai}function d7(){for(;ai!==null;)mB(ai)}function p7(){for(;ai!==null&&!p0();)mB(ai)}function mB(A){var v=_B(A.alternate,A,ns);A.memoizedProps=A.pendingProps,v===null?AB(A):ai=v,h2.current=null}function AB(A){var v=A;do{var C=v.alternate;if(A=v.return,(v.flags&32768)===0){if(C=i7(C,v,ns),C!==null){ai=C;return}}else{if(C=o7(C,v),C!==null){C.flags&=32767,ai=C;return}if(A!==null)A.flags|=32768,A.subtreeFlags=0,A.deletions=null;else{Ai=6,ai=null;return}}if(v=v.sibling,v!==null){ai=v;return}ai=v=A}while(v!==null);Ai===0&&(Ai=5)}function Yc(A,v){var C=Qt,I=Zn.transition;try{Zn.transition=null,Qt=1,m7(A,v,C)}finally{Zn.transition=I,Qt=C}return null}function m7(A,v,C){do qc();while(xl!==null);if((Gt&6)!==0)throw Error(o(327));var I=A.finishedWork,P=A.finishedLanes;if(I===null)return null;if(A.finishedWork=null,A.finishedLanes=0,I===A.current)throw Error(o(177));A.callbackNode=null,A.callbackPriority=0;var N=I.lanes|I.childLanes;if(ml(A,N),A===oi&&(ai=oi=null,Ni=0),(I.subtreeFlags&2064)===0&&(I.flags&2064)===0||_A||(_A=!0,yB(vr,function(){return qc(),null})),N=(I.flags&15990)!==0,(I.subtreeFlags&15990)!==0||N){N=Zn.transition,Zn.transition=null;var ne=Qt;Qt=1;var ue=Gt;Gt|=4,h2.current=null,l7(A,I),c7(A,I),z(A.containerInfo),A.current=I,u7(I),G1(),Gt=ue,Qt=ne,Zn.transition=N}else A.current=I;if(_A&&(_A=!1,xl=A,yA=P),N=A.pendingLanes,N===0&&(yl=null),A0(I.stateNode),Ur(A,Tn()),v!==null)for(C=A.onRecoverableError,I=0;I<v.length;I++)C(v[I]);if(vA)throw vA=!1,A=m2,m2=null,A;return(yA&1)!==0&&A.tag!==0&&qc(),N=A.pendingLanes,(N&1)!==0?A===A2?L0++:(L0=0,A2=A):L0=0,Lr(),null}function qc(){if(xl!==null){var A=d0(yA),v=Zn.transition,C=Qt;try{if(Zn.transition=null,Qt=16>A?16:A,xl===null)var I=!1;else{if(A=xl,xl=null,yA=0,(Gt&6)!==0)throw Error(o(331));var P=Gt;for(Gt|=4,tt=A.current;tt!==null;){var N=tt,ne=N.child;if((tt.flags&16)!==0){var ue=N.deletions;if(ue!==null){for(var Fe=0;Fe<ue.length;Fe++){var Ye=ue[Fe];for(tt=Ye;tt!==null;){var at=tt;switch(at.tag){case 0:case 11:case 15:jc(8,at,N)}var Bt=at.child;if(Bt!==null)Bt.return=at,tt=Bt;else for(;tt!==null;){at=tt;var _t=at.sibling,yn=at.return;if(eB(at),at===Ye){tt=null;break}if(_t!==null){_t.return=yn,tt=_t;break}tt=yn}}}var dt=N.alternate;if(dt!==null){var ir=dt.child;if(ir!==null){dt.child=null;do{var Ds=ir.sibling;ir.sibling=null,ir=Ds}while(ir!==null)}}tt=N}}if((N.subtreeFlags&2064)!==0&&ne!==null)ne.return=N,tt=ne;else e:for(;tt!==null;){if(N=tt,(N.flags&2048)!==0)switch(N.tag){case 0:case 11:case 15:jc(9,N,N.return)}var Ee=N.sibling;if(Ee!==null){Ee.return=N.return,tt=Ee;break e}tt=N.return}}var de=A.current;for(tt=de;tt!==null;){ne=tt;var Be=ne.child;if((ne.subtreeFlags&2064)!==0&&Be!==null)Be.return=ne,tt=Be;else e:for(ne=de;tt!==null;){if(ue=tt,(ue.flags&2048)!==0)try{switch(ue.tag){case 0:case 11:case 15:R0(9,ue)}}catch(ft){Or(ue,ue.return,ft)}if(ue===ne){tt=null;break e}var nt=ue.sibling;if(nt!==null){nt.return=ue.return,tt=nt;break e}tt=ue.return}}if(Gt=P,Lr(),Kr&&typeof Kr.onPostCommitFiberRoot=="function")try{Kr.onPostCommitFiberRoot(gl,A)}catch{}I=!0}return I}finally{Qt=C,Zn.transition=v}}return!1}function gB(A,v,C){v=Jx(C,v),v=RT(A,v,1),_l(A,v),v=xr(),A=wA(A,1),A!==null&&(Fo(A,1,v),Ur(A,v))}function Or(A,v,C){if(A.tag===3)gB(A,A,C);else for(;v!==null;){if(v.tag===3){gB(v,A,C);break}else if(v.tag===1){var I=v.stateNode;if(typeof v.type.getDerivedStateFromError=="function"||typeof I.componentDidCatch=="function"&&(yl===null||!yl.has(I))){A=Jx(C,A),A=PT(v,A,1),_l(v,A),A=xr(),v=wA(v,1),v!==null&&(Fo(v,1,A),Ur(v,A));break}}v=v.return}}function A7(A,v,C){var I=A.pingCache;I!==null&&I.delete(v),v=xr(),A.pingedLanes|=A.suspendedLanes&C,oi===A&&(Ni&C)===C&&(Ai===4||Ai===3&&(Ni&130023424)===Ni&&500>Tn()-d2?Xc(A,0):f2|=C),Ur(A,v)}function vB(A,v){v===0&&((A.mode&1)===0?v=1:(v=ga,ga<<=1,(ga&130023424)===0&&(ga=4194304)));var C=xr();A=wA(A,v),A!==null&&(Fo(A,v,C),Ur(A,C))}function g7(A){var v=A.memoizedState,C=0;v!==null&&(C=v.retryLane),vB(A,C)}function v7(A,v){var C=0;switch(A.tag){case 13:var I=A.stateNode,P=A.memoizedState;P!==null&&(C=P.retryLane);break;case 19:I=A.stateNode;break;default:throw Error(o(314))}I!==null&&I.delete(v),vB(A,C)}var _B;_B=function(A,v,C){if(A!==null)if(A.memoizedProps!==v.pendingProps||Jn.current)ts=!0;else{if((A.lanes&C)===0&&(v.flags&128)===0)return ts=!1,s7(A,v,C);ts=(A.flags&131072)!==0}else ts=!1,Bn&&(v.flags&1048576)!==0&&sT(v,X1,v.index);switch(v.lanes=0,v.tag){case 2:var I=v.type;A!==null&&(A.alternate=null,v.alternate=null,v.flags|=2),A=v.pendingProps;var P=Jr(v,en.current);bi(v,C),P=Wx(null,v,I,A,P,C);var N=jx();return v.flags|=1,typeof P=="object"&&P!==null&&typeof P.render=="function"&&P.$$typeof===void 0?(v.tag=1,v.memoizedState=null,v.updateQueue=null,Kn(I)?(N=!0,Do(v)):N=!1,v.memoizedState=P.state!==null&&P.state!==void 0?P.state:null,Px(v),P.updater=W1,v.stateNode=P,P._reactInternals=v,Fx(v,I,A,C),v=$x(null,v,I,!0,N,C)):(v.tag=0,Bn&&N&&Lx(v),yr(null,v,P,C),v=v.child),v;case 16:I=v.elementType;e:{switch(A!==null&&(A.alternate=null,v.alternate=null,v.flags|=2),A=v.pendingProps,P=I._init,I=P(I._payload),v.type=I,P=v.tag=y7(I),A=$i(I,A),P){case 0:v=Zx(null,v,I,A,C);break e;case 1:v=HT(null,v,I,A,C);break e;case 11:v=OT(null,v,I,A,C);break e;case 14:v=NT(null,v,I,$i(I.type,A),C);break e}throw Error(o(306,I,""))}return v;case 0:return I=v.type,P=v.pendingProps,P=v.elementType===I?P:$i(I,P),Zx(A,v,I,P,C);case 1:return I=v.type,P=v.pendingProps,P=v.elementType===I?P:$i(I,P),HT(A,v,I,P,C);case 3:e:{if(VT(v),A===null)throw Error(o(387));I=v.pendingProps,N=v.memoizedState,P=N.element,ZI(A,v),V1(v,I,null,C);var ne=v.memoizedState;if(I=ne.element,pe&&N.isDehydrated)if(N={element:I,isDehydrated:!1,cache:ne.cache,transitions:ne.transitions},v.updateQueue.baseState=N,v.memoizedState=N,v.flags&256){P=Error(o(423)),v=WT(A,v,I,C,P);break e}else if(I!==P){P=Error(o(424)),v=WT(A,v,I,C,P);break e}else for(pe&&(es=Ae(v.stateNode.containerInfo),$r=v,Bn=!0,ro=null,_0=!1),C=hT(v,null,I,C),v.child=C;C;)C.flags=C.flags&-3|4096,C=C.sibling;else{if(Oh(),I===P){v=Ca(A,v,C);break e}yr(A,v,I,C)}v=v.child}return v;case 5:return fT(v),A===null&&Ox(v),I=v.type,P=v.pendingProps,N=A!==null?A.memoizedProps:null,ne=P.children,oe(I,P)?ne=null:N!==null&&oe(I,N)&&(v.flags|=32),QT(A,v),yr(A,v,ne,C),v.child;case 6:return A===null&&Ox(v),null;case 13:return jT(A,v,C);case 4:return Gx(v,v.stateNode.containerInfo),I=v.pendingProps,A===null?v.child=Nh(v,null,I,C):yr(A,v,I,C),v.child;case 11:return I=v.type,P=v.pendingProps,P=v.elementType===I?P:$i(I,P),OT(A,v,I,P,C);case 7:return yr(A,v,v.pendingProps,C),v.child;case 8:return yr(A,v,v.pendingProps.children,C),v.child;case 12:return yr(A,v,v.pendingProps.children,C),v.child;case 10:e:{if(I=v.type._context,P=v.pendingProps,N=v.memoizedProps,ne=P.value,Q1(v,I,ne),N!==null)if(Zr(N.value,ne)){if(N.children===P.children&&!Jn.current){v=Ca(A,v,C);break e}}else for(N=v.child,N!==null&&(N.return=v);N!==null;){var ue=N.dependencies;if(ue!==null){ne=N.child;for(var Fe=ue.firstContext;Fe!==null;){if(Fe.context===I){if(N.tag===1){Fe=xa(-1,C&-C),Fe.tag=2;var Ye=N.updateQueue;if(Ye!==null){Ye=Ye.shared;var at=Ye.pending;at===null?Fe.next=Fe:(Fe.next=at.next,at.next=Fe),Ye.pending=Fe}}N.lanes|=C,Fe=N.alternate,Fe!==null&&(Fe.lanes|=C),si(N.return,C,v),ue.lanes|=C;break}Fe=Fe.next}}else if(N.tag===10)ne=N.type===v.type?null:N.child;else if(N.tag===18){if(ne=N.return,ne===null)throw Error(o(341));ne.lanes|=C,ue=ne.alternate,ue!==null&&(ue.lanes|=C),si(ne,C,v),ne=N.sibling}else ne=N.child;if(ne!==null)ne.return=N;else for(ne=N;ne!==null;){if(ne===v){ne=null;break}if(N=ne.sibling,N!==null){N.return=ne.return,ne=N;break}ne=ne.return}N=ne}yr(A,v,P.children,C),v=v.child}return v;case 9:return P=v.type,I=v.pendingProps.children,bi(v,C),P=_n(P),I=I(P),v.flags|=1,yr(A,v,I,C),v.child;case 14:return I=v.type,P=$i(I,v.pendingProps),P=$i(I.type,P),NT(A,v,I,P,C);case 15:return GT(A,v,v.type,v.pendingProps,C);case 17:return I=v.type,P=v.pendingProps,P=v.elementType===I?P:$i(I,P),A!==null&&(A.alternate=null,v.alternate=null,v.flags|=2),v.tag=1,Kn(I)?(A=!0,Do(v)):A=!1,bi(v,C),iT(v,I,P),Fx(v,I,P,C),$x(null,v,I,!0,A,C);case 19:return JT(A,v,C);case 22:return zT(A,v,C)}throw Error(o(156,v.tag))};function yB(A,v){return ya(A,v)}function _7(A,v,C,I){this.tag=A,this.key=C,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=v,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=I,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ps(A,v,C,I){return new _7(A,v,C,I)}function x2(A){return A=A.prototype,!(!A||!A.isReactComponent)}function y7(A){if(typeof A=="function")return x2(A)?1:0;if(A!=null){if(A=A.$$typeof,A===m)return 11;if(A===y)return 14}return 2}function Ml(A,v){var C=A.alternate;return C===null?(C=Ps(A.tag,v,A.key,A.mode),C.elementType=A.elementType,C.type=A.type,C.stateNode=A.stateNode,C.alternate=A,A.alternate=C):(C.pendingProps=v,C.type=A.type,C.flags=0,C.subtreeFlags=0,C.deletions=null),C.flags=A.flags&14680064,C.childLanes=A.childLanes,C.lanes=A.lanes,C.child=A.child,C.memoizedProps=A.memoizedProps,C.memoizedState=A.memoizedState,C.updateQueue=A.updateQueue,v=A.dependencies,C.dependencies=v===null?null:{lanes:v.lanes,firstContext:v.firstContext},C.sibling=A.sibling,C.index=A.index,C.ref=A.ref,C}function CA(A,v,C,I,P,N){var ne=2;if(I=A,typeof A=="function")x2(A)&&(ne=1);else if(typeof A=="string")ne=5;else e:switch(A){case u:return Jc(C.children,P,N,v);case h:ne=8,P|=8;break;case f:return A=Ps(12,C,v,P|2),A.elementType=f,A.lanes=N,A;case g:return A=Ps(13,C,v,P),A.elementType=g,A.lanes=N,A;case _:return A=Ps(19,C,v,P),A.elementType=_,A.lanes=N,A;case E:return SA(C,P,N,v);default:if(typeof A=="object"&&A!==null)switch(A.$$typeof){case d:ne=10;break e;case p:ne=9;break e;case m:ne=11;break e;case y:ne=14;break e;case x:ne=16,I=null;break e}throw Error(o(130,A==null?A:typeof A,""))}return v=Ps(ne,C,v,P),v.elementType=A,v.type=I,v.lanes=N,v}function Jc(A,v,C,I){return A=Ps(7,A,I,v),A.lanes=C,A}function SA(A,v,C,I){return A=Ps(22,A,I,v),A.elementType=E,A.lanes=C,A.stateNode={},A}function E2(A,v,C){return A=Ps(6,A,null,v),A.lanes=C,A}function w2(A,v,C){return v=Ps(4,A.children!==null?A.children:[],A.key,v),v.lanes=C,v.stateNode={containerInfo:A.containerInfo,pendingChildren:null,implementation:A.implementation},v}function x7(A,v,C,I,P){this.tag=v,this.containerInfo=A,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ve,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Rh(0),this.expirationTimes=Rh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rh(0),this.identifierPrefix=I,this.onRecoverableError=P,pe&&(this.mutableSourceEagerHydrationData=null)}function xB(A,v,C,I,P,N,ne,ue,Fe){return A=new x7(A,v,C,ue,Fe),v===1?(v=1,N===!0&&(v|=8)):v=0,N=Ps(3,null,null,v),A.current=N,N.stateNode=A,N.memoizedState={element:I,isDehydrated:C,cache:null,transitions:null},Px(N),A}function EB(A){if(!A)return Ar;A=A._reactInternals;e:{if(T(A)!==A||A.tag!==1)throw Error(o(170));var v=A;do{switch(v.tag){case 3:v=v.stateNode.context;break e;case 1:if(Kn(v.type)){v=v.stateNode.__reactInternalMemoizedMergedChildContext;break e}}v=v.return}while(v!==null);throw Error(o(171))}if(A.tag===1){var C=A.type;if(Kn(C))return Th(A,C,v)}return v}function wB(A){var v=A._reactInternals;if(v===void 0)throw typeof A.render=="function"?Error(o(188)):(A=Object.keys(A).join(","),Error(o(268,A)));return A=F(v),A===null?null:A.stateNode}function MB(A,v){if(A=A.memoizedState,A!==null&&A.dehydrated!==null){var C=A.retryLane;A.retryLane=C!==0&&C<v?C:v}}function M2(A,v){MB(A,v),(A=A.alternate)&&MB(A,v)}function E7(A){return A=F(A),A===null?null:A.stateNode}function w7(){return null}return n.attemptContinuousHydration=function(A){if(A.tag===13){var v=xr();Rs(A,134217728,v),M2(A,134217728)}},n.attemptHydrationAtCurrentPriority=function(A){if(A.tag===13){var v=xr(),C=El(A);Rs(A,C,v),M2(A,C)}},n.attemptSynchronousHydration=function(A){switch(A.tag){case 3:var v=A.stateNode;if(v.current.memoizedState.isDehydrated){var C=va(v.pendingLanes);C!==0&&(Lo(v,C|1),Ur(v,Tn()),(Gt&6)===0&&(Wh(),Lr()))}break;case 13:var I=xr();fB(function(){return Rs(A,1,I)}),M2(A,1)}},n.batchedUpdates=function(A,v){var C=Gt;Gt|=1;try{return A(v)}finally{Gt=C,Gt===0&&(Wh(),ko&&Lr())}},n.createComponentSelector=function(A){return{$$typeof:hA,value:A}},n.createContainer=function(A,v,C,I,P,N,ne){return xB(A,v,!1,null,C,I,P,N,ne)},n.createHasPseudoClassSelector=function(A){return{$$typeof:fA,value:A}},n.createHydrationContainer=function(A,v,C,I,P,N,ne,ue,Fe){return A=xB(C,I,!0,A,P,N,ne,ue,Fe),A.context=EB(null),C=A.current,I=xr(),P=El(C),N=xa(I,P),N.callback=v!=null?v:null,_l(C,N),A.current.lanes=P,Fo(A,P,I),Ur(A,I),A},n.createPortal=function(A,v,C){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:I==null?null:""+I,children:A,containerInfo:v,implementation:C}},n.createRoleSelector=function(A){return{$$typeof:dA,value:A}},n.createTestNameSelector=function(A){return{$$typeof:pA,value:A}},n.createTextSelector=function(A){return{$$typeof:mA,value:A}},n.deferredUpdates=function(A){var v=Qt,C=Zn.transition;try{return Zn.transition=null,Qt=16,A()}finally{Qt=v,Zn.transition=C}},n.discreteUpdates=function(A,v,C,I,P){var N=Qt,ne=Zn.transition;try{return Zn.transition=null,Qt=1,A(v,C,I,P)}finally{Qt=N,Zn.transition=ne,Gt===0&&Wh()}},n.findAllNodes=u2,n.findBoundingRects=function(A,v){if(!He)throw Error(o(363));v=u2(A,v),A=[];for(var C=0;C<v.length;C++)A.push(q(v[C]));for(v=A.length-1;0<v;v--){C=A[v];for(var I=C.x,P=I+C.width,N=C.y,ne=N+C.height,ue=v-1;0<=ue;ue--)if(v!==ue){var Fe=A[ue],Ye=Fe.x,at=Ye+Fe.width,Bt=Fe.y,_t=Bt+Fe.height;if(I>=Ye&&N>=Bt&&P<=at&&ne<=_t){A.splice(v,1);break}else if(I!==Ye||C.width!==Fe.width||_t<N||Bt>ne){if(!(N!==Bt||C.height!==Fe.height||at<I||Ye>P)){Ye>I&&(Fe.width+=Ye-I,Fe.x=I),at<P&&(Fe.width=P-Ye),A.splice(v,1);break}}else{Bt>N&&(Fe.height+=Bt-N,Fe.y=N),_t<ne&&(Fe.height=ne-Bt),A.splice(v,1);break}}}return A},n.findHostInstance=wB,n.findHostInstanceWithNoPortals=function(A){return A=L(A),A=A!==null?k(A):null,A===null?null:A.stateNode},n.findHostInstanceWithWarning=function(A){return wB(A)},n.flushControlled=function(A){var v=Gt;Gt|=1;var C=Zn.transition,I=Qt;try{Zn.transition=null,Qt=1,A()}finally{Qt=I,Zn.transition=C,Gt=v,Gt===0&&(Wh(),Lr())}},n.flushPassiveEffects=qc,n.flushSync=fB,n.focusWithin=function(A,v){if(!He)throw Error(o(363));for(A=a2(A),v=cB(A,v),v=Array.from(v),A=0;A<v.length;){var C=v[A++];if(!ie(C)){if(C.tag===5&&_e(C.stateNode))return!0;for(C=C.child;C!==null;)v.push(C),C=C.sibling}}return!1},n.getCurrentUpdatePriority=function(){return Qt},n.getFindAllNodesFailureDescription=function(A,v){if(!He)throw Error(o(363));var C=0,I=[];A=[a2(A),0];for(var P=0;P<A.length;){var N=A[P++],ne=A[P++],ue=v[ne];if((N.tag!==5||!ie(N))&&(l2(N,ue)&&(I.push(c2(ue)),ne++,ne>C&&(C=ne)),ne<v.length))for(N=N.child;N!==null;)A.push(N,ne),N=N.sibling}if(C<v.length){for(A=[];C<v.length;C++)A.push(c2(v[C]));return`findAllNodes was able to match part of the selector:
  `+(I.join(" > ")+`

No matching component was found for:
  `)+A.join(" > ")}return null},n.getPublicRootInstance=function(A){if(A=A.current,!A.child)return null;switch(A.child.tag){case 5:return Y(A.child.stateNode);default:return A.child.stateNode}},n.injectIntoDevTools=function(A){if(A={bundleType:A.bundleType,version:A.version,rendererPackageName:A.rendererPackageName,rendererConfig:A.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:E7,findFiberByHostInstance:A.findFiberByHostInstance||w7,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")A=!1;else{var v=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(v.isDisabled||!v.supportsFiber)A=!0;else{try{gl=v.inject(A),Kr=v}catch{}A=!!v.checkDCE}}return A},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(A,v,C,I){if(!He)throw Error(o(363));A=u2(A,v);var P=Ge(A,C,I).disconnect;return{disconnect:function(){P()}}},n.registerMutableSourceForHydration=function(A,v){var C=v._getVersion;C=C(v._source),A.mutableSourceEagerHydrationData==null?A.mutableSourceEagerHydrationData=[v,C]:A.mutableSourceEagerHydrationData.push(v,C)},n.runWithPriority=function(A,v){var C=Qt;try{return Qt=A,v()}finally{Qt=C}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(A,v,C,I){var P=v.current,N=xr(),ne=El(P);return C=EB(C),v.context===null?v.context=C:v.pendingContext=C,v=xa(N,ne),v.payload={element:A},I=I===void 0?null:I,I!==null&&(v.callback=I),_l(P,v),A=Rs(P,ne,N),A!==null&&H1(A,P,ne),ne},n};(function(t){t.exports=rue})(mN);const sue=EL(mN.exports);var GC={exports:{}},AN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,O){var z=G.length;G.push(O);e:for(;0<z;){var Q=z-1>>>1,H=G[Q];if(0<r(H,O))G[Q]=O,G[z]=H,z=Q;else break e}}function n(G){return G.length===0?null:G[0]}function i(G){if(G.length===0)return null;var O=G[0],z=G.pop();if(z!==O){G[0]=z;e:for(var Q=0,H=G.length,J=H>>>1;Q<J;){var j=2*(Q+1)-1,oe=G[j],K=j+1,ce=G[K];if(0>r(oe,z))K<H&&0>r(ce,oe)?(G[Q]=ce,G[K]=z,Q=K):(G[Q]=oe,G[j]=z,Q=j);else if(K<H&&0>r(ce,z))G[Q]=ce,G[K]=z,Q=K;else break e}}return O}function r(G,O){var z=G.sortIndex-O.sortIndex;return z!==0?z:G.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,f=3,d=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(G){for(var O=n(c);O!==null;){if(O.callback===null)i(c);else if(O.startTime<=G)i(c),O.sortIndex=O.expirationTime,e(l,O);else break;O=n(c)}}function E(G){if(m=!1,x(G),!p)if(n(l)!==null)p=!0,Y(w);else{var O=n(c);O!==null&&Z(E,O.startTime-G)}}function w(G,O){p=!1,m&&(m=!1,_(M),M=-1),d=!0;var z=f;try{for(x(O),h=n(l);h!==null&&(!(h.expirationTime>O)||G&&!L());){var Q=h.callback;if(typeof Q=="function"){h.callback=null,f=h.priorityLevel;var H=Q(h.expirationTime<=O);O=t.unstable_now(),typeof H=="function"?h.callback=H:h===n(l)&&i(l),x(O)}else i(l);h=n(l)}if(h!==null)var J=!0;else{var j=n(c);j!==null&&Z(E,j.startTime-O),J=!1}return J}finally{h=null,f=z,d=!1}}var S=!1,b=null,M=-1,T=5,B=-1;function L(){return!(t.unstable_now()-B<T)}function F(){if(b!==null){var G=t.unstable_now();B=G;var O=!0;try{O=b(!0,G)}finally{O?U():(S=!1,b=null)}}else S=!1}var U;if(typeof y=="function")U=function(){y(F)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,X=k.port2;k.port1.onmessage=F,U=function(){X.postMessage(null)}}else U=function(){g(F,0)};function Y(G){b=G,S||(S=!0,U())}function Z(G,O){M=g(function(){G(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){p||d||(p=!0,Y(w))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(G){switch(f){case 1:case 2:case 3:var O=3;break;default:O=f}var z=f;f=O;try{return G()}finally{f=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,O){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var z=f;f=G;try{return O()}finally{f=z}},t.unstable_scheduleCallback=function(G,O,z){var Q=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?Q+z:Q):z=Q,G){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=z+H,G={id:u++,callback:O,priorityLevel:G,startTime:z,expirationTime:H,sortIndex:-1},z>Q?(G.sortIndex=z,e(c,G),n(l)===null&&G===n(c)&&(m?(_(M),M=-1):m=!0,Z(E,z-Q))):(G.sortIndex=H,e(l,G),p||d||(p=!0,Y(w))),G},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(G){var O=f;return function(){var z=f;f=O;try{return G.apply(this,arguments)}finally{f=z}}}})(AN);(function(t){t.exports=AN})(GC);function gN(t,e,n=(i,r)=>i===r){if(t===e)return!0;if(!t||!e)return!1;const i=t.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!n(t[r],e[r]))return!1;return!0}const Qa=[];function vN(t,e,n=!1,i={}){for(const s of Qa)if(gN(e,s.keys,s.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return s.response;if(!n)throw s.promise}const r={keys:e,equal:i.equal,promise:t(...e).then(s=>r.response=s).then(()=>{i.lifespan&&i.lifespan>0&&setTimeout(()=>{const s=Qa.indexOf(r);s!==-1&&Qa.splice(s,1)},i.lifespan)}).catch(s=>r.error=s)};if(Qa.push(r),!n)throw r.promise}const Mh=(t,e,n)=>vN(t,e,!1,n),oue=(t,e,n)=>void vN(t,e,!0,n),aue=t=>{if(t===void 0||t.length===0)Qa.splice(0,Qa.length);else{const e=Qa.find(n=>gN(t,n.keys,n.equal));if(e){const n=Qa.indexOf(e);n!==-1&&Qa.splice(n,1)}}};var ax={exports:{}},lx={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lue=R.exports,cue=Symbol.for("react.element"),uue=Symbol.for("react.fragment"),hue=Object.prototype.hasOwnProperty,fue=lue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,due={key:!0,ref:!0,__self:!0,__source:!0};function _N(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)hue.call(e,i)&&!due.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:cue,type:t,key:s,ref:o,props:r,_owner:fue.current}}lx.Fragment=uue;lx.jsx=_N;lx.jsxs=_N;(function(t){t.exports=lx})(ax);const vs=ax.exports.Fragment,se=ax.exports.jsx,vt=ax.exports.jsxs;var pue=Object.freeze({__proto__:null}),SD,bD;const yN=t=>t&&t.isOrthographicCamera,mue=t=>t&&t.hasOwnProperty("current"),i0=typeof window<"u"&&((SD=window.document)!=null&&SD.createElement||((bD=window.navigator)==null?void 0:bD.product)==="ReactNative")?R.exports.useLayoutEffect:R.exports.useEffect;function xN(t){const e=R.exports.useRef(t);return i0(()=>void(e.current=t),[t]),e}function Aue({set:t}){return i0(()=>(t(new Promise(()=>null)),()=>t(!1)),[t]),null}class EN extends R.exports.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}EN.getDerivedStateFromError=()=>({error:!0});const wN="__default",gue=t=>t&&!!t.memoized&&!!t.changes;function MN(t){const e=typeof window<"u"?window.devicePixelRatio:1;return Array.isArray(t)?Math.min(Math.max(t[0],e),t[1]):t}const bf=t=>{var e;return(e=t.__r3f)==null?void 0:e.root.getState()},Yn={obj:t=>t===Object(t)&&!Yn.arr(t)&&typeof t!="function",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",boo:t=>typeof t=="boolean",und:t=>t===void 0,arr:t=>Array.isArray(t),equ(t,e,{arrays:n="shallow",objects:i="reference",strict:r=!0}={}){if(typeof t!=typeof e||!!t!=!!e)return!1;if(Yn.str(t)||Yn.num(t))return t===e;const s=Yn.obj(t);if(s&&i==="reference")return t===e;const o=Yn.arr(t);if(o&&n==="reference")return t===e;if((o||s)&&t===e)return!0;let a;for(a in t)if(!(a in e))return!1;for(a in r?e:t)if(t[a]!==e[a])return!1;if(Yn.und(a)){if(o&&t.length===0&&e.length===0||s&&Object.keys(t).length===0&&Object.keys(e).length===0)return!0;if(t!==e)return!1}return!0}};function CN(t){const e={nodes:{},materials:{}};return t&&t.traverse(n=>{n.name&&(e.nodes[n.name]=n),n.material&&!e.materials[n.material.name]&&(e.materials[n.material.name]=n.material)}),e}function SN(t){t.dispose&&t.type!=="Scene"&&t.dispose();for(const e in t)e.dispose==null||e.dispose(),delete t[e]}function If(t,e){const n=t;return(e!=null&&e.primitive||!n.__r3f)&&(n.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e}),t}function zC(t,e){let n=t;if(e.includes("-")){const i=e.split("-"),r=i.pop();return n=i.reduce((s,o)=>s[o],t),{target:n,key:r}}else return{target:n,key:e}}const ID=/-\d+$/;function jE(t,e,n){if(Yn.str(n)){if(ID.test(n)){const s=n.replace(ID,""),{target:o,key:a}=zC(t,s);Array.isArray(o[a])||(o[a]=[])}const{target:i,key:r}=zC(t,n);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=n(t,e)}function TD(t,e,n){var i,r;if(Yn.str(n)){const{target:s,key:o}=zC(t,n),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(t,e);(r=e.__r3f)==null||delete r.previousAttach}function bN(t,{children:e,key:n,ref:i,...r},{children:s,key:o,ref:a,...l}={},c=!1){var u;const h=(u=t==null?void 0:t.__r3f)!=null?u:{},f=Object.entries(r),d=[];if(c){const m=Object.keys(l);for(let g=0;g<m.length;g++)r.hasOwnProperty(m[g])||f.unshift([m[g],wN+"remove"])}f.forEach(([m,g])=>{var _;if((_=t.__r3f)!=null&&_.primitive&&m==="object"||Yn.equ(g,l[m]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(m))return d.push([m,g,!0,[]]);let y=[];m.includes("-")&&(y=m.split("-")),d.push([m,g,!1,y]);for(const x in r){const E=r[x];x.startsWith(`${m}-`)&&d.push([x,E,!1,x.split("-")])}});const p={...r};return h.memoizedProps&&h.memoizedProps.args&&(p.args=h.memoizedProps.args),h.memoizedProps&&h.memoizedProps.attach&&(p.attach=h.memoizedProps.attach),{memoized:p,changes:d}}function XE(t,e){var n,i,r;const s=(n=t.__r3f)!=null?n:{},o=s.root,a=(i=o==null||o.getState==null?void 0:o.getState())!=null?i:{},{memoized:l,changes:c}=gue(e)?e:bN(t,e),u=s.eventCount;t.__r3f&&(t.__r3f.memoizedProps=l);for(let d=0;d<c.length;d++){let[p,m,g,_]=c[d],y=t,x=y[p];if(_.length&&(x=_.reduce((E,w)=>E[w],t),!(x&&x.set))){const[E,...w]=_.reverse();y=w.reverse().reduce((S,b)=>S[b],t),p=E}if(m===wN+"remove")if(x&&x.constructor){var h;m=new x.constructor(...(h=l.args)!=null?h:[])}else if(y.constructor){var f;const E=new y.constructor(...(f=y.__r3f.memoizedProps.args)!=null?f:[]);m=E[x],E.dispose&&E.dispose()}else m=0;if(g)m?s.handlers[p]=m:delete s.handlers[p],s.eventCount=Object.keys(s.handlers).length;else if(x&&x.set&&(x.copy||x instanceof Vv)){if(Array.isArray(m))x.fromArray?x.fromArray(m):x.set(...m);else if(x.copy&&m&&m.constructor&&x.constructor.name===m.constructor.name)x.copy(m);else if(m!==void 0){const E=x instanceof xt;!E&&x.setScalar?x.setScalar(m):x instanceof Vv&&m instanceof Vv?x.mask=m.mask:x.set(m),!("ColorManagement"in Vm)&&!a.linear&&E&&x.convertSRGBToLinear()}}else y[p]=m,!a.linear&&y[p]instanceof Mc&&(y[p].encoding=yi);Tf(t)}if(s.parent&&a.internal&&t.raycast&&u!==s.eventCount){const d=a.internal.interaction.indexOf(t);d>-1&&a.internal.interaction.splice(d,1),s.eventCount&&a.internal.interaction.push(t)}return c.length&&(r=t.__r3f)!=null&&r.parent&&QC(t),t}function Tf(t){var e,n;const i=(e=t.__r3f)==null||(n=e.root)==null||n.getState==null?void 0:n.getState();i&&i.internal.frames===0&&i.invalidate()}function QC(t){t.onUpdate==null||t.onUpdate(t)}function IN(t,e){t.manual||(yN(t)?(t.left=e.width/-2,t.right=e.width/2,t.top=e.height/2,t.bottom=e.height/-2):t.aspect=e.width/e.height,t.updateProjectionMatrix(),t.updateMatrixWorld())}function vue(t,e,n){const i=n.pop(),r=n.reduce((s,o)=>s[o],t);return r[i]=e}function YE(t){return(t.eventObject||t.object).uuid+"/"+t.index+t.instanceId}function _ue(){var t;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Ru.exports.DefaultEventPriority;switch((t=e.event)==null?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Ru.exports.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Ru.exports.ContinuousEventPriority;default:return Ru.exports.DefaultEventPriority}}function TN(t,e,n,i){const r=n.get(e);r&&(n.delete(e),n.size===0&&(t.delete(i),r.target.releasePointerCapture(i)))}function yue(t,e){const{internal:n}=t.getState();n.interaction=n.interaction.filter(i=>i!==e),n.initialHits=n.initialHits.filter(i=>i!==e),n.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&n.hovered.delete(r)}),n.capturedMap.forEach((i,r)=>{TN(n.capturedMap,e,i,r)})}function BN(t){function e(l){const{internal:c}=t.getState(),u=l.offsetX-c.initialClick[0],h=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(u*u+h*h))}function n(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(u=>{var h;return(h=c.__r3f)==null?void 0:h.handlers["onPointer"+u]}))}function i(l,c){const u=t.getState(),h=new Set,f=[],d=c?c(u.internal.interaction):u.internal.interaction;for(let _=0;_<d.length;_++){const y=bf(d[_]);y&&(y.raycaster.camera=void 0)}u.previousRoot||u.events.compute==null||u.events.compute(l,u);function p(_){const y=bf(_);if(!y||!y.events.enabled||y.raycaster.camera===null)return[];if(y.raycaster.camera===void 0){var x;y.events.compute==null||y.events.compute(l,y,(x=y.previousRoot)==null?void 0:x.getState()),y.raycaster.camera===void 0&&(y.raycaster.camera=null)}return y.raycaster.camera?y.raycaster.intersectObject(_,!0):[]}let m=d.flatMap(p).sort((_,y)=>{const x=bf(_.object),E=bf(y.object);return!x||!E?0:E.events.priority-x.events.priority||_.distance-y.distance}).filter(_=>{const y=YE(_);return h.has(y)?!1:(h.add(y),!0)});u.events.filter&&(m=u.events.filter(m,u));for(const _ of m){let y=_.object;for(;y;){var g;(g=y.__r3f)!=null&&g.eventCount&&f.push({..._,eventObject:y}),y=y.parent}}if("pointerId"in l&&u.internal.capturedMap.has(l.pointerId))for(let _ of u.internal.capturedMap.get(l.pointerId).values())f.push(_.intersection);return f}function r(l,c,u,h){const f=t.getState();if(l.length){const d={stopped:!1};for(const p of l){const m=bf(p.object)||f,{raycaster:g,pointer:_,camera:y,internal:x}=m,E=new $(_.x,_.y,0).unproject(y),w=B=>{var L,F;return(L=(F=x.capturedMap.get(B))==null?void 0:F.has(p.eventObject))!=null?L:!1},S=B=>{const L={intersection:p,target:c.target};x.capturedMap.has(B)?x.capturedMap.get(B).set(p.eventObject,L):x.capturedMap.set(B,new Map([[p.eventObject,L]])),c.target.setPointerCapture(B)},b=B=>{const L=x.capturedMap.get(B);L&&TN(x.capturedMap,p.eventObject,L,B)};let M={};for(let B in c){let L=c[B];typeof L!="function"&&(M[B]=L)}let T={...p,...M,pointer:_,intersections:l,stopped:d.stopped,delta:u,unprojectedPoint:E,ray:g.ray,camera:y,stopPropagation(){const B="pointerId"in c&&x.capturedMap.get(c.pointerId);if((!B||B.has(p.eventObject))&&(T.stopped=d.stopped=!0,x.hovered.size&&Array.from(x.hovered.values()).find(L=>L.eventObject===p.eventObject))){const L=l.slice(0,l.indexOf(p));s([...L,p])}},target:{hasPointerCapture:w,setPointerCapture:S,releasePointerCapture:b},currentTarget:{hasPointerCapture:w,setPointerCapture:S,releasePointerCapture:b},nativeEvent:c};if(h(T),d.stopped===!0)break}}return l}function s(l){const{internal:c}=t.getState();for(const u of c.hovered.values())if(!l.length||!l.find(h=>h.object===u.object&&h.index===u.index&&h.instanceId===u.instanceId)){const f=u.eventObject.__r3f,d=f==null?void 0:f.handlers;if(c.hovered.delete(YE(u)),f!=null&&f.eventCount){const p={...u,intersections:l};d.onPointerOut==null||d.onPointerOut(p),d.onPointerLeave==null||d.onPointerLeave(p)}}}function o(l,c){for(let u=0;u<c.length;u++){const h=c[u].__r3f;h==null||h.handlers.onPointerMissed==null||h.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:u}=t.getState();"pointerId"in c&&!u.capturedMap.has(c.pointerId)&&(u.capturedMap.delete(c.pointerId),s([]))}}return function(u){const{onPointerMissed:h,internal:f}=t.getState();f.lastEvent.current=u;const d=l==="onPointerMove",p=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",g=i(u,d?n:void 0),_=p?e(u):0;l==="onPointerDown"&&(f.initialClick=[u.offsetX,u.offsetY],f.initialHits=g.map(x=>x.eventObject)),p&&!g.length&&_<=2&&(o(u,f.interaction),h&&h(u)),d&&s(g);function y(x){const E=x.eventObject,w=E.__r3f,S=w==null?void 0:w.handlers;if(!!(w!=null&&w.eventCount))if(d){if(S.onPointerOver||S.onPointerEnter||S.onPointerOut||S.onPointerLeave){const b=YE(x),M=f.hovered.get(b);M?M.stopped&&x.stopPropagation():(f.hovered.set(b,x),S.onPointerOver==null||S.onPointerOver(x),S.onPointerEnter==null||S.onPointerEnter(x))}S.onPointerMove==null||S.onPointerMove(x)}else{const b=S[l];b?(!p||f.initialHits.includes(E))&&(o(u,f.interaction.filter(M=>!f.initialHits.includes(M))),b(x)):p&&f.initialHits.includes(E)&&o(u,f.interaction.filter(M=>!f.initialHits.includes(M)))}}r(g,u,_,y)}}return{handlePointer:a}}let HC={},Dr=t=>void(HC={...HC,...t});function xue(t,e){function n(u,{args:h=[],attach:f,...d},p){let m=`${u[0].toUpperCase()}${u.slice(1)}`,g;if(u==="primitive"){if(d.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const _=d.object;g=If(_,{type:u,root:p,attach:f,primitive:!0})}else{const _=HC[m];if(!_)throw new Error(`R3F: ${m} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(h))throw new Error("R3F: The args prop must be an array!");g=If(new _(...h),{type:u,root:p,attach:f,memoizedProps:{args:h}})}return g.__r3f.attach===void 0&&(g instanceof ri?g.__r3f.attach="geometry":g instanceof Xp&&(g.__r3f.attach="material")),m!=="inject"&&XE(g,d),g}function i(u,h){let f=!1;if(h){var d,p;(d=h.__r3f)!=null&&d.attach?jE(u,h,h.__r3f.attach):h.isObject3D&&u.isObject3D&&(u.add(h),f=!0),f||(p=u.__r3f)==null||p.objects.push(h),h.__r3f||If(h,{}),h.__r3f.parent=u,QC(h),Tf(h)}}function r(u,h,f){let d=!1;if(h){var p,m;if((p=h.__r3f)!=null&&p.attach)jE(u,h,h.__r3f.attach);else if(h.isObject3D&&u.isObject3D){h.parent=u,h.dispatchEvent({type:"added"});const g=u.children.filter(y=>y!==h),_=g.indexOf(f);u.children=[...g.slice(0,_),h,...g.slice(_)],d=!0}d||(m=u.__r3f)==null||m.objects.push(h),h.__r3f||If(h,{}),h.__r3f.parent=u,QC(h),Tf(h)}}function s(u,h,f=!1){u&&[...u].forEach(d=>o(h,d,f))}function o(u,h,f){if(h){var d,p,m;if(h.__r3f&&(h.__r3f.parent=null),(d=u.__r3f)!=null&&d.objects&&(u.__r3f.objects=u.__r3f.objects.filter(E=>E!==h)),(p=h.__r3f)!=null&&p.attach)TD(u,h,h.__r3f.attach);else if(h.isObject3D&&u.isObject3D){var g;u.remove(h),(g=h.__r3f)!=null&&g.root&&yue(h.__r3f.root,h)}const y=(m=h.__r3f)==null?void 0:m.primitive,x=f===void 0?h.dispose!==null&&!y:f;if(!y){var _;s((_=h.__r3f)==null?void 0:_.objects,h,x),s(h.children,h,x)}h.__r3f&&(delete h.__r3f.root,delete h.__r3f.objects,delete h.__r3f.handlers,delete h.__r3f.memoizedProps,y||delete h.__r3f),x&&h.dispose&&h.type!=="Scene"&&GC.exports.unstable_scheduleCallback(GC.exports.unstable_IdlePriority,()=>{try{h.dispose()}catch{}}),Tf(u)}}function a(u,h,f,d){var p;const m=(p=u.__r3f)==null?void 0:p.parent;if(!m)return;const g=n(h,f,u.__r3f.root);if(u.children){for(const _ of u.children)_.__r3f&&i(g,_);u.children=u.children.filter(_=>!_.__r3f)}u.__r3f.objects.forEach(_=>i(g,_)),u.__r3f.objects=[],o(m,u),i(m,g),g.raycast&&g.__r3f.eventCount&&g.__r3f.root.getState().internal.interaction.push(g),[d,d.alternate].forEach(_=>{_!==null&&(_.stateNode=g,_.ref&&(typeof _.ref=="function"?_.ref(g):_.ref.current=g))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:sue({createInstance:n,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(u,h)=>{if(!h)return;const f=u.getState().scene;!f.__r3f||(f.__r3f.root=u,i(f,h))},removeChildFromContainer:(u,h)=>{!h||o(u.getState().scene,h)},insertInContainerBefore:(u,h,f)=>{if(!h||!f)return;const d=u.getState().scene;!d.__r3f||r(d,h,f)},getRootHostContext:()=>null,getChildHostContext:u=>u,finalizeInitialChildren(u){var h;const f=(h=u==null?void 0:u.__r3f)!=null?h:{};return Boolean(f.handlers)},prepareUpdate(u,h,f,d){if(u.__r3f.primitive&&d.object&&d.object!==u)return[!0];{const{args:p=[],children:m,...g}=d,{args:_=[],children:y,...x}=f;if(!Array.isArray(p))throw new Error("R3F: the args prop must be an array!");if(p.some((w,S)=>w!==_[S]))return[!0];const E=bN(u,g,x,!0);return E.changes.length?[!1,E]:null}},commitUpdate(u,[h,f],d,p,m,g){h?a(u,d,m,g):XE(u,f)},commitMount(u,h,f,d){var p;const m=(p=u.__r3f)!=null?p:{};u.raycast&&m.handlers&&m.eventCount&&u.__r3f.root.getState().internal.interaction.push(u)},getPublicInstance:u=>u,prepareForCommit:()=>null,preparePortalMount:u=>If(u.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(u){var h;const{attach:f,parent:d}=(h=u.__r3f)!=null?h:{};f&&d&&TD(d,u,f),u.isObject3D&&(u.visible=!1),Tf(u)},unhideInstance(u,h){var f;const{attach:d,parent:p}=(f=u.__r3f)!=null?f:{};d&&p&&jE(p,u,d),(u.isObject3D&&h.visible==null||h.visible)&&(u.visible=!0),Tf(u)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():Ru.exports.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Yn.fun(performance.now)?performance.now:Yn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Yn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Yn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:XE}}const Eue=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],RN=t=>!!(t!=null&&t.render),Td=R.exports.createContext(null),wue=(t,e)=>{const n=ox((a,l)=>{const c=new $,u=new $,h=new $;function f(_=l().camera,y=u,x=l().size){const{width:E,height:w,top:S,left:b}=x,M=E/w;y instanceof $?h.copy(y):h.set(...y);const T=_.getWorldPosition(c).distanceTo(h);if(yN(_))return{width:E/_.zoom,height:w/_.zoom,top:S,left:b,factor:1,distance:T,aspect:M};{const B=_.fov*Math.PI/180,L=2*Math.tan(B/2)*T,F=L*(E/w);return{width:F,height:L,top:S,left:b,factor:E/F,distance:T,aspect:M}}}let d;const p=_=>a(y=>({performance:{...y.performance,current:_}})),m=new mt;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,invalidate:(_=1)=>t(l(),_),advance:(_,y)=>e(_,y,l()),legacy:!1,linear:!1,flat:!1,scene:If(new Fc),controls:null,clock:new E3,pointer:m,mouse:m,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const _=l();d&&clearTimeout(d),_.performance.current!==_.performance.min&&p(_.performance.min),d=setTimeout(()=>p(l().performance.max),_.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:f},setEvents:_=>a(y=>({...y,events:{...y.events,..._}})),setSize:(_,y,x,E,w)=>{const S=l().camera,b={width:_,height:y,top:E||0,left:w||0,updateStyle:x};a(M=>({size:b,viewport:{...M.viewport,...f(S,u,b)}}))},setDpr:_=>a(y=>{const x=MN(_);return{viewport:{...y.viewport,dpr:x,initialDpr:y.viewport.initialDpr||x}}}),setFrameloop:(_="always")=>{const y=l().clock;y.stop(),y.elapsedTime=0,_!=="never"&&(y.start(),y.elapsedTime=0),a(()=>({frameloop:_}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:R.exports.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(_,y,x)=>{const E=l().internal;return E.priority=E.priority+(y>0?1:0),E.subscribers.push({ref:_,priority:y,store:x}),E.subscribers=E.subscribers.sort((w,S)=>w.priority-S.priority),()=>{const w=l().internal;w!=null&&w.subscribers&&(w.priority=w.priority-(y>0?1:0),w.subscribers=w.subscribers.filter(S=>S.ref!==_))}}}}}),i=n.getState();let r=i.size,s=i.viewport.dpr,o=i.camera;return n.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:u,set:h}=n.getState();(l!==r||c.dpr!==s)&&(r=l,s=c.dpr,IN(a,l),u.setPixelRatio(c.dpr),u.setSize(l.width,l.height,l.updateStyle)),a!==o&&(o=a,h(f=>({viewport:{...f.viewport,...f.viewport.getCurrentViewport(a)}})))}),n.subscribe(a=>t(a)),n};function G3(t,e){const n={callback:t};return e.add(n),()=>void e.delete(n)}let Dg,PN=new Set,DN=new Set,FN=new Set;const cx=t=>G3(t,PN),z3=t=>G3(t,DN),Mue=t=>G3(t,FN);function qE(t,e){if(!!t.size)for(const{callback:n}of t.values())n(e)}function ip(t,e){switch(t){case"before":return qE(PN,e);case"after":return qE(DN,e);case"tail":return qE(FN,e)}}let JE,KE;function ZE(t,e,n){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof t=="number"&&(i=t-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=t),JE=e.internal.subscribers,Dg=0;Dg<JE.length;Dg++)KE=JE[Dg],KE.ref.current(KE.store.getState(),i,n);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function Cue(t){let e=!1,n,i,r;function s(l){i=requestAnimationFrame(s),e=!0,n=0,ip("before",l);for(const u of t.values()){var c;r=u.store.getState(),r.internal.active&&(r.frameloop==="always"||r.internal.frames>0)&&!((c=r.gl.xr)!=null&&c.isPresenting)&&(n+=ZE(l,r))}if(ip("after",l),n===0)return ip("tail",l),e=!1,cancelAnimationFrame(i)}function o(l,c=1){var u;if(!l)return t.forEach(h=>o(h.store.getState()),c);(u=l.gl.xr)!=null&&u.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+c),e||(e=!0,requestAnimationFrame(s)))}function a(l,c=!0,u,h){if(c&&ip("before",l),u)ZE(l,u,h);else for(const f of t.values())ZE(l,f.store.getState());c&&ip("after",l)}return{loop:s,invalidate:o,advance:a}}function Sue(t){const e=R.exports.useRef(null);return i0(()=>void(e.current=t.current.__r3f),[t]),e}function ux(){const t=R.exports.useContext(Td);if(!t)throw new Error("R3F: Hooks can only be used within the Canvas component!");return t}function Te(t=n=>n,e){return ux()(t,e)}function Ct(t,e=0){const n=ux(),i=n.getState().internal.subscribe,r=xN(t);return i0(()=>i(r,e,n),[e,i,n]),null}function bue(t){return R.exports.useMemo(()=>CN(t),[t])}function LN(t,e){return function(n,...i){const r=new n;return t&&t(r),Promise.all(i.map(s=>new Promise((o,a)=>r.load(s,l=>{l.scene&&Object.assign(l,CN(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l.message})`))))))}}function Ci(t,e,n,i){const r=Array.isArray(e)?e:[e],s=Mh(LN(n,i),[t,...r],{equal:Yn.equ});return Array.isArray(e)?s:s[0]}Ci.preload=function(t,e,n){const i=Array.isArray(e)?e:[e];return oue(LN(n),[t,...i])};Ci.clear=function(t,e){const n=Array.isArray(e)?e:[e];return aue([t,...n])};const sh=new Map,{invalidate:VC,advance:WC}=Cue(sh),{reconciler:Bd,applyProps:hs}=xue(sh,_ue),ff={objects:"shallow",strict:!1},Iue=(t,e)=>{const n=typeof t=="function"?t(e):t;return RN(n)?n:new hN({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...t})};function Tue(t){return t instanceof HTMLCanvasElement}function Bue(t,e){if(e)return e;if(Tue(t)&&t.parentElement){const{width:n,height:i,top:r,left:s}=t.parentElement.getBoundingClientRect();return{width:n,height:i,top:r,left:s}}return{width:0,height:0,top:0,left:0}}function Q3(t){const e=sh.get(t),n=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||wue(VC,WC),o=n||Bd.createContainer(s,Ru.exports.ConcurrentRoot,null,!1,null,"",r,null);e||sh.set(t,{fiber:o,store:s});let a,l=!1;return{configure(c={}){let{gl:u,size:h,events:f,onCreated:d,shadows:p=!1,linear:m=!1,flat:g=!1,legacy:_=!1,orthographic:y=!1,frameloop:x="always",dpr:E=[1,2],performance:w,raycaster:S,camera:b,onPointerMissed:M}=c,T=s.getState(),B=T.gl;T.gl||T.set({gl:B=Iue(u,t)});let L=T.raycaster;L||T.set({raycaster:L=new e0});const{params:F,...U}=S||{};if(Yn.equ(U,L,ff)||hs(L,{...U}),Yn.equ(F,L.params,ff)||hs(L,{params:{...L.params,...F}}),!T.camera){const Z=b instanceof Wy,G=Z?b:y?new ua(0,0,0,0,.1,1e3):new Hr(75,0,.1,1e3);Z||(G.position.z=5,b&&hs(G,b),b!=null&&b.rotation||G.lookAt(0,0,0)),T.set({camera:G})}if(!T.xr){const Z=(z,Q)=>{const H=s.getState();H.frameloop!=="never"&&WC(z,!0,H,Q)},G=()=>{const z=s.getState();z.gl.xr.enabled=z.gl.xr.isPresenting,z.gl.xr.setAnimationLoop(z.gl.xr.isPresenting?Z:null),z.gl.xr.isPresenting||VC(z)},O={connect(){const z=s.getState().gl;z.xr.addEventListener("sessionstart",G),z.xr.addEventListener("sessionend",G)},disconnect(){const z=s.getState().gl;z.xr.removeEventListener("sessionstart",G),z.xr.removeEventListener("sessionend",G)}};B.xr&&O.connect(),T.set({xr:O})}if(B.shadowMap){const Z=Yn.boo(p);if(Z&&B.shadowMap.enabled!==p||!Yn.equ(p,B.shadowMap,ff)){const G=B.shadowMap.enabled;B.shadowMap.enabled=!!p,Z?B.shadowMap.type=H6:Object.assign(B.shadowMap,p),G!==B.shadowMap.enabled&&(B.shadowMap.needsUpdate=!0)}}"ColorManagement"in Vm&&vue(Vm,_,["ColorManagement","legacyMode"]);const k=m?Kd:yi,X=g?z6:a6;B.outputEncoding!==k&&(B.outputEncoding=k),B.toneMapping!==X&&(B.toneMapping=X),T.legacy!==_&&T.set(()=>({legacy:_})),T.linear!==m&&T.set(()=>({linear:m})),T.flat!==g&&T.set(()=>({flat:g})),u&&!Yn.fun(u)&&!RN(u)&&!Yn.equ(u,B,ff)&&hs(B,u),f&&!T.events.handlers&&T.set({events:f(s)}),E&&T.viewport.dpr!==MN(E)&&T.setDpr(E);const Y=Bue(t,h);return Yn.equ(Y,T.size,ff)||T.setSize(Y.width,Y.height,Y.updateStyle,Y.top,Y.left),T.frameloop!==x&&T.setFrameloop(x),T.onPointerMissed||T.set({onPointerMissed:M}),w&&!Yn.equ(w,T.performance,ff)&&T.set(Z=>({performance:{...Z.performance,...w}})),a=d,l=!0,this},render(c){return l||this.configure(),Bd.updateContainer(se(Pue,{store:s,children:c,onCreated:a,rootElement:t}),o,null,()=>{}),s},unmount(){H3(t)}}}function Rue(t,e,n){console.warn("R3F.render is no longer supported in React 18. Use createRoot instead!");const i=Q3(e);return i.configure(n),i.render(t)}function Pue({store:t,children:e,onCreated:n,rootElement:i}){return i0(()=>{const r=t.getState();r.set(s=>({internal:{...s.internal,active:!0}})),n&&n(r),t.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),R.exports.createElement(Td.Provider,{value:t},e)}function H3(t,e){const n=sh.get(t),i=n==null?void 0:n.fiber;if(i){const r=n==null?void 0:n.store.getState();r&&(r.internal.active=!1),Bd.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,o,a,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),SN(r),sh.delete(t),e&&e(t)}catch{}},500)})}}function r0(t,e,n){return se(Due,{children:t,container:e,state:n},e.uuid)}function Due({state:t={},children:e,container:n}){const{events:i,size:r,...s}=t,o=ux(),[a]=R.exports.useState(()=>new e0),[l]=R.exports.useState(()=>new mt),c=R.exports.useCallback((h,f)=>{const d={...h};Object.keys(h).forEach(m=>{(Eue.includes(m)||h[m]!==f[m])&&delete d[m]});let p;if(f&&r){const m=f.camera;p=h.viewport.getCurrentViewport(m,new $,r),m!==h.camera&&IN(m,r)}return{...d,scene:n,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...h.events,...f==null?void 0:f.events,...i},size:{...h.size,...r},viewport:{...h.viewport,...p},...s}},[t]),[u]=R.exports.useState(()=>{const h=o.getState();return ox((d,p)=>({...h,scene:n,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...h.events,...i},size:{...h.size,...r},...s,set:d,get:p,setEvents:m=>d(g=>({...g,events:{...g.events,...m}}))}))});return R.exports.useEffect(()=>{const h=o.subscribe(f=>u.setState(d=>c(f,d)));return()=>{h(),u.destroy()}},[]),R.exports.useEffect(()=>{u.setState(h=>c(o.getState(),h))},[c]),se(vs,{children:Bd.createPortal(R.exports.createElement(Td.Provider,{value:u},e),u,null)})}Bd.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:R.exports.version});const Fue=R.exports.unstable_act;function oh(){return oh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},oh.apply(this,arguments)}function jC(t,e,n){var i,r,s,o,a;e==null&&(e=100);function l(){var u=Date.now()-o;u<e&&u>=0?i=setTimeout(l,e-u):(i=null,n||(a=t.apply(s,r),s=r=null))}var c=function(){s=this,r=arguments,o=Date.now();var u=n&&!i;return i||(i=setTimeout(l,e)),u&&(a=t.apply(s,r),s=r=null),a};return c.clear=function(){i&&(clearTimeout(i),i=null)},c.flush=function(){i&&(a=t.apply(s,r),s=r=null,clearTimeout(i),i=null)},c}jC.debounce=jC;var BD=jC;function Lue(t){let{debounce:e,scroll:n,polyfill:i,offsetSize:r}=t===void 0?{debounce:0,scroll:!1,offsetSize:!1}:t;const s=i||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=R.exports.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=R.exports.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),c=e?typeof e=="number"?e:e.scroll:null,u=e?typeof e=="number"?e:e.resize:null,h=R.exports.useRef(!1);R.exports.useEffect(()=>(h.current=!0,()=>void(h.current=!1)));const[f,d,p]=R.exports.useMemo(()=>{const y=()=>{if(!l.current.element)return;const{left:x,top:E,width:w,height:S,bottom:b,right:M,x:T,y:B}=l.current.element.getBoundingClientRect(),L={left:x,top:E,width:w,height:S,bottom:b,right:M,x:T,y:B};l.current.element instanceof HTMLElement&&r&&(L.height=l.current.element.offsetHeight,L.width=l.current.element.offsetWidth),Object.freeze(L),h.current&&!Nue(l.current.lastBounds,L)&&a(l.current.lastBounds=L)};return[y,u?BD(y,u):y,c?BD(y,c):y]},[a,r,c,u]);function m(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(y=>y.removeEventListener("scroll",p,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function g(){!l.current.element||(l.current.resizeObserver=new s(p),l.current.resizeObserver.observe(l.current.element),n&&l.current.scrollContainers&&l.current.scrollContainers.forEach(y=>y.addEventListener("scroll",p,{capture:!0,passive:!0})))}const _=y=>{!y||y===l.current.element||(m(),l.current.element=y,l.current.scrollContainers=kN(y),g())};return Uue(p,Boolean(n)),kue(d),R.exports.useEffect(()=>{m(),g()},[n,p,d]),R.exports.useEffect(()=>m,[]),[_,o,f]}function kue(t){R.exports.useEffect(()=>{const e=t;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[t])}function Uue(t,e){R.exports.useEffect(()=>{if(e){const n=t;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[t,e])}function kN(t){const e=[];if(!t||t===document.body)return e;const{overflow:n,overflowX:i,overflowY:r}=window.getComputedStyle(t);return[n,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(t),[...e,...kN(t.parentElement)]}const Oue=["x","y","top","bottom","left","right","width","height"],Nue=(t,e)=>Oue.every(n=>t[n]===e[n]);var Gue=Object.defineProperty,zue=Object.defineProperties,Que=Object.getOwnPropertyDescriptors,RD=Object.getOwnPropertySymbols,Hue=Object.prototype.hasOwnProperty,Vue=Object.prototype.propertyIsEnumerable,PD=(t,e,n)=>e in t?Gue(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,DD=(t,e)=>{for(var n in e||(e={}))Hue.call(e,n)&&PD(t,n,e[n]);if(RD)for(var n of RD(e))Vue.call(e,n)&&PD(t,n,e[n]);return t},Wue=(t,e)=>zue(t,Que(e));function V3(t,e,n){if(!t)return;if(n(t)===!0)return t;let i=e?t.return:t.child;for(;i;){const r=V3(i,e,n);if(r)return r;i=e?null:i.sibling}}function UN(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const W3=UN(R.exports.createContext(null));class ON extends R.exports.Component{render(){return se(W3.Provider,{value:this._reactInternals,children:this.props.children})}}const{ReactCurrentOwner:jue,ReactCurrentDispatcher:Xue}=R.exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function Yue(){const t=R.exports.useContext(W3);if(!t)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=R.exports.useId();return R.exports.useMemo(()=>{var i;return(i=jue.current)!=null?i:V3(t,!1,r=>{let s=r.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}})},[t,e])}const rp=[],FD=new WeakMap;function que(){var t;const e=Yue();rp.splice(0,rp.length),V3(e,!0,n=>{var i;const r=(i=n.type)==null?void 0:i._context;r&&r!==W3&&rp.push(UN(r))});for(const n of rp){const i=(t=Xue.current)==null?void 0:t.readContext(n);FD.set(n,i)}return R.exports.useMemo(()=>rp.reduce((n,i)=>r=>R.exports.createElement(n,null,R.exports.createElement(i.Provider,Wue(DD({},r),{value:FD.get(i)}))),n=>se(ON,{...DD({},n)})),[])}const $E={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function NN(t){const{handlePointer:e}=BN(t);return{priority:1,enabled:!0,compute(n,i,r){i.pointer.set(n.offsetX/i.size.width*2-1,-(n.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys($E).reduce((n,i)=>({...n,[i]:e(i)}),{}),connect:n=>{var i;const{set:r,events:s}=t.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:n}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([o,a])=>{const[l,c]=$E[o];n.addEventListener(l,a,{passive:c})})},disconnect:()=>{const{set:n,events:i}=t.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,o])=>{if(i&&i.connected instanceof HTMLElement){const[a]=$E[s];i.connected.removeEventListener(a,o)}}),n(s=>({events:{...s.events,connected:void 0}}))}}}}const Jue=R.exports.forwardRef(function({children:e,fallback:n,resize:i,style:r,gl:s,events:o=NN,eventSource:a,eventPrefix:l,shadows:c,linear:u,flat:h,legacy:f,orthographic:d,frameloop:p,dpr:m,performance:g,raycaster:_,camera:y,onPointerMissed:x,onCreated:E,...w},S){R.exports.useMemo(()=>Dr(Vm),[]);const b=que(),[M,T]=Lue({scroll:!0,debounce:{scroll:50,resize:0},...i}),B=R.exports.useRef(null),L=R.exports.useRef(null),[F,U]=R.exports.useState(null);R.exports.useImperativeHandle(S,()=>B.current);const k=xN(x),[X,Y]=R.exports.useState(!1),[Z,G]=R.exports.useState(!1);if(X)throw X;if(Z)throw Z;const O=R.exports.useRef(null);return T.width>0&&T.height>0&&F&&(O.current||(O.current=Q3(F)),O.current.configure({gl:s,events:o,shadows:c,linear:u,flat:h,legacy:f,orthographic:d,frameloop:p,dpr:m,performance:g,raycaster:_,camera:y,size:T,onPointerMissed:(...Q)=>k.current==null?void 0:k.current(...Q),onCreated:Q=>{Q.events.connect==null||Q.events.connect(a?mue(a)?a.current:a:L.current),l&&Q.setEvents({compute:(H,J)=>{const j=H[l+"X"],oe=H[l+"Y"];J.pointer.set(j/J.size.width*2-1,-(oe/J.size.height)*2+1),J.raycaster.setFromCamera(J.pointer,J.camera)}}),E==null||E(Q)}}),O.current.render(se(b,{children:se(EN,{set:G,children:se(R.exports.Suspense,{fallback:se(Aue,{set:Y}),children:e})})}))),i0(()=>{U(B.current)},[]),R.exports.useEffect(()=>{if(F)return()=>H3(F)},[F]),se("div",{ref:L,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:a?"none":"auto",...r},...w,children:se("div",{ref:M,style:{width:"100%",height:"100%"},children:se("canvas",{ref:B,style:{display:"block"},children:n})})})}),Kue=R.exports.forwardRef(function(e,n){return se(ON,{children:se(Jue,{...e,ref:n})})}),Zue=Object.freeze(Object.defineProperty({__proto__:null,Canvas:Kue,events:NN,ReactThreeFiber:pue,_roots:sh,act:Fue,addAfterEffect:z3,addEffect:cx,addTail:Mue,advance:WC,applyProps:hs,context:Td,createEvents:BN,createPortal:r0,createRoot:Q3,dispose:SN,extend:Dr,getRootState:bf,invalidate:VC,reconciler:Bd,render:Rue,unmountComponentAtNode:H3,useFrame:Ct,useGraph:bue,useInstanceHandle:Sue,useLoader:Ci,useStore:ux,useThree:Te},Symbol.toStringTag,{value:"Module"})),kc=Ud(Zue);var $ue=Qe&&Qe.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),ehe=Qe&&Qe.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),GN=Qe&&Qe.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&$ue(e,t,n);return ehe(e,t),e},the=Qe&&Qe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(N3,"__esModule",{value:!0});const XC=GN(Es()),sp=GN(R.exports),nhe=the(Lc),zN=kc,{FaceBufferGeometry:ihe}=XC;(0,zN.extend)({FaceBufferGeometry:ihe});const rhe=(0,sp.forwardRef)((t,e)=>{const{fillMouth:n=!1,fillEyeLeft:i=!1,fillEyeRight:r=!1,fillNeck:s=!1,fullHead:o=!1,children:a,trackerGroup:l}=t,c=sp.default.useRef(),[u,h]=(0,sp.useState)();return(0,sp.useEffect)(()=>{h(o?new XC.FaceMeshLoader().loadFullHeadSimplified({fillMouth:n,fillEyeLeft:i,fillEyeRight:r,fillNeck:s}):new XC.FaceMeshLoader().loadFace({fillMouth:n,fillEyeLeft:i,fillEyeRight:r}))},[n,i,r,s]),(0,zN.useFrame)(()=>{c.current&&l&&l.current&&c.current.updateFromFaceAnchorGroup(l.current)}),u?sp.default.createElement("faceBufferGeometry",Object.assign({args:[u],ref:(0,nhe.default)([c,e])},t),a):null});N3.default=rhe;var j3={},Ch={},QN={},HN={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=function(r){var s,o=new Set,a=function(d,p){var m=typeof d=="function"?d(s):d;if(!Object.is(m,s)){var g=s;s=(p!=null?p:typeof m!="object")?m:Object.assign({},s,m),o.forEach(function(_){return _(s,g)})}},l=function(){return s},c=function(d){return o.add(d),function(){return o.delete(d)}},u=function(){return o.clear()},h={setState:a,getState:l,subscribe:c,destroy:u};return s=r(a,l,h),h},n=function(r){return r?e(r):e};t.default=n})(HN);var VN={exports:{}},WN={},jN={exports:{}},XN={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rd=R.exports;function she(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ohe=typeof Object.is=="function"?Object.is:she,ahe=Rd.useState,lhe=Rd.useEffect,che=Rd.useLayoutEffect,uhe=Rd.useDebugValue;function hhe(t,e){var n=e(),i=ahe({inst:{value:n,getSnapshot:e}}),r=i[0].inst,s=i[1];return che(function(){r.value=n,r.getSnapshot=e,ew(r)&&s({inst:r})},[t,n,e]),lhe(function(){return ew(r)&&s({inst:r}),t(function(){ew(r)&&s({inst:r})})},[t]),uhe(n),n}function ew(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ohe(t,n)}catch{return!0}}function fhe(t,e){return e()}var dhe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?fhe:hhe;XN.useSyncExternalStore=Rd.useSyncExternalStore!==void 0?Rd.useSyncExternalStore:dhe;(function(t){t.exports=XN})(jN);/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hx=R.exports,phe=jN.exports;function mhe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ahe=typeof Object.is=="function"?Object.is:mhe,ghe=phe.useSyncExternalStore,vhe=hx.useRef,_he=hx.useEffect,yhe=hx.useMemo,xhe=hx.useDebugValue;WN.useSyncExternalStoreWithSelector=function(t,e,n,i,r){var s=vhe(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=yhe(function(){function l(d){if(!c){if(c=!0,u=d,d=i(d),r!==void 0&&o.hasValue){var p=o.value;if(r(p,d))return h=p}return h=d}if(p=h,Ahe(u,d))return p;var m=i(d);return r!==void 0&&r(p,m)?p:(u=d,h=m)}var c=!1,u,h,f=n===void 0?null:n;return[function(){return l(e())},f===null?void 0:function(){return l(f())}]},[e,n,i,r]);var a=ghe(t,s[0],s[1]);return _he(function(){o.hasValue=!0,o.value=a},[a]),xhe(a),a};(function(t){t.exports=WN})(VN);(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=HN,n=R.exports,i=VN.exports;function r(f){return f&&typeof f=="object"&&"default"in f?f:{default:f}}var s=r(e),o=r(i),a=o.default.useSyncExternalStoreWithSelector;function l(f,d,p){d===void 0&&(d=f.getState);var m=a(f.subscribe,f.getState,f.getServerState||f.getState,d,p);return n.useDebugValue(m),m}var c=function(d){var p=typeof d=="function"?s.default(d):d,m=function(_,y){return l(p,_,y)};return Object.assign(m,p),m},u=function(d){return d?c(d):c},h=u;Object.defineProperty(t,"createStore",{enumerable:!0,get:function(){return s.default}}),t.default=h,t.useStore=l,Object.keys(e).forEach(function(f){f!=="default"&&!t.hasOwnProperty(f)&&Object.defineProperty(t,f,{enumerable:!0,get:function(){return e[f]}})})})(QN);var Ehe=Qe&&Qe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ch,"__esModule",{value:!0});const fx=Ehe(QN),whe=(0,fx.default)(t=>({object:void 0,set:e=>t({object:e})})),Mhe=(0,fx.default)(t=>({object:void 0,set:e=>t({object:e})})),Che=(0,fx.default)(t=>({object:void 0,set:e=>t({object:e})})),She=(0,fx.default)(t=>({object:void 0,set:e=>t({object:e})}));Ch.default={camera:whe,imageTracker:Mhe,instantTracker:Che,faceTracker:She};var bhe=Qe&&Qe.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),Ihe=Qe&&Qe.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),YN=Qe&&Qe.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&bhe(e,t,n);return Ihe(e,t),e},qN=Qe&&Qe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(j3,"__esModule",{value:!0});const JN=YN(Es()),tw=YN(R.exports),The=kc,Bhe=qN(Lc),LD=qN(Ch),{FaceLandmarkGroup:Rhe}=JN;(0,The.extend)({FaceLandmarkGroup:Rhe});const Phe=(0,tw.forwardRef)((t,e)=>{var n;const{children:i,trackerGroup:r,camera:s,target:o}=t,a=(0,tw.useRef)(),l={camera:LD.default.camera(h=>h),faceTracker:LD.default.faceTracker(h=>h)},c=!((n=r==null?void 0:r.current)===null||n===void 0)&&n.faceTracker?r.current.faceTracker:l.faceTracker.object,u=s!=null&&s.current?s.current:l.camera.object;return!c||!u?null:tw.default.createElement("faceLandmarkGroup",Object.assign({args:[u,c,JN.FaceLandmarkName[o.toUpperCase().replace("-","_")]],ref:(0,Bhe.default)([a,e])},t),i)});j3.default=Phe;var X3={},T1={};Object.defineProperty(T1,"__esModule",{value:!0});const Dhe=R.exports,Fhe=(t,e)=>{(0,Dhe.useEffect)(()=>{t&&e!==void 0&&(t.enabled=e)},[t,e])};T1.default=Fhe;var Lhe=Qe&&Qe.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),khe=Qe&&Qe.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),KN=Qe&&Qe.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&Lhe(e,t,n);return khe(e,t),e},Y3=Qe&&Qe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(X3,"__esModule",{value:!0});const ZN=KN(Es()),df=KN(R.exports),Uhe=kc,Ohe=Y3(Lc),kD=Y3(Ch),Nhe=Y3(T1),{FaceAnchorGroup:Ghe}=ZN;(0,Uhe.extend)({FaceAnchorGroup:Ghe});const zhe=(0,df.forwardRef)((t,e)=>{const{camera:n,children:i,useFaceTracker:r,onNotVisible:s,onVisible:o,onNewAnchor:a,pipeline:l,model:c,enabled:u}=t,[h,f]=(0,df.useState)(),d=df.default.useRef(),p={camera:kD.default.camera(g=>g),faceTracker:kD.default.faceTracker(g=>g)};(0,df.useEffect)(()=>{const g=new ZN.FaceTracker(l);c?g.loadModel(c):g.loadDefaultModel(),f(g),p.faceTracker.set(g)},[c,l]);const m=n!=null&&n.current?n.current:p.camera.object;return(0,df.useEffect)(()=>(h&&(r&&r(h),s&&h.onNotVisible.bind(s),o&&h.onVisible.bind(o),a&&h.onVisible.bind(a)),()=>{h&&(s&&h.onNotVisible.unbind(s),o&&h.onVisible.unbind(o),a&&h.onVisible.unbind(a))}),[r,o,s,d,h]),(0,Nhe.default)(h,u),!h||!m?null:df.default.createElement("faceAnchorGroup",Object.assign({ref:(0,Ohe.default)([d,e]),args:[m,h]},t),i)});X3.default=zhe;var q3={},Qhe=Qe&&Qe.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),Hhe=Qe&&Qe.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),$N=Qe&&Qe.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&Qhe(e,t,n);return Hhe(e,t),e},Vhe=Qe&&Qe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(q3,"__esModule",{value:!0});const Whe=$N(Es()),Fg=$N(R.exports),jhe=Vhe(Lc),Xhe=kc,Yhe=(0,Fg.forwardRef)((t,e)=>{const{children:n,trackerGroup:i}=t,r=Fg.default.useRef(),[s]=(0,Fg.useState)(new Whe.HeadMaskMeshLoader().load());return(0,Xhe.useFrame)(()=>{r.current&&i&&i.current&&r.current.updateFromFaceAnchorGroup(i.current)}),s?Fg.default.createElement("primitive",Object.assign({object:s,ref:(0,jhe.default)([r,e])},t),n):null});q3.default=Yhe;var J3={},qhe=Qe&&Qe.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),Jhe=Qe&&Qe.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),eG=Qe&&Qe.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&qhe(e,t,n);return Jhe(e,t),e},K3=Qe&&Qe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(J3,"__esModule",{value:!0});const tG=eG(Es()),pf=eG(R.exports),Khe=kc,Zhe=K3(Lc),$he=K3(Ch),efe=K3(T1),{ImageAnchorGroup:tfe}=tG;(0,Khe.extend)({ImageAnchorGroup:tfe});const nfe=(0,pf.forwardRef)((t,e)=>{const{useImageTracker:n,onNotVisible:i,onNewAnchor:r,onVisible:s,targetImage:o,camera:a,children:l,pipeline:c,enabled:u}=t,h=(0,pf.useRef)(),f=$he.default.camera(g=>g),d=a!=null&&a.current?a.current:f.object,[p,m]=(0,pf.useState)();return(0,pf.useEffect)(()=>{m(new tG.ImageTracker(o,c))},[o,c]),(0,pf.useEffect)(()=>(p&&(n&&n(p),i&&p.onNotVisible.bind(i),r&&p.onNewAnchor.bind(r),s&&p.onVisible.bind(s)),()=>{i&&(p==null||p.onNotVisible.unbind(i)),r&&(p==null||p.onNewAnchor.unbind(r)),s&&(p==null||p.onVisible.unbind(s))}),[n,s,r,i,p]),(0,efe.default)(p,u),!d||!p?null:pf.default.createElement("imageAnchorGroup",Object.assign({ref:(0,Zhe.default)([h,e]),args:[d,p]},t),l)});J3.default=nfe;var Z3={},$3={};const B1=new $,eI=new $,ife=new $;function rfe(t,e,n){const i=B1.setFromMatrixPosition(t.matrixWorld);i.project(e);const r=n.width/2,s=n.height/2;return[i.x*r+r,-(i.y*s)+s]}function sfe(t,e){const n=B1.setFromMatrixPosition(t.matrixWorld),i=eI.setFromMatrixPosition(e.matrixWorld),r=n.sub(i),s=e.getWorldDirection(ife);return r.angleTo(s)>Math.PI/2}function ofe(t,e,n,i){const r=B1.setFromMatrixPosition(t.matrixWorld),s=r.clone();s.project(e),n.setFromCamera(s,e);const o=n.intersectObjects(i,!0);if(o.length){const a=o[0].distance;return r.distanceTo(n.ray.origin)<a}return!0}function afe(t,e){if(e instanceof ua)return e.zoom;if(e instanceof Hr){const n=B1.setFromMatrixPosition(t.matrixWorld),i=eI.setFromMatrixPosition(e.matrixWorld),r=e.fov*Math.PI/180,s=n.distanceTo(i),o=2*Math.tan(r/2)*s;return 1/o}else return 1}function lfe(t,e,n){if(e instanceof Hr||e instanceof ua){const i=B1.setFromMatrixPosition(t.matrixWorld),r=eI.setFromMatrixPosition(e.matrixWorld),s=i.distanceTo(r),o=(n[1]-n[0])/(e.far-e.near),a=n[1]-o*e.far;return Math.round(o*s+a)}}const YC=t=>Math.abs(t)<1e-10?0:t;function nG(t,e,n=""){let i="matrix3d(";for(let r=0;r!==16;r++)i+=YC(e[r]*t.elements[r])+(r!==15?",":")");return n+i}const cfe=(t=>e=>nG(e,t))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),ufe=(t=>(e,n)=>nG(e,t(n),"translate(-50%,-50%)"))(t=>[1/t,1/t,1/t,1,-1/t,-1/t,-1/t,-1,1/t,1/t,1/t,1,1,1,1,1]),dx=R.exports.forwardRef(({children:t,eps:e=.001,style:n,className:i,prepend:r,center:s,fullscreen:o,portal:a,distanceFactor:l,sprite:c=!1,transform:u=!1,occlude:h,onOcclude:f,zIndexRange:d=[16777271,0],calculatePosition:p=rfe,as:m="div",wrapperClass:g,pointerEvents:_="auto",...y},x)=>{const{gl:E,camera:w,scene:S,size:b,raycaster:M,events:T}=Te(),[B]=R.exports.useState(()=>document.createElement(m)),L=R.exports.useRef(),F=R.exports.useRef(null),U=R.exports.useRef(0),k=R.exports.useRef([0,0]),X=R.exports.useRef(null),Y=R.exports.useRef(null),Z=(a==null?void 0:a.current)||T.connected||E.domElement.parentNode;R.exports.useLayoutEffect(()=>{if(F.current){const Q=L.current=xb(B);if(S.updateMatrixWorld(),u)B.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const H=p(F.current,w,b);B.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${H[0]}px,${H[1]}px,0);transform-origin:0 0;`}return Z&&(r?Z.prepend(B):Z.appendChild(B)),()=>{Z&&Z.removeChild(B),Q.unmount()}}},[Z,u]),R.exports.useLayoutEffect(()=>{g&&(B.className=g)},[g]);const G=R.exports.useMemo(()=>u?{position:"absolute",top:0,left:0,width:b.width,height:b.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...o&&{top:-b.height/2,left:-b.width/2,width:b.width,height:b.height},...n},[n,s,o,b,u]),O=R.exports.useMemo(()=>({position:"absolute",pointerEvents:_}),[_]);R.exports.useLayoutEffect(()=>{if(u){var Q;(Q=L.current)==null||Q.render(se("div",{ref:X,style:G,children:se("div",{ref:Y,style:O,children:se("div",{ref:x,className:i,style:n,children:t})})}))}else{var H;(H=L.current)==null||H.render(se("div",{ref:x,style:G,className:i,children:t}))}});const z=R.exports.useRef(!0);return Ct(()=>{if(F.current){w.updateMatrixWorld(),F.current.updateWorldMatrix(!0,!1);const Q=u?k.current:p(F.current,w,b);if(u||Math.abs(U.current-w.zoom)>e||Math.abs(k.current[0]-Q[0])>e||Math.abs(k.current[1]-Q[1])>e){const H=sfe(F.current,w);let J=!1;typeof h=="boolean"?h===!0&&(J=[S]):Array.isArray(h)&&(J=h.map(oe=>oe.current));const j=z.current;if(J){const oe=ofe(F.current,w,M,J);z.current=oe&&!H}else z.current=!H;if(j!==z.current&&(f?f(!z.current):B.style.display=z.current?"block":"none"),B.style.zIndex=`${lfe(F.current,w,d)}`,u){const[oe,K]=[b.width/2,b.height/2],ce=w.projectionMatrix.elements[5]*K,{isOrthographicCamera:he,top:ve,left:Me,bottom:Se,right:le}=w,pe=cfe(w.matrixWorldInverse),Pe=he?`scale(${ce})translate(${YC(-(le+Me)/2)}px,${YC((ve+Se)/2)}px)`:`translateZ(${ce}px)`;let Oe=F.current.matrixWorld;c&&(Oe=w.matrixWorldInverse.clone().transpose().copyPosition(Oe).scale(F.current.scale),Oe.elements[3]=Oe.elements[7]=Oe.elements[11]=0,Oe.elements[15]=1),B.style.width=b.width+"px",B.style.height=b.height+"px",B.style.perspective=he?"":`${ce}px`,X.current&&Y.current&&(X.current.style.transform=`${Pe}${pe}translate(${oe}px,${K}px)`,Y.current.style.transform=ufe(Oe,1/((l||10)/400)))}else{const oe=l===void 0?1:afe(F.current,w)*l;B.style.transform=`translate3d(${Q[0]}px,${Q[1]}px,0) scale(${oe})`}k.current=Q,U.current=w.zoom}}}),se("group",{...y,ref:F})});function hfe({onChanged:t,portal:e,preventDefault:n=!0,scroll:i=!0,keyCode:r=9}){const s=R.exports.useRef(0),o=Te(c=>c.setEvents),a=Te(c=>c.get),l=Te(c=>c.gl);return R.exports.useEffect(()=>{var c;let u=[],h;const f=a().events.filter,d=(c=e==null?void 0:e.current)!==null&&c!==void 0?c:l.domElement.parentNode,p=()=>d&&t&&t(u,Math.round(s.current)%u.length);o({filter:(x,E)=>{let w=[...x];(w.length!==u.length||!u.every(S=>w.map(b=>b.object.uuid).includes(S.object.uuid)))&&(s.current=0,u=w,p()),f&&(w=f(w,E));for(let S=0;S<Math.round(s.current)%w.length;S++){const b=w.shift();w=[...w,b]}return w}});const m=x=>{var E,w;s.current=x(s.current),(E=a().events.handlers)==null||E.onPointerCancel(void 0),(w=a().events.handlers)==null||w.onPointerMove(h),p()},g=x=>{(x.keyCode||x.which===r)&&(n&&x.preventDefault(),u.length>1&&m(E=>E+1))},_=x=>{n&&x.preventDefault();let E=0;x||(x=window.event),x.wheelDelta?E=x.wheelDelta/120:x.detail&&(E=-x.detail/3),u.length>1&&m(w=>Math.abs(w-E))},y=x=>h=x;return document.addEventListener("pointermove",y,{passive:!0}),i&&document.addEventListener("wheel",_),r!==void 0&&document.addEventListener("keydown",g),()=>{o({filter:f}),r!==void 0&&document.removeEventListener("keydown",g),i&&document.removeEventListener("wheel",_),document.removeEventListener("pointermove",y)}},[l,a,o,n,i,r]),null}function ffe(t,e="pointer",n="auto"){R.exports.useEffect(()=>{if(t)return document.body.style.cursor=e,()=>void(document.body.style.cursor=n)},[t])}let op=0;const iG=ox(t=>(Tp.onStart=(e,n,i)=>{t({active:!0,item:e,loaded:n,total:i,progress:(n-op)/(i-op)*100})},Tp.onLoad=()=>{t({active:!1})},Tp.onError=e=>t(n=>({errors:[...n.errors,e]})),Tp.onProgress=(e,n,i)=>{n===i&&(op=i),t({active:!0,item:e,loaded:n,total:i,progress:(n-op)/(i-op)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0})),dfe=t=>`Loading ${t.toFixed(2)}%`;function pfe({containerStyles:t,innerStyles:e,barStyles:n,dataStyles:i,dataInterpolation:r=dfe,initialState:s=o=>o}){const{active:o,progress:a}=iG(),l=R.exports.useRef(0),c=R.exports.useRef(0),u=R.exports.useRef(null),[h,f]=R.exports.useState(s(o));R.exports.useEffect(()=>{let p;return o!==h&&(p=setTimeout(()=>f(o),300)),()=>clearTimeout(p)},[h,o]);const d=R.exports.useCallback(()=>{!u.current||(l.current+=(a-l.current)/2,(l.current>.95*a||a===100)&&(l.current=a),u.current.innerText=r(l.current),l.current<a&&(c.current=requestAnimationFrame(d)))},[r,a]);return R.exports.useEffect(()=>(d(),()=>cancelAnimationFrame(c.current)),[d]),h?se("div",{style:{...Lg.container,opacity:o?1:0,...t},children:se("div",{children:vt("div",{style:{...Lg.inner,...e},children:[se("div",{style:{...Lg.bar,transform:`scaleX(${a/100})`,...n}}),se("span",{ref:u,style:{...Lg.data,...i}})]})})}):null}const Lg={container:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"#171717",display:"flex",alignItems:"center",justifyContent:"center",transition:"opacity 300ms ease",zIndex:1e3},inner:{width:100,height:3,background:"#272727",textAlign:"center"},bar:{height:3,width:"100%",background:"white",transition:"transform 200ms",transformOrigin:"left center"},data:{display:"inline-block",position:"relative",fontVariantNumeric:"tabular-nums",marginTop:"0.8em",color:"#f0f0f0",fontSize:"0.6em",fontFamily:'-apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", "Helvetica Neue", Helvetica, Arial, Roboto, Ubuntu, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',whiteSpace:"nowrap"}},tI=R.exports.createContext(null);function nI(){return R.exports.useContext(tI)}function mfe({eps:t=1e-5,enabled:e=!0,infinite:n,horizontal:i,pages:r=1,distance:s=1,damping:o=4,style:a={},children:l}){const{get:c,setEvents:u,gl:h,size:f,invalidate:d,events:p}=Te(),[m]=R.exports.useState(()=>document.createElement("div")),[g]=R.exports.useState(()=>document.createElement("div")),[_]=R.exports.useState(()=>document.createElement("div")),y=h.domElement.parentNode,x=R.exports.useRef(0),E=R.exports.useMemo(()=>({el:m,eps:t,fill:g,fixed:_,horizontal:i,damping:o,offset:0,delta:0,scroll:x,pages:r,range(b,M,T=0){const B=b-T,L=B+M+T*2;return this.offset<B?0:this.offset>L?1:(this.offset-B)/(L-B)},curve(b,M,T=0){return Math.sin(this.range(b,M,T)*Math.PI)},visible(b,M,T=0){const B=b-T,L=B+M+T*2;return this.offset>=B&&this.offset<=L}}),[t,o,i,r]);R.exports.useEffect(()=>{m.style.position="absolute",m.style.width="100%",m.style.height="100%",m.style[i?"overflowX":"overflowY"]="auto",m.style[i?"overflowY":"overflowX"]="hidden",m.style.top="0px",m.style.left="0px";for(const M in a)m.style[M]=a[M];_.style.position="sticky",_.style.top="0px",_.style.left="0px",_.style.width="100%",_.style.height="100%",_.style.overflow="hidden",m.appendChild(_),g.style.height=i?"100%":`${r*s*100}%`,g.style.width=i?`${r*s*100}%`:"100%",g.style.pointerEvents="none",m.appendChild(g),y.appendChild(m),m[i?"scrollLeft":"scrollTop"]=1;const S=p.connected||h.domElement;requestAnimationFrame(()=>p.connect==null?void 0:p.connect(m));const b=c().events.compute;return u({compute(M,T){const B=M.clientX-y.offsetLeft,L=M.clientY-y.offsetTop;T.pointer.set(B/T.size.width*2-1,-(L/T.size.height)*2+1),T.raycaster.setFromCamera(T.pointer,T.camera)}}),()=>{y.removeChild(m),u({compute:b}),p.connect==null||p.connect(S)}},[r,s,i,m,g,_,y]),R.exports.useEffect(()=>{if(p.connected===m){const S=f[i?"width":"height"],b=m[i?"scrollWidth":"scrollHeight"],M=b-S;let T=0,B=!0,L=!0;const F=()=>{if(!(!e||L)&&(d(),T=m[i?"scrollLeft":"scrollTop"],x.current=T/M,n)){if(!B){if(T>=M){const k=1-E.offset;m[i?"scrollLeft":"scrollTop"]=1,x.current=E.offset=-k,B=!0}else if(T<=0){const k=1+E.offset;m[i?"scrollLeft":"scrollTop"]=b,x.current=E.offset=k,B=!0}}B&&setTimeout(()=>B=!1,40)}};m.addEventListener("scroll",F,{passive:!0}),requestAnimationFrame(()=>L=!1);const U=k=>m.scrollLeft+=k.deltaY/2;return i&&m.addEventListener("wheel",U,{passive:!0}),()=>{m.removeEventListener("scroll",F),i&&m.removeEventListener("wheel",U)}}},[m,p,f,n,E,d,i,e]);let w=0;return Ct((S,b)=>{E.offset=ct.damp(w=E.offset,x.current,o,b),E.delta=ct.damp(E.delta,Math.abs(w-E.offset),o,b),E.delta>t&&d()}),R.exports.createElement(tI.Provider,{value:E},l)}const Afe=R.exports.forwardRef(({children:t},e)=>{const n=R.exports.useRef(null),i=nI(),{width:r,height:s}=Te(o=>o.viewport);return Ct(()=>{n.current.position.x=i.horizontal?-r*(i.pages-1)*i.offset:0,n.current.position.y=i.horizontal?0:s*(i.pages-1)*i.offset}),se("group",{ref:Hn([e,n]),children:t})}),gfe=R.exports.forwardRef(({children:t,style:e,...n},i)=>{const r=nI(),s=R.exports.useRef(null),{width:o,height:a}=Te(u=>u.size),l=R.exports.useContext(Td),c=R.exports.useMemo(()=>xb(r.fixed),[r.fixed]);return Ct(()=>{r.delta>r.eps&&(s.current.style.transform=`translate3d(${r.horizontal?-o*(r.pages-1)*r.offset:0}px,${r.horizontal?0:a*(r.pages-1)*-r.offset}px,0)`)}),c.render(R.exports.createElement("div",oh({ref:Hn([i,s]),style:{...e,position:"absolute",top:0,left:0,willChange:"transform"}},n),R.exports.createElement(tI.Provider,{value:r},R.exports.createElement(Td.Provider,{value:l},t)))),null}),vfe=R.exports.forwardRef(({html:t,...e},n)=>se(t?gfe:Afe,{ref:n,...e}));let iI=P1();const Tt=t=>R1(t,iI);let rI=P1();Tt.write=t=>R1(t,rI);let px=P1();Tt.onStart=t=>R1(t,px);let sI=P1();Tt.onFrame=t=>R1(t,sI);let oI=P1();Tt.onFinish=t=>R1(t,oI);let ud=[];Tt.setTimeout=(t,e)=>{let n=Tt.now()+e,i=()=>{let s=ud.findIndex(o=>o.cancel==i);~s&&ud.splice(s,1),ec-=~s?1:0},r={time:n,handler:t,cancel:i};return ud.splice(rG(n),0,r),ec+=1,sG(),r};let rG=t=>~(~ud.findIndex(e=>e.time>t)||~ud.length);Tt.cancel=t=>{px.delete(t),sI.delete(t),oI.delete(t),iI.delete(t),rI.delete(t)};Tt.sync=t=>{qC=!0,Tt.batchedUpdates(t),qC=!1};Tt.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function i(...r){e=r,Tt.onStart(n)}return i.handler=t,i.cancel=()=>{px.delete(n),e=null},i};let aI=typeof window<"u"?window.requestAnimationFrame:()=>{};Tt.use=t=>aI=t;Tt.now=typeof performance<"u"?()=>performance.now():Date.now;Tt.batchedUpdates=t=>t();Tt.catch=console.error;Tt.frameLoop="always";Tt.advance=()=>{Tt.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):aG()};let $l=-1,ec=0,qC=!1;function R1(t,e){qC?(e.delete(t),t(0)):(e.add(t),sG())}function sG(){$l<0&&($l=0,Tt.frameLoop!=="demand"&&aI(oG))}function _fe(){$l=-1}function oG(){~$l&&(aI(oG),Tt.batchedUpdates(aG))}function aG(){let t=$l;$l=Tt.now();let e=rG($l);if(e&&(lG(ud.splice(0,e),n=>n.handler()),ec-=e),!ec){_fe();return}px.flush(),iI.flush(t?Math.min(64,$l-t):16.667),sI.flush(),rI.flush(),oI.flush()}function P1(){let t=new Set,e=t;return{add(n){ec+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return ec-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,ec-=e.size,lG(e,i=>i(n)&&t.add(i)),ec+=t.size,e=t)}}}function lG(t,e){t.forEach(n=>{try{e(n)}catch(i){Tt.catch(i)}})}function JC(){}const yfe=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),$e={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function Oa(t,e){if($e.arr(t)){if(!$e.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}const fn=(t,e)=>t.forEach(e);function al(t,e,n){if($e.arr(t)){for(let i=0;i<t.length;i++)e.call(n,t[i],`${i}`);return}for(const i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i)}const Ys=t=>$e.und(t)?[]:$e.arr(t)?t:[t];function Jp(t,e){if(t.size){const n=Array.from(t);t.clear(),fn(n,e)}}const Rp=(t,...e)=>Jp(t,n=>n(...e)),lI=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent);let cI,cG,dc=null,uG=!1,uI=JC;const xfe=t=>{t.to&&(cG=t.to),t.now&&(Tt.now=t.now),t.colors!==void 0&&(dc=t.colors),t.skipAnimation!=null&&(uG=t.skipAnimation),t.createStringInterpolator&&(cI=t.createStringInterpolator),t.requestAnimationFrame&&Tt.use(t.requestAnimationFrame),t.batchedUpdates&&(Tt.batchedUpdates=t.batchedUpdates),t.willAdvance&&(uI=t.willAdvance),t.frameLoop&&(Tt.frameLoop=t.frameLoop)};var fa=Object.freeze({__proto__:null,get createStringInterpolator(){return cI},get to(){return cG},get colors(){return dc},get skipAnimation(){return uG},get willAdvance(){return uI},assign:xfe});const Kp=new Set;let Vs=[],nw=[],G_=0;const mx={get idle(){return!Kp.size&&!Vs.length},start(t){G_>t.priority?(Kp.add(t),Tt.onStart(Efe)):(hG(t),Tt(KC))},advance:KC,sort(t){if(G_)Tt.onFrame(()=>mx.sort(t));else{const e=Vs.indexOf(t);~e&&(Vs.splice(e,1),fG(t))}},clear(){Vs=[],Kp.clear()}};function Efe(){Kp.forEach(hG),Kp.clear(),Tt(KC)}function hG(t){Vs.includes(t)||fG(t)}function fG(t){Vs.splice(wfe(Vs,e=>e.priority>t.priority),0,t)}function KC(t){const e=nw;for(let n=0;n<Vs.length;n++){const i=Vs[n];G_=i.priority,i.idle||(uI(i),i.advance(t),i.idle||e.push(i))}return G_=0,nw=Vs,nw.length=0,Vs=e,Vs.length>0}function wfe(t,e){const n=t.findIndex(e);return n<0?t.length:n}const Mfe={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Eo="[-+]?\\d*\\.?\\d+",z_=Eo+"%";function Ax(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}const Cfe=new RegExp("rgb"+Ax(Eo,Eo,Eo)),Sfe=new RegExp("rgba"+Ax(Eo,Eo,Eo,Eo)),bfe=new RegExp("hsl"+Ax(Eo,z_,z_)),Ife=new RegExp("hsla"+Ax(Eo,z_,z_,Eo)),Tfe=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Bfe=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Rfe=/^#([0-9a-fA-F]{6})$/,Pfe=/^#([0-9a-fA-F]{8})$/;function Dfe(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=Rfe.exec(t))?parseInt(e[1]+"ff",16)>>>0:dc&&dc[t]!==void 0?dc[t]:(e=Cfe.exec(t))?(mf(e[1])<<24|mf(e[2])<<16|mf(e[3])<<8|255)>>>0:(e=Sfe.exec(t))?(mf(e[1])<<24|mf(e[2])<<16|mf(e[3])<<8|ND(e[4]))>>>0:(e=Tfe.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=Pfe.exec(t))?parseInt(e[1],16)>>>0:(e=Bfe.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=bfe.exec(t))?(UD(OD(e[1]),kg(e[2]),kg(e[3]))|255)>>>0:(e=Ife.exec(t))?(UD(OD(e[1]),kg(e[2]),kg(e[3]))|ND(e[4]))>>>0:null}function iw(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function UD(t,e,n){const i=n<.5?n*(1+e):n+e-n*e,r=2*n-i,s=iw(r,i,t+1/3),o=iw(r,i,t),a=iw(r,i,t-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function mf(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function OD(t){return(parseFloat(t)%360+360)%360/360}function ND(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function kg(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function GD(t){let e=Dfe(t);if(e===null)return t;e=e||0;let n=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,s=(e&255)/255;return`rgba(${n}, ${i}, ${r}, ${s})`}const Wm=(t,e,n)=>{if($e.fun(t))return t;if($e.arr(t))return Wm({range:t,output:e,extrapolate:n});if($e.str(t.output[0]))return cI(t);const i=t,r=i.output,s=i.range||[0,1],o=i.extrapolateLeft||i.extrapolate||"extend",a=i.extrapolateRight||i.extrapolate||"extend",l=i.easing||(c=>c);return c=>{const u=Lfe(c,s);return Ffe(c,s[u],s[u+1],r[u],r[u+1],l,o,a,i.map)}};function Ffe(t,e,n,i,r,s,o,a,l){let c=l?l(t):t;if(c<e){if(o==="identity")return c;o==="clamp"&&(c=e)}if(c>n){if(a==="identity")return c;a==="clamp"&&(c=n)}return i===r?i:e===n?t<=e?i:r:(e===-1/0?c=-c:n===1/0?c=c-e:c=(c-e)/(n-e),c=s(c),i===-1/0?c=-c:r===1/0?c=c+i:c=c*(r-i)+i,c)}function Lfe(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}function ZC(){return ZC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ZC.apply(this,arguments)}const Pd=Symbol.for("FluidValue.get"),ah=Symbol.for("FluidValue.observers"),$o=t=>Boolean(t&&t[Pd]),Os=t=>t&&t[Pd]?t[Pd]():t,zD=t=>t[ah]||null;function kfe(t,e){t.eventObserved?t.eventObserved(e):t(e)}function Q_(t,e){let n=t[ah];n&&n.forEach(i=>{kfe(i,e)})}class Ufe{constructor(e){if(this[Pd]=void 0,this[ah]=void 0,!e&&!(e=this.get))throw Error("Unknown getter");Ofe(this,e)}}const Ofe=(t,e)=>dG(t,Pd,e);function D1(t,e){if(t[Pd]){let n=t[ah];n||dG(t,ah,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function H_(t,e){let n=t[ah];if(n&&n.has(e)){const i=n.size-1;i?n.delete(e):t[ah]=null,t.observerRemoved&&t.observerRemoved(i,e)}}const dG=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),jv=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Nfe=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,QD=new RegExp(`(${jv.source})(%|[a-z]+)`,"i"),Gfe=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,gx=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,pG=t=>{const[e,n]=zfe(t);if(!e||lI())return t;const i=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(i)return i.trim();if(n&&n.startsWith("--")){const r=window.getComputedStyle(document.documentElement).getPropertyValue(n);return r||t}else{if(n&&gx.test(n))return pG(n);if(n)return n}return t},zfe=t=>{const e=gx.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]};let rw;const Qfe=(t,e,n,i,r)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(i)}, ${r})`,mG=t=>{rw||(rw=dc?new RegExp(`(${Object.keys(dc).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(s=>Os(s).replace(gx,pG).replace(Nfe,GD).replace(rw,GD)),n=e.map(s=>s.match(jv).map(Number)),r=n[0].map((s,o)=>n.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>Wm(ZC({},t,{output:s})));return s=>{var o;const a=!QD.test(e[0])&&((o=e.find(c=>QD.test(c)))==null?void 0:o.replace(jv,""));let l=0;return e[0].replace(jv,()=>`${r[l++](s)}${a||""}`).replace(Gfe,Qfe)}},hI="react-spring: ",AG=t=>{const e=t;let n=!1;if(typeof e!="function")throw new TypeError(`${hI}once requires a function parameter`);return(...i)=>{n||(e(...i),n=!0)}},Hfe=AG(console.warn);function Vfe(){Hfe(`${hI}The "interpolate" function is deprecated in v9 (use "to" instead)`)}const Wfe=AG(console.warn);function jfe(){Wfe(`${hI}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function vx(t){return $e.str(t)&&(t[0]=="#"||/\d/.test(t)||!lI()&&gx.test(t)||t in(dc||{}))}const fI=lI()?R.exports.useEffect:R.exports.useLayoutEffect,Xfe=()=>{const t=R.exports.useRef(!1);return fI(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function gG(){const t=R.exports.useState()[1],e=Xfe();return()=>{e.current&&t(Math.random())}}function Yfe(t,e){const[n]=R.exports.useState(()=>({inputs:e,result:t()})),i=R.exports.useRef(),r=i.current;let s=r;return s?Boolean(e&&s.inputs&&qfe(e,s.inputs))||(s={inputs:e,result:t()}):s=n,R.exports.useEffect(()=>{i.current=s,r==n&&(n.inputs=n.result=void 0)},[s]),s.result}function qfe(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}const vG=t=>R.exports.useEffect(t,Jfe),Jfe=[];function HD(t){const e=R.exports.useRef();return R.exports.useEffect(()=>{e.current=t}),e.current}const jm=Symbol.for("Animated:node"),Kfe=t=>!!t&&t[jm]===t,Jo=t=>t&&t[jm],dI=(t,e)=>yfe(t,jm,e),_x=t=>t&&t[jm]&&t[jm].getPayload();class _G{constructor(){this.payload=void 0,dI(this,this)}getPayload(){return this.payload||[]}}class s0 extends _G{constructor(e){super(),this.done=!0,this.elapsedTime=void 0,this.lastPosition=void 0,this.lastVelocity=void 0,this.v0=void 0,this.durationProgress=0,this._value=e,$e.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new s0(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,n){return $e.num(e)&&(this.lastPosition=e,n&&(e=Math.round(e/n)*n,this.done&&(this.lastPosition=e))),this._value===e?!1:(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,$e.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}}class Dd extends s0{constructor(e){super(0),this._string=null,this._toString=void 0,this._toString=Wm({output:[e,e]})}static create(e){return new Dd(e)}getValue(){let e=this._string;return e==null?this._string=this._toString(this._value):e}setValue(e){if($e.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else if(super.setValue(e))this._string=null;else return!1;return!0}reset(e){e&&(this._toString=Wm({output:[this.getValue(),e]})),this._value=0,super.reset()}}const V_={dependencies:null};class pI extends _G{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const n={};return al(this.source,(i,r)=>{Kfe(i)?n[r]=i.getValue(e):$o(i)?n[r]=Os(i):e||(n[r]=i)}),n}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&fn(this.payload,e=>e.reset())}_makePayload(e){if(e){const n=new Set;return al(e,this._addToPayload,n),Array.from(n)}}_addToPayload(e){V_.dependencies&&$o(e)&&V_.dependencies.add(e);const n=_x(e);n&&fn(n,i=>this.add(i))}}class mI extends pI{constructor(e){super(e)}static create(e){return new mI(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){const n=this.getPayload();return e.length==n.length?n.map((i,r)=>i.setValue(e[r])).some(Boolean):(super.setValue(e.map(Zfe)),!0)}}function Zfe(t){return(vx(t)?Dd:s0).create(t)}function $C(t){const e=Jo(t);return e?e.constructor:$e.arr(t)?mI:vx(t)?Dd:s0}function eS(){return eS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},eS.apply(this,arguments)}const VD=(t,e)=>{const n=!$e.fun(t)||t.prototype&&t.prototype.isReactComponent;return R.exports.forwardRef((i,r)=>{const s=R.exports.useRef(null),o=n&&R.exports.useCallback(p=>{s.current=tde(r,p)},[r]),[a,l]=ede(i,e),c=gG(),u=()=>{const p=s.current;if(n&&!p)return;(p?e.applyAnimatedValues(p,a.getValue(!0)):!1)===!1&&c()},h=new $fe(u,l),f=R.exports.useRef();fI(()=>(f.current=h,fn(l,p=>D1(p,h)),()=>{f.current&&(fn(f.current.deps,p=>H_(p,f.current)),Tt.cancel(f.current.update))})),R.exports.useEffect(u,[]),vG(()=>()=>{const p=f.current;fn(p.deps,m=>H_(m,p))});const d=e.getComponentProps(a.getValue());return se(t,{...d,ref:o})})};class $fe{constructor(e,n){this.update=e,this.deps=n}eventObserved(e){e.type=="change"&&Tt.write(this.update)}}function ede(t,e){const n=new Set;return V_.dependencies=n,t.style&&(t=eS({},t,{style:e.createAnimatedStyle(t.style)})),t=new pI(t),V_.dependencies=null,[t,n]}function tde(t,e){return t&&($e.fun(t)?t(e):t.current=e),e}const WD=Symbol.for("AnimatedComponent"),nde=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=r=>new pI(r),getComponentProps:i=r=>r}={})=>{const r={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:i},s=o=>{const a=jD(o)||"Anonymous";return $e.str(o)?o=s[o]||(s[o]=VD(o,r)):o=o[WD]||(o[WD]=VD(o,r)),o.displayName=`Animated(${a})`,o};return al(t,(o,a)=>{$e.arr(t)&&(a=jD(o)),s[a]=s(o)}),{animated:s}},jD=t=>$e.str(t)?t:t&&$e.str(t.displayName)?t.displayName:$e.fun(t)&&t.name||null;function Di(){return Di=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Di.apply(this,arguments)}function yu(t,...e){return $e.fun(t)?t(...e):t}const Zp=(t,e)=>t===!0||!!(e&&t&&($e.fun(t)?t(e):Ys(t).includes(e))),yG=(t,e)=>$e.obj(t)?e&&t[e]:t,xG=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,ide=t=>t,AI=(t,e=ide)=>{let n=rde;t.default&&t.default!==!0&&(t=t.default,n=Object.keys(t));const i={};for(const r of n){const s=e(t[r],r);$e.und(s)||(i[r]=s)}return i},rde=["config","onProps","onStart","onChange","onPause","onResume","onRest"],sde={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function ode(t){const e={};let n=0;if(al(t,(i,r)=>{sde[r]||(e[r]=i,n++)}),n)return e}function EG(t){const e=ode(t);if(e){const n={to:e};return al(t,(i,r)=>r in e||(n[r]=i)),n}return Di({},t)}function Xm(t){return t=Os(t),$e.arr(t)?t.map(Xm):vx(t)?fa.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function ade(t){for(const e in t)return!0;return!1}function tS(t){return $e.fun(t)||$e.arr(t)&&$e.obj(t[0])}function lde(t,e){var n;(n=t.ref)==null||n.delete(t),e==null||e.delete(t)}function cde(t,e){if(e&&t.ref!==e){var n;(n=t.ref)==null||n.delete(t),e.add(t),t.ref=e}}const ude={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},W_=1.70158,Ug=W_*1.525,XD=W_+1,YD=2*Math.PI/3,qD=2*Math.PI/4.5,Og=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,hde={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>XD*t*t*t-W_*t*t,easeOutBack:t=>1+XD*Math.pow(t-1,3)+W_*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((Ug+1)*2*t-Ug)/2:(Math.pow(2*t-2,2)*((Ug+1)*(t*2-2)+Ug)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*YD),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*YD)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*qD))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*qD)/2+1,easeInBounce:t=>1-Og(1-t),easeOutBounce:Og,easeInOutBounce:t=>t<.5?(1-Og(1-2*t))/2:(1+Og(2*t-1))/2},nS=Di({},ude.default,{mass:1,damping:1,easing:hde.linear,clamp:!1});class fde{constructor(){this.tension=void 0,this.friction=void 0,this.frequency=void 0,this.damping=void 0,this.mass=void 0,this.velocity=0,this.restVelocity=void 0,this.precision=void 0,this.progress=void 0,this.duration=void 0,this.easing=void 0,this.clamp=void 0,this.bounce=void 0,this.decay=void 0,this.round=void 0,Object.assign(this,nS)}}function dde(t,e,n){n&&(n=Di({},n),JD(n,e),e=Di({},n,e)),JD(t,e),Object.assign(t,e);for(const o in nS)t[o]==null&&(t[o]=nS[o]);let{mass:i,frequency:r,damping:s}=t;return $e.und(r)||(r<.01&&(r=.01),s<0&&(s=0),t.tension=Math.pow(2*Math.PI/r,2)*i,t.friction=4*Math.PI*s*i/r),t}function JD(t,e){if(!$e.und(e.decay))t.duration=void 0;else{const n=!$e.und(e.tension)||!$e.und(e.friction);(n||!$e.und(e.frequency)||!$e.und(e.damping)||!$e.und(e.mass))&&(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}}const KD=[];class pde{constructor(){this.changed=!1,this.values=KD,this.toValues=null,this.fromValues=KD,this.to=void 0,this.from=void 0,this.config=new fde,this.immediate=!1}}function wG(t,{key:e,props:n,defaultProps:i,state:r,actions:s}){return new Promise((o,a)=>{var l;let c,u,h=Zp((l=n.cancel)!=null?l:i==null?void 0:i.cancel,e);if(h)p();else{$e.und(n.pause)||(r.paused=Zp(n.pause,e));let m=i==null?void 0:i.pause;m!==!0&&(m=r.paused||Zp(m,e)),c=yu(n.delay||0,e),m?(r.resumeQueue.add(d),s.pause()):(s.resume(),d())}function f(){r.resumeQueue.add(d),r.timeouts.delete(u),u.cancel(),c=u.time-Tt.now()}function d(){c>0&&!fa.skipAnimation?(r.delayed=!0,u=Tt.setTimeout(p,c),r.pauseQueue.add(f),r.timeouts.add(u)):p()}function p(){r.delayed&&(r.delayed=!1),r.pauseQueue.delete(f),r.timeouts.delete(u),t<=(r.cancelId||0)&&(h=!0);try{s.start(Di({},n,{callId:t,cancel:h}),o)}catch(m){a(m)}}})}const gI=(t,e)=>e.length==1?e[0]:e.some(n=>n.cancelled)?hd(t.get()):e.every(n=>n.noop)?MG(t.get()):go(t.get(),e.every(n=>n.finished)),MG=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),go=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),hd=t=>({value:t,cancelled:!0,finished:!1});function CG(t,e,n,i){const{callId:r,parentId:s,onRest:o}=e,{asyncTo:a,promise:l}=n;return!s&&t===a&&!e.reset?l:n.promise=(async()=>{n.asyncId=r,n.asyncTo=t;const c=AI(e,(g,_)=>_==="onRest"?void 0:g);let u,h;const f=new Promise((g,_)=>(u=g,h=_)),d=g=>{const _=r<=(n.cancelId||0)&&hd(i)||r!==n.asyncId&&go(i,!1);if(_)throw g.result=_,h(g),g},p=(g,_)=>{const y=new ZD,x=new $D;return(async()=>{if(fa.skipAnimation)throw Ym(n),x.result=go(i,!1),h(x),x;d(y);const E=$e.obj(g)?Di({},g):Di({},_,{to:g});E.parentId=r,al(c,(S,b)=>{$e.und(E[b])&&(E[b]=S)});const w=await i.start(E);return d(y),n.paused&&await new Promise(S=>{n.resumeQueue.add(S)}),w})()};let m;if(fa.skipAnimation)return Ym(n),go(i,!1);try{let g;$e.arr(t)?g=(async _=>{for(const y of _)await p(y)})(t):g=Promise.resolve(t(p,i.stop.bind(i))),await Promise.all([g.then(u),f]),m=go(i.get(),!0,!1)}catch(g){if(g instanceof ZD)m=g.result;else if(g instanceof $D)m=g.result;else throw g}finally{r==n.asyncId&&(n.asyncId=s,n.asyncTo=s?a:void 0,n.promise=s?l:void 0)}return $e.fun(o)&&Tt.batchedUpdates(()=>{o(m,i,i.item)}),m})()}function Ym(t,e){Jp(t.timeouts,n=>n.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}class ZD extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise."),this.result=void 0}}class $D extends Error{constructor(){super("SkipAnimationSignal"),this.result=void 0}}const iS=t=>t instanceof vI;let mde=1;class vI extends Ufe{constructor(...e){super(...e),this.id=mde++,this.key=void 0,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=Jo(this);return e&&e.getValue()}to(...e){return fa.to(this,e)}interpolate(...e){return Vfe(),fa.to(this,e)}toJSON(){return this.get()}observerAdded(e){e==1&&this._attach()}observerRemoved(e){e==0&&this._detach()}_attach(){}_detach(){}_onChange(e,n=!1){Q_(this,{type:"change",parent:this,value:e,idle:n})}_onPriorityChange(e){this.idle||mx.sort(this),Q_(this,{type:"priority",parent:this,priority:e})}}const lh=Symbol.for("SpringPhase"),SG=1,rS=2,sS=4,sw=t=>(t[lh]&SG)>0,Ul=t=>(t[lh]&rS)>0,ap=t=>(t[lh]&sS)>0,e4=(t,e)=>e?t[lh]|=rS|SG:t[lh]&=~rS,t4=(t,e)=>e?t[lh]|=sS:t[lh]&=~sS;class Ade extends vI{constructor(e,n){if(super(),this.key=void 0,this.animation=new pde,this.queue=void 0,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!$e.und(e)||!$e.und(n)){const i=$e.obj(e)?Di({},e):Di({},n,{from:e});$e.und(i.default)&&(i.default=!0),this.start(i)}}get idle(){return!(Ul(this)||this._state.asyncTo)||ap(this)}get goal(){return Os(this.animation.to)}get velocity(){const e=Jo(this);return e instanceof s0?e.lastVelocity||0:e.getPayload().map(n=>n.lastVelocity||0)}get hasAnimated(){return sw(this)}get isAnimating(){return Ul(this)}get isPaused(){return ap(this)}get isDelayed(){return this._state.delayed}advance(e){let n=!0,i=!1;const r=this.animation;let{config:s,toValues:o}=r;const a=_x(r.to);!a&&$o(r.to)&&(o=Ys(Os(r.to))),r.values.forEach((u,h)=>{if(u.done)return;const f=u.constructor==Dd?1:a?a[h].lastPosition:o[h];let d=r.immediate,p=f;if(!d){if(p=u.lastPosition,s.tension<=0){u.done=!0;return}let m=u.elapsedTime+=e;const g=r.fromValues[h],_=u.v0!=null?u.v0:u.v0=$e.arr(s.velocity)?s.velocity[h]:s.velocity;let y;const x=s.precision||(g==f?.005:Math.min(1,Math.abs(f-g)*.001));if($e.und(s.duration))if(s.decay){const E=s.decay===!0?.998:s.decay,w=Math.exp(-(1-E)*m);p=g+_/(1-E)*(1-w),d=Math.abs(u.lastPosition-p)<=x,y=_*w}else{y=u.lastVelocity==null?_:u.lastVelocity;const E=s.restVelocity||x/10,w=s.clamp?0:s.bounce,S=!$e.und(w),b=g==f?u.v0>0:g<f;let M,T=!1;const B=1,L=Math.ceil(e/B);for(let F=0;F<L&&(M=Math.abs(y)>E,!(!M&&(d=Math.abs(f-p)<=x,d)));++F){S&&(T=p==f||p>f==b,T&&(y=-y*w,p=f));const U=-s.tension*1e-6*(p-f),k=-s.friction*.001*y,X=(U+k)/s.mass;y=y+X*B,p=p+y*B}}else{let E=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,u.durationProgress>0&&(u.elapsedTime=s.duration*u.durationProgress,m=u.elapsedTime+=e)),E=(s.progress||0)+m/this._memoizedDuration,E=E>1?1:E<0?0:E,u.durationProgress=E),p=g+s.easing(E)*(f-g),y=(p-u.lastPosition)/e,d=E==1}u.lastVelocity=y,Number.isNaN(p)&&(console.warn("Got NaN while animating:",this),d=!0)}a&&!a[h].done&&(d=!1),d?u.done=!0:n=!1,u.setValue(p,s.round)&&(i=!0)});const l=Jo(this),c=l.getValue();if(n){const u=Os(r.to);(c!==u||i)&&!s.decay?(l.setValue(u),this._onChange(u)):i&&s.decay&&this._onChange(c),this._stop()}else i&&this._onChange(c)}set(e){return Tt.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Ul(this)){const{to:e,config:n}=this.animation;Tt.batchedUpdates(()=>{this._onStart(),n.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,n){let i;return $e.und(e)?(i=this.queue||[],this.queue=[]):i=[$e.obj(e)?e:Di({},n,{to:e})],Promise.all(i.map(r=>this._update(r))).then(r=>gI(this,r))}stop(e){const{to:n}=this.animation;return this._focus(this.get()),Ym(this._state,e&&this._lastCallId),Tt.batchedUpdates(()=>this._stop(n,e)),this}reset(){this._update({reset:!0})}eventObserved(e){e.type=="change"?this._start():e.type=="priority"&&(this.priority=e.priority+1)}_prepareNode(e){const n=this.key||"";let{to:i,from:r}=e;i=$e.obj(i)?i[n]:i,(i==null||tS(i))&&(i=void 0),r=$e.obj(r)?r[n]:r,r==null&&(r=void 0);const s={to:i,from:r};return sw(this)||(e.reverse&&([i,r]=[r,i]),r=Os(r),$e.und(r)?Jo(this)||this._set(i):this._set(r)),s}_update(e,n){let i=Di({},e);const{key:r,defaultProps:s}=this;i.default&&Object.assign(s,AI(i,(l,c)=>/^on/.test(c)?yG(l,r):l)),i4(this,i,"onProps"),cp(this,"onProps",i,this);const o=this._prepareNode(i);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const a=this._state;return wG(++this._lastCallId,{key:r,props:i,defaultProps:s,state:a,actions:{pause:()=>{ap(this)||(t4(this,!0),Rp(a.pauseQueue),cp(this,"onPause",go(this,lp(this,this.animation.to)),this))},resume:()=>{ap(this)&&(t4(this,!1),Ul(this)&&this._resume(),Rp(a.resumeQueue),cp(this,"onResume",go(this,lp(this,this.animation.to)),this))},start:this._merge.bind(this,o)}}).then(l=>{if(i.loop&&l.finished&&!(n&&l.noop)){const c=bG(i);if(c)return this._update(c,!0)}return l})}_merge(e,n,i){if(n.cancel)return this.stop(!0),i(hd(this));const r=!$e.und(e.to),s=!$e.und(e.from);if(r||s)if(n.callId>this._lastToId)this._lastToId=n.callId;else return i(hd(this));const{key:o,defaultProps:a,animation:l}=this,{to:c,from:u}=l;let{to:h=c,from:f=u}=e;s&&!r&&(!n.default||$e.und(h))&&(h=f),n.reverse&&([h,f]=[f,h]);const d=!Oa(f,u);d&&(l.from=f),f=Os(f);const p=!Oa(h,c);p&&this._focus(h);const m=tS(n.to),{config:g}=l,{decay:_,velocity:y}=g;(r||s)&&(g.velocity=0),n.config&&!m&&dde(g,yu(n.config,o),n.config!==a.config?yu(a.config,o):void 0);let x=Jo(this);if(!x||$e.und(h))return i(go(this,!0));const E=$e.und(n.reset)?s&&!n.default:!$e.und(f)&&Zp(n.reset,o),w=E?f:this.get(),S=Xm(h),b=$e.num(S)||$e.arr(S)||vx(S),M=!m&&(!b||Zp(a.immediate||n.immediate,o));if(p){const F=$C(h);if(F!==x.constructor)if(M)x=this._set(S);else throw Error(`Cannot animate between ${x.constructor.name} and ${F.name}, as the "to" prop suggests`)}const T=x.constructor;let B=$o(h),L=!1;if(!B){const F=E||!sw(this)&&d;(p||F)&&(L=Oa(Xm(w),S),B=!L),(!Oa(l.immediate,M)&&!M||!Oa(g.decay,_)||!Oa(g.velocity,y))&&(B=!0)}if(L&&Ul(this)&&(l.changed&&!E?B=!0:B||this._stop(c)),!m&&((B||$o(c))&&(l.values=x.getPayload(),l.toValues=$o(h)?null:T==Dd?[1]:Ys(S)),l.immediate!=M&&(l.immediate=M,!M&&!E&&this._set(c)),B)){const{onRest:F}=l;fn(vde,k=>i4(this,n,k));const U=go(this,lp(this,c));Rp(this._pendingCalls,U),this._pendingCalls.add(i),l.changed&&Tt.batchedUpdates(()=>{l.changed=!E,F==null||F(U,this),E?yu(a.onRest,U):l.onStart==null||l.onStart(U,this)})}E&&this._set(w),m?i(CG(n.to,n,this._state,this)):B?this._start():Ul(this)&&!p?this._pendingCalls.add(i):i(MG(w))}_focus(e){const n=this.animation;e!==n.to&&(zD(this)&&this._detach(),n.to=e,zD(this)&&this._attach())}_attach(){let e=0;const{to:n}=this.animation;$o(n)&&(D1(n,this),iS(n)&&(e=n.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;$o(e)&&H_(e,this)}_set(e,n=!0){const i=Os(e);if(!$e.und(i)){const r=Jo(this);if(!r||!Oa(i,r.getValue())){const s=$C(i);!r||r.constructor!=s?dI(this,s.create(i)):r.setValue(i),r&&Tt.batchedUpdates(()=>{this._onChange(i,n)})}}return Jo(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,cp(this,"onStart",go(this,lp(this,e.to)),this))}_onChange(e,n){n||(this._onStart(),yu(this.animation.onChange,e,this)),yu(this.defaultProps.onChange,e,this),super._onChange(e,n)}_start(){const e=this.animation;Jo(this).reset(Os(e.to)),e.immediate||(e.fromValues=e.values.map(n=>n.lastPosition)),Ul(this)||(e4(this,!0),ap(this)||this._resume())}_resume(){fa.skipAnimation?this.finish():mx.start(this)}_stop(e,n){if(Ul(this)){e4(this,!1);const i=this.animation;fn(i.values,s=>{s.done=!0}),i.toValues&&(i.onChange=i.onPause=i.onResume=void 0),Q_(this,{type:"idle",parent:this});const r=n?hd(this.get()):go(this.get(),lp(this,e!=null?e:i.to));Rp(this._pendingCalls,r),i.changed&&(i.changed=!1,cp(this,"onRest",r,this))}}}function lp(t,e){const n=Xm(e),i=Xm(t.get());return Oa(i,n)}function bG(t,e=t.loop,n=t.to){let i=yu(e);if(i){const r=i!==!0&&EG(i),s=(r||t).reverse,o=!r||r.reset;return qm(Di({},t,{loop:e,default:!1,pause:void 0,to:!s||tS(n)?n:void 0,from:o?t.from:void 0,reset:o},r))}}function qm(t){const{to:e,from:n}=t=EG(t),i=new Set;return $e.obj(e)&&n4(e,i),$e.obj(n)&&n4(n,i),t.keys=i.size?Array.from(i):null,t}function gde(t){const e=qm(t);return $e.und(e.default)&&(e.default=AI(e)),e}function n4(t,e){al(t,(n,i)=>n!=null&&e.add(i))}const vde=["onStart","onRest","onChange","onPause","onResume"];function i4(t,e,n){t.animation[n]=e[n]!==xG(e,n)?yG(e[n],t.key):void 0}function cp(t,e,...n){var i,r,s,o;(i=(r=t.animation)[e])==null||i.call(r,...n),(s=(o=t.defaultProps)[e])==null||s.call(o,...n)}const _de=["onStart","onChange","onRest"];let yde=1;class xde{constructor(e,n){this.id=yde++,this.springs={},this.queue=[],this.ref=void 0,this._flush=void 0,this._initialProps=void 0,this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._item=void 0,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),n&&(this._flush=n),e&&this.start(Di({default:!0},e))}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each((n,i)=>e[i]=n.get()),e}set(e){for(const n in e){const i=e[n];$e.und(i)||this.springs[n].set(i)}}update(e){return e&&this.queue.push(qm(e)),this}start(e){let{queue:n}=this;return e?n=Ys(e).map(qm):this.queue=[],this._flush?this._flush(this,n):(PG(this,n),oS(this,n))}stop(e,n){if(e!==!!e&&(n=e),n){const i=this.springs;fn(Ys(n),r=>i[r].stop(!!e))}else Ym(this._state,this._lastAsyncId),this.each(i=>i.stop(!!e));return this}pause(e){if($e.und(e))this.start({pause:!0});else{const n=this.springs;fn(Ys(e),i=>n[i].pause())}return this}resume(e){if($e.und(e))this.start({pause:!1});else{const n=this.springs;fn(Ys(e),i=>n[i].resume())}return this}each(e){al(this.springs,e)}_onFrame(){const{onStart:e,onChange:n,onRest:i}=this._events,r=this._active.size>0,s=this._changed.size>0;(r&&!this._started||s&&!this._started)&&(this._started=!0,Jp(e,([l,c])=>{c.value=this.get(),l(c,this,this._item)}));const o=!r&&this._started,a=s||o&&i.size?this.get():null;s&&n.size&&Jp(n,([l,c])=>{c.value=a,l(c,this,this._item)}),o&&(this._started=!1,Jp(i,([l,c])=>{c.value=a,l(c,this,this._item)}))}eventObserved(e){if(e.type=="change")this._changed.add(e.parent),e.idle||this._active.add(e.parent);else if(e.type=="idle")this._active.delete(e.parent);else return;Tt.onFrame(this._onFrame)}}function oS(t,e){return Promise.all(e.map(n=>IG(t,n))).then(n=>gI(t,n))}async function IG(t,e,n){const{keys:i,to:r,from:s,loop:o,onRest:a,onResolve:l}=e,c=$e.obj(e.default)&&e.default;o&&(e.loop=!1),r===!1&&(e.to=null),s===!1&&(e.from=null);const u=$e.arr(r)||$e.fun(r)?r:void 0;u?(e.to=void 0,e.onRest=void 0,c&&(c.onRest=void 0)):fn(_de,m=>{const g=e[m];if($e.fun(g)){const _=t._events[m];e[m]=({finished:y,cancelled:x})=>{const E=_.get(g);E?(y||(E.finished=!1),x&&(E.cancelled=!0)):_.set(g,{value:null,finished:y||!1,cancelled:x||!1})},c&&(c[m]=e[m])}});const h=t._state;e.pause===!h.paused?(h.paused=e.pause,Rp(e.pause?h.pauseQueue:h.resumeQueue)):h.paused&&(e.pause=!0);const f=(i||Object.keys(t.springs)).map(m=>t.springs[m].start(e)),d=e.cancel===!0||xG(e,"cancel")===!0;(u||d&&h.asyncId)&&f.push(wG(++t._lastAsyncId,{props:e,state:h,actions:{pause:JC,resume:JC,start(m,g){d?(Ym(h,t._lastAsyncId),g(hd(t))):(m.onRest=a,g(CG(u,m,h,t)))}}})),h.paused&&await new Promise(m=>{h.resumeQueue.add(m)});const p=gI(t,await Promise.all(f));if(o&&p.finished&&!(n&&p.noop)){const m=bG(e,o,r);if(m)return PG(t,[m]),IG(t,m,!0)}return l&&Tt.batchedUpdates(()=>l(p,t,t.item)),p}function r4(t,e){const n=Di({},t.springs);return e&&fn(Ys(e),i=>{$e.und(i.keys)&&(i=qm(i)),$e.obj(i.to)||(i=Di({},i,{to:void 0})),RG(n,i,r=>BG(r))}),TG(t,n),n}function TG(t,e){al(e,(n,i)=>{t.springs[i]||(t.springs[i]=n,D1(n,t))})}function BG(t,e){const n=new Ade;return n.key=t,e&&D1(n,e),n}function RG(t,e,n){e.keys&&fn(e.keys,i=>{(t[i]||(t[i]=n(i)))._prepareNode(e)})}function PG(t,e){fn(e,n=>{RG(t.springs,n,i=>BG(i,t))})}function Ede(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}const wde=["children"],yx=t=>{let{children:e}=t,n=Ede(t,wde);const i=R.exports.useContext(j_),r=n.pause||!!i.pause,s=n.immediate||!!i.immediate;n=Yfe(()=>({pause:r,immediate:s}),[r,s]);const{Provider:o}=j_;return se(o,{value:n,children:e})},j_=Mde(yx,{});yx.Provider=j_.Provider;yx.Consumer=j_.Consumer;function Mde(t,e){return Object.assign(t,R.exports.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}const Cde=()=>{const t=[],e=function(r){jfe();const s=[];return fn(t,(o,a)=>{if($e.und(r))s.push(o.start());else{const l=n(r,o,a);l&&s.push(o.start(l))}}),s};e.current=t,e.add=function(i){t.includes(i)||t.push(i)},e.delete=function(i){const r=t.indexOf(i);~r&&t.splice(r,1)},e.pause=function(){return fn(t,i=>i.pause(...arguments)),this},e.resume=function(){return fn(t,i=>i.resume(...arguments)),this},e.set=function(i){fn(t,r=>r.set(i))},e.start=function(i){const r=[];return fn(t,(s,o)=>{if($e.und(i))r.push(s.start());else{const a=this._getProps(i,s,o);a&&r.push(s.start(a))}}),r},e.stop=function(){return fn(t,i=>i.stop(...arguments)),this},e.update=function(i){return fn(t,(r,s)=>r.update(this._getProps(i,r,s))),this};const n=function(r,s,o){return $e.fun(r)?r(o,s):r};return e._getProps=n,e};function Sde(t,e,n){const i=$e.fun(e)&&e;i&&!n&&(n=[]);const r=R.exports.useMemo(()=>i||arguments.length==3?Cde():void 0,[]),s=R.exports.useRef(0),o=gG(),a=R.exports.useMemo(()=>({ctrls:[],queue:[],flush(_,y){const x=r4(_,y);return s.current>0&&!a.queue.length&&!Object.keys(x).some(w=>!_.springs[w])?oS(_,y):new Promise(w=>{TG(_,x),a.queue.push(()=>{w(oS(_,y))}),o()})}}),[]),l=R.exports.useRef([...a.ctrls]),c=[],u=HD(t)||0;R.exports.useMemo(()=>{fn(l.current.slice(t,u),_=>{lde(_,r),_.stop(!0)}),l.current.length=t,h(u,t)},[t]),R.exports.useMemo(()=>{h(0,Math.min(u,t))},n);function h(_,y){for(let x=_;x<y;x++){const E=l.current[x]||(l.current[x]=new xde(null,a.flush)),w=i?i(x,E):e[x];w&&(c[x]=gde(w))}}const f=l.current.map((_,y)=>r4(_,c[y])),d=R.exports.useContext(yx),p=HD(d),m=d!==p&&ade(d);fI(()=>{s.current++,a.ctrls=l.current;const{queue:_}=a;_.length&&(a.queue=[],fn(_,y=>y())),fn(l.current,(y,x)=>{r==null||r.add(y),m&&y.start({default:d});const E=c[x];E&&(cde(y,E.ref),y.ref?y.queue.push(E):y.start(E))})}),vG(()=>()=>{fn(a.ctrls,_=>_.stop(!0))});const g=f.map(_=>Di({},_));return r?[g,r]:g}function bde(t,e){const n=$e.fun(t),[[i],r]=Sde(1,n?t:[t],n?e||[]:e);return n||arguments.length==2?[i,r]:i}let s4;(function(t){t.MOUNT="mount",t.ENTER="enter",t.UPDATE="update",t.LEAVE="leave"})(s4||(s4={}));class Ide extends vI{constructor(e,n){super(),this.key=void 0,this.idle=!0,this.calc=void 0,this._active=new Set,this.source=e,this.calc=Wm(...n);const i=this._get(),r=$C(i);dI(this,r.create(i))}advance(e){const n=this._get(),i=this.get();Oa(n,i)||(Jo(this).setValue(n),this._onChange(n,this.idle)),!this.idle&&o4(this._active)&&ow(this)}_get(){const e=$e.arr(this.source)?this.source.map(Os):Ys(Os(this.source));return this.calc(...e)}_start(){this.idle&&!o4(this._active)&&(this.idle=!1,fn(_x(this),e=>{e.done=!1}),fa.skipAnimation?(Tt.batchedUpdates(()=>this.advance()),ow(this)):mx.start(this))}_attach(){let e=1;fn(Ys(this.source),n=>{$o(n)&&D1(n,this),iS(n)&&(n.idle||this._active.add(n),e=Math.max(e,n.priority+1))}),this.priority=e,this._start()}_detach(){fn(Ys(this.source),e=>{$o(e)&&H_(e,this)}),this._active.clear(),ow(this)}eventObserved(e){e.type=="change"?e.idle?this.advance():(this._active.add(e.parent),this._start()):e.type=="idle"?this._active.delete(e.parent):e.type=="priority"&&(this.priority=Ys(this.source).reduce((n,i)=>Math.max(n,(iS(i)?i.priority:0)+1),0))}}function Tde(t){return t.idle!==!1}function o4(t){return!t.size||Array.from(t).every(Tde)}function ow(t){t.idle||(t.idle=!0,fn(_x(t),e=>{e.done=!0}),Q_(t,{type:"idle",parent:t}))}fa.assign({createStringInterpolator:mG,to:(t,e)=>new Ide(t,e)});const Bde=["primitive"].concat(Object.keys(Vm).filter(t=>/^[A-Z]/.test(t)).map(t=>t[0].toLowerCase()+t.slice(1)));fa.assign({createStringInterpolator:mG,colors:Mfe,frameLoop:"demand"});cx(()=>{Tt.advance()});const Rde=nde(Bde,{applyAnimatedValues:hs}),Pde=Rde.animated;function Dde(t,e,n){return Math.max(e,Math.min(t,n))}const In={toVector(t,e){return t===void 0&&(t=e),Array.isArray(t)?t:[t,t]},add(t,e){return[t[0]+e[0],t[1]+e[1]]},sub(t,e){return[t[0]-e[0],t[1]-e[1]]},addTo(t,e){t[0]+=e[0],t[1]+=e[1]},subTo(t,e){t[0]-=e[0],t[1]-=e[1]}};function a4(t,e,n){return e===0||Math.abs(e)===1/0?Math.pow(t,n*5):t*e*n/(e+n*t)}function l4(t,e,n,i=.15){return i===0?Dde(t,e,n):t<e?-a4(e-t,n-e,i)+e:t>n?+a4(t-n,n-e,i)+n:t}function Fde(t,[e,n],[i,r]){const[[s,o],[a,l]]=t;return[l4(e,s,o,i),l4(n,a,l,r)]}function ci(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Gn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?c4(Object(n),!0).forEach(function(i){ci(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c4(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}const DG={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function u4(t){return t?t[0].toUpperCase()+t.slice(1):""}const Lde=["enter","leave"];function kde(t=!1,e){return t&&!Lde.includes(e)}function Ude(t,e="",n=!1){const i=DG[t],r=i&&i[e]||e;return"on"+u4(t)+u4(r)+(kde(n,r)?"Capture":"")}const Ode=["gotpointercapture","lostpointercapture"];function Nde(t){let e=t.substring(2).toLowerCase();const n=!!~e.indexOf("passive");n&&(e=e.replace("passive",""));const i=Ode.includes(e)?"capturecapture":"capture",r=!!~e.indexOf(i);return r&&(e=e.replace("capture","")),{device:e,capture:r,passive:n}}function Gde(t,e=""){const n=DG[t],i=n&&n[e]||e;return t+i}function xx(t){return"touches"in t}function FG(t){return xx(t)?"touch":"pointerType"in t?t.pointerType:"mouse"}function zde(t){return Array.from(t.touches).filter(e=>{var n,i;return e.target===t.currentTarget||((n=t.currentTarget)===null||n===void 0||(i=n.contains)===null||i===void 0?void 0:i.call(n,e.target))})}function Qde(t){return t.type==="touchend"||t.type==="touchcancel"?t.changedTouches:t.targetTouches}function LG(t){return xx(t)?Qde(t)[0]:t}function aS(t,e){const n=e.clientX-t.clientX,i=e.clientY-t.clientY,r=(e.clientX+t.clientX)/2,s=(e.clientY+t.clientY)/2,o=Math.hypot(n,i);return{angle:-(Math.atan2(n,i)*180)/Math.PI,distance:o,origin:[r,s]}}function Hde(t){return zde(t).map(e=>e.identifier)}function h4(t,e){const[n,i]=Array.from(t.touches).filter(r=>e.includes(r.identifier));return aS(n,i)}function aw(t){const e=LG(t);return xx(t)?e.identifier:e.pointerId}function Fd(t){const e=LG(t);return[e.clientX,e.clientY]}const f4=40,d4=800;function kG(t){let{deltaX:e,deltaY:n,deltaMode:i}=t;return i===1?(e*=f4,n*=f4):i===2&&(e*=d4,n*=d4),[e,n]}function Vde(t){var e,n;const{scrollX:i,scrollY:r,scrollLeft:s,scrollTop:o}=t.currentTarget;return[(e=i!=null?i:s)!==null&&e!==void 0?e:0,(n=r!=null?r:o)!==null&&n!==void 0?n:0]}function Wde(t){const e={};if("buttons"in t&&(e.buttons=t.buttons),"shiftKey"in t){const{shiftKey:n,altKey:i,metaKey:r,ctrlKey:s}=t;Object.assign(e,{shiftKey:n,altKey:i,metaKey:r,ctrlKey:s})}return e}function X_(t,...e){return typeof t=="function"?t(...e):t}function jde(){}function Xde(...t){return t.length===0?jde:t.length===1?t[0]:function(){let e;for(const n of t)e=n.apply(this,arguments)||e;return e}}function p4(t,e){return Object.assign({},e,t||{})}const Yde=32;class UG{constructor(e,n,i){this.ctrl=e,this.args=n,this.key=i,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:n,ingKey:i,args:r}=this;n[i]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=r,e.axis=void 0,e.memo=void 0,e.elapsedTime=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const n=this.state,i=this.config;n._active||(this.reset(),this.computeInitial(),n._active=!0,n.target=e.target,n.currentTarget=e.currentTarget,n.lastOffset=i.from?X_(i.from,n):n.offset,n.offset=n.lastOffset),n.startTime=n.timeStamp=e.timeStamp}computeValues(e){const n=this.state;n._values=e,n.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:n,config:i,shared:r}=this;n.args=this.args;let s=0;if(e&&(n.event=e,i.preventDefault&&e.cancelable&&n.event.preventDefault(),n.type=e.type,r.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,r.locked=!!document.pointerLockElement,Object.assign(r,Wde(e)),r.down=r.pressed=r.buttons%2===1||r.touches>0,s=e.timeStamp-n.timeStamp,n.timeStamp=e.timeStamp,n.elapsedTime=n.timeStamp-n.startTime),n._active){const S=n._delta.map(Math.abs);In.addTo(n._distance,S)}this.axisIntent&&this.axisIntent(e);const[o,a]=n._movement,[l,c]=i.threshold,{_step:u,values:h}=n;if(i.hasCustomTransform?(u[0]===!1&&(u[0]=Math.abs(o)>=l&&h[0]),u[1]===!1&&(u[1]=Math.abs(a)>=c&&h[1])):(u[0]===!1&&(u[0]=Math.abs(o)>=l&&Math.sign(o)*l),u[1]===!1&&(u[1]=Math.abs(a)>=c&&Math.sign(a)*c)),n.intentional=u[0]!==!1||u[1]!==!1,!n.intentional)return;const f=[0,0];if(i.hasCustomTransform){const[S,b]=h;f[0]=u[0]!==!1?S-u[0]:0,f[1]=u[1]!==!1?b-u[1]:0}else f[0]=u[0]!==!1?o-u[0]:0,f[1]=u[1]!==!1?a-u[1]:0;this.restrictToAxis&&!n._blocked&&this.restrictToAxis(f);const d=n.offset,p=n._active&&!n._blocked||n.active;p&&(n.first=n._active&&!n.active,n.last=!n._active&&n.active,n.active=r[this.ingKey]=n._active,e&&(n.first&&("bounds"in i&&(n._bounds=X_(i.bounds,n)),this.setup&&this.setup()),n.movement=f,this.computeOffset()));const[m,g]=n.offset,[[_,y],[x,E]]=n._bounds;n.overflow=[m<_?-1:m>y?1:0,g<x?-1:g>E?1:0],n._movementBound[0]=n.overflow[0]?n._movementBound[0]===!1?n._movement[0]:n._movementBound[0]:!1,n._movementBound[1]=n.overflow[1]?n._movementBound[1]===!1?n._movement[1]:n._movementBound[1]:!1;const w=n._active?i.rubberband||[0,0]:[0,0];if(n.offset=Fde(n._bounds,n.offset,w),n.delta=In.sub(n.offset,d),this.computeMovement(),p&&(!n.last||s>Yde)){n.delta=In.sub(n.offset,d);const S=n.delta.map(Math.abs);In.addTo(n.distance,S),n.direction=n.delta.map(Math.sign),n._direction=n._delta.map(Math.sign),!n.first&&s>0&&(n.velocity=[S[0]/s,S[1]/s])}}emit(){const e=this.state,n=this.shared,i=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!i.triggerAllEvents)return;const r=this.handler(Gn(Gn(Gn({},n),e),{},{[this.aliasKey]:e.values}));r!==void 0&&(e.memo=r)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function qde([t,e],n){const i=Math.abs(t),r=Math.abs(e);if(i>r&&i>n)return"x";if(r>i&&r>n)return"y"}class F1 extends UG{constructor(...e){super(...e),ci(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=In.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=In.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const n=this.state,i=this.config;if(!n.axis&&e){const r=typeof i.axisThreshold=="object"?i.axisThreshold[FG(e)]:i.axisThreshold;n.axis=qde(n._movement,r)}n._blocked=(i.lockDirection||!!i.axis)&&!n.axis||!!i.axis&&i.axis!==n.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const Jde=t=>t,m4=.15,OG={enabled(t=!0){return t},eventOptions(t,e,n){return Gn(Gn({},n.shared.eventOptions),t)},preventDefault(t=!1){return t},triggerAllEvents(t=!1){return t},rubberband(t=0){switch(t){case!0:return[m4,m4];case!1:return[0,0];default:return In.toVector(t)}},from(t){if(typeof t=="function")return t;if(t!=null)return In.toVector(t)},transform(t,e,n){const i=t||n.shared.transform;return this.hasCustomTransform=!!i,i||Jde},threshold(t){return In.toVector(t,0)}},Kde=0,Sh=Gn(Gn({},OG),{},{axis(t,e,{axis:n}){if(this.lockDirection=n==="lock",!this.lockDirection)return n},axisThreshold(t=Kde){return t},bounds(t={}){if(typeof t=="function")return s=>Sh.bounds(t(s));if("current"in t)return()=>t.current;if(typeof HTMLElement=="function"&&t instanceof HTMLElement)return t;const{left:e=-1/0,right:n=1/0,top:i=-1/0,bottom:r=1/0}=t;return[[e,n],[i,r]]}}),Ng=10,A4={ArrowRight:(t=1)=>[Ng*t,0],ArrowLeft:(t=1)=>[-Ng*t,0],ArrowUp:(t=1)=>[0,-Ng*t],ArrowDown:(t=1)=>[0,Ng*t]};class Zde extends F1{constructor(...e){super(...e),ci(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const n=e._bounds.getBoundingClientRect(),i=e.currentTarget.getBoundingClientRect(),r={left:n.left-i.left+e.offset[0],right:n.right-i.right+e.offset[0],top:n.top-i.top+e.offset[1],bottom:n.bottom-i.bottom+e.offset[1]};e._bounds=Sh.bounds(r)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const n=this.config,i=this.state;if(e.buttons!=null&&(Array.isArray(n.pointerButtons)?!n.pointerButtons.includes(e.buttons):n.pointerButtons!==-1&&n.pointerButtons!==e.buttons))return;const r=this.ctrl.setEventIds(e);n.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(r&&r.size>1&&i._pointerActive)&&(this.start(e),this.setupPointer(e),i._pointerId=aw(e),i._pointerActive=!0,this.computeValues(Fd(e)),this.computeInitial(),n.preventScrollAxis&&FG(e)!=="mouse"?(i._active=!1,this.setupScrollPrevention(e)):n.delay>0?(this.setupDelayTrigger(e),n.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const n=this.state;n._active=!0,n._preventScroll=!0,n._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const n=this.state,i=this.config;if(!n._pointerActive||n.type===e.type&&e.timeStamp===n.timeStamp)return;const r=aw(e);if(n._pointerId!==void 0&&r!==n._pointerId)return;const s=Fd(e);if(document.pointerLockElement===e.target?n._delta=[e.movementX,e.movementY]:(n._delta=In.sub(s,n._values),this.computeValues(s)),In.addTo(n._movement,n._delta),this.compute(e),n._delayed&&n.intentional){this.timeoutStore.remove("dragDelay"),n.active=!1,this.startPointerDrag(e);return}if(i.preventScrollAxis&&!n._preventScroll)if(n.axis)if(n.axis===i.preventScrollAxis||i.preventScrollAxis==="xy"){n._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const n=this.state,i=this.config;if(!n._active||!n._pointerActive)return;const r=aw(e);if(n._pointerId!==void 0&&r!==n._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[s,o]=n._distance;if(n.tap=s<=i.tapsThreshold&&o<=i.tapsThreshold,n.tap&&i.filterTaps)n._force=!0;else{const[a,l]=n.direction,[c,u]=n.velocity,[h,f]=n.movement,[d,p]=i.swipe.velocity,[m,g]=i.swipe.distance,_=i.swipe.duration;n.elapsedTime<_&&(Math.abs(c)>d&&Math.abs(h)>m&&(n.swipe[0]=a),Math.abs(u)>p&&Math.abs(f)>g&&(n.swipe[1]=l))}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const n=this.config,i=n.device;n.pointerLock&&e.currentTarget.requestPointerLock(),n.pointerCapture||(this.eventStore.add(this.sharedConfig.window,i,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,$de(e);const n=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",n),this.eventStore.add(this.sharedConfig.window,"touch","cancel",n),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const n=A4[e.key];if(n){const i=this.state,r=e.shiftKey?10:e.altKey?.1:1;this.start(e),i._delta=n(r),i._keyboardActive=!0,In.addTo(i._movement,i._delta),this.compute(e),this.emit()}}keyUp(e){e.key in A4&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const n=this.config.device;e(n,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(n,"change",this.pointerMove.bind(this)),e(n,"end",this.pointerUp.bind(this)),e(n,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function $de(t){"persist"in t&&typeof t.persist=="function"&&t.persist()}const L1=typeof window<"u"&&window.document&&window.document.createElement;function e0e(){return L1&&"ontouchstart"in window}function g4(){return e0e()||L1&&window.navigator.maxTouchPoints>1}function t0e(){return L1&&"onpointerdown"in window}function n0e(){return L1&&"exitPointerLock"in window.document}function i0e(){try{return"constructor"in GestureEvent}catch{return!1}}const Qs={isBrowser:L1,gesture:i0e(),touch:g4(),touchscreen:g4(),pointer:t0e(),pointerLock:n0e()},r0e=250,s0e=180,o0e=.5,a0e=50,l0e=250,v4={mouse:0,touch:0,pen:8},c0e=Gn(Gn({},Sh),{},{device(t,e,{pointer:{touch:n=!1,lock:i=!1,mouse:r=!1}={}}){return this.pointerLock=i&&Qs.pointerLock,Qs.touch&&n?"touch":this.pointerLock?"mouse":Qs.pointer&&!r?"pointer":Qs.touch?"touch":"mouse"},preventScrollAxis(t,e,{preventScroll:n}){if(this.preventScrollDelay=typeof n=="number"?n:n||n===void 0&&t?r0e:void 0,!(!Qs.touchscreen||n===!1))return t||(n!==void 0?"y":void 0)},pointerCapture(t,e,{pointer:{capture:n=!0,buttons:i=1}={}}){return this.pointerButtons=i,!this.pointerLock&&this.device==="pointer"&&n},keys(t=!0){return t},threshold(t,e,{filterTaps:n=!1,tapsThreshold:i=3,axis:r=void 0}){const s=In.toVector(t,n?i:r?1:0);return this.filterTaps=n,this.tapsThreshold=i,s},swipe({velocity:t=o0e,distance:e=a0e,duration:n=l0e}={}){return{velocity:this.transform(In.toVector(t)),distance:this.transform(In.toVector(e)),duration:n}},delay(t=0){switch(t){case!0:return s0e;case!1:return 0;default:return t}},axisThreshold(t){return t?Gn(Gn({},v4),t):v4}}),u0e=30,h0e=100;class f0e extends UG{constructor(...e){super(...e),ci(this,"ingKey","pinching"),ci(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const e=this.state;e._touchIds=[],e.canceled=!1,e.cancel=this.cancel.bind(this),e.turns=0}computeOffset(){const{type:e,movement:n,lastOffset:i}=this.state;e==="wheel"?this.state.offset=In.add(n,i):this.state.offset=[(1+n[0])*i[0],n[1]+i[1]]}computeMovement(){const{offset:e,lastOffset:n}=this.state;this.state.movement=[e[0]/n[0],e[1]-n[1]]}axisIntent(){const e=this.state,[n,i]=e._movement;if(!e.axis){const r=Math.abs(n)*u0e-Math.abs(i);r<0?e.axis="angle":r>0&&(e.axis="scale")}}restrictToAxis(e){this.config.lockDirection&&(this.state.axis==="scale"?e[1]=0:this.state.axis==="angle"&&(e[0]=0))}cancel(){const e=this.state;e.canceled||setTimeout(()=>{e.canceled=!0,e._active=!1,this.compute(),this.emit()},0)}touchStart(e){this.ctrl.setEventIds(e);const n=this.state,i=this.ctrl.touchIds;if(n._active&&n._touchIds.every(s=>i.has(s))||i.size<2)return;this.start(e),n._touchIds=Array.from(i).slice(0,2);const r=h4(e,n._touchIds);this.pinchStart(e,r)}pointerStart(e){if(e.buttons!=null&&e.buttons%2!==1)return;this.ctrl.setEventIds(e),e.target.setPointerCapture(e.pointerId);const n=this.state,i=n._pointerEvents,r=this.ctrl.pointerIds;if(n._active&&Array.from(i.keys()).every(o=>r.has(o))||(i.size<2&&i.set(e.pointerId,e),n._pointerEvents.size<2))return;this.start(e);const s=aS(...Array.from(i.values()));this.pinchStart(e,s)}pinchStart(e,n){const i=this.state;i.origin=n.origin,this.computeValues([n.distance,n.angle]),this.computeInitial(),this.compute(e),this.emit()}touchMove(e){if(!this.state._active)return;const n=h4(e,this.state._touchIds);this.pinchMove(e,n)}pointerMove(e){const n=this.state._pointerEvents;if(n.has(e.pointerId)&&n.set(e.pointerId,e),!this.state._active)return;const i=aS(...Array.from(n.values()));this.pinchMove(e,i)}pinchMove(e,n){const i=this.state,r=i._values[1],s=n.angle-r;let o=0;Math.abs(s)>270&&(o+=Math.sign(s)),this.computeValues([n.distance,n.angle-360*o]),i.origin=n.origin,i.turns=o,i._movement=[i._values[0]/i._initial[0]-1,i._values[1]-i._initial[1]],this.compute(e),this.emit()}touchEnd(e){this.ctrl.setEventIds(e),!!this.state._active&&this.state._touchIds.some(n=>!this.ctrl.touchIds.has(n))&&(this.state._active=!1,this.compute(e),this.emit())}pointerEnd(e){const n=this.state;this.ctrl.setEventIds(e);try{e.target.releasePointerCapture(e.pointerId)}catch{}n._pointerEvents.has(e.pointerId)&&n._pointerEvents.delete(e.pointerId),!!n._active&&n._pointerEvents.size<2&&(n._active=!1,this.compute(e),this.emit())}gestureStart(e){e.cancelable&&e.preventDefault();const n=this.state;n._active||(this.start(e),this.computeValues([e.scale,e.rotation]),n.origin=[e.clientX,e.clientY],this.compute(e),this.emit())}gestureMove(e){if(e.cancelable&&e.preventDefault(),!this.state._active)return;const n=this.state;this.computeValues([e.scale,e.rotation]),n.origin=[e.clientX,e.clientY];const i=n._movement;n._movement=[e.scale-1,e.rotation],n._delta=In.sub(n._movement,i),this.compute(e),this.emit()}gestureEnd(e){!this.state._active||(this.state._active=!1,this.compute(e),this.emit())}wheel(e){const n=this.config.modifierKey;n&&!e[n]||(this.state._active?this.wheelChange(e):this.wheelStart(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(e){this.start(e),this.wheelChange(e)}wheelChange(e){"uv"in e||e.cancelable&&e.preventDefault();const i=this.state;i._delta=[-kG(e)[1]/h0e*i.offset[0],0],In.addTo(i._movement,i._delta),this.state.origin=[e.clientX,e.clientY],this.compute(e),this.emit()}wheelEnd(){!this.state._active||(this.state._active=!1,this.compute(),this.emit())}bind(e){const n=this.config.device;n&&(e(n,"start",this[n+"Start"].bind(this)),e(n,"change",this[n+"Move"].bind(this)),e(n,"end",this[n+"End"].bind(this)),e(n,"cancel",this[n+"End"].bind(this))),e("wheel","",this.wheel.bind(this),{passive:!1})}}const d0e=Gn(Gn({},OG),{},{device(t,e,{shared:n,pointer:{touch:i=!1}={}}){if(n.target&&!Qs.touch&&Qs.gesture)return"gesture";if(Qs.touch&&i)return"touch";if(Qs.touchscreen){if(Qs.pointer)return"pointer";if(Qs.touch)return"touch"}},bounds(t,e,{scaleBounds:n={},angleBounds:i={}}){const r=o=>{const a=p4(X_(n,o),{min:-1/0,max:1/0});return[a.min,a.max]},s=o=>{const a=p4(X_(i,o),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof n!="function"&&typeof i!="function"?[r(),s()]:o=>[r(o),s(o)]},threshold(t,e,n){return this.lockDirection=n.axis==="lock",In.toVector(t,this.lockDirection?[.1,3]:0)},modifierKey(t){return t===void 0?"ctrlKey":t}});class p0e extends F1{constructor(...e){super(...e),ci(this,"ingKey","moving")}move(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.state._active?this.moveChange(e):this.moveStart(e),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(e){this.start(e),this.computeValues(Fd(e)),this.compute(e),this.computeInitial(),this.emit()}moveChange(e){if(!this.state._active)return;const n=Fd(e),i=this.state;i._delta=In.sub(n,i._values),In.addTo(i._movement,i._delta),this.computeValues(n),this.compute(e),this.emit()}moveEnd(e){!this.state._active||(this.state._active=!1,this.compute(e),this.emit())}bind(e){e("pointer","change",this.move.bind(this)),e("pointer","leave",this.moveEnd.bind(this))}}const m0e=Gn(Gn({},Sh),{},{mouseOnly:(t=!0)=>t});class A0e extends F1{constructor(...e){super(...e),ci(this,"ingKey","scrolling")}scroll(e){this.state._active||this.start(e),this.scrollChange(e),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(e){e.cancelable&&e.preventDefault();const n=this.state,i=Vde(e);n._delta=In.sub(i,n._values),In.addTo(n._movement,n._delta),this.computeValues(i),this.compute(e),this.emit()}scrollEnd(){!this.state._active||(this.state._active=!1,this.compute(),this.emit())}bind(e){e("scroll","",this.scroll.bind(this))}}const g0e=Sh;class v0e extends F1{constructor(...e){super(...e),ci(this,"ingKey","wheeling")}wheel(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(e){const n=this.state;n._delta=kG(e),In.addTo(n._movement,n._delta);const[i,r]=n.overflow,[s,o]=n._delta,[a,l]=n._direction;(i<0&&s>0&&a<0||i>0&&s<0&&a>0)&&(n._movement[0]=n._movementBound[0]),(r<0&&o>0&&l<0||r>0&&o<0&&l>0)&&(n._movement[1]=n._movementBound[1]),this.compute(e),this.emit()}wheelEnd(){!this.state._active||(this.state._active=!1,this.compute(),this.emit())}bind(e){e("wheel","",this.wheel.bind(this))}}const _0e=Sh;class y0e extends F1{constructor(...e){super(...e),ci(this,"ingKey","hovering")}enter(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.start(e),this.computeValues(Fd(e)),this.compute(e),this.emit())}leave(e){if(this.config.mouseOnly&&e.pointerType!=="mouse")return;const n=this.state;if(!n._active)return;n._active=!1;const i=Fd(e);n._movement=n._delta=In.sub(i,n._values),this.computeValues(i),this.compute(e),n.delta=n.movement,this.emit()}bind(e){e("pointer","enter",this.enter.bind(this)),e("pointer","leave",this.leave.bind(this))}}const x0e=Gn(Gn({},Sh),{},{mouseOnly:(t=!0)=>t}),_I=new Map,lS=new Map;function E0e(t){_I.set(t.key,t.engine),lS.set(t.key,t.resolver)}const w0e={key:"drag",engine:Zde,resolver:c0e},M0e={key:"hover",engine:y0e,resolver:x0e},C0e={key:"move",engine:p0e,resolver:m0e},S0e={key:"pinch",engine:f0e,resolver:d0e},b0e={key:"scroll",engine:A0e,resolver:g0e},I0e={key:"wheel",engine:v0e,resolver:_0e};function T0e(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function B0e(t,e){if(t==null)return{};var n=T0e(t,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,i)||(n[i]=t[i]))}return n}const R0e={target(t){if(t)return()=>"current"in t?t.current:t},enabled(t=!0){return t},window(t=Qs.isBrowser?window:void 0){return t},eventOptions({passive:t=!0,capture:e=!1}={}){return{passive:t,capture:e}},transform(t){return t}},P0e=["target","eventOptions","window","enabled","transform"];function Xv(t={},e){const n={};for(const[i,r]of Object.entries(e))switch(typeof r){case"function":n[i]=r.call(n,t[i],i,t);break;case"object":n[i]=Xv(t[i],r);break;case"boolean":r&&(n[i]=t[i]);break}return n}function D0e(t,e,n={}){const i=t,{target:r,eventOptions:s,window:o,enabled:a,transform:l}=i,c=B0e(i,P0e);if(n.shared=Xv({target:r,eventOptions:s,window:o,enabled:a,transform:l},R0e),e){const u=lS.get(e);n[e]=Xv(Gn({shared:n.shared},c),u)}else for(const u in c){const h=lS.get(u);h&&(n[u]=Xv(Gn({shared:n.shared},c[u]),h))}return n}class NG{constructor(e,n){ci(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=n}add(e,n,i,r,s){const o=this._listeners,a=Gde(n,i),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},c=Gn(Gn({},l),s);e.addEventListener(a,r,c);const u=()=>{e.removeEventListener(a,r,c),o.delete(u)};return o.add(u),u}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class F0e{constructor(){ci(this,"_timeouts",new Map)}add(e,n,i=140,...r){this.remove(e),this._timeouts.set(e,window.setTimeout(n,i,...r))}remove(e){const n=this._timeouts.get(e);n&&window.clearTimeout(n)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class L0e{constructor(e){ci(this,"gestures",new Set),ci(this,"_targetEventStore",new NG(this)),ci(this,"gestureEventStores",{}),ci(this,"gestureTimeoutStores",{}),ci(this,"handlers",{}),ci(this,"config",{}),ci(this,"pointerIds",new Set),ci(this,"touchIds",new Set),ci(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),k0e(this,e)}setEventIds(e){if(xx(e))return this.touchIds=new Set(Hde(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,n){this.handlers=e,this.nativeHandlers=n}applyConfig(e,n){this.config=D0e(e,n,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const n=this.config.shared,i={};let r;if(!(n.target&&(r=n.target(),!r))){if(n.enabled){for(const o of this.gestures){const a=this.config[o],l=_4(i,a.eventOptions,!!r);if(a.enabled){const c=_I.get(o);new c(this,e,o).bind(l)}}const s=_4(i,n.eventOptions,!!r);for(const o in this.nativeHandlers)s(o,"",a=>this.nativeHandlers[o](Gn(Gn({},this.state.shared),{},{event:a,args:e})),void 0,!0)}for(const s in i)i[s]=Xde(...i[s]);if(!r)return i;for(const s in i){const{device:o,capture:a,passive:l}=Nde(s);this._targetEventStore.add(r,o,"",i[s],{capture:a,passive:l})}}}}function Af(t,e){t.gestures.add(e),t.gestureEventStores[e]=new NG(t,e),t.gestureTimeoutStores[e]=new F0e}function k0e(t,e){e.drag&&Af(t,"drag"),e.wheel&&Af(t,"wheel"),e.scroll&&Af(t,"scroll"),e.move&&Af(t,"move"),e.pinch&&Af(t,"pinch"),e.hover&&Af(t,"hover")}const _4=(t,e,n)=>(i,r,s,o={},a=!1)=>{var l,c;const u=(l=o.capture)!==null&&l!==void 0?l:e.capture,h=(c=o.passive)!==null&&c!==void 0?c:e.passive;let f=a?i:Ude(i,r,u);n&&h&&(f+="Passive"),t[f]=t[f]||[],t[f].push(s)},U0e=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function O0e(t){const e={},n={},i=new Set;for(let r in t)U0e.test(r)?(i.add(RegExp.lastMatch),n[r]=t[r]):e[r]=t[r];return[n,e,i]}function gf(t,e,n,i,r,s){if(!t.has(n)||!_I.has(i))return;const o=n+"Start",a=n+"End",l=c=>{let u;return c.first&&o in e&&e[o](c),n in e&&(u=e[n](c)),c.last&&a in e&&e[a](c),u};r[i]=l,s[i]=s[i]||{}}function N0e(t,e){const[n,i,r]=O0e(t),s={};return gf(r,n,"onDrag","drag",s,e),gf(r,n,"onWheel","wheel",s,e),gf(r,n,"onScroll","scroll",s,e),gf(r,n,"onPinch","pinch",s,e),gf(r,n,"onMove","move",s,e),gf(r,n,"onHover","hover",s,e),{handlers:s,config:e,nativeHandlers:i}}function G0e(t,e={},n,i){const r=gv.useMemo(()=>new L0e(t),[]);if(r.applyHandlers(t,i),r.applyConfig(e,n),gv.useEffect(r.effect.bind(r)),gv.useEffect(()=>r.clean.bind(r),[]),e.target===void 0)return r.bind.bind(r)}function z0e(t){return t.forEach(E0e),function(n,i){const{handlers:r,nativeHandlers:s,config:o}=N0e(n,i||{});return G0e(r,o,void 0,s)}}function Q0e(t,e){return z0e([w0e,S0e,b0e,I0e,C0e,M0e])(t,e||{})}function H0e({snap:t,global:e,cursor:n=!0,children:i,speed:r=1,rotation:s=[0,0,0],zoom:o=1,polar:a=[0,Math.PI/2],azimuth:l=[-1/0,1/0],config:c={mass:1,tension:170,friction:26}}){const{size:u,gl:h}=Te(),f=R.exports.useMemo(()=>[s[0]+a[0],s[0]+a[1]],[s[0],a[0],a[1]]),d=R.exports.useMemo(()=>[s[1]+l[0],s[1]+l[1]],[s[1],l[0],l[1]]),p=R.exports.useMemo(()=>[ct.clamp(s[0],...f),ct.clamp(s[1],...d),s[2]],[s[0],s[1],s[2],f,d]),[m,g]=bde(()=>({scale:1,rotation:p,config:c}));R.exports.useEffect(()=>void g.start({scale:1,rotation:p,config:c}),[p]),R.exports.useEffect(()=>{e&&n&&(h.domElement.style.cursor="grab")},[e,n,h.domElement]);const _=Q0e({onHover:({last:y})=>{n&&!e&&(h.domElement.style.cursor=y?"auto":"grab")},onDrag:({down:y,delta:[x,E],memo:[w,S]=m.rotation.animation.to||p})=>{n&&(h.domElement.style.cursor=y?"grabbing":"grab"),x=ct.clamp(S+x/u.width*Math.PI*r,...d),E=ct.clamp(w+E/u.height*Math.PI*r,...f);const b=t&&!y&&typeof t!="boolean"?t:c;return g.start({scale:y&&E>f[1]/2?o:1,rotation:t&&!y?p:[E,x,0],config:M=>M==="scale"?{...b,friction:b.friction*3}:b}),[E,x]}},{target:e?h.domElement:void 0});return R.exports.createElement(Pde.group,oh({},_==null?void 0:_(),m),i)}const V0e=t=>(e,n,i)=>{const r=i.subscribe;return i.subscribe=(o,a,l)=>{let c=o;if(a){const u=(l==null?void 0:l.equalityFn)||Object.is;let h=o(i.getState());c=f=>{const d=o(f);if(!u(h,d)){const p=h;a(h=d,p)}},l!=null&&l.fireImmediately&&a(h,h)}return r(c)},t(e,n,i)},GG=R.exports.createContext(null);function W0e({map:t,children:e,onChange:n,domElement:i}){const r=t.map(l=>l.name+l.keys).join("-"),s=R.exports.useMemo(()=>ox(V0e(()=>t.reduce((l,c)=>({...l,[c.name]:!1}),{}))),[r]),o=R.exports.useMemo(()=>[s.subscribe,s.getState,s],[r]),a=s.setState;return R.exports.useEffect(()=>{const c=t.map(({name:d,keys:p,up:m})=>({keys:p,up:m,fn:g=>{a({[d]:g}),n&&n(d,g,o[2]())}})).reduce((d,{keys:p,fn:m,up:g=!0})=>(p.forEach(_=>d[_]={fn:m,pressed:!1,up:g}),d),{}),u=({key:d,code:p})=>{const m=c[d]||c[p];if(!m)return;const{fn:g,pressed:_,up:y}=m;m.pressed=!0,(y||!_)&&g(!0)},h=({key:d,code:p})=>{const m=c[d]||c[p];if(!m)return;const{fn:g,up:_}=m;m.pressed=!1,_&&g(!1)},f=i||window;return f.addEventListener("keydown",u,{passive:!0}),f.addEventListener("keyup",h,{passive:!0}),()=>{f.removeEventListener("keydown",u),f.removeEventListener("keyup",h)}},[i,r]),R.exports.createElement(GG.Provider,{value:o,children:e})}function j0e(t){const[e,n,i]=R.exports.useContext(GG);return t?i(t):[e,n]}function D(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const Bf=4,fd=1024,na=4,X0e=(t=1)=>{const e=new Float32Array(fd*na*t*Bf),n=new bd(e,fd,na*t,us,Tr);return n.wrapS=ol,n.wrapT=ol,n.magFilter=Ja,n.needsUpdate=!0,n},Y0e=(t,e,n=0)=>{const i=Math.floor(fd*(na/4));e.arcLengthDivisions=i/2,e.updateArcLengths();const r=e.getSpacedPoints(i),s=e.computeFrenetFrames(i,!0);for(let o=0;o<i;o++){const a=Math.floor(o/fd),l=o%fd;let c=r[o];Gg(t,l,c.x,c.y,c.z,0+a+na*n),c=s.tangents[o],Gg(t,l,c.x,c.y,c.z,1+a+na*n),c=s.normals[o],Gg(t,l,c.x,c.y,c.z,2+a+na*n),c=s.binormals[o],Gg(t,l,c.x,c.y,c.z,3+a+na*n)}t.needsUpdate=!0},Gg=(t,e,n,i,r,s)=>{const o=t.image,{data:a}=o,l=Bf*fd*s;a[e*Bf+l+0]=n,a[e*Bf+l+1]=i,a[e*Bf+l+2]=r,a[e*Bf+l+3]=1},q0e=t=>({spineTexture:{value:t},pathOffset:{type:"f",value:0},pathSegment:{type:"f",value:1},spineOffset:{type:"f",value:161},spineLength:{type:"f",value:400},flow:{type:"i",value:1}});function J0e(t,e,n=1){t.__ok||(t.__ok=!0,t.onBeforeCompile=i=>{if(i.__modified)return;i.__modified=!0,Object.assign(i.uniforms,e);const r=`
		uniform sampler2D spineTexture;
		uniform float pathOffset;
		uniform float pathSegment;
		uniform float spineOffset;
		uniform float spineLength;
		uniform int flow;

		float textureLayers = ${na*n}.;
		float textureStacks = ${na/4}.;

		${i.vertexShader}
		`.replace("#include <beginnormal_vertex>","").replace("#include <defaultnormal_vertex>","").replace("#include <begin_vertex>","").replace(/void\s*main\s*\(\)\s*\{/,`
        void main() {
        #include <beginnormal_vertex>

        vec4 worldPos = modelMatrix * vec4(position, 1.);

        bool bend = flow > 0;
        float xWeight = bend ? 0. : 1.;

        #ifdef USE_INSTANCING
        float pathOffsetFromInstanceMatrix = instanceMatrix[3][2];
        float spineLengthFromInstanceMatrix = instanceMatrix[3][0];
        float spinePortion = bend ? (worldPos.x + spineOffset) / spineLengthFromInstanceMatrix : 0.;
        float mt = (spinePortion * pathSegment + pathOffset + pathOffsetFromInstanceMatrix)*textureStacks;
        #else
        float spinePortion = bend ? (worldPos.x + spineOffset) / spineLength : 0.;
        float mt = (spinePortion * pathSegment + pathOffset)*textureStacks;
        #endif

        mt = mod(mt, textureStacks);
        float rowOffset = floor(mt);

        #ifdef USE_INSTANCING
        rowOffset += instanceMatrix[3][1] * ${na}.;
        #endif

        vec3 spinePos = texture2D(spineTexture, vec2(mt, (0. + rowOffset + 0.5) / textureLayers)).xyz;
        vec3 a =        texture2D(spineTexture, vec2(mt, (1. + rowOffset + 0.5) / textureLayers)).xyz;
        vec3 b =        texture2D(spineTexture, vec2(mt, (2. + rowOffset + 0.5) / textureLayers)).xyz;
        vec3 c =        texture2D(spineTexture, vec2(mt, (3. + rowOffset + 0.5) / textureLayers)).xyz;
        mat3 basis = mat3(a, b, c);

        vec3 transformed = basis
          * vec3(worldPos.x * xWeight, worldPos.y * 1., worldPos.z * 1.)
          + spinePos;

        vec3 transformedNormal = normalMatrix * (basis * objectNormal);
			`).replace("#include <project_vertex>",`vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );
				gl_Position = projectionMatrix * mvPosition;`);i.vertexShader=r})}class K0e{constructor(e,n=1){D(this,"curveArray",void 0),D(this,"curveLengthArray",void 0),D(this,"object3D",void 0),D(this,"splineTexure",void 0),D(this,"uniforms",void 0);const i=e.clone(),r=X0e(n),s=q0e(r);i.traverse(o=>{(o instanceof rt||o instanceof T6)&&(o.material=o.material.clone(),J0e(o.material,s,n))}),this.curveArray=new Array(n),this.curveLengthArray=new Array(n),this.object3D=i,this.splineTexure=r,this.uniforms=s}updateCurve(e,n){if(e>=this.curveArray.length)throw Error("Index out of range for Flow");const i=n.getLength();this.uniforms.spineLength.value=i,this.curveLengthArray[e]=i,this.curveArray[e]=n,Y0e(this.splineTexure,n,e)}moveAlongCurve(e){this.uniforms.pathOffset.value+=e}}new Ze;var Ws=Uint8Array,tc=Uint16Array,cS=Uint32Array,zG=new Ws([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),QG=new Ws([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Z0e=new Ws([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),HG=function(t,e){for(var n=new tc(31),i=0;i<31;++i)n[i]=e+=1<<t[i-1];for(var r=new cS(n[30]),i=1;i<30;++i)for(var s=n[i];s<n[i+1];++s)r[s]=s-n[i]<<5|i;return[n,r]},VG=HG(zG,2),WG=VG[0],$0e=VG[1];WG[28]=258,$0e[258]=28;var epe=HG(QG,0),tpe=epe[0],uS=new tc(32768);for(var Sn=0;Sn<32768;++Sn){var Ol=(Sn&43690)>>>1|(Sn&21845)<<1;Ol=(Ol&52428)>>>2|(Ol&13107)<<2,Ol=(Ol&61680)>>>4|(Ol&3855)<<4,uS[Sn]=((Ol&65280)>>>8|(Ol&255)<<8)>>>1}var $p=function(t,e,n){for(var i=t.length,r=0,s=new tc(e);r<i;++r)++s[t[r]-1];var o=new tc(e);for(r=0;r<e;++r)o[r]=o[r-1]+s[r-1]<<1;var a;if(n){a=new tc(1<<e);var l=15-e;for(r=0;r<i;++r)if(t[r])for(var c=r<<4|t[r],u=e-t[r],h=o[t[r]-1]++<<u,f=h|(1<<u)-1;h<=f;++h)a[uS[h]>>>l]=c}else for(a=new tc(i),r=0;r<i;++r)t[r]&&(a[r]=uS[o[t[r]-1]++]>>>15-t[r]);return a},k1=new Ws(288);for(var Sn=0;Sn<144;++Sn)k1[Sn]=8;for(var Sn=144;Sn<256;++Sn)k1[Sn]=9;for(var Sn=256;Sn<280;++Sn)k1[Sn]=7;for(var Sn=280;Sn<288;++Sn)k1[Sn]=8;var jG=new Ws(32);for(var Sn=0;Sn<32;++Sn)jG[Sn]=5;var npe=$p(k1,9,1),ipe=$p(jG,5,1),lw=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},co=function(t,e,n){var i=e/8|0;return(t[i]|t[i+1]<<8)>>(e&7)&n},cw=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},rpe=function(t){return(t/8|0)+(t&7&&1)},spe=function(t,e,n){(e==null||e<0)&&(e=0),(n==null||n>t.length)&&(n=t.length);var i=new(t instanceof tc?tc:t instanceof cS?cS:Ws)(n-e);return i.set(t.subarray(e,n)),i},ope=function(t,e,n){var i=t.length;if(!i||n&&!n.l&&i<5)return e||new Ws(0);var r=!e||n,s=!n||n.i;n||(n={}),e||(e=new Ws(i*3));var o=function(K){var ce=e.length;if(K>ce){var he=new Ws(Math.max(ce*2,K));he.set(e),e=he}},a=n.f||0,l=n.p||0,c=n.b||0,u=n.l,h=n.d,f=n.m,d=n.n,p=i*8;do{if(!u){n.f=a=co(t,l,1);var m=co(t,l+1,3);if(l+=3,m)if(m==1)u=npe,h=ipe,f=9,d=5;else if(m==2){var x=co(t,l,31)+257,E=co(t,l+10,15)+4,w=x+co(t,l+5,31)+1;l+=14;for(var S=new Ws(w),b=new Ws(19),M=0;M<E;++M)b[Z0e[M]]=co(t,l+M*3,7);l+=E*3;for(var T=lw(b),B=(1<<T)-1,L=$p(b,T,1),M=0;M<w;){var F=L[co(t,l,B)];l+=F&15;var g=F>>>4;if(g<16)S[M++]=g;else{var U=0,k=0;for(g==16?(k=3+co(t,l,3),l+=2,U=S[M-1]):g==17?(k=3+co(t,l,7),l+=3):g==18&&(k=11+co(t,l,127),l+=7);k--;)S[M++]=U}}var X=S.subarray(0,x),Y=S.subarray(x);f=lw(X),d=lw(Y),u=$p(X,f,1),h=$p(Y,d,1)}else throw"invalid block type";else{var g=rpe(l)+4,_=t[g-4]|t[g-3]<<8,y=g+_;if(y>i){if(s)throw"unexpected EOF";break}r&&o(c+_),e.set(t.subarray(g,y),c),n.b=c+=_,n.p=l=y*8;continue}if(l>p){if(s)throw"unexpected EOF";break}}r&&o(c+131072);for(var Z=(1<<f)-1,G=(1<<d)-1,O=l;;O=l){var U=u[cw(t,l)&Z],z=U>>>4;if(l+=U&15,l>p){if(s)throw"unexpected EOF";break}if(!U)throw"invalid length/literal";if(z<256)e[c++]=z;else if(z==256){O=l,u=null;break}else{var Q=z-254;if(z>264){var M=z-257,H=zG[M];Q=co(t,l,(1<<H)-1)+WG[M],l+=H}var J=h[cw(t,l)&G],j=J>>>4;if(!J)throw"invalid distance";l+=J&15;var Y=tpe[j];if(j>3){var H=QG[j];Y+=cw(t,l)&(1<<H)-1,l+=H}if(l>p){if(s)throw"unexpected EOF";break}r&&o(c+131072);for(var oe=c+Q;c<oe;c+=4)e[c]=e[c-Y],e[c+1]=e[c+1-Y],e[c+2]=e[c+2-Y],e[c+3]=e[c+3-Y];c=oe}}n.l=u,n.p=O,n.b=c,u&&(a=1,n.m=f,n.d=h,n.n=d)}while(!a);return c==e.length?e:spe(e,0,c)},ape=new Ws(0),lpe=function(t){if((t[0]&15)!=8||t[0]>>>4>7||(t[0]<<8|t[1])%31)throw"invalid zlib data";if(t[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function cpe(t,e){return ope((lpe(t),t.subarray(2,-4)),e)}var upe=typeof TextDecoder<"u"&&new TextDecoder,hpe=0;try{upe.decode(ape,{stream:!0}),hpe=1}catch{}class XG extends rt{constructor(e,n,i=!1,r=!1,s=1e4){const o=new ri;super(o,n);const a=this,l=new Float32Array(12*3),c=new Float32Array(12*3),u=new Float32Array(12*3);this.enableUvs=i,this.enableColors=r,this.init=function(y){this.resolution=y,this.isolation=80,this.size=y,this.size2=this.size*this.size,this.size3=this.size2*this.size,this.halfsize=this.size/2,this.delta=2/this.size,this.yd=this.size,this.zd=this.size2,this.field=new Float32Array(this.size3),this.normal_cache=new Float32Array(this.size3*3),this.palette=new Float32Array(this.size3*3),this.count=0;const x=s*3;this.positionArray=new Float32Array(x*3);const E=new On(this.positionArray,3);E.setUsage(cs),o.setAttribute("position",E),this.normalArray=new Float32Array(x*3);const w=new On(this.normalArray,3);if(w.setUsage(cs),o.setAttribute("normal",w),this.enableUvs){this.uvArray=new Float32Array(x*2);const S=new On(this.uvArray,2);S.setUsage(cs),o.setAttribute("uv",S)}if(this.enableColors){this.colorArray=new Float32Array(x*3);const S=new On(this.colorArray,3);S.setUsage(cs),o.setAttribute("color",S)}};function h(y,x,E){return y+(x-y)*E}function f(y,x,E,w,S,b,M,T,B,L){const F=(E-M)/(T-M),U=a.normal_cache;l[x+0]=w+F*a.delta,l[x+1]=S,l[x+2]=b,c[x+0]=h(U[y+0],U[y+3],F),c[x+1]=h(U[y+1],U[y+4],F),c[x+2]=h(U[y+2],U[y+5],F),u[x+0]=h(a.palette[B*3+0],a.palette[L*3+0],F),u[x+1]=h(a.palette[B*3+1],a.palette[L*3+1],F),u[x+2]=h(a.palette[B*3+2],a.palette[L*3+2],F)}function d(y,x,E,w,S,b,M,T,B,L){const F=(E-M)/(T-M),U=a.normal_cache;l[x+0]=w,l[x+1]=S+F*a.delta,l[x+2]=b;const k=y+a.yd*3;c[x+0]=h(U[y+0],U[k+0],F),c[x+1]=h(U[y+1],U[k+1],F),c[x+2]=h(U[y+2],U[k+2],F),u[x+0]=h(a.palette[B*3+0],a.palette[L*3+0],F),u[x+1]=h(a.palette[B*3+1],a.palette[L*3+1],F),u[x+2]=h(a.palette[B*3+2],a.palette[L*3+2],F)}function p(y,x,E,w,S,b,M,T,B,L){const F=(E-M)/(T-M),U=a.normal_cache;l[x+0]=w,l[x+1]=S,l[x+2]=b+F*a.delta;const k=y+a.zd*3;c[x+0]=h(U[y+0],U[k+0],F),c[x+1]=h(U[y+1],U[k+1],F),c[x+2]=h(U[y+2],U[k+2],F),u[x+0]=h(a.palette[B*3+0],a.palette[L*3+0],F),u[x+1]=h(a.palette[B*3+1],a.palette[L*3+1],F),u[x+2]=h(a.palette[B*3+2],a.palette[L*3+2],F)}function m(y){const x=y*3;a.normal_cache[x]===0&&(a.normal_cache[x+0]=a.field[y-1]-a.field[y+1],a.normal_cache[x+1]=a.field[y-a.yd]-a.field[y+a.yd],a.normal_cache[x+2]=a.field[y-a.zd]-a.field[y+a.zd])}function g(y,x,E,w,S){const b=w+1,M=w+a.yd,T=w+a.zd,B=b+a.yd,L=b+a.zd,F=w+a.yd+a.zd,U=b+a.yd+a.zd;let k=0;const X=a.field[w],Y=a.field[b],Z=a.field[M],G=a.field[B],O=a.field[T],z=a.field[L],Q=a.field[F],H=a.field[U];X<S&&(k|=1),Y<S&&(k|=2),Z<S&&(k|=8),G<S&&(k|=4),O<S&&(k|=16),z<S&&(k|=32),Q<S&&(k|=128),H<S&&(k|=64);const J=fpe[k];if(J===0)return 0;const j=a.delta,oe=y+j,K=x+j,ce=E+j;J&1&&(m(w),m(b),f(w*3,0,S,y,x,E,X,Y,w,b)),J&2&&(m(b),m(B),d(b*3,3,S,oe,x,E,Y,G,b,B)),J&4&&(m(M),m(B),f(M*3,6,S,y,K,E,Z,G,M,B)),J&8&&(m(w),m(M),d(w*3,9,S,y,x,E,X,Z,w,M)),J&16&&(m(T),m(L),f(T*3,12,S,y,x,ce,O,z,T,L)),J&32&&(m(L),m(U),d(L*3,15,S,oe,x,ce,z,H,L,U)),J&64&&(m(F),m(U),f(F*3,18,S,y,K,ce,Q,H,F,U)),J&128&&(m(T),m(F),d(T*3,21,S,y,x,ce,O,Q,T,F)),J&256&&(m(w),m(T),p(w*3,24,S,y,x,E,X,O,w,T)),J&512&&(m(b),m(L),p(b*3,27,S,oe,x,E,Y,z,b,L)),J&1024&&(m(B),m(U),p(B*3,30,S,oe,K,E,G,H,B,U)),J&2048&&(m(M),m(F),p(M*3,33,S,y,K,E,Z,Q,M,F)),k<<=4;let he,ve,Me,Se=0,le=0;for(;zg[k+le]!=-1;)he=k+le,ve=he+1,Me=he+2,_(l,c,u,3*zg[he],3*zg[ve],3*zg[Me]),le+=3,Se++;return Se}function _(y,x,E,w,S,b){const M=a.count*3;if(a.positionArray[M+0]=y[w],a.positionArray[M+1]=y[w+1],a.positionArray[M+2]=y[w+2],a.positionArray[M+3]=y[S],a.positionArray[M+4]=y[S+1],a.positionArray[M+5]=y[S+2],a.positionArray[M+6]=y[b],a.positionArray[M+7]=y[b+1],a.positionArray[M+8]=y[b+2],a.material.flatShading===!0){const T=(x[w+0]+x[S+0]+x[b+0])/3,B=(x[w+1]+x[S+1]+x[b+1])/3,L=(x[w+2]+x[S+2]+x[b+2])/3;a.normalArray[M+0]=T,a.normalArray[M+1]=B,a.normalArray[M+2]=L,a.normalArray[M+3]=T,a.normalArray[M+4]=B,a.normalArray[M+5]=L,a.normalArray[M+6]=T,a.normalArray[M+7]=B,a.normalArray[M+8]=L}else a.normalArray[M+0]=x[w+0],a.normalArray[M+1]=x[w+1],a.normalArray[M+2]=x[w+2],a.normalArray[M+3]=x[S+0],a.normalArray[M+4]=x[S+1],a.normalArray[M+5]=x[S+2],a.normalArray[M+6]=x[b+0],a.normalArray[M+7]=x[b+1],a.normalArray[M+8]=x[b+2];if(a.enableUvs){const T=a.count*2;a.uvArray[T+0]=y[w+0],a.uvArray[T+1]=y[w+2],a.uvArray[T+2]=y[S+0],a.uvArray[T+3]=y[S+2],a.uvArray[T+4]=y[b+0],a.uvArray[T+5]=y[b+2]}a.enableColors&&(a.colorArray[M+0]=E[w+0],a.colorArray[M+1]=E[w+1],a.colorArray[M+2]=E[w+2],a.colorArray[M+3]=E[S+0],a.colorArray[M+4]=E[S+1],a.colorArray[M+5]=E[S+2],a.colorArray[M+6]=E[b+0],a.colorArray[M+7]=E[b+1],a.colorArray[M+8]=E[b+2]),a.count+=3}this.addBall=function(y,x,E,w,S,b){const M=Math.sign(w);w=Math.abs(w);const T=b!=null;let B=new xt(y,x,E);if(T)try{B=b instanceof xt?b:Array.isArray(b)?new xt(Math.min(Math.abs(b[0]),1),Math.min(Math.abs(b[1]),1),Math.min(Math.abs(b[2]),1)):new xt(b)}catch{B=new xt(y,x,E)}const L=this.size*Math.sqrt(w/S),F=E*this.size,U=x*this.size,k=y*this.size;let X=Math.floor(F-L);X<1&&(X=1);let Y=Math.floor(F+L);Y>this.size-1&&(Y=this.size-1);let Z=Math.floor(U-L);Z<1&&(Z=1);let G=Math.floor(U+L);G>this.size-1&&(G=this.size-1);let O=Math.floor(k-L);O<1&&(O=1);let z=Math.floor(k+L);z>this.size-1&&(z=this.size-1);let Q,H,J,j,oe,K,ce,he,ve,Me,Se;for(J=X;J<Y;J++)for(oe=this.size2*J,he=J/this.size-E,ve=he*he,H=Z;H<G;H++)for(j=oe+this.size*H,ce=H/this.size-x,Me=ce*ce,Q=O;Q<z;Q++)if(K=Q/this.size-y,Se=w/(1e-6+K*K+Me+ve)-S,Se>0){this.field[j+Q]+=Se*M;const le=Math.sqrt((Q-k)*(Q-k)+(H-U)*(H-U)+(J-F)*(J-F))/L,pe=1-le*le*le*(le*(le*6-15)+10);this.palette[(j+Q)*3+0]+=B.r*pe,this.palette[(j+Q)*3+1]+=B.g*pe,this.palette[(j+Q)*3+2]+=B.b*pe}},this.addPlaneX=function(y,x){const E=this.size,w=this.yd,S=this.zd,b=this.field;let M,T,B,L,F,U,k,X=E*Math.sqrt(y/x);for(X>E&&(X=E),M=0;M<X;M++)if(U=M/E,L=U*U,F=y/(1e-4+L)-x,F>0)for(T=0;T<E;T++)for(k=M+T*w,B=0;B<E;B++)b[S*B+k]+=F},this.addPlaneY=function(y,x){const E=this.size,w=this.yd,S=this.zd,b=this.field;let M,T,B,L,F,U,k,X,Y=E*Math.sqrt(y/x);for(Y>E&&(Y=E),T=0;T<Y;T++)if(U=T/E,L=U*U,F=y/(1e-4+L)-x,F>0)for(k=T*w,M=0;M<E;M++)for(X=k+M,B=0;B<E;B++)b[S*B+X]+=F},this.addPlaneZ=function(y,x){const E=this.size,w=this.yd,S=this.zd,b=this.field;let M,T,B,L,F,U,k,X,Y=E*Math.sqrt(y/x);for(Y>E&&(Y=E),B=0;B<Y;B++)if(U=B/E,L=U*U,F=y/(1e-4+L)-x,F>0)for(k=S*B,T=0;T<E;T++)for(X=k+T*w,M=0;M<E;M++)b[X+M]+=F},this.setCell=function(y,x,E,w){const S=this.size2*E+this.size*x+y;this.field[S]=w},this.getCell=function(y,x,E){const w=this.size2*E+this.size*x+y;return this.field[w]},this.blur=function(y=1){const x=this.field,E=x.slice(),w=this.size,S=this.size2;for(let b=0;b<w;b++)for(let M=0;M<w;M++)for(let T=0;T<w;T++){const B=S*T+w*M+b;let L=E[B],F=1;for(let U=-1;U<=1;U+=2){const k=U+b;if(!(k<0||k>=w))for(let X=-1;X<=1;X+=2){const Y=X+M;if(!(Y<0||Y>=w))for(let Z=-1;Z<=1;Z+=2){const G=Z+T;if(G<0||G>=w)continue;const O=S*G+w*Y+k,z=E[O];F++,L+=y*(z-L)/F}}}x[B]=L}},this.reset=function(){for(let y=0;y<this.size3;y++)this.normal_cache[y*3]=0,this.field[y]=0,this.palette[y*3]=this.palette[y*3+1]=this.palette[y*3+2]=0},this.onBeforeRender=function(){this.count=0;const y=this.size-2;for(let x=1;x<y;x++){const E=this.size2*x,w=(x-this.halfsize)/this.halfsize;for(let S=1;S<y;S++){const b=E+this.size*S,M=(S-this.halfsize)/this.halfsize;for(let T=1;T<y;T++){const B=(T-this.halfsize)/this.halfsize,L=b+T;g(B,M,w,L,this.isolation)}}}for(let x=this.count*3;x<this.positionArray.length;x++)this.positionArray[x]=0;o.getAttribute("position").needsUpdate=!0,o.getAttribute("normal").needsUpdate=!0,this.enableUvs&&(o.getAttribute("uv").needsUpdate=!0),this.enableColors&&(o.getAttribute("color").needsUpdate=!0),this.count/3>s&&console.warn("MarchingCubes: Geometry buffers too small for rendering. Please create an instance with a higher poly count.")},this.init(e)}}XG.prototype.isMarchingCubes=!0;const fpe=new Int32Array([0,265,515,778,1030,1295,1541,1804,2060,2309,2575,2822,3082,3331,3593,3840,400,153,915,666,1430,1183,1941,1692,2460,2197,2975,2710,3482,3219,3993,3728,560,825,51,314,1590,1855,1077,1340,2620,2869,2111,2358,3642,3891,3129,3376,928,681,419,170,1958,1711,1445,1196,2988,2725,2479,2214,4010,3747,3497,3232,1120,1385,1635,1898,102,367,613,876,3180,3429,3695,3942,2154,2403,2665,2912,1520,1273,2035,1786,502,255,1013,764,3580,3317,4095,3830,2554,2291,3065,2800,1616,1881,1107,1370,598,863,85,348,3676,3925,3167,3414,2650,2899,2137,2384,1984,1737,1475,1226,966,719,453,204,4044,3781,3535,3270,3018,2755,2505,2240,2240,2505,2755,3018,3270,3535,3781,4044,204,453,719,966,1226,1475,1737,1984,2384,2137,2899,2650,3414,3167,3925,3676,348,85,863,598,1370,1107,1881,1616,2800,3065,2291,2554,3830,4095,3317,3580,764,1013,255,502,1786,2035,1273,1520,2912,2665,2403,2154,3942,3695,3429,3180,876,613,367,102,1898,1635,1385,1120,3232,3497,3747,4010,2214,2479,2725,2988,1196,1445,1711,1958,170,419,681,928,3376,3129,3891,3642,2358,2111,2869,2620,1340,1077,1855,1590,314,51,825,560,3728,3993,3219,3482,2710,2975,2197,2460,1692,1941,1183,1430,666,915,153,400,3840,3593,3331,3082,2822,2575,2309,2060,1804,1541,1295,1030,778,515,265,0]),zg=new Int32Array([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,9,8,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,2,10,0,2,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,8,3,2,10,8,10,9,8,-1,-1,-1,-1,-1,-1,-1,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,8,11,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,11,2,1,9,11,9,8,11,-1,-1,-1,-1,-1,-1,-1,3,10,1,11,10,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,10,1,0,8,10,8,11,10,-1,-1,-1,-1,-1,-1,-1,3,9,0,3,11,9,11,10,9,-1,-1,-1,-1,-1,-1,-1,9,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,7,3,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,1,9,4,7,1,7,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,4,7,3,0,4,1,2,10,-1,-1,-1,-1,-1,-1,-1,9,2,10,9,0,2,8,4,7,-1,-1,-1,-1,-1,-1,-1,2,10,9,2,9,7,2,7,3,7,9,4,-1,-1,-1,-1,8,4,7,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,4,7,11,2,4,2,0,4,-1,-1,-1,-1,-1,-1,-1,9,0,1,8,4,7,2,3,11,-1,-1,-1,-1,-1,-1,-1,4,7,11,9,4,11,9,11,2,9,2,1,-1,-1,-1,-1,3,10,1,3,11,10,7,8,4,-1,-1,-1,-1,-1,-1,-1,1,11,10,1,4,11,1,0,4,7,11,4,-1,-1,-1,-1,4,7,8,9,0,11,9,11,10,11,0,3,-1,-1,-1,-1,4,7,11,4,11,9,9,11,10,-1,-1,-1,-1,-1,-1,-1,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,5,4,1,5,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,5,4,8,3,5,3,1,5,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,10,4,9,5,-1,-1,-1,-1,-1,-1,-1,5,2,10,5,4,2,4,0,2,-1,-1,-1,-1,-1,-1,-1,2,10,5,3,2,5,3,5,4,3,4,8,-1,-1,-1,-1,9,5,4,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,0,8,11,4,9,5,-1,-1,-1,-1,-1,-1,-1,0,5,4,0,1,5,2,3,11,-1,-1,-1,-1,-1,-1,-1,2,1,5,2,5,8,2,8,11,4,8,5,-1,-1,-1,-1,10,3,11,10,1,3,9,5,4,-1,-1,-1,-1,-1,-1,-1,4,9,5,0,8,1,8,10,1,8,11,10,-1,-1,-1,-1,5,4,0,5,0,11,5,11,10,11,0,3,-1,-1,-1,-1,5,4,8,5,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,9,7,8,5,7,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,3,0,9,5,3,5,7,3,-1,-1,-1,-1,-1,-1,-1,0,7,8,0,1,7,1,5,7,-1,-1,-1,-1,-1,-1,-1,1,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,7,8,9,5,7,10,1,2,-1,-1,-1,-1,-1,-1,-1,10,1,2,9,5,0,5,3,0,5,7,3,-1,-1,-1,-1,8,0,2,8,2,5,8,5,7,10,5,2,-1,-1,-1,-1,2,10,5,2,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,7,9,5,7,8,9,3,11,2,-1,-1,-1,-1,-1,-1,-1,9,5,7,9,7,2,9,2,0,2,7,11,-1,-1,-1,-1,2,3,11,0,1,8,1,7,8,1,5,7,-1,-1,-1,-1,11,2,1,11,1,7,7,1,5,-1,-1,-1,-1,-1,-1,-1,9,5,8,8,5,7,10,1,3,10,3,11,-1,-1,-1,-1,5,7,0,5,0,9,7,11,0,1,0,10,11,10,0,-1,11,10,0,11,0,3,10,5,0,8,0,7,5,7,0,-1,11,10,5,7,11,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,0,1,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,1,9,8,5,10,6,-1,-1,-1,-1,-1,-1,-1,1,6,5,2,6,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,6,5,1,2,6,3,0,8,-1,-1,-1,-1,-1,-1,-1,9,6,5,9,0,6,0,2,6,-1,-1,-1,-1,-1,-1,-1,5,9,8,5,8,2,5,2,6,3,2,8,-1,-1,-1,-1,2,3,11,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,0,8,11,2,0,10,6,5,-1,-1,-1,-1,-1,-1,-1,0,1,9,2,3,11,5,10,6,-1,-1,-1,-1,-1,-1,-1,5,10,6,1,9,2,9,11,2,9,8,11,-1,-1,-1,-1,6,3,11,6,5,3,5,1,3,-1,-1,-1,-1,-1,-1,-1,0,8,11,0,11,5,0,5,1,5,11,6,-1,-1,-1,-1,3,11,6,0,3,6,0,6,5,0,5,9,-1,-1,-1,-1,6,5,9,6,9,11,11,9,8,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,4,7,3,6,5,10,-1,-1,-1,-1,-1,-1,-1,1,9,0,5,10,6,8,4,7,-1,-1,-1,-1,-1,-1,-1,10,6,5,1,9,7,1,7,3,7,9,4,-1,-1,-1,-1,6,1,2,6,5,1,4,7,8,-1,-1,-1,-1,-1,-1,-1,1,2,5,5,2,6,3,0,4,3,4,7,-1,-1,-1,-1,8,4,7,9,0,5,0,6,5,0,2,6,-1,-1,-1,-1,7,3,9,7,9,4,3,2,9,5,9,6,2,6,9,-1,3,11,2,7,8,4,10,6,5,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,2,4,2,0,2,7,11,-1,-1,-1,-1,0,1,9,4,7,8,2,3,11,5,10,6,-1,-1,-1,-1,9,2,1,9,11,2,9,4,11,7,11,4,5,10,6,-1,8,4,7,3,11,5,3,5,1,5,11,6,-1,-1,-1,-1,5,1,11,5,11,6,1,0,11,7,11,4,0,4,11,-1,0,5,9,0,6,5,0,3,6,11,6,3,8,4,7,-1,6,5,9,6,9,11,4,7,9,7,11,9,-1,-1,-1,-1,10,4,9,6,4,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,10,6,4,9,10,0,8,3,-1,-1,-1,-1,-1,-1,-1,10,0,1,10,6,0,6,4,0,-1,-1,-1,-1,-1,-1,-1,8,3,1,8,1,6,8,6,4,6,1,10,-1,-1,-1,-1,1,4,9,1,2,4,2,6,4,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,9,2,4,9,2,6,4,-1,-1,-1,-1,0,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,3,2,8,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,10,4,9,10,6,4,11,2,3,-1,-1,-1,-1,-1,-1,-1,0,8,2,2,8,11,4,9,10,4,10,6,-1,-1,-1,-1,3,11,2,0,1,6,0,6,4,6,1,10,-1,-1,-1,-1,6,4,1,6,1,10,4,8,1,2,1,11,8,11,1,-1,9,6,4,9,3,6,9,1,3,11,6,3,-1,-1,-1,-1,8,11,1,8,1,0,11,6,1,9,1,4,6,4,1,-1,3,11,6,3,6,0,0,6,4,-1,-1,-1,-1,-1,-1,-1,6,4,8,11,6,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,10,6,7,8,10,8,9,10,-1,-1,-1,-1,-1,-1,-1,0,7,3,0,10,7,0,9,10,6,7,10,-1,-1,-1,-1,10,6,7,1,10,7,1,7,8,1,8,0,-1,-1,-1,-1,10,6,7,10,7,1,1,7,3,-1,-1,-1,-1,-1,-1,-1,1,2,6,1,6,8,1,8,9,8,6,7,-1,-1,-1,-1,2,6,9,2,9,1,6,7,9,0,9,3,7,3,9,-1,7,8,0,7,0,6,6,0,2,-1,-1,-1,-1,-1,-1,-1,7,3,2,6,7,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,11,10,6,8,10,8,9,8,6,7,-1,-1,-1,-1,2,0,7,2,7,11,0,9,7,6,7,10,9,10,7,-1,1,8,0,1,7,8,1,10,7,6,7,10,2,3,11,-1,11,2,1,11,1,7,10,6,1,6,7,1,-1,-1,-1,-1,8,9,6,8,6,7,9,1,6,11,6,3,1,3,6,-1,0,9,1,11,6,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,8,0,7,0,6,3,11,0,11,6,0,-1,-1,-1,-1,7,11,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,1,9,8,3,1,11,7,6,-1,-1,-1,-1,-1,-1,-1,10,1,2,6,11,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,8,6,11,7,-1,-1,-1,-1,-1,-1,-1,2,9,0,2,10,9,6,11,7,-1,-1,-1,-1,-1,-1,-1,6,11,7,2,10,3,10,8,3,10,9,8,-1,-1,-1,-1,7,2,3,6,2,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,0,8,7,6,0,6,2,0,-1,-1,-1,-1,-1,-1,-1,2,7,6,2,3,7,0,1,9,-1,-1,-1,-1,-1,-1,-1,1,6,2,1,8,6,1,9,8,8,7,6,-1,-1,-1,-1,10,7,6,10,1,7,1,3,7,-1,-1,-1,-1,-1,-1,-1,10,7,6,1,7,10,1,8,7,1,0,8,-1,-1,-1,-1,0,3,7,0,7,10,0,10,9,6,10,7,-1,-1,-1,-1,7,6,10,7,10,8,8,10,9,-1,-1,-1,-1,-1,-1,-1,6,8,4,11,8,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,6,11,3,0,6,0,4,6,-1,-1,-1,-1,-1,-1,-1,8,6,11,8,4,6,9,0,1,-1,-1,-1,-1,-1,-1,-1,9,4,6,9,6,3,9,3,1,11,3,6,-1,-1,-1,-1,6,8,4,6,11,8,2,10,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,11,0,6,11,0,4,6,-1,-1,-1,-1,4,11,8,4,6,11,0,2,9,2,10,9,-1,-1,-1,-1,10,9,3,10,3,2,9,4,3,11,3,6,4,6,3,-1,8,2,3,8,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,0,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,4,2,4,6,4,3,8,-1,-1,-1,-1,1,9,4,1,4,2,2,4,6,-1,-1,-1,-1,-1,-1,-1,8,1,3,8,6,1,8,4,6,6,10,1,-1,-1,-1,-1,10,1,0,10,0,6,6,0,4,-1,-1,-1,-1,-1,-1,-1,4,6,3,4,3,8,6,10,3,0,3,9,10,9,3,-1,10,9,4,6,10,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,5,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,5,11,7,6,-1,-1,-1,-1,-1,-1,-1,5,0,1,5,4,0,7,6,11,-1,-1,-1,-1,-1,-1,-1,11,7,6,8,3,4,3,5,4,3,1,5,-1,-1,-1,-1,9,5,4,10,1,2,7,6,11,-1,-1,-1,-1,-1,-1,-1,6,11,7,1,2,10,0,8,3,4,9,5,-1,-1,-1,-1,7,6,11,5,4,10,4,2,10,4,0,2,-1,-1,-1,-1,3,4,8,3,5,4,3,2,5,10,5,2,11,7,6,-1,7,2,3,7,6,2,5,4,9,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,6,0,6,2,6,8,7,-1,-1,-1,-1,3,6,2,3,7,6,1,5,0,5,4,0,-1,-1,-1,-1,6,2,8,6,8,7,2,1,8,4,8,5,1,5,8,-1,9,5,4,10,1,6,1,7,6,1,3,7,-1,-1,-1,-1,1,6,10,1,7,6,1,0,7,8,7,0,9,5,4,-1,4,0,10,4,10,5,0,3,10,6,10,7,3,7,10,-1,7,6,10,7,10,8,5,4,10,4,8,10,-1,-1,-1,-1,6,9,5,6,11,9,11,8,9,-1,-1,-1,-1,-1,-1,-1,3,6,11,0,6,3,0,5,6,0,9,5,-1,-1,-1,-1,0,11,8,0,5,11,0,1,5,5,6,11,-1,-1,-1,-1,6,11,3,6,3,5,5,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,11,9,11,8,11,5,6,-1,-1,-1,-1,0,11,3,0,6,11,0,9,6,5,6,9,1,2,10,-1,11,8,5,11,5,6,8,0,5,10,5,2,0,2,5,-1,6,11,3,6,3,5,2,10,3,10,5,3,-1,-1,-1,-1,5,8,9,5,2,8,5,6,2,3,8,2,-1,-1,-1,-1,9,5,6,9,6,0,0,6,2,-1,-1,-1,-1,-1,-1,-1,1,5,8,1,8,0,5,6,8,3,8,2,6,2,8,-1,1,5,6,2,1,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,6,1,6,10,3,8,6,5,6,9,8,9,6,-1,10,1,0,10,0,6,9,5,0,5,6,0,-1,-1,-1,-1,0,3,8,5,6,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,5,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,7,5,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,11,7,5,8,3,0,-1,-1,-1,-1,-1,-1,-1,5,11,7,5,10,11,1,9,0,-1,-1,-1,-1,-1,-1,-1,10,7,5,10,11,7,9,8,1,8,3,1,-1,-1,-1,-1,11,1,2,11,7,1,7,5,1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,7,1,7,5,7,2,11,-1,-1,-1,-1,9,7,5,9,2,7,9,0,2,2,11,7,-1,-1,-1,-1,7,5,2,7,2,11,5,9,2,3,2,8,9,8,2,-1,2,5,10,2,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,8,2,0,8,5,2,8,7,5,10,2,5,-1,-1,-1,-1,9,0,1,5,10,3,5,3,7,3,10,2,-1,-1,-1,-1,9,8,2,9,2,1,8,7,2,10,2,5,7,5,2,-1,1,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,7,0,7,1,1,7,5,-1,-1,-1,-1,-1,-1,-1,9,0,3,9,3,5,5,3,7,-1,-1,-1,-1,-1,-1,-1,9,8,7,5,9,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,8,4,5,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,5,0,4,5,11,0,5,10,11,11,3,0,-1,-1,-1,-1,0,1,9,8,4,10,8,10,11,10,4,5,-1,-1,-1,-1,10,11,4,10,4,5,11,3,4,9,4,1,3,1,4,-1,2,5,1,2,8,5,2,11,8,4,5,8,-1,-1,-1,-1,0,4,11,0,11,3,4,5,11,2,11,1,5,1,11,-1,0,2,5,0,5,9,2,11,5,4,5,8,11,8,5,-1,9,4,5,2,11,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,5,10,3,5,2,3,4,5,3,8,4,-1,-1,-1,-1,5,10,2,5,2,4,4,2,0,-1,-1,-1,-1,-1,-1,-1,3,10,2,3,5,10,3,8,5,4,5,8,0,1,9,-1,5,10,2,5,2,4,1,9,2,9,4,2,-1,-1,-1,-1,8,4,5,8,5,3,3,5,1,-1,-1,-1,-1,-1,-1,-1,0,4,5,1,0,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,4,5,8,5,3,9,0,5,0,3,5,-1,-1,-1,-1,9,4,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,11,7,4,9,11,9,10,11,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,7,9,11,7,9,10,11,-1,-1,-1,-1,1,10,11,1,11,4,1,4,0,7,4,11,-1,-1,-1,-1,3,1,4,3,4,8,1,10,4,7,4,11,10,11,4,-1,4,11,7,9,11,4,9,2,11,9,1,2,-1,-1,-1,-1,9,7,4,9,11,7,9,1,11,2,11,1,0,8,3,-1,11,7,4,11,4,2,2,4,0,-1,-1,-1,-1,-1,-1,-1,11,7,4,11,4,2,8,3,4,3,2,4,-1,-1,-1,-1,2,9,10,2,7,9,2,3,7,7,4,9,-1,-1,-1,-1,9,10,7,9,7,4,10,2,7,8,7,0,2,0,7,-1,3,7,10,3,10,2,7,4,10,1,10,0,4,0,10,-1,1,10,2,8,7,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,7,1,3,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,0,8,1,8,7,1,-1,-1,-1,-1,4,0,3,7,4,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,8,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,11,9,10,-1,-1,-1,-1,-1,-1,-1,0,1,10,0,10,8,8,10,11,-1,-1,-1,-1,-1,-1,-1,3,1,10,11,3,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,11,1,11,9,9,11,8,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,1,2,9,2,11,9,-1,-1,-1,-1,0,2,11,8,0,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,2,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,10,8,9,-1,-1,-1,-1,-1,-1,-1,9,10,2,0,9,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,0,1,8,1,10,8,-1,-1,-1,-1,1,10,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,8,9,1,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,9,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,3,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]);class uw{constructor(e=Math){D(this,"grad3",[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]]),D(this,"grad4",[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]]),D(this,"p",[]),D(this,"perm",[]),D(this,"simplex",[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]),D(this,"dot",(n,i,r)=>n[0]*i+n[1]*r),D(this,"dot3",(n,i,r,s)=>n[0]*i+n[1]*r+n[2]*s),D(this,"dot4",(n,i,r,s,o)=>n[0]*i+n[1]*r+n[2]*s+n[3]*o),D(this,"noise",(n,i)=>{let r,s,o;const a=.5*(Math.sqrt(3)-1),l=(n+i)*a,c=Math.floor(n+l),u=Math.floor(i+l),h=(3-Math.sqrt(3))/6,f=(c+u)*h,d=c-f,p=u-f,m=n-d,g=i-p;let _=0,y=1;m>g&&(_=1,y=0);const x=m-_+h,E=g-y+h,w=m-1+2*h,S=g-1+2*h,b=c&255,M=u&255,T=this.perm[b+this.perm[M]]%12,B=this.perm[b+_+this.perm[M+y]]%12,L=this.perm[b+1+this.perm[M+1]]%12;let F=.5-m*m-g*g;F<0?r=0:(F*=F,r=F*F*this.dot(this.grad3[T],m,g));let U=.5-x*x-E*E;U<0?s=0:(U*=U,s=U*U*this.dot(this.grad3[B],x,E));let k=.5-w*w-S*S;return k<0?o=0:(k*=k,o=k*k*this.dot(this.grad3[L],w,S)),70*(r+s+o)}),D(this,"noise3d",(n,i,r)=>{let s,o,a,l;const c=.3333333333333333,u=(n+i+r)*c,h=Math.floor(n+u),f=Math.floor(i+u),d=Math.floor(r+u),p=1/6,m=(h+f+d)*p,g=h-m,_=f-m,y=d-m,x=n-g,E=i-_,w=r-y;let S,b,M,T,B,L;x>=E?E>=w?(S=1,b=0,M=0,T=1,B=1,L=0):x>=w?(S=1,b=0,M=0,T=1,B=0,L=1):(S=0,b=0,M=1,T=1,B=0,L=1):E<w?(S=0,b=0,M=1,T=0,B=1,L=1):x<w?(S=0,b=1,M=0,T=0,B=1,L=1):(S=0,b=1,M=0,T=1,B=1,L=0);const F=x-S+p,U=E-b+p,k=w-M+p,X=x-T+2*p,Y=E-B+2*p,Z=w-L+2*p,G=x-1+3*p,O=E-1+3*p,z=w-1+3*p,Q=h&255,H=f&255,J=d&255,j=this.perm[Q+this.perm[H+this.perm[J]]]%12,oe=this.perm[Q+S+this.perm[H+b+this.perm[J+M]]]%12,K=this.perm[Q+T+this.perm[H+B+this.perm[J+L]]]%12,ce=this.perm[Q+1+this.perm[H+1+this.perm[J+1]]]%12;let he=.6-x*x-E*E-w*w;he<0?s=0:(he*=he,s=he*he*this.dot3(this.grad3[j],x,E,w));let ve=.6-F*F-U*U-k*k;ve<0?o=0:(ve*=ve,o=ve*ve*this.dot3(this.grad3[oe],F,U,k));let Me=.6-X*X-Y*Y-Z*Z;Me<0?a=0:(Me*=Me,a=Me*Me*this.dot3(this.grad3[K],X,Y,Z));let Se=.6-G*G-O*O-z*z;return Se<0?l=0:(Se*=Se,l=Se*Se*this.dot3(this.grad3[ce],G,O,z)),32*(s+o+a+l)}),D(this,"noise4d",(n,i,r,s)=>{const o=this.grad4,a=this.simplex,l=this.perm,c=(Math.sqrt(5)-1)/4,u=(5-Math.sqrt(5))/20;let h,f,d,p,m;const g=(n+i+r+s)*c,_=Math.floor(n+g),y=Math.floor(i+g),x=Math.floor(r+g),E=Math.floor(s+g),w=(_+y+x+E)*u,S=_-w,b=y-w,M=x-w,T=E-w,B=n-S,L=i-b,F=r-M,U=s-T,k=B>L?32:0,X=B>F?16:0,Y=L>F?8:0,Z=B>U?4:0,G=L>U?2:0,O=F>U?1:0,z=k+X+Y+Z+G+O;let Q,H,J,j,oe,K,ce,he,ve,Me,Se,le;Q=a[z][0]>=3?1:0,H=a[z][1]>=3?1:0,J=a[z][2]>=3?1:0,j=a[z][3]>=3?1:0,oe=a[z][0]>=2?1:0,K=a[z][1]>=2?1:0,ce=a[z][2]>=2?1:0,he=a[z][3]>=2?1:0,ve=a[z][0]>=1?1:0,Me=a[z][1]>=1?1:0,Se=a[z][2]>=1?1:0,le=a[z][3]>=1?1:0;const pe=B-Q+u,Pe=L-H+u,Oe=F-J+u,ke=U-j+u,Ke=B-oe+2*u,xe=L-K+2*u,Ue=F-ce+2*u,He=U-he+2*u,be=B-ve+3*u,q=L-Me+3*u,W=F-Se+3*u,ie=U-le+3*u,fe=B-1+4*u,_e=L-1+4*u,Ge=F-1+4*u,Ie=U-1+4*u,Le=_&255,ye=y&255,je=x&255,re=E&255,ge=l[Le+l[ye+l[je+l[re]]]]%32,Ce=l[Le+Q+l[ye+H+l[je+J+l[re+j]]]]%32,Re=l[Le+oe+l[ye+K+l[je+ce+l[re+he]]]]%32,Je=l[Le+ve+l[ye+Me+l[je+Se+l[re+le]]]]%32,ae=l[Le+1+l[ye+1+l[je+1+l[re+1]]]]%32;let qe=.6-B*B-L*L-F*F-U*U;qe<0?h=0:(qe*=qe,h=qe*qe*this.dot4(o[ge],B,L,F,U));let ze=.6-pe*pe-Pe*Pe-Oe*Oe-ke*ke;ze<0?f=0:(ze*=ze,f=ze*ze*this.dot4(o[Ce],pe,Pe,Oe,ke));let we=.6-Ke*Ke-xe*xe-Ue*Ue-He*He;we<0?d=0:(we*=we,d=we*we*this.dot4(o[Re],Ke,xe,Ue,He));let We=.6-be*be-q*q-W*W-ie*ie;We<0?p=0:(We*=We,p=We*We*this.dot4(o[Je],be,q,W,ie));let ht=.6-fe*fe-_e*_e-Ge*Ge-Ie*Ie;return ht<0?m=0:(ht*=ht,m=ht*ht*this.dot4(o[ae],fe,_e,Ge,Ie)),27*(h+f+d+p+m)});for(let n=0;n<256;n++)this.p[n]=Math.floor(e.random()*256);for(let n=0;n<512;n++)this.perm[n]=this.p[n&255]}}class nc extends rt{constructor(){super(new Ua(1,1,1),nc.material)}}D(nc,"SkyShader",{uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new $},up:{value:new $(0,1,0)}},vertexShader:["uniform vec3 sunPosition;","uniform float rayleigh;","uniform float turbidity;","uniform float mieCoefficient;","uniform vec3 up;","varying vec3 vWorldPosition;","varying vec3 vSunDirection;","varying float vSunfade;","varying vec3 vBetaR;","varying vec3 vBetaM;","varying float vSunE;","const float e = 2.71828182845904523536028747135266249775724709369995957;","const float pi = 3.141592653589793238462643383279502884197169;","const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );","const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );","const float v = 4.0;","const vec3 K = vec3( 0.686, 0.678, 0.666 );","const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );","const float cutoffAngle = 1.6110731556870734;","const float steepness = 1.5;","const float EE = 1000.0;","float sunIntensity( float zenithAngleCos ) {","	zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );","	return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );","}","vec3 totalMie( float T ) {","	float c = ( 0.2 * T ) * 10E-18;","	return 0.434 * c * MieConst;","}","void main() {","	vec4 worldPosition = modelMatrix * vec4( position, 1.0 );","	vWorldPosition = worldPosition.xyz;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","	gl_Position.z = gl_Position.w;","	vSunDirection = normalize( sunPosition );","	vSunE = sunIntensity( dot( vSunDirection, up ) );","	vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );","	float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );","	vBetaR = totalRayleigh * rayleighCoefficient;","	vBetaM = totalMie( turbidity ) * mieCoefficient;","}"].join(`
`),fragmentShader:["varying vec3 vWorldPosition;","varying vec3 vSunDirection;","varying float vSunfade;","varying vec3 vBetaR;","varying vec3 vBetaM;","varying float vSunE;","uniform float mieDirectionalG;","uniform vec3 up;","const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );","const float pi = 3.141592653589793238462643383279502884197169;","const float n = 1.0003;","const float N = 2.545E25;","const float rayleighZenithLength = 8.4E3;","const float mieZenithLength = 1.25E3;","const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;","const float THREE_OVER_SIXTEENPI = 0.05968310365946075;","const float ONE_OVER_FOURPI = 0.07957747154594767;","float rayleighPhase( float cosTheta ) {","	return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );","}","float hgPhase( float cosTheta, float g ) {","	float g2 = pow( g, 2.0 );","	float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );","	return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );","}","void main() {","	vec3 direction = normalize( vWorldPosition - cameraPos );","	float zenithAngle = acos( max( 0.0, dot( up, direction ) ) );","	float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );","	float sR = rayleighZenithLength * inverse;","	float sM = mieZenithLength * inverse;","	vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );","	float cosTheta = dot( direction, vSunDirection );","	float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );","	vec3 betaRTheta = vBetaR * rPhase;","	float mPhase = hgPhase( cosTheta, mieDirectionalG );","	vec3 betaMTheta = vBetaM * mPhase;","	vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );","	Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );","	float theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]","	float phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]","	vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );","	vec3 L0 = vec3( 0.1 ) * Fex;","	float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );","	L0 += ( vSunE * 19000.0 * Fex ) * sundisk;","	vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );","	vec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );","	gl_FragColor = vec4( retColor, 1.0 );","#include <tonemapping_fragment>","#include <encodings_fragment>","}"].join(`
`)});D(nc,"material",new As({name:"SkyShader",fragmentShader:nc.SkyShader.fragmentShader,vertexShader:nc.SkyShader.vertexShader,uniforms:Eh.clone(nc.SkyShader.uniforms),side:Vy,depthWrite:!1}));const dpe=t=>t&&t.isCubeTexture;class ppe extends rt{constructor(e,n){var i,r;const s=dpe(e),a=((i=s?(r=e.image[0])===null||r===void 0?void 0:r.width:e.image.width)!=null?i:1024)/4,l=Math.floor(Math.log2(a)),c=Math.pow(2,l),u=3*Math.max(c,16*7),h=4*c,f=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/u}`,`#define CUBEUV_TEXEL_HEIGHT ${1/h}`,`#define CUBEUV_MAX_MIP ${l}.0`],d=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,p=f.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <encodings_fragment>
        }
        `,m={map:{value:e},height:{value:(n==null?void 0:n.height)||15},radius:{value:(n==null?void 0:n.radius)||100}},g=new b6(1,16),_=new As({uniforms:m,fragmentShader:p,vertexShader:d,side:Po});super(g,_)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}var mpe=function(){var t=new Hm,e=new $;function n(i){var r=i.geometry;if(!r.isBufferGeometry||r.attributes.position.itemSize!==3)throw new Error("THREE.MeshSurfaceSampler: Requires BufferGeometry triangle mesh.");r.index&&(console.warn("THREE.MeshSurfaceSampler: Converting geometry to non-indexed BufferGeometry."),r=r.toNonIndexed()),this.geometry=r,this.randomFunction=Math.random,this.positionAttribute=this.geometry.getAttribute("position"),this.colorAttribute=this.geometry.getAttribute("color"),this.weightAttribute=null,this.distribution=null}return n.prototype={constructor:n,setWeightAttribute:function(i){return this.weightAttribute=i?this.geometry.getAttribute(i):null,this},build:function(){var i=this.positionAttribute,r=this.weightAttribute,s=new Float32Array(i.count/3);for(let l=0;l<i.count;l+=3){var o=1;r&&(o=r.getX(l)+r.getX(l+1)+r.getX(l+2)),t.a.fromBufferAttribute(i,l),t.b.fromBufferAttribute(i,l+1),t.c.fromBufferAttribute(i,l+2),o*=t.getArea(),s[l/3]=o}this.distribution=new Float32Array(i.count/3);var a=0;for(let l=0;l<s.length;l++)a+=s[l],this.distribution[l]=a;return this},setRandomGenerator:function(i){return this.randomFunction=i,this},sample:function(i,r,s){var o=this.distribution[this.distribution.length-1],a=this.binarySearch(this.randomFunction()*o);return this.sampleFace(a,i,r,s)},binarySearch:function(i){for(var r=this.distribution,s=0,o=r.length-1,a=-1;s<=o;){var l=Math.ceil((s+o)/2);if(l===0||r[l-1]<=i&&r[l]>i){a=l;break}else i<r[l]?o=l-1:s=l+1}return a},sampleFace:function(i,r,s,o){var a=this.randomFunction(),l=this.randomFunction();return a+l>1&&(a=1-a,l=1-l),t.a.fromBufferAttribute(this.positionAttribute,i*3),t.b.fromBufferAttribute(this.positionAttribute,i*3+1),t.c.fromBufferAttribute(this.positionAttribute,i*3+2),r.set(0,0,0).addScaledVector(t.a,a).addScaledVector(t.b,l).addScaledVector(t.c,1-(a+l)),s!==void 0&&t.getNormal(s),o!==void 0&&this.colorAttribute!==void 0&&(t.a.fromBufferAttribute(this.colorAttribute,i*3),t.b.fromBufferAttribute(this.colorAttribute,i*3+1),t.c.fromBufferAttribute(this.colorAttribute,i*3+2),e.set(0,0,0).addScaledVector(t.a,a).addScaledVector(t.b,l).addScaledVector(t.c,1-(a+l)),o.r=e.x,o.g=e.y,o.b=e.z),this}},n}();const y4=new $;class Ape extends Dc{constructor(e,n){super(),D(this,"object",void 0),D(this,"domElement",void 0),D(this,"enabled",!0),D(this,"movementSpeed",1),D(this,"lookSpeed",.005),D(this,"lookVertical",!0),D(this,"autoForward",!1),D(this,"activeLook",!0),D(this,"heightSpeed",!1),D(this,"heightCoef",1),D(this,"heightMin",0),D(this,"heightMax",1),D(this,"constrainVertical",!1),D(this,"verticalMin",0),D(this,"verticalMax",Math.PI),D(this,"mouseDragOn",!1),D(this,"autoSpeedFactor",0),D(this,"mouseX",0),D(this,"mouseY",0),D(this,"moveForward",!1),D(this,"moveBackward",!1),D(this,"moveLeft",!1),D(this,"moveRight",!1),D(this,"moveUp",!1),D(this,"moveDown",!1),D(this,"viewHalfX",0),D(this,"viewHalfY",0),D(this,"lat",0),D(this,"lon",0),D(this,"lookDirection",new $),D(this,"spherical",new Qm),D(this,"target",new $),D(this,"connect",i=>{i.setAttribute("tabindex","-1"),i.style.touchAction="none",i.addEventListener("contextmenu",this.contextmenu),i.addEventListener("mousemove",this.onMouseMove),i.addEventListener("mousedown",this.onMouseDown),i.addEventListener("mouseup",this.onMouseUp),this.domElement=i,window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp),this.handleResize()}),D(this,"dispose",()=>{var i,r,s,o;(i=this.domElement)===null||i===void 0||i.removeEventListener("contextmenu",this.contextmenu),(r=this.domElement)===null||r===void 0||r.removeEventListener("mousedown",this.onMouseDown),(s=this.domElement)===null||s===void 0||s.removeEventListener("mousemove",this.onMouseMove),(o=this.domElement)===null||o===void 0||o.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)}),D(this,"handleResize",()=>{this.domElement&&(this.viewHalfX=this.domElement.offsetWidth/2,this.viewHalfY=this.domElement.offsetHeight/2)}),D(this,"onMouseDown",i=>{var r;if((r=this.domElement)===null||r===void 0||r.focus(),this.activeLook)switch(i.button){case 0:this.moveForward=!0;break;case 2:this.moveBackward=!0;break}this.mouseDragOn=!0}),D(this,"onMouseUp",i=>{if(this.activeLook)switch(i.button){case 0:this.moveForward=!1;break;case 2:this.moveBackward=!1;break}this.mouseDragOn=!1}),D(this,"onMouseMove",i=>{this.domElement&&(this.mouseX=i.pageX-this.domElement.offsetLeft-this.viewHalfX,this.mouseY=i.pageY-this.domElement.offsetTop-this.viewHalfY)}),D(this,"onKeyDown",i=>{switch(i.code){case"ArrowUp":case"KeyW":this.moveForward=!0;break;case"ArrowLeft":case"KeyA":this.moveLeft=!0;break;case"ArrowDown":case"KeyS":this.moveBackward=!0;break;case"ArrowRight":case"KeyD":this.moveRight=!0;break;case"KeyR":this.moveUp=!0;break;case"KeyF":this.moveDown=!0;break}}),D(this,"onKeyUp",i=>{switch(i.code){case"ArrowUp":case"KeyW":this.moveForward=!1;break;case"ArrowLeft":case"KeyA":this.moveLeft=!1;break;case"ArrowDown":case"KeyS":this.moveBackward=!1;break;case"ArrowRight":case"KeyD":this.moveRight=!1;break;case"KeyR":this.moveUp=!1;break;case"KeyF":this.moveDown=!1;break}}),D(this,"lookAt",(i,r,s)=>(i instanceof $?this.target.copy(i):r&&s&&this.target.set(i,r,s),this.object.lookAt(this.target),this.setOrientation(),this)),D(this,"update",i=>{if(!this.enabled)return;if(this.heightSpeed){const h=ct.clamp(this.object.position.y,this.heightMin,this.heightMax)-this.heightMin;this.autoSpeedFactor=i*(h*this.heightCoef)}else this.autoSpeedFactor=0;const r=i*this.movementSpeed;(this.moveForward||this.autoForward&&!this.moveBackward)&&this.object.translateZ(-(r+this.autoSpeedFactor)),this.moveBackward&&this.object.translateZ(r),this.moveLeft&&this.object.translateX(-r),this.moveRight&&this.object.translateX(r),this.moveUp&&this.object.translateY(r),this.moveDown&&this.object.translateY(-r);let s=i*this.lookSpeed;this.activeLook||(s=0);let o=1;this.constrainVertical&&(o=Math.PI/(this.verticalMax-this.verticalMin)),this.lon-=this.mouseX*s,this.lookVertical&&(this.lat-=this.mouseY*s*o),this.lat=Math.max(-85,Math.min(85,this.lat));let a=ct.degToRad(90-this.lat);const l=ct.degToRad(this.lon);this.constrainVertical&&(a=ct.mapLinear(a,0,Math.PI,this.verticalMin,this.verticalMax));const c=this.object.position;y4.setFromSphericalCoords(1,a,l).add(c),this.object.lookAt(y4)}),D(this,"contextmenu",i=>i.preventDefault()),D(this,"setOrientation",()=>{this.lookDirection.set(0,0,-1).applyQuaternion(this.object.quaternion),this.spherical.setFromVector3(this.lookDirection),this.lat=90-ct.radToDeg(this.spherical.phi),this.lon=ct.radToDeg(this.spherical.theta)}),this.object=e,this.domElement=n,this.setOrientation(),n&&this.connect(n)}}class gpe extends hr{constructor(e,n){super(),D(this,"isTransformControls",!0),D(this,"visible",!1),D(this,"domElement",void 0),D(this,"raycaster",new e0),D(this,"gizmo",void 0),D(this,"plane",void 0),D(this,"tempVector",new $),D(this,"tempVector2",new $),D(this,"tempQuaternion",new $t),D(this,"unit",{X:new $(1,0,0),Y:new $(0,1,0),Z:new $(0,0,1)}),D(this,"pointStart",new $),D(this,"pointEnd",new $),D(this,"offset",new $),D(this,"rotationAxis",new $),D(this,"startNorm",new $),D(this,"endNorm",new $),D(this,"rotationAngle",0),D(this,"cameraPosition",new $),D(this,"cameraQuaternion",new $t),D(this,"cameraScale",new $),D(this,"parentPosition",new $),D(this,"parentQuaternion",new $t),D(this,"parentQuaternionInv",new $t),D(this,"parentScale",new $),D(this,"worldPositionStart",new $),D(this,"worldQuaternionStart",new $t),D(this,"worldScaleStart",new $),D(this,"worldPosition",new $),D(this,"worldQuaternion",new $t),D(this,"worldQuaternionInv",new $t),D(this,"worldScale",new $),D(this,"eye",new $),D(this,"positionStart",new $),D(this,"quaternionStart",new $t),D(this,"scaleStart",new $),D(this,"camera",void 0),D(this,"object",void 0),D(this,"enabled",!0),D(this,"axis",null),D(this,"mode","translate"),D(this,"translationSnap",null),D(this,"rotationSnap",null),D(this,"scaleSnap",null),D(this,"space","world"),D(this,"size",1),D(this,"dragging",!1),D(this,"showX",!0),D(this,"showY",!0),D(this,"showZ",!0),D(this,"changeEvent",{type:"change"}),D(this,"mouseDownEvent",{type:"mouseDown",mode:this.mode}),D(this,"mouseUpEvent",{type:"mouseUp",mode:this.mode}),D(this,"objectChangeEvent",{type:"objectChange"}),D(this,"intersectObjectWithRay",(r,s,o)=>{const a=s.intersectObject(r,!0);for(let l=0;l<a.length;l++)if(a[l].object.visible||o)return a[l];return!1}),D(this,"attach",r=>(this.object=r,this.visible=!0,this)),D(this,"detach",()=>(this.object=void 0,this.visible=!1,this.axis=null,this)),D(this,"reset",()=>this.enabled?(this.dragging&&this.object!==void 0&&(this.object.position.copy(this.positionStart),this.object.quaternion.copy(this.quaternionStart),this.object.scale.copy(this.scaleStart),this.dispatchEvent(this.changeEvent),this.dispatchEvent(this.objectChangeEvent),this.pointStart.copy(this.pointEnd)),this):this),D(this,"updateMatrixWorld",()=>{this.object!==void 0&&(this.object.updateMatrixWorld(),this.object.parent===null?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this.parentPosition,this.parentQuaternion,this.parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this.worldScale),this.parentQuaternionInv.copy(this.parentQuaternion).invert(),this.worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this.cameraScale),this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),super.updateMatrixWorld()}),D(this,"pointerHover",r=>{if(this.object===void 0||this.dragging===!0)return;this.raycaster.setFromCamera(r,this.camera);const s=this.intersectObjectWithRay(this.gizmo.picker[this.mode],this.raycaster);s?this.axis=s.object.name:this.axis=null}),D(this,"pointerDown",r=>{if(!(this.object===void 0||this.dragging===!0||r.button!==0)&&this.axis!==null){this.raycaster.setFromCamera(r,this.camera);const s=this.intersectObjectWithRay(this.plane,this.raycaster,!0);if(s){let o=this.space;if(this.mode==="scale"?o="local":(this.axis==="E"||this.axis==="XYZE"||this.axis==="XYZ")&&(o="world"),o==="local"&&this.mode==="rotate"){const a=this.rotationSnap;this.axis==="X"&&a&&(this.object.rotation.x=Math.round(this.object.rotation.x/a)*a),this.axis==="Y"&&a&&(this.object.rotation.y=Math.round(this.object.rotation.y/a)*a),this.axis==="Z"&&a&&(this.object.rotation.z=Math.round(this.object.rotation.z/a)*a)}this.object.updateMatrixWorld(),this.object.parent&&this.object.parent.updateMatrixWorld(),this.positionStart.copy(this.object.position),this.quaternionStart.copy(this.object.quaternion),this.scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this.worldScaleStart),this.pointStart.copy(s.point).sub(this.worldPositionStart)}this.dragging=!0,this.mouseDownEvent.mode=this.mode,this.dispatchEvent(this.mouseDownEvent)}}),D(this,"pointerMove",r=>{const s=this.axis,o=this.mode,a=this.object;let l=this.space;if(o==="scale"?l="local":(s==="E"||s==="XYZE"||s==="XYZ")&&(l="world"),a===void 0||s===null||this.dragging===!1||r.button!==-1)return;this.raycaster.setFromCamera(r,this.camera);const c=this.intersectObjectWithRay(this.plane,this.raycaster,!0);if(!!c){if(this.pointEnd.copy(c.point).sub(this.worldPositionStart),o==="translate")this.offset.copy(this.pointEnd).sub(this.pointStart),l==="local"&&s!=="XYZ"&&this.offset.applyQuaternion(this.worldQuaternionInv),s.indexOf("X")===-1&&(this.offset.x=0),s.indexOf("Y")===-1&&(this.offset.y=0),s.indexOf("Z")===-1&&(this.offset.z=0),l==="local"&&s!=="XYZ"?this.offset.applyQuaternion(this.quaternionStart).divide(this.parentScale):this.offset.applyQuaternion(this.parentQuaternionInv).divide(this.parentScale),a.position.copy(this.offset).add(this.positionStart),this.translationSnap&&(l==="local"&&(a.position.applyQuaternion(this.tempQuaternion.copy(this.quaternionStart).invert()),s.search("X")!==-1&&(a.position.x=Math.round(a.position.x/this.translationSnap)*this.translationSnap),s.search("Y")!==-1&&(a.position.y=Math.round(a.position.y/this.translationSnap)*this.translationSnap),s.search("Z")!==-1&&(a.position.z=Math.round(a.position.z/this.translationSnap)*this.translationSnap),a.position.applyQuaternion(this.quaternionStart)),l==="world"&&(a.parent&&a.position.add(this.tempVector.setFromMatrixPosition(a.parent.matrixWorld)),s.search("X")!==-1&&(a.position.x=Math.round(a.position.x/this.translationSnap)*this.translationSnap),s.search("Y")!==-1&&(a.position.y=Math.round(a.position.y/this.translationSnap)*this.translationSnap),s.search("Z")!==-1&&(a.position.z=Math.round(a.position.z/this.translationSnap)*this.translationSnap),a.parent&&a.position.sub(this.tempVector.setFromMatrixPosition(a.parent.matrixWorld))));else if(o==="scale"){if(s.search("XYZ")!==-1){let u=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(u*=-1),this.tempVector2.set(u,u,u)}else this.tempVector.copy(this.pointStart),this.tempVector2.copy(this.pointEnd),this.tempVector.applyQuaternion(this.worldQuaternionInv),this.tempVector2.applyQuaternion(this.worldQuaternionInv),this.tempVector2.divide(this.tempVector),s.search("X")===-1&&(this.tempVector2.x=1),s.search("Y")===-1&&(this.tempVector2.y=1),s.search("Z")===-1&&(this.tempVector2.z=1);a.scale.copy(this.scaleStart).multiply(this.tempVector2),this.scaleSnap&&this.object&&(s.search("X")!==-1&&(this.object.scale.x=Math.round(a.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),s.search("Y")!==-1&&(a.scale.y=Math.round(a.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),s.search("Z")!==-1&&(a.scale.z=Math.round(a.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if(o==="rotate"){this.offset.copy(this.pointEnd).sub(this.pointStart);const u=20/this.worldPosition.distanceTo(this.tempVector.setFromMatrixPosition(this.camera.matrixWorld));s==="E"?(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this.startNorm.copy(this.pointStart).normalize(),this.endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this.endNorm.cross(this.startNorm).dot(this.eye)<0?1:-1):s==="XYZE"?(this.rotationAxis.copy(this.offset).cross(this.eye).normalize(),this.rotationAngle=this.offset.dot(this.tempVector.copy(this.rotationAxis).cross(this.eye))*u):(s==="X"||s==="Y"||s==="Z")&&(this.rotationAxis.copy(this.unit[s]),this.tempVector.copy(this.unit[s]),l==="local"&&this.tempVector.applyQuaternion(this.worldQuaternion),this.rotationAngle=this.offset.dot(this.tempVector.cross(this.eye).normalize())*u),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),l==="local"&&s!=="E"&&s!=="XYZE"?(a.quaternion.copy(this.quaternionStart),a.quaternion.multiply(this.tempQuaternion.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this.parentQuaternionInv),a.quaternion.copy(this.tempQuaternion.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),a.quaternion.multiply(this.quaternionStart).normalize())}this.dispatchEvent(this.changeEvent),this.dispatchEvent(this.objectChangeEvent)}}),D(this,"pointerUp",r=>{r.button===0&&(this.dragging&&this.axis!==null&&(this.mouseUpEvent.mode=this.mode,this.dispatchEvent(this.mouseUpEvent)),this.dragging=!1,this.axis=null)}),D(this,"getPointer",r=>{var s;if(this.domElement&&(s=this.domElement.ownerDocument)!==null&&s!==void 0&&s.pointerLockElement)return{x:0,y:0,button:r.button};{var o;const a=r.changedTouches?r.changedTouches[0]:r,l=(o=this.domElement)===null||o===void 0?void 0:o.getBoundingClientRect();return{x:(a.clientX-l.left)/l.width*2-1,y:-(a.clientY-l.top)/l.height*2+1,button:r.button}}}),D(this,"onPointerHover",r=>{if(!!this.enabled)switch(r.pointerType){case"mouse":case"pen":this.pointerHover(this.getPointer(r));break}}),D(this,"onPointerDown",r=>{!this.enabled||!this.domElement||(this.domElement.style.touchAction="none",this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.pointerHover(this.getPointer(r)),this.pointerDown(this.getPointer(r)))}),D(this,"onPointerMove",r=>{!this.enabled||this.pointerMove(this.getPointer(r))}),D(this,"onPointerUp",r=>{!this.enabled||!this.domElement||(this.domElement.style.touchAction="",this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.pointerUp(this.getPointer(r)))}),D(this,"getMode",()=>this.mode),D(this,"setMode",r=>{this.mode=r}),D(this,"setTranslationSnap",r=>{this.translationSnap=r}),D(this,"setRotationSnap",r=>{this.rotationSnap=r}),D(this,"setScaleSnap",r=>{this.scaleSnap=r}),D(this,"setSize",r=>{this.size=r}),D(this,"setSpace",r=>{this.space=r}),D(this,"update",()=>{console.warn("THREE.TransformControls: update function has no more functionality and therefore has been deprecated.")}),D(this,"connect",r=>{r===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.domElement=r,this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("pointermove",this.onPointerHover),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp)}),D(this,"dispose",()=>{var r,s,o,a,l,c;(r=this.domElement)===null||r===void 0||r.removeEventListener("pointerdown",this.onPointerDown),(s=this.domElement)===null||s===void 0||s.removeEventListener("pointermove",this.onPointerHover),(o=this.domElement)===null||o===void 0||(a=o.ownerDocument)===null||a===void 0||a.removeEventListener("pointermove",this.onPointerMove),(l=this.domElement)===null||l===void 0||(c=l.ownerDocument)===null||c===void 0||c.removeEventListener("pointerup",this.onPointerUp),this.traverse(u=>{const h=u;h.geometry&&h.geometry.dispose(),h.material&&h.material.dispose()})}),this.domElement=n,this.camera=e,this.gizmo=new vpe,this.add(this.gizmo),this.plane=new _pe,this.add(this.plane);const i=(r,s)=>{let o=s;Object.defineProperty(this,r,{get:function(){return o!==void 0?o:s},set:function(a){o!==a&&(o=a,this.plane[r]=a,this.gizmo[r]=a,this.dispatchEvent({type:r+"-changed",value:a}),this.dispatchEvent(this.changeEvent))}}),this[r]=s,this.plane[r]=s,this.gizmo[r]=s};i("camera",this.camera),i("object",this.object),i("enabled",this.enabled),i("axis",this.axis),i("mode",this.mode),i("translationSnap",this.translationSnap),i("rotationSnap",this.rotationSnap),i("scaleSnap",this.scaleSnap),i("space",this.space),i("size",this.size),i("dragging",this.dragging),i("showX",this.showX),i("showY",this.showY),i("showZ",this.showZ),i("worldPosition",this.worldPosition),i("worldPositionStart",this.worldPositionStart),i("worldQuaternion",this.worldQuaternion),i("worldQuaternionStart",this.worldQuaternionStart),i("cameraPosition",this.cameraPosition),i("cameraQuaternion",this.cameraQuaternion),i("pointStart",this.pointStart),i("pointEnd",this.pointEnd),i("rotationAxis",this.rotationAxis),i("rotationAngle",this.rotationAngle),i("eye",this.eye),n!==void 0&&this.connect(n)}}class vpe extends hr{constructor(){super(),D(this,"isTransformControlsGizmo",!0),D(this,"type","TransformControlsGizmo"),D(this,"tempVector",new $(0,0,0)),D(this,"tempEuler",new xo),D(this,"alignVector",new $(0,1,0)),D(this,"zeroVector",new $(0,0,0)),D(this,"lookAtMatrix",new Ze),D(this,"tempQuaternion",new $t),D(this,"tempQuaternion2",new $t),D(this,"identityQuaternion",new $t),D(this,"unitX",new $(1,0,0)),D(this,"unitY",new $(0,1,0)),D(this,"unitZ",new $(0,0,1)),D(this,"gizmo",void 0),D(this,"picker",void 0),D(this,"helper",void 0),D(this,"rotationAxis",new $),D(this,"cameraPosition",new $),D(this,"worldPositionStart",new $),D(this,"worldQuaternionStart",new $t),D(this,"worldPosition",new $),D(this,"worldQuaternion",new $t),D(this,"eye",new $),D(this,"camera",null),D(this,"enabled",!0),D(this,"axis",null),D(this,"mode","translate"),D(this,"space","world"),D(this,"size",1),D(this,"dragging",!1),D(this,"showX",!0),D(this,"showY",!0),D(this,"showZ",!0),D(this,"updateMatrixWorld",()=>{let z=this.space;this.mode==="scale"&&(z="local");const Q=z==="local"?this.worldQuaternion:this.identityQuaternion;this.gizmo.translate.visible=this.mode==="translate",this.gizmo.rotate.visible=this.mode==="rotate",this.gizmo.scale.visible=this.mode==="scale",this.helper.translate.visible=this.mode==="translate",this.helper.rotate.visible=this.mode==="rotate",this.helper.scale.visible=this.mode==="scale";let H=[];H=H.concat(this.picker[this.mode].children),H=H.concat(this.gizmo[this.mode].children),H=H.concat(this.helper[this.mode].children);for(let J=0;J<H.length;J++){const j=H[J];j.visible=!0,j.rotation.set(0,0,0),j.position.copy(this.worldPosition);let oe;if(this.camera.isOrthographicCamera?oe=(this.camera.top-this.camera.bottom)/this.camera.zoom:oe=this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),j.scale.set(1,1,1).multiplyScalar(oe*this.size/7),j.tag==="helper"){j.visible=!1,j.name==="AXIS"?(j.position.copy(this.worldPositionStart),j.visible=!!this.axis,this.axis==="X"&&(this.tempQuaternion.setFromEuler(this.tempEuler.set(0,0,0)),j.quaternion.copy(Q).multiply(this.tempQuaternion),Math.abs(this.alignVector.copy(this.unitX).applyQuaternion(Q).dot(this.eye))>.9&&(j.visible=!1)),this.axis==="Y"&&(this.tempQuaternion.setFromEuler(this.tempEuler.set(0,0,Math.PI/2)),j.quaternion.copy(Q).multiply(this.tempQuaternion),Math.abs(this.alignVector.copy(this.unitY).applyQuaternion(Q).dot(this.eye))>.9&&(j.visible=!1)),this.axis==="Z"&&(this.tempQuaternion.setFromEuler(this.tempEuler.set(0,Math.PI/2,0)),j.quaternion.copy(Q).multiply(this.tempQuaternion),Math.abs(this.alignVector.copy(this.unitZ).applyQuaternion(Q).dot(this.eye))>.9&&(j.visible=!1)),this.axis==="XYZE"&&(this.tempQuaternion.setFromEuler(this.tempEuler.set(0,Math.PI/2,0)),this.alignVector.copy(this.rotationAxis),j.quaternion.setFromRotationMatrix(this.lookAtMatrix.lookAt(this.zeroVector,this.alignVector,this.unitY)),j.quaternion.multiply(this.tempQuaternion),j.visible=this.dragging),this.axis==="E"&&(j.visible=!1)):j.name==="START"?(j.position.copy(this.worldPositionStart),j.visible=this.dragging):j.name==="END"?(j.position.copy(this.worldPosition),j.visible=this.dragging):j.name==="DELTA"?(j.position.copy(this.worldPositionStart),j.quaternion.copy(this.worldQuaternionStart),this.tempVector.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),this.tempVector.applyQuaternion(this.worldQuaternionStart.clone().invert()),j.scale.copy(this.tempVector),j.visible=this.dragging):(j.quaternion.copy(Q),this.dragging?j.position.copy(this.worldPositionStart):j.position.copy(this.worldPosition),this.axis&&(j.visible=this.axis.search(j.name)!==-1));continue}j.quaternion.copy(Q),this.mode==="translate"||this.mode==="scale"?((j.name==="X"||j.name==="XYZX")&&Math.abs(this.alignVector.copy(this.unitX).applyQuaternion(Q).dot(this.eye))>.99&&(j.scale.set(1e-10,1e-10,1e-10),j.visible=!1),(j.name==="Y"||j.name==="XYZY")&&Math.abs(this.alignVector.copy(this.unitY).applyQuaternion(Q).dot(this.eye))>.99&&(j.scale.set(1e-10,1e-10,1e-10),j.visible=!1),(j.name==="Z"||j.name==="XYZZ")&&Math.abs(this.alignVector.copy(this.unitZ).applyQuaternion(Q).dot(this.eye))>.99&&(j.scale.set(1e-10,1e-10,1e-10),j.visible=!1),j.name==="XY"&&Math.abs(this.alignVector.copy(this.unitZ).applyQuaternion(Q).dot(this.eye))<.2&&(j.scale.set(1e-10,1e-10,1e-10),j.visible=!1),j.name==="YZ"&&Math.abs(this.alignVector.copy(this.unitX).applyQuaternion(Q).dot(this.eye))<.2&&(j.scale.set(1e-10,1e-10,1e-10),j.visible=!1),j.name==="XZ"&&Math.abs(this.alignVector.copy(this.unitY).applyQuaternion(Q).dot(this.eye))<.2&&(j.scale.set(1e-10,1e-10,1e-10),j.visible=!1),j.name.search("X")!==-1&&(this.alignVector.copy(this.unitX).applyQuaternion(Q).dot(this.eye)<0?j.tag==="fwd"?j.visible=!1:j.scale.x*=-1:j.tag==="bwd"&&(j.visible=!1)),j.name.search("Y")!==-1&&(this.alignVector.copy(this.unitY).applyQuaternion(Q).dot(this.eye)<0?j.tag==="fwd"?j.visible=!1:j.scale.y*=-1:j.tag==="bwd"&&(j.visible=!1)),j.name.search("Z")!==-1&&(this.alignVector.copy(this.unitZ).applyQuaternion(Q).dot(this.eye)<0?j.tag==="fwd"?j.visible=!1:j.scale.z*=-1:j.tag==="bwd"&&(j.visible=!1))):this.mode==="rotate"&&(this.tempQuaternion2.copy(Q),this.alignVector.copy(this.eye).applyQuaternion(this.tempQuaternion.copy(Q).invert()),j.name.search("E")!==-1&&j.quaternion.setFromRotationMatrix(this.lookAtMatrix.lookAt(this.eye,this.zeroVector,this.unitY)),j.name==="X"&&(this.tempQuaternion.setFromAxisAngle(this.unitX,Math.atan2(-this.alignVector.y,this.alignVector.z)),this.tempQuaternion.multiplyQuaternions(this.tempQuaternion2,this.tempQuaternion),j.quaternion.copy(this.tempQuaternion)),j.name==="Y"&&(this.tempQuaternion.setFromAxisAngle(this.unitY,Math.atan2(this.alignVector.x,this.alignVector.z)),this.tempQuaternion.multiplyQuaternions(this.tempQuaternion2,this.tempQuaternion),j.quaternion.copy(this.tempQuaternion)),j.name==="Z"&&(this.tempQuaternion.setFromAxisAngle(this.unitZ,Math.atan2(this.alignVector.y,this.alignVector.x)),this.tempQuaternion.multiplyQuaternions(this.tempQuaternion2,this.tempQuaternion),j.quaternion.copy(this.tempQuaternion))),j.visible=j.visible&&(j.name.indexOf("X")===-1||this.showX),j.visible=j.visible&&(j.name.indexOf("Y")===-1||this.showY),j.visible=j.visible&&(j.name.indexOf("Z")===-1||this.showZ),j.visible=j.visible&&(j.name.indexOf("E")===-1||this.showX&&this.showY&&this.showZ),j.material.tempOpacity=j.material.tempOpacity||j.material.opacity,j.material.tempColor=j.material.tempColor||j.material.color.clone(),j.material.color.copy(j.material.tempColor),j.material.opacity=j.material.tempOpacity,this.enabled?this.axis&&(j.name===this.axis?(j.material.opacity=1,j.material.color.lerp(new xt(1,1,1),.5)):this.axis.split("").some(function(K){return j.name===K})?(j.material.opacity=1,j.material.color.lerp(new xt(1,1,1),.5)):(j.material.opacity*=.25,j.material.color.lerp(new xt(1,1,1),.5))):(j.material.opacity*=.5,j.material.color.lerp(new xt(1,1,1),.5))}super.updateMatrixWorld()});const e=new qa({depthTest:!1,depthWrite:!1,transparent:!0,side:Po,fog:!1,toneMapped:!1}),n=new Qu({depthTest:!1,depthWrite:!1,transparent:!0,linewidth:1,fog:!1,toneMapped:!1}),i=e.clone();i.opacity=.15;const r=e.clone();r.opacity=.33;const s=e.clone();s.color.set(16711680);const o=e.clone();o.color.set(65280);const a=e.clone();a.color.set(255);const l=e.clone();l.opacity=.25;const c=l.clone();c.color.set(16776960);const u=l.clone();u.color.set(65535);const h=l.clone();h.color.set(16711935),e.clone().color.set(16776960);const d=n.clone();d.color.set(16711680);const p=n.clone();p.color.set(65280);const m=n.clone();m.color.set(255);const g=n.clone();g.color.set(65535);const _=n.clone();_.color.set(16711935);const y=n.clone();y.color.set(16776960);const x=n.clone();x.color.set(7895160);const E=y.clone();E.opacity=.25;const w=new os(0,.05,.2,12,1,!1),S=new Ua(.125,.125,.125),b=new ri;b.setAttribute("position",new ur([0,0,0,1,0,0],3));const M=(z,Q)=>{const H=new ri,J=[];for(let j=0;j<=64*Q;++j)J.push(0,Math.cos(j/32*Math.PI)*z,Math.sin(j/32*Math.PI)*z);return H.setAttribute("position",new ur(J,3)),H},T=()=>{const z=new ri;return z.setAttribute("position",new ur([0,0,0,1,1,1],3)),z},B={X:[[new rt(w,s),[1,0,0],[0,0,-Math.PI/2],null,"fwd"],[new rt(w,s),[1,0,0],[0,0,Math.PI/2],null,"bwd"],[new Yt(b,d)]],Y:[[new rt(w,o),[0,1,0],null,null,"fwd"],[new rt(w,o),[0,1,0],[Math.PI,0,0],null,"bwd"],[new Yt(b,p),null,[0,0,Math.PI/2]]],Z:[[new rt(w,a),[0,0,1],[Math.PI/2,0,0],null,"fwd"],[new rt(w,a),[0,0,1],[-Math.PI/2,0,0],null,"bwd"],[new Yt(b,m),null,[0,-Math.PI/2,0]]],XYZ:[[new rt(new zl(.1,0),l.clone()),[0,0,0],[0,0,0]]],XY:[[new rt(new Ko(.295,.295),c.clone()),[.15,.15,0]],[new Yt(b,y),[.18,.3,0],null,[.125,1,1]],[new Yt(b,y),[.3,.18,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new rt(new Ko(.295,.295),u.clone()),[0,.15,.15],[0,Math.PI/2,0]],[new Yt(b,g),[0,.18,.3],[0,0,Math.PI/2],[.125,1,1]],[new Yt(b,g),[0,.3,.18],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new rt(new Ko(.295,.295),h.clone()),[.15,0,.15],[-Math.PI/2,0,0]],[new Yt(b,_),[.18,0,.3],null,[.125,1,1]],[new Yt(b,_),[.3,0,.18],[0,-Math.PI/2,0],[.125,1,1]]]},L={X:[[new rt(new os(.2,0,1,4,1,!1),i),[.6,0,0],[0,0,-Math.PI/2]]],Y:[[new rt(new os(.2,0,1,4,1,!1),i),[0,.6,0]]],Z:[[new rt(new os(.2,0,1,4,1,!1),i),[0,0,.6],[Math.PI/2,0,0]]],XYZ:[[new rt(new zl(.2,0),i)]],XY:[[new rt(new Ko(.4,.4),i),[.2,.2,0]]],YZ:[[new rt(new Ko(.4,.4),i),[0,.2,.2],[0,Math.PI/2,0]]],XZ:[[new rt(new Ko(.4,.4),i),[.2,0,.2],[-Math.PI/2,0,0]]]},F={START:[[new rt(new zl(.01,2),r),null,null,null,"helper"]],END:[[new rt(new zl(.01,2),r),null,null,null,"helper"]],DELTA:[[new Yt(T(),r),null,null,null,"helper"]],X:[[new Yt(b,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new Yt(b,r.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new Yt(b,r.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},U={X:[[new Yt(M(1,.5),d)],[new rt(new zl(.04,0),s),[0,0,.99],null,[1,3,1]]],Y:[[new Yt(M(1,.5),p),null,[0,0,-Math.PI/2]],[new rt(new zl(.04,0),o),[0,0,.99],null,[3,1,1]]],Z:[[new Yt(M(1,.5),m),null,[0,Math.PI/2,0]],[new rt(new zl(.04,0),a),[.99,0,0],null,[1,3,1]]],E:[[new Yt(M(1.25,1),E),null,[0,Math.PI/2,0]],[new rt(new os(.03,0,.15,4,1,!1),E),[1.17,0,0],[0,0,-Math.PI/2],[1,1,.001]],[new rt(new os(.03,0,.15,4,1,!1),E),[-1.17,0,0],[0,0,Math.PI/2],[1,1,.001]],[new rt(new os(.03,0,.15,4,1,!1),E),[0,-1.17,0],[Math.PI,0,0],[1,1,.001]],[new rt(new os(.03,0,.15,4,1,!1),E),[0,1.17,0],[0,0,0],[1,1,.001]]],XYZE:[[new Yt(M(1,1),x),null,[0,Math.PI/2,0]]]},k={AXIS:[[new Yt(b,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},X={X:[[new rt(new Bp(1,.1,4,24),i),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new rt(new Bp(1,.1,4,24),i),[0,0,0],[Math.PI/2,0,0]]],Z:[[new rt(new Bp(1,.1,4,24),i),[0,0,0],[0,0,-Math.PI/2]]],E:[[new rt(new Bp(1.25,.1,2,24),i)]],XYZE:[[new rt(new oN(.7,10,8),i)]]},Y={X:[[new rt(S,s),[.8,0,0],[0,0,-Math.PI/2]],[new Yt(b,d),null,null,[.8,1,1]]],Y:[[new rt(S,o),[0,.8,0]],[new Yt(b,p),null,[0,0,Math.PI/2],[.8,1,1]]],Z:[[new rt(S,a),[0,0,.8],[Math.PI/2,0,0]],[new Yt(b,m),null,[0,-Math.PI/2,0],[.8,1,1]]],XY:[[new rt(S,c),[.85,.85,0],null,[2,2,.2]],[new Yt(b,y),[.855,.98,0],null,[.125,1,1]],[new Yt(b,y),[.98,.855,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new rt(S,u),[0,.85,.85],null,[.2,2,2]],[new Yt(b,g),[0,.855,.98],[0,0,Math.PI/2],[.125,1,1]],[new Yt(b,g),[0,.98,.855],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new rt(S,h),[.85,0,.85],null,[2,.2,2]],[new Yt(b,_),[.855,0,.98],null,[.125,1,1]],[new Yt(b,_),[.98,0,.855],[0,-Math.PI/2,0],[.125,1,1]]],XYZX:[[new rt(new Ua(.125,.125,.125),l.clone()),[1.1,0,0]]],XYZY:[[new rt(new Ua(.125,.125,.125),l.clone()),[0,1.1,0]]],XYZZ:[[new rt(new Ua(.125,.125,.125),l.clone()),[0,0,1.1]]]},Z={X:[[new rt(new os(.2,0,.8,4,1,!1),i),[.5,0,0],[0,0,-Math.PI/2]]],Y:[[new rt(new os(.2,0,.8,4,1,!1),i),[0,.5,0]]],Z:[[new rt(new os(.2,0,.8,4,1,!1),i),[0,0,.5],[Math.PI/2,0,0]]],XY:[[new rt(S,i),[.85,.85,0],null,[3,3,.2]]],YZ:[[new rt(S,i),[0,.85,.85],null,[.2,3,3]]],XZ:[[new rt(S,i),[.85,0,.85],null,[3,.2,3]]],XYZX:[[new rt(new Ua(.2,.2,.2),i),[1.1,0,0]]],XYZY:[[new rt(new Ua(.2,.2,.2),i),[0,1.1,0]]],XYZZ:[[new rt(new Ua(.2,.2,.2),i),[0,0,1.1]]]},G={X:[[new Yt(b,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new Yt(b,r.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new Yt(b,r.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},O=z=>{const Q=new hr;for(let H in z)for(let J=z[H].length;J--;){const j=z[H][J][0].clone(),oe=z[H][J][1],K=z[H][J][2],ce=z[H][J][3],he=z[H][J][4];j.name=H,j.tag=he,oe&&j.position.set(oe[0],oe[1],oe[2]),K&&j.rotation.set(K[0],K[1],K[2]),ce&&j.scale.set(ce[0],ce[1],ce[2]),j.updateMatrix();const ve=j.geometry.clone();ve.applyMatrix4(j.matrix),j.geometry=ve,j.renderOrder=1/0,j.position.set(0,0,0),j.rotation.set(0,0,0),j.scale.set(1,1,1),Q.add(j)}return Q};this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=O(B)),this.add(this.gizmo.rotate=O(U)),this.add(this.gizmo.scale=O(Y)),this.add(this.picker.translate=O(L)),this.add(this.picker.rotate=O(X)),this.add(this.picker.scale=O(Z)),this.add(this.helper.translate=O(F)),this.add(this.helper.rotate=O(k)),this.add(this.helper.scale=O(G)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}}class _pe extends rt{constructor(){super(new Ko(1e5,1e5,2,2),new qa({visible:!1,wireframe:!0,side:Po,transparent:!0,opacity:.1,toneMapped:!1})),D(this,"isTransformControlsPlane",!0),D(this,"type","TransformControlsPlane"),D(this,"unitX",new $(1,0,0)),D(this,"unitY",new $(0,1,0)),D(this,"unitZ",new $(0,0,1)),D(this,"tempVector",new $),D(this,"dirVector",new $),D(this,"alignVector",new $),D(this,"tempMatrix",new Ze),D(this,"identityQuaternion",new $t),D(this,"cameraQuaternion",new $t),D(this,"worldPosition",new $),D(this,"worldQuaternion",new $t),D(this,"eye",new $),D(this,"axis",null),D(this,"mode","translate"),D(this,"space","world"),D(this,"updateMatrixWorld",()=>{let e=this.space;switch(this.position.copy(this.worldPosition),this.mode==="scale"&&(e="local"),this.unitX.set(1,0,0).applyQuaternion(e==="local"?this.worldQuaternion:this.identityQuaternion),this.unitY.set(0,1,0).applyQuaternion(e==="local"?this.worldQuaternion:this.identityQuaternion),this.unitZ.set(0,0,1).applyQuaternion(e==="local"?this.worldQuaternion:this.identityQuaternion),this.alignVector.copy(this.unitY),this.mode){case"translate":case"scale":switch(this.axis){case"X":this.alignVector.copy(this.eye).cross(this.unitX),this.dirVector.copy(this.unitX).cross(this.alignVector);break;case"Y":this.alignVector.copy(this.eye).cross(this.unitY),this.dirVector.copy(this.unitY).cross(this.alignVector);break;case"Z":this.alignVector.copy(this.eye).cross(this.unitZ),this.dirVector.copy(this.unitZ).cross(this.alignVector);break;case"XY":this.dirVector.copy(this.unitZ);break;case"YZ":this.dirVector.copy(this.unitX);break;case"XZ":this.alignVector.copy(this.unitZ),this.dirVector.copy(this.unitY);break;case"XYZ":case"E":this.dirVector.set(0,0,0);break}break;case"rotate":default:this.dirVector.set(0,0,0)}this.dirVector.length()===0?this.quaternion.copy(this.cameraQuaternion):(this.tempMatrix.lookAt(this.tempVector.set(0,0,0),this.dirVector,this.alignVector),this.quaternion.setFromRotationMatrix(this.tempMatrix)),super.updateMatrixWorld()})}}class ype extends Dc{constructor(e,n){super(),D(this,"camera",void 0),D(this,"domElement",void 0),D(this,"isLocked",!1),D(this,"minPolarAngle",0),D(this,"maxPolarAngle",Math.PI),D(this,"changeEvent",{type:"change"}),D(this,"lockEvent",{type:"lock"}),D(this,"unlockEvent",{type:"unlock"}),D(this,"euler",new xo(0,0,0,"YXZ")),D(this,"PI_2",Math.PI/2),D(this,"vec",new $),D(this,"onMouseMove",i=>{if(!this.domElement||this.isLocked===!1)return;const r=i.movementX||i.mozMovementX||i.webkitMovementX||0,s=i.movementY||i.mozMovementY||i.webkitMovementY||0;this.euler.setFromQuaternion(this.camera.quaternion),this.euler.y-=r*.002,this.euler.x-=s*.002,this.euler.x=Math.max(this.PI_2-this.maxPolarAngle,Math.min(this.PI_2-this.minPolarAngle,this.euler.x)),this.camera.quaternion.setFromEuler(this.euler),this.dispatchEvent(this.changeEvent)}),D(this,"onPointerlockChange",()=>{!this.domElement||(this.domElement.ownerDocument.pointerLockElement===this.domElement?(this.dispatchEvent(this.lockEvent),this.isLocked=!0):(this.dispatchEvent(this.unlockEvent),this.isLocked=!1))}),D(this,"onPointerlockError",()=>{console.error("THREE.PointerLockControls: Unable to use Pointer Lock API")}),D(this,"connect",i=>{this.domElement=i||this.domElement,this.domElement&&(this.domElement.ownerDocument.addEventListener("mousemove",this.onMouseMove),this.domElement.ownerDocument.addEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this.onPointerlockError))}),D(this,"disconnect",()=>{!this.domElement||(this.domElement.ownerDocument.removeEventListener("mousemove",this.onMouseMove),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this.onPointerlockError))}),D(this,"dispose",()=>{this.disconnect()}),D(this,"getObject",()=>this.camera),D(this,"direction",new $(0,0,-1)),D(this,"getDirection",i=>i.copy(this.direction).applyQuaternion(this.camera.quaternion)),D(this,"moveForward",i=>{this.vec.setFromMatrixColumn(this.camera.matrix,0),this.vec.crossVectors(this.camera.up,this.vec),this.camera.position.addScaledVector(this.vec,i)}),D(this,"moveRight",i=>{this.vec.setFromMatrixColumn(this.camera.matrix,0),this.camera.position.addScaledVector(this.vec,i)}),D(this,"lock",()=>{!this.domElement||this.domElement.requestPointerLock()}),D(this,"unlock",()=>{!this.domElement||this.domElement.ownerDocument.exitPointerLock()}),this.domElement=n,this.camera=e,this.domElement&&this.connect(this.domElement)}}class xpe extends Dc{constructor(e){super(),D(this,"object",void 0),D(this,"changeEvent",{type:"change"}),D(this,"EPS",1e-6),D(this,"enabled",!0),D(this,"deviceOrientation",{alpha:0,beta:0,gamma:0}),D(this,"screenOrientation",0),D(this,"alphaOffset",0),D(this,"onDeviceOrientationChangeEvent",n=>{this.deviceOrientation=n}),D(this,"onScreenOrientationChangeEvent",()=>{this.screenOrientation=window.orientation||0}),D(this,"zee",new $(0,0,1)),D(this,"euler",new xo),D(this,"q0",new $t),D(this,"q1",new $t(-Math.sqrt(.5),0,0,Math.sqrt(.5))),D(this,"setObjectQuaternion",(n,i,r,s,o)=>{this.euler.set(r,i,-s,"YXZ"),n.setFromEuler(this.euler),n.multiply(this.q1),n.multiply(this.q0.setFromAxisAngle(this.zee,-o))}),D(this,"connect",()=>{this.onScreenOrientationChangeEvent(),window.DeviceOrientationEvent!==void 0&&typeof window.DeviceOrientationEvent.requestPermission=="function"?window.DeviceOrientationEvent.requestPermission().then(n=>{n=="granted"&&(window.addEventListener("orientationchange",this.onScreenOrientationChangeEvent),window.addEventListener("deviceorientation",this.onDeviceOrientationChangeEvent))}).catch(n=>{console.error("THREE.DeviceOrientationControls: Unable to use DeviceOrientation API:",n)}):(window.addEventListener("orientationchange",this.onScreenOrientationChangeEvent),window.addEventListener("deviceorientation",this.onDeviceOrientationChangeEvent)),this.enabled=!0}),D(this,"disconnect",()=>{window.removeEventListener("orientationchange",this.onScreenOrientationChangeEvent),window.removeEventListener("deviceorientation",this.onDeviceOrientationChangeEvent),this.enabled=!1}),D(this,"lastQuaternion",new $t),D(this,"update",()=>{if(this.enabled===!1)return;const n=this.deviceOrientation;if(n){const i=n.alpha?ct.degToRad(n.alpha)+this.alphaOffset:0,r=n.beta?ct.degToRad(n.beta):0,s=n.gamma?ct.degToRad(n.gamma):0,o=this.screenOrientation?ct.degToRad(this.screenOrientation):0;this.setObjectQuaternion(this.object.quaternion,i,r,s,o),8*(1-this.lastQuaternion.dot(this.object.quaternion))>this.EPS&&(this.lastQuaternion.copy(this.object.quaternion),this.dispatchEvent(this.changeEvent))}}),D(this,"dispose",()=>this.disconnect()),this.object=e,this.object.rotation.reorder("YXZ"),this.connect()}}class Epe extends Dc{constructor(e,n){super(),D(this,"enabled",!0),D(this,"screen",{left:0,top:0,width:0,height:0}),D(this,"rotateSpeed",1),D(this,"zoomSpeed",1.2),D(this,"panSpeed",.3),D(this,"noRotate",!1),D(this,"noZoom",!1),D(this,"noPan",!1),D(this,"staticMoving",!1),D(this,"dynamicDampingFactor",.2),D(this,"minDistance",0),D(this,"maxDistance",1/0),D(this,"keys",["KeyA","KeyS","KeyD"]),D(this,"mouseButtons",{LEFT:zs.ROTATE,MIDDLE:zs.DOLLY,RIGHT:zs.PAN}),D(this,"object",void 0),D(this,"domElement",void 0),D(this,"cursorZoom",!1),D(this,"target",new $),D(this,"mousePosition",new mt),D(this,"STATE",{NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4}),D(this,"EPS",1e-6),D(this,"lastZoom",1),D(this,"lastPosition",new $),D(this,"cursorVector",new $),D(this,"targetVector",new $),D(this,"_state",this.STATE.NONE),D(this,"_keyState",this.STATE.NONE),D(this,"_eye",new $),D(this,"_movePrev",new mt),D(this,"_moveCurr",new mt),D(this,"_lastAxis",new $),D(this,"_lastAngle",0),D(this,"_zoomStart",new mt),D(this,"_zoomEnd",new mt),D(this,"_touchZoomDistanceStart",0),D(this,"_touchZoomDistanceEnd",0),D(this,"_panStart",new mt),D(this,"_panEnd",new mt),D(this,"target0",void 0),D(this,"position0",void 0),D(this,"up0",void 0),D(this,"zoom0",void 0),D(this,"changeEvent",{type:"change"}),D(this,"startEvent",{type:"start"}),D(this,"endEvent",{type:"end"}),D(this,"onScreenVector",new mt),D(this,"getMouseOnScreen",(i,r)=>(this.onScreenVector.set((i-this.screen.left)/this.screen.width,(r-this.screen.top)/this.screen.height),this.onScreenVector)),D(this,"onCircleVector",new mt),D(this,"getMouseOnCircle",(i,r)=>(this.onCircleVector.set((i-this.screen.width*.5-this.screen.left)/(this.screen.width*.5),(this.screen.height+2*(this.screen.top-r))/this.screen.width),this.onCircleVector)),D(this,"axis",new $),D(this,"quaternion",new $t),D(this,"eyeDirection",new $),D(this,"objectUpDirection",new $),D(this,"objectSidewaysDirection",new $),D(this,"moveDirection",new $),D(this,"angle",0),D(this,"rotateCamera",()=>{this.moveDirection.set(this._moveCurr.x-this._movePrev.x,this._moveCurr.y-this._movePrev.y,0),this.angle=this.moveDirection.length(),this.angle?(this._eye.copy(this.object.position).sub(this.target),this.eyeDirection.copy(this._eye).normalize(),this.objectUpDirection.copy(this.object.up).normalize(),this.objectSidewaysDirection.crossVectors(this.objectUpDirection,this.eyeDirection).normalize(),this.objectUpDirection.setLength(this._moveCurr.y-this._movePrev.y),this.objectSidewaysDirection.setLength(this._moveCurr.x-this._movePrev.x),this.moveDirection.copy(this.objectUpDirection.add(this.objectSidewaysDirection)),this.axis.crossVectors(this.moveDirection,this._eye).normalize(),this.angle*=this.rotateSpeed,this.quaternion.setFromAxisAngle(this.axis,this.angle),this._eye.applyQuaternion(this.quaternion),this.object.up.applyQuaternion(this.quaternion),this._lastAxis.copy(this.axis),this._lastAngle=this.angle):!this.staticMoving&&this._lastAngle&&(this._lastAngle*=Math.sqrt(1-this.dynamicDampingFactor),this._eye.copy(this.object.position).sub(this.target),this.quaternion.setFromAxisAngle(this._lastAxis,this._lastAngle),this._eye.applyQuaternion(this.quaternion),this.object.up.applyQuaternion(this.quaternion)),this._movePrev.copy(this._moveCurr)}),D(this,"zoomCamera",()=>{let i;if(this._state===this.STATE.TOUCH_ZOOM_PAN)i=this._touchZoomDistanceStart/this._touchZoomDistanceEnd,this._touchZoomDistanceStart=this._touchZoomDistanceEnd,this.object.isPerspectiveCamera?this._eye.multiplyScalar(i):this.object.isOrthographicCamera?(this.object.zoom/=i,this.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type");else{if(i=1+(this._zoomEnd.y-this._zoomStart.y)*this.zoomSpeed,Math.abs(i-1)>this.EPS&&i>0&&(this.object.isPerspectiveCamera?(i>1&&this._eye.length()>=this.maxDistance-this.EPS&&(i=1),this._eye.multiplyScalar(i)):this.object.isOrthographicCamera?(i>1&&this.object.zoom<this.maxDistance*this.maxDistance&&(i=1),this.object.zoom/=i):console.warn("THREE.TrackballControls: Unsupported camera type")),this.staticMoving?this._zoomStart.copy(this._zoomEnd):this._zoomStart.y+=(this._zoomEnd.y-this._zoomStart.y)*this.dynamicDampingFactor,this.cursorZoom){this.targetVector.copy(this.target).project(this.object);let r=this.cursorVector.set(this.mousePosition.x,this.mousePosition.y,this.targetVector.z).unproject(this.object);this.target.lerpVectors(r,this.target,i)}this.object.isOrthographicCamera&&this.object.updateProjectionMatrix()}}),D(this,"mouseChange",new mt),D(this,"objectUp",new $),D(this,"pan",new $),D(this,"panCamera",()=>{if(!!this.domElement&&(this.mouseChange.copy(this._panEnd).sub(this._panStart),this.mouseChange.lengthSq()>this.EPS)){if(this.object.isOrthographicCamera){const i=this.object,r=(i.right-i.left)/this.object.zoom,s=(i.top-i.bottom)/this.object.zoom;this.mouseChange.x*=r,this.mouseChange.y*=s}else this.mouseChange.multiplyScalar(this._eye.length()*this.panSpeed);this.pan.copy(this._eye).cross(this.object.up).setLength(this.mouseChange.x),this.pan.add(this.objectUp.copy(this.object.up).setLength(this.mouseChange.y)),this.object.position.add(this.pan),this.target.add(this.pan),this.staticMoving?this._panStart.copy(this._panEnd):this._panStart.add(this.mouseChange.subVectors(this._panEnd,this._panStart).multiplyScalar(this.dynamicDampingFactor))}}),D(this,"checkDistances",()=>{(!this.noZoom||!this.noPan)&&(this._eye.lengthSq()>this.maxDistance*this.maxDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.maxDistance)),this._zoomStart.copy(this._zoomEnd)),this._eye.lengthSq()<this.minDistance*this.minDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.minDistance)),this._zoomStart.copy(this._zoomEnd)))}),D(this,"handleResize",()=>{if(!this.domElement)return;const i=this.domElement.getBoundingClientRect(),r=this.domElement.ownerDocument.documentElement;this.screen.left=i.left+window.pageXOffset-r.clientLeft,this.screen.top=i.top+window.pageYOffset-r.clientTop,this.screen.width=i.width,this.screen.height=i.height}),D(this,"update",()=>{this._eye.subVectors(this.object.position,this.target),this.noRotate||this.rotateCamera(),this.noZoom||this.zoomCamera(),this.noPan||this.panCamera(),this.object.position.addVectors(this.target,this._eye),this.object.isPerspectiveCamera?(this.checkDistances(),this.object.lookAt(this.target),this.lastPosition.distanceToSquared(this.object.position)>this.EPS&&(this.dispatchEvent(this.changeEvent),this.lastPosition.copy(this.object.position))):this.object.isOrthographicCamera?(this.object.lookAt(this.target),(this.lastPosition.distanceToSquared(this.object.position)>this.EPS||this.lastZoom!==this.object.zoom)&&(this.dispatchEvent(this.changeEvent),this.lastPosition.copy(this.object.position),this.lastZoom=this.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type")}),D(this,"reset",()=>{this._state=this.STATE.NONE,this._keyState=this.STATE.NONE,this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.up.copy(this.up0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this._eye.subVectors(this.object.position,this.target),this.object.lookAt(this.target),this.dispatchEvent(this.changeEvent),this.lastPosition.copy(this.object.position),this.lastZoom=this.object.zoom}),D(this,"keydown",i=>{this.enabled!==!1&&(window.removeEventListener("keydown",this.keydown),this._keyState===this.STATE.NONE&&(i.code===this.keys[this.STATE.ROTATE]&&!this.noRotate?this._keyState=this.STATE.ROTATE:i.code===this.keys[this.STATE.ZOOM]&&!this.noZoom?this._keyState=this.STATE.ZOOM:i.code===this.keys[this.STATE.PAN]&&!this.noPan&&(this._keyState=this.STATE.PAN)))}),D(this,"onPointerDown",i=>{if(this.enabled!==!1)switch(i.pointerType){case"mouse":case"pen":this.onMouseDown(i);break}}),D(this,"onPointerMove",i=>{if(this.enabled!==!1)switch(i.pointerType){case"mouse":case"pen":this.onMouseMove(i);break}}),D(this,"onPointerUp",i=>{if(this.enabled!==!1)switch(i.pointerType){case"mouse":case"pen":this.onMouseUp();break}}),D(this,"keyup",()=>{this.enabled!==!1&&(this._keyState=this.STATE.NONE,window.addEventListener("keydown",this.keydown))}),D(this,"onMouseDown",i=>{if(!this.domElement)return;if(this._state===this.STATE.NONE)switch(i.button){case this.mouseButtons.LEFT:this._state=this.STATE.ROTATE;break;case this.mouseButtons.MIDDLE:this._state=this.STATE.ZOOM;break;case this.mouseButtons.RIGHT:this._state=this.STATE.PAN;break;default:this._state=this.STATE.NONE}const r=this._keyState!==this.STATE.NONE?this._keyState:this._state;r===this.STATE.ROTATE&&!this.noRotate?(this._moveCurr.copy(this.getMouseOnCircle(i.pageX,i.pageY)),this._movePrev.copy(this._moveCurr)):r===this.STATE.ZOOM&&!this.noZoom?(this._zoomStart.copy(this.getMouseOnScreen(i.pageX,i.pageY)),this._zoomEnd.copy(this._zoomStart)):r===this.STATE.PAN&&!this.noPan&&(this._panStart.copy(this.getMouseOnScreen(i.pageX,i.pageY)),this._panEnd.copy(this._panStart)),this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),this.dispatchEvent(this.startEvent)}),D(this,"onMouseMove",i=>{if(this.enabled===!1)return;const r=this._keyState!==this.STATE.NONE?this._keyState:this._state;r===this.STATE.ROTATE&&!this.noRotate?(this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this.getMouseOnCircle(i.pageX,i.pageY))):r===this.STATE.ZOOM&&!this.noZoom?this._zoomEnd.copy(this.getMouseOnScreen(i.pageX,i.pageY)):r===this.STATE.PAN&&!this.noPan&&this._panEnd.copy(this.getMouseOnScreen(i.pageX,i.pageY))}),D(this,"onMouseUp",()=>{!this.domElement||this.enabled!==!1&&(this._state=this.STATE.NONE,this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),this.dispatchEvent(this.endEvent))}),D(this,"mousewheel",i=>{if(this.enabled!==!1&&this.noZoom!==!0){switch(i.preventDefault(),i.deltaMode){case 2:this._zoomStart.y-=i.deltaY*.025;break;case 1:this._zoomStart.y-=i.deltaY*.01;break;default:this._zoomStart.y-=i.deltaY*25e-5;break}this.mousePosition.x=i.offsetX/this.screen.width*2-1,this.mousePosition.y=-(i.offsetY/this.screen.height)*2+1,this.dispatchEvent(this.startEvent),this.dispatchEvent(this.endEvent)}}),D(this,"touchstart",i=>{if(this.enabled!==!1){switch(i.preventDefault(),i.touches.length){case 1:this._state=this.STATE.TOUCH_ROTATE,this._moveCurr.copy(this.getMouseOnCircle(i.touches[0].pageX,i.touches[0].pageY)),this._movePrev.copy(this._moveCurr);break;default:this._state=this.STATE.TOUCH_ZOOM_PAN;const r=i.touches[0].pageX-i.touches[1].pageX,s=i.touches[0].pageY-i.touches[1].pageY;this._touchZoomDistanceEnd=this._touchZoomDistanceStart=Math.sqrt(r*r+s*s);const o=(i.touches[0].pageX+i.touches[1].pageX)/2,a=(i.touches[0].pageY+i.touches[1].pageY)/2;this._panStart.copy(this.getMouseOnScreen(o,a)),this._panEnd.copy(this._panStart);break}this.dispatchEvent(this.startEvent)}}),D(this,"touchmove",i=>{if(this.enabled!==!1)switch(i.preventDefault(),i.touches.length){case 1:this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this.getMouseOnCircle(i.touches[0].pageX,i.touches[0].pageY));break;default:const r=i.touches[0].pageX-i.touches[1].pageX,s=i.touches[0].pageY-i.touches[1].pageY;this._touchZoomDistanceEnd=Math.sqrt(r*r+s*s);const o=(i.touches[0].pageX+i.touches[1].pageX)/2,a=(i.touches[0].pageY+i.touches[1].pageY)/2;this._panEnd.copy(this.getMouseOnScreen(o,a));break}}),D(this,"touchend",i=>{if(this.enabled!==!1){switch(i.touches.length){case 0:this._state=this.STATE.NONE;break;case 1:this._state=this.STATE.TOUCH_ROTATE,this._moveCurr.copy(this.getMouseOnCircle(i.touches[0].pageX,i.touches[0].pageY)),this._movePrev.copy(this._moveCurr);break}this.dispatchEvent(this.endEvent)}}),D(this,"contextmenu",i=>{this.enabled!==!1&&i.preventDefault()}),D(this,"connect",i=>{i===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.domElement=i,this.domElement.addEventListener("contextmenu",this.contextmenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("wheel",this.mousewheel),this.domElement.addEventListener("touchstart",this.touchstart),this.domElement.addEventListener("touchend",this.touchend),this.domElement.addEventListener("touchmove",this.touchmove),this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),window.addEventListener("keydown",this.keydown),window.addEventListener("keyup",this.keyup),this.handleResize()}),D(this,"dispose",()=>{!this.domElement||(this.domElement.removeEventListener("contextmenu",this.contextmenu),this.domElement.removeEventListener("pointerdown",this.onPointerDown),this.domElement.removeEventListener("wheel",this.mousewheel),this.domElement.removeEventListener("touchstart",this.touchstart),this.domElement.removeEventListener("touchend",this.touchend),this.domElement.removeEventListener("touchmove",this.touchmove),this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),window.removeEventListener("keydown",this.keydown),window.removeEventListener("keyup",this.keyup))}),this.object=e,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom,n!==void 0&&this.connect(n),this.update()}}const x4=(t,e)=>(t%e+e)%e;class YG extends Dc{constructor(e,n){super(),D(this,"object",void 0),D(this,"domElement",void 0),D(this,"enabled",!0),D(this,"target",new $),D(this,"minDistance",0),D(this,"maxDistance",1/0),D(this,"minZoom",0),D(this,"maxZoom",1/0),D(this,"minPolarAngle",0),D(this,"maxPolarAngle",Math.PI),D(this,"minAzimuthAngle",-1/0),D(this,"maxAzimuthAngle",1/0),D(this,"enableDamping",!1),D(this,"dampingFactor",.05),D(this,"enableZoom",!0),D(this,"zoomSpeed",1),D(this,"enableRotate",!0),D(this,"rotateSpeed",1),D(this,"enablePan",!0),D(this,"panSpeed",1),D(this,"screenSpacePanning",!0),D(this,"keyPanSpeed",7),D(this,"autoRotate",!1),D(this,"autoRotateSpeed",2),D(this,"reverseOrbit",!1),D(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),D(this,"mouseButtons",{LEFT:zs.ROTATE,MIDDLE:zs.DOLLY,RIGHT:zs.PAN}),D(this,"touches",{ONE:Ga.ROTATE,TWO:Ga.DOLLY_PAN}),D(this,"target0",void 0),D(this,"position0",void 0),D(this,"zoom0",void 0),D(this,"_domElementKeyEvents",null),D(this,"getPolarAngle",void 0),D(this,"getAzimuthalAngle",void 0),D(this,"setPolarAngle",void 0),D(this,"setAzimuthalAngle",void 0),D(this,"getDistance",void 0),D(this,"listenToKeyEvents",void 0),D(this,"saveState",void 0),D(this,"reset",void 0),D(this,"update",void 0),D(this,"connect",void 0),D(this,"dispose",void 0),this.object=e,this.domElement=n,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object instanceof Hr?this.object.zoom:1,this.getPolarAngle=()=>u.phi,this.getAzimuthalAngle=()=>u.theta,this.setPolarAngle=re=>{let ge=x4(re,2*Math.PI),Ce=u.phi;Ce<0&&(Ce+=2*Math.PI),ge<0&&(ge+=2*Math.PI);let Re=Math.abs(ge-Ce);2*Math.PI-Re<Re&&(ge<Ce?ge+=2*Math.PI:Ce+=2*Math.PI),h.phi=ge-Ce,i.update()},this.setAzimuthalAngle=re=>{let ge=x4(re,2*Math.PI),Ce=u.theta;Ce<0&&(Ce+=2*Math.PI),ge<0&&(ge+=2*Math.PI);let Re=Math.abs(ge-Ce);2*Math.PI-Re<Re&&(ge<Ce?ge+=2*Math.PI:Ce+=2*Math.PI),h.theta=ge-Ce,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=re=>{re.addEventListener("keydown",ie),this._domElementKeyEvents=re},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object instanceof Hr?i.object.zoom:1},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object instanceof Hr&&(i.object.zoom=i.zoom0,i.object.updateProjectionMatrix()),i.dispatchEvent(r),i.update(),l=a.NONE},this.update=(()=>{const re=new $,ge=new $t().setFromUnitVectors(e.up,new $(0,1,0)),Ce=ge.clone().invert(),Re=new $,Je=new $t,ae=2*Math.PI;return function(){const ze=i.object.position;re.copy(ze).sub(i.target),re.applyQuaternion(ge),u.setFromVector3(re),i.autoRotate&&l===a.NONE&&F(B()),i.enableDamping?(u.theta+=h.theta*i.dampingFactor,u.phi+=h.phi*i.dampingFactor):(u.theta+=h.theta,u.phi+=h.phi);let we=i.minAzimuthAngle,We=i.maxAzimuthAngle;return isFinite(we)&&isFinite(We)&&(we<-Math.PI?we+=ae:we>Math.PI&&(we-=ae),We<-Math.PI?We+=ae:We>Math.PI&&(We-=ae),we<=We?u.theta=Math.max(we,Math.min(We,u.theta)):u.theta=u.theta>(we+We)/2?Math.max(we,u.theta):Math.min(We,u.theta)),u.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,u.phi)),u.makeSafe(),u.radius*=f,u.radius=Math.max(i.minDistance,Math.min(i.maxDistance,u.radius)),i.enableDamping===!0?i.target.addScaledVector(d,i.dampingFactor):i.target.add(d),re.setFromSpherical(u),re.applyQuaternion(Ce),ze.copy(i.target).add(re),i.object.lookAt(i.target),i.enableDamping===!0?(h.theta*=1-i.dampingFactor,h.phi*=1-i.dampingFactor,d.multiplyScalar(1-i.dampingFactor)):(h.set(0,0,0),d.set(0,0,0)),f=1,p||Re.distanceToSquared(i.object.position)>c||8*(1-Je.dot(i.object.quaternion))>c?(i.dispatchEvent(r),Re.copy(i.object.position),Je.copy(i.object.quaternion),p=!1,!0):!1}})(),this.connect=re=>{re===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),i.domElement=re,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",Ge),i.domElement.addEventListener("pointerdown",Ke),i.domElement.addEventListener("pointercancel",He),i.domElement.addEventListener("wheel",W)},this.dispose=()=>{var re,ge,Ce,Re,Je,ae;(re=i.domElement)===null||re===void 0||re.removeEventListener("contextmenu",Ge),(ge=i.domElement)===null||ge===void 0||ge.removeEventListener("pointerdown",Ke),(Ce=i.domElement)===null||Ce===void 0||Ce.removeEventListener("pointercancel",He),(Re=i.domElement)===null||Re===void 0||Re.removeEventListener("wheel",W),(Je=i.domElement)===null||Je===void 0||Je.ownerDocument.removeEventListener("pointermove",xe),(ae=i.domElement)===null||ae===void 0||ae.ownerDocument.removeEventListener("pointerup",Ue),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",ie)};const i=this,r={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const c=1e-6,u=new Qm,h=new Qm;let f=1;const d=new $;let p=!1;const m=new mt,g=new mt,_=new mt,y=new mt,x=new mt,E=new mt,w=new mt,S=new mt,b=new mt,M=[],T={};function B(){return 2*Math.PI/60/60*i.autoRotateSpeed}function L(){return Math.pow(.95,i.zoomSpeed)}function F(re){i.reverseOrbit?h.theta+=re:h.theta-=re}function U(re){i.reverseOrbit?h.phi+=re:h.phi-=re}const k=(()=>{const re=new $;return function(Ce,Re){re.setFromMatrixColumn(Re,0),re.multiplyScalar(-Ce),d.add(re)}})(),X=(()=>{const re=new $;return function(Ce,Re){i.screenSpacePanning===!0?re.setFromMatrixColumn(Re,1):(re.setFromMatrixColumn(Re,0),re.crossVectors(i.object.up,re)),re.multiplyScalar(Ce),d.add(re)}})(),Y=(()=>{const re=new $;return function(Ce,Re){const Je=i.domElement;if(Je&&i.object instanceof Hr&&i.object.isPerspectiveCamera){const ae=i.object.position;re.copy(ae).sub(i.target);let qe=re.length();qe*=Math.tan(i.object.fov/2*Math.PI/180),k(2*Ce*qe/Je.clientHeight,i.object.matrix),X(2*Re*qe/Je.clientHeight,i.object.matrix)}else Je&&i.object instanceof ua&&i.object.isOrthographicCamera?(k(Ce*(i.object.right-i.object.left)/i.object.zoom/Je.clientWidth,i.object.matrix),X(Re*(i.object.top-i.object.bottom)/i.object.zoom/Je.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function Z(re){i.object instanceof Hr&&i.object.isPerspectiveCamera?f/=re:i.object instanceof ua&&i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom*re)),i.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function G(re){i.object instanceof Hr&&i.object.isPerspectiveCamera?f*=re:i.object instanceof ua&&i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/re)),i.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function O(re){m.set(re.clientX,re.clientY)}function z(re){w.set(re.clientX,re.clientY)}function Q(re){y.set(re.clientX,re.clientY)}function H(re){g.set(re.clientX,re.clientY),_.subVectors(g,m).multiplyScalar(i.rotateSpeed);const ge=i.domElement;ge&&(F(2*Math.PI*_.x/ge.clientHeight),U(2*Math.PI*_.y/ge.clientHeight)),m.copy(g),i.update()}function J(re){S.set(re.clientX,re.clientY),b.subVectors(S,w),b.y>0?Z(L()):b.y<0&&G(L()),w.copy(S),i.update()}function j(re){x.set(re.clientX,re.clientY),E.subVectors(x,y).multiplyScalar(i.panSpeed),Y(E.x,E.y),y.copy(x),i.update()}function oe(re){re.deltaY<0?G(L()):re.deltaY>0&&Z(L()),i.update()}function K(re){let ge=!1;switch(re.code){case i.keys.UP:Y(0,i.keyPanSpeed),ge=!0;break;case i.keys.BOTTOM:Y(0,-i.keyPanSpeed),ge=!0;break;case i.keys.LEFT:Y(i.keyPanSpeed,0),ge=!0;break;case i.keys.RIGHT:Y(-i.keyPanSpeed,0),ge=!0;break}ge&&(re.preventDefault(),i.update())}function ce(){if(M.length==1)m.set(M[0].pageX,M[0].pageY);else{const re=.5*(M[0].pageX+M[1].pageX),ge=.5*(M[0].pageY+M[1].pageY);m.set(re,ge)}}function he(){if(M.length==1)y.set(M[0].pageX,M[0].pageY);else{const re=.5*(M[0].pageX+M[1].pageX),ge=.5*(M[0].pageY+M[1].pageY);y.set(re,ge)}}function ve(){const re=M[0].pageX-M[1].pageX,ge=M[0].pageY-M[1].pageY,Ce=Math.sqrt(re*re+ge*ge);w.set(0,Ce)}function Me(){i.enableZoom&&ve(),i.enablePan&&he()}function Se(){i.enableZoom&&ve(),i.enableRotate&&ce()}function le(re){if(M.length==1)g.set(re.pageX,re.pageY);else{const Ce=je(re),Re=.5*(re.pageX+Ce.x),Je=.5*(re.pageY+Ce.y);g.set(Re,Je)}_.subVectors(g,m).multiplyScalar(i.rotateSpeed);const ge=i.domElement;ge&&(F(2*Math.PI*_.x/ge.clientHeight),U(2*Math.PI*_.y/ge.clientHeight)),m.copy(g)}function pe(re){if(M.length==1)x.set(re.pageX,re.pageY);else{const ge=je(re),Ce=.5*(re.pageX+ge.x),Re=.5*(re.pageY+ge.y);x.set(Ce,Re)}E.subVectors(x,y).multiplyScalar(i.panSpeed),Y(E.x,E.y),y.copy(x)}function Pe(re){const ge=je(re),Ce=re.pageX-ge.x,Re=re.pageY-ge.y,Je=Math.sqrt(Ce*Ce+Re*Re);S.set(0,Je),b.set(0,Math.pow(S.y/w.y,i.zoomSpeed)),Z(b.y),w.copy(S)}function Oe(re){i.enableZoom&&Pe(re),i.enablePan&&pe(re)}function ke(re){i.enableZoom&&Pe(re),i.enableRotate&&le(re)}function Ke(re){if(i.enabled!==!1){if(M.length===0){var ge,Ce;(ge=i.domElement)===null||ge===void 0||ge.ownerDocument.addEventListener("pointermove",xe),(Ce=i.domElement)===null||Ce===void 0||Ce.ownerDocument.addEventListener("pointerup",Ue)}Ie(re),re.pointerType==="touch"?fe(re):be(re)}}function xe(re){i.enabled!==!1&&(re.pointerType==="touch"?_e(re):q(re))}function Ue(re){if(Le(re),M.length===0){var ge,Ce,Re;(ge=i.domElement)===null||ge===void 0||ge.releasePointerCapture(re.pointerId),(Ce=i.domElement)===null||Ce===void 0||Ce.ownerDocument.removeEventListener("pointermove",xe),(Re=i.domElement)===null||Re===void 0||Re.ownerDocument.removeEventListener("pointerup",Ue)}i.dispatchEvent(o),l=a.NONE}function He(re){Le(re)}function be(re){let ge;switch(re.button){case 0:ge=i.mouseButtons.LEFT;break;case 1:ge=i.mouseButtons.MIDDLE;break;case 2:ge=i.mouseButtons.RIGHT;break;default:ge=-1}switch(ge){case zs.DOLLY:if(i.enableZoom===!1)return;z(re),l=a.DOLLY;break;case zs.ROTATE:if(re.ctrlKey||re.metaKey||re.shiftKey){if(i.enablePan===!1)return;Q(re),l=a.PAN}else{if(i.enableRotate===!1)return;O(re),l=a.ROTATE}break;case zs.PAN:if(re.ctrlKey||re.metaKey||re.shiftKey){if(i.enableRotate===!1)return;O(re),l=a.ROTATE}else{if(i.enablePan===!1)return;Q(re),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function q(re){if(i.enabled!==!1)switch(l){case a.ROTATE:if(i.enableRotate===!1)return;H(re);break;case a.DOLLY:if(i.enableZoom===!1)return;J(re);break;case a.PAN:if(i.enablePan===!1)return;j(re);break}}function W(re){i.enabled===!1||i.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(re.preventDefault(),i.dispatchEvent(s),oe(re),i.dispatchEvent(o))}function ie(re){i.enabled===!1||i.enablePan===!1||K(re)}function fe(re){switch(ye(re),M.length){case 1:switch(i.touches.ONE){case Ga.ROTATE:if(i.enableRotate===!1)return;ce(),l=a.TOUCH_ROTATE;break;case Ga.PAN:if(i.enablePan===!1)return;he(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(i.touches.TWO){case Ga.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Me(),l=a.TOUCH_DOLLY_PAN;break;case Ga.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Se(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function _e(re){switch(ye(re),l){case a.TOUCH_ROTATE:if(i.enableRotate===!1)return;le(re),i.update();break;case a.TOUCH_PAN:if(i.enablePan===!1)return;pe(re),i.update();break;case a.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Oe(re),i.update();break;case a.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;ke(re),i.update();break;default:l=a.NONE}}function Ge(re){i.enabled!==!1&&re.preventDefault()}function Ie(re){M.push(re)}function Le(re){delete T[re.pointerId];for(let ge=0;ge<M.length;ge++)if(M[ge].pointerId==re.pointerId){M.splice(ge,1);return}}function ye(re){let ge=T[re.pointerId];ge===void 0&&(ge=new mt,T[re.pointerId]=ge),ge.set(re.pageX,re.pageY)}function je(re){const ge=re.pointerId===M[0].pointerId?M[1]:M[0];return T[ge.pointerId]}n!==void 0&&this.connect(n),this.update()}}class wpe extends YG{constructor(e,n){super(e,n),this.screenSpacePanning=!1,this.mouseButtons.LEFT=zs.PAN,this.mouseButtons.RIGHT=zs.ROTATE,this.touches.ONE=Ga.PAN,this.touches.TWO=Ga.DOLLY_ROTATE}}const gt={IDLE:Symbol(),ROTATE:Symbol(),PAN:Symbol(),SCALE:Symbol(),FOV:Symbol(),FOCUS:Symbol(),ZROTATE:Symbol(),TOUCH_MULTI:Symbol(),ANIMATION_FOCUS:Symbol(),ANIMATION_ROTATE:Symbol()},mn={NONE:Symbol(),ONE_FINGER:Symbol(),ONE_FINGER_SWITCHED:Symbol(),TWO_FINGER:Symbol(),MULT_FINGER:Symbol(),CURSOR:Symbol()},Ft={x:0,y:0},ss={camera:new Ze,gizmos:new Ze},Mn={type:"change"},uo={type:"start"},Ls={type:"end"};class Mpe extends Dc{constructor(e,n=null,i=null){super(),D(this,"camera",void 0),D(this,"domElement",void 0),D(this,"scene",void 0),D(this,"mouseActions",void 0),D(this,"_mouseOp",void 0),D(this,"_v2_1",void 0),D(this,"_v3_1",void 0),D(this,"_v3_2",void 0),D(this,"_m4_1",void 0),D(this,"_m4_2",void 0),D(this,"_quat",void 0),D(this,"_translationMatrix",void 0),D(this,"_rotationMatrix",void 0),D(this,"_scaleMatrix",void 0),D(this,"_rotationAxis",void 0),D(this,"_cameraMatrixState",void 0),D(this,"_cameraProjectionState",void 0),D(this,"_fovState",void 0),D(this,"_upState",void 0),D(this,"_zoomState",void 0),D(this,"_nearPos",void 0),D(this,"_farPos",void 0),D(this,"_gizmoMatrixState",void 0),D(this,"_up0",void 0),D(this,"_zoom0",void 0),D(this,"_fov0",void 0),D(this,"_initialNear",void 0),D(this,"_nearPos0",void 0),D(this,"_initialFar",void 0),D(this,"_farPos0",void 0),D(this,"_cameraMatrixState0",void 0),D(this,"_gizmoMatrixState0",void 0),D(this,"_button",void 0),D(this,"_touchStart",void 0),D(this,"_touchCurrent",void 0),D(this,"_input",void 0),D(this,"_switchSensibility",void 0),D(this,"_startFingerDistance",void 0),D(this,"_currentFingerDistance",void 0),D(this,"_startFingerRotation",void 0),D(this,"_currentFingerRotation",void 0),D(this,"_devPxRatio",void 0),D(this,"_downValid",void 0),D(this,"_nclicks",void 0),D(this,"_downEvents",void 0),D(this,"_clickStart",void 0),D(this,"_maxDownTime",void 0),D(this,"_maxInterval",void 0),D(this,"_posThreshold",void 0),D(this,"_movementThreshold",void 0),D(this,"_currentCursorPosition",void 0),D(this,"_startCursorPosition",void 0),D(this,"_grid",void 0),D(this,"_gridPosition",void 0),D(this,"_gizmos",void 0),D(this,"_curvePts",void 0),D(this,"_timeStart",void 0),D(this,"_animationId",void 0),D(this,"focusAnimationTime",void 0),D(this,"_timePrev",void 0),D(this,"_timeCurrent",void 0),D(this,"_anglePrev",void 0),D(this,"_angleCurrent",void 0),D(this,"_cursorPosPrev",void 0),D(this,"_cursorPosCurr",void 0),D(this,"_wPrev",void 0),D(this,"_wCurr",void 0),D(this,"adjustNearFar",void 0),D(this,"scaleFactor",void 0),D(this,"dampingFactor",void 0),D(this,"wMax",void 0),D(this,"enableAnimations",void 0),D(this,"enableGrid",void 0),D(this,"cursorZoom",void 0),D(this,"minFov",void 0),D(this,"maxFov",void 0),D(this,"enabled",void 0),D(this,"enablePan",void 0),D(this,"enableRotate",void 0),D(this,"enableZoom",void 0),D(this,"minDistance",void 0),D(this,"maxDistance",void 0),D(this,"minZoom",void 0),D(this,"maxZoom",void 0),D(this,"target",void 0),D(this,"_currentTarget",void 0),D(this,"_tbRadius",void 0),D(this,"_state",void 0),D(this,"onWindowResize",()=>{const r=(this._gizmos.scale.x+this._gizmos.scale.y+this._gizmos.scale.z)/3;if(this.camera){const c=this.calculateTbRadius(this.camera);c!==void 0&&(this._tbRadius=c)}const s=this._tbRadius/r,a=new zv(0,0,s,s).getPoints(this._curvePts),l=new ri().setFromPoints(a);for(const c in this._gizmos.children){const u=this._gizmos.children[c];u.geometry=l}this.dispatchEvent(Mn)}),D(this,"onContextMenu",r=>{if(!!this.enabled){for(let s=0;s<this.mouseActions.length;s++)if(this.mouseActions[s].mouse==2){r.preventDefault();break}}}),D(this,"onPointerCancel",()=>{this._touchStart.splice(0,this._touchStart.length),this._touchCurrent.splice(0,this._touchCurrent.length),this._input=mn.NONE}),D(this,"onPointerDown",r=>{if(r.button==0&&r.isPrimary?(this._downValid=!0,this._downEvents.push(r)):this._downValid=!1,r.pointerType=="touch"&&this._input!=mn.CURSOR)switch(this._touchStart.push(r),this._touchCurrent.push(r),this._input){case mn.NONE:this._input=mn.ONE_FINGER,this.onSinglePanStart(r,"ROTATE"),window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("pointerup",this.onPointerUp);break;case mn.ONE_FINGER:case mn.ONE_FINGER_SWITCHED:this._input=mn.TWO_FINGER,this.onRotateStart(),this.onPinchStart(),this.onDoublePanStart();break;case mn.TWO_FINGER:this._input=mn.MULT_FINGER,this.onTriplePanStart();break}else if(r.pointerType!="touch"&&this._input==mn.NONE){let s=null;r.ctrlKey||r.metaKey?s="CTRL":r.shiftKey&&(s="SHIFT"),this._mouseOp=this.getOpFromAction(r.button,s),this._mouseOp&&(window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("pointerup",this.onPointerUp),this._input=mn.CURSOR,this._button=r.button,this.onSinglePanStart(r,this._mouseOp))}}),D(this,"onPointerMove",r=>{if(r.pointerType=="touch"&&this._input!=mn.CURSOR)switch(this._input){case mn.ONE_FINGER:this.updateTouchEvent(r),this.onSinglePanMove(r,gt.ROTATE);break;case mn.ONE_FINGER_SWITCHED:if(this.calculatePointersDistance(this._touchCurrent[0],r)*this._devPxRatio>=this._switchSensibility){this._input=mn.ONE_FINGER,this.updateTouchEvent(r),this.onSinglePanStart(r,"ROTATE");break}break;case mn.TWO_FINGER:this.updateTouchEvent(r),this.onRotateMove(),this.onPinchMove(),this.onDoublePanMove();break;case mn.MULT_FINGER:this.updateTouchEvent(r),this.onTriplePanMove();break}else if(r.pointerType!="touch"&&this._input==mn.CURSOR){let s=null;r.ctrlKey||r.metaKey?s="CTRL":r.shiftKey&&(s="SHIFT");const o=this.getOpStateFromAction(this._button,s);o&&this.onSinglePanMove(r,o)}this._downValid&&this.calculatePointersDistance(this._downEvents[this._downEvents.length-1],r)*this._devPxRatio>this._movementThreshold&&(this._downValid=!1)}),D(this,"onPointerUp",r=>{if(r.pointerType=="touch"&&this._input!=mn.CURSOR){const s=this._touchCurrent.length;for(let o=0;o<s;o++)if(this._touchCurrent[o].pointerId==r.pointerId){this._touchCurrent.splice(o,1),this._touchStart.splice(o,1);break}switch(this._input){case mn.ONE_FINGER:case mn.ONE_FINGER_SWITCHED:window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),this._input=mn.NONE,this.onSinglePanEnd();break;case mn.TWO_FINGER:this.onDoublePanEnd(),this.onPinchEnd(),this.onRotateEnd(),this._input=mn.ONE_FINGER_SWITCHED;break;case mn.MULT_FINGER:this._touchCurrent.length==0&&(window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),this._input=mn.NONE,this.onTriplePanEnd());break}}else r.pointerType!="touch"&&this._input==mn.CURSOR&&(window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),this._input=mn.NONE,this.onSinglePanEnd(),this._button=-1);if(r.isPrimary)if(this._downValid)if(r.timeStamp-this._downEvents[this._downEvents.length-1].timeStamp<=this._maxDownTime)if(this._nclicks==0)this._nclicks=1,this._clickStart=performance.now();else{const o=r.timeStamp-this._clickStart,a=this.calculatePointersDistance(this._downEvents[1],this._downEvents[0])*this._devPxRatio;o<=this._maxInterval&&a<=this._posThreshold?(this._nclicks=0,this._downEvents.splice(0,this._downEvents.length),this.onDoubleTap(r)):(this._nclicks=1,this._downEvents.shift(),this._clickStart=performance.now())}else this._downValid=!1,this._nclicks=0,this._downEvents.splice(0,this._downEvents.length);else this._nclicks=0,this._downEvents.splice(0,this._downEvents.length)}),D(this,"onWheel",r=>{var s;if(this.enabled&&this.enableZoom&&this.domElement){let u=null;r.ctrlKey||r.metaKey?u="CTRL":r.shiftKey&&(u="SHIFT");const h=this.getOpFromAction("WHEEL",u);if(h){r.preventDefault(),this.dispatchEvent(uo);const f=125;let d=r.deltaY/f,p=1;switch(d>0?p=1/this.scaleFactor:d<0&&(p=this.scaleFactor),h){case"ZOOM":if(this.updateTbState(gt.SCALE,!0),d>0?p=1/Math.pow(this.scaleFactor,d):d<0&&(p=Math.pow(this.scaleFactor,-d)),this.cursorZoom&&this.enablePan){var o,a;let m;if(((o=this.camera)===null||o===void 0?void 0:o.type)==="OrthographicCamera"){var l;m=(l=this.unprojectOnTbPlane(this.camera,r.clientX,r.clientY,this.domElement))===null||l===void 0?void 0:l.applyQuaternion(this.camera.quaternion).multiplyScalar(1/this.camera.zoom).add(this._gizmos.position)}if(((a=this.camera)===null||a===void 0?void 0:a.type)==="PerspectiveCamera"){var c;m=(c=this.unprojectOnTbPlane(this.camera,r.clientX,r.clientY,this.domElement))===null||c===void 0?void 0:c.applyQuaternion(this.camera.quaternion).add(this._gizmos.position)}m!==void 0&&this.applyTransformMatrix(this.applyScale(p,m))}else this.applyTransformMatrix(this.applyScale(p,this._gizmos.position));this._grid&&(this.disposeGrid(),this.drawGrid()),this.updateTbState(gt.IDLE,!1),this.dispatchEvent(Mn),this.dispatchEvent(Ls);break;case"FOV":if(((s=this.camera)===null||s===void 0?void 0:s.type)==="PerspectiveCamera"){this.updateTbState(gt.FOV,!0),r.deltaX!=0&&(d=r.deltaX/f,p=1,d>0?p=1/Math.pow(this.scaleFactor,d):d<0&&(p=Math.pow(this.scaleFactor,-d))),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);const m=this._v3_1.distanceTo(this._gizmos.position);let g=m/p;g=ct.clamp(g,this.minDistance,this.maxDistance);const _=m*Math.tan(ct.DEG2RAD*this.camera.fov*.5);let y=ct.RAD2DEG*(Math.atan(_/g)*2);y>this.maxFov?y=this.maxFov:y<this.minFov&&(y=this.minFov);const x=_/Math.tan(ct.DEG2RAD*(y/2));p=m/x,this.setFov(y),this.applyTransformMatrix(this.applyScale(p,this._gizmos.position,!1))}this._grid&&(this.disposeGrid(),this.drawGrid()),this.updateTbState(gt.IDLE,!1),this.dispatchEvent(Mn),this.dispatchEvent(Ls);break}}}}),D(this,"onSinglePanStart",(r,s)=>{var o;if(this.enabled&&this.domElement)switch(this.dispatchEvent(uo),this.setCenter(r.clientX,r.clientY),s){case"PAN":if(!this.enablePan)return;if(this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(Mn)),this.camera){this.updateTbState(gt.PAN,!0);const a=this.unprojectOnTbPlane(this.camera,Ft.x,Ft.y,this.domElement);a!==void 0&&this._startCursorPosition.copy(a),this.enableGrid&&(this.drawGrid(),this.dispatchEvent(Mn))}break;case"ROTATE":if(!this.enableRotate)return;if(this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1),this.camera){this.updateTbState(gt.ROTATE,!0);const a=this.unprojectOnTbSurface(this.camera,Ft.x,Ft.y,this.domElement,this._tbRadius);a!==void 0&&this._startCursorPosition.copy(a),this.activateGizmos(!0),this.enableAnimations&&(this._timePrev=this._timeCurrent=performance.now(),this._angleCurrent=this._anglePrev=0,this._cursorPosPrev.copy(this._startCursorPosition),this._cursorPosCurr.copy(this._cursorPosPrev),this._wCurr=0,this._wPrev=this._wCurr)}this.dispatchEvent(Mn);break;case"FOV":if(!this.enableZoom)return;((o=this.camera)===null||o===void 0?void 0:o.type)==="PerspectiveCamera"&&(this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(Mn)),this.updateTbState(gt.FOV,!0),this._startCursorPosition.setY(this.getCursorNDC(Ft.x,Ft.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition));break;case"ZOOM":if(!this.enableZoom)return;this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(Mn)),this.updateTbState(gt.SCALE,!0),this._startCursorPosition.setY(this.getCursorNDC(Ft.x,Ft.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition);break}}),D(this,"onSinglePanMove",(r,s)=>{var o;if(this.enabled&&this.domElement){const a=s!=this._state;switch(this.setCenter(r.clientX,r.clientY),s){case gt.PAN:if(this.enablePan&&this.camera)if(a){this.dispatchEvent(Ls),this.dispatchEvent(uo),this.updateTbState(s,!0);const l=this.unprojectOnTbPlane(this.camera,Ft.x,Ft.y,this.domElement);l!==void 0&&this._startCursorPosition.copy(l),this.enableGrid&&this.drawGrid(),this.activateGizmos(!1)}else{const l=this.unprojectOnTbPlane(this.camera,Ft.x,Ft.y,this.domElement);l!==void 0&&this._currentCursorPosition.copy(l),this.applyTransformMatrix(this.pan(this._startCursorPosition,this._currentCursorPosition))}break;case gt.ROTATE:if(this.enableRotate&&this.camera)if(a){this.dispatchEvent(Ls),this.dispatchEvent(uo),this.updateTbState(s,!0);const l=this.unprojectOnTbSurface(this.camera,Ft.x,Ft.y,this.domElement,this._tbRadius);l!==void 0&&this._startCursorPosition.copy(l),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!0)}else{const l=this.unprojectOnTbSurface(this.camera,Ft.x,Ft.y,this.domElement,this._tbRadius);l!==void 0&&this._currentCursorPosition.copy(l);const c=this._startCursorPosition.distanceTo(this._currentCursorPosition),u=this._startCursorPosition.angleTo(this._currentCursorPosition),h=Math.max(c/this._tbRadius,u);this.applyTransformMatrix(this.rotate(this.calculateRotationAxis(this._startCursorPosition,this._currentCursorPosition),h)),this.enableAnimations&&(this._timePrev=this._timeCurrent,this._timeCurrent=performance.now(),this._anglePrev=this._angleCurrent,this._angleCurrent=h,this._cursorPosPrev.copy(this._cursorPosCurr),this._cursorPosCurr.copy(this._currentCursorPosition),this._wPrev=this._wCurr,this._wCurr=this.calculateAngularSpeed(this._anglePrev,this._angleCurrent,this._timePrev,this._timeCurrent))}break;case gt.SCALE:if(this.enableZoom)if(a)this.dispatchEvent(Ls),this.dispatchEvent(uo),this.updateTbState(s,!0),this._startCursorPosition.setY(this.getCursorNDC(Ft.x,Ft.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1);else{this._currentCursorPosition.setY(this.getCursorNDC(Ft.x,Ft.y,this.domElement).y*.5);const c=this._currentCursorPosition.y-this._startCursorPosition.y;let u=1;c<0?u=1/Math.pow(this.scaleFactor,-c*8):c>0&&(u=Math.pow(this.scaleFactor,c*8)),this.applyTransformMatrix(this.applyScale(u,this._gizmos.position))}break;case gt.FOV:if(this.enableZoom&&((o=this.camera)===null||o===void 0?void 0:o.type)==="PerspectiveCamera")if(a)this.dispatchEvent(Ls),this.dispatchEvent(uo),this.updateTbState(s,!0),this._startCursorPosition.setY(this.getCursorNDC(Ft.x,Ft.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1);else{this._currentCursorPosition.setY(this.getCursorNDC(Ft.x,Ft.y,this.domElement).y*.5);const c=this._currentCursorPosition.y-this._startCursorPosition.y;let u=1;c<0?u=1/Math.pow(this.scaleFactor,-c*8):c>0&&(u=Math.pow(this.scaleFactor,c*8)),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);const h=this._v3_1.distanceTo(this._gizmos.position);let f=h/u;f=ct.clamp(f,this.minDistance,this.maxDistance);const d=h*Math.tan(ct.DEG2RAD*this._fovState*.5);let p=ct.RAD2DEG*(Math.atan(d/f)*2);p=ct.clamp(p,this.minFov,this.maxFov);const m=d/Math.tan(ct.DEG2RAD*(p/2));u=h/m,this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),this.setFov(p),this.applyTransformMatrix(this.applyScale(u,this._v3_2,!1));const g=this._gizmos.position.clone().sub(this.camera.position).normalize().multiplyScalar(m/h);this._m4_1.makeTranslation(g.x,g.y,g.z)}break}this.dispatchEvent(Mn)}}),D(this,"onSinglePanEnd",()=>{if(this._state==gt.ROTATE){if(!this.enableRotate)return;if(this.enableAnimations)if(performance.now()-this._timeCurrent<120){const s=Math.abs((this._wPrev+this._wCurr)/2),o=this;this._animationId=window.requestAnimationFrame(function(a){o.updateTbState(gt.ANIMATION_ROTATE,!0);const l=o.calculateRotationAxis(o._cursorPosPrev,o._cursorPosCurr);o.onRotationAnim(a,l,Math.min(s,o.wMax))})}else this.updateTbState(gt.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(Mn);else this.updateTbState(gt.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(Mn)}else(this._state==gt.PAN||this._state==gt.IDLE)&&(this.updateTbState(gt.IDLE,!1),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1),this.dispatchEvent(Mn));this.dispatchEvent(Ls)}),D(this,"onDoubleTap",r=>{if(this.enabled&&this.enablePan&&this.scene&&this.camera&&this.domElement){this.dispatchEvent(uo),this.setCenter(r.clientX,r.clientY);const s=this.unprojectOnObj(this.getCursorNDC(Ft.x,Ft.y,this.domElement),this.camera);if(s&&this.enableAnimations){const o=this;this._animationId!=-1&&window.cancelAnimationFrame(this._animationId),this._timeStart=-1,this._animationId=window.requestAnimationFrame(function(a){o.updateTbState(gt.ANIMATION_FOCUS,!0),o.onFocusAnim(a,s,o._cameraMatrixState,o._gizmoMatrixState)})}else s&&!this.enableAnimations&&(this.updateTbState(gt.FOCUS,!0),this.focus(s,this.scaleFactor),this.updateTbState(gt.IDLE,!1),this.dispatchEvent(Mn))}this.dispatchEvent(Ls)}),D(this,"onDoublePanStart",()=>{if(this.enabled&&this.enablePan&&this.camera&&this.domElement){this.dispatchEvent(uo),this.updateTbState(gt.PAN,!0),this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2);const r=this.unprojectOnTbPlane(this.camera,Ft.x,Ft.y,this.domElement,!0);r!==void 0&&this._startCursorPosition.copy(r),this._currentCursorPosition.copy(this._startCursorPosition),this.activateGizmos(!1)}}),D(this,"onDoublePanMove",()=>{if(this.enabled&&this.enablePan&&this.camera&&this.domElement){this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2),this._state!=gt.PAN&&(this.updateTbState(gt.PAN,!0),this._startCursorPosition.copy(this._currentCursorPosition));const r=this.unprojectOnTbPlane(this.camera,Ft.x,Ft.y,this.domElement,!0);r!==void 0&&this._currentCursorPosition.copy(r),this.applyTransformMatrix(this.pan(this._startCursorPosition,this._currentCursorPosition,!0)),this.dispatchEvent(Mn)}}),D(this,"onDoublePanEnd",()=>{this.updateTbState(gt.IDLE,!1),this.dispatchEvent(Ls)}),D(this,"onRotateStart",()=>{if(this.enabled&&this.enableRotate){var r;this.dispatchEvent(uo),this.updateTbState(gt.ZROTATE,!0),this._startFingerRotation=this.getAngle(this._touchCurrent[1],this._touchCurrent[0])+this.getAngle(this._touchStart[1],this._touchStart[0]),this._currentFingerRotation=this._startFingerRotation,(r=this.camera)===null||r===void 0||r.getWorldDirection(this._rotationAxis),!this.enablePan&&!this.enableZoom&&this.activateGizmos(!0)}}),D(this,"onRotateMove",()=>{if(this.enabled&&this.enableRotate&&this.camera&&this.domElement){this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2);let s;if(this._state!=gt.ZROTATE&&(this.updateTbState(gt.ZROTATE,!0),this._startFingerRotation=this._currentFingerRotation),this._currentFingerRotation=this.getAngle(this._touchCurrent[1],this._touchCurrent[0])+this.getAngle(this._touchStart[1],this._touchStart[0]),!this.enablePan)s=new $().setFromMatrixPosition(this._gizmoMatrixState);else if(this.camera){var r;this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),s=(r=this.unprojectOnTbPlane(this.camera,Ft.x,Ft.y,this.domElement))===null||r===void 0?void 0:r.applyQuaternion(this.camera.quaternion).multiplyScalar(1/this.camera.zoom).add(this._v3_2)}const o=ct.DEG2RAD*(this._startFingerRotation-this._currentFingerRotation);s!==void 0&&this.applyTransformMatrix(this.zRotate(s,o)),this.dispatchEvent(Mn)}}),D(this,"onRotateEnd",()=>{this.updateTbState(gt.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(Ls)}),D(this,"onPinchStart",()=>{this.enabled&&this.enableZoom&&(this.dispatchEvent(uo),this.updateTbState(gt.SCALE,!0),this._startFingerDistance=this.calculatePointersDistance(this._touchCurrent[0],this._touchCurrent[1]),this._currentFingerDistance=this._startFingerDistance,this.activateGizmos(!1))}),D(this,"onPinchMove",()=>{if(this.enabled&&this.enableZoom&&this.domElement){this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2);const l=12;this._state!=gt.SCALE&&(this._startFingerDistance=this._currentFingerDistance,this.updateTbState(gt.SCALE,!0)),this._currentFingerDistance=Math.max(this.calculatePointersDistance(this._touchCurrent[0],this._touchCurrent[1]),l*this._devPxRatio);const c=this._currentFingerDistance/this._startFingerDistance;let u;if(!this.enablePan)u=this._gizmos.position;else{var r,s;if(((r=this.camera)===null||r===void 0?void 0:r.type)==="OrthographicCamera"){var o;u=(o=this.unprojectOnTbPlane(this.camera,Ft.x,Ft.y,this.domElement))===null||o===void 0?void 0:o.applyQuaternion(this.camera.quaternion).multiplyScalar(1/this.camera.zoom).add(this._gizmos.position)}else if(((s=this.camera)===null||s===void 0?void 0:s.type)==="PerspectiveCamera"){var a;u=(a=this.unprojectOnTbPlane(this.camera,Ft.x,Ft.y,this.domElement))===null||a===void 0?void 0:a.applyQuaternion(this.camera.quaternion).add(this._gizmos.position)}}u!==void 0&&this.applyTransformMatrix(this.applyScale(c,u)),this.dispatchEvent(Mn)}}),D(this,"onPinchEnd",()=>{this.updateTbState(gt.IDLE,!1),this.dispatchEvent(Ls)}),D(this,"onTriplePanStart",()=>{if(this.enabled&&this.enableZoom&&this.domElement){this.dispatchEvent(uo),this.updateTbState(gt.SCALE,!0);let r=0,s=0;const o=this._touchCurrent.length;for(let a=0;a<o;a++)r+=this._touchCurrent[a].clientX,s+=this._touchCurrent[a].clientY;this.setCenter(r/o,s/o),this._startCursorPosition.setY(this.getCursorNDC(Ft.x,Ft.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition)}}),D(this,"onTriplePanMove",()=>{if(this.enabled&&this.enableZoom&&this.camera&&this.domElement){let r=0,s=0;const o=this._touchCurrent.length;for(let g=0;g<o;g++)r+=this._touchCurrent[g].clientX,s+=this._touchCurrent[g].clientY;this.setCenter(r/o,s/o);const a=8;this._currentCursorPosition.setY(this.getCursorNDC(Ft.x,Ft.y,this.domElement).y*.5);const l=this._currentCursorPosition.y-this._startCursorPosition.y;let c=1;l<0?c=1/Math.pow(this.scaleFactor,-l*a):l>0&&(c=Math.pow(this.scaleFactor,l*a)),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);const u=this._v3_1.distanceTo(this._gizmos.position);let h=u/c;h=ct.clamp(h,this.minDistance,this.maxDistance);const f=u*Math.tan(ct.DEG2RAD*this._fovState*.5);let d=ct.RAD2DEG*(Math.atan(f/h)*2);d=ct.clamp(d,this.minFov,this.maxFov);const p=f/Math.tan(ct.DEG2RAD*(d/2));c=u/p,this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),this.setFov(d),this.applyTransformMatrix(this.applyScale(c,this._v3_2,!1));const m=this._gizmos.position.clone().sub(this.camera.position).normalize().multiplyScalar(p/u);this._m4_1.makeTranslation(m.x,m.y,m.z),this.dispatchEvent(Mn)}}),D(this,"onTriplePanEnd",()=>{this.updateTbState(gt.IDLE,!1),this.dispatchEvent(Ls)}),D(this,"setCenter",(r,s)=>{Ft.x=r,Ft.y=s}),D(this,"initializeMouseActions",()=>{this.setMouseAction("PAN",0,"CTRL"),this.setMouseAction("PAN",2),this.setMouseAction("ROTATE",0),this.setMouseAction("ZOOM","WHEEL"),this.setMouseAction("ZOOM",1),this.setMouseAction("FOV","WHEEL","SHIFT"),this.setMouseAction("FOV",1,"SHIFT")}),D(this,"setMouseAction",(r,s,o=null)=>{const a=["PAN","ROTATE","ZOOM","FOV"],l=[0,1,2,"WHEEL"],c=["CTRL","SHIFT",null];let u;if(!a.includes(r)||!l.includes(s)||!c.includes(o)||s=="WHEEL"&&r!="ZOOM"&&r!="FOV")return!1;switch(r){case"PAN":u=gt.PAN;break;case"ROTATE":u=gt.ROTATE;break;case"ZOOM":u=gt.SCALE;break;case"FOV":u=gt.FOV;break}const h={operation:r,mouse:s,key:o,state:u};for(let f=0;f<this.mouseActions.length;f++)if(this.mouseActions[f].mouse==h.mouse&&this.mouseActions[f].key==h.key)return this.mouseActions.splice(f,1,h),!0;return this.mouseActions.push(h),!0}),D(this,"getOpFromAction",(r,s)=>{let o;for(let a=0;a<this.mouseActions.length;a++)if(o=this.mouseActions[a],o.mouse==r&&o.key==s)return o.operation;if(s){for(let a=0;a<this.mouseActions.length;a++)if(o=this.mouseActions[a],o.mouse==r&&o.key==null)return o.operation}return null}),D(this,"getOpStateFromAction",(r,s)=>{let o;for(let a=0;a<this.mouseActions.length;a++)if(o=this.mouseActions[a],o.mouse==r&&o.key==s)return o.state;if(s){for(let a=0;a<this.mouseActions.length;a++)if(o=this.mouseActions[a],o.mouse==r&&o.key==null)return o.state}return null}),D(this,"getAngle",(r,s)=>Math.atan2(s.clientY-r.clientY,s.clientX-r.clientX)*180/Math.PI),D(this,"updateTouchEvent",r=>{for(let s=0;s<this._touchCurrent.length;s++)if(this._touchCurrent[s].pointerId==r.pointerId){this._touchCurrent.splice(s,1,r);break}}),D(this,"calculateAngularSpeed",(r,s,o,a)=>{const l=s-r,c=(a-o)/1e3;return c==0?0:l/c}),D(this,"calculatePointersDistance",(r,s)=>Math.sqrt(Math.pow(s.clientX-r.clientX,2)+Math.pow(s.clientY-r.clientY,2))),D(this,"calculateRotationAxis",(r,s)=>(this._rotationMatrix.extractRotation(this._cameraMatrixState),this._quat.setFromRotationMatrix(this._rotationMatrix),this._rotationAxis.crossVectors(r,s).applyQuaternion(this._quat),this._rotationAxis.normalize().clone())),D(this,"calculateTbRadius",r=>{const o=r.position.distanceTo(this._gizmos.position);if(r.type=="PerspectiveCamera"){const a=ct.DEG2RAD*r.fov*.5,l=Math.atan(r.aspect*Math.tan(a));return Math.tan(Math.min(a,l))*o*.67}else if(r.type=="OrthographicCamera")return Math.min(r.top,r.right)*.67}),D(this,"focus",(r,s,o=1)=>{if(this.camera){const a=r.clone();a.sub(this._gizmos.position).multiplyScalar(o),this._translationMatrix.makeTranslation(a.x,a.y,a.z);const l=this._gizmoMatrixState.clone();this._gizmoMatrixState.premultiply(this._translationMatrix),this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale);const c=this._cameraMatrixState.clone();this._cameraMatrixState.premultiply(this._translationMatrix),this._cameraMatrixState.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.enableZoom&&this.applyTransformMatrix(this.applyScale(s,this._gizmos.position)),this._gizmoMatrixState.copy(l),this._cameraMatrixState.copy(c)}}),D(this,"drawGrid",()=>{if(this.scene){var r,s;let l,c,u,h;if(((r=this.camera)===null||r===void 0?void 0:r.type)==="OrthographicCamera"){const f=this.camera.right-this.camera.left,d=this.camera.bottom-this.camera.top;u=Math.max(f,d),h=u/20,l=u/this.camera.zoom*3,c=l/h*this.camera.zoom}else if(((s=this.camera)===null||s===void 0?void 0:s.type)==="PerspectiveCamera"){const f=this.camera.position.distanceTo(this._gizmos.position),d=ct.DEG2RAD*this.camera.fov*.5,p=Math.atan(this.camera.aspect*Math.tan(d));u=Math.tan(Math.max(d,p))*f*2,h=u/20,l=u*3,c=l/h}this._grid==null&&this.camera&&(this._grid=new S6(l,c,8947848,8947848),this._grid.position.copy(this._gizmos.position),this._gridPosition.copy(this._grid.position),this._grid.quaternion.copy(this.camera.quaternion),this._grid.rotateX(Math.PI*.5),this.scene.add(this._grid))}}),D(this,"connect",r=>{r===document&&console.error('THREE.ArcballControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.domElement=r,this.domElement.style.touchAction="none",this.domElement.addEventListener("contextmenu",this.onContextMenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("pointercancel",this.onPointerCancel),this.domElement.addEventListener("wheel",this.onWheel)}),D(this,"dispose",()=>{var r,s,o,a,l;this._animationId!=-1&&window.cancelAnimationFrame(this._animationId),(r=this.domElement)===null||r===void 0||r.removeEventListener("pointerdown",this.onPointerDown),(s=this.domElement)===null||s===void 0||s.removeEventListener("pointercancel",this.onPointerCancel),(o=this.domElement)===null||o===void 0||o.removeEventListener("wheel",this.onWheel),(a=this.domElement)===null||a===void 0||a.removeEventListener("contextmenu",this.onContextMenu),window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),window.removeEventListener("resize",this.onWindowResize),(l=this.scene)===null||l===void 0||l.remove(this._gizmos),this.disposeGrid()}),D(this,"disposeGrid",()=>{this._grid&&this.scene&&(this.scene.remove(this._grid),this._grid=null)}),D(this,"easeOutCubic",r=>1-Math.pow(1-r,3)),D(this,"activateGizmos",r=>{for(const s of this._gizmos.children)s.material.setValues({opacity:r?1:.6})}),D(this,"getCursorNDC",(r,s,o)=>{const a=o.getBoundingClientRect();return this._v2_1.setX((r-a.left)/a.width*2-1),this._v2_1.setY((a.bottom-s)/a.height*2-1),this._v2_1.clone()}),D(this,"getCursorPosition",(r,s,o)=>{var a;return this._v2_1.copy(this.getCursorNDC(r,s,o)),((a=this.camera)===null||a===void 0?void 0:a.type)==="OrthographicCamera"&&(this._v2_1.x*=(this.camera.right-this.camera.left)*.5,this._v2_1.y*=(this.camera.top-this.camera.bottom)*.5),this._v2_1.clone()}),D(this,"setCamera",r=>{if(r){r.lookAt(this.target),r.updateMatrix(),(r==null?void 0:r.type)=="PerspectiveCamera"&&(this._fov0=r.fov,this._fovState=r.fov),this._cameraMatrixState0.copy(r.matrix),this._cameraMatrixState.copy(this._cameraMatrixState0),this._cameraProjectionState.copy(r.projectionMatrix),this._zoom0=r.zoom,this._zoomState=this._zoom0,this._initialNear=r.near,this._nearPos0=r.position.distanceTo(this.target)-r.near,this._nearPos=this._initialNear,this._initialFar=r.far,this._farPos0=r.position.distanceTo(this.target)-r.far,this._farPos=this._initialFar,this._up0.copy(r.up),this._upState.copy(r.up),this.camera=r,this.camera.updateProjectionMatrix();const s=this.calculateTbRadius(r);s!==void 0&&(this._tbRadius=s),this.makeGizmos(this.target,this._tbRadius)}}),D(this,"makeGizmos",(r,s)=>{const a=new zv(0,0,s,s).getPoints(this._curvePts),l=new ri().setFromPoints(a),c=new Qu({color:16744576,fog:!1,transparent:!0,opacity:.6}),u=new Qu({color:8454016,fog:!1,transparent:!0,opacity:.6}),h=new Qu({color:8421631,fog:!1,transparent:!0,opacity:.6}),f=new Yt(l,c),d=new Yt(l,u),p=new Yt(l,h),m=Math.PI*.5;if(f.rotation.x=m,d.rotation.y=m,this._gizmoMatrixState0.identity().setPosition(r),this._gizmoMatrixState.copy(this._gizmoMatrixState0),this.camera&&this.camera.zoom!=1){const g=1/this.camera.zoom;this._scaleMatrix.makeScale(g,g,g),this._translationMatrix.makeTranslation(-r.x,-r.y,-r.z),this._gizmoMatrixState.premultiply(this._translationMatrix).premultiply(this._scaleMatrix),this._translationMatrix.makeTranslation(r.x,r.y,r.z),this._gizmoMatrixState.premultiply(this._translationMatrix)}this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.clear(),this._gizmos.add(f),this._gizmos.add(d),this._gizmos.add(p)}),D(this,"onFocusAnim",(r,s,o,a)=>{if(this._timeStart==-1&&(this._timeStart=r),this._state==gt.ANIMATION_FOCUS){const c=(r-this._timeStart)/this.focusAnimationTime;if(this._gizmoMatrixState.copy(a),c>=1)this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.focus(s,this.scaleFactor),this._timeStart=-1,this.updateTbState(gt.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(Mn);else{const u=this.easeOutCubic(c),h=1-u+this.scaleFactor*u;this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.focus(s,h,u),this.dispatchEvent(Mn);const f=this;this._animationId=window.requestAnimationFrame(function(d){f.onFocusAnim(d,s,o,a.clone())})}}else this._animationId=-1,this._timeStart=-1}),D(this,"onRotationAnim",(r,s,o)=>{if(this._timeStart==-1&&(this._anglePrev=0,this._angleCurrent=0,this._timeStart=r),this._state==gt.ANIMATION_ROTATE){const a=(r-this._timeStart)/1e3;if(o+-this.dampingFactor*a>0){this._angleCurrent=.5*-this.dampingFactor*Math.pow(a,2)+o*a+0,this.applyTransformMatrix(this.rotate(s,this._angleCurrent)),this.dispatchEvent(Mn);const c=this;this._animationId=window.requestAnimationFrame(function(u){c.onRotationAnim(u,s,o)})}else this._animationId=-1,this._timeStart=-1,this.updateTbState(gt.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(Mn)}else this._animationId=-1,this._timeStart=-1,this._state!=gt.ROTATE&&(this.activateGizmos(!1),this.dispatchEvent(Mn))}),D(this,"pan",(r,s,o=!1)=>{if(this.camera){const a=r.clone().sub(s);if(this.camera.type==="OrthographicCamera"&&a.multiplyScalar(1/this.camera.zoom),this.camera.type==="PerspectiveCamera"&&o){this._v3_1.setFromMatrixPosition(this._cameraMatrixState0),this._v3_2.setFromMatrixPosition(this._gizmoMatrixState0);const l=this._v3_1.distanceTo(this._v3_2)/this.camera.position.distanceTo(this._gizmos.position);a.multiplyScalar(1/l)}this._v3_1.set(a.x,a.y,0).applyQuaternion(this.camera.quaternion),this._m4_1.makeTranslation(this._v3_1.x,this._v3_1.y,this._v3_1.z),this.setTransformationMatrices(this._m4_1,this._m4_1)}return ss}),D(this,"reset",()=>{if(this.camera){this.camera.zoom=this._zoom0,this.camera.type==="PerspectiveCamera"&&(this.camera.fov=this._fov0),this.camera.near=this._nearPos,this.camera.far=this._farPos,this._cameraMatrixState.copy(this._cameraMatrixState0),this._cameraMatrixState.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.up.copy(this._up0),this.camera.updateMatrix(),this.camera.updateProjectionMatrix(),this._gizmoMatrixState.copy(this._gizmoMatrixState0),this._gizmoMatrixState0.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.updateMatrix();const r=this.calculateTbRadius(this.camera);r!==void 0&&(this._tbRadius=r),this.makeGizmos(this._gizmos.position,this._tbRadius),this.camera.lookAt(this._gizmos.position),this.updateTbState(gt.IDLE,!1),this.dispatchEvent(Mn)}}),D(this,"rotate",(r,s)=>{const o=this._gizmos.position;return this._translationMatrix.makeTranslation(-o.x,-o.y,-o.z),this._rotationMatrix.makeRotationAxis(r,-s),this._m4_1.makeTranslation(o.x,o.y,o.z),this._m4_1.multiply(this._rotationMatrix),this._m4_1.multiply(this._translationMatrix),this.setTransformationMatrices(this._m4_1),ss}),D(this,"copyState",()=>{if(this.camera){var r;const s=JSON.stringify(((r=this.camera)===null||r===void 0?void 0:r.type)==="OrthographicCamera"?{arcballState:{cameraFar:this.camera.far,cameraMatrix:this.camera.matrix,cameraNear:this.camera.near,cameraUp:this.camera.up,cameraZoom:this.camera.zoom,gizmoMatrix:this._gizmos.matrix}}:{arcballState:{cameraFar:this.camera.far,cameraFov:this.camera.fov,cameraMatrix:this.camera.matrix,cameraNear:this.camera.near,cameraUp:this.camera.up,cameraZoom:this.camera.zoom,gizmoMatrix:this._gizmos.matrix}});navigator.clipboard.writeText(s)}}),D(this,"pasteState",()=>{const r=this;navigator.clipboard.readText().then(function(o){r.setStateFromJSON(o)})}),D(this,"saveState",()=>{!this.camera||(this._cameraMatrixState0.copy(this.camera.matrix),this._gizmoMatrixState0.copy(this._gizmos.matrix),this._nearPos=this.camera.near,this._farPos=this.camera.far,this._zoom0=this.camera.zoom,this._up0.copy(this.camera.up),this.camera.type==="PerspectiveCamera"&&(this._fov0=this.camera.fov))}),D(this,"applyScale",(r,s,o=!0)=>{if(!this.camera)return;const a=s.clone();let l=1/r;if(this.camera.type==="OrthographicCamera"){this.camera.zoom=this._zoomState,this.camera.zoom*=r,this.camera.zoom>this.maxZoom?(this.camera.zoom=this.maxZoom,l=this._zoomState/this.maxZoom):this.camera.zoom<this.minZoom&&(this.camera.zoom=this.minZoom,l=this._zoomState/this.minZoom),this.camera.updateProjectionMatrix(),this._v3_1.setFromMatrixPosition(this._gizmoMatrixState),this._scaleMatrix.makeScale(l,l,l),this._translationMatrix.makeTranslation(-this._v3_1.x,-this._v3_1.y,-this._v3_1.z),this._m4_2.makeTranslation(this._v3_1.x,this._v3_1.y,this._v3_1.z).multiply(this._scaleMatrix),this._m4_2.multiply(this._translationMatrix),a.sub(this._v3_1);const c=a.clone().multiplyScalar(l);return a.sub(c),this._m4_1.makeTranslation(a.x,a.y,a.z),this._m4_2.premultiply(this._m4_1),this.setTransformationMatrices(this._m4_1,this._m4_2),ss}if(this.camera.type==="PerspectiveCamera"){this._v3_1.setFromMatrixPosition(this._cameraMatrixState),this._v3_2.setFromMatrixPosition(this._gizmoMatrixState);let c=this._v3_1.distanceTo(a),u=c-c*l;const h=c-u;h<this.minDistance?(l=this.minDistance/c,u=c-c*l):h>this.maxDistance&&(l=this.maxDistance/c,u=c-c*l);let f=a.clone().sub(this._v3_1).normalize().multiplyScalar(u);if(this._m4_1.makeTranslation(f.x,f.y,f.z),o){const d=this._v3_2;c=d.distanceTo(a),u=c-c*l,f=a.clone().sub(this._v3_2).normalize().multiplyScalar(u),this._translationMatrix.makeTranslation(d.x,d.y,d.z),this._scaleMatrix.makeScale(l,l,l),this._m4_2.makeTranslation(f.x,f.y,f.z).multiply(this._translationMatrix),this._m4_2.multiply(this._scaleMatrix),this._translationMatrix.makeTranslation(-d.x,-d.y,-d.z),this._m4_2.multiply(this._translationMatrix),this.setTransformationMatrices(this._m4_1,this._m4_2)}else this.setTransformationMatrices(this._m4_1);return ss}}),D(this,"setFov",r=>{var s;((s=this.camera)===null||s===void 0?void 0:s.type)==="PerspectiveCamera"&&(this.camera.fov=ct.clamp(r,this.minFov,this.maxFov),this.camera.updateProjectionMatrix())}),D(this,"setTarget",(r,s,o)=>{if(this.camera){this.target.set(r,s,o),this._gizmos.position.set(r,s,o);const a=this.calculateTbRadius(this.camera);a!==void 0&&(this._tbRadius=a),this.makeGizmos(this.target,this._tbRadius),this.camera.lookAt(this.target)}}),D(this,"zRotate",(r,s)=>(this._rotationMatrix.makeRotationAxis(this._rotationAxis,s),this._translationMatrix.makeTranslation(-r.x,-r.y,-r.z),this._m4_1.makeTranslation(r.x,r.y,r.z),this._m4_1.multiply(this._rotationMatrix),this._m4_1.multiply(this._translationMatrix),this._v3_1.setFromMatrixPosition(this._gizmoMatrixState).sub(r),this._v3_2.copy(this._v3_1).applyAxisAngle(this._rotationAxis,s),this._v3_2.sub(this._v3_1),this._m4_2.makeTranslation(this._v3_2.x,this._v3_2.y,this._v3_2.z),this.setTransformationMatrices(this._m4_1,this._m4_2),ss)),D(this,"unprojectOnObj",(r,s)=>{if(!this.scene)return null;const o=new e0;o.near=s.near,o.far=s.far,o.setFromCamera(r,s);const a=o.intersectObjects(this.scene.children,!0);for(let l=0;l<a.length;l++)if(a[l].object.uuid!=this._gizmos.uuid&&a[l].face)return a[l].point.clone();return null}),D(this,"unprojectOnTbSurface",(r,s,o,a,l)=>{if(r.type=="OrthographicCamera"){this._v2_1.copy(this.getCursorPosition(s,o,a)),this._v3_1.set(this._v2_1.x,this._v2_1.y,0);const c=Math.pow(this._v2_1.x,2),u=Math.pow(this._v2_1.y,2),h=Math.pow(this._tbRadius,2);return c+u<=h*.5?this._v3_1.setZ(Math.sqrt(h-(c+u))):this._v3_1.setZ(h*.5/Math.sqrt(c+u)),this._v3_1}if(r.type=="PerspectiveCamera"){this._v2_1.copy(this.getCursorNDC(s,o,a)),this._v3_1.set(this._v2_1.x,this._v2_1.y,-1),this._v3_1.applyMatrix4(r.projectionMatrixInverse);const c=this._v3_1.clone().normalize(),u=r.position.distanceTo(this._gizmos.position),h=Math.pow(l,2),f=this._v3_1.z,d=Math.sqrt(Math.pow(this._v3_1.x,2)+Math.pow(this._v3_1.y,2));if(d==0)return c.set(this._v3_1.x,this._v3_1.y,l),c;const p=f/d,m=u;let g=Math.pow(p,2)+1,_=2*p*m,y=Math.pow(m,2)-h,x=Math.pow(_,2)-4*g*y;if(x>=0&&(this._v2_1.setX((-_-Math.sqrt(x))/(2*g)),this._v2_1.setY(p*this._v2_1.x+m),ct.RAD2DEG*this._v2_1.angle()>=45)){const S=Math.sqrt(Math.pow(this._v2_1.x,2)+Math.pow(u-this._v2_1.y,2));return c.multiplyScalar(S),c.z+=u,c}g=p,_=m,y=-h*.5,x=Math.pow(_,2)-4*g*y,this._v2_1.setX((-_-Math.sqrt(x))/(2*g)),this._v2_1.setY(p*this._v2_1.x+m);const E=Math.sqrt(Math.pow(this._v2_1.x,2)+Math.pow(u-this._v2_1.y,2));return c.multiplyScalar(E),c.z+=u,c}}),D(this,"unprojectOnTbPlane",(r,s,o,a,l=!1)=>{if(r.type=="OrthographicCamera")return this._v2_1.copy(this.getCursorPosition(s,o,a)),this._v3_1.set(this._v2_1.x,this._v2_1.y,0),this._v3_1.clone();if(r.type=="PerspectiveCamera"){this._v2_1.copy(this.getCursorNDC(s,o,a)),this._v3_1.set(this._v2_1.x,this._v2_1.y,-1),this._v3_1.applyMatrix4(r.projectionMatrixInverse);const c=this._v3_1.clone().normalize(),u=this._v3_1.z,h=Math.sqrt(Math.pow(this._v3_1.x,2)+Math.pow(this._v3_1.y,2));let f;if(l?f=this._v3_1.setFromMatrixPosition(this._cameraMatrixState0).distanceTo(this._v3_2.setFromMatrixPosition(this._gizmoMatrixState0)):f=r.position.distanceTo(this._gizmos.position),h==0)return c.set(0,0,0),c;const d=u/h,p=f,m=-p/d,g=Math.sqrt(Math.pow(p,2)+Math.pow(m,2));return c.multiplyScalar(g),c.z=0,c}}),D(this,"updateMatrixState",()=>{!this.camera||(this._cameraMatrixState.copy(this.camera.matrix),this._gizmoMatrixState.copy(this._gizmos.matrix),this.camera.type==="OrthographicCamera"&&(this._cameraProjectionState.copy(this.camera.projectionMatrix),this.camera.updateProjectionMatrix(),this._zoomState=this.camera.zoom),this.camera.type==="PerspectiveCamera"&&(this._fovState=this.camera.fov))}),D(this,"updateTbState",(r,s)=>{this._state=r,s&&this.updateMatrixState()}),D(this,"update",()=>{if(!this.target.equals(this._currentTarget)&&this.camera){this._gizmos.position.set(this.target.x,this.target.y,this.target.z);const s=this.calculateTbRadius(this.camera);s!==void 0&&(this._tbRadius=s),this.makeGizmos(this.target,this._tbRadius),this._currentTarget.copy(this.target)}if(!!this.camera){if(this.camera.type==="OrthographicCamera"&&(this.camera.zoom>this.maxZoom||this.camera.zoom<this.minZoom)){const s=ct.clamp(this.camera.zoom,this.minZoom,this.maxZoom);this.applyTransformMatrix(this.applyScale(s/this.camera.zoom,this._gizmos.position,!0))}if(this.camera.type==="PerspectiveCamera"){const s=this.camera.position.distanceTo(this._gizmos.position);if(s>this.maxDistance+1e-6||s<this.minDistance-1e-6){const l=ct.clamp(s,this.minDistance,this.maxDistance);this.applyTransformMatrix(this.applyScale(l/s,this._gizmos.position)),this.updateMatrixState()}(this.camera.fov<this.minFov||this.camera.fov>this.maxFov)&&(this.camera.fov=ct.clamp(this.camera.fov,this.minFov,this.maxFov),this.camera.updateProjectionMatrix());const o=this._tbRadius,a=this.calculateTbRadius(this.camera);if(a!==void 0&&(this._tbRadius=a),o<this._tbRadius-1e-6||o>this._tbRadius+1e-6){const l=(this._gizmos.scale.x+this._gizmos.scale.y+this._gizmos.scale.z)/3,c=this._tbRadius/l,h=new zv(0,0,c,c).getPoints(this._curvePts),f=new ri().setFromPoints(h);for(const d in this._gizmos.children){const p=this._gizmos.children[d];p.geometry=f}}}this.camera.lookAt(this._gizmos.position)}}),D(this,"setStateFromJSON",r=>{const s=JSON.parse(r);if(s.arcballState&&this.camera){this._cameraMatrixState.fromArray(s.arcballState.cameraMatrix.elements),this._cameraMatrixState.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.up.copy(s.arcballState.cameraUp),this.camera.near=s.arcballState.cameraNear,this.camera.far=s.arcballState.cameraFar,this.camera.zoom=s.arcballState.cameraZoom,this.camera.type==="PerspectiveCamera"&&(this.camera.fov=s.arcballState.cameraFov),this._gizmoMatrixState.fromArray(s.arcballState.gizmoMatrix.elements),this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.camera.updateMatrix(),this.camera.updateProjectionMatrix(),this._gizmos.updateMatrix();const o=this.calculateTbRadius(this.camera);o!==void 0&&(this._tbRadius=o);const a=new Ze().copy(this._gizmoMatrixState0);this.makeGizmos(this._gizmos.position,this._tbRadius),this._gizmoMatrixState0.copy(a),this.camera.lookAt(this._gizmos.position),this.updateTbState(gt.IDLE,!1),this.dispatchEvent(Mn)}}),this.camera=null,this.domElement=n,this.scene=i,this.mouseActions=[],this._mouseOp=null,this._v2_1=new mt,this._v3_1=new $,this._v3_2=new $,this._m4_1=new Ze,this._m4_2=new Ze,this._quat=new $t,this._translationMatrix=new Ze,this._rotationMatrix=new Ze,this._scaleMatrix=new Ze,this._rotationAxis=new $,this._cameraMatrixState=new Ze,this._cameraProjectionState=new Ze,this._fovState=1,this._upState=new $,this._zoomState=1,this._nearPos=0,this._farPos=0,this._gizmoMatrixState=new Ze,this._up0=new $,this._zoom0=1,this._fov0=0,this._initialNear=0,this._nearPos0=0,this._initialFar=0,this._farPos0=0,this._cameraMatrixState0=new Ze,this._gizmoMatrixState0=new Ze,this._button=-1,this._touchStart=[],this._touchCurrent=[],this._input=mn.NONE,this._switchSensibility=32,this._startFingerDistance=0,this._currentFingerDistance=0,this._startFingerRotation=0,this._currentFingerRotation=0,this._devPxRatio=0,this._downValid=!0,this._nclicks=0,this._downEvents=[],this._clickStart=0,this._maxDownTime=250,this._maxInterval=300,this._posThreshold=24,this._movementThreshold=24,this._currentCursorPosition=new $,this._startCursorPosition=new $,this._grid=null,this._gridPosition=new $,this._gizmos=new el,this._curvePts=128,this._timeStart=-1,this._animationId=-1,this.focusAnimationTime=500,this._timePrev=0,this._timeCurrent=0,this._anglePrev=0,this._angleCurrent=0,this._cursorPosPrev=new $,this._cursorPosCurr=new $,this._wPrev=0,this._wCurr=0,this.adjustNearFar=!1,this.scaleFactor=1.1,this.dampingFactor=25,this.wMax=20,this.enableAnimations=!0,this.enableGrid=!1,this.cursorZoom=!1,this.minFov=5,this.maxFov=90,this.enabled=!0,this.enablePan=!0,this.enableRotate=!0,this.enableZoom=!0,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.target=new $(0,0,0),this._currentTarget=new $(0,0,0),this._tbRadius=1,this._state=gt.IDLE,this.setCamera(e),this.scene&&this.scene.add(this._gizmos),this._devPxRatio=window.devicePixelRatio,this.initializeMouseActions(),this.domElement&&this.connect(this.domElement),window.addEventListener("resize",this.onWindowResize)}applyTransformMatrix(e){if(e!=null&&e.camera&&this.camera&&(this._m4_1.copy(this._cameraMatrixState).premultiply(e.camera),this._m4_1.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.updateMatrix(),(this._state==gt.ROTATE||this._state==gt.ZROTATE||this._state==gt.ANIMATION_ROTATE)&&this.camera.up.copy(this._upState).applyQuaternion(this.camera.quaternion)),e!=null&&e.gizmos&&(this._m4_1.copy(this._gizmoMatrixState).premultiply(e.gizmos),this._m4_1.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.updateMatrix()),(this._state==gt.SCALE||this._state==gt.FOCUS||this._state==gt.ANIMATION_FOCUS)&&this.camera){const n=this.calculateTbRadius(this.camera);if(n!==void 0&&(this._tbRadius=n),this.adjustNearFar){const i=this.camera.position.distanceTo(this._gizmos.position),r=new di;r.setFromObject(this._gizmos);const s=new to;r.getBoundingSphere(s);const o=Math.max(this._nearPos0,s.radius+s.center.length()),a=i-this._initialNear,l=Math.min(o,a);this.camera.near=i-l;const c=Math.min(this._farPos0,-s.radius+s.center.length()),u=i-this._initialFar,h=Math.min(c,u);this.camera.far=i-h,this.camera.updateProjectionMatrix()}else{let i=!1;this.camera.near!=this._initialNear&&(this.camera.near=this._initialNear,i=!0),this.camera.far!=this._initialFar&&(this.camera.far=this._initialFar,i=!0),i&&this.camera.updateProjectionMatrix()}}}setGizmosVisible(e){this._gizmos.visible=e,this.dispatchEvent(Mn)}setTransformationMatrices(e=null,n=null){e?ss.camera?ss.camera.copy(e):ss.camera=e.clone():ss.camera=null,n?ss.gizmos?ss.gizmos.copy(n):ss.gizmos=n.clone():ss.gizmos=null}}function E4(t){t.preventDefault()}class Cpe extends Dc{constructor(e,n){super(),D(this,"object",void 0),D(this,"domElement",null),D(this,"movementSpeed",1),D(this,"rollSpeed",.005),D(this,"dragToLook",!1),D(this,"autoForward",!1),D(this,"changeEvent",{type:"change"}),D(this,"EPS",1e-6),D(this,"tmpQuaternion",new $t),D(this,"mouseStatus",0),D(this,"movementSpeedMultiplier",1),D(this,"moveState",{up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0}),D(this,"moveVector",new $(0,0,0)),D(this,"rotationVector",new $(0,0,0)),D(this,"keydown",i=>{if(!i.altKey){switch(i.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=.1;break;case"KeyW":this.moveState.forward=1;break;case"KeyS":this.moveState.back=1;break;case"KeyA":this.moveState.left=1;break;case"KeyD":this.moveState.right=1;break;case"KeyR":this.moveState.up=1;break;case"KeyF":this.moveState.down=1;break;case"ArrowUp":this.moveState.pitchUp=1;break;case"ArrowDown":this.moveState.pitchDown=1;break;case"ArrowLeft":this.moveState.yawLeft=1;break;case"ArrowRight":this.moveState.yawRight=1;break;case"KeyQ":this.moveState.rollLeft=1;break;case"KeyE":this.moveState.rollRight=1;break}this.updateMovementVector(),this.updateRotationVector()}}),D(this,"keyup",i=>{switch(i.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=1;break;case"KeyW":this.moveState.forward=0;break;case"KeyS":this.moveState.back=0;break;case"KeyA":this.moveState.left=0;break;case"KeyD":this.moveState.right=0;break;case"KeyR":this.moveState.up=0;break;case"KeyF":this.moveState.down=0;break;case"ArrowUp":this.moveState.pitchUp=0;break;case"ArrowDown":this.moveState.pitchDown=0;break;case"ArrowLeft":this.moveState.yawLeft=0;break;case"ArrowRight":this.moveState.yawRight=0;break;case"KeyQ":this.moveState.rollLeft=0;break;case"KeyE":this.moveState.rollRight=0;break}this.updateMovementVector(),this.updateRotationVector()}),D(this,"pointerdown",i=>{if(this.dragToLook)this.mouseStatus++;else{switch(i.button){case 0:this.moveState.forward=1;break;case 2:this.moveState.back=1;break}this.updateMovementVector()}}),D(this,"pointermove",i=>{if(!this.dragToLook||this.mouseStatus>0){const r=this.getContainerDimensions(),s=r.size[0]/2,o=r.size[1]/2;this.moveState.yawLeft=-(i.pageX-r.offset[0]-s)/s,this.moveState.pitchDown=(i.pageY-r.offset[1]-o)/o,this.updateRotationVector()}}),D(this,"pointerup",i=>{if(this.dragToLook)this.mouseStatus--,this.moveState.yawLeft=this.moveState.pitchDown=0;else{switch(i.button){case 0:this.moveState.forward=0;break;case 2:this.moveState.back=0;break}this.updateMovementVector()}this.updateRotationVector()}),D(this,"lastQuaternion",new $t),D(this,"lastPosition",new $),D(this,"update",i=>{const r=i*this.movementSpeed,s=i*this.rollSpeed;this.object.translateX(this.moveVector.x*r),this.object.translateY(this.moveVector.y*r),this.object.translateZ(this.moveVector.z*r),this.tmpQuaternion.set(this.rotationVector.x*s,this.rotationVector.y*s,this.rotationVector.z*s,1).normalize(),this.object.quaternion.multiply(this.tmpQuaternion),(this.lastPosition.distanceToSquared(this.object.position)>this.EPS||8*(1-this.lastQuaternion.dot(this.object.quaternion))>this.EPS)&&(this.dispatchEvent(this.changeEvent),this.lastQuaternion.copy(this.object.quaternion),this.lastPosition.copy(this.object.position))}),D(this,"updateMovementVector",()=>{const i=this.moveState.forward||this.autoForward&&!this.moveState.back?1:0;this.moveVector.x=-this.moveState.left+this.moveState.right,this.moveVector.y=-this.moveState.down+this.moveState.up,this.moveVector.z=-i+this.moveState.back}),D(this,"updateRotationVector",()=>{this.rotationVector.x=-this.moveState.pitchDown+this.moveState.pitchUp,this.rotationVector.y=-this.moveState.yawRight+this.moveState.yawLeft,this.rotationVector.z=-this.moveState.rollRight+this.moveState.rollLeft}),D(this,"getContainerDimensions",()=>this.domElement!=document&&!(this.domElement instanceof Document)?{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}:{size:[window.innerWidth,window.innerHeight],offset:[0,0]}),D(this,"connect",i=>{this.domElement=i,i&&!(i instanceof Document)&&i.setAttribute("tabindex",-1),this.domElement.addEventListener("contextmenu",E4),this.domElement.addEventListener("pointermove",this.pointermove),this.domElement.addEventListener("pointerdown",this.pointerdown),this.domElement.addEventListener("pointerup",this.pointerup),window.addEventListener("keydown",this.keydown),window.addEventListener("keyup",this.keyup)}),D(this,"dispose",()=>{this.domElement.removeEventListener("contextmenu",E4),this.domElement.removeEventListener("pointermove",this.pointermove),this.domElement.removeEventListener("pointerdown",this.pointerdown),this.domElement.removeEventListener("pointerup",this.pointerup),window.removeEventListener("keydown",this.keydown),window.removeEventListener("keyup",this.keyup)}),this.object=e,n!==void 0&&this.connect(n),this.updateMovementVector(),this.updateRotationVector()}}class Ex{constructor(){D(this,"enabled",!0),D(this,"needsSwap",!0),D(this,"clear",!1),D(this,"renderToScreen",!1)}setSize(e,n){}render(e,n,i,r,s){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}class Spe{constructor(e){D(this,"camera",new ua(-1,1,1,-1,0,1)),D(this,"geometry",new Ko(2,2)),D(this,"mesh",void 0),this.mesh=new rt(this.geometry,e)}get material(){return this.mesh.material}set material(e){this.mesh.material=e}dispose(){this.mesh.geometry.dispose()}render(e){e.render(this.mesh,this.camera)}}class hS extends Ex{constructor(e,n="tDiffuse"){super(),D(this,"textureID",void 0),D(this,"uniforms",void 0),D(this,"material",void 0),D(this,"fsQuad",void 0),this.textureID=n,e instanceof As?(this.uniforms=e.uniforms,this.material=e):(this.uniforms=Eh.clone(e.uniforms),this.material=new As({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new Spe(this.material)}render(e,n,i){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=i.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}}const w4={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","	vUv = uv;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","	vec4 texel = texture2D( tDiffuse, vUv );","	gl_FragColor = opacity * texel;","}"].join(`
`)};class M4 extends Ex{constructor(e,n){super(),D(this,"scene",void 0),D(this,"camera",void 0),D(this,"inverse",void 0),this.scene=e,this.camera=n,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,n,i){const r=e.getContext(),s=e.state;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0);let o,a;this.inverse?(o=0,a=1):(o=1,a=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),s.buffers.stencil.setFunc(r.ALWAYS,o,4294967295),s.buffers.stencil.setClear(a),s.buffers.stencil.setLocked(!0),e.setRenderTarget(i),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(r.EQUAL,1,4294967295),s.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),s.buffers.stencil.setLocked(!0)}}class bpe extends Ex{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class Ipe{constructor(e,n){if(D(this,"renderer",void 0),D(this,"_pixelRatio",void 0),D(this,"_width",void 0),D(this,"_height",void 0),D(this,"renderTarget1",void 0),D(this,"renderTarget2",void 0),D(this,"writeBuffer",void 0),D(this,"readBuffer",void 0),D(this,"renderToScreen",void 0),D(this,"passes",[]),D(this,"copyPass",void 0),D(this,"clock",void 0),this.renderer=e,n===void 0){const i={minFilter:Mi,magFilter:Mi,format:us},r=e.getSize(new mt);this._pixelRatio=e.getPixelRatio(),this._width=r.width,this._height=r.height,n=new gs(this._width*this._pixelRatio,this._height*this._pixelRatio,i),n.texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=n.width,this._height=n.height;this.renderTarget1=n,this.renderTarget2=n.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,w4===void 0&&console.error("THREE.EffectComposer relies on CopyShader"),hS===void 0&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new hS(w4),this.clock=new E3}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,n){this.passes.splice(n,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const n=this.passes.indexOf(e);n!==-1&&this.passes.splice(n,1)}isLastEnabledPass(e){for(let n=e+1;n<this.passes.length;n++)if(this.passes[n].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const n=this.renderer.getRenderTarget();let i=!1;const r=this.passes.length;for(let s=0;s<r;s++){const o=this.passes[s];if(o.enabled!==!1){if(o.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(s),o.render(this.renderer,this.writeBuffer,this.readBuffer,e,i),o.needsSwap){if(i){const a=this.renderer.getContext(),l=this.renderer.state.buffers.stencil;l.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),l.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}M4!==void 0&&(o instanceof M4?i=!0:o instanceof bpe&&(i=!1))}}this.renderer.setRenderTarget(n)}reset(e){if(e===void 0){const n=this.renderer.getSize(new mt);this._pixelRatio=this.renderer.getPixelRatio(),this._width=n.width,this._height=n.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,n){this._width=e,this._height=n;const i=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(i,r),this.renderTarget2.setSize(i,r);for(let s=0;s<this.passes.length;s++)this.passes[s].setSize(i,r)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}}class Tpe extends Ex{constructor(e,n,i,r,s=0){super(),D(this,"scene",void 0),D(this,"camera",void 0),D(this,"overrideMaterial",void 0),D(this,"clearColor",void 0),D(this,"clearAlpha",void 0),D(this,"clearDepth",!1),D(this,"_oldClearColor",new xt),this.scene=e,this.camera=n,this.overrideMaterial=i,this.clearColor=r,this.clearAlpha=s,this.clear=!0,this.needsSwap=!1}render(e,n,i){let r=e.autoClear;e.autoClear=!1;let s,o=null;this.overrideMaterial!==void 0&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(e.getClearColor(this._oldClearColor),s=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:i),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(this._oldClearColor,s),this.overrideMaterial!==void 0&&(this.scene.overrideMaterial=o),e.autoClear=r}}class yI extends Zd{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(n){return new Fpe(n)}),this.register(function(n){return new zpe(n)}),this.register(function(n){return new Qpe(n)}),this.register(function(n){return new kpe(n)}),this.register(function(n){return new Upe(n)}),this.register(function(n){return new Ope(n)}),this.register(function(n){return new Npe(n)}),this.register(function(n){return new Dpe(n)}),this.register(function(n){return new Gpe(n)}),this.register(function(n){return new Lpe(n)}),this.register(function(n){return new Rpe(n)}),this.register(function(n){return new Hpe(n)})}load(e,n,i,r){const s=this;let o;this.resourcePath!==""?o=this.resourcePath:this.path!==""?o=this.path:o=So.extractUrlBase(e),this.manager.itemStart(e);const a=function(c){r?r(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new ca(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,o,function(u){n(u),s.manager.itemEnd(e)},a)}catch(u){a(u)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,n,i,r){let s;const o={},a={};if(typeof e=="string")s=e;else if(So.decodeText(new Uint8Array(e,0,4))===qG){try{o[Jt.KHR_BINARY_GLTF]=new Vpe(e)}catch(h){r&&r(h);return}s=o[Jt.KHR_BINARY_GLTF].content}else s=So.decodeText(new Uint8Array(e));const l=JSON.parse(s);if(l.asset===void 0||l.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new ime(l,{path:n||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const h=this.pluginCallbacks[u](c);a[h.name]=h,o[h.name]=!0}if(l.extensionsUsed)for(let u=0;u<l.extensionsUsed.length;++u){const h=l.extensionsUsed[u],f=l.extensionsRequired||[];switch(h){case Jt.KHR_MATERIALS_UNLIT:o[h]=new Ppe;break;case Jt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:o[h]=new Xpe;break;case Jt.KHR_DRACO_MESH_COMPRESSION:o[h]=new Wpe(l,this.dracoLoader);break;case Jt.KHR_TEXTURE_TRANSFORM:o[h]=new jpe;break;case Jt.KHR_MESH_QUANTIZATION:o[h]=new Ype;break;default:f.indexOf(h)>=0&&a[h]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+h+'".')}}c.setExtensions(o),c.setPlugins(a),c.parse(i,r)}parseAsync(e,n){const i=this;return new Promise(function(r,s){i.parse(e,n,r,s)})}}function Bpe(){let t={};return{get:function(e){return t[e]},add:function(e,n){t[e]=n},remove:function(e){delete t[e]},removeAll:function(){t={}}}}const Jt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class Rpe{constructor(e){this.parser=e,this.name=Jt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,n=this.parser.json.nodes||[];for(let i=0,r=n.length;i<r;i++){const s=n[i];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const n=this.parser,i="light:"+e;let r=n.cache.get(i);if(r)return r;const s=n.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const u=new xt(16777215);l.color!==void 0&&u.fromArray(l.color);const h=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new w3(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new U_(u),c.distance=h;break;case"spot":c=new k3(u),c.distance=h,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,l.intensity!==void 0&&(c.intensity=l.intensity),c.name=n.createUniqueName(l.name||"light_"+e),r=Promise.resolve(c),n.cache.add(i,r),r}createNodeAttachment(e){const n=this,i=this.parser,s=i.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return i._getNodeRef(n.cache,a,l)})}}class Ppe{constructor(){this.name=Jt.KHR_MATERIALS_UNLIT}getMaterialType(){return qa}extendParams(e,n,i){const r=[];e.color=new xt(1,1,1),e.opacity=1;const s=n.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}s.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",s.baseColorTexture,yi))}return Promise.all(r)}}class Dpe{constructor(e){this.parser=e,this.name=Jt.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,n){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(n.emissiveIntensity=s),Promise.resolve()}}class Fpe{constructor(e){this.parser=e,this.name=Jt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:dl}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(o.clearcoatFactor!==void 0&&(n.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(i.assignTexture(n,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(n.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(i.assignTexture(n,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(i.assignTexture(n,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;n.clearcoatNormalScale=new mt(a,a)}return Promise.all(s)}}class Lpe{constructor(e){this.parser=e,this.name=Jt.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:dl}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.iridescenceFactor!==void 0&&(n.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(i.assignTexture(n,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(n.iridescenceIOR=o.iridescenceIor),n.iridescenceThicknessRange===void 0&&(n.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(n.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(n.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(i.assignTexture(n,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class kpe{constructor(e){this.parser=e,this.name=Jt.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:dl}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];n.sheenColor=new xt(0,0,0),n.sheenRoughness=0,n.sheen=1;const o=r.extensions[this.name];return o.sheenColorFactor!==void 0&&n.sheenColor.fromArray(o.sheenColorFactor),o.sheenRoughnessFactor!==void 0&&(n.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(i.assignTexture(n,"sheenColorMap",o.sheenColorTexture,yi)),o.sheenRoughnessTexture!==void 0&&s.push(i.assignTexture(n,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class Upe{constructor(e){this.parser=e,this.name=Jt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:dl}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.transmissionFactor!==void 0&&(n.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(i.assignTexture(n,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class Ope{constructor(e){this.parser=e,this.name=Jt.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:dl}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];n.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(i.assignTexture(n,"thicknessMap",o.thicknessTexture)),n.attenuationDistance=o.attenuationDistance||0;const a=o.attenuationColor||[1,1,1];return n.attenuationColor=new xt(a[0],a[1],a[2]),Promise.all(s)}}class Npe{constructor(e){this.parser=e,this.name=Jt.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:dl}extendMaterialParams(e,n){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return n.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class Gpe{constructor(e){this.parser=e,this.name=Jt.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:dl}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];n.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(i.assignTexture(n,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return n.specularColor=new xt(a[0],a[1],a[2]),o.specularColorTexture!==void 0&&s.push(i.assignTexture(n,"specularColorMap",o.specularColorTexture,yi)),Promise.all(s)}}class zpe{constructor(e){this.parser=e,this.name=Jt.KHR_TEXTURE_BASISU}loadTexture(e){const n=this.parser,i=n.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=n.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return n.loadTextureImage(e,s.source,o)}}class Qpe{constructor(e){this.parser=e,this.name=Jt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const n=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[n])return null;const o=s.extensions[n],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const n=new Image;n.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",n.onload=n.onerror=function(){e(n.height===1)}})),this.isSupported}}class Hpe{constructor(e){this.name=Jt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const n=this.parser.json,i=n.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=r.byteOffset||0,c=r.byteLength||0,u=r.count,h=r.byteStride,f=new Uint8Array(a,l,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,h,f,r.mode,r.filter).then(function(d){return d.buffer}):o.ready.then(function(){const d=new ArrayBuffer(u*h);return o.decodeGltfBuffer(new Uint8Array(d),u,h,f,r.mode,r.filter),d})})}else return null}}const qG="glTF",up=12,C4={JSON:1313821514,BIN:5130562};class Vpe{constructor(e){this.name=Jt.KHR_BINARY_GLTF,this.content=null,this.body=null;const n=new DataView(e,0,up);if(this.header={magic:So.decodeText(new Uint8Array(e.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==qG)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-up,r=new DataView(e,up);let s=0;for(;s<i;){const o=r.getUint32(s,!0);s+=4;const a=r.getUint32(s,!0);if(s+=4,a===C4.JSON){const l=new Uint8Array(e,up+s,o);this.content=So.decodeText(l)}else if(a===C4.BIN){const l=up+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Wpe{constructor(e,n){if(!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Jt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=n,this.dracoLoader.preload()}decodePrimitive(e,n){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const u in o){const h=dS[u]||u.toLowerCase();a[h]=o[u]}for(const u in e.attributes){const h=dS[u]||u.toLowerCase();if(o[u]!==void 0){const f=i.accessors[e.attributes[u]],d=Jm[f.componentType];c[h]=d.name,l[h]=f.normalized===!0}}return n.getDependency("bufferView",s).then(function(u){return new Promise(function(h){r.decodeDracoFile(u,function(f){for(const d in f.attributes){const p=f.attributes[d],m=l[d];m!==void 0&&(p.normalized=m)}h(f)},a,c)})})}}class jpe{constructor(){this.name=Jt.KHR_TEXTURE_TRANSFORM}extendTexture(e,n){return n.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),n.offset===void 0&&n.rotation===void 0&&n.scale===void 0||(e=e.clone(),n.offset!==void 0&&e.offset.fromArray(n.offset),n.rotation!==void 0&&(e.rotation=n.rotation),n.scale!==void 0&&e.repeat.fromArray(n.scale),e.needsUpdate=!0),e}}class fS extends $d{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;const n=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),i=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),r=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),s=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),o=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join(`
`),a={specular:{value:new xt().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=a,this.onBeforeCompile=function(l){for(const c in a)l.uniforms[c]=a[c];l.fragmentShader=l.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",n).replace("#include <metalnessmap_pars_fragment>",i).replace("#include <roughnessmap_fragment>",r).replace("#include <metalnessmap_fragment>",s).replace("#include <lights_physical_fragment>",o)},Object.defineProperties(this,{specular:{get:function(){return a.specular.value},set:function(l){a.specular.value=l}},specularMap:{get:function(){return a.specularMap.value},set:function(l){a.specularMap.value=l,l?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return a.glossiness.value},set:function(l){a.glossiness.value=l}},glossinessMap:{get:function(){return a.glossinessMap.value},set:function(l){a.glossinessMap.value=l,l?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class Xpe{constructor(){this.name=Jt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}getMaterialType(){return fS}extendParams(e,n,i){const r=n.extensions[this.name];e.color=new xt(1,1,1),e.opacity=1;const s=[];if(Array.isArray(r.diffuseFactor)){const o=r.diffuseFactor;e.color.fromArray(o),e.opacity=o[3]}if(r.diffuseTexture!==void 0&&s.push(i.assignTexture(e,"map",r.diffuseTexture,yi)),e.emissive=new xt(0,0,0),e.glossiness=r.glossinessFactor!==void 0?r.glossinessFactor:1,e.specular=new xt(1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),r.specularGlossinessTexture!==void 0){const o=r.specularGlossinessTexture;s.push(i.assignTexture(e,"glossinessMap",o)),s.push(i.assignTexture(e,"specularMap",o,yi))}return Promise.all(s)}createMaterial(e){const n=new fS(e);return n.fog=!0,n.color=e.color,n.map=e.map===void 0?null:e.map,n.lightMap=null,n.lightMapIntensity=1,n.aoMap=e.aoMap===void 0?null:e.aoMap,n.aoMapIntensity=1,n.emissive=e.emissive,n.emissiveIntensity=e.emissiveIntensity===void 0?1:e.emissiveIntensity,n.emissiveMap=e.emissiveMap===void 0?null:e.emissiveMap,n.bumpMap=e.bumpMap===void 0?null:e.bumpMap,n.bumpScale=1,n.normalMap=e.normalMap===void 0?null:e.normalMap,n.normalMapType=aN,e.normalScale&&(n.normalScale=e.normalScale),n.displacementMap=null,n.displacementScale=1,n.displacementBias=0,n.specularMap=e.specularMap===void 0?null:e.specularMap,n.specular=e.specular,n.glossinessMap=e.glossinessMap===void 0?null:e.glossinessMap,n.glossiness=e.glossiness,n.alphaMap=null,n.envMap=e.envMap===void 0?null:e.envMap,n.envMapIntensity=1,n.refractionRatio=.98,n}}class Ype{constructor(){this.name=Jt.KHR_MESH_QUANTIZATION}}class JG extends R6{constructor(e,n,i,r){super(e,n,i,r)}copySampleValue_(e){const n=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)n[o]=i[s+o];return n}interpolate_(e,n,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,c=a*3,u=r-n,h=(i-n)/u,f=h*h,d=f*h,p=e*c,m=p-c,g=-2*d+3*f,_=d-f,y=1-g,x=_-f+h;for(let E=0;E!==a;E++){const w=o[m+E+a],S=o[m+E+l]*u,b=o[p+E+a],M=o[p+E]*u;s[E]=y*w+x*S+g*b+_*M}return s}}const qpe=new $t;class Jpe extends JG{interpolate_(e,n,i,r){const s=super.interpolate_(e,n,i,r);return qpe.fromArray(s).normalize().toArray(s),s}}const Pa={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Jm={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},S4={9728:Ja,9729:Mi,9984:N6,9985:F6,9986:O6,9987:qy},b4={33071:F_,33648:U6,10497:ol},I4={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},dS={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Nl={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Kpe={CUBICSPLINE:void 0,LINEAR:b3,STEP:P6},hw={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Zpe(t){return t.DefaultMaterial===void 0&&(t.DefaultMaterial=new $d({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:zm})),t.DefaultMaterial}function hp(t,e,n){for(const i in n.extensions)t[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=n.extensions[i])}function gu(t,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(t.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function $pe(t,e,n){let i=!1,r=!1,s=!1;for(let c=0,u=e.length;c<u;c++){const h=e[c];if(h.POSITION!==void 0&&(i=!0),h.NORMAL!==void 0&&(r=!0),h.COLOR_0!==void 0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(t);const o=[],a=[],l=[];for(let c=0,u=e.length;c<u;c++){const h=e[c];if(i){const f=h.POSITION!==void 0?n.getDependency("accessor",h.POSITION):t.attributes.position;o.push(f)}if(r){const f=h.NORMAL!==void 0?n.getDependency("accessor",h.NORMAL):t.attributes.normal;a.push(f)}if(s){const f=h.COLOR_0!==void 0?n.getDependency("accessor",h.COLOR_0):t.attributes.color;l.push(f)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const u=c[0],h=c[1],f=c[2];return i&&(t.morphAttributes.position=u),r&&(t.morphAttributes.normal=h),s&&(t.morphAttributes.color=f),t.morphTargetsRelative=!0,t})}function eme(t,e){if(t.updateMorphTargets(),e.weights!==void 0)for(let n=0,i=e.weights.length;n<i;n++)t.morphTargetInfluences[n]=e.weights[n];if(e.extras&&Array.isArray(e.extras.targetNames)){const n=e.extras.targetNames;if(t.morphTargetInfluences.length===n.length){t.morphTargetDictionary={};for(let i=0,r=n.length;i<r;i++)t.morphTargetDictionary[n[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function tme(t){const e=t.extensions&&t.extensions[Jt.KHR_DRACO_MESH_COMPRESSION];let n;return e?n="draco:"+e.bufferView+":"+e.indices+":"+T4(e.attributes):n=t.indices+":"+T4(t.attributes)+":"+t.mode,n}function T4(t){let e="";const n=Object.keys(t).sort();for(let i=0,r=n.length;i<r;i++)e+=n[i]+":"+t[n[i]]+";";return e}function pS(t){switch(t){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function nme(t){return t.search(/\.jpe?g($|\?)/i)>0||t.search(/^data\:image\/jpeg/)===0?"image/jpeg":t.search(/\.webp($|\?)/i)>0||t.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}class ime{constructor(e={},n={}){var i,r;this.json=e,this.extensions={},this.plugins={},this.options=n,this.cache=new Bpe,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};const s=typeof navigator<"u"&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,o=typeof navigator<"u"&&((i=navigator.userAgent)===null||i===void 0?void 0:i.indexOf("Firefox"))>-1,a=typeof navigator<"u"&&o?(r=navigator.userAgent)===null||r===void 0?void 0:r.match(/Firefox\/([0-9]+)\./)[1]:-1;typeof createImageBitmap>"u"||s||o&&a<98?this.textureLoader=new t0(this.options.manager):this.textureLoader=new I6(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new ca(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,n){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:i,userData:{}};hp(s,a,r),gu(a,r),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){e(a)})}).catch(n)}_markDefs(){const e=this.json.nodes||[],n=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=n.length;r<s;r++){const o=n[r].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(i[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,n){n!==void 0&&(e.refs[n]===void 0&&(e.refs[n]=e.uses[n]=0),e.refs[n]++)}_getNodeRef(e,n,i){if(e.refs[n]<=1)return i;const r=i.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[c,u]of o.children.entries())s(u,a.children[c])};return s(i,r),r.name+="_instance_"+e.uses[n]++,r}_invokeOne(e){const n=Object.values(this.plugins);n.push(this);for(let i=0;i<n.length;i++){const r=e(n[i]);if(r)return r}return null}_invokeAll(e){const n=Object.values(this.plugins);n.unshift(this);const i=[];for(let r=0;r<n.length;r++){const s=e(n[r]);s&&i.push(s)}return i}getDependency(e,n){const i=e+":"+n;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(n);break;case"node":r=this.loadNode(n);break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(n)});break;case"accessor":r=this.loadAccessor(n);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(n)});break;case"buffer":r=this.loadBuffer(n);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(n)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(n)});break;case"skin":r=this.loadSkin(n);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(n)});break;case"camera":r=this.loadCamera(n);break;default:throw new Error("Unknown type: "+e)}this.cache.add(i,r)}return r}getDependencies(e){let n=this.cache.get(e);if(!n){const i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];n=Promise.all(r.map(function(s,o){return i.getDependency(e,o)})),this.cache.add(e,n)}return n}loadBuffer(e){const n=this.json.buffers[e],i=this.fileLoader;if(n.type&&n.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+n.type+" buffer type is not supported.");if(n.uri===void 0&&e===0)return Promise.resolve(this.extensions[Jt.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){i.load(So.resolveURL(n.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+n.uri+'".'))})})}loadBufferView(e){const n=this.json.bufferViews[e];return this.getDependency("buffer",n.buffer).then(function(i){const r=n.byteLength||0,s=n.byteOffset||0;return i.slice(s,s+r)})}loadAccessor(e){const n=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0)return Promise.resolve(null);const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=I4[r.type],c=Jm[r.componentType],u=c.BYTES_PER_ELEMENT,h=u*l,f=r.byteOffset||0,d=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,p=r.normalized===!0;let m,g;if(d&&d!==h){const _=Math.floor(f/d),y="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+_+":"+r.count;let x=n.cache.get(y);x||(m=new c(a,_*d,r.count*d/u),x=new B6(m,d/u),n.cache.add(y,x)),g=new Zl(x,l,f%d/u,p)}else a===null?m=new c(r.count*l):m=new c(a,f,r.count*l),g=new On(m,l,p);if(r.sparse!==void 0){const _=I4.SCALAR,y=Jm[r.sparse.indices.componentType],x=r.sparse.indices.byteOffset||0,E=r.sparse.values.byteOffset||0,w=new y(o[1],x,r.sparse.count*_),S=new c(o[2],E,r.sparse.count*l);a!==null&&(g=new On(g.array.slice(),g.itemSize,g.normalized));for(let b=0,M=w.length;b<M;b++){const T=w[b];if(g.setX(T,S[b*l]),l>=2&&g.setY(T,S[b*l+1]),l>=3&&g.setZ(T,S[b*l+2]),l>=4&&g.setW(T,S[b*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return g})}loadTexture(e){const n=this.json,i=this.options,s=n.textures[e].source,o=n.images[s];let a=this.textureLoader;if(o.uri){const l=i.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,n,i){const r=this,s=this.json,o=s.textures[e],a=s.images[n],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(n,i).then(function(u){u.flipY=!1,o.name&&(u.name=o.name);const f=(s.samplers||{})[o.sampler]||{};return u.magFilter=S4[f.magFilter]||Mi,u.minFilter=S4[f.minFilter]||qy,u.wrapS=b4[f.wrapS]||ol,u.wrapT=b4[f.wrapT]||ol,r.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,n){const i=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(h=>h.clone());const o=r.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(o.bufferView!==void 0)l=i.getDependency("bufferView",o.bufferView).then(function(h){c=!0;const f=new Blob([h],{type:o.mimeType});return l=a.createObjectURL(f),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(l).then(function(h){return new Promise(function(f,d){let p=f;n.isImageBitmapLoader===!0&&(p=function(m){const g=new Mc(m);g.needsUpdate=!0,f(g)}),n.load(So.resolveURL(h,s.path),p,void 0,d)})}).then(function(h){return c===!0&&a.revokeObjectURL(l),h.userData.mimeType=o.mimeType||nme(o.uri),h}).catch(function(h){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),h});return this.sourceCache[e]=u,u}assignTexture(e,n,i,r){const s=this;return this.getDependency("texture",i.index).then(function(o){if(i.texCoord!==void 0&&i.texCoord!=0&&!(n==="aoMap"&&i.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+i.texCoord+" for texture "+n+" not yet supported."),s.extensions[Jt.KHR_TEXTURE_TRANSFORM]){const a=i.extensions!==void 0?i.extensions[Jt.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[Jt.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return r!==void 0&&(o.encoding=r),e[n]=o,o})}assignFinalMaterial(e){const n=e.geometry;let i=e.material;const r=n.attributes.tangent===void 0,s=n.attributes.color!==void 0,o=n.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new P3,Xp.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new Qu,Xp.prototype.copy.call(l,i),l.color.copy(i.color),this.cache.add(a,l)),i=l}if(r||s||o){let a="ClonedMaterial:"+i.uuid+":";i.isGLTFSpecularGlossinessMaterial&&(a+="specular-glossiness:"),r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}i.aoMap&&n.attributes.uv2===void 0&&n.attributes.uv!==void 0&&n.setAttribute("uv2",n.attributes.uv),e.material=i}getMaterialType(){return $d}loadMaterial(e){const n=this,i=this.json,r=this.extensions,s=i.materials[e];let o;const a={},l=s.extensions||{},c=[];if(l[Jt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const h=r[Jt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];o=h.getMaterialType(),c.push(h.extendParams(a,s,n))}else if(l[Jt.KHR_MATERIALS_UNLIT]){const h=r[Jt.KHR_MATERIALS_UNLIT];o=h.getMaterialType(),c.push(h.extendParams(a,s,n))}else{const h=s.pbrMetallicRoughness||{};if(a.color=new xt(1,1,1),a.opacity=1,Array.isArray(h.baseColorFactor)){const f=h.baseColorFactor;a.color.fromArray(f),a.opacity=f[3]}h.baseColorTexture!==void 0&&c.push(n.assignTexture(a,"map",h.baseColorTexture,yi)),a.metalness=h.metallicFactor!==void 0?h.metallicFactor:1,a.roughness=h.roughnessFactor!==void 0?h.roughnessFactor:1,h.metallicRoughnessTexture!==void 0&&(c.push(n.assignTexture(a,"metalnessMap",h.metallicRoughnessTexture)),c.push(n.assignTexture(a,"roughnessMap",h.metallicRoughnessTexture))),o=this._invokeOne(function(f){return f.getMaterialType&&f.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(f){return f.extendMaterialParams&&f.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=Po);const u=s.alphaMode||hw.OPAQUE;if(u===hw.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,u===hw.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==qa&&(c.push(n.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new mt(1,1),s.normalTexture.scale!==void 0)){const h=s.normalTexture.scale;a.normalScale.set(h,h)}return s.occlusionTexture!==void 0&&o!==qa&&(c.push(n.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==qa&&(a.emissive=new xt().fromArray(s.emissiveFactor)),s.emissiveTexture!==void 0&&o!==qa&&c.push(n.assignTexture(a,"emissiveMap",s.emissiveTexture,yi)),Promise.all(c).then(function(){let h;return o===fS?h=r[Jt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(a):h=new o(a),s.name&&(h.name=s.name),gu(h,s),n.associations.set(h,{materials:e}),s.extensions&&hp(r,h,s),h})}createUniqueName(e){const n=Id.sanitizeNodeName(e||"");let i=n;for(let r=1;this.nodeNamesUsed[i];++r)i=n+"_"+r;return this.nodeNamesUsed[i]=!0,i}loadGeometries(e){const n=this,i=this.extensions,r=this.primitiveCache;function s(a){return i[Jt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,n).then(function(l){return B4(l,a,n)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],u=tme(c),h=r[u];if(h)o.push(h.promise);else{let f;c.extensions&&c.extensions[Jt.KHR_DRACO_MESH_COMPRESSION]?f=s(c):f=B4(new ri,c,n),r[u]={primitive:c,promise:f},o.push(f)}}return Promise.all(o)}loadMesh(e){const n=this,i=this.json,r=this.extensions,s=i.meshes[e],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const u=o[l].material===void 0?Zpe(this.cache):this.getDependency("material",o[l].material);a.push(u)}return a.push(n.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],h=[];for(let d=0,p=u.length;d<p;d++){const m=u[d],g=o[d];let _;const y=c[d];if(g.mode===Pa.TRIANGLES||g.mode===Pa.TRIANGLE_STRIP||g.mode===Pa.TRIANGLE_FAN||g.mode===void 0)_=s.isSkinnedMesh===!0?new L3(m,y):new rt(m,y),_.isSkinnedMesh===!0&&!_.geometry.attributes.skinWeight.normalized&&_.normalizeSkinWeights(),g.mode===Pa.TRIANGLE_STRIP?_.geometry=R4(_.geometry,lN):g.mode===Pa.TRIANGLE_FAN&&(_.geometry=R4(_.geometry,U3));else if(g.mode===Pa.LINES)_=new I3(m,y);else if(g.mode===Pa.LINE_STRIP)_=new Yt(m,y);else if(g.mode===Pa.LINE_LOOP)_=new D6(m,y);else if(g.mode===Pa.POINTS)_=new V6(m,y);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+g.mode);Object.keys(_.geometry.morphAttributes).length>0&&eme(_,s),_.name=n.createUniqueName(s.name||"mesh_"+e),gu(_,s),g.extensions&&hp(r,_,g),n.assignFinalMaterial(_),h.push(_)}for(let d=0,p=h.length;d<p;d++)n.associations.set(h[d],{meshes:e,primitives:d});if(h.length===1)return h[0];const f=new el;n.associations.set(f,{meshes:e});for(let d=0,p=h.length;d<p;d++)f.add(h[d]);return f})}loadCamera(e){let n;const i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?n=new Hr(ct.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(n=new ua(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(n.name=this.createUniqueName(i.name)),gu(n,i),Promise.resolve(n)}loadSkin(e){const n=this.json.skins[e],i={joints:n.joints};return n.inverseBindMatrices===void 0?Promise.resolve(i):this.getDependency("accessor",n.inverseBindMatrices).then(function(r){return i.inverseBindMatrices=r,i})}loadAnimation(e){const i=this.json.animations[e],r=[],s=[],o=[],a=[],l=[];for(let c=0,u=i.channels.length;c<u;c++){const h=i.channels[c],f=i.samplers[h.sampler],d=h.target,p=d.node,m=i.parameters!==void 0?i.parameters[f.input]:f.input,g=i.parameters!==void 0?i.parameters[f.output]:f.output;r.push(this.getDependency("node",p)),s.push(this.getDependency("accessor",m)),o.push(this.getDependency("accessor",g)),a.push(f),l.push(d)}return Promise.all([Promise.all(r),Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const u=c[0],h=c[1],f=c[2],d=c[3],p=c[4],m=[];for(let _=0,y=u.length;_<y;_++){const x=u[_],E=h[_],w=f[_],S=d[_],b=p[_];if(x===void 0)continue;x.updateMatrix();let M;switch(Nl[b.path]){case Nl.weights:M=R3;break;case Nl.rotation:M=O_;break;case Nl.position:case Nl.scale:default:M=O3;break}const T=x.name?x.name:x.uuid,B=S.interpolation!==void 0?Kpe[S.interpolation]:b3,L=[];Nl[b.path]===Nl.weights?x.traverse(function(U){U.morphTargetInfluences&&L.push(U.name?U.name:U.uuid)}):L.push(T);let F=w.array;if(w.normalized){const U=pS(F.constructor),k=new Float32Array(F.length);for(let X=0,Y=F.length;X<Y;X++)k[X]=F[X]*U;F=k}for(let U=0,k=L.length;U<k;U++){const X=new M(L[U]+"."+Nl[b.path],E.array,F,B);S.interpolation==="CUBICSPLINE"&&(X.createInterpolant=function(Z){const G=this instanceof O_?Jpe:JG;return new G(this.times,this.values,this.getValueSize()/3,Z)},X.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),m.push(X)}}const g=i.name?i.name:"animation_"+e;return new y3(g,void 0,m)})}createNodeMesh(e){const n=this.json,i=this,r=n.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(s){const o=i._getNodeRef(i.meshCache,r.mesh,s);return r.weights!==void 0&&o.traverse(function(a){if(!!a.isMesh)for(let l=0,c=r.weights.length;l<c;l++)a.morphTargetInfluences[l]=r.weights[l]}),o})}loadNode(e){const n=this.json,i=this.extensions,r=this,s=n.nodes[e],o=s.name?r.createUniqueName(s.name):"";return function(){const a=[],l=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(r.getDependency("camera",s.camera).then(function(c){return r._getNodeRef(r.cameraCache,s.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),Promise.all(a)}().then(function(a){let l;if(s.isBone===!0?l=new D_:a.length>1?l=new el:a.length===1?l=a[0]:l=new hr,l!==a[0])for(let c=0,u=a.length;c<u;c++)l.add(a[c]);if(s.name&&(l.userData.name=s.name,l.name=o),gu(l,s),s.extensions&&hp(i,l,s),s.matrix!==void 0){const c=new Ze;c.fromArray(s.matrix),l.applyMatrix4(c)}else s.translation!==void 0&&l.position.fromArray(s.translation),s.rotation!==void 0&&l.quaternion.fromArray(s.rotation),s.scale!==void 0&&l.scale.fromArray(s.scale);return r.associations.has(l)||r.associations.set(l,{}),r.associations.get(l).nodes=e,l})}loadScene(e){const n=this.json,i=this.extensions,r=this.json.scenes[e],s=this,o=new el;r.name&&(o.name=s.createUniqueName(r.name)),gu(o,r),r.extensions&&hp(i,o,r);const a=r.nodes||[],l=[];for(let c=0,u=a.length;c<u;c++)l.push(KG(a[c],o,n,s));return Promise.all(l).then(function(){const c=u=>{const h=new Map;for(const[f,d]of s.associations)(f instanceof Xp||f instanceof Mc)&&h.set(f,d);return u.traverse(f=>{const d=s.associations.get(f);d!=null&&h.set(f,d)}),h};return s.associations=c(o),o})}}function KG(t,e,n,i){const r=n.nodes[t];return i.getDependency("node",t).then(function(s){if(r.skin===void 0)return s;let o;return i.getDependency("skin",r.skin).then(function(a){o=a;const l=[];for(let c=0,u=o.joints.length;c<u;c++)l.push(i.getDependency("node",o.joints[c]));return Promise.all(l)}).then(function(a){return s.traverse(function(l){if(!l.isMesh)return;const c=[],u=[];for(let h=0,f=a.length;h<f;h++){const d=a[h];if(d){c.push(d);const p=new Ze;o.inverseBindMatrices!==void 0&&p.fromArray(o.inverseBindMatrices.array,h*16),u.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',o.joints[h])}l.bind(new F3(c,u),l.matrixWorld)}),s})}).then(function(s){e.add(s);const o=[];if(r.children){const a=r.children;for(let l=0,c=a.length;l<c;l++){const u=a[l];o.push(KG(u,s,n,i))}}return Promise.all(o)})}function rme(t,e,n){const i=e.attributes,r=new di;if(i.POSITION!==void 0){const a=n.json.accessors[i.POSITION],l=a.min,c=a.max;if(l!==void 0&&c!==void 0){if(r.set(new $(l[0],l[1],l[2]),new $(c[0],c[1],c[2])),a.normalized){const u=pS(Jm[a.componentType]);r.min.multiplyScalar(u),r.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new $,l=new $;for(let c=0,u=s.length;c<u;c++){const h=s[c];if(h.POSITION!==void 0){const f=n.json.accessors[h.POSITION],d=f.min,p=f.max;if(d!==void 0&&p!==void 0){if(l.setX(Math.max(Math.abs(d[0]),Math.abs(p[0]))),l.setY(Math.max(Math.abs(d[1]),Math.abs(p[1]))),l.setZ(Math.max(Math.abs(d[2]),Math.abs(p[2]))),f.normalized){const m=pS(Jm[f.componentType]);l.multiplyScalar(m)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}t.boundingBox=r;const o=new to;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,t.boundingSphere=o}function B4(t,e,n){const i=e.attributes,r=[];function s(o,a){return n.getDependency("accessor",o).then(function(l){t.setAttribute(a,l)})}for(const o in i){const a=dS[o]||o.toLowerCase();a in t.attributes||r.push(s(i[o],a))}if(e.indices!==void 0&&!t.index){const o=n.getDependency("accessor",e.indices).then(function(a){t.setIndex(a)});r.push(o)}return gu(t,e),rme(t,e,n),Promise.all(r).then(function(){return e.targets!==void 0?$pe(t,e.targets,n):t})}function R4(t,e){let n=t.getIndex();if(n===null){const o=[],a=t.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);t.setIndex(o),n=t.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),t}const i=n.count-2,r=[];if(e===U3)for(let o=1;o<=i;o++)r.push(n.getX(0)),r.push(n.getX(o)),r.push(n.getX(o+1));else for(let o=0;o<i;o++)o%2===0?(r.push(n.getX(o)),r.push(n.getX(o+1)),r.push(n.getX(o+2))):(r.push(n.getX(o+2)),r.push(n.getX(o+1)),r.push(n.getX(o)));r.length/3!==i&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=t.clone();return s.setIndex(r),s}class sme extends ri{constructor(e,n,i,r){super();const s=[],o=[],a=[],l=new $,c=new Ze;c.makeRotationFromEuler(i),c.setPosition(n);const u=new Ze;u.copy(c).invert(),h(),this.setAttribute("position",new ur(s,3)),this.setAttribute("normal",new ur(o,3)),this.setAttribute("uv",new ur(a,2));function h(){let m,g=[];const _=new $,y=new $;if(e.geometry.isGeometry===!0){console.error("THREE.DecalGeometry no longer supports THREE.Geometry. Use BufferGeometry instead.");return}const x=e.geometry,E=x.attributes.position,w=x.attributes.normal;if(x.index!==null){const S=x.index;for(m=0;m<S.count;m++)_.fromBufferAttribute(E,S.getX(m)),y.fromBufferAttribute(w,S.getX(m)),f(g,_,y)}else for(m=0;m<E.count;m++)_.fromBufferAttribute(E,m),y.fromBufferAttribute(w,m),f(g,_,y);for(g=d(g,l.set(1,0,0)),g=d(g,l.set(-1,0,0)),g=d(g,l.set(0,1,0)),g=d(g,l.set(0,-1,0)),g=d(g,l.set(0,0,1)),g=d(g,l.set(0,0,-1)),m=0;m<g.length;m++){const S=g[m];a.push(.5+S.position.x/r.x,.5+S.position.y/r.y),S.position.applyMatrix4(c),s.push(S.position.x,S.position.y,S.position.z),o.push(S.normal.x,S.normal.y,S.normal.z)}}function f(m,g,_){g.applyMatrix4(e.matrixWorld),g.applyMatrix4(u),_.transformDirection(e.matrixWorld),m.push(new P4(g.clone(),_.clone()))}function d(m,g){const _=[],y=.5*Math.abs(r.dot(g));for(let x=0;x<m.length;x+=3){let E,w,S,b=0,M,T,B,L;const F=m[x+0].position.dot(g)-y,U=m[x+1].position.dot(g)-y,k=m[x+2].position.dot(g)-y;switch(E=F>0,w=U>0,S=k>0,b=(E?1:0)+(w?1:0)+(S?1:0),b){case 0:{_.push(m[x]),_.push(m[x+1]),_.push(m[x+2]);break}case 1:{if(E&&(M=m[x+1],T=m[x+2],B=p(m[x],M,g,y),L=p(m[x],T,g,y)),w){M=m[x],T=m[x+2],B=p(m[x+1],M,g,y),L=p(m[x+1],T,g,y),_.push(B),_.push(T.clone()),_.push(M.clone()),_.push(T.clone()),_.push(B.clone()),_.push(L);break}S&&(M=m[x],T=m[x+1],B=p(m[x+2],M,g,y),L=p(m[x+2],T,g,y)),_.push(M.clone()),_.push(T.clone()),_.push(B),_.push(L),_.push(B.clone()),_.push(T.clone());break}case 2:{E||(M=m[x].clone(),T=p(M,m[x+1],g,y),B=p(M,m[x+2],g,y),_.push(M),_.push(T),_.push(B)),w||(M=m[x+1].clone(),T=p(M,m[x+2],g,y),B=p(M,m[x],g,y),_.push(M),_.push(T),_.push(B)),S||(M=m[x+2].clone(),T=p(M,m[x],g,y),B=p(M,m[x+1],g,y),_.push(M),_.push(T),_.push(B));break}}}return _}function p(m,g,_,y){const x=m.position.dot(_)-y,E=g.position.dot(_)-y,w=x/(x-E);return new P4(new $(m.position.x+w*(g.position.x-m.position.x),m.position.y+w*(g.position.y-m.position.y),m.position.z+w*(g.position.z-m.position.z)),new $(m.normal.x+w*(g.normal.x-m.normal.x),m.normal.y+w*(g.normal.y-m.normal.y),m.normal.z+w*(g.normal.z-m.normal.z)))}}}class P4{constructor(e,n){this.position=e,this.normal=n}clone(){return new this.constructor(this.position.clone(),this.normal.clone())}}class ome extends M6{constructor(e,n){const{bevelEnabled:i=!1,bevelSize:r=8,bevelThickness:s=10,font:o,height:a=50,size:l=100,lineHeight:c=1,letterSpacing:u=0,...h}=n,f=o.generateShapes(e,l,{lineHeight:c,letterSpacing:u});super(f,{...h,bevelEnabled:i,bevelSize:r,bevelThickness:s,depth:a}),this.type="TextGeometry"}}const ame={uniforms:{tDiffuse:{value:null}},vertexShader:["varying vec2 vUv;","void main() {","	vUv = uv;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","	vec4 tex = texture2D( tDiffuse, vUv );","	gl_FragColor = LinearTosRGB( tex );","}"].join(`
`)},lme={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`
      varying vec2 vUv;

      void main() {

        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

      }
  `,fragmentShader:`
    uniform sampler2D tDiffuse;
    uniform float h;

    varying vec2 vUv;

    void main() {

    	vec4 sum = vec4( 0.0 );

    	sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

    	gl_FragColor = sum;

    }
  `},cme={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`
    varying vec2 vUv;

    void main() {

      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }
  `,fragmentShader:`

  uniform sampler2D tDiffuse;
  uniform float v;

  varying vec2 vUv;

  void main() {

    vec4 sum = vec4( 0.0 );

    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

    gl_FragColor = sum;

  }
  `},ume=(()=>{const t=new C6,e=new $,n=new $,i=new $,r=new $,s=new $,o=new $,a=new $,l=new $,c=new $,u=new $,h=new $,f=new $,d=new $,p=new $;class m{constructor(_,y,x){this.camera=_,this.scene=y,this.startPoint=new $,this.endPoint=new $,this.collection=[],this.deep=x||Number.MAX_VALUE}select(_,y){return this.startPoint=_||this.startPoint,this.endPoint=y||this.endPoint,this.collection=[],this.updateFrustum(this.startPoint,this.endPoint),this.searchChildInFrustum(t,this.scene),this.collection}updateFrustum(_,y){if(_=_||this.startPoint,y=y||this.endPoint,_.x===y.x&&(y.x+=Number.EPSILON),_.y===y.y&&(y.y+=Number.EPSILON),this.camera.updateProjectionMatrix(),this.camera.updateMatrixWorld(),this.camera.isPerspectiveCamera){n.copy(_),n.x=Math.min(_.x,y.x),n.y=Math.max(_.y,y.y),y.x=Math.max(_.x,y.x),y.y=Math.min(_.y,y.y),i.setFromMatrixPosition(this.camera.matrixWorld),r.copy(n),s.set(y.x,n.y,0),o.copy(y),a.set(n.x,y.y,0),r.unproject(this.camera),s.unproject(this.camera),o.unproject(this.camera),a.unproject(this.camera),f.copy(r).sub(i),d.copy(s).sub(i),p.copy(o).sub(i),f.normalize(),d.normalize(),p.normalize(),f.multiplyScalar(this.deep),d.multiplyScalar(this.deep),p.multiplyScalar(this.deep),f.add(i),d.add(i),p.add(i);var x=t.planes;x[0].setFromCoplanarPoints(i,r,s),x[1].setFromCoplanarPoints(i,s,o),x[2].setFromCoplanarPoints(o,a,i),x[3].setFromCoplanarPoints(a,r,i),x[4].setFromCoplanarPoints(s,o,a),x[5].setFromCoplanarPoints(p,d,f),x[5].normal.multiplyScalar(-1)}else if(this.camera.isOrthographicCamera){const E=Math.min(_.x,y.x),w=Math.max(_.y,y.y),S=Math.max(_.x,y.x),b=Math.min(_.y,y.y);r.set(E,w,-1),s.set(S,w,-1),o.set(S,b,-1),a.set(E,b,-1),l.set(E,w,1),c.set(S,w,1),u.set(S,b,1),h.set(E,b,1),r.unproject(this.camera),s.unproject(this.camera),o.unproject(this.camera),a.unproject(this.camera),l.unproject(this.camera),c.unproject(this.camera),u.unproject(this.camera),h.unproject(this.camera);var x=t.planes;x[0].setFromCoplanarPoints(r,l,c),x[1].setFromCoplanarPoints(s,c,u),x[2].setFromCoplanarPoints(u,h,a),x[3].setFromCoplanarPoints(h,l,r),x[4].setFromCoplanarPoints(s,o,a),x[5].setFromCoplanarPoints(u,c,l),x[5].normal.multiplyScalar(-1)}else console.error("THREE.SelectionBox: Unsupported camera type.")}searchChildInFrustum(_,y){if((y.isMesh||y.isLine||y.isPoints)&&y.material!==void 0&&(y.geometry.boundingSphere===null&&y.geometry.computeBoundingSphere(),e.copy(y.geometry.boundingSphere.center),e.applyMatrix4(y.matrixWorld),_.containsPoint(e)&&this.collection.push(y)),y.children.length>0)for(let x=0;x<y.children.length;x++)this.searchChildInFrustum(_,y.children[x])}}return m})();function ZG(t,e,n){const i=n.length-t-1;if(e>=n[i])return i-1;if(e<=n[t])return t;let r=t,s=i,o=Math.floor((r+s)/2);for(;e<n[o]||e>=n[o+1];)e<n[o]?s=o:r=o,o=Math.floor((r+s)/2);return o}function hme(t,e,n,i){const r=[],s=[],o=[];r[0]=1;for(let a=1;a<=n;++a){s[a]=e-i[t+1-a],o[a]=i[t+a]-e;let l=0;for(let c=0;c<a;++c){const u=o[c+1],h=s[a-c],f=r[c]/(u+h);r[c]=l+u*f,l=h*f}r[a]=l}return r}function fme(t,e,n,i){const r=ZG(t,i,e),s=hme(r,i,t,e),o=new dr(0,0,0,0);for(let a=0;a<=t;++a){const l=n[r-t+a],c=s[a],u=l.w*c;o.x+=l.x*u,o.y+=l.y*u,o.z+=l.z*u,o.w+=l.w*c}return o}function dme(t,e,n,i,r){const s=[];for(let f=0;f<=n;++f)s[f]=0;const o=[];for(let f=0;f<=i;++f)o[f]=s.slice(0);const a=[];for(let f=0;f<=n;++f)a[f]=s.slice(0);a[0][0]=1;const l=s.slice(0),c=s.slice(0);for(let f=1;f<=n;++f){l[f]=e-r[t+1-f],c[f]=r[t+f]-e;let d=0;for(let p=0;p<f;++p){const m=c[p+1],g=l[f-p];a[f][p]=m+g;const _=a[p][f-1]/a[f][p];a[p][f]=d+m*_,d=g*_}a[f][f]=d}for(let f=0;f<=n;++f)o[0][f]=a[f][n];for(let f=0;f<=n;++f){let d=0,p=1;const m=[];for(let g=0;g<=n;++g)m[g]=s.slice(0);m[0][0]=1;for(let g=1;g<=i;++g){let _=0;const y=f-g,x=n-g;f>=g&&(m[p][0]=m[d][0]/a[x+1][y],_=m[p][0]*a[y][x]);const E=y>=-1?1:-y,w=f-1<=x?g-1:n-f;for(let S=E;S<=w;++S)m[p][S]=(m[d][S]-m[d][S-1])/a[x+1][y+S],_+=m[p][S]*a[y+S][x];f<=x&&(m[p][g]=-m[d][g-1]/a[x+1][f],_+=m[p][g]*a[f][x]),o[g][f]=_;var u=d;d=p,p=u}}var h=n;for(let f=1;f<=i;++f){for(let d=0;d<=n;++d)o[f][d]*=h;h*=n-f}return o}function pme(t,e,n,i,r){const s=r<t?r:t,o=[],a=ZG(t,i,e),l=dme(a,i,t,s,e),c=[];for(let h=0;h<n.length;++h){var u=n[h].clone();const f=u.w;u.x*=f,u.y*=f,u.z*=f,c[h]=u}for(let h=0;h<=s;++h){var u=c[a-t].clone().multiplyScalar(l[h][0]);for(let d=1;d<=t;++d)u.add(c[a-t+d].clone().multiplyScalar(l[h][d]));o[h]=u}for(let h=s+1;h<=r+1;++h)o[h]=new dr(0,0,0);return o}function mme(t,e){let n=1;for(let r=2;r<=t;++r)n*=r;let i=1;for(let r=2;r<=e;++r)i*=r;for(let r=2;r<=t-e;++r)i*=r;return n/i}function Ame(t){const e=t.length,n=[],i=[];for(let s=0;s<e;++s){const o=t[s];n[s]=new $(o.x,o.y,o.z),i[s]=o.w}const r=[];for(let s=0;s<e;++s){const o=n[s].clone();for(let a=1;a<=s;++a)o.sub(r[s-a].clone().multiplyScalar(mme(s,a)*i[a]));r[s]=o.divideScalar(i[0])}return r}function gme(t,e,n,i,r){const s=pme(t,e,n,i,r);return Ame(s)}class D4 extends _6{constructor(e,n,i,r,s){super(),this.degree=e,this.knots=n,this.controlPoints=[],this.startKnot=r||0,this.endKnot=s||this.knots.length-1;for(let o=0;o<i.length;++o){const a=i[o];this.controlPoints[o]=new dr(a.x,a.y,a.z,a.w)}}getPoint(e,n){const i=n||new $,r=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),s=fme(this.degree,this.knots,this.controlPoints,r);return s.w!=1&&s.divideScalar(s.w),i.set(s.x,s.y,s.z)}getTangent(e,n){const i=n||new $,r=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),s=gme(this.degree,this.knots,this.controlPoints,r,1);return i.copy(s[1]).normalize(),i}}let qt,ei,zr;class xI extends Zd{constructor(e){super(e)}load(e,n,i,r){const s=this,o=s.path===""?So.extractUrlBase(e):s.path,a=new ca(this.manager);a.setPath(s.path),a.setResponseType("arraybuffer"),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(l){try{n(s.parse(l,o))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},i,r)}parse(e,n){if(wme(e))qt=new Eme().parse(e);else{const r=nz(e);if(!Mme(r))throw new Error("THREE.FBXLoader: Unknown format.");if(L4(r)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+L4(r));qt=new xme().parse(r)}const i=new t0(this.manager).setPath(this.resourcePath||n).setCrossOrigin(this.crossOrigin);return new vme(i,this.manager).parse(qt)}}class vme{constructor(e,n){this.textureLoader=e,this.manager=n}parse(){ei=this.parseConnections();const e=this.parseImages(),n=this.parseTextures(e),i=this.parseMaterials(n),r=this.parseDeformers(),s=new _me().parse(r);return this.parseScene(r,s,i),zr}parseConnections(){const e=new Map;return"Connections"in qt&&qt.Connections.connections.forEach(function(i){const r=i[0],s=i[1],o=i[2];e.has(r)||e.set(r,{parents:[],children:[]});const a={ID:s,relationship:o};e.get(r).parents.push(a),e.has(s)||e.set(s,{parents:[],children:[]});const l={ID:r,relationship:o};e.get(s).children.push(l)}),e}parseImages(){const e={},n={};if("Video"in qt.Objects){const i=qt.Objects.Video;for(const r in i){const s=i[r],o=parseInt(r);if(e[o]=s.RelativeFilename||s.Filename,"Content"in s){const a=s.Content instanceof ArrayBuffer&&s.Content.byteLength>0,l=typeof s.Content=="string"&&s.Content!=="";if(a||l){const c=this.parseImage(i[r]);n[s.RelativeFilename||s.Filename]=c}}}}for(const i in e){const r=e[i];n[r]!==void 0?e[i]=n[r]:e[i]=e[i].split("\\").pop()}return e}parseImage(e){const n=e.Content,i=e.RelativeFilename||e.Filename,r=i.slice(i.lastIndexOf(".")+1).toLowerCase();let s;switch(r){case"bmp":s="image/bmp";break;case"jpg":case"jpeg":s="image/jpeg";break;case"png":s="image/png";break;case"tif":s="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",i),s="image/tga";break;default:console.warn('FBXLoader: Image type "'+r+'" is not supported.');return}if(typeof n=="string")return"data:"+s+";base64,"+n;{const o=new Uint8Array(n);return window.URL.createObjectURL(new Blob([o],{type:s}))}}parseTextures(e){const n=new Map;if("Texture"in qt.Objects){const i=qt.Objects.Texture;for(const r in i){const s=this.parseTexture(i[r],e);n.set(parseInt(r),s)}}return n}parseTexture(e,n){const i=this.loadTexture(e,n);i.ID=e.id,i.name=e.attrName;const r=e.WrapModeU,s=e.WrapModeV,o=r!==void 0?r.value:0,a=s!==void 0?s.value:0;if(i.wrapS=o===0?ol:F_,i.wrapT=a===0?ol:F_,"Scaling"in e){const l=e.Scaling.value;i.repeat.x=l[0],i.repeat.y=l[1]}return i}loadTexture(e,n){let i;const r=this.textureLoader.path,s=ei.get(e.id).children;s!==void 0&&s.length>0&&n[s[0].ID]!==void 0&&(i=n[s[0].ID],(i.indexOf("blob:")===0||i.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let o;const a=e.FileName.slice(-3).toLowerCase();if(a==="tga"){const l=this.manager.getHandler(".tga");l===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),o=new Mc):(l.setPath(this.textureLoader.path),o=l.load(i))}else a==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),o=new Mc):o=this.textureLoader.load(i);return this.textureLoader.setPath(r),o}parseMaterials(e){const n=new Map;if("Material"in qt.Objects){const i=qt.Objects.Material;for(const r in i){const s=this.parseMaterial(i[r],e);s!==null&&n.set(parseInt(r),s)}}return n}parseMaterial(e,n){const i=e.id,r=e.attrName;let s=e.ShadingModel;if(typeof s=="object"&&(s=s.value),!ei.has(i))return null;const o=this.parseParameters(e,n,i);let a;switch(s.toLowerCase()){case"phong":a=new Yp;break;case"lambert":a=new k6;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',s),a=new Yp;break}return a.setValues(o),a.name=r,a}parseParameters(e,n,i){const r={};e.BumpFactor&&(r.bumpScale=e.BumpFactor.value),e.Diffuse?r.color=new xt().fromArray(e.Diffuse.value):e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(r.color=new xt().fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(r.displacementScale=e.DisplacementFactor.value),e.Emissive?r.emissive=new xt().fromArray(e.Emissive.value):e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(r.emissive=new xt().fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(r.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(r.opacity=parseFloat(e.Opacity.value)),r.opacity<1&&(r.transparent=!0),e.ReflectionFactor&&(r.reflectivity=e.ReflectionFactor.value),e.Shininess&&(r.shininess=e.Shininess.value),e.Specular?r.specular=new xt().fromArray(e.Specular.value):e.SpecularColor&&e.SpecularColor.type==="Color"&&(r.specular=new xt().fromArray(e.SpecularColor.value));const s=this;return ei.get(i).children.forEach(function(o){const a=o.relationship;switch(a){case"Bump":r.bumpMap=s.getTexture(n,o.ID);break;case"Maya|TEX_ao_map":r.aoMap=s.getTexture(n,o.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":r.map=s.getTexture(n,o.ID),r.map!==void 0&&(r.map.encoding=yi);break;case"DisplacementColor":r.displacementMap=s.getTexture(n,o.ID);break;case"EmissiveColor":r.emissiveMap=s.getTexture(n,o.ID),r.emissiveMap!==void 0&&(r.emissiveMap.encoding=yi);break;case"NormalMap":case"Maya|TEX_normal_map":r.normalMap=s.getTexture(n,o.ID);break;case"ReflectionColor":r.envMap=s.getTexture(n,o.ID),r.envMap!==void 0&&(r.envMap.mapping=M3,r.envMap.encoding=yi);break;case"SpecularColor":r.specularMap=s.getTexture(n,o.ID),r.specularMap!==void 0&&(r.specularMap.encoding=yi);break;case"TransparentColor":case"TransparencyFactor":r.alphaMap=s.getTexture(n,o.ID),r.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",a);break}}),r}getTexture(e,n){return"LayeredTexture"in qt.Objects&&n in qt.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),n=ei.get(n).children[0].ID),e.get(n)}parseDeformers(){const e={},n={};if("Deformer"in qt.Objects){const i=qt.Objects.Deformer;for(const r in i){const s=i[r],o=ei.get(parseInt(r));if(s.attrType==="Skin"){const a=this.parseSkeleton(o,i);a.ID=r,o.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),a.geometryID=o.parents[0].ID,e[r]=a}else if(s.attrType==="BlendShape"){const a={id:r};a.rawTargets=this.parseMorphTargets(o,i),a.id=r,o.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),n[r]=a}}}return{skeletons:e,morphTargets:n}}parseSkeleton(e,n){const i=[];return e.children.forEach(function(r){const s=n[r.ID];if(s.attrType!=="Cluster")return;const o={ID:r.ID,indices:[],weights:[],transformLink:new Ze().fromArray(s.TransformLink.a)};"Indexes"in s&&(o.indices=s.Indexes.a,o.weights=s.Weights.a),i.push(o)}),{rawBones:i,bones:[]}}parseMorphTargets(e,n){const i=[];for(let r=0;r<e.children.length;r++){const s=e.children[r],o=n[s.ID],a={name:o.attrName,initialWeight:o.DeformPercent,id:o.id,fullWeights:o.FullWeights.a};if(o.attrType!=="BlendShapeChannel")return;a.geoID=ei.get(parseInt(s.ID)).children.filter(function(l){return l.relationship===void 0})[0].ID,i.push(a)}return i}parseScene(e,n,i){zr=new el;const r=this.parseModels(e.skeletons,n,i),s=qt.Objects.Model,o=this;r.forEach(function(l){const c=s[l.ID];o.setLookAtProperties(l,c),ei.get(l.ID).parents.forEach(function(h){const f=r.get(h.ID);f!==void 0&&f.add(l)}),l.parent===null&&zr.add(l)}),this.bindSkeleton(e.skeletons,n,r),this.createAmbientLight(),zr.traverse(function(l){if(l.userData.transformData){l.parent&&(l.userData.transformData.parentMatrix=l.parent.matrix,l.userData.transformData.parentMatrixWorld=l.parent.matrixWorld);const c=ez(l.userData.transformData);l.applyMatrix4(c),l.updateWorldMatrix()}});const a=new yme().parse();zr.children.length===1&&zr.children[0].isGroup&&(zr.children[0].animations=a,zr=zr.children[0]),zr.animations=a}parseModels(e,n,i){const r=new Map,s=qt.Objects.Model;for(const o in s){const a=parseInt(o),l=s[o],c=ei.get(a);let u=this.buildSkeleton(c,e,a,l.attrName);if(!u){switch(l.attrType){case"Camera":u=this.createCamera(c);break;case"Light":u=this.createLight(c);break;case"Mesh":u=this.createMesh(c,n,i);break;case"NurbsCurve":u=this.createCurve(c,n);break;case"LimbNode":case"Root":u=new D_;break;case"Null":default:u=new el;break}u.name=l.attrName?Id.sanitizeNodeName(l.attrName):"",u.ID=a}this.getTransformData(u,l),r.set(a,u)}return r}buildSkeleton(e,n,i,r){let s=null;return e.parents.forEach(function(o){for(const a in n){const l=n[a];l.rawBones.forEach(function(c,u){if(c.ID===o.ID){const h=s;s=new D_,s.matrixWorld.copy(c.transformLink),s.name=r?Id.sanitizeNodeName(r):"",s.ID=i,l.bones[u]=s,h!==null&&s.add(h)}})}}),s}createCamera(e){let n,i;if(e.children.forEach(function(r){const s=qt.Objects.NodeAttribute[r.ID];s!==void 0&&(i=s)}),i===void 0)n=new hr;else{let r=0;i.CameraProjectionType!==void 0&&i.CameraProjectionType.value===1&&(r=1);let s=1;i.NearPlane!==void 0&&(s=i.NearPlane.value/1e3);let o=1e3;i.FarPlane!==void 0&&(o=i.FarPlane.value/1e3);let a=window.innerWidth,l=window.innerHeight;i.AspectWidth!==void 0&&i.AspectHeight!==void 0&&(a=i.AspectWidth.value,l=i.AspectHeight.value);const c=a/l;let u=45;i.FieldOfView!==void 0&&(u=i.FieldOfView.value);const h=i.FocalLength?i.FocalLength.value:null;switch(r){case 0:n=new Hr(u,c,s,o),h!==null&&n.setFocalLength(h);break;case 1:n=new ua(-a/2,a/2,l/2,-l/2,s,o);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+r+"."),n=new hr;break}}return n}createLight(e){let n,i;if(e.children.forEach(function(r){const s=qt.Objects.NodeAttribute[r.ID];s!==void 0&&(i=s)}),i===void 0)n=new hr;else{let r;i.LightType===void 0?r=0:r=i.LightType.value;let s=16777215;i.Color!==void 0&&(s=new xt().fromArray(i.Color.value));let o=i.Intensity===void 0?1:i.Intensity.value/100;i.CastLightOnObject!==void 0&&i.CastLightOnObject.value===0&&(o=0);let a=0;i.FarAttenuationEnd!==void 0&&(i.EnableFarAttenuation!==void 0&&i.EnableFarAttenuation.value===0?a=0:a=i.FarAttenuationEnd.value);const l=1;switch(r){case 0:n=new U_(s,o,a,l);break;case 1:n=new w3(s,o);break;case 2:let c=Math.PI/3;i.InnerAngle!==void 0&&(c=ct.degToRad(i.InnerAngle.value));let u=0;i.OuterAngle!==void 0&&(u=ct.degToRad(i.OuterAngle.value),u=Math.max(u,1)),n=new k3(s,o,a,c,u,l);break;default:console.warn("THREE.FBXLoader: Unknown light type "+i.LightType.value+", defaulting to a PointLight."),n=new U_(s,o);break}i.CastShadows!==void 0&&i.CastShadows.value===1&&(n.castShadow=!0)}return n}createMesh(e,n,i){let r,s=null,o=null;const a=[];return e.children.forEach(function(l){n.has(l.ID)&&(s=n.get(l.ID)),i.has(l.ID)&&a.push(i.get(l.ID))}),a.length>1?o=a:a.length>0?o=a[0]:(o=new Yp({color:13421772}),a.push(o)),"color"in s.attributes&&a.forEach(function(l){l.vertexColors=!0}),s.FBX_Deformer?(r=new L3(s,o),r.normalizeSkinWeights()):r=new rt(s,o),r}createCurve(e,n){const i=e.children.reduce(function(s,o){return n.has(o.ID)&&(s=n.get(o.ID)),s},null),r=new Qu({color:3342591,linewidth:1});return new Yt(i,r)}getTransformData(e,n){const i={};"InheritType"in n&&(i.inheritType=parseInt(n.InheritType.value)),"RotationOrder"in n?i.eulerOrder=tz(n.RotationOrder.value):i.eulerOrder="ZYX","Lcl_Translation"in n&&(i.translation=n.Lcl_Translation.value),"PreRotation"in n&&(i.preRotation=n.PreRotation.value),"Lcl_Rotation"in n&&(i.rotation=n.Lcl_Rotation.value),"PostRotation"in n&&(i.postRotation=n.PostRotation.value),"Lcl_Scaling"in n&&(i.scale=n.Lcl_Scaling.value),"ScalingOffset"in n&&(i.scalingOffset=n.ScalingOffset.value),"ScalingPivot"in n&&(i.scalingPivot=n.ScalingPivot.value),"RotationOffset"in n&&(i.rotationOffset=n.RotationOffset.value),"RotationPivot"in n&&(i.rotationPivot=n.RotationPivot.value),e.userData.transformData=i}setLookAtProperties(e,n){"LookAtProperty"in n&&ei.get(e.ID).children.forEach(function(r){if(r.relationship==="LookAtProperty"){const s=qt.Objects.Model[r.ID];if("Lcl_Translation"in s){const o=s.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(o),zr.add(e.target)):e.lookAt(new $().fromArray(o))}}})}bindSkeleton(e,n,i){const r=this.parsePoseNodes();for(const s in e){const o=e[s];ei.get(parseInt(o.ID)).parents.forEach(function(l){if(n.has(l.ID)){const c=l.ID;ei.get(c).parents.forEach(function(h){i.has(h.ID)&&i.get(h.ID).bind(new F3(o.bones),r[h.ID])})}})}}parsePoseNodes(){const e={};if("Pose"in qt.Objects){const n=qt.Objects.Pose;for(const i in n)if(n[i].attrType==="BindPose"&&n[i].NbPoseNodes>0){const r=n[i].PoseNode;Array.isArray(r)?r.forEach(function(s){e[s.Node]=new Ze().fromArray(s.Matrix.a)}):e[r.Node]=new Ze().fromArray(r.Matrix.a)}}return e}createAmbientLight(){if("GlobalSettings"in qt&&"AmbientColor"in qt.GlobalSettings){const e=qt.GlobalSettings.AmbientColor.value,n=e[0],i=e[1],r=e[2];if(n!==0||i!==0||r!==0){const s=new xt(n,i,r);zr.add(new u6(s,1))}}}}class _me{parse(e){const n=new Map;if("Geometry"in qt.Objects){const i=qt.Objects.Geometry;for(const r in i){const s=ei.get(parseInt(r)),o=this.parseGeometry(s,i[r],e);n.set(parseInt(r),o)}}return n}parseGeometry(e,n,i){switch(n.attrType){case"Mesh":return this.parseMeshGeometry(e,n,i);case"NurbsCurve":return this.parseNurbsGeometry(n)}}parseMeshGeometry(e,n,i){const r=i.skeletons,s=[],o=e.parents.map(function(h){return qt.Objects.Model[h.ID]});if(o.length===0)return;const a=e.children.reduce(function(h,f){return r[f.ID]!==void 0&&(h=r[f.ID]),h},null);e.children.forEach(function(h){i.morphTargets[h.ID]!==void 0&&s.push(i.morphTargets[h.ID])});const l=o[0],c={};"RotationOrder"in l&&(c.eulerOrder=tz(l.RotationOrder.value)),"InheritType"in l&&(c.inheritType=parseInt(l.InheritType.value)),"GeometricTranslation"in l&&(c.translation=l.GeometricTranslation.value),"GeometricRotation"in l&&(c.rotation=l.GeometricRotation.value),"GeometricScaling"in l&&(c.scale=l.GeometricScaling.value);const u=ez(c);return this.genGeometry(n,a,s,u)}genGeometry(e,n,i,r){const s=new ri;e.attrName&&(s.name=e.attrName);const o=this.parseGeoNode(e,n),a=this.genBuffers(o),l=new ur(a.vertex,3);if(l.applyMatrix4(r),s.setAttribute("position",l),a.colors.length>0&&s.setAttribute("color",new ur(a.colors,3)),n&&(s.setAttribute("skinIndex",new cN(a.weightsIndices,4)),s.setAttribute("skinWeight",new ur(a.vertexWeights,4)),s.FBX_Deformer=n),a.normal.length>0){const c=new T3().getNormalMatrix(r),u=new ur(a.normal,3);u.applyNormalMatrix(c),s.setAttribute("normal",u)}if(a.uvs.forEach(function(c,u){let h="uv"+(u+1).toString();u===0&&(h="uv"),s.setAttribute(h,new ur(a.uvs[u],2))}),o.material&&o.material.mappingType!=="AllSame"){let c=a.materialIndex[0],u=0;if(a.materialIndex.forEach(function(h,f){h!==c&&(s.addGroup(u,f-u,c),c=h,u=f)}),s.groups.length>0){const h=s.groups[s.groups.length-1],f=h.start+h.count;f!==a.materialIndex.length&&s.addGroup(f,a.materialIndex.length-f,c)}s.groups.length===0&&s.addGroup(0,a.materialIndex.length,a.materialIndex[0])}return this.addMorphTargets(s,e,i,r),s}parseGeoNode(e,n){const i={};if(i.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],i.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(i.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(i.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(i.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){i.uv=[];let r=0;for(;e.LayerElementUV[r];)e.LayerElementUV[r].UV&&i.uv.push(this.parseUVs(e.LayerElementUV[r])),r++}return i.weightTable={},n!==null&&(i.skeleton=n,n.rawBones.forEach(function(r,s){r.indices.forEach(function(o,a){i.weightTable[o]===void 0&&(i.weightTable[o]=[]),i.weightTable[o].push({id:s,weight:r.weights[a]})})})),i}genBuffers(e){const n={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let i=0,r=0,s=!1,o=[],a=[],l=[],c=[],u=[],h=[];const f=this;return e.vertexIndices.forEach(function(d,p){let m,g=!1;d<0&&(d=d^-1,g=!0);let _=[],y=[];if(o.push(d*3,d*3+1,d*3+2),e.color){const x=Qg(p,i,d,e.color);l.push(x[0],x[1],x[2])}if(e.skeleton){if(e.weightTable[d]!==void 0&&e.weightTable[d].forEach(function(x){y.push(x.weight),_.push(x.id)}),y.length>4){s||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),s=!0);const x=[0,0,0,0],E=[0,0,0,0];y.forEach(function(w,S){let b=w,M=_[S];E.forEach(function(T,B,L){if(b>T){L[B]=b,b=T;const F=x[B];x[B]=M,M=F}})}),_=x,y=E}for(;y.length<4;)y.push(0),_.push(0);for(let x=0;x<4;++x)u.push(y[x]),h.push(_[x])}if(e.normal){const x=Qg(p,i,d,e.normal);a.push(x[0],x[1],x[2])}e.material&&e.material.mappingType!=="AllSame"&&(m=Qg(p,i,d,e.material)[0]),e.uv&&e.uv.forEach(function(x,E){const w=Qg(p,i,d,x);c[E]===void 0&&(c[E]=[]),c[E].push(w[0]),c[E].push(w[1])}),r++,g&&(f.genFace(n,e,o,m,a,l,c,u,h,r),i++,r=0,o=[],a=[],l=[],c=[],u=[],h=[])}),n}genFace(e,n,i,r,s,o,a,l,c,u){for(let h=2;h<u;h++)e.vertex.push(n.vertexPositions[i[0]]),e.vertex.push(n.vertexPositions[i[1]]),e.vertex.push(n.vertexPositions[i[2]]),e.vertex.push(n.vertexPositions[i[(h-1)*3]]),e.vertex.push(n.vertexPositions[i[(h-1)*3+1]]),e.vertex.push(n.vertexPositions[i[(h-1)*3+2]]),e.vertex.push(n.vertexPositions[i[h*3]]),e.vertex.push(n.vertexPositions[i[h*3+1]]),e.vertex.push(n.vertexPositions[i[h*3+2]]),n.skeleton&&(e.vertexWeights.push(l[0]),e.vertexWeights.push(l[1]),e.vertexWeights.push(l[2]),e.vertexWeights.push(l[3]),e.vertexWeights.push(l[(h-1)*4]),e.vertexWeights.push(l[(h-1)*4+1]),e.vertexWeights.push(l[(h-1)*4+2]),e.vertexWeights.push(l[(h-1)*4+3]),e.vertexWeights.push(l[h*4]),e.vertexWeights.push(l[h*4+1]),e.vertexWeights.push(l[h*4+2]),e.vertexWeights.push(l[h*4+3]),e.weightsIndices.push(c[0]),e.weightsIndices.push(c[1]),e.weightsIndices.push(c[2]),e.weightsIndices.push(c[3]),e.weightsIndices.push(c[(h-1)*4]),e.weightsIndices.push(c[(h-1)*4+1]),e.weightsIndices.push(c[(h-1)*4+2]),e.weightsIndices.push(c[(h-1)*4+3]),e.weightsIndices.push(c[h*4]),e.weightsIndices.push(c[h*4+1]),e.weightsIndices.push(c[h*4+2]),e.weightsIndices.push(c[h*4+3])),n.color&&(e.colors.push(o[0]),e.colors.push(o[1]),e.colors.push(o[2]),e.colors.push(o[(h-1)*3]),e.colors.push(o[(h-1)*3+1]),e.colors.push(o[(h-1)*3+2]),e.colors.push(o[h*3]),e.colors.push(o[h*3+1]),e.colors.push(o[h*3+2])),n.material&&n.material.mappingType!=="AllSame"&&(e.materialIndex.push(r),e.materialIndex.push(r),e.materialIndex.push(r)),n.normal&&(e.normal.push(s[0]),e.normal.push(s[1]),e.normal.push(s[2]),e.normal.push(s[(h-1)*3]),e.normal.push(s[(h-1)*3+1]),e.normal.push(s[(h-1)*3+2]),e.normal.push(s[h*3]),e.normal.push(s[h*3+1]),e.normal.push(s[h*3+2])),n.uv&&n.uv.forEach(function(f,d){e.uvs[d]===void 0&&(e.uvs[d]=[]),e.uvs[d].push(a[d][0]),e.uvs[d].push(a[d][1]),e.uvs[d].push(a[d][(h-1)*2]),e.uvs[d].push(a[d][(h-1)*2+1]),e.uvs[d].push(a[d][h*2]),e.uvs[d].push(a[d][h*2+1])})}addMorphTargets(e,n,i,r){if(i.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const s=this;i.forEach(function(o){o.rawTargets.forEach(function(a){const l=qt.Objects.Geometry[a.geoID];l!==void 0&&s.genMorphGeometry(e,n,l,r,a.name)})})}genMorphGeometry(e,n,i,r,s){const o=n.PolygonVertexIndex!==void 0?n.PolygonVertexIndex.a:[],a=i.Vertices!==void 0?i.Vertices.a:[],l=i.Indexes!==void 0?i.Indexes.a:[],c=e.attributes.position.count*3,u=new Float32Array(c);for(let p=0;p<l.length;p++){const m=l[p]*3;u[m]=a[p*3],u[m+1]=a[p*3+1],u[m+2]=a[p*3+2]}const h={vertexIndices:o,vertexPositions:u},f=this.genBuffers(h),d=new ur(f.vertex,3);d.name=s||i.attrName,d.applyMatrix4(r),e.morphAttributes.position.push(d)}parseNormals(e){const n=e.MappingInformationType,i=e.ReferenceInformationType,r=e.Normals.a;let s=[];return i==="IndexToDirect"&&("NormalIndex"in e?s=e.NormalIndex.a:"NormalsIndex"in e&&(s=e.NormalsIndex.a)),{dataSize:3,buffer:r,indices:s,mappingType:n,referenceType:i}}parseUVs(e){const n=e.MappingInformationType,i=e.ReferenceInformationType,r=e.UV.a;let s=[];return i==="IndexToDirect"&&(s=e.UVIndex.a),{dataSize:2,buffer:r,indices:s,mappingType:n,referenceType:i}}parseVertexColors(e){const n=e.MappingInformationType,i=e.ReferenceInformationType,r=e.Colors.a;let s=[];return i==="IndexToDirect"&&(s=e.ColorIndex.a),{dataSize:4,buffer:r,indices:s,mappingType:n,referenceType:i}}parseMaterialIndices(e){const n=e.MappingInformationType,i=e.ReferenceInformationType;if(n==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:i};const r=e.Materials.a,s=[];for(let o=0;o<r.length;++o)s.push(o);return{dataSize:1,buffer:r,indices:s,mappingType:n,referenceType:i}}parseNurbsGeometry(e){if(D4===void 0)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new ri;const n=parseInt(e.Order);if(isNaN(n))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new ri;const i=n-1,r=e.KnotVector.a,s=[],o=e.Points.a;for(let h=0,f=o.length;h<f;h+=4)s.push(new dr().fromArray(o,h));let a,l;if(e.Form==="Closed")s.push(s[0]);else if(e.Form==="Periodic"){a=i,l=r.length-1-a;for(let h=0;h<i;++h)s.push(s[h])}const u=new D4(i,r,s,a,l).getPoints(s.length*12);return new ri().setFromPoints(u)}}class yme{parse(){const e=[],n=this.parseClips();if(n!==void 0)for(const i in n){const r=n[i],s=this.addClip(r);e.push(s)}return e}parseClips(){if(qt.Objects.AnimationCurve===void 0)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const n=this.parseAnimationLayers(e);return this.parseAnimStacks(n)}parseAnimationCurveNodes(){const e=qt.Objects.AnimationCurveNode,n=new Map;for(const i in e){const r=e[i];if(r.attrName.match(/S|R|T|DeformPercent/)!==null){const s={id:r.id,attr:r.attrName,curves:{}};n.set(s.id,s)}}return n}parseAnimationCurves(e){const n=qt.Objects.AnimationCurve;for(const i in n){const r={id:n[i].id,times:n[i].KeyTime.a.map(Cme),values:n[i].KeyValueFloat.a},s=ei.get(r.id);if(s!==void 0){const o=s.parents[0].ID,a=s.parents[0].relationship;a.match(/X/)?e.get(o).curves.x=r:a.match(/Y/)?e.get(o).curves.y=r:a.match(/Z/)?e.get(o).curves.z=r:a.match(/d|DeformPercent/)&&e.has(o)&&(e.get(o).curves.morph=r)}}}parseAnimationLayers(e){const n=qt.Objects.AnimationLayer,i=new Map;for(const r in n){const s=[],o=ei.get(parseInt(r));o!==void 0&&(o.children.forEach(function(l,c){if(e.has(l.ID)){const u=e.get(l.ID);if(u.curves.x!==void 0||u.curves.y!==void 0||u.curves.z!==void 0){if(s[c]===void 0){const h=ei.get(l.ID).parents.filter(function(f){return f.relationship!==void 0})[0].ID;if(h!==void 0){const f=qt.Objects.Model[h.toString()];if(f===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",l);return}const d={modelName:f.attrName?Id.sanitizeNodeName(f.attrName):"",ID:f.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};zr.traverse(function(p){p.ID===f.id&&(d.transform=p.matrix,p.userData.transformData&&(d.eulerOrder=p.userData.transformData.eulerOrder))}),d.transform||(d.transform=new Ze),"PreRotation"in f&&(d.preRotation=f.PreRotation.value),"PostRotation"in f&&(d.postRotation=f.PostRotation.value),s[c]=d}}s[c]&&(s[c][u.attr]=u)}else if(u.curves.morph!==void 0){if(s[c]===void 0){const h=ei.get(l.ID).parents.filter(function(_){return _.relationship!==void 0})[0].ID,f=ei.get(h).parents[0].ID,d=ei.get(f).parents[0].ID,p=ei.get(d).parents[0].ID,m=qt.Objects.Model[p],g={modelName:m.attrName?Id.sanitizeNodeName(m.attrName):"",morphName:qt.Objects.Deformer[h].attrName};s[c]=g}s[c][u.attr]=u}}}),i.set(parseInt(r),s))}return i}parseAnimStacks(e){const n=qt.Objects.AnimationStack,i={};for(const r in n){const s=ei.get(parseInt(r)).children;s.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const o=e.get(s[0].ID);i[r]={name:n[r].attrName,layer:o}}return i}addClip(e){let n=[];const i=this;return e.layer.forEach(function(r){n=n.concat(i.generateTracks(r))}),new y3(e.name,-1,n)}generateTracks(e){const n=[];let i=new $,r=new $t,s=new $;if(e.transform&&e.transform.decompose(i,r,s),i=i.toArray(),r=new xo().setFromQuaternion(r,e.eulerOrder).toArray(),s=s.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.T.curves,i,"position");o!==void 0&&n.push(o)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){const o=this.generateRotationTrack(e.modelName,e.R.curves,r,e.preRotation,e.postRotation,e.eulerOrder);o!==void 0&&n.push(o)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.S.curves,s,"scale");o!==void 0&&n.push(o)}if(e.DeformPercent!==void 0){const o=this.generateMorphTrack(e);o!==void 0&&n.push(o)}return n}generateVectorTrack(e,n,i,r){const s=this.getTimesForAllAxes(n),o=this.getKeyframeTrackValues(s,n,i);return new O3(e+"."+r,s,o)}generateRotationTrack(e,n,i,r,s,o){n.x!==void 0&&(this.interpolateRotations(n.x),n.x.values=n.x.values.map(ct.degToRad)),n.y!==void 0&&(this.interpolateRotations(n.y),n.y.values=n.y.values.map(ct.degToRad)),n.z!==void 0&&(this.interpolateRotations(n.z),n.z.values=n.z.values.map(ct.degToRad));const a=this.getTimesForAllAxes(n),l=this.getKeyframeTrackValues(a,n,i);r!==void 0&&(r=r.map(ct.degToRad),r.push(o),r=new xo().fromArray(r),r=new $t().setFromEuler(r)),s!==void 0&&(s=s.map(ct.degToRad),s.push(o),s=new xo().fromArray(s),s=new $t().setFromEuler(s).invert());const c=new $t,u=new xo,h=[];for(let f=0;f<l.length;f+=3)u.set(l[f],l[f+1],l[f+2],o),c.setFromEuler(u),r!==void 0&&c.premultiply(r),s!==void 0&&c.multiply(s),c.toArray(h,f/3*4);return new O_(e+".quaternion",a,h)}generateMorphTrack(e){const n=e.DeformPercent.curves.morph,i=n.values.map(function(s){return s/100}),r=zr.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new R3(e.modelName+".morphTargetInfluences["+r+"]",n.times,i)}getTimesForAllAxes(e){let n=[];if(e.x!==void 0&&(n=n.concat(e.x.times)),e.y!==void 0&&(n=n.concat(e.y.times)),e.z!==void 0&&(n=n.concat(e.z.times)),n=n.sort(function(i,r){return i-r}),n.length>1){let i=1,r=n[0];for(let s=1;s<n.length;s++){const o=n[s];o!==r&&(n[i]=o,r=o,i++)}n=n.slice(0,i)}return n}getKeyframeTrackValues(e,n,i){const r=i,s=[];let o=-1,a=-1,l=-1;return e.forEach(function(c){if(n.x&&(o=n.x.times.indexOf(c)),n.y&&(a=n.y.times.indexOf(c)),n.z&&(l=n.z.times.indexOf(c)),o!==-1){const u=n.x.values[o];s.push(u),r[0]=u}else s.push(r[0]);if(a!==-1){const u=n.y.values[a];s.push(u),r[1]=u}else s.push(r[1]);if(l!==-1){const u=n.z.values[l];s.push(u),r[2]=u}else s.push(r[2])}),s}interpolateRotations(e){for(let n=1;n<e.values.length;n++){const i=e.values[n-1],r=e.values[n]-i,s=Math.abs(r);if(s>=180){const o=s/180,a=r/o;let l=i+a;const c=e.times[n-1],h=(e.times[n]-c)/o;let f=c+h;const d=[],p=[];for(;f<e.times[n];)d.push(f),f+=h,p.push(l),l+=a;e.times=k4(e.times,n,d),e.values=k4(e.values,n,p)}}}}class xme{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,n){this.currentProp=e,this.currentPropName=n}parse(e){this.currentIndent=0,this.allNodes=new $G,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const n=this,i=e.split(/[\r\n]+/);return i.forEach(function(r,s){const o=r.match(/^[\s\t]*;/),a=r.match(/^[\s\t]*$/);if(o||a)return;const l=r.match("^\\t{"+n.currentIndent+"}(\\w+):(.*){",""),c=r.match("^\\t{"+n.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),u=r.match("^\\t{"+(n.currentIndent-1)+"}}");l?n.parseNodeBegin(r,l):c?n.parseNodeProperty(r,c,i[++s]):u?n.popStack():r.match(/^[^\s\t}]/)&&n.parseNodePropertyContinued(r)}),this.allNodes}parseNodeBegin(e,n){const i=n[1].trim().replace(/^"/,"").replace(/"$/,""),r=n[2].split(",").map(function(l){return l.trim().replace(/^"/,"").replace(/"$/,"")}),s={name:i},o=this.parseNodeAttr(r),a=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(i,s):i in a?(i==="PoseNode"?a.PoseNode.push(s):a[i].id!==void 0&&(a[i]={},a[i][a[i].id]=a[i]),o.id!==""&&(a[i][o.id]=s)):typeof o.id=="number"?(a[i]={},a[i][o.id]=s):i!=="Properties70"&&(i==="PoseNode"?a[i]=[s]:a[i]=s),typeof o.id=="number"&&(s.id=o.id),o.name!==""&&(s.attrName=o.name),o.type!==""&&(s.attrType=o.type),this.pushStack(s)}parseNodeAttr(e){let n=e[0];e[0]!==""&&(n=parseInt(e[0]),isNaN(n)&&(n=e[0]));let i="",r="";return e.length>1&&(i=e[1].replace(/^(\w+)::/,""),r=e[2]),{id:n,name:i,type:r}}parseNodeProperty(e,n,i){let r=n[1].replace(/^"/,"").replace(/"$/,"").trim(),s=n[2].replace(/^"/,"").replace(/"$/,"").trim();r==="Content"&&s===","&&(s=i.replace(/"/g,"").replace(/,$/,"").trim());const o=this.getCurrentNode();if(o.name==="Properties70"){this.parseNodeSpecialProperty(e,r,s);return}if(r==="C"){const l=s.split(",").slice(1),c=parseInt(l[0]),u=parseInt(l[1]);let h=s.split(",").slice(3);h=h.map(function(f){return f.trim().replace(/^"/,"")}),r="connections",s=[c,u],bme(s,h),o[r]===void 0&&(o[r]=[])}r==="Node"&&(o.id=s),r in o&&Array.isArray(o[r])?o[r].push(s):r!=="a"?o[r]=s:o.a=s,this.setCurrentProp(o,r),r==="a"&&s.slice(-1)!==","&&(o.a=dw(s))}parseNodePropertyContinued(e){const n=this.getCurrentNode();n.a+=e,e.slice(-1)!==","&&(n.a=dw(n.a))}parseNodeSpecialProperty(e,n,i){const r=i.split('",').map(function(u){return u.trim().replace(/^\"/,"").replace(/\s/,"_")}),s=r[0],o=r[1],a=r[2],l=r[3];let c=r[4];switch(o){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":c=parseFloat(c);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":c=dw(c);break}this.getPrevNode()[s]={type:o,type2:a,flag:l,value:c},this.setCurrentProp(this.getPrevNode(),s)}}class Eme{parse(e){const n=new F4(e);n.skip(23);const i=n.getUint32();if(i<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+i);const r=new $G;for(;!this.endOfContent(n);){const s=this.parseNode(n,i);s!==null&&r.add(s.name,s)}return r}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,n){const i={},r=n>=7500?e.getUint64():e.getUint32(),s=n>=7500?e.getUint64():e.getUint32();n>=7500?e.getUint64():e.getUint32();const o=e.getUint8(),a=e.getString(o);if(r===0)return null;const l=[];for(let f=0;f<s;f++)l.push(this.parseProperty(e));const c=l.length>0?l[0]:"",u=l.length>1?l[1]:"",h=l.length>2?l[2]:"";for(i.singleProperty=s===1&&e.getOffset()===r;r>e.getOffset();){const f=this.parseNode(e,n);f!==null&&this.parseSubNode(a,i,f)}return i.propertyList=l,typeof c=="number"&&(i.id=c),u!==""&&(i.attrName=u),h!==""&&(i.attrType=h),a!==""&&(i.name=a),i}parseSubNode(e,n,i){if(i.singleProperty===!0){const r=i.propertyList[0];Array.isArray(r)?(n[i.name]=i,i.a=r):n[i.name]=r}else if(e==="Connections"&&i.name==="C"){const r=[];i.propertyList.forEach(function(s,o){o!==0&&r.push(s)}),n.connections===void 0&&(n.connections=[]),n.connections.push(r)}else if(i.name==="Properties70")Object.keys(i).forEach(function(s){n[s]=i[s]});else if(e==="Properties70"&&i.name==="P"){let r=i.propertyList[0],s=i.propertyList[1];const o=i.propertyList[2],a=i.propertyList[3];let l;r.indexOf("Lcl ")===0&&(r=r.replace("Lcl ","Lcl_")),s.indexOf("Lcl ")===0&&(s=s.replace("Lcl ","Lcl_")),s==="Color"||s==="ColorRGB"||s==="Vector"||s==="Vector3D"||s.indexOf("Lcl_")===0?l=[i.propertyList[4],i.propertyList[5],i.propertyList[6]]:l=i.propertyList[4],n[r]={type:s,type2:o,flag:a,value:l}}else n[i.name]===void 0?typeof i.id=="number"?(n[i.name]={},n[i.name][i.id]=i):n[i.name]=i:i.name==="PoseNode"?(Array.isArray(n[i.name])||(n[i.name]=[n[i.name]]),n[i.name].push(i)):n[i.name][i.id]===void 0&&(n[i.name][i.id]=i)}parseProperty(e){const n=e.getString(1);let i;switch(n){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return i=e.getUint32(),e.getArrayBuffer(i);case"S":return i=e.getUint32(),e.getString(i);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const r=e.getUint32(),s=e.getUint32(),o=e.getUint32();if(s===0)switch(n){case"b":case"c":return e.getBooleanArray(r);case"d":return e.getFloat64Array(r);case"f":return e.getFloat32Array(r);case"i":return e.getInt32Array(r);case"l":return e.getInt64Array(r)}const a=cpe(new Uint8Array(e.getArrayBuffer(o))),l=new F4(a.buffer);switch(n){case"b":case"c":return l.getBooleanArray(r);case"d":return l.getFloat64Array(r);case"f":return l.getFloat32Array(r);case"i":return l.getInt32Array(r);case"l":return l.getInt64Array(r)}default:throw new Error("THREE.FBXLoader: Unknown property type "+n)}}}class F4{constructor(e,n){this.dv=new DataView(e),this.offset=0,this.littleEndian=n!==void 0?n:!0}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){const n=[];for(let i=0;i<e;i++)n.push(this.getBoolean());return n}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const n=[];for(let i=0;i<e;i++)n.push(this.getInt32());return n}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,n;return this.littleEndian?(e=this.getUint32(),n=this.getUint32()):(n=this.getUint32(),e=this.getUint32()),n&2147483648?(n=~n&4294967295,e=~e&4294967295,e===4294967295&&(n=n+1&4294967295),e=e+1&4294967295,-(n*4294967296+e)):n*4294967296+e}getInt64Array(e){const n=[];for(let i=0;i<e;i++)n.push(this.getInt64());return n}getUint64(){let e,n;return this.littleEndian?(e=this.getUint32(),n=this.getUint32()):(n=this.getUint32(),e=this.getUint32()),n*4294967296+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const n=[];for(let i=0;i<e;i++)n.push(this.getFloat32());return n}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const n=[];for(let i=0;i<e;i++)n.push(this.getFloat64());return n}getArrayBuffer(e){const n=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,n}getString(e){let n=[];for(let r=0;r<e;r++)n[r]=this.getUint8();const i=n.indexOf(0);return i>=0&&(n=n.slice(0,i)),So.decodeText(new Uint8Array(n))}}class $G{add(e,n){this[e]=n}}function wme(t){const e="Kaydara FBX Binary  \0";return t.byteLength>=e.length&&e===nz(t,0,e.length)}function Mme(t){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let n=0;function i(r){const s=t[r-1];return t=t.slice(n+r),n++,s}for(let r=0;r<e.length;++r)if(i(1)===e[r])return!1;return!0}function L4(t){const e=/FBXVersion: (\d+)/,n=t.match(e);if(n)return parseInt(n[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function Cme(t){return t/46186158e3}const Sme=[];function Qg(t,e,n,i){let r;switch(i.mappingType){case"ByPolygonVertex":r=t;break;case"ByPolygon":r=e;break;case"ByVertice":r=n;break;case"AllSame":r=i.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+i.mappingType)}i.referenceType==="IndexToDirect"&&(r=i.indices[r]);const s=r*i.dataSize,o=s+i.dataSize;return Ime(Sme,i.buffer,s,o)}const fw=new xo,vf=new $;function ez(t){const e=new Ze,n=new Ze,i=new Ze,r=new Ze,s=new Ze,o=new Ze,a=new Ze,l=new Ze,c=new Ze,u=new Ze,h=new Ze,f=new Ze,d=t.inheritType?t.inheritType:0;if(t.translation&&e.setPosition(vf.fromArray(t.translation)),t.preRotation){const B=t.preRotation.map(ct.degToRad);B.push(t.eulerOrder),n.makeRotationFromEuler(fw.fromArray(B))}if(t.rotation){const B=t.rotation.map(ct.degToRad);B.push(t.eulerOrder),i.makeRotationFromEuler(fw.fromArray(B))}if(t.postRotation){const B=t.postRotation.map(ct.degToRad);B.push(t.eulerOrder),r.makeRotationFromEuler(fw.fromArray(B)),r.invert()}t.scale&&s.scale(vf.fromArray(t.scale)),t.scalingOffset&&a.setPosition(vf.fromArray(t.scalingOffset)),t.scalingPivot&&o.setPosition(vf.fromArray(t.scalingPivot)),t.rotationOffset&&l.setPosition(vf.fromArray(t.rotationOffset)),t.rotationPivot&&c.setPosition(vf.fromArray(t.rotationPivot)),t.parentMatrixWorld&&(h.copy(t.parentMatrix),u.copy(t.parentMatrixWorld));const p=n.clone().multiply(i).multiply(r),m=new Ze;m.extractRotation(u);const g=new Ze;g.copyPosition(u);const _=g.clone().invert().multiply(u),y=m.clone().invert().multiply(_),x=s,E=new Ze;if(d===0)E.copy(m).multiply(p).multiply(y).multiply(x);else if(d===1)E.copy(m).multiply(y).multiply(p).multiply(x);else{const L=new Ze().scale(new $().setFromMatrixScale(h)).clone().invert(),F=y.clone().multiply(L);E.copy(m).multiply(p).multiply(F).multiply(x)}const w=c.clone().invert(),S=o.clone().invert();let b=e.clone().multiply(l).multiply(c).multiply(n).multiply(i).multiply(r).multiply(w).multiply(a).multiply(o).multiply(s).multiply(S);const M=new Ze().copyPosition(b),T=u.clone().multiply(M);return f.copyPosition(T),b=f.clone().multiply(E),b.premultiply(u.invert()),b}function tz(t){t=t||0;const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return t===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[t]}function dw(t){return t.split(",").map(function(n){return parseFloat(n)})}function nz(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=t.byteLength),So.decodeText(new Uint8Array(t,e,n))}function bme(t,e){for(let n=0,i=t.length,r=e.length;n<r;n++,i++)t[i]=e[n]}function Ime(t,e,n,i){for(let r=n,s=0;r<i;r++,s++)t[s]=e[r];return t}function k4(t,e,n){return t.slice(0,e).concat(n).concat(t.slice(e))}class Tme extends Zd{constructor(e){super(e)}load(e,n,i,r){const s=new ca(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{if(typeof o!="string")throw new Error("unsupported data type");const a=JSON.parse(o),l=this.parse(a);n&&n(l)},i,r)}parse(e){return new EI(e)}}class EI{constructor(e){D(this,"data",void 0),this.data=e}generateShapes(e,n=100,i){const r=[],s={letterSpacing:0,lineHeight:1,...i},o=Bme(e,n,this.data,s);for(let a=0,l=o.length;a<l;a++)Array.prototype.push.apply(r,o[a].toShapes(!1));return r}}D(EI,"isFont",void 0);D(EI,"type",void 0);function Bme(t,e,n,i){const r=Array.from(t),s=e/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*s,a=[];let l=0,c=0;for(let u=0;u<r.length;u++){const h=r[u];if(h===`
`)l=0,c-=o*i.lineHeight;else{const f=Rme(h,s,l,c,n);f&&(l+=f.offsetX+i.letterSpacing,a.push(f.path))}}return a}function Rme(t,e,n,i,r){const s=r.glyphs[t]||r.glyphs["?"];if(!s){console.error('THREE.Font: character "'+t+'" does not exists in font family '+r.familyName+".");return}const o=new rN;let a,l,c,u,h,f,d,p;if(s.o){const m=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let g=0,_=m.length;g<_;)switch(m[g++]){case"m":a=parseInt(m[g++])*e+n,l=parseInt(m[g++])*e+i,o.moveTo(a,l);break;case"l":a=parseInt(m[g++])*e+n,l=parseInt(m[g++])*e+i,o.lineTo(a,l);break;case"q":c=parseInt(m[g++])*e+n,u=parseInt(m[g++])*e+i,h=parseInt(m[g++])*e+n,f=parseInt(m[g++])*e+i,o.quadraticCurveTo(h,f,c,u);break;case"b":c=parseInt(m[g++])*e+n,u=parseInt(m[g++])*e+i,h=parseInt(m[g++])*e+n,f=parseInt(m[g++])*e+i,d=parseInt(m[g++])*e+n,p=parseInt(m[g++])*e+i,o.bezierCurveTo(h,f,d,p,c,u);break}}return{offsetX:s.ha*e,path:o}}class Pme{constructor(e=4){this.pool=e,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(e){if(!this.workers[e]){const n=this.workerCreator();n.addEventListener("message",this._onMessage.bind(this,e)),this.workers[e]=n}}_getIdleWorker(){for(let e=0;e<this.pool;e++)if(!(this.workerStatus&1<<e))return e;return-1}_onMessage(e,n){const i=this.workersResolve[e];if(i&&i(n),this.queue.length){const{resolve:r,msg:s,transfer:o}=this.queue.shift();this.workersResolve[e]=r,this.workers[e].postMessage(s,o)}else this.workerStatus^=1<<e}setWorkerCreator(e){this.workerCreator=e}setWorkerLimit(e){this.pool=e}postMessage(e,n){return new Promise(i=>{const r=this._getIdleWorker();r!==-1?(this._initWorker(r),this.workerStatus|=1<<r,this.workersResolve[r]=i,this.workers[r].postMessage(e,n)):this.queue.push({resolve:i,msg:e,transfer:n})})}dispose(){this.workers.forEach(e=>e.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}const iz=0,Dme=2,Fme=0,Lme=0,kme=2,Ume=0,Ome=0,Nme=1,rz=2,Gme=1,zme=64,sz=0,oz=9,wI=15,az=16,MI=22,lz=37,CI=43,cz=76,uz=83,hz=97,fz=100,dz=103,pz=109;class Qme{constructor(){this.vkFormat=sz,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=iz,this.levels=[],this.dataFormatDescriptor=[{vendorId:Lme,descriptorType:Fme,descriptorBlockSize:0,versionNumber:kme,colorModel:Ume,colorPrimaries:Gme,transferFunction:rz,flags:Ome,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class fp{constructor(e,n,i,r){this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(e.buffer,e.byteOffset+n,i),this._littleEndian=r,this._offset=0}_nextUint8(){const e=this._dataView.getUint8(this._offset);return this._offset+=1,e}_nextUint16(){const e=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,e}_nextUint32(){const e=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint64(){const e=this._dataView.getUint32(this._offset,this._littleEndian),n=this._dataView.getUint32(this._offset+4,this._littleEndian),i=e+2**32*n;return this._offset+=8,i}_nextInt32(){const e=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,e}_skip(e){return this._offset+=e,this}_scan(e,n=0){const i=this._offset;let r=0;for(;this._dataView.getUint8(this._offset)!==n&&r<e;)r++,this._offset++;return r<e&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+i,r)}}const Mr=[171,75,84,88,32,50,48,187,13,10,26,10];function U4(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):Buffer.from(t).toString("utf8")}function Hme(t){const e=new Uint8Array(t.buffer,t.byteOffset,Mr.length);if(e[0]!==Mr[0]||e[1]!==Mr[1]||e[2]!==Mr[2]||e[3]!==Mr[3]||e[4]!==Mr[4]||e[5]!==Mr[5]||e[6]!==Mr[6]||e[7]!==Mr[7]||e[8]!==Mr[8]||e[9]!==Mr[9]||e[10]!==Mr[10]||e[11]!==Mr[11])throw new Error("Missing KTX 2.0 identifier.");const n=new Qme,i=17*Uint32Array.BYTES_PER_ELEMENT,r=new fp(t,Mr.length,i,!0);n.vkFormat=r._nextUint32(),n.typeSize=r._nextUint32(),n.pixelWidth=r._nextUint32(),n.pixelHeight=r._nextUint32(),n.pixelDepth=r._nextUint32(),n.layerCount=r._nextUint32(),n.faceCount=r._nextUint32();const s=r._nextUint32();n.supercompressionScheme=r._nextUint32();const o=r._nextUint32(),a=r._nextUint32(),l=r._nextUint32(),c=r._nextUint32(),u=r._nextUint64(),h=r._nextUint64(),f=s*3*8,d=new fp(t,Mr.length+i,f,!0);for(let z=0;z<s;z++)n.levels.push({levelData:new Uint8Array(t.buffer,t.byteOffset+d._nextUint64(),d._nextUint64()),uncompressedByteLength:d._nextUint64()});const p=new fp(t,o,a,!0),m={vendorId:p._skip(4)._nextUint16(),descriptorType:p._nextUint16(),versionNumber:p._nextUint16(),descriptorBlockSize:p._nextUint16(),colorModel:p._nextUint8(),colorPrimaries:p._nextUint8(),transferFunction:p._nextUint8(),flags:p._nextUint8(),texelBlockDimension:[p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8()],bytesPlane:[p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8()],samples:[]},g=6,_=4,y=(m.descriptorBlockSize/4-g)/_;for(let z=0;z<y;z++){const Q={bitOffset:p._nextUint16(),bitLength:p._nextUint8(),channelType:p._nextUint8(),samplePosition:[p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};Q.channelType&zme?(Q.sampleLower=p._nextInt32(),Q.sampleUpper=p._nextInt32()):(Q.sampleLower=p._nextUint32(),Q.sampleUpper=p._nextUint32()),m.samples[z]=Q}n.dataFormatDescriptor.length=0,n.dataFormatDescriptor.push(m);const x=new fp(t,l,c,!0);for(;x._offset<c;){const z=x._nextUint32(),Q=x._scan(z),H=U4(Q),J=x._scan(z-Q.byteLength);n.keyValue[H]=H.match(/^ktx/i)?U4(J):J,x._offset%4&&x._skip(4-x._offset%4)}if(h<=0)return n;const E=new fp(t,u,h,!0),w=E._nextUint16(),S=E._nextUint16(),b=E._nextUint32(),M=E._nextUint32(),T=E._nextUint32(),B=E._nextUint32(),L=[];for(let z=0;z<s;z++)L.push({imageFlags:E._nextUint32(),rgbSliceByteOffset:E._nextUint32(),rgbSliceByteLength:E._nextUint32(),alphaSliceByteOffset:E._nextUint32(),alphaSliceByteLength:E._nextUint32()});const F=u+E._offset,U=F+b,k=U+M,X=k+T,Y=new Uint8Array(t.buffer,t.byteOffset+F,b),Z=new Uint8Array(t.buffer,t.byteOffset+U,M),G=new Uint8Array(t.buffer,t.byteOffset+k,T),O=new Uint8Array(t.buffer,t.byteOffset+X,B);return n.globalData={endpointCount:w,selectorCount:S,imageDescs:L,endpointsData:Y,selectorsData:Z,tablesData:G,extendedData:O},n}let pw,Da,mS;const mw={env:{emscripten_notify_memory_growth:function(t){mS=new Uint8Array(Da.exports.memory.buffer)}}};class Vme{init(){return pw||(pw=typeof fetch<"u"?fetch("data:application/wasm;base64,"+O4).then(e=>e.arrayBuffer()).then(e=>WebAssembly.instantiate(e,mw)).then(this._init):WebAssembly.instantiate(Buffer.from(O4,"base64"),mw).then(this._init),pw)}_init(e){Da=e.instance,mw.env.emscripten_notify_memory_growth(0)}decode(e,n=0){if(!Da)throw new Error("ZSTDDecoder: Await .init() before decoding.");const i=e.byteLength,r=Da.exports.malloc(i);mS.set(e,r),n=n||Number(Da.exports.ZSTD_findDecompressedSize(r,i));const s=Da.exports.malloc(n),o=Da.exports.ZSTD_decompress(s,n,r,i),a=mS.slice(s,s+o);return Da.exports.free(r),Da.exports.free(s),a}}const O4="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ",Aw=new WeakMap;let gw=0,vw;class qs extends Zd{constructor(e){super(e),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new Pme,this.workerSourceURL="",this.workerConfig=null,typeof MSC_TRANSCODER<"u"&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(e){return this.transcoderPath=e,this}setWorkerLimit(e){return this.workerPool.setWorkerLimit(e),this}detectSupport(e){return this.workerConfig={astcSupported:e.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:e.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:e.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:e.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:e.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:e.extensions.has("WEBGL_compressed_texture_pvrtc")||e.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},e.capabilities.isWebGL2&&(this.workerConfig.etc1Supported=!1),this}init(){if(!this.transcoderPending){const e=new ca(this.manager);e.setPath(this.transcoderPath),e.setWithCredentials(this.withCredentials);const n=e.loadAsync("basis_transcoder.js"),i=new ca(this.manager);i.setPath(this.transcoderPath),i.setResponseType("arraybuffer"),i.setWithCredentials(this.withCredentials);const r=i.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([n,r]).then(([s,o])=>{const a=qs.BasisWorker.toString(),l=["/* constants */","let _EngineFormat = "+JSON.stringify(qs.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(qs.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(qs.BasisFormat),"/* basis_transcoder.js */",s,"/* worker */",a.substring(a.indexOf("{")+1,a.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([l])),this.transcoderBinary=o,this.workerPool.setWorkerCreator(()=>{const c=new Worker(this.workerSourceURL),u=this.transcoderBinary.slice(0);return c.postMessage({type:"init",config:this.workerConfig,transcoderBinary:u},[u]),c})}),gw>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),gw++}return this.transcoderPending}load(e,n,i,r){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const s=new ca(this.manager);s.setResponseType("arraybuffer"),s.setWithCredentials(this.withCredentials),s.load(e,o=>{if(Aw.has(o))return Aw.get(o).promise.then(n).catch(r);this._createTexture(o).then(a=>n?n(a):null).catch(r)},i,r)}_createTextureFrom(e){const{mipmaps:n,width:i,height:r,format:s,type:o,error:a,dfdTransferFn:l,dfdFlags:c}=e;if(o==="error")return Promise.reject(a);const u=new m6(n,i,r,s,Zo);return u.minFilter=n.length===1?Mi:qy,u.magFilter=Mi,u.generateMipmaps=!1,u.needsUpdate=!0,u.encoding=l===rz?yi:Kd,u.premultiplyAlpha=!!(c&Nme),u}_createTexture(e,n={}){const i=Hme(new Uint8Array(e));if(i.vkFormat!==sz)return jme(i);const r=n,s=this.init().then(()=>this.workerPool.postMessage({type:"transcode",buffer:e,taskConfig:r},[e])).then(o=>this._createTextureFrom(o.data));return Aw.set(e,{promise:s}),s}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),gw--,this}}qs.BasisFormat={ETC1S:0,UASTC_4x4:1};qs.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16};qs.EngineFormat={RGBAFormat:us,RGBA_ASTC_4x4_Format:X6,RGBA_BPTC_Format:Y6,RGBA_ETC2_EAC_Format:q6,RGBA_PVRTC_4BPPV1_Format:J6,RGBA_S3TC_DXT5_Format:K6,RGB_ETC1_Format:Z6,RGB_ETC2_Format:$6,RGB_PVRTC_4BPPV1_Format:eN,RGB_S3TC_DXT1_Format:tN};qs.BasisWorker=function(){let t,e,n;const i=_EngineFormat,r=_TranscoderFormat,s=_BasisFormat;self.addEventListener("message",function(d){const p=d.data;switch(p.type){case"init":t=p.config,o(p.transcoderBinary);break;case"transcode":e.then(()=>{try{const{width:m,height:g,hasAlpha:_,mipmaps:y,format:x,dfdTransferFn:E,dfdFlags:w}=a(p.buffer),S=[];for(let b=0;b<y.length;++b)S.push(y[b].data.buffer);self.postMessage({type:"transcode",id:p.id,width:m,height:g,hasAlpha:_,mipmaps:y,format:x,dfdTransferFn:E,dfdFlags:w},S)}catch(m){console.error(m),self.postMessage({type:"error",id:p.id,error:m.message})}});break}});function o(d){e=new Promise(p=>{n={wasmBinary:d,onRuntimeInitialized:p},BASIS(n)}).then(()=>{n.initializeBasis(),n.KTX2File===void 0&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")})}function a(d){const p=new n.KTX2File(new Uint8Array(d));function m(){p.close(),p.delete()}if(!p.isValid())throw m(),new Error("THREE.KTX2Loader:	Invalid or unsupported .ktx2 file");const g=p.isUASTC()?s.UASTC_4x4:s.ETC1S,_=p.getWidth(),y=p.getHeight(),x=p.getLevels(),E=p.getHasAlpha(),w=p.getDFDTransferFunc(),S=p.getDFDFlags(),{transcoderFormat:b,engineFormat:M}=h(g,_,y,E);if(!_||!y||!x)throw m(),new Error("THREE.KTX2Loader:	Invalid texture");if(!p.startTranscoding())throw m(),new Error("THREE.KTX2Loader: .startTranscoding failed");const T=[];for(let B=0;B<x;B++){const L=p.getImageLevelInfo(B,0,0),F=L.origWidth,U=L.origHeight,k=new Uint8Array(p.getImageTranscodedSizeInBytes(B,0,0,b));if(!p.transcodeImage(k,B,0,0,b,0,-1,-1))throw m(),new Error("THREE.KTX2Loader: .transcodeImage failed.");T.push({data:k,width:F,height:U})}return m(),{width:_,height:y,hasAlpha:E,mipmaps:T,format:M,dfdTransferFn:w,dfdFlags:S}}const l=[{if:"astcSupported",basisFormat:[s.UASTC_4x4],transcoderFormat:[r.ASTC_4x4,r.ASTC_4x4],engineFormat:[i.RGBA_ASTC_4x4_Format,i.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[s.ETC1S,s.UASTC_4x4],transcoderFormat:[r.BC7_M5,r.BC7_M5],engineFormat:[i.RGBA_BPTC_Format,i.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[s.ETC1S,s.UASTC_4x4],transcoderFormat:[r.BC1,r.BC3],engineFormat:[i.RGB_S3TC_DXT1_Format,i.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[s.ETC1S,s.UASTC_4x4],transcoderFormat:[r.ETC1,r.ETC2],engineFormat:[i.RGB_ETC2_Format,i.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[s.ETC1S,s.UASTC_4x4],transcoderFormat:[r.ETC1],engineFormat:[i.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[s.ETC1S,s.UASTC_4x4],transcoderFormat:[r.PVRTC1_4_RGB,r.PVRTC1_4_RGBA],engineFormat:[i.RGB_PVRTC_4BPPV1_Format,i.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],c=l.sort(function(d,p){return d.priorityETC1S-p.priorityETC1S}),u=l.sort(function(d,p){return d.priorityUASTC-p.priorityUASTC});function h(d,p,m,g){let _,y;const x=d===s.ETC1S?c:u;for(let E=0;E<x.length;E++){const w=x[E];if(!!t[w.if]&&!!w.basisFormat.includes(d)&&!(g&&w.transcoderFormat.length<2)&&!(w.needsPowerOfTwo&&!(f(p)&&f(m))))return _=w.transcoderFormat[g?1:0],y=w.engineFormat[g?1:0],{transcoderFormat:_,engineFormat:y}}return console.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),_=r.RGBA32,y=i.RGBAFormat,{transcoderFormat:_,engineFormat:y}}function f(d){return d<=2?!0:(d&d-1)===0&&d!==0}};const N4={[pz]:us,[hz]:us,[lz]:us,[CI]:us,[dz]:qf,[uz]:qf,[az]:qf,[MI]:qf,[fz]:Jf,[cz]:Jf,[wI]:Jf,[oz]:Jf},_w={[pz]:Tr,[hz]:br,[lz]:Zo,[CI]:Zo,[dz]:Tr,[uz]:br,[az]:Zo,[MI]:Zo,[fz]:Tr,[cz]:br,[wI]:Zo,[oz]:Zo},Wme={[CI]:yi,[MI]:yi,[wI]:yi};async function jme(t){const{vkFormat:e,pixelWidth:n,pixelHeight:i,pixelDepth:r}=t;if(N4[e]===void 0)throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");const s=t.levels[0];let o,a;if(t.supercompressionScheme===iz)o=s.levelData;else if(t.supercompressionScheme===Dme)vw||(vw=new Promise(async c=>{const u=new Vme;await u.init(),c(u)})),o=(await vw).decode(s.levelData,s.uncompressedByteLength);else throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");_w[e]===Tr?a=new Float32Array(o.buffer,o.byteOffset,o.byteLength/Float32Array.BYTES_PER_ELEMENT):_w[e]===br?a=new Uint16Array(o.buffer,o.byteOffset,o.byteLength/Uint16Array.BYTES_PER_ELEMENT):a=o;const l=r===0?new bd(a,n,i):new y6(a,n,i,r);return l.type=_w[e],l.format=N4[e],l.encoding=Wme[e]||Kd,l.needsUpdate=!0,Promise.resolve(l)}class Xme extends x6{constructor(e){super(e),this.type=br}parse(e){const a=function(x,E){switch(x){case 1:console.error("THREE.RGBELoader Read Error: "+(E||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(E||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(E||""));break;default:case 4:console.error("THREE.RGBELoader: Error: "+(E||""))}return-1},h=`
`,f=function(x,E,w){E=E||1024;let b=x.pos,M=-1,T=0,B="",L=String.fromCharCode.apply(null,new Uint16Array(x.subarray(b,b+128)));for(;0>(M=L.indexOf(h))&&T<E&&b<x.byteLength;)B+=L,T+=L.length,b+=128,L+=String.fromCharCode.apply(null,new Uint16Array(x.subarray(b,b+128)));return-1<M?(w!==!1&&(x.pos+=T+M+1),B+L.slice(0,M)):!1},d=function(x){const E=/^#\?(\S+)/,w=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,S=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,b=/^\s*FORMAT=(\S+)\s*$/,M=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,T={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let B,L;if(x.pos>=x.byteLength||!(B=f(x)))return a(1,"no header found");if(!(L=B.match(E)))return a(3,"bad initial token");for(T.valid|=1,T.programtype=L[1],T.string+=B+`
`;B=f(x),B!==!1;){if(T.string+=B+`
`,B.charAt(0)==="#"){T.comments+=B+`
`;continue}if((L=B.match(w))&&(T.gamma=parseFloat(L[1])),(L=B.match(S))&&(T.exposure=parseFloat(L[1])),(L=B.match(b))&&(T.valid|=2,T.format=L[1]),(L=B.match(M))&&(T.valid|=4,T.height=parseInt(L[1],10),T.width=parseInt(L[2],10)),T.valid&2&&T.valid&4)break}return T.valid&2?T.valid&4?T:a(3,"missing image size specifier"):a(3,"missing format specifier")},p=function(x,E,w){const S=E;if(S<8||S>32767||x[0]!==2||x[1]!==2||x[2]&128)return new Uint8Array(x);if(S!==(x[2]<<8|x[3]))return a(3,"wrong scanline width");const b=new Uint8Array(4*E*w);if(!b.length)return a(4,"unable to allocate buffer space");let M=0,T=0;const B=4*S,L=new Uint8Array(4),F=new Uint8Array(B);let U=w;for(;U>0&&T<x.byteLength;){if(T+4>x.byteLength)return a(1);if(L[0]=x[T++],L[1]=x[T++],L[2]=x[T++],L[3]=x[T++],L[0]!=2||L[1]!=2||(L[2]<<8|L[3])!=S)return a(3,"bad rgbe scanline format");let k=0,X;for(;k<B&&T<x.byteLength;){X=x[T++];const Z=X>128;if(Z&&(X-=128),X===0||k+X>B)return a(3,"bad scanline data");if(Z){const G=x[T++];for(let O=0;O<X;O++)F[k++]=G}else F.set(x.subarray(T,T+X),k),k+=X,T+=X}const Y=S;for(let Z=0;Z<Y;Z++){let G=0;b[M]=F[Z+G],G+=S,b[M+1]=F[Z+G],G+=S,b[M+2]=F[Z+G],G+=S,b[M+3]=F[Z+G],M+=4}U--}return b},m=function(x,E,w,S){const b=x[E+3],M=Math.pow(2,b-128)/255;w[S+0]=x[E+0]*M,w[S+1]=x[E+1]*M,w[S+2]=x[E+2]*M,w[S+3]=1},g=function(x,E,w,S){const b=x[E+3],M=Math.pow(2,b-128)/255;w[S+0]=Ip.toHalfFloat(Math.min(x[E+0]*M,65504)),w[S+1]=Ip.toHalfFloat(Math.min(x[E+1]*M,65504)),w[S+2]=Ip.toHalfFloat(Math.min(x[E+2]*M,65504)),w[S+3]=Ip.toHalfFloat(1)},_=new Uint8Array(e);_.pos=0;const y=d(_);if(y!==-1){const x=y.width,E=y.height,w=p(_.subarray(_.pos),x,E);if(w!==-1){let S,b,M;switch(this.type){case Tr:M=w.length/4;const T=new Float32Array(M*4);for(let L=0;L<M;L++)m(w,L*4,T,L*4);S=T,b=Tr;break;case br:M=w.length/4;const B=new Uint16Array(M*4);for(let L=0;L<M;L++)g(w,L*4,B,L*4);S=B,b=br;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type);break}return{width:x,height:E,data:S,header:y.string,gamma:y.gamma,exposure:y.exposure,type:b}}}return null}setDataType(e){return this.type=e,this}load(e,n,i,r){function s(o,a){switch(o.type){case Tr:case br:o.encoding=Kd,o.minFilter=Mi,o.magFilter=Mi,o.generateMipmaps=!1,o.flipY=!0;break}n&&n(o,a)}return super.load(e,s,i,r)}}const yw=new WeakMap;class Yme extends Zd{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,n,i,r){const s=new ca(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(n).catch(r)},i,r)}decodeDracoFile(e,n,i,r){const s={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(e,s).then(n)}decodeGeometry(e,n){for(const l in n.attributeTypes){const c=n.attributeTypes[l];c.BYTES_PER_ELEMENT!==void 0&&(n.attributeTypes[l]=c.name)}const i=JSON.stringify(n);if(yw.has(e)){const l=yw.get(e);if(l.key===i)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(r=l,new Promise((c,u)=>{r._callbacks[s]={resolve:c,reject:u},r.postMessage({type:"decode",id:s,taskConfig:n,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),yw.set(e,{key:i,promise:a}),a}_createGeometry(e){const n=new ri;e.index&&n.setIndex(new On(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const r=e.attributes[i],s=r.name,o=r.array,a=r.itemSize;n.setAttribute(s,new On(o,a))}return n}_loadLibrary(e,n){const i=new ca(this.manager);return i.setPath(this.decoderPath),i.setResponseType(n),i.setWithCredentials(this.withCredentials),new Promise((r,s)=>{i.load(e,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",n=[];return e?n.push(this._loadLibrary("draco_decoder.js","text")):(n.push(this._loadLibrary("draco_wasm_wrapper.js","text")),n.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(n).then(i=>{const r=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const s=qme.toString(),o=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,n){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){const o=s.data;switch(o.type){case"decode":r._callbacks[o.id].resolve(o);break;case"error":r._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=n,i._taskLoad+=n,i})}_releaseTask(e,n){e._taskLoad-=e._taskCosts[n],delete e._callbacks[n],delete e._taskCosts[n]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function qme(){let t,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":t=a.decoderConfig,e=new Promise(function(u){t.onModuleLoaded=function(h){u({draco:h})},DracoDecoderModule(t)});break;case"decode":const l=a.buffer,c=a.taskConfig;e.then(u=>{const h=u.draco,f=new h.Decoder,d=new h.DecoderBuffer;d.Init(new Int8Array(l),l.byteLength);try{const p=n(h,f,d,c),m=p.attributes.map(g=>g.array.buffer);p.index&&m.push(p.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:p},m)}catch(p){console.error(p),self.postMessage({type:"error",id:a.id,error:p.message})}finally{h.destroy(d),h.destroy(f)}});break}};function n(o,a,l,c){const u=c.attributeIDs,h=c.attributeTypes;let f,d;const p=a.GetEncodedGeometryType(l);if(p===o.TRIANGULAR_MESH)f=new o.Mesh,d=a.DecodeBufferToMesh(l,f);else if(p===o.POINT_CLOUD)f=new o.PointCloud,d=a.DecodeBufferToPointCloud(l,f);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!d.ok()||f.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+d.error_msg());const m={index:null,attributes:[]};for(const g in u){const _=self[h[g]];let y,x;if(c.useUniqueIDs)x=u[g],y=a.GetAttributeByUniqueId(f,x);else{if(x=a.GetAttributeId(f,o[u[g]]),x===-1)continue;y=a.GetAttribute(f,x)}m.attributes.push(r(o,a,f,g,_,y))}return p===o.TRIANGULAR_MESH&&(m.index=i(o,a,f)),o.destroy(f),m}function i(o,a,l){const u=l.num_faces()*3,h=u*4,f=o._malloc(h);a.GetTrianglesUInt32Array(l,h,f);const d=new Uint32Array(o.HEAPF32.buffer,f,u).slice();return o._free(f),{array:d,itemSize:1}}function r(o,a,l,c,u,h){const f=h.num_components(),p=l.num_points()*f,m=p*u.BYTES_PER_ELEMENT,g=s(o,u),_=o._malloc(m);a.GetAttributeDataArrayForAllPoints(l,h,g,m,_);const y=new u(o.HEAPF32.buffer,_,p).slice();return o._free(_),{name:c,array:y,itemSize:f}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}const G4=new di,Hg=new $;class SI extends S3{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],n=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],i=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(i),this.setAttribute("position",new ur(e,3)),this.setAttribute("uv",new ur(n,2))}applyMatrix4(e){const n=this.attributes.instanceStart,i=this.attributes.instanceEnd;return n!==void 0&&(n.applyMatrix4(e),i.applyMatrix4(e),n.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let n;e instanceof Float32Array?n=e:Array.isArray(e)&&(n=new Float32Array(e));const i=new L_(n,6,1);return this.setAttribute("instanceStart",new Zl(i,3,0)),this.setAttribute("instanceEnd",new Zl(i,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e){let n;e instanceof Float32Array?n=e:Array.isArray(e)&&(n=new Float32Array(e));const i=new L_(n,6,1);return this.setAttribute("instanceColorStart",new Zl(i,3,0)),this.setAttribute("instanceColorEnd",new Zl(i,3,3)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new fN(e.geometry)),this}fromLineSegments(e){const n=e.geometry;return this.setPositions(n.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new di);const e=this.attributes.instanceStart,n=this.attributes.instanceEnd;e!==void 0&&n!==void 0&&(this.boundingBox.setFromBufferAttribute(e),G4.setFromBufferAttribute(n),this.boundingBox.union(G4))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new to),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,n=this.attributes.instanceEnd;if(e!==void 0&&n!==void 0){const i=this.boundingSphere.center;this.boundingBox.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)Hg.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Hg)),Hg.fromBufferAttribute(n,s),r=Math.max(r,i.distanceToSquared(Hg));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}}class mz extends SI{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const n=e.length-3,i=new Float32Array(2*n);for(let r=0;r<n;r+=3)i[2*r]=e[r],i[2*r+1]=e[r+1],i[2*r+2]=e[r+2],i[2*r+3]=e[r+3],i[2*r+4]=e[r+4],i[2*r+5]=e[r+5];return super.setPositions(i),this}setColors(e){const n=e.length-3,i=new Float32Array(2*n);for(let r=0;r<n;r+=3)i[2*r]=e[r],i[2*r+1]=e[r+1],i[2*r+2]=e[r+2],i[2*r+3]=e[r+3],i[2*r+4]=e[r+4],i[2*r+5]=e[r+5];return super.setColors(i),this}fromLine(e){const n=e.geometry;return this.setPositions(n.attributes.position.array),this}}ld.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new mt(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}};qp.line={uniforms:Eh.merge([ld.common,ld.fog,ld.line]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
				vUv = uv;

			#endif

			float aspect = resolution.x / resolution.y;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			#ifdef WORLD_UNITS

				worldStart = start.xyz;
				worldEnd = end.xyz;

			#else

				vUv = uv;

			#endif

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec3 ndcStart = clipStart.xyz / clipStart.w;
			vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

			// direction
			vec2 dir = ndcEnd.xy - ndcStart.xy;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			#ifdef WORLD_UNITS

				// get the offset direction as perpendicular to the view vector
				vec3 worldDir = normalize( end.xyz - start.xyz );
				vec3 offset;
				if ( position.y < 0.5 ) {

					offset = normalize( cross( start.xyz, worldDir ) );

				} else {

					offset = normalize( cross( end.xyz, worldDir ) );

				}

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

				// don't extend the line if we're rendering dashes because we
				// won't be rendering the endcaps
				#ifndef USE_DASH

					// extend the line bounds to encompass  endcaps
					start.xyz += - worldDir * linewidth * 0.5;
					end.xyz += worldDir * linewidth * 0.5;

					// shift the position of the quad so it hugs the forward edge of the line
					offset.xy -= dir * forwardOffset;
					offset.z += 0.5;

				#endif

				// endcaps
				if ( position.y > 1.0 || position.y < 0.0 ) {

					offset.xy += dir * 2.0 * forwardOffset;

				}

				// adjust for linewidth
				offset *= linewidth * 0.5;

				// set the world position
				worldPos = ( position.y < 0.5 ) ? start : end;
				worldPos.xyz += offset;

				// project the worldpos
				vec4 clip = projectionMatrix * worldPos;

				// shift the depth of the projected points so the line
				// segments overlap neatly
				vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
				clip.z = clipPose.z * clip.w;

			#else

				vec2 offset = vec2( dir.y, - dir.x );
				// undo aspect ratio adjustment
				dir.x /= aspect;
				offset.x /= aspect;

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				// endcaps
				if ( position.y < 0.0 ) {

					offset += - dir;

				} else if ( position.y > 1.0 ) {

					offset += dir;

				}

				// adjust for linewidth
				offset *= linewidth;

				// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
				offset /= resolution.y;

				// select end
				vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

				// back to clip space
				offset *= clip.w;

				clip.xy += offset;

			#endif

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;
		uniform float linewidth;

		#ifdef USE_DASH

			uniform float dashOffset;
			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

			float mua;
			float mub;

			vec3 p13 = p1 - p3;
			vec3 p43 = p4 - p3;

			vec3 p21 = p2 - p1;

			float d1343 = dot( p13, p43 );
			float d4321 = dot( p43, p21 );
			float d1321 = dot( p13, p21 );
			float d4343 = dot( p43, p43 );
			float d2121 = dot( p21, p21 );

			float denom = d2121 * d4343 - d4321 * d4321;

			float numer = d1343 * d4321 - d1321 * d4343;

			mua = numer / denom;
			mua = clamp( mua, 0.0, 1.0 );
			mub = ( d1343 + d4321 * ( mua ) ) / d4343;
			mub = clamp( mub, 0.0, 1.0 );

			return vec2( mua, mub );

		}

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			float alpha = opacity;

			#ifdef WORLD_UNITS

				// Find the closest points on the view ray and the line segment
				vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
				vec3 lineDir = worldEnd - worldStart;
				vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

				vec3 p1 = worldStart + lineDir * params.x;
				vec3 p2 = rayEnd * params.y;
				vec3 delta = p1 - p2;
				float len = length( delta );
				float norm = len / linewidth;

				#ifndef USE_DASH

					#ifdef USE_ALPHA_TO_COVERAGE

						float dnorm = fwidth( norm );
						alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

					#else

						if ( norm > 0.5 ) {

							discard;

						}

					#endif

				#endif

			#else

				#ifdef USE_ALPHA_TO_COVERAGE

					// artifacts appear on some hardware if a derivative is taken within a conditional
					float a = vUv.x;
					float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
					float len2 = a * a + b * b;
					float dlen = fwidth( len2 );

					if ( abs( vUv.y ) > 1.0 ) {

						alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

					}

				#else

					if ( abs( vUv.y ) > 1.0 ) {

						float a = vUv.x;
						float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
						float len2 = a * a + b * b;

						if ( len2 > 1.0 ) discard;

					}

				#endif

			#endif

			vec4 diffuseColor = vec4( diffuse, alpha );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, alpha );

			#include <tonemapping_fragment>
			#include <encodings_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`};class wx extends As{constructor(e){super({type:"LineMaterial",uniforms:Eh.clone(qp.line.uniforms),vertexShader:qp.line.vertexShader,fragmentShader:qp.line.fragmentShader,clipping:!0}),this.isLineMaterial=!0,Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(n){this.uniforms.diffuse.value=n}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(n){n===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(n){this.uniforms.linewidth.value=n}},dashed:{enumerable:!0,get:function(){return Boolean("USE_DASH"in this.defines)},set(n){Boolean(n)!==Boolean("USE_DASH"in this.defines)&&(this.needsUpdate=!0),n===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(n){this.uniforms.dashScale.value=n}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(n){this.uniforms.dashSize.value=n}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(n){this.uniforms.dashOffset.value=n}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(n){this.uniforms.gapSize.value=n}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(n){this.uniforms.opacity.value=n}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(n){this.uniforms.resolution.value.copy(n)}},alphaToCoverage:{enumerable:!0,get:function(){return Boolean("USE_ALPHA_TO_COVERAGE"in this.defines)},set:function(n){Boolean(n)!==Boolean("USE_ALPHA_TO_COVERAGE"in this.defines)&&(this.needsUpdate=!0),n===!0?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(e)}}const z4=new $,Q4=new $,zi=new dr,Qi=new dr,Ho=new dr,xw=new $,Ew=new Ze,lr=new Co,H4=new $,Vg=new di,Wg=new to,Vo=new dr;let ia,AS,Az,Hu;function V4(t,e,n){return Vo.set(0,0,-e,1).applyMatrix4(t.projectionMatrix),Vo.multiplyScalar(1/Vo.w),Vo.x=Hu/n.width,Vo.y=Hu/n.height,Vo.applyMatrix4(t.projectionMatrixInverse),Vo.multiplyScalar(1/Vo.w),Math.abs(Math.max(Vo.x,Vo.y))}function Jme(t,e){for(let n=0,i=AS.count;n<i;n++){lr.start.fromBufferAttribute(AS,n),lr.end.fromBufferAttribute(Az,n);const r=new $,s=new $;ia.distanceSqToSegment(lr.start,lr.end,s,r),s.distanceTo(r)<Hu*.5&&e.push({point:s,pointOnLine:r,distance:ia.origin.distanceTo(s),object:t,face:null,faceIndex:n,uv:null,uv2:null})}}function Kme(t,e,n){const i=e.projectionMatrix,s=t.material.resolution,o=t.matrixWorld,a=t.geometry,l=a.attributes.instanceStart,c=a.attributes.instanceEnd,u=-e.near;ia.at(1,Ho),Ho.w=1,Ho.applyMatrix4(e.matrixWorldInverse),Ho.applyMatrix4(i),Ho.multiplyScalar(1/Ho.w),Ho.x*=s.x/2,Ho.y*=s.y/2,Ho.z=0,xw.copy(Ho),Ew.multiplyMatrices(e.matrixWorldInverse,o);for(let h=0,f=l.count;h<f;h++){if(zi.fromBufferAttribute(l,h),Qi.fromBufferAttribute(c,h),zi.w=1,Qi.w=1,zi.applyMatrix4(Ew),Qi.applyMatrix4(Ew),zi.z>u&&Qi.z>u)continue;if(zi.z>u){const y=zi.z-Qi.z,x=(zi.z-u)/y;zi.lerp(Qi,x)}else if(Qi.z>u){const y=Qi.z-zi.z,x=(Qi.z-u)/y;Qi.lerp(zi,x)}zi.applyMatrix4(i),Qi.applyMatrix4(i),zi.multiplyScalar(1/zi.w),Qi.multiplyScalar(1/Qi.w),zi.x*=s.x/2,zi.y*=s.y/2,Qi.x*=s.x/2,Qi.y*=s.y/2,lr.start.copy(zi),lr.start.z=0,lr.end.copy(Qi),lr.end.z=0;const p=lr.closestPointToPointParameter(xw,!0);lr.at(p,H4);const m=ct.lerp(zi.z,Qi.z,p),g=m>=-1&&m<=1,_=xw.distanceTo(H4)<Hu*.5;if(g&&_){lr.start.fromBufferAttribute(l,h),lr.end.fromBufferAttribute(c,h),lr.start.applyMatrix4(o),lr.end.applyMatrix4(o);const y=new $,x=new $;ia.distanceSqToSegment(lr.start,lr.end,x,y),n.push({point:x,pointOnLine:y,distance:ia.origin.distanceTo(x),object:t,face:null,faceIndex:h,uv:null,uv2:null})}}}class Zme extends rt{constructor(e=new SI,n=new wx({color:Math.random()*16777215})){super(e,n),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,n=e.attributes.instanceStart,i=e.attributes.instanceEnd,r=new Float32Array(2*n.count);for(let o=0,a=0,l=n.count;o<l;o++,a+=2)z4.fromBufferAttribute(n,o),Q4.fromBufferAttribute(i,o),r[a]=a===0?0:r[a-1],r[a+1]=r[a]+z4.distanceTo(Q4);const s=new L_(r,2,1);return e.setAttribute("instanceDistanceStart",new Zl(s,1,0)),e.setAttribute("instanceDistanceEnd",new Zl(s,1,1)),this}raycast(e,n){const i=this.material.worldUnits,r=e.camera;r===null&&!i&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const s=e.params.Line2!==void 0&&e.params.Line2.threshold||0;ia=e.ray;const o=this.matrixWorld,a=this.geometry,l=this.material;Hu=l.linewidth+s,AS=a.attributes.instanceStart,Az=a.attributes.instanceEnd,a.boundingSphere===null&&a.computeBoundingSphere(),Wg.copy(a.boundingSphere).applyMatrix4(o);let c;if(i)c=Hu*.5;else{const h=Math.max(r.near,Wg.distanceToPoint(ia.origin));c=V4(r,h,l.resolution)}if(Wg.radius+=c,ia.intersectsSphere(Wg)===!1)return;a.boundingBox===null&&a.computeBoundingBox(),Vg.copy(a.boundingBox).applyMatrix4(o);let u;if(i)u=Hu*.5;else{const h=Math.max(r.near,Vg.distanceToPoint(ia.origin));u=V4(r,h,l.resolution)}Vg.expandByScalar(u),ia.intersectsBox(Vg)!==!1&&(i?Jme(this,n):Kme(this,r,n))}}class gz extends Zme{constructor(e=new mz,n=new wx({color:Math.random()*16777215})){super(e,n),this.isLine2=!0,this.type="Line2"}}let jg;const ww=()=>{if(jg)return jg;const t="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",n=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),i=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let r=t;WebAssembly.validate(n)&&(r=e);let s;const o=WebAssembly.instantiate(a(r),{}).then(h=>{s=h.instance,s.exports.__wasm_call_ctors()});function a(h){const f=new Uint8Array(h.length);for(let p=0;p<h.length;++p){const m=h.charCodeAt(p);f[p]=m>96?m-71:m>64?m-65:m>47?m+4:m>46?63:62}let d=0;for(let p=0;p<h.length;++p)f[d++]=f[p]<60?i[f[p]]:(f[p]-60)*64+f[++p];return f.buffer.slice(0,d)}function l(h,f,d,p,m,g){const _=s.exports.sbrk,y=d+3&-4,x=_(y*p),E=_(m.length),w=new Uint8Array(s.exports.memory.buffer);w.set(m,E);const S=h(x,d,p,E,m.length);if(S===0&&g&&g(x,y,p),f.set(w.subarray(x,x+d*p)),_(x-_(0)),S!==0)throw new Error(`Malformed buffer data: ${S}`)}const c={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},u={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return jg={ready:o,supported:!0,decodeVertexBuffer(h,f,d,p,m){l(s.exports.meshopt_decodeVertexBuffer,h,f,d,p,s.exports[c[m]])},decodeIndexBuffer(h,f,d,p){l(s.exports.meshopt_decodeIndexBuffer,h,f,d,p)},decodeIndexSequence(h,f,d,p){l(s.exports.meshopt_decodeIndexSequence,h,f,d,p)},decodeGltfBuffer(h,f,d,p,m,g){l(s.exports[u[m]],h,f,d,p,s.exports[c[g]])}},jg};function $me(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!Object.is(t[n[i]],e[n[i]]))return!1;return!0}const vz=R.exports.createContext([]);function e1e({box:t,multiple:e,children:n,onChange:i,border:r="1px solid #55aaff",backgroundColor:s="rgba(75, 160, 255, 0.1)",filter:o=l=>l,...a}){const{setEvents:l,camera:c,raycaster:u,gl:h,controls:f,size:d,get:p}=Te(),[m,g]=R.exports.useState(!1),[_,y]=R.exports.useReducer((S,{object:b,shift:M})=>b===void 0?[]:Array.isArray(b)?b:M?S.includes(b)?S.filter(T=>T!==b):[b,...S]:S[0]===b?[]:[b],[]);R.exports.useEffect(()=>void(i==null?void 0:i(_)),[_]);const x=R.exports.useCallback(S=>{S.stopPropagation(),y({object:o([S.object])[0],shift:e&&S.shiftKey})},[]),E=R.exports.useCallback(S=>!m&&y({}),[m]),w=R.exports.useRef(null);return R.exports.useEffect(()=>{if(!t||!e)return;const S=new ume(c,w.current),b=document.createElement("div");b.style.pointerEvents="none",b.style.border=r,b.style.backgroundColor=s,b.style.position="fixed";const M=new mt,T=new mt,B=new mt,L=p().events.enabled,F=f==null?void 0:f.enabled;let U=!1;function k(H,J){const{offsetX:j,offsetY:oe}=H,{width:K,height:ce}=d;J.set(j/K*2-1,-(oe/ce)*2+1)}function X(H){var J;f&&(f.enabled=!1),l({enabled:!1}),U=!0,(J=h.domElement.parentElement)==null||J.appendChild(b),b.style.left=`${H.clientX}px`,b.style.top=`${H.clientY}px`,b.style.width="0px",b.style.height="0px",M.x=H.clientX,M.y=H.clientY}function Y(H){B.x=Math.max(M.x,H.clientX),B.y=Math.max(M.y,H.clientY),T.x=Math.min(M.x,H.clientX),T.y=Math.min(M.y,H.clientY),b.style.left=`${T.x}px`,b.style.top=`${T.y}px`,b.style.width=`${B.x-T.x}px`,b.style.height=`${B.y-T.y}px`}function Z(){if(U){var H;f&&(f.enabled=F),l({enabled:L}),U=!1,(H=b.parentElement)==null||H.removeChild(b)}}function G(H){H.shiftKey&&(X(H),k(H,S.startPoint))}let O=[];function z(H){if(U){Y(H),k(H,S.endPoint);const J=S.select().sort(j=>j.uuid).filter(j=>j.isMesh);$me(J,O)||(O=J,y({object:o(J)}))}}function Q(H){U&&Z()}return document.addEventListener("pointerdown",G,{passive:!0}),document.addEventListener("pointermove",z,{passive:!0,capture:!0}),document.addEventListener("pointerup",Q,{passive:!0}),()=>{document.removeEventListener("pointerdown",G),document.removeEventListener("pointermove",z),document.removeEventListener("pointerup",Q)}},[d,u,c,f,h]),R.exports.createElement("group",oh({ref:w,onClick:x,onPointerOver:()=>g(!0),onPointerOut:()=>g(!1),onPointerMissed:E},a),R.exports.createElement(vz.Provider,{value:_},n))}function t1e(){return R.exports.useContext(vz)}const _z=R.exports.forwardRef(function({follow:e=!0,lockX:n=!1,lockY:i=!1,lockZ:r=!1,...s},o){const a=R.exports.useRef();return Ct(({camera:l})=>{if(!e||!a.current)return;const c=a.current.rotation.clone();a.current.quaternion.copy(l.quaternion),n&&(a.current.rotation.x=c.x),i&&(a.current.rotation.y=c.y),r&&(a.current.rotation.z=c.z)}),se("group",{ref:Hn([a,o]),...s})}),Cc=R.exports.forwardRef(function({points:e,color:n="black",vertexColors:i,linewidth:r,lineWidth:s,dashed:o,...a},l){const c=Te(d=>d.size),[u]=R.exports.useState(()=>new gz),[h]=R.exports.useState(()=>new wx),f=R.exports.useMemo(()=>{const d=new mz,p=e.map(m=>{const g=Array.isArray(m);return m instanceof $?[m.x,m.y,m.z]:m instanceof mt?[m.x,m.y,0]:g&&m.length===3?[m[0],m[1],m[2]]:g&&m.length===2?[m[0],m[1],0]:m});if(d.setPositions(p.flat()),i){const m=i.map(g=>g instanceof xt?g.toArray():g);d.setColors(m.flat())}return d},[e,i]);return R.exports.useLayoutEffect(()=>{u.computeLineDistances()},[e,u]),R.exports.useLayoutEffect(()=>{o?h.defines.USE_DASH="":delete h.defines.USE_DASH,h.needsUpdate=!0},[o,h]),R.exports.useEffect(()=>()=>f.dispose(),[f]),vt("primitive",{object:u,ref:l,...a,children:[se("primitive",{object:f,attach:"geometry"}),se("primitive",{object:h,attach:"material",color:n,vertexColors:Boolean(i),resolution:[c.width,c.height],linewidth:r!=null?r:s,dashed:o,...a})]})}),n1e=new $,i1e=R.exports.forwardRef(function({start:e=[0,0,0],end:n=[0,0,0],mid:i,segments:r=20,...s},o){const a=R.exports.useRef(null),[l]=R.exports.useState(()=>new W6(void 0,void 0,void 0)),c=R.exports.useCallback((h,f,d,p=20)=>(h instanceof $?l.v0.copy(h):l.v0.set(...h),f instanceof $?l.v2.copy(f):l.v2.set(...f),d instanceof $?l.v1.copy(d):l.v1.copy(l.v0.clone().add(l.v2.clone().sub(l.v0)).add(n1e.set(0,l.v0.y-l.v2.y,0))),l.getPoints(p)),[]);R.exports.useLayoutEffect(()=>{a.current.setPoints=(h,f,d)=>{const p=c(h,f,d);a.current.geometry&&a.current.geometry.setPositions(p.map(m=>m.toArray()).flat())}},[]);const u=R.exports.useMemo(()=>c(e,n,i,r),[e,n,i,r]);return se(Cc,{ref:Hn([a,o]),points:u,...s})}),r1e=R.exports.forwardRef(function({start:e,end:n,midA:i,midB:r,segments:s=20,...o},a){const l=R.exports.useMemo(()=>{const c=e instanceof $?e:new $(...e),u=n instanceof $?n:new $(...n),h=i instanceof $?i:new $(...i),f=r instanceof $?r:new $(...r);return new v6(c,h,f,u).getPoints(s)},[e,n,i,r,s]);return se(Cc,{ref:a,points:l,...o})}),s1e=R.exports.forwardRef(function({points:e,closed:n=!1,curveType:i="centripetal",tension:r=.5,segments:s=20,vertexColors:o,...a},l){const c=R.exports.useMemo(()=>{const f=e.map(d=>d instanceof $?d:new $(...d));return new p6(f,n,i,r)},[e,n,i,r]),u=R.exports.useMemo(()=>c.getPoints(s),[c,s]),h=R.exports.useMemo(()=>{if(!o||o.length<2)return;if(o.length===s+1)return o;const f=o.map(m=>m instanceof xt?m:new xt(...m));n&&f.push(f[0].clone());const d=[f[0]],p=s/(f.length-1);for(let m=1;m<s;m++){const g=m%p/p,_=Math.floor(m/p);d.push(f[_].clone().lerp(f[_+1],g))}return d.push(f[f.length-1]),d},[o,s]);return se(Cc,{ref:l,points:u,vertexColors:h,...a})}),o1e=R.exports.forwardRef(({url:t,distance:e=1,loop:n=!0,autoplay:i,...r},s)=>{const o=R.exports.useRef(),a=Te(({camera:u})=>u),[l]=R.exports.useState(()=>new f6),c=Ci(d6,t);return R.exports.useEffect(()=>{const u=o.current;u&&(u.setBuffer(c),u.setRefDistance(e),u.setLoop(n),i&&!u.isPlaying&&u.play())},[c,a,e,n]),R.exports.useEffect(()=>{const u=o.current;return a.add(l),()=>{a.remove(l),u&&(u.isPlaying&&u.stop(),u.source&&u.source._connected&&u.disconnect())}},[]),se("positionalAudio",{ref:Hn([o,s]),args:[l],...r})});function bI(){var t=0,e=[],n,i=0,r=0;function s(_,y){var x=bI();function E(){var w=t>0?_:y;if(m(w))try{var S=w(n);S===x&&p();var b=f(S);b?b.call(S,x.resolve,x.reject):x.resolve(S)}catch(M){x.reject(M)}else x[t>0?"resolve":"reject"](n)}return e.push(E),t&&c(),x}var o=d(function(_){r||l(1,_)}),a=d(function(_){r||l(-1,_)});function l(_,y){r++;var x=0;try{y===g&&p();var E=_>0&&f(y);E?E.call(y,d(function(w){x++,l(1,w)}),d(function(w){x++,l(-1,w)})):(t=_,n=y,c())}catch(w){!t&&!x&&l(-1,w)}}function c(){i||(setTimeout(u,0),i=1)}function u(){var _=e;i=0,e=[],_.forEach(h)}function h(_){_()}function f(_){var y=_&&(m(_)||typeof _=="object")&&_.then;return m(y)&&y}function d(_){var y=0;return function(){for(var x=[],E=arguments.length;E--;)x[E]=arguments[E];y++||_.apply(this,x)}}function p(){throw new TypeError("Chaining cycle detected")}var m=function(_){return typeof _=="function"},g={then:s,resolve:o,reject:a};return g}function yz(){var t,e,n=new Promise(function(i,r){t=i,e=r});return{then:n.then.bind(n),resolve:t,reject:e}}bI.all=yz.all=function(t){var e=0,n=[],i=ll();return t.length===0?i.resolve([]):t.forEach(function(r,s){var o=ll();o.resolve(r),o.then(function(a){e++,n[s]=a,e===t.length&&i.resolve(n)},i.reject)}),i};var ll=typeof Promise=="function"?yz:bI;function a1e(){var t=Object.create(null);function e(r,s){var o=r.id,a=r.name,l=r.dependencies;l===void 0&&(l=[]);var c=r.init;c===void 0&&(c=function(){});var u=r.getTransferables;if(u===void 0&&(u=null),!t[o])try{l=l.map(function(f){return f&&f.isWorkerModule&&(e(f,function(d){if(d instanceof Error)throw d}),f=t[f.id].value),f}),c=i("<"+a+">.init",c),u&&(u=i("<"+a+">.getTransferables",u));var h=null;typeof c=="function"?h=c.apply(void 0,l):console.error("worker module init function failed to rehydrate"),t[o]={id:o,value:h,getTransferables:u},s(h)}catch(f){f&&f.noLog||console.error(f),s(f)}}function n(r,s){var o,a=r.id,l=r.args;(!t[a]||typeof t[a].value!="function")&&s(new Error("Worker module "+a+": not found or its 'init' did not return a function"));try{var c=(o=t[a]).value.apply(o,l);c&&typeof c.then=="function"?c.then(u,function(h){return s(h instanceof Error?h:new Error(""+h))}):u(c)}catch(h){s(h)}function u(h){try{var f=t[a].getTransferables&&t[a].getTransferables(h);(!f||!Array.isArray(f)||!f.length)&&(f=void 0),s(h,f)}catch(d){console.error(d),s(d)}}}function i(r,s){var o=void 0;self.troikaDefine=function(l){return o=l};var a=URL.createObjectURL(new Blob(["/** "+r.replace(/\*/g,"")+` **/

troikaDefine(
`+s+`
)`],{type:"application/javascript"}));try{importScripts(a)}catch(l){console.error(l)}return URL.revokeObjectURL(a),delete self.troikaDefine,o}self.addEventListener("message",function(r){var s=r.data,o=s.messageId,a=s.action,l=s.data;try{a==="registerModule"&&e(l,function(c){c instanceof Error?postMessage({messageId:o,success:!1,error:c.message}):postMessage({messageId:o,success:!0,result:{isCallable:typeof c=="function"}})}),a==="callModule"&&n(l,function(c,u){c instanceof Error?postMessage({messageId:o,success:!1,error:c.message}):postMessage({messageId:o,success:!0,result:c},u||void 0)})}catch(c){postMessage({messageId:o,success:!1,error:c.stack})}})}function l1e(t){var e=function(){for(var n=[],i=arguments.length;i--;)n[i]=arguments[i];return e._getInitResult().then(function(r){if(typeof r=="function")return r.apply(void 0,n);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var n=t.dependencies,i=t.init;n=Array.isArray(n)?n.map(function(s){return s&&s._getInitResult?s._getInitResult():s}):[];var r=ll.all(n).then(function(s){return i.apply(null,s)});return e._getInitResult=function(){return r},r},e}var xz=function(){var t=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),t=!0}catch(n){typeof process<"u",console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+n.message+"]")}return xz=function(){return t},t},c1e=0,u1e=0,Mw=!1,em=Object.create(null),tm=Object.create(null),gS=Object.create(null);function o0(t){if((!t||typeof t.init!="function")&&!Mw)throw new Error("requires `options.init` function");var e=t.dependencies,n=t.init,i=t.getTransferables,r=t.workerId;if(!xz())return l1e(t);r==null&&(r="#default");var s="workerModule"+ ++c1e,o=t.name||s,a=null;e=e&&e.map(function(c){return typeof c=="function"&&!c.workerModuleData&&(Mw=!0,c=o0({workerId:r,name:"<"+o+"> function dependency: "+c.name,init:`function(){return (
`+Yv(c)+`
)}`}),Mw=!1),c&&c.workerModuleData&&(c=c.workerModuleData),c});function l(){for(var c=[],u=arguments.length;u--;)c[u]=arguments[u];if(!a){a=W4(r,"registerModule",l.workerModuleData);var h=function(){a=null,tm[r].delete(h)};(tm[r]||(tm[r]=new Set)).add(h)}return a.then(function(f){var d=f.isCallable;if(d)return W4(r,"callModule",{id:s,args:c});throw new Error("Worker module function was called but `init` did not return a callable function")})}return l.workerModuleData={isWorkerModule:!0,id:s,name:o,dependencies:e,init:Yv(n),getTransferables:i&&Yv(i)},l}function h1e(t){tm[t]&&tm[t].forEach(function(e){e()}),em[t]&&(em[t].terminate(),delete em[t])}function Yv(t){var e=t.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function f1e(t){var e=em[t];if(!e){var n=Yv(a1e);e=em[t]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+t.replace(/\*/g,"")+` **/

;(`+n+")()"],{type:"application/javascript"}))),e.onmessage=function(i){var r=i.data,s=r.messageId,o=gS[s];if(!o)throw new Error("WorkerModule response with empty or unknown messageId");delete gS[s],o(r)}}return e}function W4(t,e,n){var i=ll(),r=++u1e;return gS[r]=function(s){s.success?i.resolve(s.result):i.reject(new Error("Error in worker "+e+" call: "+s.error))},f1e(t).postMessage({messageId:r,action:e,data:n}),i}var d1e=o0({name:"Thenable",dependencies:[ll],init:function(t){return t}});function Ez(){var t=function(e){function n(O,z,Q,H,J,j,oe,K){var ce=1-oe;K.x=ce*ce*O+2*ce*oe*Q+oe*oe*J,K.y=ce*ce*z+2*ce*oe*H+oe*oe*j}function i(O,z,Q,H,J,j,oe,K,ce,he){var ve=1-ce;he.x=ve*ve*ve*O+3*ve*ve*ce*Q+3*ve*ce*ce*J+ce*ce*ce*oe,he.y=ve*ve*ve*z+3*ve*ve*ce*H+3*ve*ce*ce*j+ce*ce*ce*K}function r(O,z){for(var Q=/([MLQCZ])([^MLQCZ]*)/g,H,J,j,oe,K;H=Q.exec(O);){var ce=H[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(he){return parseFloat(he)});switch(H[1]){case"M":oe=J=ce[0],K=j=ce[1];break;case"L":(ce[0]!==oe||ce[1]!==K)&&z("L",oe,K,oe=ce[0],K=ce[1]);break;case"Q":{z("Q",oe,K,oe=ce[2],K=ce[3],ce[0],ce[1]);break}case"C":{z("C",oe,K,oe=ce[4],K=ce[5],ce[0],ce[1],ce[2],ce[3]);break}case"Z":(oe!==J||K!==j)&&z("L",oe,K,J,j);break}}}function s(O,z,Q){Q===void 0&&(Q=16);var H={x:0,y:0};r(O,function(J,j,oe,K,ce,he,ve,Me,Se){switch(J){case"L":z(j,oe,K,ce);break;case"Q":{for(var le=j,pe=oe,Pe=1;Pe<Q;Pe++)n(j,oe,he,ve,K,ce,Pe/(Q-1),H),z(le,pe,H.x,H.y),le=H.x,pe=H.y;break}case"C":{for(var Oe=j,ke=oe,Ke=1;Ke<Q;Ke++)i(j,oe,he,ve,Me,Se,K,ce,Ke/(Q-1),H),z(Oe,ke,H.x,H.y),Oe=H.x,ke=H.y;break}}})}var o="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",a="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",l=new WeakMap,c={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function u(O,z){var Q=O.getContext?O.getContext("webgl",c):O,H=l.get(Q);if(!H){let Oe=function(be){var q=j[be];if(!q&&(q=j[be]=Q.getExtension(be),!q))throw new Error(be+" not supported");return q},ke=function(be,q){var W=Q.createShader(q);return Q.shaderSource(W,be),Q.compileShader(W),W},Ke=function(be,q,W,ie){if(!oe[be]){var fe={},_e={},Ge=Q.createProgram();Q.attachShader(Ge,ke(q,Q.VERTEX_SHADER)),Q.attachShader(Ge,ke(W,Q.FRAGMENT_SHADER)),Q.linkProgram(Ge),oe[be]={program:Ge,transaction:function(Le){Q.useProgram(Ge),Le({setUniform:function(je,re){for(var ge=[],Ce=arguments.length-2;Ce-- >0;)ge[Ce]=arguments[Ce+2];var Re=_e[re]||(_e[re]=Q.getUniformLocation(Ge,re));Q["uniform"+je].apply(Q,[Re].concat(ge))},setAttribute:function(je,re,ge,Ce,Re){var Je=fe[je];Je||(Je=fe[je]={buf:Q.createBuffer(),loc:Q.getAttribLocation(Ge,je),data:null}),Q.bindBuffer(Q.ARRAY_BUFFER,Je.buf),Q.vertexAttribPointer(Je.loc,re,Q.FLOAT,!1,0,0),Q.enableVertexAttribArray(Je.loc),J?Q.vertexAttribDivisor(Je.loc,Ce):Oe("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(Je.loc,Ce),Re!==Je.data&&(Q.bufferData(Q.ARRAY_BUFFER,Re,ge),Je.data=Re)}})}}}oe[be].transaction(ie)},xe=function(be,q){ce++;try{Q.activeTexture(Q.TEXTURE0+ce);var W=K[be];W||(W=K[be]=Q.createTexture(),Q.bindTexture(Q.TEXTURE_2D,W),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_MIN_FILTER,Q.NEAREST),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_MAG_FILTER,Q.NEAREST)),Q.bindTexture(Q.TEXTURE_2D,W),q(W,ce)}finally{ce--}},Ue=function(be,q,W){var ie=Q.createFramebuffer();he.push(ie),Q.bindFramebuffer(Q.FRAMEBUFFER,ie),Q.activeTexture(Q.TEXTURE0+q),Q.bindTexture(Q.TEXTURE_2D,be),Q.framebufferTexture2D(Q.FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Q.TEXTURE_2D,be,0);try{W(ie)}finally{Q.deleteFramebuffer(ie),Q.bindFramebuffer(Q.FRAMEBUFFER,he[--he.length-1]||null)}},He=function(){j={},oe={},K={},ce=-1,he.length=0};var ve=Oe,Me=ke,Se=Ke,le=xe,pe=Ue,Pe=He,J=typeof WebGL2RenderingContext<"u"&&Q instanceof WebGL2RenderingContext,j={},oe={},K={},ce=-1,he=[];Q.canvas.addEventListener("webglcontextlost",function(be){He(),be.preventDefault()},!1),l.set(Q,H={gl:Q,isWebGL2:J,getExtension:Oe,withProgram:Ke,withTexture:xe,withTextureFramebuffer:Ue,handleContextLoss:He})}z(H)}function h(O,z,Q,H,J,j,oe,K){oe===void 0&&(oe=15),K===void 0&&(K=null),u(O,function(ce){var he=ce.gl,ve=ce.withProgram,Me=ce.withTexture;Me("copy",function(Se,le){he.texImage2D(he.TEXTURE_2D,0,he.RGBA,J,j,0,he.RGBA,he.UNSIGNED_BYTE,z),ve("copy",o,a,function(pe){var Pe=pe.setUniform,Oe=pe.setAttribute;Oe("aUV",2,he.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),Pe("1i","image",le),he.bindFramebuffer(he.FRAMEBUFFER,K||null),he.disable(he.BLEND),he.colorMask(oe&8,oe&4,oe&2,oe&1),he.viewport(Q,H,J,j),he.scissor(Q,H,J,j),he.drawArrays(he.TRIANGLES,0,3)})})})}function f(O,z,Q){var H=O.width,J=O.height;u(O,function(j){var oe=j.gl,K=new Uint8Array(H*J*4);oe.readPixels(0,0,H,J,oe.RGBA,oe.UNSIGNED_BYTE,K),O.width=z,O.height=Q,h(oe,K,0,0,H,J)})}var d=Object.freeze({__proto__:null,withWebGLContext:u,renderImageData:h,resizeWebGLCanvasWithoutClearing:f});function p(O,z,Q,H,J,j){j===void 0&&(j=1);var oe=new Uint8Array(O*z),K=H[2]-H[0],ce=H[3]-H[1],he=[];s(Q,function(Oe,ke,Ke,xe){he.push({x1:Oe,y1:ke,x2:Ke,y2:xe,minX:Math.min(Oe,Ke),minY:Math.min(ke,xe),maxX:Math.max(Oe,Ke),maxY:Math.max(ke,xe)})}),he.sort(function(Oe,ke){return Oe.maxX-ke.maxX});for(var ve=0;ve<O;ve++)for(var Me=0;Me<z;Me++){var Se=pe(H[0]+K*(ve+.5)/O,H[1]+ce*(Me+.5)/z),le=Math.pow(1-Math.abs(Se)/J,j)/2;Se<0&&(le=1-le),le=Math.max(0,Math.min(255,Math.round(le*255))),oe[Me*O+ve]=le}return oe;function pe(Oe,ke){for(var Ke=1/0,xe=1/0,Ue=he.length;Ue--;){var He=he[Ue];if(He.maxX+xe<=Oe)break;if(Oe+xe>He.minX&&ke-xe<He.maxY&&ke+xe>He.minY){var be=_(Oe,ke,He.x1,He.y1,He.x2,He.y2);be<Ke&&(Ke=be,xe=Math.sqrt(Ke))}}return Pe(Oe,ke)&&(xe=-xe),xe}function Pe(Oe,ke){for(var Ke=0,xe=he.length;xe--;){var Ue=he[xe];if(Ue.maxX<=Oe)break;var He=Ue.y1>ke!=Ue.y2>ke&&Oe<(Ue.x2-Ue.x1)*(ke-Ue.y1)/(Ue.y2-Ue.y1)+Ue.x1;He&&(Ke+=Ue.y1<Ue.y2?1:-1)}return Ke!==0}}function m(O,z,Q,H,J,j,oe,K,ce,he){j===void 0&&(j=1),K===void 0&&(K=0),ce===void 0&&(ce=0),he===void 0&&(he=0),g(O,z,Q,H,J,j,oe,null,K,ce,he)}function g(O,z,Q,H,J,j,oe,K,ce,he,ve){j===void 0&&(j=1),ce===void 0&&(ce=0),he===void 0&&(he=0),ve===void 0&&(ve=0);for(var Me=p(O,z,Q,H,J,j),Se=new Uint8Array(Me.length*4),le=0;le<Me.length;le++)Se[le*4+ve]=Me[le];h(oe,Se,ce,he,O,z,1<<3-ve,K)}function _(O,z,Q,H,J,j){var oe=J-Q,K=j-H,ce=oe*oe+K*K,he=ce?Math.max(0,Math.min(1,((O-Q)*oe+(z-H)*K)/ce)):0,ve=O-(Q+he*oe),Me=z-(H+he*K);return ve*ve+Me*Me}var y=Object.freeze({__proto__:null,generate:p,generateIntoCanvas:m,generateIntoFramebuffer:g}),x="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",E="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",w="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",S=new Float32Array([0,0,2,0,0,2]),b=null,M=!1,T={},B=new WeakMap;function L(O){if(!M&&!X(O))throw new Error("WebGL generation not supported")}function F(O,z,Q,H,J,j,oe){if(j===void 0&&(j=1),oe===void 0&&(oe=null),!oe&&(oe=b,!oe)){var K=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!K)throw new Error("OffscreenCanvas or DOM canvas not supported");oe=b=K.getContext("webgl",{depth:!1})}L(oe);var ce=new Uint8Array(O*z*4);u(oe,function(Se){var le=Se.gl,pe=Se.withTexture,Pe=Se.withTextureFramebuffer;pe("readable",function(Oe,ke){le.texImage2D(le.TEXTURE_2D,0,le.RGBA,O,z,0,le.RGBA,le.UNSIGNED_BYTE,null),Pe(Oe,ke,function(Ke){k(O,z,Q,H,J,j,le,Ke,0,0,0),le.readPixels(0,0,O,z,le.RGBA,le.UNSIGNED_BYTE,ce)})})});for(var he=new Uint8Array(O*z),ve=0,Me=0;ve<ce.length;ve+=4)he[Me++]=ce[ve];return he}function U(O,z,Q,H,J,j,oe,K,ce,he){j===void 0&&(j=1),K===void 0&&(K=0),ce===void 0&&(ce=0),he===void 0&&(he=0),k(O,z,Q,H,J,j,oe,null,K,ce,he)}function k(O,z,Q,H,J,j,oe,K,ce,he,ve){j===void 0&&(j=1),ce===void 0&&(ce=0),he===void 0&&(he=0),ve===void 0&&(ve=0),L(oe);var Me=[];s(Q,function(Se,le,pe,Pe){Me.push(Se,le,pe,Pe)}),Me=new Float32Array(Me),u(oe,function(Se){var le=Se.gl,pe=Se.isWebGL2,Pe=Se.getExtension,Oe=Se.withProgram,ke=Se.withTexture,Ke=Se.withTextureFramebuffer,xe=Se.handleContextLoss;if(ke("rawDistances",function(Ue,He){(O!==Ue._lastWidth||z!==Ue._lastHeight)&&le.texImage2D(le.TEXTURE_2D,0,le.RGBA,Ue._lastWidth=O,Ue._lastHeight=z,0,le.RGBA,le.UNSIGNED_BYTE,null),Oe("main",x,E,function(be){var q=be.setAttribute,W=be.setUniform,ie=!pe&&Pe("ANGLE_instanced_arrays"),fe=!pe&&Pe("EXT_blend_minmax");q("aUV",2,le.STATIC_DRAW,0,S),q("aLineSegment",4,le.DYNAMIC_DRAW,1,Me),W.apply(void 0,["4f","uGlyphBounds"].concat(H)),W("1f","uMaxDistance",J),W("1f","uExponent",j),Ke(Ue,He,function(_e){le.enable(le.BLEND),le.colorMask(!0,!0,!0,!0),le.viewport(0,0,O,z),le.scissor(0,0,O,z),le.blendFunc(le.ONE,le.ONE),le.blendEquationSeparate(le.FUNC_ADD,pe?le.MAX:fe.MAX_EXT),le.clear(le.COLOR_BUFFER_BIT),pe?le.drawArraysInstanced(le.TRIANGLES,0,3,Me.length/4):ie.drawArraysInstancedANGLE(le.TRIANGLES,0,3,Me.length/4)})}),Oe("post",o,w,function(be){be.setAttribute("aUV",2,le.STATIC_DRAW,0,S),be.setUniform("1i","tex",He),le.bindFramebuffer(le.FRAMEBUFFER,K),le.disable(le.BLEND),le.colorMask(ve===0,ve===1,ve===2,ve===3),le.viewport(ce,he,O,z),le.scissor(ce,he,O,z),le.drawArrays(le.TRIANGLES,0,3)})}),le.isContextLost())throw xe(),new Error("webgl context lost")})}function X(O){var z=!O||O===b?T:O.canvas||O,Q=B.get(z);if(Q===void 0){M=!0;var H=null;try{var J=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],j=F(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,O);Q=j&&J.length===j.length&&j.every(function(oe,K){return oe===J[K]}),Q||(H="bad trial run results",console.info(J,j))}catch(oe){Q=!1,H=oe.message}H&&console.warn("WebGL SDF generation not supported:",H),M=!1,B.set(z,Q)}return Q}var Y=Object.freeze({__proto__:null,generate:F,generateIntoCanvas:U,generateIntoFramebuffer:k,isSupported:X});function Z(O,z,Q,H,J,j){J===void 0&&(J=Math.max(H[2]-H[0],H[3]-H[1])/2),j===void 0&&(j=1);try{return F.apply(Y,arguments)}catch(oe){return console.info("WebGL SDF generation failed, falling back to JS",oe),p.apply(y,arguments)}}function G(O,z,Q,H,J,j,oe,K,ce,he){J===void 0&&(J=Math.max(H[2]-H[0],H[3]-H[1])/2),j===void 0&&(j=1),K===void 0&&(K=0),ce===void 0&&(ce=0),he===void 0&&(he=0);try{return U.apply(Y,arguments)}catch(ve){return console.info("WebGL SDF generation failed, falling back to JS",ve),m.apply(y,arguments)}}return e.forEachPathCommand=r,e.generate=Z,e.generateIntoCanvas=G,e.javascript=y,e.pathToLineSegments=s,e.webgl=Y,e.webglUtils=d,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return t}function p1e(){var t=function(e){var n={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},i={},r={};i.L=1,r[1]="L",Object.keys(n).forEach(function(xe,Ue){i[xe]=1<<Ue+1,r[i[xe]]=xe}),Object.freeze(i);var s=i.LRI|i.RLI|i.FSI,o=i.L|i.R|i.AL,a=i.B|i.S|i.WS|i.ON|i.FSI|i.LRI|i.RLI|i.PDI,l=i.BN|i.RLE|i.LRE|i.RLO|i.LRO|i.PDF,c=i.S|i.WS|i.B|s|i.PDI|l,u=null;function h(){if(!u){u=new Map;var xe=function(He){if(n.hasOwnProperty(He)){var be=0;n[He].split(",").forEach(function(q){var W=q.split("+"),ie=W[0],fe=W[1];ie=parseInt(ie,36),fe=fe?parseInt(fe,36):0,u.set(be+=ie,i[He]);for(var _e=0;_e<fe;_e++)u.set(++be,i[He])})}};for(var Ue in n)xe(Ue)}}function f(xe){return h(),u.get(xe.codePointAt(0))||i.L}function d(xe){return r[f(xe)]}var p={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function m(xe,Ue){var He=36,be=0,q=new Map,W=Ue&&new Map,ie;return xe.split(",").forEach(function fe(_e){if(_e.indexOf("+")!==-1)for(var Ge=+_e;Ge--;)fe(ie);else{ie=_e;var Ie=_e.split(">"),Le=Ie[0],ye=Ie[1];Le=String.fromCodePoint(be+=parseInt(Le,He)),ye=String.fromCodePoint(be+=parseInt(ye,He)),q.set(Le,ye),Ue&&W.set(ye,Le)}}),{map:q,reverseMap:W}}var g,_,y;function x(){if(!g){var xe=m(p.pairs,!0),Ue=xe.map,He=xe.reverseMap;g=Ue,_=He,y=m(p.canonical,!1).map}}function E(xe){return x(),g.get(xe)||null}function w(xe){return x(),_.get(xe)||null}function S(xe){return x(),y.get(xe)||null}var b=i.L,M=i.R,T=i.EN,B=i.ES,L=i.ET,F=i.AN,U=i.CS,k=i.B,X=i.S,Y=i.ON,Z=i.BN,G=i.NSM,O=i.AL,z=i.LRO,Q=i.RLO,H=i.LRE,J=i.RLE,j=i.PDF,oe=i.LRI,K=i.RLI,ce=i.FSI,he=i.PDI;function ve(xe,Ue){for(var He=125,be=new Uint32Array(xe.length),q=0;q<xe.length;q++)be[q]=f(xe[q]);var W=new Map;function ie(si,bi){var _n=be[si];be[si]=bi,W.set(_n,W.get(_n)-1),_n&a&&W.set(a,W.get(a)-1),W.set(bi,(W.get(bi)||0)+1),bi&a&&W.set(a,(W.get(a)||0)+1)}for(var fe=new Uint8Array(xe.length),_e=new Map,Ge=[],Ie=null,Le=0;Le<xe.length;Le++)Ie||Ge.push(Ie={start:Le,end:xe.length-1,level:Ue==="rtl"?1:Ue==="ltr"?0:Lh(Le,!1)}),be[Le]&k&&(Ie.end=Le,Ie=null);for(var ye=J|H|Q|z|s|he|j|k,je=function(si){return si+(si&1?1:2)},re=function(si){return si+(si&1?2:1)},ge=0;ge<Ge.length;ge++){Ie=Ge[ge];var Ce=[{_level:Ie.level,_override:0,_isolate:0}],Re=void 0,Je=0,ae=0,qe=0;W.clear();for(var ze=Ie.start;ze<=Ie.end;ze++){var we=be[ze];if(Re=Ce[Ce.length-1],W.set(we,(W.get(we)||0)+1),we&a&&W.set(a,(W.get(a)||0)+1),we&ye)if(we&(J|H)){fe[ze]=Re._level;var We=(we===J?re:je)(Re._level);We<=He&&!Je&&!ae?Ce.push({_level:We,_override:0,_isolate:0}):Je||ae++}else if(we&(Q|z)){fe[ze]=Re._level;var ht=(we===Q?re:je)(Re._level);ht<=He&&!Je&&!ae?Ce.push({_level:ht,_override:we&Q?M:b,_isolate:0}):Je||ae++}else if(we&s){we&ce&&(we=Lh(ze+1,!0)===1?K:oe),fe[ze]=Re._level,Re._override&&ie(ze,Re._override);var bt=(we===K?re:je)(Re._level);bt<=He&&Je===0&&ae===0?(qe++,Ce.push({_level:bt,_override:0,_isolate:1,_isolInitIndex:ze})):Je++}else if(we&he){if(Je>0)Je--;else if(qe>0){for(ae=0;!Ce[Ce.length-1]._isolate;)Ce.pop();var cn=Ce[Ce.length-1]._isolInitIndex;cn!=null&&(_e.set(cn,ze),_e.set(ze,cn)),Ce.pop(),qe--}Re=Ce[Ce.length-1],fe[ze]=Re._level,Re._override&&ie(ze,Re._override)}else we&j?(Je===0&&(ae>0?ae--:!Re._isolate&&Ce.length>1&&(Ce.pop(),Re=Ce[Ce.length-1])),fe[ze]=Re._level):we&k&&(fe[ze]=Ie.level);else fe[ze]=Re._level,Re._override&&we!==Z&&ie(ze,Re._override)}for(var Vt=[],At=null,un=Ie.start;un<=Ie.end;un++){var dn=be[un];if(!(dn&l)){var hn=fe[un],Vn=dn&s,mr=dn===he;At&&hn===At._level?(At._end=un,At._endsWithIsolInit=Vn):Vt.push(At={_start:un,_end:un,_level:hn,_startsWithPDI:mr,_endsWithIsolInit:Vn})}}for(var qn=[],Dn=0;Dn<Vt.length;Dn++){var pi=Vt[Dn];if(!pi._startsWithPDI||pi._startsWithPDI&&!_e.has(pi._start)){for(var ee=[At=pi],me=void 0;At&&At._endsWithIsolInit&&(me=_e.get(At._end))!=null;)for(var De=Dn+1;De<Vt.length;De++)if(Vt[De]._start===me){ee.push(At=Vt[De]);break}for(var Ae=[],Ne=0;Ne<ee.length;Ne++)for(var pt=ee[Ne],Et=pt._start;Et<=pt._end;Et++)Ae.push(Et);for(var Pt=fe[Ae[0]],St=Ie.level,Wt=Ae[0]-1;Wt>=0;Wt--)if(!(be[Wt]&l)){St=fe[Wt];break}var Ot=Ae[Ae.length-1],jt=fe[Ot],vn=Ie.level;if(!(be[Ot]&s)){for(var Fr=Ot+1;Fr<=Ie.end;Fr++)if(!(be[Fr]&l)){vn=fe[Fr];break}}qn.push({_seqIndices:Ae,_sosType:Math.max(St,Pt)%2?M:b,_eosType:Math.max(vn,jt)%2?M:b})}}for(var ws=0;ws<qn.length;ws++){var Ms=qn[ws],it=Ms._seqIndices,Dt=Ms._sosType,Cs=Ms._eosType;if(W.get(G))for(var pn=0;pn<it.length;pn++){var ki=it[pn];if(be[ki]&G){for(var Ki=Dt,Ui=pn-1;Ui>=0;Ui--)if(!(be[it[Ui]]&l)){Ki=be[it[Ui]];break}ie(ki,Ki&(s|he)?Y:Ki)}}if(W.get(T))for(var Oi=0;Oi<it.length;Oi++){var It=it[Oi];if(be[It]&T)for(var Nt=Oi-1;Nt>=-1;Nt--){var Ar=Nt===-1?Dt:be[it[Nt]];if(Ar&o){Ar===O&&ie(It,F);break}}}if(W.get(O))for(var en=0;en<it.length;en++){var Jn=it[en];be[Jn]&O&&ie(Jn,M)}if(W.get(B)||W.get(U))for(var gr=1;gr<it.length-1;gr++){var Jr=it[gr];if(be[Jr]&(B|U)){for(var Kn=0,pl=0,Ih=gr-1;Ih>=0&&(Kn=be[it[Ih]],!!(Kn&l));Ih--);for(var Th=gr+1;Th<it.length&&(pl=be[it[Th]],!!(pl&l));Th++);Kn===pl&&(be[Jr]===B?Kn===T:Kn&(T|F))&&ie(Jr,Kn)}}if(W.get(T))for(var Do=0;Do<it.length;Do++){var U1=it[Do];if(be[U1]&T){for(var Zi=Do-1;Zi>=0&&be[it[Zi]]&(L|l);Zi--)ie(it[Zi],T);for(var Bh=Do+1;Bh<it.length&&be[it[Bh]]&(L|l);Bh++)ie(it[Bh],T)}}if(W.get(L)||W.get(B)||W.get(U))for(var Uc=0;Uc<it.length;Uc++){var O1=it[Uc];if(be[O1]&(L|B|U)){ie(O1,Y);for(var Aa=Uc-1;Aa>=0&&be[it[Aa]]&l;Aa--)ie(it[Aa],Y);for(var ga=Uc+1;ga<it.length&&be[it[ga]]&l;ga++)ie(it[ga],Y)}}if(W.get(T))for(var va=0,Oc=Dt;va<it.length;va++){var N1=it[va],f0=be[N1];f0&T?Oc===b&&ie(N1,b):f0&o&&(Oc=f0)}if(W.get(a)){var _a=M|T|F,Rh=_a|b,Fo=[];{for(var ml=[],Lo=0;Lo<it.length;Lo++)if(be[it[Lo]]&a){var Qt=xe[it[Lo]],d0=void 0;if(E(Qt)!==null)if(ml.length<63)ml.push({char:Qt,seqIndex:Lo});else break;else if((d0=w(Qt))!==null)for(var ya=ml.length-1;ya>=0;ya--){var Ph=ml[ya].char;if(Ph===d0||Ph===w(S(Qt))||E(S(Ph))===Qt){Fo.push([ml[ya].seqIndex,Lo]),ml.length=ya;break}}}Fo.sort(function(si,bi){return si[0]-bi[0]})}for(var p0=0;p0<Fo.length;p0++){for(var G1=Fo[p0],Tn=G1[0],Al=G1[1],z1=!1,vr=0,m0=Tn+1;m0<Al;m0++){var gl=it[m0];if(be[gl]&Rh){z1=!0;var Kr=be[gl]&_a?M:b;if(Kr===Uo(gl)){vr=Kr;break}}}if(z1&&!vr){vr=Dt;for(var A0=Tn-1;A0>=0;A0--){var Dh=it[A0];if(be[Dh]&Rh){var Zr=be[Dh]&_a?M:b;Zr!==Uo(Dh)?vr=Zr:vr=Uo(Dh);break}}}if(vr){if(be[it[Tn]]=be[it[Al]]=vr,vr!==Uo(it[Tn])){for(var _r=Tn+1;_r<it.length;_r++)if(!(be[it[_r]]&l)){f(xe[it[_r]])&G&&(be[it[_r]]=vr);break}}if(vr!==Uo(it[Al])){for(var ko=Al+1;ko<it.length;ko++)if(!(be[it[ko]]&l)){f(xe[it[ko]])&G&&(be[it[ko]]=vr);break}}}}for(var Ss=0;Ss<it.length;Ss++)if(be[it[Ss]]&a){for(var g0=Ss,v0=Ss,Lr=Dt,Nc=Ss-1;Nc>=0;Nc--)if(be[it[Nc]]&l)g0=Nc;else{Lr=be[it[Nc]]&_a?M:b;break}for(var Gc=Cs,zc=Ss+1;zc<it.length;zc++)if(be[it[zc]]&(a|l))v0=zc;else{Gc=be[it[zc]]&_a?M:b;break}for(var $i=g0;$i<=v0;$i++)be[it[$i]]=Lr===Gc?Lr:Uo(it[$i]);Ss=v0}}}for(var Si=Ie.start;Si<=Ie.end;Si++){var Fh=fe[Si],no=be[Si];if(Fh&1?no&(b|T|F)&&fe[Si]++:no&M?fe[Si]++:no&(F|T)&&(fe[Si]+=2),no&l&&(fe[Si]=Si===0?Ie.level:fe[Si-1]),Si===Ie.end||f(xe[Si])&(X|k))for(var vl=Si;vl>=0&&f(xe[vl])&c;vl--)fe[vl]=Ie.level}}return{levels:fe,paragraphs:Ge};function Lh(si,bi){for(var _n=si;_n<xe.length;_n++){var mi=be[_n];if(mi&(M|O))return 1;if(mi&(k|b)||bi&&mi===he)return 0;if(mi&s){var io=Q1(_n);_n=io===-1?xe.length:io}}return 0}function Q1(si){for(var bi=1,_n=si+1;_n<xe.length;_n++){var mi=be[_n];if(mi&k)break;if(mi&he){if(--bi===0)return _n}else mi&s&&bi++}return-1}function Uo(si){return fe[si]&1?M:b}}var Me="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",Se;function le(){if(!Se){var xe=m(Me,!0),Ue=xe.map,He=xe.reverseMap;He.forEach(function(be,q){Ue.set(q,be)}),Se=Ue}}function pe(xe){return le(),Se.get(xe)||null}function Pe(xe,Ue,He,be){var q=xe.length;He=Math.max(0,He==null?0:+He),be=Math.min(q-1,be==null?q-1:+be);for(var W=new Map,ie=He;ie<=be;ie++)if(Ue[ie]&1){var fe=pe(xe[ie]);fe!==null&&W.set(ie,fe)}return W}function Oe(xe,Ue,He,be){var q=xe.length;He=Math.max(0,He==null?0:+He),be=Math.min(q-1,be==null?q-1:+be);var W=[];return Ue.paragraphs.forEach(function(ie){var fe=Math.max(He,ie.start),_e=Math.min(be,ie.end);if(fe<_e){for(var Ge=Ue.levels.slice(fe,_e+1),Ie=_e;Ie>=fe&&f(xe[Ie])&c;Ie--)Ge[Ie]=ie.level;for(var Le=ie.level,ye=1/0,je=0;je<Ge.length;je++){var re=Ge[je];re>Le&&(Le=re),re<ye&&(ye=re|1)}for(var ge=Le;ge>=ye;ge--)for(var Ce=0;Ce<Ge.length;Ce++)if(Ge[Ce]>=ge){for(var Re=Ce;Ce+1<Ge.length&&Ge[Ce+1]>=ge;)Ce++;Ce>Re&&W.push([Re+He,Ce+He])}}}),W}function ke(xe,Ue,He,be){var q=Ke(xe,Ue,He,be),W=[].concat(xe);return q.forEach(function(ie,fe){W[fe]=(Ue.levels[ie]&1?pe(xe[ie]):null)||xe[ie]}),W.join("")}function Ke(xe,Ue,He,be){for(var q=Oe(xe,Ue,He,be),W=[],ie=0;ie<xe.length;ie++)W[ie]=ie;return q.forEach(function(fe){for(var _e=fe[0],Ge=fe[1],Ie=W.slice(_e,Ge+1),Le=Ie.length;Le--;)W[Ge-Le]=Ie[Le]}),W}return e.closingToOpeningBracket=w,e.getBidiCharType=f,e.getBidiCharTypeName=d,e.getCanonicalBracket=S,e.getEmbeddingLevels=ve,e.getMirroredCharacter=pe,e.getMirroredCharactersMap=Pe,e.getReorderSegments=Oe,e.getReorderedIndices=Ke,e.getReorderedString=ke,e.openingToClosingBracket=E,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return t}const wz=/\bvoid\s+main\s*\(\s*\)\s*{/g;function vS(t){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function n(i,r){let s=Ri[r];return s?vS(s):i}return t.replace(e,n)}const Vi=[];for(let t=0;t<256;t++)Vi[t]=(t<16?"0":"")+t.toString(16);function m1e(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Vi[t&255]+Vi[t>>8&255]+Vi[t>>16&255]+Vi[t>>24&255]+"-"+Vi[e&255]+Vi[e>>8&255]+"-"+Vi[e>>16&15|64]+Vi[e>>24&255]+"-"+Vi[n&63|128]+Vi[n>>8&255]+"-"+Vi[n>>16&255]+Vi[n>>24&255]+Vi[i&255]+Vi[i>>8&255]+Vi[i>>16&255]+Vi[i>>24&255]).toUpperCase()}const au=Object.assign||function(){let t=arguments[0];for(let e=1,n=arguments.length;e<n;e++){let i=arguments[e];if(i)for(let r in i)i.hasOwnProperty(r)&&(t[r]=i[r])}return t},A1e=Date.now(),j4=new WeakMap,X4=new Map;let g1e=1e10;function _S(t,e){const n=x1e(e);let i=j4.get(t);if(i||j4.set(t,i=Object.create(null)),i[n])return new i[n];const r=`_onBeforeCompile${n}`,s=function(c){t.onBeforeCompile.call(this,c);const u=this.customProgramCacheKey()+"|"+c.vertexShader+"|"+c.fragmentShader;let h=X4[u];if(!h){const f=v1e(c,e,n);h=X4[u]=f}c.vertexShader=h.vertexShader,c.fragmentShader=h.fragmentShader,au(c.uniforms,this.uniforms),e.timeUniform&&(c.uniforms[e.timeUniform]={get value(){return Date.now()-A1e}}),this[r]&&this[r](c)},o=function(){return a(e.chained?t:t.clone())},a=function(c){const u=Object.create(c,l);return Object.defineProperty(u,"baseMaterial",{value:t}),Object.defineProperty(u,"id",{value:g1e++}),u.uuid=m1e(),u.uniforms=au({},c.uniforms,e.uniforms),u.defines=au({},c.defines,e.defines),u.defines[`TROIKA_DERIVED_MATERIAL_${n}`]="",u.extensions=au({},c.extensions,e.extensions),u._listeners=void 0,u},l={constructor:{value:o},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return t.customProgramCacheKey()+"|"+n}},onBeforeCompile:{get(){return s},set(c){this[r]=c}},copy:{writable:!0,configurable:!0,value:function(c){return t.copy.call(this,c),!t.isShaderMaterial&&!t.isDerivedMaterial&&(au(this.extensions,c.extensions),au(this.defines,c.defines),au(this.uniforms,Eh.clone(c.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const c=new t.constructor;return a(c).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let c=this._depthMaterial;return c||(c=this._depthMaterial=_S(t.isDerivedMaterial?t.getDepthMaterial():new B3({depthPacking:j6}),e),c.defines.IS_DEPTH_MATERIAL="",c.uniforms=this.uniforms),c}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let c=this._distanceMaterial;return c||(c=this._distanceMaterial=_S(t.isDerivedMaterial?t.getDistanceMaterial():new L6,e),c.defines.IS_DISTANCE_MATERIAL="",c.uniforms=this.uniforms),c}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:c,_distanceMaterial:u}=this;c&&c.dispose(),u&&u.dispose(),t.dispose.call(this)}}};return i[n]=o,new o}function v1e({vertexShader:t,fragmentShader:e},n,i){let{vertexDefs:r,vertexMainIntro:s,vertexMainOutro:o,vertexTransform:a,fragmentDefs:l,fragmentMainIntro:c,fragmentMainOutro:u,fragmentColorTransform:h,customRewriter:f,timeUniform:d}=n;if(r=r||"",s=s||"",o=o||"",l=l||"",c=c||"",u=u||"",(a||f)&&(t=vS(t)),(h||f)&&(e=e.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),e=vS(e)),f){let p=f({vertexShader:t,fragmentShader:e});t=p.vertexShader,e=p.fragmentShader}if(h){let p=[];e=e.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,m=>(p.push(m),"")),u=`${h}
${p.join(`
`)}
${u}`}if(d){const p=`
uniform float ${d};
`;r=p+r,l=p+l}return a&&(t=`vec3 troika_position_${i};
vec3 troika_normal_${i};
vec2 troika_uv_${i};
${t}
`,r=`${r}
void troikaVertexTransform${i}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${a}
}
`,s=`
troika_position_${i} = vec3(position);
troika_normal_${i} = vec3(normal);
troika_uv_${i} = vec2(uv);
troikaVertexTransform${i}(troika_position_${i}, troika_normal_${i}, troika_uv_${i});
${s}
`,t=t.replace(/\b(position|normal|uv)\b/g,(p,m,g,_)=>/\battribute\s+vec[23]\s+$/.test(_.substr(0,g))?m:`troika_${m}_${i}`)),t=Y4(t,i,r,s,o),e=Y4(e,i,l,c,u),{vertexShader:t,fragmentShader:e}}function Y4(t,e,n,i,r){return(i||r||n)&&(t=t.replace(wz,`
${n}
void troikaOrigMain${e}() {`),t+=`
void main() {
  ${i}
  troikaOrigMain${e}();
  ${r}
}`),t}function _1e(t,e){return t==="uniforms"?void 0:typeof e=="function"?e.toString():e}let y1e=0;const q4=new Map;function x1e(t){const e=JSON.stringify(t,_1e);let n=q4.get(e);return n==null&&q4.set(e,n=++y1e),n}function E1e(t,e,n){const{defaultFontURL:i}=n,r=Object.create(null),s=1/0,o=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,a=/[\s\-\u007C\u00AD\u2010\u2012-\u2014\u2027\u2056\u2E17\u2E40]/;function l(_,y){function x(){const E=w=>{console.error(`Failure loading font ${_}${_===i?"":"; trying fallback"}`,w),_!==i&&(_=i,x())};try{const w=new XMLHttpRequest;w.open("get",_,!0),w.responseType="arraybuffer",w.onload=function(){if(w.status>=400)E(new Error(w.statusText));else if(w.status>0)try{const S=t(w.response);y(S)}catch(S){E(S)}},w.onerror=E,w.send()}catch(w){E(w)}}x()}function c(_,y){_||(_=i);let x=r[_];x?x.pending?x.pending.push(y):y(x):(r[_]={pending:[y]},l(_,E=>{let w=r[_].pending;r[_]=E,w.forEach(S=>S(E))}))}function u({text:_="",font:y=i,sdfGlyphSize:x=64,fontSize:E=1,letterSpacing:w=0,lineHeight:S="normal",maxWidth:b=s,direction:M,textAlign:T="left",textIndent:B=0,whiteSpace:L="normal",overflowWrap:F="normal",anchorX:U=0,anchorY:k=0,includeCaretPositions:X=!1,chunkedBoundsSize:Y=8192,colorRanges:Z=null},G,O=!1){const z=p(),Q={fontLoad:0,typesetting:0};_.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),_=_.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),E=+E,w=+w,b=+b,S=S||"normal",B=+B,c(y,H=>{const J=isFinite(b);let j=null,oe=null,K=null,ce=null,he=null,ve=null,Me=null,Se=0,le=0,pe=L!=="nowrap";const{ascender:Pe,descender:Oe,unitsPerEm:ke}=H;Q.fontLoad=p()-z;const Ke=p(),xe=E/ke;S==="normal"&&(S=(Pe-Oe)/ke),S=S*E;const Ue=(S-(Pe-Oe)*xe)/2,He=-(Pe*xe+Ue),be=Math.min(S,(Pe-Oe)*xe),q=(Pe+Oe)/2*xe-be/2;let W=B,ie=new m;const fe=[ie];H.forEachGlyph(_,E,w,(Ie,Le,ye)=>{const je=_.charAt(ye),re=Ie.advanceWidth*xe,ge=ie.count;let Ce;if("isEmpty"in Ie||(Ie.isWhitespace=!!je&&/\s/.test(je),Ie.canBreakAfter=!!je&&a.test(je),Ie.isEmpty=Ie.xMin===Ie.xMax||Ie.yMin===Ie.yMax||o.test(je)),!Ie.isWhitespace&&!Ie.isEmpty&&le++,pe&&J&&!Ie.isWhitespace&&Le+re+W>b&&ge){if(ie.glyphAt(ge-1).glyphObj.canBreakAfter)Ce=new m,W=-Le;else for(let Je=ge;Je--;)if(Je===0&&F==="break-word"){Ce=new m,W=-Le;break}else if(ie.glyphAt(Je).glyphObj.canBreakAfter){Ce=ie.splitAt(Je+1);const ae=Ce.glyphAt(0).x;W-=ae;for(let qe=Ce.count;qe--;)Ce.glyphAt(qe).x-=ae;break}Ce&&(ie.isSoftWrapped=!0,ie=Ce,fe.push(ie),Se=b)}let Re=ie.glyphAt(ie.count);Re.glyphObj=Ie,Re.x=Le+W,Re.width=re,Re.charIndex=ye,je===`
`&&(ie=new m,fe.push(ie),W=-(Le+re+w*E)+B)}),fe.forEach(Ie=>{for(let Le=Ie.count;Le--;){let{glyphObj:ye,x:je,width:re}=Ie.glyphAt(Le);if(!ye.isWhitespace){Ie.width=je+re,Ie.width>Se&&(Se=Ie.width);return}}});let _e=0,Ge=0;if(U&&(typeof U=="number"?_e=-U:typeof U=="string"&&(_e=-Se*(U==="left"?0:U==="center"?.5:U==="right"?1:f(U)))),k){if(typeof k=="number")Ge=-k;else if(typeof k=="string"){let Ie=fe.length*S;Ge=k==="top"?0:k==="top-baseline"?-He:k==="middle"?Ie/2:k==="bottom"?Ie:k==="bottom-baseline"?Ie-Ue+Oe*xe:f(k)*Ie}}if(!O){const Ie=e.getEmbeddingLevels(_,M);j=new Uint16Array(le),oe=new Float32Array(le*2),K={},ve=[s,s,-s,-s],Me=[];let Le=He;X&&(he=new Float32Array(_.length*3)),Z&&(ce=new Uint8Array(le*3));let ye=0,je=-1,re=-1,ge,Ce;if(fe.forEach((Re,Je)=>{let{count:ae,width:qe}=Re;if(ae>0){let ze=0;for(let Vt=ae;Vt--&&Re.glyphAt(Vt).glyphObj.isWhitespace;)ze++;let we=0,We=0;if(T==="center")we=(Se-qe)/2;else if(T==="right")we=Se-qe;else if(T==="justify"&&Re.isSoftWrapped){let Vt=0;for(let At=ae-ze;At--;)Re.glyphAt(At).glyphObj.isWhitespace&&Vt++;We=(Se-qe)/Vt}if(We||we){let Vt=0;for(let At=0;At<ae;At++){let un=Re.glyphAt(At);const dn=un.glyphObj;un.x+=we+Vt,We!==0&&dn.isWhitespace&&At<ae-ze&&(Vt+=We,un.width+=We)}}const ht=e.getReorderSegments(_,Ie,Re.glyphAt(0).charIndex,Re.glyphAt(Re.count-1).charIndex);for(let Vt=0;Vt<ht.length;Vt++){const[At,un]=ht[Vt];let dn=1/0,hn=-1/0;for(let Vn=0;Vn<ae;Vn++)if(Re.glyphAt(Vn).charIndex>=At){let mr=Vn,qn=Vn;for(;qn<ae;qn++){let Dn=Re.glyphAt(qn);if(Dn.charIndex>un)break;qn<ae-ze&&(dn=Math.min(dn,Dn.x),hn=Math.max(hn,Dn.x+Dn.width))}for(let Dn=mr;Dn<qn;Dn++){const pi=Re.glyphAt(Dn);pi.x=hn-(pi.x+pi.width-dn)}break}}let bt;const cn=Vt=>bt=Vt;for(let Vt=0;Vt<ae;Vt++){let At=Re.glyphAt(Vt);bt=At.glyphObj;const un=bt.index,dn=Ie.levels[At.charIndex]&1;if(dn){const hn=e.getMirroredCharacter(_[At.charIndex]);hn&&H.forEachGlyph(hn,0,0,cn)}if(X){const{charIndex:hn}=At,Vn=At.x+_e,mr=At.x+At.width+_e;he[hn*3]=dn?mr:Vn,he[hn*3+1]=dn?Vn:mr,he[hn*3+2]=Le+q+Ge;const qn=hn-je;qn>1&&d(he,je,qn),je=hn}if(Z){const{charIndex:hn}=At;for(;hn>re;)re++,Z.hasOwnProperty(re)&&(Ce=Z[re])}if(!bt.isWhitespace&&!bt.isEmpty){const hn=ye++;K[un]||(K[un]={path:bt.path,pathBounds:[bt.xMin,bt.yMin,bt.xMax,bt.yMax]});const Vn=At.x+_e,mr=Le+Ge;oe[hn*2]=Vn,oe[hn*2+1]=mr;const qn=Vn+bt.xMin*xe,Dn=mr+bt.yMin*xe,pi=Vn+bt.xMax*xe,ee=mr+bt.yMax*xe;qn<ve[0]&&(ve[0]=qn),Dn<ve[1]&&(ve[1]=Dn),pi>ve[2]&&(ve[2]=pi),ee>ve[3]&&(ve[3]=ee),hn%Y===0&&(ge={start:hn,end:hn,rect:[s,s,-s,-s]},Me.push(ge)),ge.end++;const me=ge.rect;if(qn<me[0]&&(me[0]=qn),Dn<me[1]&&(me[1]=Dn),pi>me[2]&&(me[2]=pi),ee>me[3]&&(me[3]=ee),j[hn]=un,Z){const De=hn*3;ce[De]=Ce>>16&255,ce[De+1]=Ce>>8&255,ce[De+2]=Ce&255}}}}Le-=S}),he){const Re=_.length-je;Re>1&&d(he,je,Re)}}Q.typesetting=p()-Ke,G({glyphIds:j,glyphPositions:oe,glyphData:K,caretPositions:he,caretHeight:be,glyphColors:ce,chunkedBounds:Me,fontSize:E,unitsPerEm:ke,ascender:Pe*xe,descender:Oe*xe,lineHeight:S,topBaseline:He,blockBounds:[_e,Ge-fe.length*S,_e+Se,Ge],visibleBounds:ve,timings:Q})})}function h(_,y){u(_,x=>{const[E,w,S,b]=x.blockBounds;y({width:S-E,height:b-w})},{metricsOnly:!0})}function f(_){let y=_.match(/^([\d.]+)%$/),x=y?parseFloat(y[1]):NaN;return isNaN(x)?0:x/100}function d(_,y,x){const E=_[y*3],w=_[y*3+1],S=_[y*3+2],b=(w-E)/x;for(let M=0;M<x;M++){const T=(y+M)*3;_[T]=E+b*M,_[T+1]=E+b*(M+1),_[T+2]=S}}function p(){return(self.performance||Date).now()}function m(){this.data=[]}const g=["glyphObj","x","width","charIndex"];return m.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/g.length)},glyphAt(_){let y=m.flyweight;return y.data=this.data,y.index=_,y},splitAt(_){let y=new m;return y.data=this.data.splice(_*g.length),y}},m.flyweight=g.reduce((_,y,x,E)=>(Object.defineProperty(_,y,{get(){return this.data[this.index*g.length+x]},set(w){this.data[this.index*g.length+x]=w}}),_),{data:null,index:0}),{typeset:u,measure:h,loadFont:c}}const Pu=()=>(self.performance||Date).now(),Mx=Ez();let J4;function w1e(t,e,n,i,r,s,o,a,l,c,u=!0){return u?M1e(t,e,n,i,r,s,o,a,l,c).then(null,h=>(J4||(console.warn("WebGL SDF generation failed, falling back to JS",h),J4=!0),K4(t,e,n,i,r,s,o,a,l,c))):K4(t,e,n,i,r,s,o,a,l,c)}const M1e=function(){const t=[];let n=0;function i(){const r=Pu();for(;t.length&&Pu()-r<5;)t.shift()();n=t.length?setTimeout(i,0):0}return(...r)=>{const s=ll();return t.push(()=>{const o=Pu();try{Mx.webgl.generateIntoCanvas(...r),s.resolve({timing:Pu()-o})}catch(a){s.reject(a)}}),n||(n=setTimeout(i,0)),s}}(),K4=function(){const n={};let i=0;return function(r,s,o,a,l,c,u,h,f,d){const p="TroikaTextSDFGenerator_JS_"+i++%4;let m=n[p];return m||(m=n[p]={workerModule:o0({name:p,workerId:p,dependencies:[Ez,Pu],init(g,_){const y=g().javascript.generate;return function(...x){const E=_();return{textureData:y(...x),timing:_()-E}}},getTransferables(g){return[g.textureData.buffer]}}),requests:0,idleTimer:null}),m.requests++,clearTimeout(m.idleTimer),m.workerModule(r,s,o,a,l,c).then(({textureData:g,timing:_})=>{const y=Pu(),x=new Uint8Array(g.length*4);for(let E=0;E<g.length;E++)x[E*4+d]=g[E];return Mx.webglUtils.renderImageData(u,x,h,f,r,s,1<<3-d),_+=Pu()-y,--m.requests===0&&(m.idleTimer=setTimeout(()=>{h1e(p)},2e3)),{timing:_}})}}();function C1e(t){t._warm||(Mx.webgl.isSupported(t),t._warm=!0)}const S1e=Mx.webglUtils.resizeWebGLCanvasWithoutClearing;/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function b1e(){return typeof window>"u"&&(self.window=self),function(t){var e={parse:function(r){var s=e._bin,o=new Uint8Array(r);if(s.readASCII(o,0,4)=="ttcf"){var a=4;s.readUshort(o,a),a+=2,s.readUshort(o,a),a+=2;var l=s.readUint(o,a);a+=4;for(var c=[],u=0;u<l;u++){var h=s.readUint(o,a);a+=4,c.push(e._readFont(o,h))}return c}return[e._readFont(o,0)]},_readFont:function(r,s){var o=e._bin,a=s;o.readFixed(r,s),s+=4;var l=o.readUshort(r,s);s+=2,o.readUshort(r,s),s+=2,o.readUshort(r,s),s+=2,o.readUshort(r,s),s+=2;for(var c=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],u={_data:r,_offset:a},h={},f=0;f<l;f++){var d=o.readASCII(r,s,4);s+=4,o.readUint(r,s),s+=4;var p=o.readUint(r,s);s+=4;var m=o.readUint(r,s);s+=4,h[d]={offset:p,length:m}}for(f=0;f<c.length;f++){var g=c[f];h[g]&&(u[g.trim()]=e[g.trim()].parse(r,h[g].offset,h[g].length,u))}return u},_tabOffset:function(r,s,o){for(var a=e._bin,l=a.readUshort(r,o+4),c=o+12,u=0;u<l;u++){var h=a.readASCII(r,c,4);c+=4,a.readUint(r,c),c+=4;var f=a.readUint(r,c);if(c+=4,a.readUint(r,c),c+=4,h==s)return f}return 0}};e._bin={readFixed:function(r,s){return(r[s]<<8|r[s+1])+(r[s+2]<<8|r[s+3])/65540},readF2dot14:function(r,s){return e._bin.readShort(r,s)/16384},readInt:function(r,s){return e._bin._view(r).getInt32(s)},readInt8:function(r,s){return e._bin._view(r).getInt8(s)},readShort:function(r,s){return e._bin._view(r).getInt16(s)},readUshort:function(r,s){return e._bin._view(r).getUint16(s)},readUshorts:function(r,s,o){for(var a=[],l=0;l<o;l++)a.push(e._bin.readUshort(r,s+2*l));return a},readUint:function(r,s){return e._bin._view(r).getUint32(s)},readUint64:function(r,s){return 4294967296*e._bin.readUint(r,s)+e._bin.readUint(r,s+4)},readASCII:function(r,s,o){for(var a="",l=0;l<o;l++)a+=String.fromCharCode(r[s+l]);return a},readUnicode:function(r,s,o){for(var a="",l=0;l<o;l++){var c=r[s++]<<8|r[s++];a+=String.fromCharCode(c)}return a},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(r,s,o){var a=e._bin._tdec;return a&&s==0&&o==r.length?a.decode(r):e._bin.readASCII(r,s,o)},readBytes:function(r,s,o){for(var a=[],l=0;l<o;l++)a.push(r[s+l]);return a},readASCIIArray:function(r,s,o){for(var a=[],l=0;l<o;l++)a.push(String.fromCharCode(r[s+l]));return a},_view:function(r){return r._dataView||(r._dataView=r.buffer?new DataView(r.buffer,r.byteOffset,r.byteLength):new DataView(new Uint8Array(r).buffer))}},e._lctf={},e._lctf.parse=function(r,s,o,a,l){var c=e._bin,u={},h=s;c.readFixed(r,s),s+=4;var f=c.readUshort(r,s);s+=2;var d=c.readUshort(r,s);s+=2;var p=c.readUshort(r,s);return s+=2,u.scriptList=e._lctf.readScriptList(r,h+f),u.featureList=e._lctf.readFeatureList(r,h+d),u.lookupList=e._lctf.readLookupList(r,h+p,l),u},e._lctf.readLookupList=function(r,s,o){var a=e._bin,l=s,c=[],u=a.readUshort(r,s);s+=2;for(var h=0;h<u;h++){var f=a.readUshort(r,s);s+=2;var d=e._lctf.readLookupTable(r,l+f,o);c.push(d)}return c},e._lctf.readLookupTable=function(r,s,o){var a=e._bin,l=s,c={tabs:[]};c.ltype=a.readUshort(r,s),s+=2,c.flag=a.readUshort(r,s),s+=2;var u=a.readUshort(r,s);s+=2;for(var h=c.ltype,f=0;f<u;f++){var d=a.readUshort(r,s);s+=2;var p=o(r,h,l+d,c);c.tabs.push(p)}return c},e._lctf.numOfOnes=function(r){for(var s=0,o=0;o<32;o++)(r>>>o&1)!=0&&s++;return s},e._lctf.readClassDef=function(r,s){var o=e._bin,a=[],l=o.readUshort(r,s);if(s+=2,l==1){var c=o.readUshort(r,s);s+=2;var u=o.readUshort(r,s);s+=2;for(var h=0;h<u;h++)a.push(c+h),a.push(c+h),a.push(o.readUshort(r,s)),s+=2}if(l==2){var f=o.readUshort(r,s);for(s+=2,h=0;h<f;h++)a.push(o.readUshort(r,s)),s+=2,a.push(o.readUshort(r,s)),s+=2,a.push(o.readUshort(r,s)),s+=2}return a},e._lctf.getInterval=function(r,s){for(var o=0;o<r.length;o+=3){var a=r[o],l=r[o+1];if(r[o+2],a<=s&&s<=l)return o}return-1},e._lctf.readCoverage=function(r,s){var o=e._bin,a={};a.fmt=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);return s+=2,a.fmt==1&&(a.tab=o.readUshorts(r,s,l)),a.fmt==2&&(a.tab=o.readUshorts(r,s,3*l)),a},e._lctf.coverageIndex=function(r,s){var o=r.tab;if(r.fmt==1)return o.indexOf(s);if(r.fmt==2){var a=e._lctf.getInterval(o,s);if(a!=-1)return o[a+2]+(s-o[a])}return-1},e._lctf.readFeatureList=function(r,s){var o=e._bin,a=s,l=[],c=o.readUshort(r,s);s+=2;for(var u=0;u<c;u++){var h=o.readASCII(r,s,4);s+=4;var f=o.readUshort(r,s);s+=2;var d=e._lctf.readFeatureTable(r,a+f);d.tag=h.trim(),l.push(d)}return l},e._lctf.readFeatureTable=function(r,s){var o=e._bin,a=s,l={},c=o.readUshort(r,s);s+=2,c>0&&(l.featureParams=a+c);var u=o.readUshort(r,s);s+=2,l.tab=[];for(var h=0;h<u;h++)l.tab.push(o.readUshort(r,s+2*h));return l},e._lctf.readScriptList=function(r,s){var o=e._bin,a=s,l={},c=o.readUshort(r,s);s+=2;for(var u=0;u<c;u++){var h=o.readASCII(r,s,4);s+=4;var f=o.readUshort(r,s);s+=2,l[h.trim()]=e._lctf.readScriptTable(r,a+f)}return l},e._lctf.readScriptTable=function(r,s){var o=e._bin,a=s,l={},c=o.readUshort(r,s);s+=2,l.default=e._lctf.readLangSysTable(r,a+c);var u=o.readUshort(r,s);s+=2;for(var h=0;h<u;h++){var f=o.readASCII(r,s,4);s+=4;var d=o.readUshort(r,s);s+=2,l[f.trim()]=e._lctf.readLangSysTable(r,a+d)}return l},e._lctf.readLangSysTable=function(r,s){var o=e._bin,a={};o.readUshort(r,s),s+=2,a.reqFeature=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);return s+=2,a.features=o.readUshorts(r,s,l),a},e.CFF={},e.CFF.parse=function(r,s,o){var a=e._bin;(r=new Uint8Array(r.buffer,s,o))[s=0],r[++s],r[++s],r[++s],s++;var l=[];s=e.CFF.readIndex(r,s,l);for(var c=[],u=0;u<l.length-1;u++)c.push(a.readASCII(r,s+l[u],l[u+1]-l[u]));s+=l[l.length-1];var h=[];s=e.CFF.readIndex(r,s,h);var f=[];for(u=0;u<h.length-1;u++)f.push(e.CFF.readDict(r,s+h[u],s+h[u+1]));s+=h[h.length-1];var d=f[0],p=[];s=e.CFF.readIndex(r,s,p);var m=[];for(u=0;u<p.length-1;u++)m.push(a.readASCII(r,s+p[u],p[u+1]-p[u]));if(s+=p[p.length-1],e.CFF.readSubrs(r,s,d),d.CharStrings){s=d.CharStrings,p=[],s=e.CFF.readIndex(r,s,p);var g=[];for(u=0;u<p.length-1;u++)g.push(a.readBytes(r,s+p[u],p[u+1]-p[u]));d.CharStrings=g}if(d.ROS){s=d.FDArray;var _=[];for(s=e.CFF.readIndex(r,s,_),d.FDArray=[],u=0;u<_.length-1;u++){var y=e.CFF.readDict(r,s+_[u],s+_[u+1]);e.CFF._readFDict(r,y,m),d.FDArray.push(y)}s+=_[_.length-1],s=d.FDSelect,d.FDSelect=[];var x=r[s];if(s++,x!=3)throw x;var E=a.readUshort(r,s);for(s+=2,u=0;u<E+1;u++)d.FDSelect.push(a.readUshort(r,s),r[s+2]),s+=3}return d.Encoding&&(d.Encoding=e.CFF.readEncoding(r,d.Encoding,d.CharStrings.length)),d.charset&&(d.charset=e.CFF.readCharset(r,d.charset,d.CharStrings.length)),e.CFF._readFDict(r,d,m),d},e.CFF._readFDict=function(r,s,o){var a;for(var l in s.Private&&(a=s.Private[1],s.Private=e.CFF.readDict(r,a,a+s.Private[0]),s.Private.Subrs&&e.CFF.readSubrs(r,a+s.Private.Subrs,s.Private)),s)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(l)!=-1&&(s[l]=o[s[l]-426+35])},e.CFF.readSubrs=function(r,s,o){var a=e._bin,l=[];s=e.CFF.readIndex(r,s,l);var c,u=l.length;c=u<1240?107:u<33900?1131:32768,o.Bias=c,o.Subrs=[];for(var h=0;h<l.length-1;h++)o.Subrs.push(a.readBytes(r,s+l[h],l[h+1]-l[h]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(r,s){for(var o=0;o<r.charset.length;o++)if(r.charset[o]==s)return o;return-1},e.CFF.glyphBySE=function(r,s){return s<0||s>255?-1:e.CFF.glyphByUnicode(r,e.CFF.tableSE[s])},e.CFF.readEncoding=function(r,s,o){e._bin;var a=[".notdef"],l=r[s];if(s++,l!=0)throw"error: unknown encoding format: "+l;var c=r[s];s++;for(var u=0;u<c;u++)a.push(r[s+u]);return a},e.CFF.readCharset=function(r,s,o){var a=e._bin,l=[".notdef"],c=r[s];if(s++,c==0)for(var u=0;u<o;u++){var h=a.readUshort(r,s);s+=2,l.push(h)}else{if(c!=1&&c!=2)throw"error: format: "+c;for(;l.length<o;){h=a.readUshort(r,s),s+=2;var f=0;for(c==1?(f=r[s],s++):(f=a.readUshort(r,s),s+=2),u=0;u<=f;u++)l.push(h),h++}}return l},e.CFF.readIndex=function(r,s,o){var a=e._bin,l=a.readUshort(r,s)+1,c=r[s+=2];if(s++,c==1)for(var u=0;u<l;u++)o.push(r[s+u]);else if(c==2)for(u=0;u<l;u++)o.push(a.readUshort(r,s+2*u));else if(c==3)for(u=0;u<l;u++)o.push(16777215&a.readUint(r,s+3*u-1));else if(l!=1)throw"unsupported offset size: "+c+", count: "+l;return(s+=l*c)-1},e.CFF.getCharString=function(r,s,o){var a=e._bin,l=r[s],c=r[s+1];r[s+2],r[s+3],r[s+4];var u=1,h=null,f=null;l<=20&&(h=l,u=1),l==12&&(h=100*l+c,u=2),21<=l&&l<=27&&(h=l,u=1),l==28&&(f=a.readShort(r,s+1),u=3),29<=l&&l<=31&&(h=l,u=1),32<=l&&l<=246&&(f=l-139,u=1),247<=l&&l<=250&&(f=256*(l-247)+c+108,u=2),251<=l&&l<=254&&(f=256*-(l-251)-c-108,u=2),l==255&&(f=a.readInt(r,s+1)/65535,u=5),o.val=f!=null?f:"o"+h,o.size=u},e.CFF.readCharString=function(r,s,o){for(var a=s+o,l=e._bin,c=[];s<a;){var u=r[s],h=r[s+1];r[s+2],r[s+3],r[s+4];var f=1,d=null,p=null;u<=20&&(d=u,f=1),u==12&&(d=100*u+h,f=2),u!=19&&u!=20||(d=u,f=2),21<=u&&u<=27&&(d=u,f=1),u==28&&(p=l.readShort(r,s+1),f=3),29<=u&&u<=31&&(d=u,f=1),32<=u&&u<=246&&(p=u-139,f=1),247<=u&&u<=250&&(p=256*(u-247)+h+108,f=2),251<=u&&u<=254&&(p=256*-(u-251)-h-108,f=2),u==255&&(p=l.readInt(r,s+1)/65535,f=5),c.push(p!=null?p:"o"+d),s+=f}return c},e.CFF.readDict=function(r,s,o){for(var a=e._bin,l={},c=[];s<o;){var u=r[s],h=r[s+1];r[s+2],r[s+3],r[s+4];var f=1,d=null,p=null;if(u==28&&(p=a.readShort(r,s+1),f=3),u==29&&(p=a.readInt(r,s+1),f=5),32<=u&&u<=246&&(p=u-139,f=1),247<=u&&u<=250&&(p=256*(u-247)+h+108,f=2),251<=u&&u<=254&&(p=256*-(u-251)-h-108,f=2),u==255)throw p=a.readInt(r,s+1)/65535,f=5,"unknown number";if(u==30){var m=[];for(f=1;;){var g=r[s+f];f++;var _=g>>4,y=15&g;if(_!=15&&m.push(_),y!=15&&m.push(y),y==15)break}for(var x="",E=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],w=0;w<m.length;w++)x+=E[m[w]];p=parseFloat(x)}u<=21&&(d=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][u],f=1,u==12&&(d=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][h],f=2)),d!=null?(l[d]=c.length==1?c[0]:c,c=[]):c.push(p),s+=f}return l},e.cmap={},e.cmap.parse=function(r,s,o){r=new Uint8Array(r.buffer,s,o),s=0;var a=e._bin,l={};a.readUshort(r,s),s+=2;var c=a.readUshort(r,s);s+=2;var u=[];l.tables=[];for(var h=0;h<c;h++){var f=a.readUshort(r,s);s+=2;var d=a.readUshort(r,s);s+=2;var p=a.readUint(r,s);s+=4;var m="p"+f+"e"+d,g=u.indexOf(p);if(g==-1){var _;g=l.tables.length,u.push(p);var y=a.readUshort(r,p);y==0?_=e.cmap.parse0(r,p):y==4?_=e.cmap.parse4(r,p):y==6?_=e.cmap.parse6(r,p):y==12?_=e.cmap.parse12(r,p):console.debug("unknown format: "+y,f,d,p),l.tables.push(_)}if(l[m]!=null)throw"multiple tables for one platform+encoding";l[m]=g}return l},e.cmap.parse0=function(r,s){var o=e._bin,a={};a.format=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);s+=2,o.readUshort(r,s),s+=2,a.map=[];for(var c=0;c<l-6;c++)a.map.push(r[s+c]);return a},e.cmap.parse4=function(r,s){var o=e._bin,a=s,l={};l.format=o.readUshort(r,s),s+=2;var c=o.readUshort(r,s);s+=2,o.readUshort(r,s),s+=2;var u=o.readUshort(r,s);s+=2;var h=u/2;l.searchRange=o.readUshort(r,s),s+=2,l.entrySelector=o.readUshort(r,s),s+=2,l.rangeShift=o.readUshort(r,s),s+=2,l.endCount=o.readUshorts(r,s,h),s+=2*h,s+=2,l.startCount=o.readUshorts(r,s,h),s+=2*h,l.idDelta=[];for(var f=0;f<h;f++)l.idDelta.push(o.readShort(r,s)),s+=2;for(l.idRangeOffset=o.readUshorts(r,s,h),s+=2*h,l.glyphIdArray=[];s<a+c;)l.glyphIdArray.push(o.readUshort(r,s)),s+=2;return l},e.cmap.parse6=function(r,s){var o=e._bin,a={};a.format=o.readUshort(r,s),s+=2,o.readUshort(r,s),s+=2,o.readUshort(r,s),s+=2,a.firstCode=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);s+=2,a.glyphIdArray=[];for(var c=0;c<l;c++)a.glyphIdArray.push(o.readUshort(r,s)),s+=2;return a},e.cmap.parse12=function(r,s){var o=e._bin,a={};a.format=o.readUshort(r,s),s+=2,s+=2,o.readUint(r,s),s+=4,o.readUint(r,s),s+=4;var l=o.readUint(r,s);s+=4,a.groups=[];for(var c=0;c<l;c++){var u=s+12*c,h=o.readUint(r,u+0),f=o.readUint(r,u+4),d=o.readUint(r,u+8);a.groups.push([h,f,d])}return a},e.glyf={},e.glyf.parse=function(r,s,o,a){for(var l=[],c=0;c<a.maxp.numGlyphs;c++)l.push(null);return l},e.glyf._parseGlyf=function(r,s){var o=e._bin,a=r._data,l=e._tabOffset(a,"glyf",r._offset)+r.loca[s];if(r.loca[s]==r.loca[s+1])return null;var c={};if(c.noc=o.readShort(a,l),l+=2,c.xMin=o.readShort(a,l),l+=2,c.yMin=o.readShort(a,l),l+=2,c.xMax=o.readShort(a,l),l+=2,c.yMax=o.readShort(a,l),l+=2,c.xMin>=c.xMax||c.yMin>=c.yMax)return null;if(c.noc>0){c.endPts=[];for(var u=0;u<c.noc;u++)c.endPts.push(o.readUshort(a,l)),l+=2;var h=o.readUshort(a,l);if(l+=2,a.length-l<h)return null;c.instructions=o.readBytes(a,l,h),l+=h;var f=c.endPts[c.noc-1]+1;for(c.flags=[],u=0;u<f;u++){var d=a[l];if(l++,c.flags.push(d),(8&d)!=0){var p=a[l];l++;for(var m=0;m<p;m++)c.flags.push(d),u++}}for(c.xs=[],u=0;u<f;u++){var g=(2&c.flags[u])!=0,_=(16&c.flags[u])!=0;g?(c.xs.push(_?a[l]:-a[l]),l++):_?c.xs.push(0):(c.xs.push(o.readShort(a,l)),l+=2)}for(c.ys=[],u=0;u<f;u++)g=(4&c.flags[u])!=0,_=(32&c.flags[u])!=0,g?(c.ys.push(_?a[l]:-a[l]),l++):_?c.ys.push(0):(c.ys.push(o.readShort(a,l)),l+=2);var y=0,x=0;for(u=0;u<f;u++)y+=c.xs[u],x+=c.ys[u],c.xs[u]=y,c.ys[u]=x}else{var E;c.parts=[];do{E=o.readUshort(a,l),l+=2;var w={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(c.parts.push(w),w.glyphIndex=o.readUshort(a,l),l+=2,1&E){var S=o.readShort(a,l);l+=2;var b=o.readShort(a,l);l+=2}else S=o.readInt8(a,l),l++,b=o.readInt8(a,l),l++;2&E?(w.m.tx=S,w.m.ty=b):(w.p1=S,w.p2=b),8&E?(w.m.a=w.m.d=o.readF2dot14(a,l),l+=2):64&E?(w.m.a=o.readF2dot14(a,l),l+=2,w.m.d=o.readF2dot14(a,l),l+=2):128&E&&(w.m.a=o.readF2dot14(a,l),l+=2,w.m.b=o.readF2dot14(a,l),l+=2,w.m.c=o.readF2dot14(a,l),l+=2,w.m.d=o.readF2dot14(a,l),l+=2)}while(32&E);if(256&E){var M=o.readUshort(a,l);for(l+=2,c.instr=[],u=0;u<M;u++)c.instr.push(a[l]),l++}}return c},e.GPOS={},e.GPOS.parse=function(r,s,o,a){return e._lctf.parse(r,s,o,a,e.GPOS.subt)},e.GPOS.subt=function(r,s,o,a){var l=e._bin,c=o,u={};if(u.fmt=l.readUshort(r,o),o+=2,s==1||s==2||s==3||s==7||s==8&&u.fmt<=2){var h=l.readUshort(r,o);o+=2,u.coverage=e._lctf.readCoverage(r,h+c)}if(s==1&&u.fmt==1){var f=l.readUshort(r,o);o+=2;var d=e._lctf.numOfOnes(f);f!=0&&(u.pos=e.GPOS.readValueRecord(r,o,f))}else if(s==2&&u.fmt>=1&&u.fmt<=2){f=l.readUshort(r,o),o+=2;var p=l.readUshort(r,o);o+=2,d=e._lctf.numOfOnes(f);var m=e._lctf.numOfOnes(p);if(u.fmt==1){u.pairsets=[];var g=l.readUshort(r,o);o+=2;for(var _=0;_<g;_++){var y=c+l.readUshort(r,o);o+=2;var x=l.readUshort(r,y);y+=2;for(var E=[],w=0;w<x;w++){var S=l.readUshort(r,y);y+=2,f!=0&&(F=e.GPOS.readValueRecord(r,y,f),y+=2*d),p!=0&&(U=e.GPOS.readValueRecord(r,y,p),y+=2*m),E.push({gid2:S,val1:F,val2:U})}u.pairsets.push(E)}}if(u.fmt==2){var b=l.readUshort(r,o);o+=2;var M=l.readUshort(r,o);o+=2;var T=l.readUshort(r,o);o+=2;var B=l.readUshort(r,o);for(o+=2,u.classDef1=e._lctf.readClassDef(r,c+b),u.classDef2=e._lctf.readClassDef(r,c+M),u.matrix=[],_=0;_<T;_++){var L=[];for(w=0;w<B;w++){var F=null,U=null;f!=0&&(F=e.GPOS.readValueRecord(r,o,f),o+=2*d),p!=0&&(U=e.GPOS.readValueRecord(r,o,p),o+=2*m),L.push({val1:F,val2:U})}u.matrix.push(L)}}}else{if(s==9&&u.fmt==1){var k=l.readUshort(r,o);o+=2;var X=l.readUint(r,o);if(o+=4,a.ltype==9)a.ltype=k;else if(a.ltype!=k)throw"invalid extension substitution";return e.GPOS.subt(r,a.ltype,c+X)}console.debug("unsupported GPOS table LookupType",s,"format",u.fmt)}return u},e.GPOS.readValueRecord=function(r,s,o){var a=e._bin,l=[];return l.push(1&o?a.readShort(r,s):0),s+=1&o?2:0,l.push(2&o?a.readShort(r,s):0),s+=2&o?2:0,l.push(4&o?a.readShort(r,s):0),s+=4&o?2:0,l.push(8&o?a.readShort(r,s):0),s+=8&o?2:0,l},e.GSUB={},e.GSUB.parse=function(r,s,o,a){return e._lctf.parse(r,s,o,a,e.GSUB.subt)},e.GSUB.subt=function(r,s,o,a){var l=e._bin,c=o,u={};if(u.fmt=l.readUshort(r,o),o+=2,s!=1&&s!=4&&s!=5&&s!=6)return null;if(s==1||s==4||s==5&&u.fmt<=2||s==6&&u.fmt<=2){var h=l.readUshort(r,o);o+=2,u.coverage=e._lctf.readCoverage(r,c+h)}if(s==1&&u.fmt>=1&&u.fmt<=2){if(u.fmt==1)u.delta=l.readShort(r,o),o+=2;else if(u.fmt==2){var f=l.readUshort(r,o);o+=2,u.newg=l.readUshorts(r,o,f),o+=2*u.newg.length}}else if(s==4){u.vals=[],f=l.readUshort(r,o),o+=2;for(var d=0;d<f;d++){var p=l.readUshort(r,o);o+=2,u.vals.push(e.GSUB.readLigatureSet(r,c+p))}}else if(s==5&&u.fmt==2){if(u.fmt==2){var m=l.readUshort(r,o);o+=2,u.cDef=e._lctf.readClassDef(r,c+m),u.scset=[];var g=l.readUshort(r,o);for(o+=2,d=0;d<g;d++){var _=l.readUshort(r,o);o+=2,u.scset.push(_==0?null:e.GSUB.readSubClassSet(r,c+_))}}}else if(s==6&&u.fmt==3){if(u.fmt==3){for(d=0;d<3;d++){f=l.readUshort(r,o),o+=2;for(var y=[],x=0;x<f;x++)y.push(e._lctf.readCoverage(r,c+l.readUshort(r,o+2*x)));o+=2*f,d==0&&(u.backCvg=y),d==1&&(u.inptCvg=y),d==2&&(u.ahedCvg=y)}f=l.readUshort(r,o),o+=2,u.lookupRec=e.GSUB.readSubstLookupRecords(r,o,f)}}else{if(s==7&&u.fmt==1){var E=l.readUshort(r,o);o+=2;var w=l.readUint(r,o);if(o+=4,a.ltype==9)a.ltype=E;else if(a.ltype!=E)throw"invalid extension substitution";return e.GSUB.subt(r,a.ltype,c+w)}console.debug("unsupported GSUB table LookupType",s,"format",u.fmt)}return u},e.GSUB.readSubClassSet=function(r,s){var o=e._bin.readUshort,a=s,l=[],c=o(r,s);s+=2;for(var u=0;u<c;u++){var h=o(r,s);s+=2,l.push(e.GSUB.readSubClassRule(r,a+h))}return l},e.GSUB.readSubClassRule=function(r,s){var o=e._bin.readUshort,a={},l=o(r,s),c=o(r,s+=2);s+=2,a.input=[];for(var u=0;u<l-1;u++)a.input.push(o(r,s)),s+=2;return a.substLookupRecords=e.GSUB.readSubstLookupRecords(r,s,c),a},e.GSUB.readSubstLookupRecords=function(r,s,o){for(var a=e._bin.readUshort,l=[],c=0;c<o;c++)l.push(a(r,s),a(r,s+2)),s+=4;return l},e.GSUB.readChainSubClassSet=function(r,s){var o=e._bin,a=s,l=[],c=o.readUshort(r,s);s+=2;for(var u=0;u<c;u++){var h=o.readUshort(r,s);s+=2,l.push(e.GSUB.readChainSubClassRule(r,a+h))}return l},e.GSUB.readChainSubClassRule=function(r,s){for(var o=e._bin,a={},l=["backtrack","input","lookahead"],c=0;c<l.length;c++){var u=o.readUshort(r,s);s+=2,c==1&&u--,a[l[c]]=o.readUshorts(r,s,u),s+=2*a[l[c]].length}return u=o.readUshort(r,s),s+=2,a.subst=o.readUshorts(r,s,2*u),s+=2*a.subst.length,a},e.GSUB.readLigatureSet=function(r,s){var o=e._bin,a=s,l=[],c=o.readUshort(r,s);s+=2;for(var u=0;u<c;u++){var h=o.readUshort(r,s);s+=2,l.push(e.GSUB.readLigature(r,a+h))}return l},e.GSUB.readLigature=function(r,s){var o=e._bin,a={chain:[]};a.nglyph=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);s+=2;for(var c=0;c<l-1;c++)a.chain.push(o.readUshort(r,s)),s+=2;return a},e.head={},e.head.parse=function(r,s,o){var a=e._bin,l={};return a.readFixed(r,s),s+=4,l.fontRevision=a.readFixed(r,s),s+=4,a.readUint(r,s),s+=4,a.readUint(r,s),s+=4,l.flags=a.readUshort(r,s),s+=2,l.unitsPerEm=a.readUshort(r,s),s+=2,l.created=a.readUint64(r,s),s+=8,l.modified=a.readUint64(r,s),s+=8,l.xMin=a.readShort(r,s),s+=2,l.yMin=a.readShort(r,s),s+=2,l.xMax=a.readShort(r,s),s+=2,l.yMax=a.readShort(r,s),s+=2,l.macStyle=a.readUshort(r,s),s+=2,l.lowestRecPPEM=a.readUshort(r,s),s+=2,l.fontDirectionHint=a.readShort(r,s),s+=2,l.indexToLocFormat=a.readShort(r,s),s+=2,l.glyphDataFormat=a.readShort(r,s),s+=2,l},e.hhea={},e.hhea.parse=function(r,s,o){var a=e._bin,l={};return a.readFixed(r,s),s+=4,l.ascender=a.readShort(r,s),s+=2,l.descender=a.readShort(r,s),s+=2,l.lineGap=a.readShort(r,s),s+=2,l.advanceWidthMax=a.readUshort(r,s),s+=2,l.minLeftSideBearing=a.readShort(r,s),s+=2,l.minRightSideBearing=a.readShort(r,s),s+=2,l.xMaxExtent=a.readShort(r,s),s+=2,l.caretSlopeRise=a.readShort(r,s),s+=2,l.caretSlopeRun=a.readShort(r,s),s+=2,l.caretOffset=a.readShort(r,s),s+=2,s+=8,l.metricDataFormat=a.readShort(r,s),s+=2,l.numberOfHMetrics=a.readUshort(r,s),s+=2,l},e.hmtx={},e.hmtx.parse=function(r,s,o,a){for(var l=e._bin,c={aWidth:[],lsBearing:[]},u=0,h=0,f=0;f<a.maxp.numGlyphs;f++)f<a.hhea.numberOfHMetrics&&(u=l.readUshort(r,s),s+=2,h=l.readShort(r,s),s+=2),c.aWidth.push(u),c.lsBearing.push(h);return c},e.kern={},e.kern.parse=function(r,s,o,a){var l=e._bin,c=l.readUshort(r,s);if(s+=2,c==1)return e.kern.parseV1(r,s-2,o,a);var u=l.readUshort(r,s);s+=2;for(var h={glyph1:[],rval:[]},f=0;f<u;f++){s+=2,o=l.readUshort(r,s),s+=2;var d=l.readUshort(r,s);s+=2;var p=d>>>8;if((p&=15)!=0)throw"unknown kern table format: "+p;s=e.kern.readFormat0(r,s,h)}return h},e.kern.parseV1=function(r,s,o,a){var l=e._bin;l.readFixed(r,s),s+=4;var c=l.readUint(r,s);s+=4;for(var u={glyph1:[],rval:[]},h=0;h<c;h++){l.readUint(r,s),s+=4;var f=l.readUshort(r,s);s+=2,l.readUshort(r,s),s+=2;var d=f>>>8;if((d&=15)!=0)throw"unknown kern table format: "+d;s=e.kern.readFormat0(r,s,u)}return u},e.kern.readFormat0=function(r,s,o){var a=e._bin,l=-1,c=a.readUshort(r,s);s+=2,a.readUshort(r,s),s+=2,a.readUshort(r,s),s+=2,a.readUshort(r,s),s+=2;for(var u=0;u<c;u++){var h=a.readUshort(r,s);s+=2;var f=a.readUshort(r,s);s+=2;var d=a.readShort(r,s);s+=2,h!=l&&(o.glyph1.push(h),o.rval.push({glyph2:[],vals:[]}));var p=o.rval[o.rval.length-1];p.glyph2.push(f),p.vals.push(d),l=h}return s},e.loca={},e.loca.parse=function(r,s,o,a){var l=e._bin,c=[],u=a.head.indexToLocFormat,h=a.maxp.numGlyphs+1;if(u==0)for(var f=0;f<h;f++)c.push(l.readUshort(r,s+(f<<1))<<1);if(u==1)for(f=0;f<h;f++)c.push(l.readUint(r,s+(f<<2)));return c},e.maxp={},e.maxp.parse=function(r,s,o){var a=e._bin,l={},c=a.readUint(r,s);return s+=4,l.numGlyphs=a.readUshort(r,s),s+=2,c==65536&&(l.maxPoints=a.readUshort(r,s),s+=2,l.maxContours=a.readUshort(r,s),s+=2,l.maxCompositePoints=a.readUshort(r,s),s+=2,l.maxCompositeContours=a.readUshort(r,s),s+=2,l.maxZones=a.readUshort(r,s),s+=2,l.maxTwilightPoints=a.readUshort(r,s),s+=2,l.maxStorage=a.readUshort(r,s),s+=2,l.maxFunctionDefs=a.readUshort(r,s),s+=2,l.maxInstructionDefs=a.readUshort(r,s),s+=2,l.maxStackElements=a.readUshort(r,s),s+=2,l.maxSizeOfInstructions=a.readUshort(r,s),s+=2,l.maxComponentElements=a.readUshort(r,s),s+=2,l.maxComponentDepth=a.readUshort(r,s),s+=2),l},e.name={},e.name.parse=function(r,s,o){var a=e._bin,l={};a.readUshort(r,s),s+=2;var c=a.readUshort(r,s);s+=2,a.readUshort(r,s);for(var u,h=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],f=s+=2,d=0;d<c;d++){var p=a.readUshort(r,s);s+=2;var m=a.readUshort(r,s);s+=2;var g=a.readUshort(r,s);s+=2;var _=a.readUshort(r,s);s+=2;var y=a.readUshort(r,s);s+=2;var x=a.readUshort(r,s);s+=2;var E,w=h[_],S=f+12*c+x;if(p==0)E=a.readUnicode(r,S,y/2);else if(p==3&&m==0)E=a.readUnicode(r,S,y/2);else if(m==0)E=a.readASCII(r,S,y);else if(m==1)E=a.readUnicode(r,S,y/2);else if(m==3)E=a.readUnicode(r,S,y/2);else{if(p!=1)throw"unknown encoding "+m+", platformID: "+p;E=a.readASCII(r,S,y),console.debug("reading unknown MAC encoding "+m+" as ASCII")}var b="p"+p+","+g.toString(16);l[b]==null&&(l[b]={}),l[b][w!==void 0?w:_]=E,l[b]._lang=g}for(var M in l)if(l[M].postScriptName!=null&&l[M]._lang==1033)return l[M];for(var M in l)if(l[M].postScriptName!=null&&l[M]._lang==0)return l[M];for(var M in l)if(l[M].postScriptName!=null&&l[M]._lang==3084)return l[M];for(var M in l)if(l[M].postScriptName!=null)return l[M];for(var M in l){u=M;break}return console.debug("returning name table with languageID "+l[u]._lang),l[u]},e["OS/2"]={},e["OS/2"].parse=function(r,s,o){var a=e._bin.readUshort(r,s);s+=2;var l={};if(a==0)e["OS/2"].version0(r,s,l);else if(a==1)e["OS/2"].version1(r,s,l);else if(a==2||a==3||a==4)e["OS/2"].version2(r,s,l);else{if(a!=5)throw"unknown OS/2 table version: "+a;e["OS/2"].version5(r,s,l)}return l},e["OS/2"].version0=function(r,s,o){var a=e._bin;return o.xAvgCharWidth=a.readShort(r,s),s+=2,o.usWeightClass=a.readUshort(r,s),s+=2,o.usWidthClass=a.readUshort(r,s),s+=2,o.fsType=a.readUshort(r,s),s+=2,o.ySubscriptXSize=a.readShort(r,s),s+=2,o.ySubscriptYSize=a.readShort(r,s),s+=2,o.ySubscriptXOffset=a.readShort(r,s),s+=2,o.ySubscriptYOffset=a.readShort(r,s),s+=2,o.ySuperscriptXSize=a.readShort(r,s),s+=2,o.ySuperscriptYSize=a.readShort(r,s),s+=2,o.ySuperscriptXOffset=a.readShort(r,s),s+=2,o.ySuperscriptYOffset=a.readShort(r,s),s+=2,o.yStrikeoutSize=a.readShort(r,s),s+=2,o.yStrikeoutPosition=a.readShort(r,s),s+=2,o.sFamilyClass=a.readShort(r,s),s+=2,o.panose=a.readBytes(r,s,10),s+=10,o.ulUnicodeRange1=a.readUint(r,s),s+=4,o.ulUnicodeRange2=a.readUint(r,s),s+=4,o.ulUnicodeRange3=a.readUint(r,s),s+=4,o.ulUnicodeRange4=a.readUint(r,s),s+=4,o.achVendID=[a.readInt8(r,s),a.readInt8(r,s+1),a.readInt8(r,s+2),a.readInt8(r,s+3)],s+=4,o.fsSelection=a.readUshort(r,s),s+=2,o.usFirstCharIndex=a.readUshort(r,s),s+=2,o.usLastCharIndex=a.readUshort(r,s),s+=2,o.sTypoAscender=a.readShort(r,s),s+=2,o.sTypoDescender=a.readShort(r,s),s+=2,o.sTypoLineGap=a.readShort(r,s),s+=2,o.usWinAscent=a.readUshort(r,s),s+=2,o.usWinDescent=a.readUshort(r,s),s+=2},e["OS/2"].version1=function(r,s,o){var a=e._bin;return s=e["OS/2"].version0(r,s,o),o.ulCodePageRange1=a.readUint(r,s),s+=4,o.ulCodePageRange2=a.readUint(r,s),s+=4},e["OS/2"].version2=function(r,s,o){var a=e._bin;return s=e["OS/2"].version1(r,s,o),o.sxHeight=a.readShort(r,s),s+=2,o.sCapHeight=a.readShort(r,s),s+=2,o.usDefault=a.readUshort(r,s),s+=2,o.usBreak=a.readUshort(r,s),s+=2,o.usMaxContext=a.readUshort(r,s),s+=2},e["OS/2"].version5=function(r,s,o){var a=e._bin;return s=e["OS/2"].version2(r,s,o),o.usLowerOpticalPointSize=a.readUshort(r,s),s+=2,o.usUpperOpticalPointSize=a.readUshort(r,s),s+=2},e.post={},e.post.parse=function(r,s,o){var a=e._bin,l={};return l.version=a.readFixed(r,s),s+=4,l.italicAngle=a.readFixed(r,s),s+=4,l.underlinePosition=a.readShort(r,s),s+=2,l.underlineThickness=a.readShort(r,s),s+=2,l},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(r,s){var o=r.cmap,a=-1;if(o.p0e4!=null?a=o.p0e4:o.p3e1!=null?a=o.p3e1:o.p1e0!=null?a=o.p1e0:o.p0e3!=null&&(a=o.p0e3),a==-1)throw"no familiar platform and encoding!";var l=o.tables[a];if(l.format==0)return s>=l.map.length?0:l.map[s];if(l.format==4){for(var c=-1,u=0;u<l.endCount.length;u++)if(s<=l.endCount[u]){c=u;break}return c==-1||l.startCount[c]>s?0:65535&(l.idRangeOffset[c]!=0?l.glyphIdArray[s-l.startCount[c]+(l.idRangeOffset[c]>>1)-(l.idRangeOffset.length-c)]:s+l.idDelta[c])}if(l.format==12){if(s>l.groups[l.groups.length-1][1])return 0;for(u=0;u<l.groups.length;u++){var h=l.groups[u];if(h[0]<=s&&s<=h[1])return h[2]+(s-h[0])}return 0}throw"unknown cmap table format "+l.format},e.U.glyphToPath=function(r,s){var o={cmds:[],crds:[]};if(r.SVG&&r.SVG.entries[s]){var a=r.SVG.entries[s];return a==null?o:(typeof a=="string"&&(a=e.SVG.toPath(a),r.SVG.entries[s]=a),a)}if(r.CFF){var l={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:r.CFF.Private?r.CFF.Private.defaultWidthX:0,open:!1},c=r.CFF,u=r.CFF.Private;if(c.ROS){for(var h=0;c.FDSelect[h+2]<=s;)h+=2;u=c.FDArray[c.FDSelect[h+1]].Private}e.U._drawCFF(r.CFF.CharStrings[s],l,c,u,o)}else r.glyf&&e.U._drawGlyf(s,r,o);return o},e.U._drawGlyf=function(r,s,o){var a=s.glyf[r];a==null&&(a=s.glyf[r]=e.glyf._parseGlyf(s,r)),a!=null&&(a.noc>-1?e.U._simpleGlyph(a,o):e.U._compoGlyph(a,s,o))},e.U._simpleGlyph=function(r,s){for(var o=0;o<r.noc;o++){for(var a=o==0?0:r.endPts[o-1]+1,l=r.endPts[o],c=a;c<=l;c++){var u=c==a?l:c-1,h=c==l?a:c+1,f=1&r.flags[c],d=1&r.flags[u],p=1&r.flags[h],m=r.xs[c],g=r.ys[c];if(c==a)if(f){if(!d){e.U.P.moveTo(s,m,g);continue}e.U.P.moveTo(s,r.xs[u],r.ys[u])}else d?e.U.P.moveTo(s,r.xs[u],r.ys[u]):e.U.P.moveTo(s,(r.xs[u]+m)/2,(r.ys[u]+g)/2);f?d&&e.U.P.lineTo(s,m,g):p?e.U.P.qcurveTo(s,m,g,r.xs[h],r.ys[h]):e.U.P.qcurveTo(s,m,g,(m+r.xs[h])/2,(g+r.ys[h])/2)}e.U.P.closePath(s)}},e.U._compoGlyph=function(r,s,o){for(var a=0;a<r.parts.length;a++){var l={cmds:[],crds:[]},c=r.parts[a];e.U._drawGlyf(c.glyphIndex,s,l);for(var u=c.m,h=0;h<l.crds.length;h+=2){var f=l.crds[h],d=l.crds[h+1];o.crds.push(f*u.a+d*u.b+u.tx),o.crds.push(f*u.c+d*u.d+u.ty)}for(h=0;h<l.cmds.length;h++)o.cmds.push(l.cmds[h])}},e.U._getGlyphClass=function(r,s){var o=e._lctf.getInterval(s,r);return o==-1?0:s[o+2]},e.U.getPairAdjustment=function(r,s,o){var a=0,l=!1;if(r.GPOS)for(var c=r.GPOS,u=c.lookupList,h=c.featureList,f=[],d=0;d<h.length;d++){var p=h[d];if(p.tag=="kern"){l=!0;for(var m=0;m<p.tab.length;m++)if(!f[p.tab[m]]){f[p.tab[m]]=!0;for(var g=u[p.tab[m]],_=0;_<g.tabs.length;_++)if(g.tabs[_]!=null){var y,x=g.tabs[_];if((!x.coverage||(y=e._lctf.coverageIndex(x.coverage,s))!=-1)&&g.ltype!=1){if(g.ltype==2){var E;if(x.fmt==1){var w=x.pairsets[y];for(d=0;d<w.length;d++)w[d].gid2==o&&(E=w[d])}else if(x.fmt==2){var S=e.U._getGlyphClass(s,x.classDef1),b=e.U._getGlyphClass(o,x.classDef2);E=x.matrix[S][b]}E&&E.val1&&E.val1[2]&&(a+=E.val1[2]),E&&E.val2&&E.val2[0]&&(a+=E.val2[0])}}}}}}if(r.kern&&!l){var M=r.kern.glyph1.indexOf(s);if(M!=-1){var T=r.kern.rval[M].glyph2.indexOf(o);T!=-1&&(a+=r.kern.rval[M].vals[T])}}return a},e.U._applySubs=function(r,s,o,a){for(var l=r.length-s-1,c=0;c<o.tabs.length;c++)if(o.tabs[c]!=null){var u,h=o.tabs[c];if(!h.coverage||(u=e._lctf.coverageIndex(h.coverage,r[s]))!=-1){if(o.ltype==1)r[s],h.fmt==1?r[s]=r[s]+h.delta:r[s]=h.newg[u];else if(o.ltype==4)for(var f=h.vals[u],d=0;d<f.length;d++){var p=f[d],m=p.chain.length;if(!(m>l)){for(var g=!0,_=0,y=0;y<m;y++){for(;r[s+_+(1+y)]==-1;)_++;p.chain[y]!=r[s+_+(1+y)]&&(g=!1)}if(g){for(r[s]=p.nglyph,y=0;y<m+_;y++)r[s+y+1]=-1;break}}}else if(o.ltype==5&&h.fmt==2)for(var x=e._lctf.getInterval(h.cDef,r[s]),E=h.cDef[x+2],w=h.scset[E],S=0;S<w.length;S++){var b=w[S],M=b.input;if(!(M.length>l)){for(g=!0,y=0;y<M.length;y++){var T=e._lctf.getInterval(h.cDef,r[s+1+y]);if(x==-1&&h.cDef[T+2]!=M[y]){g=!1;break}}if(g){var B=b.substLookupRecords;for(d=0;d<B.length;d+=2)B[d],B[d+1]}}}else if(o.ltype==6&&h.fmt==3){if(!e.U._glsCovered(r,h.backCvg,s-h.backCvg.length)||!e.U._glsCovered(r,h.inptCvg,s)||!e.U._glsCovered(r,h.ahedCvg,s+h.inptCvg.length))continue;var L=h.lookupRec;for(S=0;S<L.length;S+=2){x=L[S];var F=a[L[S+1]];e.U._applySubs(r,s+x,F,a)}}}}},e.U._glsCovered=function(r,s,o){for(var a=0;a<s.length;a++)if(e._lctf.coverageIndex(s[a],r[o+a])==-1)return!1;return!0},e.U.glyphsToPath=function(r,s,o){for(var a={cmds:[],crds:[]},l=0,c=0;c<s.length;c++){var u=s[c];if(u!=-1){for(var h=c<s.length-1&&s[c+1]!=-1?s[c+1]:0,f=e.U.glyphToPath(r,u),d=0;d<f.crds.length;d+=2)a.crds.push(f.crds[d]+l),a.crds.push(f.crds[d+1]);for(o&&a.cmds.push(o),d=0;d<f.cmds.length;d++)a.cmds.push(f.cmds[d]);o&&a.cmds.push("X"),l+=r.hmtx.aWidth[u],c<s.length-1&&(l+=e.U.getPairAdjustment(r,u,h))}}return a},e.U.P={},e.U.P.moveTo=function(r,s,o){r.cmds.push("M"),r.crds.push(s,o)},e.U.P.lineTo=function(r,s,o){r.cmds.push("L"),r.crds.push(s,o)},e.U.P.curveTo=function(r,s,o,a,l,c,u){r.cmds.push("C"),r.crds.push(s,o,a,l,c,u)},e.U.P.qcurveTo=function(r,s,o,a,l){r.cmds.push("Q"),r.crds.push(s,o,a,l)},e.U.P.closePath=function(r){r.cmds.push("Z")},e.U._drawCFF=function(r,s,o,a,l){for(var c=s.stack,u=s.nStems,h=s.haveWidth,f=s.width,d=s.open,p=0,m=s.x,g=s.y,_=0,y=0,x=0,E=0,w=0,S=0,b=0,M=0,T=0,B=0,L={val:0,size:0};p<r.length;){e.CFF.getCharString(r,p,L);var F=L.val;if(p+=L.size,F=="o1"||F=="o18")c.length%2!=0&&!h&&(f=c.shift()+a.nominalWidthX),u+=c.length>>1,c.length=0,h=!0;else if(F=="o3"||F=="o23")c.length%2!=0&&!h&&(f=c.shift()+a.nominalWidthX),u+=c.length>>1,c.length=0,h=!0;else if(F=="o4")c.length>1&&!h&&(f=c.shift()+a.nominalWidthX,h=!0),d&&e.U.P.closePath(l),g+=c.pop(),e.U.P.moveTo(l,m,g),d=!0;else if(F=="o5")for(;c.length>0;)m+=c.shift(),g+=c.shift(),e.U.P.lineTo(l,m,g);else if(F=="o6"||F=="o7")for(var U=c.length,k=F=="o6",X=0;X<U;X++){var Y=c.shift();k?m+=Y:g+=Y,k=!k,e.U.P.lineTo(l,m,g)}else if(F=="o8"||F=="o24"){U=c.length;for(var Z=0;Z+6<=U;)_=m+c.shift(),y=g+c.shift(),x=_+c.shift(),E=y+c.shift(),m=x+c.shift(),g=E+c.shift(),e.U.P.curveTo(l,_,y,x,E,m,g),Z+=6;F=="o24"&&(m+=c.shift(),g+=c.shift(),e.U.P.lineTo(l,m,g))}else{if(F=="o11")break;if(F=="o1234"||F=="o1235"||F=="o1236"||F=="o1237")F=="o1234"&&(y=g,x=(_=m+c.shift())+c.shift(),B=E=y+c.shift(),S=E,M=g,m=(b=(w=(T=x+c.shift())+c.shift())+c.shift())+c.shift(),e.U.P.curveTo(l,_,y,x,E,T,B),e.U.P.curveTo(l,w,S,b,M,m,g)),F=="o1235"&&(_=m+c.shift(),y=g+c.shift(),x=_+c.shift(),E=y+c.shift(),T=x+c.shift(),B=E+c.shift(),w=T+c.shift(),S=B+c.shift(),b=w+c.shift(),M=S+c.shift(),m=b+c.shift(),g=M+c.shift(),c.shift(),e.U.P.curveTo(l,_,y,x,E,T,B),e.U.P.curveTo(l,w,S,b,M,m,g)),F=="o1236"&&(_=m+c.shift(),y=g+c.shift(),x=_+c.shift(),B=E=y+c.shift(),S=E,b=(w=(T=x+c.shift())+c.shift())+c.shift(),M=S+c.shift(),m=b+c.shift(),e.U.P.curveTo(l,_,y,x,E,T,B),e.U.P.curveTo(l,w,S,b,M,m,g)),F=="o1237"&&(_=m+c.shift(),y=g+c.shift(),x=_+c.shift(),E=y+c.shift(),T=x+c.shift(),B=E+c.shift(),w=T+c.shift(),S=B+c.shift(),b=w+c.shift(),M=S+c.shift(),Math.abs(b-m)>Math.abs(M-g)?m=b+c.shift():g=M+c.shift(),e.U.P.curveTo(l,_,y,x,E,T,B),e.U.P.curveTo(l,w,S,b,M,m,g));else if(F=="o14"){if(c.length>0&&!h&&(f=c.shift()+o.nominalWidthX,h=!0),c.length==4){var G=c.shift(),O=c.shift(),z=c.shift(),Q=c.shift(),H=e.CFF.glyphBySE(o,z),J=e.CFF.glyphBySE(o,Q);e.U._drawCFF(o.CharStrings[H],s,o,a,l),s.x=G,s.y=O,e.U._drawCFF(o.CharStrings[J],s,o,a,l)}d&&(e.U.P.closePath(l),d=!1)}else if(F=="o19"||F=="o20")c.length%2!=0&&!h&&(f=c.shift()+a.nominalWidthX),u+=c.length>>1,c.length=0,h=!0,p+=u+7>>3;else if(F=="o21")c.length>2&&!h&&(f=c.shift()+a.nominalWidthX,h=!0),g+=c.pop(),m+=c.pop(),d&&e.U.P.closePath(l),e.U.P.moveTo(l,m,g),d=!0;else if(F=="o22")c.length>1&&!h&&(f=c.shift()+a.nominalWidthX,h=!0),m+=c.pop(),d&&e.U.P.closePath(l),e.U.P.moveTo(l,m,g),d=!0;else if(F=="o25"){for(;c.length>6;)m+=c.shift(),g+=c.shift(),e.U.P.lineTo(l,m,g);_=m+c.shift(),y=g+c.shift(),x=_+c.shift(),E=y+c.shift(),m=x+c.shift(),g=E+c.shift(),e.U.P.curveTo(l,_,y,x,E,m,g)}else if(F=="o26")for(c.length%2&&(m+=c.shift());c.length>0;)_=m,y=g+c.shift(),m=x=_+c.shift(),g=(E=y+c.shift())+c.shift(),e.U.P.curveTo(l,_,y,x,E,m,g);else if(F=="o27")for(c.length%2&&(g+=c.shift());c.length>0;)y=g,x=(_=m+c.shift())+c.shift(),E=y+c.shift(),m=x+c.shift(),g=E,e.U.P.curveTo(l,_,y,x,E,m,g);else if(F=="o10"||F=="o29"){var j=F=="o10"?a:o;if(c.length==0)console.debug("error: empty stack");else{var oe=c.pop(),K=j.Subrs[oe+j.Bias];s.x=m,s.y=g,s.nStems=u,s.haveWidth=h,s.width=f,s.open=d,e.U._drawCFF(K,s,o,a,l),m=s.x,g=s.y,u=s.nStems,h=s.haveWidth,f=s.width,d=s.open}}else if(F=="o30"||F=="o31"){var ce=c.length,he=(Z=0,F=="o31");for(Z+=ce-(U=-3&ce);Z<U;)he?(y=g,x=(_=m+c.shift())+c.shift(),g=(E=y+c.shift())+c.shift(),U-Z==5?(m=x+c.shift(),Z++):m=x,he=!1):(_=m,y=g+c.shift(),x=_+c.shift(),E=y+c.shift(),m=x+c.shift(),U-Z==5?(g=E+c.shift(),Z++):g=E,he=!0),e.U.P.curveTo(l,_,y,x,E,m,g),Z+=4}else{if((F+"").charAt(0)=="o")throw console.debug("Unknown operation: "+F,r),F;c.push(F)}}}s.x=m,s.y=g,s.nStems=u,s.haveWidth=h,s.width=f,s.open=d};var n=e,i={Typr:n};return t.Typr=n,t.default=i,Object.defineProperty(t,"__esModule",{value:!0}),t}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function I1e(){return function(t){var e=Uint8Array,n=Uint16Array,i=Uint32Array,r=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),s=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(F,U){for(var k=new n(31),X=0;X<31;++X)k[X]=U+=1<<F[X-1];var Y=new i(k[30]);for(X=1;X<30;++X)for(var Z=k[X];Z<k[X+1];++Z)Y[Z]=Z-k[X]<<5|X;return[k,Y]},l=a(r,2),c=l[0],u=l[1];c[28]=258,u[258]=28;for(var h=a(s,0)[0],f=new n(32768),d=0;d<32768;++d){var p=(43690&d)>>>1|(21845&d)<<1;p=(61680&(p=(52428&p)>>>2|(13107&p)<<2))>>>4|(3855&p)<<4,f[d]=((65280&p)>>>8|(255&p)<<8)>>>1}var m=function(F,U,k){for(var X=F.length,Y=0,Z=new n(U);Y<X;++Y)++Z[F[Y]-1];var G,O=new n(U);for(Y=0;Y<U;++Y)O[Y]=O[Y-1]+Z[Y-1]<<1;if(k){G=new n(1<<U);var z=15-U;for(Y=0;Y<X;++Y)if(F[Y])for(var Q=Y<<4|F[Y],H=U-F[Y],J=O[F[Y]-1]++<<H,j=J|(1<<H)-1;J<=j;++J)G[f[J]>>>z]=Q}else for(G=new n(X),Y=0;Y<X;++Y)F[Y]&&(G[Y]=f[O[F[Y]-1]++]>>>15-F[Y]);return G},g=new e(288);for(d=0;d<144;++d)g[d]=8;for(d=144;d<256;++d)g[d]=9;for(d=256;d<280;++d)g[d]=7;for(d=280;d<288;++d)g[d]=8;var _=new e(32);for(d=0;d<32;++d)_[d]=5;var y=m(g,9,1),x=m(_,5,1),E=function(F){for(var U=F[0],k=1;k<F.length;++k)F[k]>U&&(U=F[k]);return U},w=function(F,U,k){var X=U/8|0;return(F[X]|F[X+1]<<8)>>(7&U)&k},S=function(F,U){var k=U/8|0;return(F[k]|F[k+1]<<8|F[k+2]<<16)>>(7&U)},b=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],M=function(F,U,k){var X=new Error(U||b[F]);if(X.code=F,Error.captureStackTrace&&Error.captureStackTrace(X,M),!k)throw X;return X},T=function(F,U,k){var X=F.length;if(!X||k&&!k.l&&X<5)return U||new e(0);var Y=!U||k,Z=!k||k.i;k||(k={}),U||(U=new e(3*X));var G,O=function(Re){var Je=U.length;if(Re>Je){var ae=new e(Math.max(2*Je,Re));ae.set(U),U=ae}},z=k.f||0,Q=k.p||0,H=k.b||0,J=k.l,j=k.d,oe=k.m,K=k.n,ce=8*X;do{if(!J){k.f=z=w(F,Q,1);var he=w(F,Q+1,3);if(Q+=3,!he){var ve=F[(He=((G=Q)/8|0)+(7&G&&1)+4)-4]|F[He-3]<<8,Me=He+ve;if(Me>X){Z&&M(0);break}Y&&O(H+ve),U.set(F.subarray(He,Me),H),k.b=H+=ve,k.p=Q=8*Me;continue}if(he==1)J=y,j=x,oe=9,K=5;else if(he==2){var Se=w(F,Q,31)+257,le=w(F,Q+10,15)+4,pe=Se+w(F,Q+5,31)+1;Q+=14;for(var Pe=new e(pe),Oe=new e(19),ke=0;ke<le;++ke)Oe[o[ke]]=w(F,Q+3*ke,7);Q+=3*le;var Ke=E(Oe),xe=(1<<Ke)-1,Ue=m(Oe,Ke,1);for(ke=0;ke<pe;){var He,be=Ue[w(F,Q,xe)];if(Q+=15&be,(He=be>>>4)<16)Pe[ke++]=He;else{var q=0,W=0;for(He==16?(W=3+w(F,Q,3),Q+=2,q=Pe[ke-1]):He==17?(W=3+w(F,Q,7),Q+=3):He==18&&(W=11+w(F,Q,127),Q+=7);W--;)Pe[ke++]=q}}var ie=Pe.subarray(0,Se),fe=Pe.subarray(Se);oe=E(ie),K=E(fe),J=m(ie,oe,1),j=m(fe,K,1)}else M(1);if(Q>ce){Z&&M(0);break}}Y&&O(H+131072);for(var _e=(1<<oe)-1,Ge=(1<<K)-1,Ie=Q;;Ie=Q){var Le=(q=J[S(F,Q)&_e])>>>4;if((Q+=15&q)>ce){Z&&M(0);break}if(q||M(2),Le<256)U[H++]=Le;else{if(Le==256){Ie=Q,J=null;break}var ye=Le-254;if(Le>264){var je=r[ke=Le-257];ye=w(F,Q,(1<<je)-1)+c[ke],Q+=je}var re=j[S(F,Q)&Ge],ge=re>>>4;if(re||M(3),Q+=15&re,fe=h[ge],ge>3&&(je=s[ge],fe+=S(F,Q)&(1<<je)-1,Q+=je),Q>ce){Z&&M(0);break}Y&&O(H+131072);for(var Ce=H+ye;H<Ce;H+=4)U[H]=U[H-fe],U[H+1]=U[H+1-fe],U[H+2]=U[H+2-fe],U[H+3]=U[H+3-fe];H=Ce}}k.l=J,k.p=Ie,k.b=H,J&&(z=1,k.m=oe,k.d=j,k.n=K)}while(!z);return H==U.length?U:function(Re,Je,ae){(Je==null||Je<0)&&(Je=0),(ae==null||ae>Re.length)&&(ae=Re.length);var qe=new(Re instanceof n?n:Re instanceof i?i:e)(ae-Je);return qe.set(Re.subarray(Je,ae)),qe}(U,0,H)},B=new e(0),L=typeof TextDecoder<"u"&&new TextDecoder;try{L.decode(B,{stream:!0})}catch{}return t.convert_streams=function(F){var U=new DataView(F),k=0;function X(){var Se=U.getUint16(k);return k+=2,Se}function Y(){var Se=U.getUint32(k);return k+=4,Se}function Z(Se){ve.setUint16(Me,Se),Me+=2}function G(Se){ve.setUint32(Me,Se),Me+=4}for(var O={signature:Y(),flavor:Y(),length:Y(),numTables:X(),reserved:X(),totalSfntSize:Y(),majorVersion:X(),minorVersion:X(),metaOffset:Y(),metaLength:Y(),metaOrigLength:Y(),privOffset:Y(),privLength:Y()},z=0;Math.pow(2,z)<=O.numTables;)z++;z--;for(var Q=16*Math.pow(2,z),H=16*O.numTables-Q,J=12,j=[],oe=0;oe<O.numTables;oe++)j.push({tag:Y(),offset:Y(),compLength:Y(),origLength:Y(),origChecksum:Y()}),J+=16;var K,ce=new Uint8Array(12+16*j.length+j.reduce(function(Se,le){return Se+le.origLength+4},0)),he=ce.buffer,ve=new DataView(he),Me=0;return G(O.flavor),Z(O.numTables),Z(Q),Z(z),Z(H),j.forEach(function(Se){G(Se.tag),G(Se.origChecksum),G(J),G(Se.origLength),Se.outOffset=J,(J+=Se.origLength)%4!=0&&(J+=4-J%4)}),j.forEach(function(Se){var le,pe=F.slice(Se.offset,Se.offset+Se.compLength);if(Se.compLength!=Se.origLength){var Pe=new Uint8Array(Se.origLength);le=new Uint8Array(pe,2),T(le,Pe)}else Pe=new Uint8Array(pe);ce.set(Pe,Se.outOffset);var Oe=0;(J=Se.outOffset+Se.origLength)%4!=0&&(Oe=4-J%4),ce.set(new Uint8Array(Oe).buffer,Se.outOffset+Se.origLength),K=J+Oe}),he.slice(0,K)},Object.defineProperty(t,"__esModule",{value:!0}),t}({}).convert_streams}function T1e(t,e){const n={M:2,L:2,Q:4,C:6,Z:0},i={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},r=1,s=2,o=4,a=8,l=16,c=32;let u;function h(E){if(!u){const w={R:s,L:r,D:o,C:l,U:c,T:a};u=new Map;for(let S in i){let b=0;i[S].split(",").forEach(M=>{let[T,B]=M.split("+");T=parseInt(T,36),B=B?parseInt(B,36):0,u.set(b+=T,w[S]);for(let L=B;L--;)u.set(++b,w[S])})}}return u.get(E)||c}const f=1,d=2,p=3,m=4,g=[null,"isol","init","fina","medi"];function _(E){const w=new Uint8Array(E.length);let S=c,b=f,M=-1;for(let T=0;T<E.length;T++){const B=E.codePointAt(T);let L=h(B)|0,F=f;L&a||(S&(r|o|l)?L&(s|o|l)?(F=p,(b===f||b===p)&&w[M]++):L&(r|c)&&(b===d||b===m)&&w[M]--:S&(s|c)&&(b===d||b===m)&&w[M]--,b=w[T]=F,S=L,M=T,B>65535&&T++)}return w}function y(E,w){const S=[];for(let M=0;M<w.length;M++){const T=w.codePointAt(M);T>65535&&M++,S.push(t.U.codeToGlyph(E,T))}const b=E.GSUB;if(b){const{lookupList:M,featureList:T}=b;let B;const L=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,F=[];T.forEach(U=>{if(L.test(U.tag))for(let k=0;k<U.tab.length;k++){if(F[U.tab[k]])continue;F[U.tab[k]]=!0;const X=M[U.tab[k]],Y=/^(isol|init|fina|medi)$/.test(U.tag);Y&&!B&&(B=_(w));for(let Z=0;Z<S.length;Z++)(!B||!Y||g[B[Z]]===U.tag)&&t.U._applySubs(S,Z,X,M)}})}return S}function x(E){const w=Object.create(null),S={unitsPerEm:E.head.unitsPerEm,ascender:E.hhea.ascender,descender:E.hhea.descender,forEachGlyph(b,M,T,B){let L=0;const F=1/S.unitsPerEm*M,U=y(E,b);let k=0,X=-1;return U.forEach((Y,Z)=>{if(Y!==-1){let G=w[Y];if(!G){const{cmds:O,crds:z}=t.U.glyphToPath(E,Y);let Q="",H=0;for(let ce=0,he=O.length;ce<he;ce++){const ve=n[O[ce]];Q+=O[ce];for(let Me=1;Me<=ve;Me++)Q+=(Me>1?",":"")+z[H++]}let J,j,oe,K;if(z.length){J=j=1/0,oe=K=-1/0;for(let ce=0,he=z.length;ce<he;ce+=2){let ve=z[ce],Me=z[ce+1];ve<J&&(J=ve),Me<j&&(j=Me),ve>oe&&(oe=ve),Me>K&&(K=Me)}}else J=oe=j=K=0;G=w[Y]={index:Y,advanceWidth:E.hmtx.aWidth[Y],xMin:J,yMin:j,xMax:oe,yMax:K,path:Q,pathCommandCount:O.length}}X!==-1&&(L+=t.U.getPairAdjustment(E,X,Y)*F),B.call(null,G,L,k),G.advanceWidth&&(L+=G.advanceWidth*F),T&&(L+=T*M),X=Y}k+=b.codePointAt(k)>65535?2:1}),L}};return S}return function(w){const S=new Uint8Array(w,0,4),b=t._bin.readASCII(S,0,4);if(b==="wOFF")w=e(w);else if(b==="wOF2")throw new Error("woff2 fonts not supported");return x(t.parse(w)[0])}}const B1e=o0({name:"Typr Font Parser",dependencies:[b1e,I1e,T1e],init(t,e,n){const i=t(),r=e();return n(i,r)}}),Kf={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},R1e=new xt;function _f(){return(self.performance||Date).now()}const Z4=Object.create(null);function Mz(t,e){t=F1e({},t);const n=_f();if(t.font=L1e(t.font||Kf.defaultFontURL),t.text=""+t.text,t.sdfGlyphSize=t.sdfGlyphSize||Kf.sdfGlyphSize,t.colorRanges!=null){let h={};for(let f in t.colorRanges)if(t.colorRanges.hasOwnProperty(f)){let d=t.colorRanges[f];typeof d!="number"&&(d=R1e.set(d).getHex()),h[f]=d}t.colorRanges=h}Object.freeze(t);const{textureWidth:i,sdfExponent:r}=Kf,{sdfGlyphSize:s}=t,o=i/s*4;let a=Z4[s];if(!a){const h=document.createElement("canvas");h.width=i,h.height=s*256/o,a=Z4[s]={glyphCount:0,sdfGlyphSize:s,sdfCanvas:h,sdfTexture:new Mc(h,void 0,void 0,void 0,Mi,Mi),contextLost:!1,glyphsByFont:new Map},a.sdfTexture.generateMipmaps=!1,P1e(a)}const{sdfTexture:l,sdfCanvas:c}=a;let u=a.glyphsByFont.get(t.font);u||a.glyphsByFont.set(t.font,u=new Map),U1e(t).then(h=>{const{glyphIds:f,glyphPositions:d,fontSize:p,unitsPerEm:m,timings:g}=h,_=[],y=new Float32Array(f.length*4),x=p/m;let E=0,w=0;const S=_f();f.forEach((L,F)=>{let U=u.get(L);if(!U){const{path:Z,pathBounds:G}=h.glyphData[L],O=Math.max(G[2]-G[0],G[3]-G[1])/s*(Kf.sdfMargin*s+.5),z=a.glyphCount++,Q=[G[0]-O,G[1]-O,G[2]+O,G[3]+O];u.set(L,U={path:Z,atlasIndex:z,sdfViewBox:Q}),_.push(U)}const{sdfViewBox:k}=U,X=d[w++],Y=d[w++];y[E++]=X+k[0]*x,y[E++]=Y+k[1]*x,y[E++]=X+k[2]*x,y[E++]=Y+k[3]*x,f[F]=U.atlasIndex}),g.quads=(g.quads||0)+(_f()-S);const b=_f();g.sdf={};const M=c.height,T=Math.ceil(a.glyphCount/o),B=Math.pow(2,Math.ceil(Math.log2(T*s)));B>M&&(console.info(`Increasing SDF texture size ${M}->${B}`),S1e(c,i,B),l.dispose()),ll.all(_.map(L=>Cz(L,a,t.gpuAccelerateSDF).then(({timing:F})=>{g.sdf[L.atlasIndex]=F}))).then(()=>{_.length&&!a.contextLost&&(Sz(a),l.needsUpdate=!0),g.sdfTotal=_f()-b,g.total=_f()-n,e(Object.freeze({parameters:t,sdfTexture:l,sdfGlyphSize:s,sdfExponent:r,glyphBounds:y,glyphAtlasIndices:f,glyphColors:h.glyphColors,caretPositions:h.caretPositions,caretHeight:h.caretHeight,chunkedBounds:h.chunkedBounds,ascender:h.ascender,descender:h.descender,lineHeight:h.lineHeight,topBaseline:h.topBaseline,blockBounds:h.blockBounds,visibleBounds:h.visibleBounds,timings:h.timings,get totalBounds(){return console.log("totalBounds deprecated, use blockBounds instead"),h.blockBounds},get totalBlockSize(){console.log("totalBlockSize deprecated, use blockBounds instead");const[L,F,U,k]=h.blockBounds;return[U-L,k-F]}}))})}),ll.all([]).then(()=>{a.contextLost||C1e(c)})}function Cz({path:t,atlasIndex:e,sdfViewBox:n},{sdfGlyphSize:i,sdfCanvas:r,contextLost:s},o){if(s)return Promise.resolve({timing:-1});const{textureWidth:a,sdfExponent:l}=Kf,c=Math.max(n[2]-n[0],n[3]-n[1]),u=Math.floor(e/4),h=u%(a/i)*i,f=Math.floor(u/(a/i))*i,d=e%4;return w1e(i,i,t,n,c,l,r,h,f,d,o)}function P1e(t){const e=t.sdfCanvas;e.addEventListener("webglcontextlost",n=>{console.log("Context Lost",n),n.preventDefault(),t.contextLost=!0}),e.addEventListener("webglcontextrestored",n=>{console.log("Context Restored",n),t.contextLost=!1;const i=[];t.glyphsByFont.forEach(r=>{r.forEach(s=>{i.push(Cz(s,t,!0))})}),ll.all(i).then(()=>{Sz(t),t.sdfTexture.needsUpdate=!0})})}function D1e({font:t,characters:e,sdfGlyphSize:n},i){let r=Array.isArray(e)?e.join(`
`):""+e;Mz({font:t,sdfGlyphSize:n,text:r},i)}function F1e(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}let Xg;function L1e(t){return Xg||(Xg=typeof document>"u"?{}:document.createElement("a")),Xg.href=t,Xg.href}function Sz(t){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:n}=t,{width:i,height:r}=e,s=t.sdfCanvas.getContext("webgl");let o=n.image.data;(!o||o.length!==i*r*4)&&(o=new Uint8Array(i*r*4),n.image={width:i,height:r,data:o},n.flipY=!1,n.isDataTexture=!0),s.readPixels(0,0,i,r,s.RGBA,s.UNSIGNED_BYTE,o)}}const k1e=o0({name:"Typesetter",dependencies:[Kf,B1e,E1e,p1e],init(t,e,n,i){const{defaultFontURL:r}=t;return n(e,i(),{defaultFontURL:r})}}),U1e=o0({name:"Typesetter",dependencies:[k1e,d1e],init(t,e){return function(n){const i=new e;return t.typeset(n,i.resolve),i}},getTransferables(t){const e=[t.glyphPositions.buffer,t.glyphIds.buffer];return t.caretPositions&&e.push(t.caretPositions.buffer),t.glyphColors&&e.push(t.glyphColors.buffer),e}}),O1e=(()=>{const t={};function e(l){let c=t[l];if(!c){const u=new k_(1,1,l,l),h=u.clone(),f=u.attributes,d=h.attributes,p=new ri,m=f.uv.count;for(let g=0;g<m;g++)d.position.array[g*3]*=-1,d.normal.array[g*3+2]*=-1;["position","normal","uv"].forEach(g=>{p.setAttribute(g,new ur([...f[g].array,...d[g].array],f[g].itemSize))}),p.setIndex([...u.index.array,...h.index.array.map(g=>g+m)]),p.translate(.5,.5,0),c=t[l]=p}return c}const n="aTroikaGlyphBounds",i="aTroikaGlyphIndex",r="aTroikaGlyphColor";class s extends S3{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new to,this.boundingBox=new di}computeBoundingSphere(){}computeBoundingBox(){}setSide(c){const u=this.getIndex().count;this.setDrawRange(c===Vy?u/2:0,c===Po?u:u/2)}set detail(c){if(c!==this._detail){this._detail=c,(typeof c!="number"||c<1)&&(c=1);let u=e(c);["position","normal","uv"].forEach(h=>{this.attributes[h]=u.attributes[h].clone()}),this.setIndex(u.getIndex().clone())}}get detail(){return this._detail}set curveRadius(c){c!==this._curveRadius&&(this._curveRadius=c,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(c,u,h,f,d){o(this,n,c,4),o(this,i,u,1),o(this,r,d,3),this._blockBounds=h,this._chunkedBounds=f,a(this,u.length),this._updateBounds()}_updateBounds(){const c=this._blockBounds;if(c){const{curveRadius:u,boundingBox:h}=this;if(u){const{PI:f,floor:d,min:p,max:m,sin:g,cos:_}=Math,y=f/2,x=f*2,E=Math.abs(u),w=c[0]/E,S=c[2]/E,b=d((w+y)/x)!==d((S+y)/x)?-E:p(g(w)*E,g(S)*E),M=d((w-y)/x)!==d((S-y)/x)?E:m(g(w)*E,g(S)*E),T=d((w+f)/x)!==d((S+f)/x)?E*2:m(E-_(w)*E,E-_(S)*E);h.min.set(b,c[1],u<0?-T:0),h.max.set(M,c[3],u<0?0:T)}else h.min.set(c[0],c[1],0),h.max.set(c[2],c[3],0);h.getBoundingSphere(this.boundingSphere)}}applyClipRect(c){let u=this.getAttribute(i).count,h=this._chunkedBounds;if(h)for(let f=h.length;f--;){u=h[f].end;let d=h[f].rect;if(d[1]<c.w&&d[3]>c.y&&d[0]<c.z&&d[2]>c.x)break}a(this,u)}}s.prototype.setAttribute||(s.prototype.setAttribute=function(l,c){return this.attributes[l]=c,this});function o(l,c,u,h){const f=l.getAttribute(c);u?f&&f.array.length===u.length?(f.array.set(u),f.needsUpdate=!0):(l.setAttribute(c,new C3(u,h)),delete l._maxInstanceCount,l.dispose()):f&&l.deleteAttribute(c)}function a(l,c){l[l.hasOwnProperty("instanceCount")?"instanceCount":"maxInstancedCount"]=c}return s})(),N1e=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaDistanceOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,G1e=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,z1e=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaDistanceOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaOutlineOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,Q1e=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function H1e(t){const e=_S(t,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new mt},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new dr(0,0,0,0)},uTroikaClipRect:{value:new dr(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new mt},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new xt},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new T3},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:N1e,vertexTransform:G1e,fragmentDefs:z1e,fragmentColorTransform:Q1e,customRewriter({vertexShader:n,fragmentShader:i}){let r=/\buniform\s+vec3\s+diffuse\b/;return r.test(i)&&(i=i.replace(r,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),r.test(n)||(n=n.replace(wz,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:n,fragmentShader:i}}});return e.transparent=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const V1e=(()=>{const t=new qa({color:16777215,side:Po,transparent:!0}),e=8421504,n=new Ze,i=new $,r=new $,s=[],o=new $,a="+x+y";function l(_){return Array.isArray(_)?_[0]:_}let c=()=>{const _=new rt(new k_(1,1),t);return c=()=>_,_},u=()=>{const _=new rt(new k_(1,1,32,1),t);return u=()=>_,_};const h={type:"syncstart"},f={type:"synccomplete"},d=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],p=d.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");class m extends rt{constructor(){const y=new O1e;super(y,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=e,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=a,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(y){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(y):(this._isSyncing=!0,this.dispatchEvent(h),Mz({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},x=>{this._isSyncing=!1,this._textRenderInfo=x,this.geometry.updateGlyphs(x.glyphBounds,x.glyphAtlasIndices,x.blockBounds,x.chunkedBounds,x.glyphColors);const E=this._queuedSyncs;E&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{E.forEach(w=>w&&w())})),this.dispatchEvent(f),y&&y()})))}onBeforeRender(y,x,E,w,S,b){this.sync(),S.isTroikaTextMaterial&&this._prepareForRender(S),S._hadOwnSide=S.hasOwnProperty("side"),this.geometry.setSide(S._actualSide=S.side),S.side=zm}onAfterRender(y,x,E,w,S,b){S._hadOwnSide?S.side=S._actualSide:delete S.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let y=this._derivedMaterial;const x=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=t.clone());if((!y||y.baseMaterial!==x)&&(y=this._derivedMaterial=H1e(x),x.addEventListener("dispose",function E(){x.removeEventListener("dispose",E),y.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let E=y._outlineMtl;return E||(E=y._outlineMtl=Object.create(y,{id:{value:y.id+.1}}),E.isTextOutlineMaterial=!0,E.depthWrite=!1,E.map=null,y.addEventListener("dispose",function w(){y.removeEventListener("dispose",w),E.dispose()})),[E,y]}else return y}set material(y){y&&y.isTroikaTextMaterial?(this._derivedMaterial=y,this._baseMaterial=y.baseMaterial):this._baseMaterial=y}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(y){this.geometry.detail=y}get curveRadius(){return this.geometry.curveRadius}set curveRadius(y){this.geometry.curveRadius=y}get customDepthMaterial(){return l(this.material).getDepthMaterial()}get customDistanceMaterial(){return l(this.material).getDistanceMaterial()}_prepareForRender(y){const x=y.isTextOutlineMaterial,E=y.uniforms,w=this.textRenderInfo;if(w){const{sdfTexture:M,blockBounds:T}=w;E.uTroikaSDFTexture.value=M,E.uTroikaSDFTextureSize.value.set(M.image.width,M.image.height),E.uTroikaSDFGlyphSize.value=w.sdfGlyphSize,E.uTroikaSDFExponent.value=w.sdfExponent,E.uTroikaTotalBounds.value.fromArray(T),E.uTroikaUseGlyphColors.value=!x&&!!w.glyphColors;let B=0,L=0,F=0,U,k,X,Y=0,Z=0;if(x){let{outlineWidth:O,outlineOffsetX:z,outlineOffsetY:Q,outlineBlur:H,outlineOpacity:J}=this;B=this._parsePercent(O)||0,L=Math.max(0,this._parsePercent(H)||0),U=J,Y=this._parsePercent(z)||0,Z=this._parsePercent(Q)||0}else F=Math.max(0,this._parsePercent(this.strokeWidth)||0),F&&(X=this.strokeColor,E.uTroikaStrokeColor.value.set(X==null?e:X),k=this.strokeOpacity,k==null&&(k=1)),U=this.fillOpacity;E.uTroikaDistanceOffset.value=B,E.uTroikaPositionOffset.value.set(Y,Z),E.uTroikaBlurRadius.value=L,E.uTroikaStrokeWidth.value=F,E.uTroikaStrokeOpacity.value=k,E.uTroikaFillOpacity.value=U==null?1:U,E.uTroikaCurveRadius.value=this.curveRadius||0;let G=this.clipRect;if(G&&Array.isArray(G)&&G.length===4)E.uTroikaClipRect.value.fromArray(G);else{const O=(this.fontSize||.1)*100;E.uTroikaClipRect.value.set(T[0]-O,T[1]-O,T[2]+O,T[3]+O)}this.geometry.applyClipRect(E.uTroikaClipRect.value)}E.uTroikaSDFDebug.value=!!this.debugSDF,y.polygonOffset=!!this.depthOffset,y.polygonOffsetFactor=y.polygonOffsetUnits=this.depthOffset||0;const S=x?this.outlineColor||0:this.color;if(S==null)delete y.color;else{const M=y.hasOwnProperty("color")?y.color:y.color=new xt;(S!==M._input||typeof S=="object")&&M.set(M._input=S)}let b=this.orientation||a;if(b!==y._orientation){let M=E.uTroikaOrient.value;b=b.replace(/[^-+xyz]/g,"");let T=b!==a&&b.match(/^([-+])([xyz])([-+])([xyz])$/);if(T){let[,B,L,F,U]=T;i.set(0,0,0)[L]=B==="-"?1:-1,r.set(0,0,0)[U]=F==="-"?-1:1,n.lookAt(o,i.cross(r),r),M.setFromMatrix4(n)}else M.identity();y._orientation=b}}_parsePercent(y){if(typeof y=="string"){let x=y.match(/^(-?[\d.]+)%$/),E=x?parseFloat(x[1]):NaN;y=(isNaN(E)?0:E/100)*this.fontSize}return y}localPositionToTextCoords(y,x=new mt){x.copy(y);const E=this.curveRadius;return E&&(x.x=Math.atan2(y.x,Math.abs(E)-Math.abs(y.z))*Math.abs(E)),x}worldPositionToTextCoords(y,x=new mt){return i.copy(y),this.localPositionToTextCoords(this.worldToLocal(i),x)}raycast(y,x){const{textRenderInfo:E,curveRadius:w}=this;if(E){const S=E.blockBounds,b=w?u():c(),M=b.geometry,{position:T,uv:B}=M.attributes;for(let L=0;L<B.count;L++){let F=S[0]+B.getX(L)*(S[2]-S[0]);const U=S[1]+B.getY(L)*(S[3]-S[1]);let k=0;w&&(k=w-Math.cos(F/w)*w,F=Math.sin(F/w)*w),T.setXYZ(L,F,U,k)}M.boundingSphere=this.geometry.boundingSphere,M.boundingBox=this.geometry.boundingBox,b.matrixWorld=this.matrixWorld,b.material.side=this.material.side,s.length=0,b.raycast(y,s);for(let L=0;L<s.length;L++)s[L].object=this,x.push(s[L])}}copy(y){const x=this.geometry;return super.copy(y),this.geometry=x,p.forEach(E=>{this[E]=y[E]}),this}clone(){return new this.constructor().copy(this)}}d.forEach(_=>{const y="_private_"+_;Object.defineProperty(m.prototype,_,{get(){return this[y]},set(x){x!==this[y]&&(this[y]=x,this._needsSync=!0)}})});let g=!1;return Object.defineProperty(m.prototype,"anchor",{get(){return this._deprecated_anchor},set(_){this._deprecated_anchor=_,g||(console.warn("TextMesh: `anchor` has been deprecated; use `anchorX` and `anchorY` instead."),g=!0),Array.isArray(_)?(this.anchorX=`${(+_[0]||0)*100}%`,this.anchorY=`${(+_[1]||0)*100}%`):this.anchorX=this.anchorY=0}}),m})(),W1e=R.exports.forwardRef(({anchorX:t="center",anchorY:e="middle",font:n,children:i,characters:r,onSync:s,...o},a)=>{const l=Te(({invalidate:f})=>f),[c]=R.exports.useState(()=>new V1e),[u,h]=R.exports.useMemo(()=>{const f=[];let d="";return R.exports.Children.forEach(i,p=>{typeof p=="string"||typeof p=="number"?d+=p:f.push(p)}),[f,d]},[i]);return Mh(()=>new Promise(f=>D1e({font:n,characters:r},f)),["troika-text",n,r]),R.exports.useLayoutEffect(()=>void c.sync(()=>{l(),s&&s(c)})),R.exports.useEffect(()=>()=>c.dispose(),[c]),se("primitive",{object:c,ref:a,font:n,text:h,anchorX:t,anchorY:e,...o,children:u})}),j1e=["string","number"],X1e=t=>{let e="";const n=[];return R.exports.Children.forEach(t,i=>{j1e.includes(typeof i)?e+=i+"":n.push(i)}),[e,...n]},Y1e=R.exports.forwardRef(({font:t,letterSpacing:e=0,lineHeight:n=1,size:i=1,height:r=.2,bevelThickness:s=.1,bevelSize:o=.01,bevelEnabled:a=!1,bevelOffset:l=0,bevelSegments:c=4,curveSegments:u=8,children:h,...f},d)=>{R.exports.useMemo(()=>Dr({RenamedTextGeometry:ome}),[]);const p=Mh(async()=>{let x=typeof t=="string"?await(await fetch(t)).json():t;return new Tme().parse(x)},[t]),m=R.exports.useMemo(()=>({font:p,size:i,height:r,bevelThickness:s,bevelSize:o,bevelEnabled:a,bevelSegments:c,bevelOffset:l,curveSegments:u,letterSpacing:e,lineHeight:n}),[p,i,r,s,o,a,l,u,e,n]),[g,..._]=R.exports.useMemo(()=>X1e(h),[h]),y=R.exports.useMemo(()=>[g,m],[g,m]);return vt("mesh",{...f,ref:d,children:[se("renamedTextGeometry",{args:y}),_]})}),q1e=()=>{try{var t=document.createElement("canvas");return!!(window.WebGL2RenderingContext&&t.getContext("webgl2"))}catch{return!1}},J1e=R.exports.forwardRef(({children:t,multisamping:e=8,renderIndex:n=1,disableRender:i,disableGamma:r,disableRenderPass:s,depthBuffer:o=!0,stencilBuffer:a=!1,anisotropy:l=1,encoding:c,type:u,...h},f)=>{R.exports.useMemo(()=>Dr({EffectComposer:Ipe,RenderPass:Tpe,ShaderPass:hS}),[]);const d=R.exports.useRef(),{scene:p,camera:m,gl:g,size:_,viewport:y}=Te(),[x]=R.exports.useState(()=>{const w=new gs(_.width,_.height,{type:u||br,format:us,encoding:c||g.outputEncoding,depthBuffer:o,stencilBuffer:a,anisotropy:l});return w.samples=e,w});R.exports.useEffect(()=>{var w,S;(w=d.current)==null||w.setSize(_.width,_.height),(S=d.current)==null||S.setPixelRatio(y.dpr)},[g,_,y.dpr]),Ct(()=>{var w;i||(w=d.current)==null||w.render()},n);const E=[];return s||E.push(se("renderPass",{attach:`passes-${E.length}`,args:[p,m]},"renderpass")),r||E.push(se("shaderPass",{attach:`passes-${E.length}`,args:[ame]},"gammapass")),R.exports.Children.forEach(t,w=>{w&&E.push(R.exports.cloneElement(w,{key:E.length,attach:`passes-${E.length}`}))}),se("effectComposer",{ref:Hn([f,d]),args:[g,x],...h,children:E})});function K1e({stops:t,colors:e,size:n=1024,...i}){const r=Te(o=>o.gl),s=R.exports.useMemo(()=>{const o=document.createElement("canvas"),a=o.getContext("2d");o.width=16,o.height=n;const l=a.createLinearGradient(0,0,0,n);let c=t.length;for(;c--;)l.addColorStop(t[c],e[c]);a.fillStyle=l,a.fillRect(0,0,16,n);const u=new Mc(o);return u.needsUpdate=!0,u},[t]);return R.exports.useEffect(()=>()=>void s.dispose(),[s]),se("primitive",{object:s,attach:"map",encoding:r.outputEncoding,...i})}function a0(t,e,n,i){const r=class extends As{constructor(o={}){const a=Object.entries(t);super({uniforms:a.reduce((l,[c,u])=>{const h=Eh.clone({[c]:{value:u}});return{...l,...h}},{}),vertexShader:e,fragmentShader:n,...o}),this.key="",a.forEach(([l])=>Object.defineProperty(this,l,{get:()=>this.uniforms[l].value,set:c=>this.uniforms[l].value=c})),i&&i(this)}};return r.key=ct.generateUUID(),r}const Km=t=>t===Object(t)&&!Array.isArray(t)&&typeof t!="function";function bh(t,e){const n=Te(r=>r.gl),i=Ci(t0,Km(t)?Object.values(t):t);if(R.exports.useLayoutEffect(()=>{e==null||e(i)},[e]),R.exports.useEffect(()=>{(Array.isArray(i)?i:[i]).forEach(n.initTexture)},[n,i]),Km(t)){const r=Object.keys(t),s={};return r.forEach(o=>Object.assign(s,{[o]:i[r.indexOf(o)]})),s}else return i}bh.preload=t=>Ci.preload(t0,t);bh.clear=t=>Ci.clear(t0,t);const Z1e=a0({color:new xt("white"),scale:[1,1],imageBounds:[1,1],map:null,zoom:1,grayscale:0,opacity:1},`
  varying vec2 vUv;
  void main() {
    gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);
    vUv = uv;
  }
`,`
  // mostly from https://gist.github.com/statico/df64c5d167362ecf7b34fca0b1459a44
  varying vec2 vUv;
  uniform vec2 scale;
  uniform vec2 imageBounds;
  uniform vec3 color;
  uniform sampler2D map;
  uniform float zoom;
  uniform float grayscale;
  uniform float opacity;
  const vec3 luma = vec3(.299, 0.587, 0.114);
  vec4 toGrayscale(vec4 color, float intensity) {
    return vec4(mix(color.rgb, vec3(dot(color.rgb, luma)), intensity), color.a);
  }
  vec2 aspect(vec2 size) {
    return size / min(size.x, size.y);
  }
  void main() {
    vec2 s = aspect(scale);
    vec2 i = aspect(imageBounds);
    float rs = s.x / s.y;
    float ri = i.x / i.y;
    vec2 new = rs < ri ? vec2(i.x * s.y / i.y, s.y) : vec2(s.x, i.y * s.x / i.x);
    vec2 offset = (rs < ri ? vec2((new.x - s.x) / 2.0, 0.0) : vec2(0.0, (new.y - s.y) / 2.0)) / new;
    vec2 uv = vUv * s / new + offset;
    vec2 zUv = (uv - vec2(0.5, 0.5)) / zoom + vec2(0.5, 0.5);
    gl_FragColor = toGrayscale(texture2D(map, zUv) * vec4(color, opacity), grayscale);
    
    #include <tonemapping_fragment>
    #include <encodings_fragment>
  }
`),bz=R.exports.forwardRef(({children:t,color:e,segments:n=1,scale:i=1,zoom:r=1,grayscale:s=0,opacity:o=1,texture:a,toneMapped:l,transparent:c,...u},h)=>{Dr({ImageMaterial:Z1e});const f=Te(m=>m.gl),d=Array.isArray(i)?[i[0],i[1]]:[i,i],p=[a.image.width,a.image.height];return vt("mesh",{ref:h,scale:Array.isArray(i)?[...i,1]:i,...u,children:[se("planeGeometry",{args:[1,1,n,n]}),se("imageMaterial",{color:e,map:a,"map-encoding":f.outputEncoding,zoom:r,grayscale:s,opacity:o,scale:d,imageBounds:p,toneMapped:l,transparent:c}),t]})}),$1e=R.exports.forwardRef(({url:t,...e},n)=>{const i=bh(t);return se(bz,{...e,texture:i,ref:n})}),eAe=R.exports.forwardRef(({url:t,...e},n)=>se(bz,{...e,ref:n})),tAe=R.exports.forwardRef((t,e)=>{if(t.url)return se($1e,{...t,ref:e});if(t.texture)return se(eAe,{...t,ref:e});throw new Error("<Image /> requires a url or texture")});function nAe({userData:t,children:e,geometry:n,threshold:i=15,color:r="black",...s}){const o=R.exports.useRef(null);return R.exports.useLayoutEffect(()=>{const a=o.current.parent;if(a){const l=n||a.geometry;(l!==o.current.userData.currentGeom||i!==o.current.userData.currentThreshold)&&(o.current.userData.currentGeom=l,o.current.userData.currentThreshold=i,o.current.geometry=new E6(l,i))}}),se("lineSegments",{ref:o,raycast:()=>null,...s,children:e||se("lineBasicMaterial",{color:r})})}function iAe(t,e){const n=new Ze,i=new xh,r=new to,s=new $,o=this.geometry;if(r.copy(o.boundingSphere),r.applyMatrix4(this.matrixWorld),t.ray.intersectSphere(r,s)===!1)return;n.copy(this.matrixWorld).invert(),i.copy(t.ray).applyMatrix4(n);const a=new $,l=new $,c=new $,u=this instanceof I3?2:1,h=o.index,f=o.attributes;if(h!==null){const d=h.array,p=f.position.array,m=f.width.array;for(let g=0,_=d.length-1;g<_;g+=u){const y=d[g],x=d[g+1];a.fromArray(p,3*y),l.fromArray(p,3*x);const E=m[Math.floor(g/3)]!=null?m[Math.floor(g/3)]:1,w=t.params.Line.threshold+this.material.lineWidth*E/2,S=w*w;if(i.distanceSqToSegment(a,l,s,c)>S)continue;s.applyMatrix4(this.matrixWorld);const b=t.ray.origin.distanceTo(s);b<t.near||b>t.far||(e.push({distance:b,point:c.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}),g=_)}}}function Cw(t,e,n,i,r){let s;if(t=t.subarray||t.slice?t:t.buffer,n=n.subarray||n.slice?n:n.buffer,t=e?t.subarray?t.subarray(e,r&&e+r):t.slice(e,r&&e+r):t,n.set)n.set(t,i);else for(s=0;s<t.length;s++)n[s+i]=t[s];return n}class Iz extends ri{constructor(){super(),this.type="MeshLine",this.isMeshLine=!0,this.positions=[],this.raycast=iAe,this.previous=[],this.next=[],this.side=[],this.width=[],this.indices_array=[],this.uvs=[],this.counters=[],this._points=[],this._geom=null,this.widthCallback=null,this.matrixWorld=new Ze,Object.defineProperties(this,{geometry:{enumerable:!0,get(){return this}},geom:{enumerable:!0,get(){return this._geom},set(e){this.setGeometry(e,this.widthCallback)}},points:{enumerable:!0,get(){return this._points},set(e){this.setPoints(e,this.widthCallback)}}})}setMatrixWorld(e){this.matrixWorld=e}setGeometry(e,n){this._geometry=e,e instanceof ri?this.setPoints(e.getAttribute("position").array,n):this.setPoints(e,n)}setPoints(e,n){if(e instanceof Float32Array||e instanceof Array){if(this._points=e,this.widthCallback=n,this.positions=[],this.counters=[],e.length&&e[0]instanceof $)for(var i=0;i<e.length;i++){const s=e[i];var r=i/e.length;this.positions.push(s.x,s.y,s.z),this.positions.push(s.x,s.y,s.z),this.counters.push(r),this.counters.push(r)}else for(i=0;i<e.length;i+=3)r=i/e.length,this.positions.push(e[i],e[i+1],e[i+2]),this.positions.push(e[i],e[i+1],e[i+2]),this.counters.push(r),this.counters.push(r);this.process()}else console.error("ERROR: The BufferArray of points is not instancied correctly.")}compareV3(e,n){const i=6*e,r=6*n;return this.positions[i]===this.positions[r]&&this.positions[i+1]===this.positions[r+1]&&this.positions[i+2]===this.positions[r+2]}copyV3(e){const n=6*e;return[this.positions[n],this.positions[n+1],this.positions[n+2]]}process(){const e=this.positions.length/6;let n,i;this.previous=[],this.next=[],this.side=[],this.width=[],this.indices_array=[],this.uvs=[],i=this.compareV3(0,e-1)?this.copyV3(e-2):this.copyV3(0),this.previous.push(i[0],i[1],i[2]),this.previous.push(i[0],i[1],i[2]);for(let r=0;r<e;r++){if(this.side.push(1),this.side.push(-1),n=this.widthCallback?this.widthCallback(r/(e-1)):1,this.width.push(n),this.width.push(n),this.uvs.push(r/(e-1),0),this.uvs.push(r/(e-1),1),r<e-1){i=this.copyV3(r),this.previous.push(i[0],i[1],i[2]),this.previous.push(i[0],i[1],i[2]);const s=2*r;this.indices_array.push(s,s+1,s+2),this.indices_array.push(s+2,s+1,s+3)}r>0&&(i=this.copyV3(r),this.next.push(i[0],i[1],i[2]),this.next.push(i[0],i[1],i[2]))}i=this.compareV3(e-1,0)?this.copyV3(1):this.copyV3(e-1),this.next.push(i[0],i[1],i[2]),this.next.push(i[0],i[1],i[2]),this._attributes&&this._attributes.position.count===this.positions.length?(this._attributes.position.copyArray(new Float32Array(this.positions)),this._attributes.position.needsUpdate=!0,this._attributes.previous.copyArray(new Float32Array(this.previous)),this._attributes.previous.needsUpdate=!0,this._attributes.next.copyArray(new Float32Array(this.next)),this._attributes.next.needsUpdate=!0,this._attributes.side.copyArray(new Float32Array(this.side)),this._attributes.side.needsUpdate=!0,this._attributes.width.copyArray(new Float32Array(this.width)),this._attributes.width.needsUpdate=!0,this._attributes.uv.copyArray(new Float32Array(this.uvs)),this._attributes.uv.needsUpdate=!0,this._attributes.index.copyArray(new Uint16Array(this.indices_array)),this._attributes.index.needsUpdate=!0):this._attributes={position:new On(new Float32Array(this.positions),3),previous:new On(new Float32Array(this.previous),3),next:new On(new Float32Array(this.next),3),side:new On(new Float32Array(this.side),1),width:new On(new Float32Array(this.width),1),uv:new On(new Float32Array(this.uvs),2),index:new On(new Uint16Array(this.indices_array),1),counters:new On(new Float32Array(this.counters),1)},this.setAttribute("position",this._attributes.position),this.setAttribute("previous",this._attributes.previous),this.setAttribute("next",this._attributes.next),this.setAttribute("side",this._attributes.side),this.setAttribute("width",this._attributes.width),this.setAttribute("uv",this._attributes.uv),this.setAttribute("counters",this._attributes.counters),this.setIndex(this._attributes.index),this.computeBoundingSphere(),this.computeBoundingBox()}advance({x:e,y:n,z:i}){const r=this._attributes.position.array,s=this._attributes.previous.array,o=this._attributes.next.array,a=r.length;Cw(r,0,s,0,a),Cw(r,6,r,0,a-6),r[a-6]=e,r[a-5]=n,r[a-4]=i,r[a-3]=e,r[a-2]=n,r[a-1]=i,Cw(r,6,o,0,a-6),o[a-6]=e,o[a-5]=n,o[a-4]=i,o[a-3]=e,o[a-2]=n,o[a-1]=i,this._attributes.position.needsUpdate=!0,this._attributes.previous.needsUpdate=!0,this._attributes.next.needsUpdate=!0}}Ri.meshline_vert=["","#include <common>","",Ri.logdepthbuf_pars_vertex,Ri.fog_pars_vertex,"","attribute vec3 previous;","attribute vec3 next;","attribute float side;","attribute float width;","attribute float counters;","","uniform vec2 resolution;","uniform float lineWidth;","uniform vec3 color;","uniform float opacity;","uniform float sizeAttenuation;","","varying vec2 vUV;","varying vec4 vColor;","varying float vCounters;","","vec2 fix( vec4 i, float aspect ) {","","    vec2 res = i.xy / i.w;","    res.x *= aspect;","	 vCounters = counters;","    return res;","","}","","void main() {","","    float aspect = resolution.x / resolution.y;","","    vColor = vec4( color, opacity );","    vUV = uv;","","    mat4 m = projectionMatrix * modelViewMatrix;","    vec4 finalPosition = m * vec4( position, 1.0 );","    vec4 prevPos = m * vec4( previous, 1.0 );","    vec4 nextPos = m * vec4( next, 1.0 );","","    vec2 currentP = fix( finalPosition, aspect );","    vec2 prevP = fix( prevPos, aspect );","    vec2 nextP = fix( nextPos, aspect );","","    float w = lineWidth * width;","","    vec2 dir;","    if( nextP == currentP ) dir = normalize( currentP - prevP );","    else if( prevP == currentP ) dir = normalize( nextP - currentP );","    else {","        vec2 dir1 = normalize( currentP - prevP );","        vec2 dir2 = normalize( nextP - currentP );","        dir = normalize( dir1 + dir2 );","","        vec2 perp = vec2( -dir1.y, dir1.x );","        vec2 miter = vec2( -dir.y, dir.x );","        //w = clamp( w / dot( miter, perp ), 0., 4. * lineWidth * width );","","    }","","    //vec2 normal = ( cross( vec3( dir, 0. ), vec3( 0., 0., 1. ) ) ).xy;","    vec4 normal = vec4( -dir.y, dir.x, 0., 1. );","    normal.xy *= .5 * w;","    normal *= projectionMatrix;","    if( sizeAttenuation == 0. ) {","        normal.xy *= finalPosition.w;","        normal.xy /= ( vec4( resolution, 0., 1. ) * projectionMatrix ).xy;","    }","","    finalPosition.xy += normal.xy * side;","","    gl_Position = finalPosition;","",Ri.logdepthbuf_vertex,Ri.fog_vertex&&"    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );",Ri.fog_vertex,"}"].join(`
`),Ri.meshline_frag=["",Ri.fog_pars_fragment,Ri.logdepthbuf_pars_fragment,"","uniform sampler2D map;","uniform sampler2D alphaMap;","uniform float useMap;","uniform float useAlphaMap;","uniform float useDash;","uniform float dashArray;","uniform float dashOffset;","uniform float dashRatio;","uniform float visibility;","uniform float alphaTest;","uniform vec2 repeat;","","varying vec2 vUV;","varying vec4 vColor;","varying float vCounters;","","void main() {","",Ri.logdepthbuf_fragment,"","    vec4 c = vColor;","    if( useMap == 1. ) c *= texture2D( map, vUV * repeat );","    if( useAlphaMap == 1. ) c.a *= texture2D( alphaMap, vUV * repeat ).a;","    if( c.a < alphaTest ) discard;","    if( useDash == 1. ){","        c.a *= ceil(mod(vCounters + dashOffset, dashArray) - (dashArray * dashRatio));","    }","    gl_FragColor = c;","    gl_FragColor.a *= step(vCounters, visibility);","",Ri.fog_fragment,"}"].join(`
`);class Tz extends As{constructor(e){super({uniforms:Object.assign({},ld.fog,{lineWidth:{value:1},map:{value:null},useMap:{value:0},alphaMap:{value:null},useAlphaMap:{value:0},color:{value:new xt(16777215)},opacity:{value:1},resolution:{value:new mt(1,1)},sizeAttenuation:{value:1},dashArray:{value:0},dashOffset:{value:0},dashRatio:{value:.5},useDash:{value:0},visibility:{value:1},alphaTest:{value:0},repeat:{value:new mt(1,1)}}),vertexShader:Ri.meshline_vert,fragmentShader:Ri.meshline_frag}),this.type="MeshLineMaterial",Object.defineProperties(this,{lineWidth:{enumerable:!0,get(){return this.uniforms.lineWidth.value},set(n){this.uniforms.lineWidth.value=n}},map:{enumerable:!0,get(){return this.uniforms.map.value},set(n){this.uniforms.map.value=n}},useMap:{enumerable:!0,get(){return this.uniforms.useMap.value},set(n){this.uniforms.useMap.value=n}},alphaMap:{enumerable:!0,get(){return this.uniforms.alphaMap.value},set(n){this.uniforms.alphaMap.value=n}},useAlphaMap:{enumerable:!0,get(){return this.uniforms.useAlphaMap.value},set(n){this.uniforms.useAlphaMap.value=n}},color:{enumerable:!0,get(){return this.uniforms.color.value},set(n){this.uniforms.color.value=n}},opacity:{enumerable:!0,get(){return this.uniforms.opacity.value},set(n){this.uniforms.opacity.value=n}},resolution:{enumerable:!0,get(){return this.uniforms.resolution.value},set(n){this.uniforms.resolution.value.copy(n)}},sizeAttenuation:{enumerable:!0,get(){return this.uniforms.sizeAttenuation.value},set(n){this.uniforms.sizeAttenuation.value=n}},dashArray:{enumerable:!0,get(){return this.uniforms.dashArray.value},set(n){this.uniforms.dashArray.value=n,this.useDash=n!==0?1:0}},dashOffset:{enumerable:!0,get(){return this.uniforms.dashOffset.value},set(n){this.uniforms.dashOffset.value=n}},dashRatio:{enumerable:!0,get(){return this.uniforms.dashRatio.value},set(n){this.uniforms.dashRatio.value=n}},useDash:{enumerable:!0,get(){return this.uniforms.useDash.value},set(n){this.uniforms.useDash.value=n}},visibility:{enumerable:!0,get(){return this.uniforms.visibility.value},set(n){this.uniforms.visibility.value=n}},alphaTest:{enumerable:!0,get(){return this.uniforms.alphaTest.value},set(n){this.uniforms.alphaTest.value=n}},repeat:{enumerable:!0,get(){return this.uniforms.repeat.value},set(n){this.uniforms.repeat.value.copy(n)}}}),this.setValues(e)}copy(e){return super.copy(e),this.lineWidth=e.lineWidth,this.map=e.map,this.useMap=e.useMap,this.alphaMap=e.alphaMap,this.useAlphaMap=e.useAlphaMap,this.color.copy(e.color),this.opacity=e.opacity,this.resolution.copy(e.resolution),this.sizeAttenuation=e.sizeAttenuation,this.dashArray.copy(e.dashArray),this.dashOffset.copy(e.dashOffset),this.dashRatio.copy(e.dashRatio),this.useDash=e.useDash,this.visibility=e.visibility,this.alphaTest=e.alphaTest,this.repeat.copy(e.repeat),this}}const Bz={width:.2,length:1,decay:1,local:!1,stride:0,interval:1},rAe=(t,e=1)=>(t.set(t.subarray(e)),t.fill(-1/0,-e),t);function Rz(t,e){const{length:n,local:i,decay:r,interval:s,stride:o}={...Bz,...e},a=R.exports.useRef(),[l]=R.exports.useState(()=>new $);R.exports.useLayoutEffect(()=>{t&&(a.current=Float32Array.from({length:n*10*3},(h,f)=>t.position.getComponent(f%3)))},[n,t]);const c=R.exports.useRef(new $),u=R.exports.useRef(0);return Ct(()=>{if(!!t&&!!a.current){if(u.current===0){let h;i?h=t.position:(t.getWorldPosition(l),h=l);const f=1*r;for(let d=0;d<f;d++)h.distanceTo(c.current)<o||(rAe(a.current,3),a.current.set(h.toArray(),a.current.length-3));c.current.copy(h)}u.current++,u.current=u.current%s}}),a}const sAe=R.exports.forwardRef((t,e)=>{const{children:n}=t,{width:i,length:r,decay:s,local:o,stride:a,interval:l}={...Bz,...t},{color:c="hotpink",attenuation:u,target:h}=t,f=Te(x=>x.size),d=R.exports.useRef(null),[p,m]=R.exports.useState(null),g=Rz(p,{length:r,decay:s,local:o,stride:a,interval:l});R.exports.useEffect(()=>{const x=(h==null?void 0:h.current)||d.current.children.find(E=>E instanceof hr);x&&m(x)},[g,h]);const _=R.exports.useMemo(()=>new Iz,[]),y=R.exports.useMemo(()=>{var x;const E=new Tz({lineWidth:.1*i,color:c,sizeAttenuation:1,resolution:new mt(f.width,f.height)});let w;if(n)if(Array.isArray(n))w=n.find(S=>{const b=S;return typeof b.type=="string"&&b.type==="meshLineMaterial"});else{const S=n;typeof S.type=="string"&&S.type==="meshLineMaterial"&&(w=S)}return typeof((x=w)==null?void 0:x.props)=="object"&&E.setValues(w.props),E},[i,c,f,n]);return R.exports.useEffect(()=>{y.uniforms.resolution.value.set(f.width,f.height)},[f]),Ct(()=>{!g.current||_.setPoints(g.current,u)}),vt("group",{children:[se("mesh",{ref:e,geometry:_,material:y}),se("group",{ref:d,children:n})]})});function Pz(t,e=16,n,i,r){const[s,o]=R.exports.useState(()=>{const a=Array.from({length:e},()=>[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]).flat();return new C3(Float32Array.from(a),16)});return R.exports.useEffect(()=>{if(typeof t.current>"u")return;const a=new mpe(t.current);i&&a.setWeightAttribute(i),a.build();const l=new $,c=new $,u=new xt,h=new hr;t.current.updateMatrixWorld(!0);for(let f=0;f<e;f++)a.sample(l,c,u),typeof n=="function"?n({dummy:h,sampledMesh:t.current,position:l,normal:c,color:u},f):h.position.copy(l),h.updateMatrix(),r!=null&&r.current&&r.current.setMatrixAt(f,h.matrix),h.matrix.toArray(s.array,f*16);r!=null&&r.current&&(r.current.instanceMatrix.needsUpdate=!0),s.needsUpdate=!0,o(s.clone())},[t,r,i,e,n]),s}function oAe({children:t,weight:e,transform:n,instances:i,mesh:r,count:s=16,...o}){const a=R.exports.useRef(null),l=R.exports.useRef(null),c=R.exports.useRef(null);return R.exports.useEffect(()=>{var u,h;l.current=(u=i==null?void 0:i.current)!==null&&u!==void 0?u:a.current.children.find(f=>f.hasOwnProperty("instanceMatrix")),c.current=(h=r==null?void 0:r.current)!==null&&h!==void 0?h:a.current.children.find(f=>f.type==="Mesh")},[t,r==null?void 0:r.current,i==null?void 0:i.current]),Pz(c,s,n,e,l),se("group",{ref:a,...o,children:t})}const aAe=({compute:t,name:e,...n})=>{const[i]=R.exports.useState(()=>new On(new Float32Array(0),1)),r=R.exports.useRef(null);return R.exports.useLayoutEffect(()=>{if(r.current){var s;const o=(s=r.current.parent)!==null&&s!==void 0?s:r.current.__r3f.parent,a=t(o);r.current.copy(a)}},[t]),se("primitive",{ref:r,object:i,attach:`attributes-${e}`,...n})};var lAe=1/0,cAe=9007199254740991,uAe="[object Arguments]",hAe="[object Function]",fAe="[object GeneratorFunction]",dAe="[object Symbol]",pAe=typeof Qe=="object"&&Qe&&Qe.Object===Object&&Qe,mAe=typeof self=="object"&&self&&self.Object===Object&&self,AAe=pAe||mAe||Function("return this")();function gAe(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function vAe(t,e){for(var n=-1,i=t?t.length:0,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}function _Ae(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}var II=Object.prototype,yAe=II.hasOwnProperty,TI=II.toString,$4=AAe.Symbol,xAe=II.propertyIsEnumerable,eF=$4?$4.isConcatSpreadable:void 0,tF=Math.max;function Dz(t,e,n,i,r){var s=-1,o=t.length;for(n||(n=CAe),r||(r=[]);++s<o;){var a=t[s];e>0&&n(a)?e>1?Dz(a,e-1,n,i,r):_Ae(r,a):i||(r[r.length]=a)}return r}function EAe(t,e){return t=Object(t),wAe(t,e,function(n,i){return i in t})}function wAe(t,e,n){for(var i=-1,r=e.length,s={};++i<r;){var o=e[i],a=t[o];n(a,o)&&(s[o]=a)}return s}function MAe(t,e){return e=tF(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,r=tF(n.length-e,0),s=Array(r);++i<r;)s[i]=n[e+i];i=-1;for(var o=Array(e+1);++i<e;)o[i]=n[i];return o[e]=s,gAe(t,this,o)}}function CAe(t){return IAe(t)||bAe(t)||!!(eF&&t&&t[eF])}function SAe(t){if(typeof t=="string"||FAe(t))return t;var e=t+"";return e=="0"&&1/t==-lAe?"-0":e}function bAe(t){return BAe(t)&&yAe.call(t,"callee")&&(!xAe.call(t,"callee")||TI.call(t)==uAe)}var IAe=Array.isArray;function TAe(t){return t!=null&&PAe(t.length)&&!RAe(t)}function BAe(t){return Fz(t)&&TAe(t)}function RAe(t){var e=DAe(t)?TI.call(t):"";return e==hAe||e==fAe}function PAe(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=cAe}function DAe(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function Fz(t){return!!t&&typeof t=="object"}function FAe(t){return typeof t=="symbol"||Fz(t)&&TI.call(t)==dAe}var LAe=MAe(function(t,e){return t==null?{}:EAe(t,vAe(Dz(e,1),SAe))}),Lz=LAe;function nF(t,{keys:e=["near","far","color","distance","decay","penumbra","angle","intensity","skeleton","visible","castShadow","receiveShadow","morphTargetDictionary","morphTargetInfluences","name","geometry","material","position","rotation","scale","up","userData"],deep:n,inject:i,castShadow:r,receiveShadow:s}){let o=Lz(t,e);return n&&(o.geometry&&n!=="materialsOnly"&&(o.geometry=o.geometry.clone()),o.material&&n!=="geometriesOnly"&&(o.material=o.material.clone())),i&&(typeof i=="function"?o={...o,children:i(t)}:R.exports.isValidElement(i)?o={...o,children:i}:o={...o,...i}),t.type==="Mesh"&&(r&&(o.castShadow=!0),s&&(o.receiveShadow=!0)),o}const yS=R.exports.forwardRef(({object:t,children:e,deep:n,castShadow:i,receiveShadow:r,inject:s,keys:o,...a},l)=>{const c={keys:o,deep:n,inject:s,castShadow:i,receiveShadow:r};if(Array.isArray(t))return vt("group",{...a,ref:l,children:[t.map(d=>se(yS,{object:d,...c},d.uuid)),e]});const{children:u,...h}=nF(t,c),f=t.type[0].toLowerCase()+t.type.slice(1);return vt(f,{...h,...a,ref:l,children:[(t==null?void 0:t.children).map(d=>{let p={},m=d.type[0].toLowerCase()+d.type.slice(1);return m==="group"||m==="object3D"?(m=yS,p={object:d,...c}):p=nF(d,c),se(m,{...p},d.uuid)}),e,u]})}),BI=R.exports.createContext(null),kAe=R.exports.forwardRef(({resolution:t=28,maxPolyCount:e=1e4,enableUvs:n=!1,enableColors:i=!1,children:r,...s},o)=>{const a=R.exports.useRef(null),l=R.exports.useMemo(()=>new XG(t,null,n,i,e),[t,e,n,i]),c=R.exports.useMemo(()=>({getParent:()=>a}),[]);return Ct(()=>{l.reset()},-1),R.exports.createElement(R.exports.Fragment,null,R.exports.createElement("primitive",oh({object:l,ref:Hn([a,o])},s),R.exports.createElement(BI.Provider,{value:c},r)))}),UAe=R.exports.forwardRef(({strength:t=.5,subtract:e=12,color:n,...i},r)=>{const{getParent:s}=R.exports.useContext(BI),o=R.exports.useMemo(()=>s(),[s]),a=R.exports.useRef(),l=new $;return Ct(c=>{!o.current||!a.current||(a.current.getWorldPosition(l),o.current.addBall(.5+l.x*.5,.5+l.y*.5,.5+l.z*.5,t,e,n))}),se("group",{ref:Hn([r,a]),...i})}),OAe=R.exports.forwardRef(({planeType:t="x",strength:e=.5,subtract:n=12,...i},r)=>{const{getParent:s}=R.exports.useContext(BI),o=R.exports.useMemo(()=>s(),[s]),a=R.exports.useRef(),l=R.exports.useMemo(()=>t==="x"?"addPlaneX":t==="y"?"addPlaneY":"addPlaneZ",[t]);return Ct(()=>{!o.current||!a.current||o.current[l](e,n)}),se("group",{ref:Hn([r,a]),...i})});function NAe(t){return Array.isArray(t)}function Sw(t=[0,0,0]){return NAe(t)?t:t instanceof $||t instanceof xo?[t.x,t.y,t.z]:[t,t,t]}function GAe({debug:t,mesh:e,children:n,position:i,rotation:r,scale:s,...o}){const a=R.exports.useRef(null),l=R.exports.useRef(null);return R.exports.useLayoutEffect(()=>{const c=(e==null?void 0:e.current)||a.current.parent,u=a.current;if(!(c instanceof rt))throw new Error('Decal must have a Mesh as parent or specify its "mesh" prop');const h={position:new $,rotation:new xo,scale:new $(1,1,1)};if(c){hs(h,{position:i,scale:s});const f=c.matrixWorld.clone();if(c.matrixWorld.identity(),!r||typeof r=="number"){const d=new hr;d.position.copy(h.position),d.lookAt(c.position),typeof r=="number"&&d.rotateZ(r),hs(h,{rotation:d.rotation})}else hs(h,{rotation:r});return u.geometry=new sme(c,h.position,h.rotation,h.scale),l.current&&hs(l.current,h),c.matrixWorld=f,()=>{u.geometry.dispose()}}},[e,...Sw(i),...Sw(s),...Sw(r)]),vt("mesh",{ref:a,children:[n||se("meshStandardMaterial",{transparent:!0,polygonOffset:!0,polygonOffsetFactor:-10,...o}),t&&vt("mesh",{ref:l,children:[se("boxGeometry",{}),se("meshNormalMaterial",{wireframe:!0}),se("axesHelper",{})]})]})}const kz=R.exports.forwardRef(({makeDefault:t,...e},n)=>{const i=Te(({set:a})=>a),r=Te(({camera:a})=>a),s=Te(({size:a})=>a),o=R.exports.useRef(null);return R.exports.useLayoutEffect(()=>{e.manual||o.current.updateProjectionMatrix()},[s,e]),R.exports.useLayoutEffect(()=>{o.current.updateProjectionMatrix()}),R.exports.useLayoutEffect(()=>{if(t){const a=r;return i(()=>({camera:o.current})),()=>i(()=>({camera:a}))}},[o,t,i]),se("orthographicCamera",{left:s.width/-2,right:s.width/2,top:s.height/2,bottom:s.height/-2,ref:Hn([o,n]),...e})}),zAe=R.exports.forwardRef(({makeDefault:t,...e},n)=>{const i=Te(({set:a})=>a),r=Te(({camera:a})=>a),s=Te(({size:a})=>a),o=R.exports.useRef(null);return R.exports.useLayoutEffect(()=>{e.manual||(o.current.aspect=s.width/s.height)},[s,e]),R.exports.useLayoutEffect(()=>{o.current.updateProjectionMatrix()}),R.exports.useLayoutEffect(()=>{if(t){const a=r;return i(()=>({camera:o.current})),()=>i(()=>({camera:a}))}},[o,t,i]),se("perspectiveCamera",{ref:Hn([o,n]),...e})});function QAe({children:t,fog:e,frames:n=1/0,resolution:i=256,near:r=.1,far:s=1e3,envMap:o,...a}){const l=R.exports.useRef(),[c,u]=R.exports.useState(null),h=Te(({scene:_})=>_),f=Te(({gl:_})=>_),d=R.exports.useMemo(()=>{const _=new Jy(i);return _.texture.encoding=f.outputEncoding,_.texture.type=br,_},[i]);let p=0,m,g;return Ct(()=>{c&&l.current&&(n===1/0||p<n)&&(l.current.visible=!1,m=h.fog,g=h.background,h.background=o||g,h.fog=e||m,c.update(f,h),h.fog=m,h.background=g,l.current.visible=!0,p++)}),vt("group",{...a,children:[se("cubeCamera",{ref:u,args:[r,s,d]}),se("group",{ref:l,children:t(d.texture)})]})}const HAe=R.exports.forwardRef((t,e)=>{const{camera:n,onChange:i,makeDefault:r,...s}=t,o=Te(f=>f.camera),a=Te(f=>f.invalidate),l=Te(f=>f.get),c=Te(f=>f.set),u=n||o,[h]=R.exports.useState(()=>new xpe(u));return R.exports.useEffect(()=>{const f=d=>{a(),i&&i(d)};return h==null||h.addEventListener==null||h.addEventListener("change",f),()=>h==null||h.removeEventListener==null?void 0:h.removeEventListener("change",f)},[i,h,a]),Ct(()=>h==null?void 0:h.update(),-1),R.exports.useEffect(()=>{const f=h;return f==null||f.connect(),()=>f==null?void 0:f.dispose()},[h]),R.exports.useEffect(()=>{if(r){const f=l().controls;return c({controls:h}),()=>c({controls:f})}},[r,h]),h?se("primitive",{ref:e,object:h,...s}):null}),VAe=R.exports.forwardRef(({domElement:t,...e},n)=>{const{onChange:i,makeDefault:r,...s}=e,o=Te(p=>p.invalidate),a=Te(p=>p.camera),l=Te(p=>p.gl),c=Te(p=>p.events),u=Te(p=>p.get),h=Te(p=>p.set),f=t||c.connected||l.domElement,d=R.exports.useMemo(()=>new Cpe(a),[a]);return R.exports.useEffect(()=>(d.connect(f),()=>void d.dispose()),[f,d,o]),R.exports.useEffect(()=>{const p=m=>{o(),i&&i(m)};return d.addEventListener==null||d.addEventListener("change",p),()=>d.removeEventListener==null?void 0:d.removeEventListener("change",p)},[i,o]),R.exports.useEffect(()=>{if(r){const p=u().controls;return h({controls:d}),()=>h({controls:p})}},[r,d]),Ct((p,m)=>d.update(m)),se("primitive",{ref:n,object:d,args:[a,f],...s})}),WAe=R.exports.forwardRef((t={enableDamping:!0},e)=>{const{domElement:n,camera:i,makeDefault:r,onChange:s,onStart:o,onEnd:a,...l}=t,c=Te(y=>y.invalidate),u=Te(y=>y.camera),h=Te(y=>y.gl),f=Te(y=>y.events),d=Te(y=>y.set),p=Te(y=>y.get),m=n||f.connected||h.domElement,g=i||u,_=R.exports.useMemo(()=>new wpe(g),[g]);return R.exports.useEffect(()=>{_.connect(m);const y=x=>{c(),s&&s(x)};return _.addEventListener("change",y),o&&_.addEventListener("start",o),a&&_.addEventListener("end",a),()=>{_.dispose(),_.removeEventListener("change",y),o&&_.removeEventListener("start",o),a&&_.removeEventListener("end",a)}},[s,o,a,_,c,m]),R.exports.useEffect(()=>{if(r){const y=p().controls;return d({controls:_}),()=>d({controls:y})}},[r,_]),Ct(()=>_.update(),-1),se("primitive",{ref:e,object:_,enableDamping:!0,...l})}),jAe=R.exports.forwardRef(({makeDefault:t,camera:e,regress:n,domElement:i,enableDamping:r=!0,onChange:s,onStart:o,onEnd:a,...l},c)=>{const u=Te(E=>E.invalidate),h=Te(E=>E.camera),f=Te(E=>E.gl),d=Te(E=>E.events),p=Te(E=>E.set),m=Te(E=>E.get),g=Te(E=>E.performance),_=e||h,y=i||d.connected||f.domElement,x=R.exports.useMemo(()=>new YG(_),[_]);return Ct(()=>{x.enabled&&x.update()},-1),R.exports.useEffect(()=>(x.connect(y),()=>void x.dispose()),[y,n,x,u]),R.exports.useEffect(()=>{const E=w=>{u(),n&&g.regress(),s&&s(w)};return x.addEventListener("change",E),o&&x.addEventListener("start",o),a&&x.addEventListener("end",a),()=>{o&&x.removeEventListener("start",o),a&&x.removeEventListener("end",a),x.removeEventListener("change",E)}},[s,o,a,x,u]),R.exports.useEffect(()=>{if(t){const E=m().controls;return p({controls:x}),()=>p({controls:E})}},[t,x]),se("primitive",{ref:c,object:x,enableDamping:r,...l})}),XAe=R.exports.forwardRef(({makeDefault:t,camera:e,domElement:n,regress:i,onChange:r,onStart:s,onEnd:o,...a},l)=>{const{invalidate:c,camera:u,gl:h,events:f,set:d,get:p,performance:m,viewport:g}=Te(),_=e||u,y=n||f.connected||h.domElement,x=R.exports.useMemo(()=>new Epe(_),[_]);return Ct(()=>{x.enabled&&x.update()},-1),R.exports.useEffect(()=>(x.connect(y),()=>void x.dispose()),[y,i,x,c]),R.exports.useEffect(()=>{const E=w=>{c(),i&&m.regress(),r&&r(w)};return x.addEventListener("change",E),s&&x.addEventListener("start",s),o&&x.addEventListener("end",o),()=>{s&&x.removeEventListener("start",s),o&&x.removeEventListener("end",o),x.removeEventListener("change",E)}},[r,s,o,x,c]),R.exports.useEffect(()=>{x.handleResize()},[g]),R.exports.useEffect(()=>{if(t){const E=p().controls;return d({controls:x}),()=>d({controls:E})}},[t,x]),se("primitive",{ref:l,object:x,...a})}),YAe=R.exports.forwardRef(({camera:t,makeDefault:e,regress:n,domElement:i,onChange:r,onStart:s,onEnd:o,...a},l)=>{const c=Te(x=>x.invalidate),u=Te(x=>x.camera),h=Te(x=>x.gl),f=Te(x=>x.events),d=Te(x=>x.set),p=Te(x=>x.get),m=Te(x=>x.performance),g=t||u,_=i||f.connected||h.domElement,y=R.exports.useMemo(()=>new Mpe(g),[g]);return Ct(()=>{y.enabled&&y.update()},-1),R.exports.useEffect(()=>(y.connect(_),()=>void y.dispose()),[_,n,y,c]),R.exports.useEffect(()=>{const x=E=>{c(),n&&m.regress(),r&&r(E)};return y.addEventListener("change",x),s&&y.addEventListener("start",s),o&&y.addEventListener("end",o),()=>{y.removeEventListener("change",x),s&&y.removeEventListener("start",s),o&&y.removeEventListener("end",o)}},[r,s,o]),R.exports.useEffect(()=>{if(e){const x=p().controls;return d({controls:y}),()=>d({controls:x})}},[e,y]),se("primitive",{ref:l,object:y,...a})});var qAe=200,RI="__lodash_hash_undefined__",JAe=1/0,Uz=9007199254740991,KAe="[object Arguments]",ZAe="[object Function]",$Ae="[object GeneratorFunction]",ege="[object Symbol]",tge=/[\\^$.*+?()[\]{}|]/g,nge=/^\[object .+?Constructor\]$/,ige=/^(?:0|[1-9]\d*)$/,rge=typeof Qe=="object"&&Qe&&Qe.Object===Object&&Qe,sge=typeof self=="object"&&self&&self.Object===Object&&self,PI=rge||sge||Function("return this")();function oge(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function age(t,e){var n=t?t.length:0;return!!n&&uge(t,e,0)>-1}function lge(t,e,n){for(var i=-1,r=t?t.length:0;++i<r;)if(n(e,t[i]))return!0;return!1}function Oz(t,e){for(var n=-1,i=t?t.length:0,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}function DI(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}function cge(t,e,n,i){for(var r=t.length,s=n+(i?1:-1);i?s--:++s<r;)if(e(t[s],s,t))return s;return-1}function uge(t,e,n){if(e!==e)return cge(t,hge,n);for(var i=n-1,r=t.length;++i<r;)if(t[i]===e)return i;return-1}function hge(t){return t!==t}function fge(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function dge(t){return function(e){return t(e)}}function pge(t,e){return t.has(e)}function mge(t,e){return t==null?void 0:t[e]}function Age(t){var e=!1;if(t!=null&&typeof t.toString!="function")try{e=!!(t+"")}catch{}return e}function Nz(t,e){return function(n){return t(e(n))}}var gge=Array.prototype,vge=Function.prototype,Cx=Object.prototype,bw=PI["__core-js_shared__"],iF=function(){var t=/[^.]+$/.exec(bw&&bw.keys&&bw.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Gz=vge.toString,l0=Cx.hasOwnProperty,FI=Cx.toString,_ge=RegExp("^"+Gz.call(l0).replace(tge,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),rF=PI.Symbol,yge=Nz(Object.getPrototypeOf,Object),xge=Cx.propertyIsEnumerable,Ege=gge.splice,sF=rF?rF.isConcatSpreadable:void 0,xS=Object.getOwnPropertySymbols,oF=Math.max,wge=Qz(PI,"Map"),Zm=Qz(Object,"create");function ch(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Mge(){this.__data__=Zm?Zm(null):{}}function Cge(t){return this.has(t)&&delete this.__data__[t]}function Sge(t){var e=this.__data__;if(Zm){var n=e[t];return n===RI?void 0:n}return l0.call(e,t)?e[t]:void 0}function bge(t){var e=this.__data__;return Zm?e[t]!==void 0:l0.call(e,t)}function Ige(t,e){var n=this.__data__;return n[t]=Zm&&e===void 0?RI:e,this}ch.prototype.clear=Mge;ch.prototype.delete=Cge;ch.prototype.get=Sge;ch.prototype.has=bge;ch.prototype.set=Ige;function c0(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Tge(){this.__data__=[]}function Bge(t){var e=this.__data__,n=Sx(e,t);if(n<0)return!1;var i=e.length-1;return n==i?e.pop():Ege.call(e,n,1),!0}function Rge(t){var e=this.__data__,n=Sx(e,t);return n<0?void 0:e[n][1]}function Pge(t){return Sx(this.__data__,t)>-1}function Dge(t,e){var n=this.__data__,i=Sx(n,t);return i<0?n.push([t,e]):n[i][1]=e,this}c0.prototype.clear=Tge;c0.prototype.delete=Bge;c0.prototype.get=Rge;c0.prototype.has=Pge;c0.prototype.set=Dge;function u0(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Fge(){this.__data__={hash:new ch,map:new(wge||c0),string:new ch}}function Lge(t){return bx(this,t).delete(t)}function kge(t){return bx(this,t).get(t)}function Uge(t){return bx(this,t).has(t)}function Oge(t,e){return bx(this,t).set(t,e),this}u0.prototype.clear=Fge;u0.prototype.delete=Lge;u0.prototype.get=kge;u0.prototype.has=Uge;u0.prototype.set=Oge;function Y_(t){var e=-1,n=t?t.length:0;for(this.__data__=new u0;++e<n;)this.add(t[e])}function Nge(t){return this.__data__.set(t,RI),this}function Gge(t){return this.__data__.has(t)}Y_.prototype.add=Y_.prototype.push=Nge;Y_.prototype.has=Gge;function zge(t,e){var n=LI(t)||Hz(t)?fge(t.length,String):[],i=n.length,r=!!i;for(var s in t)(e||l0.call(t,s))&&!(r&&(s=="length"||$ge(s,i)))&&n.push(s);return n}function Sx(t,e){for(var n=t.length;n--;)if(ove(t[n][0],e))return n;return-1}function Qge(t,e,n,i){var r=-1,s=age,o=!0,a=t.length,l=[],c=e.length;if(!a)return l;n&&(e=Oz(e,dge(n))),i?(s=lge,o=!1):e.length>=qAe&&(s=pge,o=!1,e=new Y_(e));e:for(;++r<a;){var u=t[r],h=n?n(u):u;if(u=i||u!==0?u:0,o&&h===h){for(var f=c;f--;)if(e[f]===h)continue e;l.push(u)}else s(e,h,i)||l.push(u)}return l}function zz(t,e,n,i,r){var s=-1,o=t.length;for(n||(n=Zge),r||(r=[]);++s<o;){var a=t[s];e>0&&n(a)?e>1?zz(a,e-1,n,i,r):DI(r,a):i||(r[r.length]=a)}return r}function Hge(t,e,n){var i=e(t);return LI(t)?i:DI(i,n(t))}function Vge(t){if(!kI(t)||tve(t))return!1;var e=Wz(t)||Age(t)?_ge:nge;return e.test(sve(t))}function Wge(t){if(!kI(t))return ive(t);var e=nve(t),n=[];for(var i in t)i=="constructor"&&(e||!l0.call(t,i))||n.push(i);return n}function jge(t,e){return t=Object(t),Xge(t,e,function(n,i){return i in t})}function Xge(t,e,n){for(var i=-1,r=e.length,s={};++i<r;){var o=e[i],a=t[o];n(a,o)&&(s[o]=a)}return s}function Yge(t,e){return e=oF(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,r=oF(n.length-e,0),s=Array(r);++i<r;)s[i]=n[e+i];i=-1;for(var o=Array(e+1);++i<e;)o[i]=n[i];return o[e]=s,oge(t,this,o)}}function qge(t){return Hge(t,uve,Kge)}function bx(t,e){var n=t.__data__;return eve(e)?n[typeof e=="string"?"string":"hash"]:n.map}function Qz(t,e){var n=mge(t,e);return Vge(n)?n:void 0}var Jge=xS?Nz(xS,Object):Xz,Kge=xS?function(t){for(var e=[];t;)DI(e,Jge(t)),t=yge(t);return e}:Xz;function Zge(t){return LI(t)||Hz(t)||!!(sF&&t&&t[sF])}function $ge(t,e){return e=e==null?Uz:e,!!e&&(typeof t=="number"||ige.test(t))&&t>-1&&t%1==0&&t<e}function eve(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function tve(t){return!!iF&&iF in t}function nve(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||Cx;return t===n}function ive(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}function rve(t){if(typeof t=="string"||cve(t))return t;var e=t+"";return e=="0"&&1/t==-JAe?"-0":e}function sve(t){if(t!=null){try{return Gz.call(t)}catch{}try{return t+""}catch{}}return""}function ove(t,e){return t===e||t!==t&&e!==e}function Hz(t){return ave(t)&&l0.call(t,"callee")&&(!xge.call(t,"callee")||FI.call(t)==KAe)}var LI=Array.isArray;function Vz(t){return t!=null&&lve(t.length)&&!Wz(t)}function ave(t){return jz(t)&&Vz(t)}function Wz(t){var e=kI(t)?FI.call(t):"";return e==ZAe||e==$Ae}function lve(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Uz}function kI(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function jz(t){return!!t&&typeof t=="object"}function cve(t){return typeof t=="symbol"||jz(t)&&FI.call(t)==ege}function uve(t){return Vz(t)?zge(t,!0):Wge(t)}var hve=Yge(function(t,e){return t==null?{}:(e=Oz(zz(e,1),rve),jge(t,Qge(qge(t),e)))});function Xz(){return[]}var fve=hve;const dve=R.exports.forwardRef(({children:t,domElement:e,onChange:n,onMouseDown:i,onMouseUp:r,onObjectChange:s,object:o,makeDefault:a,...l},c)=>{const u=["enabled","axis","mode","translationSnap","rotationSnap","scaleSnap","space","size","showX","showY","showZ"],{camera:h,...f}=l,d=Lz(f,u),p=fve(f,u),m=Te(B=>B.controls),g=Te(B=>B.gl),_=Te(B=>B.events),y=Te(B=>B.camera),x=Te(B=>B.invalidate),E=Te(B=>B.get),w=Te(B=>B.set),S=h||y,b=e||_.connected||g.domElement,M=R.exports.useMemo(()=>new gpe(S,b),[S,b]),T=R.exports.useRef();return R.exports.useLayoutEffect(()=>(o?M.attach(o instanceof hr?o:o.current):T.current instanceof hr&&M.attach(T.current),()=>void M.detach()),[o,t,M]),R.exports.useEffect(()=>{if(m){const B=L=>m.enabled=!L.value;return M.addEventListener("dragging-changed",B),()=>M.removeEventListener("dragging-changed",B)}},[M,m]),R.exports.useEffect(()=>{const B=L=>{x(),n&&n(L)};return M==null||M.addEventListener==null||M.addEventListener("change",B),i&&(M==null||M.addEventListener==null||M.addEventListener("mouseDown",i)),r&&(M==null||M.addEventListener==null||M.addEventListener("mouseUp",r)),s&&(M==null||M.addEventListener==null||M.addEventListener("objectChange",s)),()=>{M==null||M.removeEventListener==null||M.removeEventListener("change",B),i&&(M==null||M.removeEventListener==null||M.removeEventListener("mouseDown",i)),r&&(M==null||M.removeEventListener==null||M.removeEventListener("mouseUp",r)),s&&(M==null||M.removeEventListener==null||M.removeEventListener("objectChange",s))}},[n,i,r,s,M,x]),R.exports.useEffect(()=>{if(a){const B=E().controls;return w({controls:M}),()=>w({controls:B})}},[a,M]),M?vt(vs,{children:[se("primitive",{ref:c,object:M,...d}),se("group",{ref:T,...p,children:t})]}):null}),pve=R.exports.forwardRef(({domElement:t,selector:e,onChange:n,onLock:i,onUnlock:r,enabled:s=!0,makeDefault:o,...a},l)=>{const{camera:c,...u}=a,h=Te(w=>w.setEvents),f=Te(w=>w.gl),d=Te(w=>w.camera),p=Te(w=>w.invalidate),m=Te(w=>w.events),g=Te(w=>w.get),_=Te(w=>w.set),y=c||d,x=t||m.connected||f.domElement,[E]=R.exports.useState(()=>new ype(y));return R.exports.useEffect(()=>{if(s){E.connect(x);const w=g().events.compute;return h({compute(S,b){const M=b.size.width/2,T=b.size.height/2;b.pointer.set(M/b.size.width*2-1,-(T/b.size.height)*2+1),b.raycaster.setFromCamera(b.pointer,b.camera)}}),()=>{E.disconnect(),h({compute:w})}}},[s,E]),R.exports.useEffect(()=>{const w=M=>{p(),n&&n(M)};E.addEventListener("change",w),i&&E.addEventListener("lock",i),r&&E.addEventListener("unlock",r);const S=()=>E.lock(),b=e?Array.from(document.querySelectorAll(e)):[document];return b.forEach(M=>M&&M.addEventListener("click",S)),()=>{E.removeEventListener("change",w),i&&E.addEventListener("lock",i),r&&E.addEventListener("unlock",r),b.forEach(M=>M?M.removeEventListener("click",S):void 0)}},[n,i,r,e,E,p]),R.exports.useEffect(()=>{if(o){const w=g().controls;return _({controls:E}),()=>_({controls:w})}},[o,E]),se("primitive",{ref:l,object:E,...u})}),mve=R.exports.forwardRef(({domElement:t,makeDefault:e,...n},i)=>{const r=Te(h=>h.camera),s=Te(h=>h.gl),o=Te(h=>h.events),a=Te(h=>h.get),l=Te(h=>h.set),c=t||o.connected||s.domElement,[u]=R.exports.useState(()=>new Ape(r,c));return R.exports.useEffect(()=>{if(e){const h=a().controls;return l({controls:u}),()=>l({controls:h})}},[e,u]),Ct((h,f)=>{u.update(f)},-1),u?se("primitive",{ref:i,object:u,...n}):null});function Yz(t,e){const n=Te(r=>r.pointer),[i]=R.exports.useState(()=>{const r=new e0;return e&&hs(r,e,{}),function(s,o){r.setFromCamera(n,t instanceof Wy?t:t.current);const a=this.constructor.prototype.raycast.bind(this);a&&a(r,o)}});return i}const qz=R.exports.createContext({}),Ix=()=>R.exports.useContext(qz),Ave=2*Math.PI,aF=new hr,lF=new Ze,[yf,Iw]=[new $t,new $t],cF=new $,uF=new $,gve=t=>"minPolarAngle"in t,vve=({alignment:t="bottom-right",margin:e=[80,80],renderPriority:n=0,autoClear:i=!0,onUpdate:r,onTarget:s,children:o})=>{const a=Te(({size:F})=>F),l=Te(({camera:F})=>F),c=Te(({controls:F})=>F),u=Te(({gl:F})=>F),h=Te(({scene:F})=>F),f=Te(({invalidate:F})=>F),d=R.exports.useRef(),p=R.exports.useRef(),m=R.exports.useRef(null),[g]=R.exports.useState(()=>new Fc),_=R.exports.useRef(!1),y=R.exports.useRef(0),x=R.exports.useRef(new $(0,0,0)),E=R.exports.useRef(new $(0,0,0));R.exports.useEffect(()=>{E.current.copy(l.up)},[l]);const w=R.exports.useCallback(F=>{_.current=!0,(c||s)&&(x.current=(c==null?void 0:c.target)||(s==null?void 0:s())),y.current=l.position.distanceTo(cF),yf.copy(l.quaternion),uF.copy(F).multiplyScalar(y.current).add(cF),aF.lookAt(uF),Iw.copy(aF.quaternion),f()},[c,l,s,f]);R.exports.useEffect(()=>(h.background&&(d.current=h.background,h.background=null,g.background=d.current),()=>{d.current&&(h.background=d.current)}),[]),Ct((F,U)=>{if(m.current&&p.current){var k;if(_.current)if(yf.angleTo(Iw)<.01)_.current=!1,gve(c)&&l.up.copy(E.current);else{const X=U*Ave;yf.rotateTowards(Iw,X),l.position.set(0,0,1).applyQuaternion(yf).multiplyScalar(y.current).add(x.current),l.up.set(0,1,0).applyQuaternion(yf).normalize(),l.quaternion.copy(yf),r?r():c&&c.update(),f()}lF.copy(l.matrix).invert(),(k=p.current)==null||k.quaternion.setFromRotationMatrix(lF),i&&(u.autoClear=!1),u.clearDepth(),u.render(g,m.current)}},n);const S=Yz(m),b=R.exports.useMemo(()=>({tweenCamera:w,raycast:S}),[w]),[M,T]=e,B=t.endsWith("-center")?0:t.endsWith("-left")?-a.width/2+M:a.width/2-M,L=t.startsWith("center-")?0:t.startsWith("top-")?a.height/2-T:-a.height/2+T;return r0(vt(qz.Provider,{value:b,children:[se(kz,{ref:m,position:[0,0,200]}),se("group",{ref:p,position:[B,L,0],children:o})]}),g)},Pp={bg:"#f0f0f0",hover:"#999",text:"black",stroke:"black"},_ve=["Right","Left","Top","Bottom","Front","Back"],Jz=t=>new $(...t).multiplyScalar(.38),yve=[[1,1,1],[1,1,-1],[1,-1,1],[1,-1,-1],[-1,1,1],[-1,1,-1],[-1,-1,1],[-1,-1,-1]].map(Jz),xve=[.25,.25,.25],Kz=[[1,1,0],[1,0,1],[1,0,-1],[1,-1,0],[0,1,1],[0,1,-1],[0,-1,1],[0,-1,-1],[-1,1,0],[-1,0,1],[-1,0,-1],[-1,-1,0]].map(Jz),Eve=Kz.map(t=>t.toArray().map(e=>e==0?.5:.25)),wve=({hover:t,index:e,font:n="20px Inter var, Arial, sans-serif",faces:i=_ve,color:r=Pp.bg,hoverColor:s=Pp.hover,textColor:o=Pp.text,strokeColor:a=Pp.stroke,opacity:l=1})=>{const c=Te(h=>h.gl),u=R.exports.useMemo(()=>{const h=document.createElement("canvas");h.width=128,h.height=128;const f=h.getContext("2d");return f.fillStyle=r,f.fillRect(0,0,h.width,h.height),f.strokeStyle=a,f.strokeRect(0,0,h.width,h.height),f.font=n,f.textAlign="center",f.fillStyle=o,f.fillText(i[e].toUpperCase(),64,76),new x3(h)},[e,i,n,r,o,a]);return se("meshLambertMaterial",{map:u,"map-encoding":c.outputEncoding,"map-anisotropy":c.capabilities.getMaxAnisotropy()||1,attach:`material-${e}`,color:t?s:"white",transparent:!0,opacity:l})},Mve=t=>{const{tweenCamera:e,raycast:n}=Ix(),[i,r]=R.exports.useState(null),s=l=>{l.stopPropagation(),r(null)},o=l=>{l.stopPropagation(),e(l.face.normal)};return vt("mesh",{raycast:n,onPointerOut:s,onPointerMove:l=>{l.stopPropagation(),r(Math.floor(l.faceIndex/2))},onClick:t.onClick||o,children:[[...Array(6)].map((l,c)=>se(wve,{index:c,hover:i===c,...t},c)),se("boxGeometry",{})]})},hF=({onClick:t,dimensions:e,position:n,hoverColor:i=Pp.hover})=>{const{tweenCamera:r,raycast:s}=Ix(),[o,a]=R.exports.useState(!1);return vt("mesh",{scale:1.01,position:n,raycast:s,onPointerOver:h=>{h.stopPropagation(),a(!0)},onPointerOut:h=>{h.stopPropagation(),a(!1)},onClick:t||(h=>{h.stopPropagation(),r(n)}),children:[se("meshBasicMaterial",{color:o?i:"white",transparent:!0,opacity:.6,visible:o}),se("boxGeometry",{args:e})]})},Cve=t=>vt("group",{scale:[60,60,60],children:[se(Mve,{...t}),Kz.map((e,n)=>se(hF,{position:e,dimensions:Eve[n],...t},n)),yve.map((e,n)=>se(hF,{position:e,dimensions:xve,...t},n)),se("ambientLight",{intensity:.5}),se("pointLight",{position:[10,10,10],intensity:.5})]});function Tw({scale:t=[.8,.05,.05],color:e,rotation:n}){return se("group",{rotation:n,children:vt("mesh",{position:[.4,0,0],children:[se("boxGeometry",{args:t}),se("meshBasicMaterial",{color:e,toneMapped:!1})]})})}function xf({onClick:t,font:e,disabled:n,arcStyle:i,label:r,labelColor:s,axisHeadScale:o=1,...a}){const l=Te(m=>m.gl),c=R.exports.useMemo(()=>{const m=document.createElement("canvas");m.width=64,m.height=64;const g=m.getContext("2d");return g.beginPath(),g.arc(32,32,16,0,2*Math.PI),g.closePath(),g.fillStyle=i,g.fill(),r&&(g.font=e,g.textAlign="center",g.fillStyle=s,g.fillText(r,32,41)),new x3(m)},[i,r,s,e]),[u,h]=R.exports.useState(!1),f=(r?1:.75)*(u?1.2:1)*o;return se("sprite",{scale:f,onPointerOver:n?void 0:m=>{m.stopPropagation(),h(!0)},onPointerOut:n?void 0:t||(m=>{m.stopPropagation(),h(!1)}),...a,children:se("spriteMaterial",{map:c,"map-encoding":l.outputEncoding,"map-anisotropy":l.capabilities.getMaxAnisotropy()||1,alphaTest:.3,opacity:r?1:.75,toneMapped:!1})})}const Sve=({hideNegativeAxes:t,hideAxisHeads:e,disabled:n,font:i="18px Inter var, Arial, sans-serif",axisColors:r=["#ff2060","#20df80","#2080ff"],axisHeadScale:s=1,axisScale:o,labels:a=["X","Y","Z"],labelColor:l="#000",onClick:c,...u})=>{const[h,f,d]=r,{tweenCamera:p,raycast:m}=Ix(),g={font:i,disabled:n,labelColor:l,raycast:m,onClick:c,axisHeadScale:s,onPointerDown:n?void 0:_=>{p(_.object.position),_.stopPropagation()}};return vt("group",{scale:40,...u,children:[se(Tw,{color:h,rotation:[0,0,0],scale:o}),se(Tw,{color:f,rotation:[0,0,Math.PI/2],scale:o}),se(Tw,{color:d,rotation:[0,-Math.PI/2,0],scale:o}),!e&&vt(vs,{children:[se(xf,{arcStyle:h,position:[1,0,0],label:a[0],...g}),se(xf,{arcStyle:f,position:[0,1,0],label:a[1],...g}),se(xf,{arcStyle:d,position:[0,0,1],label:a[2],...g}),!t&&vt(vs,{children:[se(xf,{arcStyle:h,position:[-1,0,0],...g}),se(xf,{arcStyle:f,position:[0,-1,0],...g}),se(xf,{arcStyle:d,position:[0,0,-1],...g})]})]}),se("ambientLight",{intensity:.5}),se("pointLight",{position:[10,10,10],intensity:.5})]})};function Zz(t,{path:e}){const[n]=Ci(jy,[t],i=>i.setPath(e));return n}Zz.preload=(t,{path:e})=>Ci.preload(jy,[t],n=>n.setPath(e));function UI(t){return Ci(xI,t)}UI.preload=t=>Ci.preload(xI,t);UI.clear=t=>Ci.clear(xI,t);let Yg=null;function $z(t,e,n){return i=>{n&&n(i),t&&(Yg||(Yg=new Yme),Yg.setDecoderPath(typeof t=="string"?t:"https://www.gstatic.com/draco/versioned/decoders/1.4.3/"),i.setDRACOLoader(Yg)),e&&i.setMeshoptDecoder(typeof ww=="function"?ww():ww)}}function OI(t,e=!0,n=!0,i){return Ci(yI,t,$z(e,n,i))}OI.preload=(t,e=!0,n=!0,i)=>Ci.preload(yI,t,$z(e,n,i));OI.clear=t=>Ci.clear(yI,t);const e9="https://cdn.jsdelivr.net/gh/pmndrs/drei-assets@master";function NI(t,e=`${e9}/basis/`){const n=Te(r=>r.gl),i=Ci(qs,Km(t)?Object.values(t):t,r=>{r.detectSupport(n),r.setTranscoderPath(e)});if(R.exports.useEffect(()=>{(Array.isArray(i)?i:[i]).forEach(n.initTexture)},[n,i]),Km(t)){const r=Object.keys(t),s={};return r.forEach(o=>Object.assign(s,{[o]:i[r.indexOf(o)]})),s}else return i}NI.preload=(t,e=`${e9}/basis/`)=>Ci.preload(qs,t,n=>{n.setTranscoderPath(e)});NI.clear=t=>Ci.clear(qs,t);function bve(t,e){const{unsuspend:n,start:i,crossOrigin:r,muted:s,loop:o,...a}={unsuspend:"canplay",crossOrigin:"Anonymous",muted:!0,loop:!0,start:!0,...e},l=Te(u=>u.gl),c=Mh(()=>new Promise((u,h)=>{const f=Object.assign(document.createElement("video"),{src:t,crossOrigin:r,loop:o,muted:s,...a}),d=new uN(f);d.encoding=l.outputEncoding,f.addEventListener(n,()=>u(d))}),[t]);return R.exports.useEffect(()=>void(i&&c.image.play()),[c]),c}var t9={exports:{}};(function(t,e){(function(n,i){t.exports=i()})(Qe,function(){var n=function(){function i(d){return o.appendChild(d.dom),d}function r(d){for(var p=0;p<o.children.length;p++)o.children[p].style.display=p===d?"block":"none";s=d}var s=0,o=document.createElement("div");o.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",o.addEventListener("click",function(d){d.preventDefault(),r(++s%o.children.length)},!1);var a=(performance||Date).now(),l=a,c=0,u=i(new n.Panel("FPS","#0ff","#002")),h=i(new n.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var f=i(new n.Panel("MB","#f08","#201"));return r(0),{REVISION:16,dom:o,addPanel:i,showPanel:r,begin:function(){a=(performance||Date).now()},end:function(){c++;var d=(performance||Date).now();if(h.update(d-a,200),d>l+1e3&&(u.update(1e3*c/(d-l),100),l=d,c=0,f)){var p=performance.memory;f.update(p.usedJSHeapSize/1048576,p.jsHeapSizeLimit/1048576)}return d},update:function(){a=this.end()},domElement:o,setMode:r}};return n.Panel=function(i,r,s){var o=1/0,a=0,l=Math.round,c=l(window.devicePixelRatio||1),u=80*c,h=48*c,f=3*c,d=2*c,p=3*c,m=15*c,g=74*c,_=30*c,y=document.createElement("canvas");y.width=u,y.height=h,y.style.cssText="width:80px;height:48px";var x=y.getContext("2d");return x.font="bold "+9*c+"px Helvetica,Arial,sans-serif",x.textBaseline="top",x.fillStyle=s,x.fillRect(0,0,u,h),x.fillStyle=r,x.fillText(i,f,d),x.fillRect(p,m,g,_),x.fillStyle=s,x.globalAlpha=.9,x.fillRect(p,m,g,_),{dom:y,update:function(E,w){o=Math.min(o,E),a=Math.max(a,E),x.fillStyle=s,x.globalAlpha=1,x.fillRect(0,0,u,m),x.fillStyle=r,x.fillText(l(E)+" "+i+" ("+l(o)+"-"+l(a)+")",f,d),x.drawImage(y,p+c,m,g-c,_,p,m,g-c,_),x.fillRect(p+g-c,m,c,_),x.fillStyle=s,x.globalAlpha=.9,x.fillRect(p+g-c,m,c,l((1-E/w)*_))}}},n})})(t9);const Ive=t9.exports;function fF(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function Tve(t,e=[],n){const[i,r]=R.exports.useState();return R.exports.useLayoutEffect(()=>{const s=t();return r(s),fF(n,s),()=>fF(n,null)},e),i}function Bve({showPanel:t=0,className:e,parent:n}){const i=Tve(()=>new Ive,[]);return R.exports.useEffect(()=>{if(i){const r=n&&n.current||document.body;i.showPanel(t),r==null||r.appendChild(i.dom),e&&i.dom.classList.add(...e.split(" ").filter(a=>a));const s=cx(()=>i.begin()),o=z3(()=>i.end());return()=>{r==null||r.removeChild(i.dom),s(),o()}}},[n,i,e,t]),null}function GI(t,e,n){const{gl:i,size:r,viewport:s}=Te(),o=typeof t=="number"?t:r.width*s.dpr,a=typeof e=="number"?e:r.height*s.dpr,l=(typeof t=="number"?n:t)||{},{samples:c,...u}=l,h=R.exports.useMemo(()=>{let f;return f=new gs(o,a,{minFilter:Mi,magFilter:Mi,encoding:i.outputEncoding,type:br,...u}),f.samples=c,f},[]);return R.exports.useLayoutEffect(()=>{h.setSize(o,a),c&&(h.samples=c)},[c,h,o,a]),R.exports.useEffect(()=>()=>h.dispose(),[]),h}function Rve({size:t=256,frames:e=1/0}={}){const n=Te(u=>u.viewport.dpr),{width:i,height:r}=Te(u=>u.size),s=t||i*n,o=t||r*n,a=R.exports.useMemo(()=>{const u=new Yy(s,o);return u.format=Xy,u.type=M1,{depthTexture:u}},[s,o]);let l=0;const c=GI(s,o,a);return Ct(u=>{(e===1/0||l<e)&&(u.gl.setRenderTarget(c),u.gl.render(u.scene,u.camera),u.gl.setRenderTarget(null),l++)}),c.depthTexture}function Pve(t,e,n=1){const i=Te(o=>o.viewport),r=e*(i.aspect>t/e?i.width/t:i.height/e);return[t*(i.aspect>t/e?i.width/t:i.height/e)*n,r*n,1]}function Bw(t,e,n,i){return new(n||(n=Promise))(function(r,s){function o(c){try{l(i.next(c))}catch(u){s(u)}}function a(c){try{l(i.throw(c))}catch(u){s(u)}}function l(c){var u;c.done?r(c.value):(u=c.value,u instanceof n?u:new n(function(h){h(u)})).then(o,a)}l((i=i.apply(t,e||[])).next())})}const Dve=["geforce 320m","geforce 8600","geforce 8600m gt","geforce 8800 gs","geforce 8800 gt","geforce 9400","geforce 9400m g","geforce 9400m","geforce 9600m gt","geforce 9600m","geforce fx go5200","geforce gt 120","geforce gt 130","geforce gt 330m","geforce gtx 285","google swiftshader","intel g41","intel g45","intel gma 4500mhd","intel gma x3100","intel hd 3000","intel q45","legacy","mali-2","mali-3","mali-4","quadro fx 1500","quadro fx 4","quadro fx 5","radeon hd 2400","radeon hd 2600","radeon hd 4670","radeon hd 4850","radeon hd 4870","radeon hd 5670","radeon hd 5750","radeon hd 6290","radeon hd 6300","radeon hd 6310","radeon hd 6320","radeon hd 6490m","radeon hd 6630m","radeon hd 6750m","radeon hd 6770m","radeon hd 6970m","sgx 543","sgx543"];function dF(t){return t=t.toLowerCase().replace(/^angle ?\((.+)\)*$/,"$1").replace(/\s(\d{1,2}gb|direct3d.+$)|\(r\)| \([^)]+\)$/g,"").replace(/(?:vulkan|opengl) \d+\.\d+(?:\.\d+)?(?: \((.*)\))?/,"$1")}const n9=typeof window>"u",Wl=(()=>{if(n9)return;const{userAgent:t,platform:e,maxTouchPoints:n}=window.navigator,i=/(iphone|ipod|ipad)/i.test(t),r=e==="iPad"||e==="MacIntel"&&n>0&&!window.MSStream;return{isIpad:r,isMobile:/android/i.test(t)||i||r,isSafari12:/Version\/12.+Safari/.test(t)}})();function Fve(t,e,n){if(!n)return[e];const i=function(c){const u=`
    precision highp float;
    attribute vec3 aPosition;
    varying float vvv;
    void main() {
      vvv = 0.31622776601683794;
      gl_Position = vec4(aPosition, 1.0);
    }
  `,h=`
    precision highp float;
    varying float vvv;
    void main() {
      vec4 enc = vec4(1.0, 255.0, 65025.0, 16581375.0) * vvv;
      enc = fract(enc);
      enc -= enc.yzww * vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 0.0);
      gl_FragColor = enc;
    }
  `,f=c.createShader(35633),d=c.createShader(35632),p=c.createProgram();if(!(d&&f&&p))return;c.shaderSource(f,u),c.shaderSource(d,h),c.compileShader(f),c.compileShader(d),c.attachShader(p,f),c.attachShader(p,d),c.linkProgram(p),c.detachShader(p,f),c.detachShader(p,d),c.deleteShader(f),c.deleteShader(d),c.useProgram(p);const m=c.createBuffer();c.bindBuffer(34962,m),c.bufferData(34962,new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),35044);const g=c.getAttribLocation(p,"aPosition");c.vertexAttribPointer(g,3,5126,!1,0,0),c.enableVertexAttribArray(g),c.clearColor(1,1,1,1),c.clear(16384),c.viewport(0,0,1,1),c.drawArrays(4,0,3);const _=new Uint8Array(4);return c.readPixels(0,0,1,1,6408,5121,_),c.deleteProgram(p),c.deleteBuffer(m),_.join("")}(t),r="801621810",s="8016218135",o="80162181161",a=Wl!=null&&Wl.isIpad?[["a7",o,12],["a8",s,15],["a8x",s,15],["a9",s,15],["a9x",s,15],["a10",s,15],["a10x",s,15],["a12",r,15],["a12x",r,15],["a12z",r,15],["a14",r,15],["m1",r,15]]:[["a7",o,12],["a8",s,12],["a9",s,15],["a10",s,15],["a11",r,15],["a12",r,15],["a13",r,15],["a14",r,15]];let l;return i==="80162181255"?l=a.filter(([,,c])=>c>=14):(l=a.filter(([,c])=>c===i),l.length||(l=a)),l.map(([c])=>`apple ${c} gpu`)}const Rw=[],pF=[];function Lve(t,e){if(t===e)return 0;const n=t;t.length>e.length&&(t=e,e=n);let i=t.length,r=e.length;for(;i>0&&t.charCodeAt(~-i)===e.charCodeAt(~-r);)i--,r--;let s,o=0;for(;o<i&&t.charCodeAt(o)===e.charCodeAt(o);)o++;if(i-=o,r-=o,i===0)return r;let a,l,c=0,u=0,h=0;for(;u<i;)pF[u]=t.charCodeAt(o+u),Rw[u]=++u;for(;h<r;)for(s=e.charCodeAt(o+h),a=h++,c=h,u=0;u<i;u++)l=s===pF[u]?a:a+1,a=Rw[u],c=Rw[u]=a>c?l>c?c+1:l:l>a?a+1:l;return c}function kve(t){return t!=null}class mF extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}const Uve=({mobileTiers:t=[0,15,30,60],desktopTiers:e=[0,15,30,60],override:n={},glContext:i,failIfMajorPerformanceCaveat:r=!1,benchmarksURL:s="https://unpkg.com/detect-gpu@4.0.43/dist/benchmarks"}={})=>Bw(void 0,void 0,void 0,function*(){const o={};if(n9)return{tier:0,type:"SSR"};const{isIpad:a=!!(Wl!=null&&Wl.isIpad),isMobile:l=!!(Wl!=null&&Wl.isMobile),screenSize:c=window.screen,loadBenchmarks:u=w=>Bw(void 0,void 0,void 0,function*(){const S=yield fetch(`${s}/${w}`).then(b=>b.json());if(parseInt(S.shift().split(".")[0],10)<4)throw new mF("Detect GPU benchmark data is out of date. Please update to version 4x");return S})}=n;let{renderer:h}=n;const f=(w,S,b,M,T)=>({device:T,fps:M,gpu:b,isMobile:l,tier:w,type:S});let d,p="";if(h)h=dF(h),d=[h];else{const w=i||function(b,M=!1){const T={alpha:!1,antialias:!1,depth:!1,failIfMajorPerformanceCaveat:M,powerPreference:"high-performance",stencil:!1};b&&delete T.powerPreference;const B=window.document.createElement("canvas"),L=B.getContext("webgl",T)||B.getContext("experimental-webgl",T);return L!=null?L:void 0}(Wl==null?void 0:Wl.isSafari12,r);if(!w)return f(0,"WEBGL_UNSUPPORTED");const S=w.getExtension("WEBGL_debug_renderer_info");if(S&&(h=w.getParameter(S.UNMASKED_RENDERER_WEBGL)),!h)return f(1,"FALLBACK");p=h,h=dF(h),d=function(b,M,T){return M==="apple gpu"?Fve(b,M,T):[M]}(w,h,l)}const m=(yield Promise.all(d.map(function(w){var S;return Bw(this,void 0,void 0,function*(){const b=(H=>{const J=l?["adreno","apple","mali-t","mali","nvidia","powervr"]:["intel","apple","amd","radeon","nvidia","geforce"];for(const j of J)if(H.includes(j))return j})(w);if(!b)return;const M=`${l?"m":"d"}-${b}${a?"-ipad":""}.json`,T=o[M]=(S=o[M])!==null&&S!==void 0?S:u(M);let B;try{B=yield T}catch(H){if(H instanceof mF)throw H;return}const L=function(H){var J;const j=(H=H.replace(/\([^)]+\)/,"")).match(/\d+/)||H.match(/(\W|^)([A-Za-z]{1,3})(\W|$)/g);return(J=j==null?void 0:j.join("").replace(/\W|amd/g,""))!==null&&J!==void 0?J:""}(w);let F=B.filter(([,H])=>H===L);F.length||(F=B.filter(([H])=>H.includes(w)));const U=F.length;if(U===0)return;let k,[X,,,Y]=U>1?F.map(H=>[H,Lve(w,H[0])]).sort(([,H],[,J])=>H-J)[0][0]:F[0],Z=Number.MAX_VALUE;const{devicePixelRatio:G}=window,O=c.width*G*c.height*G;for(const H of Y){const[J,j]=H,oe=J*j,K=Math.abs(O-oe);K<Z&&(Z=K,k=H)}if(!k)return;const[,,z,Q]=k;return[Z,z,X,Q]})}))).filter(kve).sort(([w=Number.MAX_VALUE,S],[b=Number.MAX_VALUE,M])=>w===b?S-M:w-b);if(!m.length){const w=Dve.find(S=>h.includes(S));return w?f(0,"BLOCKLISTED",w):f(1,"FALLBACK",`${h} (${p})`)}const[,g,_,y]=m[0];if(g===-1)return f(0,"BLOCKLISTED",_,g,y);const x=l?t:e;let E=0;for(let w=0;w<x.length;w++)g>=x[w]&&(E=w);return f(E,"BENCHMARK",_,g,y)}),Ove=t=>Mh(()=>Uve(t),["useDetectGPU"]);function Nve(t,e,...n){const i=R.exports.useRef(),r=Te(s=>s.scene);return R.exports.useEffect(()=>(t&&e&&t!=null&&t.current&&(i.current=new e(t.current,...n),i.current&&r.add(i.current)),!t&&i.current&&r.remove(i.current),()=>{i.current&&r.remove(i.current)}),[r,e,t,...n]),Ct(()=>{var s;(s=i.current)!=null&&s.update&&i.current.update()}),i}const i9=0,Gve=1,r9=2,AF=2,Pw=1.25,gF=1,Vu=6*4+4+4,ES=65535,zve=Math.pow(2,-24);class qg{constructor(){}}function ra(t,e,n){return n.min.x=e[t],n.min.y=e[t+1],n.min.z=e[t+2],n.max.x=e[t+3],n.max.y=e[t+4],n.max.z=e[t+5],n}function vF(t){let e=-1,n=-1/0;for(let i=0;i<3;i++){const r=t[i+3]-t[i];r>n&&(n=r,e=i)}return e}function _F(t,e){e.set(t)}function yF(t,e,n){let i,r;for(let s=0;s<3;s++){const o=s+3;i=t[s],r=e[s],n[s]=i<r?i:r,i=t[o],r=e[o],n[o]=i>r?i:r}}function Jg(t,e,n){for(let i=0;i<3;i++){const r=e[t+2*i],s=e[t+2*i+1],o=r-s,a=r+s;o<n[i]&&(n[i]=o),a>n[i+3]&&(n[i+3]=a)}}function dp(t){const e=t[3]-t[0],n=t[4]-t[1],i=t[5]-t[2];return 2*(e*n+n*i+i*e)}function Qve(t,e){if(!t.index){const n=t.attributes.position.count,i=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;let r;n>65535?r=new Uint32Array(new i(4*n)):r=new Uint16Array(new i(2*n)),t.setIndex(new On(r,1));for(let s=0;s<n;s++)r[s]=s}}function Hve(t){if(!t.groups||!t.groups.length)return[{offset:0,count:t.index.count/3}];const e=[],n=new Set;for(const r of t.groups)n.add(r.start),n.add(r.start+r.count);const i=Array.from(n.values()).sort((r,s)=>r-s);for(let r=0;r<i.length-1;r++){const s=i[r],o=i[r+1];e.push({offset:s/3,count:(o-s)/3})}return e}function Dw(t,e,n,i,r=null){let s=1/0,o=1/0,a=1/0,l=-1/0,c=-1/0,u=-1/0,h=1/0,f=1/0,d=1/0,p=-1/0,m=-1/0,g=-1/0;const _=r!==null;for(let y=e*6,x=(e+n)*6;y<x;y+=6){const E=t[y+0],w=t[y+1],S=E-w,b=E+w;S<s&&(s=S),b>l&&(l=b),_&&E<h&&(h=E),_&&E>p&&(p=E);const M=t[y+2],T=t[y+3],B=M-T,L=M+T;B<o&&(o=B),L>c&&(c=L),_&&M<f&&(f=M),_&&M>m&&(m=M);const F=t[y+4],U=t[y+5],k=F-U,X=F+U;k<a&&(a=k),X>u&&(u=X),_&&F<d&&(d=F),_&&F>g&&(g=F)}i[0]=s,i[1]=o,i[2]=a,i[3]=l,i[4]=c,i[5]=u,_&&(r[0]=h,r[1]=f,r[2]=d,r[3]=p,r[4]=m,r[5]=g)}function Vve(t,e,n,i){let r=1/0,s=1/0,o=1/0,a=-1/0,l=-1/0,c=-1/0;for(let u=e*6,h=(e+n)*6;u<h;u+=6){const f=t[u+0];f<r&&(r=f),f>a&&(a=f);const d=t[u+2];d<s&&(s=d),d>l&&(l=d);const p=t[u+4];p<o&&(o=p),p>c&&(c=p)}i[0]=r,i[1]=s,i[2]=o,i[3]=a,i[4]=l,i[5]=c}function Wve(t,e,n,i,r){let s=n,o=n+i-1;const a=r.pos,l=r.axis*2;for(;;){for(;s<=o&&e[s*6+l]<a;)s++;for(;s<=o&&e[o*6+l]>=a;)o--;if(s<o){for(let c=0;c<3;c++){let u=t[s*3+c];t[s*3+c]=t[o*3+c],t[o*3+c]=u;let h=e[s*6+c*2+0];e[s*6+c*2+0]=e[o*6+c*2+0],e[o*6+c*2+0]=h;let f=e[s*6+c*2+1];e[s*6+c*2+1]=e[o*6+c*2+1],e[o*6+c*2+1]=f}s++,o--}else return s}}const Fa=32,jve=(t,e)=>t.candidate-e.candidate,Gl=new Array(Fa).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),Kg=new Float32Array(6);function Xve(t,e,n,i,r,s){let o=-1,a=0;if(s===i9)o=vF(e),o!==-1&&(a=(e[o]+e[o+3])/2);else if(s===Gve)o=vF(t),o!==-1&&(a=Yve(n,i,r,o));else if(s===r9){const l=dp(t);let c=Pw*r;const u=i*6,h=(i+r)*6;for(let f=0;f<3;f++){const d=e[f],g=(e[f+3]-d)/Fa;if(r<Fa/4){const _=[...Gl];_.length=r;let y=0;for(let E=u;E<h;E+=6,y++){const w=_[y];w.candidate=n[E+2*f],w.count=0;const{bounds:S,leftCacheBounds:b,rightCacheBounds:M}=w;for(let T=0;T<3;T++)M[T]=1/0,M[T+3]=-1/0,b[T]=1/0,b[T+3]=-1/0,S[T]=1/0,S[T+3]=-1/0;Jg(E,n,S)}_.sort(jve);let x=r;for(let E=0;E<x;E++){const w=_[E];for(;E+1<x&&_[E+1].candidate===w.candidate;)_.splice(E+1,1),x--}for(let E=u;E<h;E+=6){const w=n[E+2*f];for(let S=0;S<x;S++){const b=_[S];w>=b.candidate?Jg(E,n,b.rightCacheBounds):(Jg(E,n,b.leftCacheBounds),b.count++)}}for(let E=0;E<x;E++){const w=_[E],S=w.count,b=r-w.count,M=w.leftCacheBounds,T=w.rightCacheBounds;let B=0;S!==0&&(B=dp(M)/l);let L=0;b!==0&&(L=dp(T)/l);const F=gF+Pw*(B*S+L*b);F<c&&(o=f,c=F,a=w.candidate)}}else{for(let x=0;x<Fa;x++){const E=Gl[x];E.count=0,E.candidate=d+g+x*g;const w=E.bounds;for(let S=0;S<3;S++)w[S]=1/0,w[S+3]=-1/0}for(let x=u;x<h;x+=6){let S=~~((n[x+2*f]-d)/g);S>=Fa&&(S=Fa-1);const b=Gl[S];b.count++,Jg(x,n,b.bounds)}const _=Gl[Fa-1];_F(_.bounds,_.rightCacheBounds);for(let x=Fa-2;x>=0;x--){const E=Gl[x],w=Gl[x+1];yF(E.bounds,w.rightCacheBounds,E.rightCacheBounds)}let y=0;for(let x=0;x<Fa-1;x++){const E=Gl[x],w=E.count,S=E.bounds,M=Gl[x+1].rightCacheBounds;w!==0&&(y===0?_F(S,Kg):yF(S,Kg,Kg)),y+=w;let T=0,B=0;y!==0&&(T=dp(Kg)/l);const L=r-y;L!==0&&(B=dp(M)/l);const F=gF+Pw*(T*y+B*L);F<c&&(o=f,c=F,a=E.candidate)}}}}else console.warn(`MeshBVH: Invalid build strategy value ${s} used.`);return{axis:o,pos:a}}function Yve(t,e,n,i){let r=0;for(let s=e,o=e+n;s<o;s++)r+=t[s*6+i*2];return r/n}function qve(t,e){const n=t.attributes.position,i=t.index.array,r=i.length/3,s=new Float32Array(r*6),o=n.normalized,a=n.array,l=n.offset||0;let c=3;n.isInterleavedBufferAttribute&&(c=n.data.stride);const u=["getX","getY","getZ"];for(let h=0;h<r;h++){const f=h*3,d=h*6;let p,m,g;o?(p=i[f+0],m=i[f+1],g=i[f+2]):(p=i[f+0]*c+l,m=i[f+1]*c+l,g=i[f+2]*c+l);for(let _=0;_<3;_++){let y,x,E;o?(y=n[u[_]](p),x=n[u[_]](m),E=n[u[_]](g)):(y=a[p+_],x=a[m+_],E=a[g+_]);let w=y;x<w&&(w=x),E<w&&(w=E);let S=y;x>S&&(S=x),E>S&&(S=E);const b=(S-w)/2,M=_*2;s[d+M+0]=w+b,s[d+M+1]=b+(Math.abs(w)+b)*zve,w<e[_]&&(e[_]=w),S>e[_+3]&&(e[_+3]=S)}}return s}function Jve(t,e){function n(_){f&&f(_/d)}function i(_,y,x,E=null,w=0){if(!p&&w>=l&&(p=!0,c&&(console.warn(`MeshBVH: Max depth of ${l} reached when generating BVH. Consider increasing maxDepth.`),console.warn(t))),x<=u||w>=l)return n(y+x),_.offset=y,_.count=x,_;const S=Xve(_.boundingData,E,o,y,x,h);if(S.axis===-1)return n(y+x),_.offset=y,_.count=x,_;const b=Wve(a,o,y,x,S);if(b===y||b===y+x)n(y+x),_.offset=y,_.count=x;else{_.splitAxis=S.axis;const M=new qg,T=y,B=b-y;_.left=M,M.boundingData=new Float32Array(6),Dw(o,T,B,M.boundingData,s),i(M,T,B,s,w+1);const L=new qg,F=b,U=x-B;_.right=L,L.boundingData=new Float32Array(6),Dw(o,F,U,L.boundingData,s),i(L,F,U,s,w+1)}return _}Qve(t,e);const r=new Float32Array(6),s=new Float32Array(6),o=qve(t,r),a=t.index.array,l=e.maxDepth,c=e.verbose,u=e.maxLeafTris,h=e.strategy,f=e.onProgress,d=t.index.count/3;let p=!1;const m=[],g=Hve(t);if(g.length===1){const _=g[0],y=new qg;y.boundingData=r,Vve(o,_.offset,_.count,s),i(y,_.offset,_.count,s),m.push(y)}else for(let _ of g){const y=new qg;y.boundingData=new Float32Array(6),Dw(o,_.offset,_.count,y.boundingData,s),i(y,_.offset,_.count,s),m.push(y)}return m}function Kve(t,e){const n=Jve(t,e);let i,r,s;const o=[],a=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;for(let u=0;u<n.length;u++){const h=n[u];let f=l(h);const d=new a(Vu*f);i=new Float32Array(d),r=new Uint32Array(d),s=new Uint16Array(d),c(0,h),o.push(d)}return o;function l(u){return u.count?1:1+l(u.left)+l(u.right)}function c(u,h){const f=u/4,d=u/2,p=!!h.count,m=h.boundingData;for(let g=0;g<6;g++)i[f+g]=m[g];if(p){const g=h.offset,_=h.count;return r[f+6]=g,s[d+14]=_,s[d+15]=ES,u+Vu}else{const g=h.left,_=h.right,y=h.splitAxis;let x;if(x=c(u+Vu,g),x/4>Math.pow(2,32))throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return r[f+6]=x/4,x=c(x,_),r[f+7]=y,x}}}class da{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(e,n){let i=1/0,r=-1/0;for(let s=0,o=e.length;s<o;s++){const l=e[s][n];i=l<i?l:i,r=l>r?l:r}this.min=i,this.max=r}setFromPoints(e,n){let i=1/0,r=-1/0;for(let s=0,o=n.length;s<o;s++){const a=n[s],l=e.dot(a);i=l<i?l:i,r=l>r?l:r}this.min=i,this.max=r}isSeparated(e){return this.min>e.max||e.min>this.max}}da.prototype.setFromBox=function(){const t=new $;return function(n,i){const r=i.min,s=i.max;let o=1/0,a=-1/0;for(let l=0;l<=1;l++)for(let c=0;c<=1;c++)for(let u=0;u<=1;u++){t.x=r.x*l+s.x*(1-l),t.y=r.y*c+s.y*(1-c),t.z=r.z*u+s.z*(1-u);const h=n.dot(t);o=Math.min(h,o),a=Math.max(h,a)}this.min=o,this.max=a}}();(function(){const t=new da;return function(n,i){const r=n.points,s=n.satAxes,o=n.satBounds,a=i.points,l=i.satAxes,c=i.satBounds;for(let u=0;u<3;u++){const h=o[u],f=s[u];if(t.setFromPoints(f,a),h.isSeparated(t))return!1}for(let u=0;u<3;u++){const h=c[u],f=l[u];if(t.setFromPoints(f,r),h.isSeparated(t))return!1}}})();const Zve=function(){const t=new $,e=new $,n=new $;return function(r,s,o){const a=r.start,l=t,c=s.start,u=e;n.subVectors(a,c),t.subVectors(r.end,r.start),e.subVectors(s.end,s.start);const h=n.dot(u),f=u.dot(l),d=u.dot(u),p=n.dot(l),g=l.dot(l)*d-f*f;let _,y;g!==0?_=(h*f-p*d)/g:_=0,y=(h+_*f)/d,o.x=_,o.y=y}}(),zI=function(){const t=new mt,e=new $,n=new $;return function(r,s,o,a){Zve(r,s,t);let l=t.x,c=t.y;if(l>=0&&l<=1&&c>=0&&c<=1){r.at(l,o),s.at(c,a);return}else if(l>=0&&l<=1){c<0?s.at(0,a):s.at(1,a),r.closestPointToPoint(a,!0,o);return}else if(c>=0&&c<=1){l<0?r.at(0,o):r.at(1,o),s.closestPointToPoint(o,!0,a);return}else{let u;l<0?u=r.start:u=r.end;let h;c<0?h=s.start:h=s.end;const f=e,d=n;if(r.closestPointToPoint(h,!0,e),s.closestPointToPoint(u,!0,n),f.distanceToSquared(h)<=d.distanceToSquared(u)){o.copy(f),a.copy(h);return}else{o.copy(u),a.copy(d);return}}}}(),$ve=function(){const t=new $,e=new $,n=new yh,i=new Co;return function(s,o){const{radius:a,center:l}=s,{a:c,b:u,c:h}=o;if(i.start=c,i.end=u,i.closestPointToPoint(l,!0,t).distanceTo(l)<=a||(i.start=c,i.end=h,i.closestPointToPoint(l,!0,t).distanceTo(l)<=a)||(i.start=u,i.end=h,i.closestPointToPoint(l,!0,t).distanceTo(l)<=a))return!0;const m=o.getPlane(n);if(Math.abs(m.distanceToPoint(l))<=a){const _=m.projectPoint(l,e);if(o.containsPoint(_))return!0}return!1}}(),e_e=1e-15;function Ef(t){return Math.abs(t)<e_e}class cl extends Hm{constructor(...e){super(...e),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map(()=>new $),this.satBounds=new Array(4).fill().map(()=>new da),this.points=[this.a,this.b,this.c],this.sphere=new to,this.plane=new yh,this.needsUpdate=!0}intersectsSphere(e){return $ve(e,this)}update(){const e=this.a,n=this.b,i=this.c,r=this.points,s=this.satAxes,o=this.satBounds,a=s[0],l=o[0];this.getNormal(a),l.setFromPoints(a,r);const c=s[1],u=o[1];c.subVectors(e,n),u.setFromPoints(c,r);const h=s[2],f=o[2];h.subVectors(n,i),f.setFromPoints(h,r);const d=s[3],p=o[3];d.subVectors(i,e),p.setFromPoints(d,r),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(a,e),this.needsUpdate=!1}}cl.prototype.closestPointToSegment=function(){const t=new $,e=new $,n=new Co;return function(r,s=null,o=null){const{start:a,end:l}=r,c=this.points;let u,h=1/0;for(let f=0;f<3;f++){const d=(f+1)%3;n.start.copy(c[f]),n.end.copy(c[d]),zI(n,r,t,e),u=t.distanceToSquared(e),u<h&&(h=u,s&&s.copy(t),o&&o.copy(e))}return this.closestPointToPoint(a,t),u=a.distanceToSquared(t),u<h&&(h=u,s&&s.copy(t),o&&o.copy(a)),this.closestPointToPoint(l,t),u=l.distanceToSquared(t),u<h&&(h=u,s&&s.copy(t),o&&o.copy(l)),Math.sqrt(h)}}();cl.prototype.intersectsTriangle=function(){const t=new cl,e=new Array(3),n=new Array(3),i=new da,r=new da,s=new $,o=new $,a=new $,l=new $,c=new Co,u=new Co,h=new Co;return function(d,p=null){this.needsUpdate&&this.update(),d.isExtendedTriangle?d.needsUpdate&&d.update():(t.copy(d),t.update(),d=t);const m=this.plane,g=d.plane;if(Math.abs(m.normal.dot(g.normal))>1-1e-10){const _=this.satBounds,y=this.satAxes;n[0]=d.a,n[1]=d.b,n[2]=d.c;for(let w=0;w<4;w++){const S=_[w],b=y[w];if(i.setFromPoints(b,n),S.isSeparated(i))return!1}const x=d.satBounds,E=d.satAxes;e[0]=this.a,e[1]=this.b,e[2]=this.c;for(let w=0;w<4;w++){const S=x[w],b=E[w];if(i.setFromPoints(b,e),S.isSeparated(i))return!1}for(let w=0;w<4;w++){const S=y[w];for(let b=0;b<4;b++){const M=E[b];if(s.crossVectors(S,M),i.setFromPoints(s,e),r.setFromPoints(s,n),i.isSeparated(r))return!1}}return p&&(console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),p.start.set(0,0,0),p.end.set(0,0,0)),!0}else{const _=this.points;let y=!1,x=0;for(let U=0;U<3;U++){const k=_[U],X=_[(U+1)%3];c.start.copy(k),c.end.copy(X),c.delta(o);const Y=y?u.start:u.end,Z=Ef(g.distanceToPoint(k));if(Ef(g.normal.dot(o))&&Z){u.copy(c),x=2;break}if((g.intersectLine(c,Y)||Z)&&!Ef(Y.distanceTo(X))){if(x++,y)break;y=!0}}if(x===1&&this.containsPoint(u.end))return p&&(p.start.copy(u.end),p.end.copy(u.end)),!0;if(x!==2)return!1;const E=d.points;let w=!1,S=0;for(let U=0;U<3;U++){const k=E[U],X=E[(U+1)%3];c.start.copy(k),c.end.copy(X),c.delta(a);const Y=w?h.start:h.end,Z=Ef(m.distanceToPoint(k));if(Ef(m.normal.dot(a))&&Z){h.copy(c),S=2;break}if((m.intersectLine(c,Y)||Z)&&!Ef(Y.distanceTo(X))){if(S++,w)break;w=!0}}if(S===1&&this.containsPoint(h.end))return p&&(p.start.copy(h.end),p.end.copy(h.end)),!0;if(S!==2)return!1;if(u.delta(o),h.delta(a),o.dot(a)<0){let U=h.start;h.start=h.end,h.end=U}const b=u.start.dot(o),M=u.end.dot(o),T=h.start.dot(o),B=h.end.dot(o),L=M<T,F=b<B;return b!==B&&T!==M&&L===F?!1:(p&&(l.subVectors(u.start,h.start),l.dot(o)>0?p.start.copy(u.start):p.start.copy(h.start),l.subVectors(u.end,h.end),l.dot(o)<0?p.end.copy(u.end):p.end.copy(h.end)),!0)}}}();cl.prototype.distanceToPoint=function(){const t=new $;return function(n){return this.closestPointToPoint(n,t),n.distanceTo(t)}}();cl.prototype.distanceToTriangle=function(){const t=new $,e=new $,n=["a","b","c"],i=new Co,r=new Co;return function(o,a=null,l=null){const c=a||l?i:null;if(this.intersectsTriangle(o,c))return(a||l)&&(a&&c.getCenter(a),l&&c.getCenter(l)),0;let u=1/0;for(let h=0;h<3;h++){let f;const d=n[h],p=o[d];this.closestPointToPoint(p,t),f=p.distanceToSquared(t),f<u&&(u=f,a&&a.copy(t),l&&l.copy(p));const m=this[d];o.closestPointToPoint(m,t),f=m.distanceToSquared(t),f<u&&(u=f,a&&a.copy(m),l&&l.copy(t))}for(let h=0;h<3;h++){const f=n[h],d=n[(h+1)%3];i.set(this[f],this[d]);for(let p=0;p<3;p++){const m=n[p],g=n[(p+1)%3];r.set(o[m],o[g]),zI(i,r,t,e);const _=t.distanceToSquared(e);_<u&&(u=_,a&&a.copy(t),l&&l.copy(e))}}return Math.sqrt(u)}}();class pa extends di{constructor(...e){super(...e),this.isOrientedBox=!0,this.matrix=new Ze,this.invMatrix=new Ze,this.points=new Array(8).fill().map(()=>new $),this.satAxes=new Array(3).fill().map(()=>new $),this.satBounds=new Array(3).fill().map(()=>new da),this.alignedSatBounds=new Array(3).fill().map(()=>new da),this.needsUpdate=!1}set(e,n,i){super.set(e,n),this.matrix.copy(i),this.needsUpdate=!0}copy(e){super.copy(e),this.matrix.copy(e.matrix),this.needsUpdate=!0}}pa.prototype.update=function(){return function(){const e=this.matrix,n=this.min,i=this.max,r=this.points;for(let c=0;c<=1;c++)for(let u=0;u<=1;u++)for(let h=0;h<=1;h++){const f=1*c|2*u|4*h,d=r[f];d.x=c?i.x:n.x,d.y=u?i.y:n.y,d.z=h?i.z:n.z,d.applyMatrix4(e)}const s=this.satBounds,o=this.satAxes,a=r[0];for(let c=0;c<3;c++){const u=o[c],h=s[c],f=1<<c,d=r[f];u.subVectors(a,d),h.setFromPoints(u,r)}const l=this.alignedSatBounds;l[0].setFromPointsField(r,"x"),l[1].setFromPointsField(r,"y"),l[2].setFromPointsField(r,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1}}();pa.prototype.intersectsBox=function(){const t=new da;return function(n){this.needsUpdate&&this.update();const i=n.min,r=n.max,s=this.satBounds,o=this.satAxes,a=this.alignedSatBounds;if(t.min=i.x,t.max=r.x,a[0].isSeparated(t)||(t.min=i.y,t.max=r.y,a[1].isSeparated(t))||(t.min=i.z,t.max=r.z,a[2].isSeparated(t)))return!1;for(let l=0;l<3;l++){const c=o[l],u=s[l];if(t.setFromBox(c,n),u.isSeparated(t))return!1}return!0}}();pa.prototype.intersectsTriangle=function(){const t=new cl,e=new Array(3),n=new da,i=new da,r=new $;return function(o){this.needsUpdate&&this.update(),o.isExtendedTriangle?o.needsUpdate&&o.update():(t.copy(o),t.update(),o=t);const a=this.satBounds,l=this.satAxes;e[0]=o.a,e[1]=o.b,e[2]=o.c;for(let f=0;f<3;f++){const d=a[f],p=l[f];if(n.setFromPoints(p,e),d.isSeparated(n))return!1}const c=o.satBounds,u=o.satAxes,h=this.points;for(let f=0;f<3;f++){const d=c[f],p=u[f];if(n.setFromPoints(p,h),d.isSeparated(n))return!1}for(let f=0;f<3;f++){const d=l[f];for(let p=0;p<4;p++){const m=u[p];if(r.crossVectors(d,m),n.setFromPoints(r,e),i.setFromPoints(r,h),n.isSeparated(i))return!1}}return!0}}();pa.prototype.closestPointToPoint=function(){return function(e,n){return this.needsUpdate&&this.update(),n.copy(e).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),n}}();pa.prototype.distanceToPoint=function(){const t=new $;return function(n){return this.closestPointToPoint(n,t),n.distanceTo(t)}}();pa.prototype.distanceToBox=function(){const t=["x","y","z"],e=new Array(12).fill().map(()=>new Co),n=new Array(12).fill().map(()=>new Co),i=new $,r=new $;return function(o,a=0,l=null,c=null){if(this.needsUpdate&&this.update(),this.intersectsBox(o))return(l||c)&&(o.getCenter(r),this.closestPointToPoint(r,i),o.closestPointToPoint(i,r),l&&l.copy(i),c&&c.copy(r)),0;const u=a*a,h=o.min,f=o.max,d=this.points;let p=1/0;for(let g=0;g<8;g++){const _=d[g];r.copy(_).clamp(h,f);const y=_.distanceToSquared(r);if(y<p&&(p=y,l&&l.copy(_),c&&c.copy(r),y<u))return Math.sqrt(y)}let m=0;for(let g=0;g<3;g++)for(let _=0;_<=1;_++)for(let y=0;y<=1;y++){const x=(g+1)%3,E=(g+2)%3,w=_<<x|y<<E,S=1<<g|_<<x|y<<E,b=d[w],M=d[S];e[m].set(b,M);const B=t[g],L=t[x],F=t[E],U=n[m],k=U.start,X=U.end;k[B]=h[B],k[L]=_?h[L]:f[L],k[F]=y?h[F]:f[L],X[B]=f[B],X[L]=_?h[L]:f[L],X[F]=y?h[F]:f[L],m++}for(let g=0;g<=1;g++)for(let _=0;_<=1;_++)for(let y=0;y<=1;y++){r.x=g?f.x:h.x,r.y=_?f.y:h.y,r.z=y?f.z:h.z,this.closestPointToPoint(r,i);const x=r.distanceToSquared(i);if(x<p&&(p=x,l&&l.copy(i),c&&c.copy(r),x<u))return Math.sqrt(x)}for(let g=0;g<12;g++){const _=e[g];for(let y=0;y<12;y++){const x=n[y];zI(_,x,i,r);const E=i.distanceToSquared(r);if(E<p&&(p=E,l&&l.copy(i),c&&c.copy(r),E<u))return Math.sqrt(E)}}return Math.sqrt(p)}}();const Zg=new $,$g=new $,ev=new $,xF=new mt,EF=new mt,wF=new mt,MF=new $;function t_e(t,e,n,i,r,s){let o;return s===Vy?o=t.intersectTriangle(i,n,e,!0,r):o=t.intersectTriangle(e,n,i,s!==Po,r),o===null?null:{distance:t.origin.distanceTo(r),point:r.clone()}}function n_e(t,e,n,i,r,s,o){Zg.fromBufferAttribute(e,i),$g.fromBufferAttribute(e,r),ev.fromBufferAttribute(e,s);const a=t_e(t,Zg,$g,ev,MF,o);if(a){n&&(xF.fromBufferAttribute(n,i),EF.fromBufferAttribute(n,r),wF.fromBufferAttribute(n,s),a.uv=Hm.getUV(MF,Zg,$g,ev,xF,EF,wF,new mt));const l={a:i,b:r,c:s,normal:new $,materialIndex:0};Hm.getNormal(Zg,$g,ev,l.normal),a.face=l,a.faceIndex=i}return a}function s9(t,e,n,i,r){const s=i*3,o=t.index.getX(s),a=t.index.getX(s+1),l=t.index.getX(s+2),c=n_e(n,t.attributes.position,t.attributes.uv,o,a,l,e);return c?(c.faceIndex=i,r&&r.push(c),c):null}function i_e(t,e,n,i,r,s){for(let o=i,a=i+r;o<a;o++)s9(t,e,n,o,s)}function r_e(t,e,n,i,r){let s=1/0,o=null;for(let a=i,l=i+r;a<l;a++){const c=s9(t,e,n,a);c&&c.distance<s&&(o=c,s=c.distance)}return o}function CF(t,e,n){return t===null||(t.point.applyMatrix4(e.matrixWorld),t.distance=t.point.distanceTo(n.ray.origin),t.object=e,t.distance<n.near||t.distance>n.far)?null:t}function ea(t,e,n,i){const r=t.a,s=t.b,o=t.c;let a=e,l=e+1,c=e+2;n&&(a=n.getX(e),l=n.getX(e+1),c=n.getX(e+2)),r.x=i.getX(a),r.y=i.getY(a),r.z=i.getZ(a),s.x=i.getX(l),s.y=i.getY(l),s.z=i.getZ(l),o.x=i.getX(c),o.y=i.getY(c),o.z=i.getZ(c)}function SF(t,e,n,i,r,s,o){const a=n.index,l=n.attributes.position;for(let c=t,u=e+t;c<u;c++)if(ea(o,c*3,a,l),o.needsUpdate=!0,i(o,c,r,s))return!0;return!1}class o9{constructor(e){this._getNewPrimitive=e,this._primitives=[]}getPrimitive(){const e=this._primitives;return e.length===0?this._getNewPrimitive():e.pop()}releasePrimitive(e){this._primitives.push(e)}}function Ha(t,e){return e[t+15]===65535}function Wu(t,e){return e[t+6]}function Ld(t,e){return e[t+14]}function $m(t){return t+8}function kd(t,e){return e[t+6]}function a9(t,e){return e[t+7]}const Zf=new di,q_=new $,s_e=["x","y","z"];function wS(t,e,n,i,r){let s=t*2,o=h0,a=pc,l=mc;if(Ha(s,a)){const u=Wu(t,l),h=Ld(s,a);i_e(e,n,i,u,h,r)}else{const u=$m(t);J_(u,o,i,q_)&&wS(u,e,n,i,r);const h=kd(t,l);J_(h,o,i,q_)&&wS(h,e,n,i,r)}}function MS(t,e,n,i){let r=t*2,s=h0,o=pc,a=mc;if(Ha(r,o)){const c=Wu(t,a),u=Ld(r,o);return r_e(e,n,i,c,u)}else{const c=a9(t,a),u=s_e[c],f=i.direction[u]>=0;let d,p;f?(d=$m(t),p=kd(t,a)):(d=kd(t,a),p=$m(t));const g=J_(d,s,i,q_)?MS(d,e,n,i):null;if(g){const x=g.point[u];if(f?x<=s[p+c]:x>=s[p+c+3])return g}const y=J_(p,s,i,q_)?MS(p,e,n,i):null;return g&&y?g.distance<=y.distance?g:y:g||y||null}}const o_e=function(){let t,e;const n=[],i=new o9(()=>new di);return function(...o){t=i.getPrimitive(),e=i.getPrimitive(),n.push(t,e);const a=r(...o);i.releasePrimitive(t),i.releasePrimitive(e),n.pop(),n.pop();const l=n.length;return l>0&&(e=n[l-1],t=n[l-2]),a};function r(s,o,a,l,c=null,u=0,h=0){function f(x){let E=x*2,w=pc,S=mc;for(;!Ha(E,w);)x=$m(x),E=x*2;return Wu(x,S)}function d(x){let E=x*2,w=pc,S=mc;for(;!Ha(E,w);)x=kd(x,S),E=x*2;return Wu(x,S)+Ld(E,w)}let p=s*2,m=h0,g=pc,_=mc;if(Ha(p,g)){const x=Wu(s,_),E=Ld(p,g);return ra(s,m,t),l(x,E,!1,h,u+s,t)}else{const x=$m(s),E=kd(s,_);let w=x,S=E,b,M,T,B;if(c&&(T=t,B=e,ra(w,m,T),ra(S,m,B),b=c(T),M=c(B),M<b)){w=E,S=x;const Z=b;b=M,M=Z,T=B}T||(T=t,ra(w,m,T));const L=Ha(w*2,g),F=a(T,L,b,h+1,u+w);let U;if(F===AF){const Z=f(w),O=d(w)-Z;U=l(Z,O,!0,h+1,u+w,T)}else U=F&&r(w,o,a,l,c,u,h+1);if(U)return!0;B=e,ra(S,m,B);const k=Ha(S*2,g),X=a(B,k,M,h+1,u+S);let Y;if(X===AF){const Z=f(S),O=d(S)-Z;Y=l(Z,O,!0,h+1,u+S,B)}else Y=X&&r(S,o,a,l,c,u,h+1);return!!Y}}}(),a_e=function(){const t=new cl,e=new cl,n=new Ze,i=new pa,r=new pa;return function s(o,a,l,c,u=null){let h=o*2,f=h0,d=pc,p=mc;if(u===null&&(l.boundingBox||l.computeBoundingBox(),i.set(l.boundingBox.min,l.boundingBox.max,c),u=i),Ha(h,d)){const g=a,_=g.index,y=g.attributes.position,x=l.index,E=l.attributes.position,w=Wu(o,p),S=Ld(h,d);if(n.copy(c).invert(),l.boundsTree)return ra(o,f,r),r.matrix.copy(n),r.needsUpdate=!0,l.boundsTree.shapecast({intersectsBounds:M=>r.intersectsBox(M),intersectsTriangle:M=>{M.a.applyMatrix4(c),M.b.applyMatrix4(c),M.c.applyMatrix4(c),M.needsUpdate=!0;for(let T=w*3,B=(S+w)*3;T<B;T+=3)if(ea(e,T,_,y),e.needsUpdate=!0,M.intersectsTriangle(e))return!0;return!1}});for(let b=w*3,M=S+w*3;b<M;b+=3){ea(t,b,_,y),t.a.applyMatrix4(n),t.b.applyMatrix4(n),t.c.applyMatrix4(n),t.needsUpdate=!0;for(let T=0,B=x.count;T<B;T+=3)if(ea(e,T,x,E),e.needsUpdate=!0,t.intersectsTriangle(e))return!0}}else{const g=o+8,_=p[o+6];return ra(g,f,Zf),!!(u.intersectsBox(Zf)&&s(g,a,l,c,u)||(ra(_,f,Zf),u.intersectsBox(Zf)&&s(_,a,l,c,u)))}}}();function J_(t,e,n,i){return ra(t,e,Zf),n.intersectBox(Zf,i)}const CS=[];let qv,h0,pc,mc;function Dp(t){qv&&CS.push(qv),qv=t,h0=new Float32Array(t),pc=new Uint16Array(t),mc=new Uint32Array(t)}function tv(){qv=null,h0=null,pc=null,mc=null,CS.length&&Dp(CS.pop())}const Fw=Symbol("skip tree generation"),Lw=new di,kw=new di,wf=new Ze,lu=new pa,pp=new pa,mp=new $,nv=new $,l_e=new $,c_e=new $,u_e=new $,bF=new di,Wo=new o9(()=>new cl);class dd{static serialize(e,n={}){if(n.isBufferGeometry)return console.warn("MeshBVH.serialize: The arguments for the function have changed. See documentation for new signature."),dd.serialize(arguments[0],{cloneBuffers:arguments[2]===void 0?!0:arguments[2]});n={cloneBuffers:!0,...n};const i=e.geometry,r=e._roots,s=i.getIndex();let o;return n.cloneBuffers?o={roots:r.map(a=>a.slice()),index:s.array.slice()}:o={roots:r,index:s.array},o}static deserialize(e,n,i={}){if(typeof i=="boolean")return console.warn("MeshBVH.deserialize: The arguments for the function have changed. See documentation for new signature."),dd.deserialize(arguments[0],arguments[1],{setIndex:arguments[2]===void 0?!0:arguments[2]});i={setIndex:!0,...i};const{index:r,roots:s}=e,o=new dd(n,{...i,[Fw]:!0});if(o._roots=s,i.setIndex){const a=n.getIndex();if(a===null){const l=new On(e.index,1,!1);n.setIndex(l)}else a.array!==r&&(a.array.set(r),a.needsUpdate=!0)}return o}constructor(e,n={}){if(e.isBufferGeometry){if(e.index&&e.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.")}else throw new Error("MeshBVH: Only BufferGeometries are supported.");if(n=Object.assign({strategy:i9,maxDepth:40,maxLeafTris:10,verbose:!0,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,[Fw]:!1},n),n.useSharedArrayBuffer&&typeof SharedArrayBuffer>"u")throw new Error("MeshBVH: SharedArrayBuffer is not available.");this._roots=null,n[Fw]||(this._roots=Kve(e,n),!e.boundingBox&&n.setBoundingBox&&(e.boundingBox=this.getBoundingBox(new di))),this.geometry=e}refit(e=null){e&&Array.isArray(e)&&(e=new Set(e));const n=this.geometry,i=n.index.array,r=n.attributes.position;let s,o,a,l,c=0;const u=this._roots;for(let f=0,d=u.length;f<d;f++)s=u[f],o=new Uint32Array(s),a=new Uint16Array(s),l=new Float32Array(s),h(0,c),c+=s.byteLength;function h(f,d,p=!1){const m=f*2;if(a[m+15]===ES){const _=o[f+6],y=a[m+14];let x=1/0,E=1/0,w=1/0,S=-1/0,b=-1/0,M=-1/0;for(let T=3*_,B=3*(_+y);T<B;T++){const L=i[T],F=r.getX(L),U=r.getY(L),k=r.getZ(L);F<x&&(x=F),F>S&&(S=F),U<E&&(E=U),U>b&&(b=U),k<w&&(w=k),k>M&&(M=k)}return l[f+0]!==x||l[f+1]!==E||l[f+2]!==w||l[f+3]!==S||l[f+4]!==b||l[f+5]!==M?(l[f+0]=x,l[f+1]=E,l[f+2]=w,l[f+3]=S,l[f+4]=b,l[f+5]=M,!0):!1}else{const _=f+8,y=o[f+6],x=_+d,E=y+d;let w=p,S=!1,b=!1;e?w||(S=e.has(x),b=e.has(E),w=!S&&!b):(S=!0,b=!0);const M=w||S,T=w||b;let B=!1;M&&(B=h(_,d,w));let L=!1;T&&(L=h(y,d,w));const F=B||L;if(F)for(let U=0;U<3;U++){const k=_+U,X=y+U,Y=l[k],Z=l[k+3],G=l[X],O=l[X+3];l[f+U]=Y<G?Y:G,l[f+U+3]=Z>O?Z:O}return F}}}traverse(e,n=0){const i=this._roots[n],r=new Uint32Array(i),s=new Uint16Array(i);o(0);function o(a,l=0){const c=a*2,u=s[c+15]===ES;if(u){const h=r[a+6],f=s[c+14];e(l,u,new Float32Array(i,a*4,6),h,f)}else{const h=a+Vu/4,f=r[a+6],d=r[a+7];e(l,u,new Float32Array(i,a*4,6),d)||(o(h,l+1),o(f,l+1))}}}raycast(e,n=zm){const i=this._roots,r=this.geometry,s=[],o=n.isMaterial,a=Array.isArray(n),l=r.groups,c=o?n.side:n;for(let u=0,h=i.length;u<h;u++){const f=a?n[l[u].materialIndex].side:c,d=s.length;if(Dp(i[u]),wS(0,r,f,e,s),tv(),a){const p=l[u].materialIndex;for(let m=d,g=s.length;m<g;m++)s[m].face.materialIndex=p}}return s}raycastFirst(e,n=zm){const i=this._roots,r=this.geometry,s=n.isMaterial,o=Array.isArray(n);let a=null;const l=r.groups,c=s?n.side:n;for(let u=0,h=i.length;u<h;u++){const f=o?n[l[u].materialIndex].side:c;Dp(i[u]);const d=MS(0,r,f,e);tv(),d!=null&&(a==null||d.distance<a.distance)&&(a=d,o&&(d.face.materialIndex=l[u].materialIndex))}return a}intersectsGeometry(e,n){const i=this.geometry;let r=!1;for(const s of this._roots)if(Dp(s),r=a_e(0,i,e,n),tv(),r)break;return r}shapecast(e,n,i){const r=this.geometry;if(e instanceof Function){if(n){const f=n;n=(d,p,m,g)=>{const _=p*3;return f(d,_,_+1,_+2,m,g)}}e={boundsTraverseOrder:i,intersectsBounds:e,intersectsTriangle:n,intersectsRange:null},console.warn("MeshBVH: Shapecast function signature has changed and now takes an object of callbacks as a second argument. See docs for new signature.")}const s=Wo.getPrimitive();let{boundsTraverseOrder:o,intersectsBounds:a,intersectsRange:l,intersectsTriangle:c}=e;if(l&&c){const f=l;l=(d,p,m,g,_)=>f(d,p,m,g,_)?!0:SF(d,p,r,c,m,g,s)}else l||(c?l=(f,d,p,m)=>SF(f,d,r,c,p,m,s):l=(f,d,p)=>p);let u=!1,h=0;for(const f of this._roots){if(Dp(f),u=o_e(0,r,a,l,o,h),tv(),u)break;h+=f.byteLength}return Wo.releasePrimitive(s),u}bvhcast(e,n,i){let{intersectsRanges:r,intersectsTriangles:s}=i;const o=this.geometry.index,a=this.geometry.attributes.position,l=e.geometry.index,c=e.geometry.attributes.position;wf.copy(n).invert();const u=Wo.getPrimitive(),h=Wo.getPrimitive();if(s){let p=function(m,g,_,y,x,E,w,S){for(let b=_,M=_+y;b<M;b++){ea(h,b*3,l,c),h.a.applyMatrix4(n),h.b.applyMatrix4(n),h.c.applyMatrix4(n),h.needsUpdate=!0;for(let T=m,B=m+g;T<B;T++)if(ea(u,T*3,o,a),u.needsUpdate=!0,s(u,h,T,b,x,E,w,S))return!0}return!1};var d=p;if(r){const m=r;r=function(g,_,y,x,E,w,S,b){return m(g,_,y,x,E,w,S,b)?!0:p(g,_,y,x,E,w,S,b)}}else r=p}e.getBoundingBox(kw),kw.applyMatrix4(n);const f=this.shapecast({intersectsBounds:p=>kw.intersectsBox(p),intersectsRange:(p,m,g,_,y,x)=>(Lw.copy(x),Lw.applyMatrix4(wf),e.shapecast({intersectsBounds:E=>Lw.intersectsBox(E),intersectsRange:(E,w,S,b,M)=>r(p,m,E,w,_,y,b,M)}))});return Wo.releasePrimitive(u),Wo.releasePrimitive(h),f}intersectsBox(e,n){return lu.set(e.min,e.max,n),lu.needsUpdate=!0,this.shapecast({intersectsBounds:i=>lu.intersectsBox(i),intersectsTriangle:i=>lu.intersectsTriangle(i)})}intersectsSphere(e){return this.shapecast({intersectsBounds:n=>e.intersectsBox(n),intersectsTriangle:n=>n.intersectsSphere(e)})}closestPointToGeometry(e,n,i={},r={},s=0,o=1/0){e.boundingBox||e.computeBoundingBox(),lu.set(e.boundingBox.min,e.boundingBox.max,n),lu.needsUpdate=!0;const a=this.geometry,l=a.attributes.position,c=a.index,u=e.attributes.position,h=e.index,f=Wo.getPrimitive(),d=Wo.getPrimitive();let p=nv,m=l_e,g=null,_=null;r&&(g=c_e,_=u_e);let y=1/0,x=null,E=null;return wf.copy(n).invert(),pp.matrix.copy(wf),this.shapecast({boundsTraverseOrder:w=>lu.distanceToBox(w),intersectsBounds:(w,S,b)=>b<y&&b<o?(S&&(pp.min.copy(w.min),pp.max.copy(w.max),pp.needsUpdate=!0),!0):!1,intersectsRange:(w,S)=>{if(e.boundsTree)return e.boundsTree.shapecast({boundsTraverseOrder:b=>pp.distanceToBox(b),intersectsBounds:(b,M,T)=>T<y&&T<o,intersectsRange:(b,M)=>{for(let T=b*3,B=(b+M)*3;T<B;T+=3){ea(d,T,h,u),d.a.applyMatrix4(n),d.b.applyMatrix4(n),d.c.applyMatrix4(n),d.needsUpdate=!0;for(let L=w*3,F=(w+S)*3;L<F;L+=3){ea(f,L,c,l),f.needsUpdate=!0;const U=f.distanceToTriangle(d,p,g);if(U<y&&(m.copy(p),_&&_.copy(g),y=U,x=L/3,E=T/3),U<s)return!0}}}});{const b=h?h.count:u.count;for(let M=0,T=b;M<T;M+=3){ea(d,M,h,u),d.a.applyMatrix4(n),d.b.applyMatrix4(n),d.c.applyMatrix4(n),d.needsUpdate=!0;for(let B=w*3,L=(w+S)*3;B<L;B+=3){ea(f,B,c,l),f.needsUpdate=!0;const F=f.distanceToTriangle(d,p,g);if(F<y&&(m.copy(p),_&&_.copy(g),y=F,x=B/3,E=M/3),F<s)return!0}}}}}),Wo.releasePrimitive(f),Wo.releasePrimitive(d),y===1/0?null:(i.point?i.point.copy(m):i.point=m.clone(),i.distance=y,i.faceIndex=x,r&&(r.point?r.point.copy(_):r.point=_.clone(),r.point.applyMatrix4(wf),m.applyMatrix4(wf),r.distance=m.sub(r.point).length(),r.faceIndex=E),i)}closestPointToPoint(e,n={},i=0,r=1/0){const s=i*i,o=r*r;let a=1/0,l=null;if(this.shapecast({boundsTraverseOrder:u=>(mp.copy(e).clamp(u.min,u.max),mp.distanceToSquared(e)),intersectsBounds:(u,h,f)=>f<a&&f<o,intersectsTriangle:(u,h)=>{u.closestPointToPoint(e,mp);const f=e.distanceToSquared(mp);return f<a&&(nv.copy(mp),a=f,l=h),f<s}}),a===1/0)return null;const c=Math.sqrt(a);return n.point?n.point.copy(nv):n.point=nv.clone(),n.distance=c,n.faceIndex=l,n}getBoundingBox(e){return e.makeEmpty(),this._roots.forEach(i=>{ra(0,new Float32Array(i),bF),e.union(bF)}),e}}const Uw=new xh,IF=new Ze,h_e=rt.prototype.raycast;function f_e(t,e){if(this.geometry.boundsTree){if(this.material===void 0)return;IF.copy(this.matrixWorld).invert(),Uw.copy(t.ray).applyMatrix4(IF);const n=this.geometry.boundsTree;if(t.firstHitOnly===!0){const i=CF(n.raycastFirst(Uw,this.material),this,t);i&&e.push(i)}else{const i=n.raycast(Uw,this.material);for(let r=0,s=i.length;r<s;r++){const o=CF(i[r],this,t);o&&e.push(o)}}}else h_e.call(this,t,e)}function d_e(t){return this.boundsTree=new dd(this,t),this.boundsTree}function p_e(){this.boundsTree=null}function m_e(t){switch(t){case 1:return"R";case 2:return"RG";case 3:return"RGBA";case 4:return"RGBA"}throw new Error}function A_e(t){switch(t){case 1:return Jf;case 2:return qf;case 3:return us;case 4:return us}}function TF(t){switch(t){case 1:return nN;case 2:return D3;case 3:return N_;case 4:return N_}}class l9 extends bd{constructor(){super(),this.minFilter=Ja,this.magFilter=Ja,this.generateMipmaps=!1,this.overrideItemSize=null,this._forcedType=null}updateFrom(e){const n=this.overrideItemSize,i=e.itemSize,r=e.count;if(n!==null){if(i*r%n!==0)throw new Error("VertexAttributeTexture: overrideItemSize must divide evenly into buffer length.");e.itemSize=n,e.count=r*i/n}const s=e.itemSize,o=e.count,a=e.normalized,l=e.array.constructor,c=l.BYTES_PER_ELEMENT;let u=this._forcedType,h=s;if(u===null)switch(l){case Float32Array:u=Tr;break;case Uint8Array:case Uint16Array:case Uint32Array:u=cd;break;case Int8Array:case Int16Array:case Int32Array:u=Qv;break}let f,d,p,m,g=m_e(s);switch(u){case Tr:p=1,d=A_e(s),a&&c===1?(m=l,g+="8",l===Uint8Array?f=Zo:(f=NC,g+="_SNORM")):(m=Float32Array,g+="32F",f=Tr);break;case Qv:g+=c*8+"I",p=a?Math.pow(2,l.BYTES_PER_ELEMENT*8-1):1,d=TF(s),c===1?(m=Int8Array,f=NC):c===2?(m=Int16Array,f=sN):(m=Int32Array,f=Qv);break;case cd:g+=c*8+"UI",p=a?Math.pow(2,l.BYTES_PER_ELEMENT*8-1):1,d=TF(s),c===1?(m=Uint8Array,f=Zo):c===2?(m=Uint16Array,f=M1):(m=Uint32Array,f=cd);break}h===3&&(d===us||d===N_)&&(h=4);const _=Math.ceil(Math.sqrt(o)),y=h*_*_,x=new m(y);for(let E=0;E<o;E++){const w=h*E;x[w]=e.getX(E)/p,s>=2&&(x[w+1]=e.getY(E)/p),s>=3&&(x[w+2]=e.getZ(E)/p,h===4&&(x[w+3]=1)),s>=4&&(x[w+3]=e.getW(E)/p)}this.internalFormat=g,this.format=d,this.type=f,this.image.width=_,this.image.height=_,this.image.data=x,this.needsUpdate=!0,this.dispose(),e.itemSize=i,e.count=r}}class g_e extends l9{constructor(){super(),this._forcedType=cd}}class v_e extends l9{constructor(){super(),this._forcedType=Tr}}function __e(t,e,n){const i=t._roots;if(i.length!==1)throw new Error("MeshBVHUniformStruct: Multi-root BVHs not supported.");const r=i[0],s=new Uint16Array(r),o=new Uint32Array(r),a=new Float32Array(r),l=r.byteLength/Vu,c=2*Math.ceil(Math.sqrt(l/2)),u=new Float32Array(4*c*c),h=Math.ceil(Math.sqrt(l)),f=new Uint32Array(2*h*h);for(let d=0;d<l;d++){const p=d*Vu/4,m=p*2,g=p;for(let _=0;_<3;_++)u[8*d+0+_]=a[g+0+_],u[8*d+4+_]=a[g+3+_];if(Ha(m,s)){const _=Ld(m,s),y=Wu(p,o),x=4294901760|_;f[d*2+0]=x,f[d*2+1]=y}else{const _=4*kd(p,o)/Vu,y=a9(p,o);f[d*2+0]=y,f[d*2+1]=_}}e.image.data=u,e.image.width=c,e.image.height=c,e.format=us,e.type=Tr,e.internalFormat="RGBA32F",e.minFilter=Ja,e.magFilter=Ja,e.generateMipmaps=!1,e.needsUpdate=!0,e.dispose(),n.image.data=f,n.image.width=h,n.image.height=h,n.format=D3,n.type=cd,n.internalFormat="RG32UI",n.minFilter=Ja,n.magFilter=Ja,n.generateMipmaps=!1,n.needsUpdate=!0,n.dispose()}class y_e{constructor(){this.autoDispose=!0,this.index=new g_e,this.position=new v_e,this.bvhBounds=new bd,this.bvhContents=new bd,this.index.overrideItemSize=3}updateFrom(e){const{geometry:n}=e;__e(e,this.bvhBounds,this.bvhContents),this.index.updateFrom(n.index),this.position.updateFrom(n.attributes.position)}dispose(){const{index:e,position:n,bvhBounds:i,bvhContents:r}=this;e&&e.dispose(),n&&n.dispose(),i&&i.dispose(),r&&r.dispose()}}const x_e=`
#ifndef TRI_INTERSECT_EPSILON
#define TRI_INTERSECT_EPSILON 1e-5
#endif

#ifndef INFINITY
#define INFINITY 1e20
#endif

struct BVH {

	usampler2D index;
	sampler2D position;

	sampler2D bvhBounds;
	usampler2D bvhContents;

};

// Note that a struct cannot be used for the hit record including faceIndices, faceNormal, barycoord,
// side, and dist because on some mobile GPUS (such as Adreno) numbers are afforded less precision specifically
// when in a struct leading to inaccurate hit results. See KhronosGroup/WebGL#3351 for more details.
`,E_e=`

uvec4 uTexelFetch1D( usampler2D tex, uint index ) {

	uint width = uint( textureSize( tex, 0 ).x );
	uvec2 uv;
	uv.x = index % width;
	uv.y = index / width;

	return texelFetch( tex, ivec2( uv ), 0 );

}

ivec4 iTexelFetch1D( isampler2D tex, uint index ) {

	uint width = uint( textureSize( tex, 0 ).x );
	uvec2 uv;
	uv.x = index % width;
	uv.y = index / width;

	return texelFetch( tex, ivec2( uv ), 0 );

}

vec4 texelFetch1D( sampler2D tex, uint index ) {

	uint width = uint( textureSize( tex, 0 ).x );
	uvec2 uv;
	uv.x = index % width;
	uv.y = index / width;

	return texelFetch( tex, ivec2( uv ), 0 );

}

vec4 textureSampleBarycoord( sampler2D tex, vec3 barycoord, uvec3 faceIndices ) {

	return
		barycoord.x * texelFetch1D( tex, faceIndices.x ) +
		barycoord.y * texelFetch1D( tex, faceIndices.y ) +
		barycoord.z * texelFetch1D( tex, faceIndices.z );

}

void ndcToCameraRay(
	vec2 coord, mat4 cameraWorld, mat4 invProjectionMatrix,
	out vec3 rayOrigin, out vec3 rayDirection
) {

	// get camera look direction and near plane for camera clipping
	vec4 lookDirection = cameraWorld * vec4( 0.0, 0.0, - 1.0, 0.0 );
	vec4 nearVector = invProjectionMatrix * vec4( 0.0, 0.0, - 1.0, 1.0 );
	float near = abs( nearVector.z / nearVector.w );

	// get the camera direction and position from camera matrices
	vec4 origin = cameraWorld * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec4 direction = invProjectionMatrix * vec4( coord, 0.5, 1.0 );
	direction /= direction.w;
	direction = cameraWorld * direction - origin;

	// slide the origin along the ray until it sits at the near clip plane position
	origin.xyz += direction.xyz * near / dot( direction, lookDirection );

	rayOrigin = origin.xyz;
	rayDirection = direction.xyz;

}

float intersectsBounds( vec3 rayOrigin, vec3 rayDirection, vec3 boundsMin, vec3 boundsMax ) {

	// https://www.reddit.com/r/opengl/comments/8ntzz5/fast_glsl_ray_box_intersection/
	// https://tavianator.com/2011/ray_box.html
	vec3 invDir = 1.0 / rayDirection;

	// find intersection distances for each plane
	vec3 tMinPlane = invDir * ( boundsMin - rayOrigin );
	vec3 tMaxPlane = invDir * ( boundsMax - rayOrigin );

	// get the min and max distances from each intersection
	vec3 tMinHit = min( tMaxPlane, tMinPlane );
	vec3 tMaxHit = max( tMaxPlane, tMinPlane );

	// get the furthest hit distance
	vec2 t = max( tMinHit.xx, tMinHit.yz );
	float t0 = max( t.x, t.y );

	// get the minimum hit distance
	t = min( tMaxHit.xx, tMaxHit.yz );
	float t1 = min( t.x, t.y );

	// set distance to 0.0 if the ray starts inside the box
	float dist = max( t0, 0.0 );

	return t1 >= dist ? dist : INFINITY;

}

bool intersectsTriangle(
	vec3 rayOrigin, vec3 rayDirection, vec3 a, vec3 b, vec3 c,
	out vec3 barycoord, out vec3 norm, out float dist, out float side
) {

	// https://stackoverflow.com/questions/42740765/intersection-between-line-and-triangle-in-3d
	vec3 edge1 = b - a;
	vec3 edge2 = c - a;
	norm = cross( edge1, edge2 );

	float det = - dot( rayDirection, norm );
	float invdet = 1.0 / det;

	vec3 AO = rayOrigin - a;
	vec3 DAO = cross( AO, rayDirection );

	vec4 uvt;
	uvt.x = dot( edge2, DAO ) * invdet;
	uvt.y = - dot( edge1, DAO ) * invdet;
	uvt.z = dot( AO, norm ) * invdet;
	uvt.w = 1.0 - uvt.x - uvt.y;

	// set the hit information
	barycoord = uvt.wxy; // arranged in A, B, C order
	dist = uvt.z;
	side = sign( det );
	norm = side * normalize( norm );

	// add an epsilon to avoid misses between triangles
	uvt += vec4( TRI_INTERSECT_EPSILON );

	return all( greaterThanEqual( uvt, vec4( 0.0 ) ) );

}

bool intersectTriangles(
	BVH bvh, vec3 rayOrigin, vec3 rayDirection, uint offset, uint count,
	inout float minDistance,

	// output variables
	out uvec4 faceIndices, out vec3 faceNormal, out vec3 barycoord,
	out float side, out float dist
) {

	bool found = false;
	vec3 localBarycoord, localNormal;
	float localDist, localSide;
	for ( uint i = offset, l = offset + count; i < l; i ++ ) {

		uvec3 indices = uTexelFetch1D( bvh.index, i ).xyz;
		vec3 a = texelFetch1D( bvh.position, indices.x ).rgb;
		vec3 b = texelFetch1D( bvh.position, indices.y ).rgb;
		vec3 c = texelFetch1D( bvh.position, indices.z ).rgb;

		if (
			intersectsTriangle( rayOrigin, rayDirection, a, b, c, localBarycoord, localNormal, localDist, localSide )
			&& localDist < minDistance
		) {

			found = true;
			minDistance = localDist;

			faceIndices = uvec4( indices.xyz, i );
			faceNormal = localNormal;

			side = localSide;
			barycoord = localBarycoord;
			dist = localDist;

		}

	}

	return found;

}

float intersectsBVHNodeBounds( vec3 rayOrigin, vec3 rayDirection, BVH bvh, uint currNodeIndex ) {

	vec3 boundsMin = texelFetch1D( bvh.bvhBounds, currNodeIndex * 2u + 0u ).xyz;
	vec3 boundsMax = texelFetch1D( bvh.bvhBounds, currNodeIndex * 2u + 1u ).xyz;
	return intersectsBounds( rayOrigin, rayDirection, boundsMin, boundsMax );

}

bool bvhIntersectFirstHit(
	BVH bvh, vec3 rayOrigin, vec3 rayDirection,

	// output variables
	out uvec4 faceIndices, out vec3 faceNormal, out vec3 barycoord,
	out float side, out float dist
) {

	// stack needs to be twice as long as the deepest tree we expect because
	// we push both the left and right child onto the stack every traversal
	int ptr = 0;
	uint stack[ 60 ];
	stack[ 0 ] = 0u;

	float triangleDistance = 1e20;
	bool found = false;
	while ( ptr > - 1 && ptr < 60 ) {

		uint currNodeIndex = stack[ ptr ];
		ptr --;

		// check if we intersect the current bounds
		float boundsHitDistance = intersectsBVHNodeBounds( rayOrigin, rayDirection, bvh, currNodeIndex );
		if ( boundsHitDistance == INFINITY || boundsHitDistance > triangleDistance ) {

			continue;

		}

		uvec2 boundsInfo = uTexelFetch1D( bvh.bvhContents, currNodeIndex ).xy;
		bool isLeaf = bool( boundsInfo.x & 0xffff0000u );

		if ( isLeaf ) {

			uint count = boundsInfo.x & 0x0000ffffu;
			uint offset = boundsInfo.y;

			found = intersectTriangles(
				bvh, rayOrigin, rayDirection, offset, count, triangleDistance,
				faceIndices, faceNormal, barycoord, side, dist
			) || found;

		} else {

			uint leftIndex = currNodeIndex + 1u;
			uint splitAxis = boundsInfo.x & 0x0000ffffu;
			uint rightIndex = boundsInfo.y;

			bool leftToRight = rayDirection[ splitAxis ] >= 0.0;
			uint c1 = leftToRight ? leftIndex : rightIndex;
			uint c2 = leftToRight ? rightIndex : leftIndex;

			// set c2 in the stack so we traverse it later. We need to keep track of a pointer in
			// the stack while we traverse. The second pointer added is the one that will be
			// traversed first
			ptr ++;
			stack[ ptr ] = c2;

			ptr ++;
			stack[ ptr ] = c1;

		}

	}

	return found;

}

`;function w_e(t,e){R.exports.useEffect(()=>{if(t.current){t.current.raycast=f_e;const n=t.current.geometry;return n.computeBoundsTree=d_e,n.disposeBoundsTree=p_e,n.computeBoundsTree(e),()=>{n.boundsTree&&n.disposeBoundsTree()}}},[t,e])}function M_e(...t){const e=R.exports.useRef([]);return e.current=t.map(n=>R.exports.useContext(n)),R.exports.useMemo(()=>({children:n})=>t.reduceRight((i,r,s)=>se(r.Provider,{value:e.current[s],children:i}),n),[])}function C_e(t,e){const n=R.exports.useRef(),[i]=R.exports.useState(()=>e?e instanceof hr?{current:e}:e:n),[r]=R.exports.useState(()=>new h6(void 0)),s=R.exports.useRef({}),[o]=R.exports.useState(()=>{const a={};return t.forEach(l=>Object.defineProperty(a,l.name,{enumerable:!0,get(){if(i.current)return s.current[l.name]||(s.current[l.name]=r.clipAction(l,i.current))}})),{ref:i,clips:t,actions:a,names:t.map(l=>l.name),mixer:r}});return Ct((a,l)=>r.update(l)),R.exports.useEffect(()=>{const a=i.current;return()=>{s.current={},Object.values(o.actions).forEach(l=>{a&&r.uncacheAction(l,a)})}},[t]),o}function S_e(t){const e=R.exports.useRef(null),n=R.exports.useRef(!1),i=R.exports.useRef(!1),r=R.exports.useRef(t);return R.exports.useLayoutEffect(()=>void(r.current=t),[t]),R.exports.useEffect(()=>{const s=e.current;if(s){const o=cx(()=>(n.current=!1,!0)),a=s.onBeforeRender;s.onBeforeRender=()=>n.current=!0;const l=z3(()=>(n.current!==i.current&&(r.current==null||r.current(i.current=n.current)),!0));return()=>{s.onBeforeRender=a,o(),l()}}},[]),e}const b_e=`
#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
  vec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );
  #ifdef BOX_PROJECTED_ENV_MAP
    vWorldPosition = worldPosition.xyz;
  #endif
#endif
`,I_e=`
#ifdef BOX_PROJECTED_ENV_MAP
  uniform vec3 envMapSize;
  uniform vec3 envMapPosition;
  varying vec3 vWorldPosition;
    
  vec3 parallaxCorrectNormal( vec3 v, vec3 cubeSize, vec3 cubePos ) {
    vec3 nDir = normalize( v );
    vec3 rbmax = ( .5 * cubeSize + cubePos - vWorldPosition ) / nDir;
    vec3 rbmin = ( -.5 * cubeSize + cubePos - vWorldPosition ) / nDir;
    vec3 rbminmax;
    rbminmax.x = ( nDir.x > 0. ) ? rbmax.x : rbmin.x;
    rbminmax.y = ( nDir.y > 0. ) ? rbmax.y : rbmin.y;
    rbminmax.z = ( nDir.z > 0. ) ? rbmax.z : rbmin.z;
    float correction = min( min( rbminmax.x, rbminmax.y ), rbminmax.z );
    vec3 boxIntersection = vWorldPosition + nDir * correction;    
    return boxIntersection - cubePos;
  }
#endif
`,T_e=`
#ifdef BOX_PROJECTED_ENV_MAP
  worldNormal = parallaxCorrectNormal( worldNormal, envMapSize, envMapPosition );
#endif
`,B_e=`
#ifdef BOX_PROJECTED_ENV_MAP
  reflectVec = parallaxCorrectNormal( reflectVec, envMapSize, envMapPosition );
#endif
`;function R_e(t,e,n){t.defines.BOX_PROJECTED_ENV_MAP=!0,t.uniforms.envMapPosition={value:e},t.uniforms.envMapSize={value:n},t.vertexShader=`
  varying vec3 vWorldPosition;
  ${t.vertexShader.replace("#include <worldpos_vertex>",b_e)}`,t.fragmentShader=`
    ${I_e}
    ${t.fragmentShader.replace("#include <envmap_physical_pars_fragment>",Ri.envmap_physical_pars_fragment).replace("vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );",`vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
         ${T_e}
         `).replace("reflectVec = inverseTransformDirection( reflectVec, viewMatrix );",`reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
         ${B_e}
        `)}`}function P_e(t=new $,e=new $){const[n]=R.exports.useState(()=>({position:new $,size:new $}));hs(n,{position:t,size:e});const i=R.exports.useRef(null),r=R.exports.useMemo(()=>({ref:i,onBeforeCompile:s=>R_e(s,n.position,n.size),customProgramCacheKey:()=>JSON.stringify(n.position.toArray())+JSON.stringify(n.size.toArray())}),[...n.position.toArray(),...n.size.toArray()]);return R.exports.useLayoutEffect(()=>void(i.current.needsUpdate=!0),[n]),r}const BF=new di,iv=new $,D_e=({anchor:t,...e})=>{const n=R.exports.useRef(null),i=R.exports.useRef(null);return R.exports.useEffect(()=>{var r,s;(r=n.current)!=null&&(s=r.parent)!=null&&s.parent&&(i.current=n.current.parent,n.current.parent.parent.add(n.current))},[]),Ct(()=>{i.current&&(BF.setFromObject(i.current),BF.getSize(iv),n.current.position.set(i.current.position.x+iv.x*t[0]/2,i.current.position.y+iv.y*t[1]/2,i.current.position.z+iv.z*t[2]/2))}),se("group",{ref:n,...e})},F_e=R.exports.forwardRef(({children:t,curve:e},n)=>{const[i]=R.exports.useState(()=>new Fc),[r,s]=R.exports.useState(),o=R.exports.useRef();return R.exports.useEffect(()=>{o.current=new K0e(i.children[0]),s(o.current.object3D)},[t]),R.exports.useEffect(()=>{var a;e&&((a=o.current)==null||a.updateCurve(0,e))},[e]),R.exports.useImperativeHandle(n,()=>({moveAlongCurve:a=>{var l;(l=o.current)==null||l.moveAlongCurve(a)}})),vt(vs,{children:[r0(t,i),r&&se("primitive",{object:r})]})});var L_e=`#define GLSLIFY 1
vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}float snoise(vec3 v){const vec2 C=vec2(1.0/6.0,1.0/3.0);const vec4 D=vec4(0.0,0.5,1.0,2.0);vec3 i=floor(v+dot(v,C.yyy));vec3 x0=v-i+dot(i,C.xxx);vec3 g=step(x0.yzx,x0.xyz);vec3 l=1.0-g;vec3 i1=min(g.xyz,l.zxy);vec3 i2=max(g.xyz,l.zxy);vec3 x1=x0-i1+C.xxx;vec3 x2=x0-i2+C.yyy;vec3 x3=x0-D.yyy;i=mod289(i);vec4 p=permute(permute(permute(i.z+vec4(0.0,i1.z,i2.z,1.0))+i.y+vec4(0.0,i1.y,i2.y,1.0))+i.x+vec4(0.0,i1.x,i2.x,1.0));float n_=0.142857142857;vec3 ns=n_*D.wyz-D.xzx;vec4 j=p-49.0*floor(p*ns.z*ns.z);vec4 x_=floor(j*ns.z);vec4 y_=floor(j-7.0*x_);vec4 x=x_*ns.x+ns.yyyy;vec4 y=y_*ns.x+ns.yyyy;vec4 h=1.0-abs(x)-abs(y);vec4 b0=vec4(x.xy,y.xy);vec4 b1=vec4(x.zw,y.zw);vec4 s0=floor(b0)*2.0+1.0;vec4 s1=floor(b1)*2.0+1.0;vec4 sh=-step(h,vec4(0.0));vec4 a0=b0.xzyw+s0.xzyw*sh.xxyy;vec4 a1=b1.xzyw+s1.xzyw*sh.zzww;vec3 p0=vec3(a0.xy,h.x);vec3 p1=vec3(a0.zw,h.y);vec3 p2=vec3(a1.xy,h.z);vec3 p3=vec3(a1.zw,h.w);vec4 norm=taylorInvSqrt(vec4(dot(p0,p0),dot(p1,p1),dot(p2,p2),dot(p3,p3)));p0*=norm.x;p1*=norm.y;p2*=norm.z;p3*=norm.w;vec4 m=max(0.6-vec4(dot(x0,x0),dot(x1,x1),dot(x2,x2),dot(x3,x3)),0.0);m=m*m;return 42.0*dot(m*m,vec4(dot(p0,x0),dot(p1,x1),dot(p2,x2),dot(p3,x3)));}`;class k_e extends dl{constructor(e={}){super(e),this.setValues(e),this._time={value:0},this._distort={value:.4},this._radius={value:1}}onBeforeCompile(e){e.uniforms.time=this._time,e.uniforms.radius=this._radius,e.uniforms.distort=this._distort,e.vertexShader=`
      uniform float time;
      uniform float radius;
      uniform float distort;
      ${L_e}
      ${e.vertexShader}
    `,e.vertexShader=e.vertexShader.replace("#include <begin_vertex>",`
        float updateTime = time / 50.0;
        float noise = snoise(vec3(position / 2.0 + updateTime * 5.0));
        vec3 transformed = vec3(position * (noise * pow(distort, 2.0) + radius));
        `)}get time(){return this._time.value}set time(e){this._time.value=e}get distort(){return this._distort.value}set distort(e){this._distort.value=e}get radius(){return this._radius.value}set radius(e){this._radius.value=e}}const U_e=R.exports.forwardRef(({speed:t=1,...e},n)=>{const[i]=R.exports.useState(()=>new k_e);return Ct(r=>i&&(i.time=r.clock.getElapsedTime()*t)),se("primitive",{object:i,ref:n,attach:"material",...e})});class O_e extends $d{constructor(e={}){super(e),this.setValues(e),this._time={value:0},this._factor={value:1}}onBeforeCompile(e){e.uniforms.time=this._time,e.uniforms.factor=this._factor,e.vertexShader=`
      uniform float time;
      uniform float factor;
      ${e.vertexShader}
    `,e.vertexShader=e.vertexShader.replace("#include <begin_vertex>",`float theta = sin( time + position.y ) / 2.0 * factor;
        float c = cos( theta );
        float s = sin( theta );
        mat3 m = mat3( c, 0, s, 0, 1, 0, -s, 0, c );
        vec3 transformed = vec3( position ) * m;
        vNormal = vNormal * m;`)}get time(){return this._time.value}set time(e){this._time.value=e}get factor(){return this._factor.value}set factor(e){this._factor.value=e}}const N_e=R.exports.forwardRef(({speed:t=1,...e},n)=>{const[i]=R.exports.useState(()=>new O_e);return Ct(r=>i&&(i.time=r.clock.getElapsedTime()*t)),se("primitive",{object:i,ref:n,attach:"material",...e})});class G_e extends As{constructor(e=new mt){super({uniforms:{inputBuffer:new Gr(null),depthBuffer:new Gr(null),resolution:new Gr(new mt),texelSize:new Gr(new mt),halfTexelSize:new Gr(new mt),kernel:new Gr(0),scale:new Gr(1),cameraNear:new Gr(0),cameraFar:new Gr(1),minDepthThreshold:new Gr(0),maxDepthThreshold:new Gr(1),depthScale:new Gr(0),depthToBlurRatioBias:new Gr(.25)},fragmentShader:`#include <common>
        #include <dithering_pars_fragment>      
        uniform sampler2D inputBuffer;
        uniform sampler2D depthBuffer;
        uniform float cameraNear;
        uniform float cameraFar;
        uniform float minDepthThreshold;
        uniform float maxDepthThreshold;
        uniform float depthScale;
        uniform float depthToBlurRatioBias;
        varying vec2 vUv;
        varying vec2 vUv0;
        varying vec2 vUv1;
        varying vec2 vUv2;
        varying vec2 vUv3;

        void main() {
          float depthFactor = 0.0;
          
          #ifdef USE_DEPTH
            vec4 depth = texture2D(depthBuffer, vUv);
            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));
            depthFactor *= depthScale;
            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));
          #endif
          
          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));
          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));
          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));
          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));
          gl_FragColor = sum * 0.25 ;

          #include <dithering_fragment>
          #include <tonemapping_fragment>
          #include <encodings_fragment>
        }`,vertexShader:`uniform vec2 texelSize;
        uniform vec2 halfTexelSize;
        uniform float kernel;
        uniform float scale;
        varying vec2 vUv;
        varying vec2 vUv0;
        varying vec2 vUv1;
        varying vec2 vUv2;
        varying vec2 vUv3;

        void main() {
          vec2 uv = position.xy * 0.5 + 0.5;
          vUv = uv;

          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;
          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);
          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);
          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);
          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);

          gl_Position = vec4(position.xy, 1.0, 1.0);
        }`,blending:G6,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this.setTexelSize(e.x,e.y),this.kernel=new Float32Array([0,1,2,2,3])}setTexelSize(e,n){this.uniforms.texelSize.value.set(e,n),this.uniforms.halfTexelSize.value.set(e,n).multiplyScalar(.5)}setResolution(e){this.uniforms.resolution.value.copy(e)}}class c9{constructor({gl:e,resolution:n,width:i=500,height:r=500,minDepthThreshold:s=0,maxDepthThreshold:o=1,depthScale:a=0,depthToBlurRatioBias:l=.25}){this.renderToScreen=!1,this.renderTargetA=new gs(n,n,{minFilter:Mi,magFilter:Mi,stencilBuffer:!1,depthBuffer:!1,encoding:e.outputEncoding}),this.renderTargetB=this.renderTargetA.clone(),this.convolutionMaterial=new G_e,this.convolutionMaterial.setTexelSize(1/i,1/r),this.convolutionMaterial.setResolution(new mt(i,r)),this.scene=new Fc,this.camera=new Wy,this.convolutionMaterial.uniforms.minDepthThreshold.value=s,this.convolutionMaterial.uniforms.maxDepthThreshold.value=o,this.convolutionMaterial.uniforms.depthScale.value=a,this.convolutionMaterial.uniforms.depthToBlurRatioBias.value=l,this.convolutionMaterial.defines.USE_DEPTH=a>0;const c=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),u=new Float32Array([0,0,2,0,0,2]),h=new ri;h.setAttribute("position",new On(c,3)),h.setAttribute("uv",new On(u,2)),this.screen=new rt(h,this.convolutionMaterial),this.screen.frustumCulled=!1,this.scene.add(this.screen)}render(e,n,i){const r=this.scene,s=this.camera,o=this.renderTargetA,a=this.renderTargetB;let l=this.convolutionMaterial,c=l.uniforms;c.depthBuffer.value=n.depthTexture;const u=l.kernel;let h=n,f,d,p;for(d=0,p=u.length-1;d<p;++d)f=(d&1)===0?o:a,c.kernel.value=u[d],c.inputBuffer.value=h.texture,e.setRenderTarget(f),e.render(r,s),h=f;c.kernel.value=u[d],c.inputBuffer.value=h.texture,e.setRenderTarget(this.renderToScreen?null:i),e.render(r,s)}}class u9 extends $d{constructor(e={}){super(e),this._tDepth={value:null},this._distortionMap={value:null},this._tDiffuse={value:null},this._tDiffuseBlur={value:null},this._textureMatrix={value:null},this._hasBlur={value:!1},this._mirror={value:0},this._mixBlur={value:0},this._blurStrength={value:.5},this._minDepthThreshold={value:.9},this._maxDepthThreshold={value:1},this._depthScale={value:0},this._depthToBlurRatioBias={value:.25},this._distortion={value:1},this._mixContrast={value:1},this.setValues(e)}onBeforeCompile(e){var n;(n=e.defines)!=null&&n.USE_UV||(e.defines.USE_UV=""),e.uniforms.hasBlur=this._hasBlur,e.uniforms.tDiffuse=this._tDiffuse,e.uniforms.tDepth=this._tDepth,e.uniforms.distortionMap=this._distortionMap,e.uniforms.tDiffuseBlur=this._tDiffuseBlur,e.uniforms.textureMatrix=this._textureMatrix,e.uniforms.mirror=this._mirror,e.uniforms.mixBlur=this._mixBlur,e.uniforms.mixStrength=this._blurStrength,e.uniforms.minDepthThreshold=this._minDepthThreshold,e.uniforms.maxDepthThreshold=this._maxDepthThreshold,e.uniforms.depthScale=this._depthScale,e.uniforms.depthToBlurRatioBias=this._depthToBlurRatioBias,e.uniforms.distortion=this._distortion,e.uniforms.mixContrast=this._mixContrast,e.vertexShader=`
        uniform mat4 textureMatrix;
        varying vec4 my_vUv;
      ${e.vertexShader}`,e.vertexShader=e.vertexShader.replace("#include <project_vertex>",`#include <project_vertex>
        my_vUv = textureMatrix * vec4( position, 1.0 );
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );`),e.fragmentShader=`
        uniform sampler2D tDiffuse;
        uniform sampler2D tDiffuseBlur;
        uniform sampler2D tDepth;
        uniform sampler2D distortionMap;
        uniform float distortion;
        uniform float cameraNear;
			  uniform float cameraFar;
        uniform bool hasBlur;
        uniform float mixBlur;
        uniform float mirror;
        uniform float mixStrength;
        uniform float minDepthThreshold;
        uniform float maxDepthThreshold;
        uniform float mixContrast;
        uniform float depthScale;
        uniform float depthToBlurRatioBias;
        varying vec4 my_vUv;
        ${e.fragmentShader}`,e.fragmentShader=e.fragmentShader.replace("#include <emissivemap_fragment>",`#include <emissivemap_fragment>

      float distortionFactor = 0.0;
      #ifdef USE_DISTORTION
        distortionFactor = texture2D(distortionMap, vUv).r * distortion;
      #endif

      vec4 new_vUv = my_vUv;
      new_vUv.x += distortionFactor;
      new_vUv.y += distortionFactor;

      vec4 base = texture2DProj(tDiffuse, new_vUv);
      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);

      vec4 merge = base;

      #ifdef USE_NORMALMAP
        vec2 normal_uv = vec2(0.0);
        vec4 normalColor = texture2D(normalMap, vUv * normalScale);
        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );
        vec3 coord = new_vUv.xyz / new_vUv.w;
        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;
        vec4 base_normal = texture2D(tDiffuse, normal_uv);
        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);
        merge = base_normal;
        blur = blur_normal;
      #endif

      float depthFactor = 0.0001;
      float blurFactor = 0.0;

      #ifdef USE_DEPTH
        vec4 depth = texture2DProj(tDepth, new_vUv);
        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));
        depthFactor *= depthScale;
        depthFactor = max(0.0001, min(1.0, depthFactor));

        #ifdef USE_BLUR
          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);
          merge = merge * min(1.0, depthFactor + 0.5);
        #else
          merge = merge * depthFactor;
        #endif

      #endif

      float reflectorRoughnessFactor = roughness;
      #ifdef USE_ROUGHNESSMAP
        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );
        reflectorRoughnessFactor *= reflectorTexelRoughness.g;
      #endif

      #ifdef USE_BLUR
        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);
        merge = mix(merge, blur, blurFactor);
      #endif

      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);
      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;
      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;
      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;

      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);
      `)}get tDiffuse(){return this._tDiffuse.value}set tDiffuse(e){this._tDiffuse.value=e}get tDepth(){return this._tDepth.value}set tDepth(e){this._tDepth.value=e}get distortionMap(){return this._distortionMap.value}set distortionMap(e){this._distortionMap.value=e}get tDiffuseBlur(){return this._tDiffuseBlur.value}set tDiffuseBlur(e){this._tDiffuseBlur.value=e}get textureMatrix(){return this._textureMatrix.value}set textureMatrix(e){this._textureMatrix.value=e}get hasBlur(){return this._hasBlur.value}set hasBlur(e){this._hasBlur.value=e}get mirror(){return this._mirror.value}set mirror(e){this._mirror.value=e}get mixBlur(){return this._mixBlur.value}set mixBlur(e){this._mixBlur.value=e}get mixStrength(){return this._blurStrength.value}set mixStrength(e){this._blurStrength.value=e}get minDepthThreshold(){return this._minDepthThreshold.value}set minDepthThreshold(e){this._minDepthThreshold.value=e}get maxDepthThreshold(){return this._maxDepthThreshold.value}set maxDepthThreshold(e){this._maxDepthThreshold.value=e}get depthScale(){return this._depthScale.value}set depthScale(e){this._depthScale.value=e}get depthToBlurRatioBias(){return this._depthToBlurRatioBias.value}set depthToBlurRatioBias(e){this._depthToBlurRatioBias.value=e}get distortion(){return this._distortion.value}set distortion(e){this._distortion.value=e}get mixContrast(){return this._mixContrast.value}set mixContrast(e){this._mixContrast.value=e}}Dr({MeshReflectorMaterialImpl:u9});const z_e=R.exports.forwardRef(({mixBlur:t=0,mixStrength:e=1,resolution:n=256,blur:i=[0,0],minDepthThreshold:r=.9,maxDepthThreshold:s=1,depthScale:o=0,depthToBlurRatioBias:a=.25,mirror:l=0,distortion:c=1,mixContrast:u=1,distortionMap:h,reflectorOffset:f=0,...d},p)=>{const m=Te(({gl:Q})=>Q),g=Te(({camera:Q})=>Q),_=Te(({scene:Q})=>Q);i=Array.isArray(i)?i:[i,i];const y=i[0]+i[1]>0,x=R.exports.useRef(null),[E]=R.exports.useState(()=>new yh),[w]=R.exports.useState(()=>new $),[S]=R.exports.useState(()=>new $),[b]=R.exports.useState(()=>new $),[M]=R.exports.useState(()=>new Ze),[T]=R.exports.useState(()=>new $(0,0,-1)),[B]=R.exports.useState(()=>new dr),[L]=R.exports.useState(()=>new $),[F]=R.exports.useState(()=>new $),[U]=R.exports.useState(()=>new dr),[k]=R.exports.useState(()=>new Ze),[X]=R.exports.useState(()=>new Hr),Y=R.exports.useCallback(()=>{var Q;const H=x.current.parent||((Q=x.current)==null?void 0:Q.__r3f.parent);if(!H||(S.setFromMatrixPosition(H.matrixWorld),b.setFromMatrixPosition(g.matrixWorld),M.extractRotation(H.matrixWorld),w.set(0,0,1),w.applyMatrix4(M),S.addScaledVector(w,f),L.subVectors(S,b),L.dot(w)>0))return;L.reflect(w).negate(),L.add(S),M.extractRotation(g.matrixWorld),T.set(0,0,-1),T.applyMatrix4(M),T.add(b),F.subVectors(S,T),F.reflect(w).negate(),F.add(S),X.position.copy(L),X.up.set(0,1,0),X.up.applyMatrix4(M),X.up.reflect(w),X.lookAt(F),X.far=g.far,X.updateMatrixWorld(),X.projectionMatrix.copy(g.projectionMatrix),k.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),k.multiply(X.projectionMatrix),k.multiply(X.matrixWorldInverse),k.multiply(H.matrixWorld),E.setFromNormalAndCoplanarPoint(w,S),E.applyMatrix4(X.matrixWorldInverse),B.set(E.normal.x,E.normal.y,E.normal.z,E.constant);const J=X.projectionMatrix;U.x=(Math.sign(B.x)+J.elements[8])/J.elements[0],U.y=(Math.sign(B.y)+J.elements[9])/J.elements[5],U.z=-1,U.w=(1+J.elements[10])/J.elements[14],B.multiplyScalar(2/B.dot(U)),J.elements[2]=B.x,J.elements[6]=B.y,J.elements[10]=B.z+1,J.elements[14]=B.w},[g,f]),[Z,G,O,z]=R.exports.useMemo(()=>{const Q={minFilter:Mi,magFilter:Mi,encoding:m.outputEncoding,type:br},H=new gs(n,n,Q);H.depthBuffer=!0,H.depthTexture=new Yy(n,n),H.depthTexture.format=Xy,H.depthTexture.type=M1;const J=new gs(n,n,Q),j=new c9({gl:m,resolution:n,width:i[0],height:i[1],minDepthThreshold:r,maxDepthThreshold:s,depthScale:o,depthToBlurRatioBias:a}),oe={mirror:l,textureMatrix:k,mixBlur:t,tDiffuse:H.texture,tDepth:H.depthTexture,tDiffuseBlur:J.texture,hasBlur:y,mixStrength:e,minDepthThreshold:r,maxDepthThreshold:s,depthScale:o,depthToBlurRatioBias:a,distortion:c,distortionMap:h,mixContrast:u,"defines-USE_BLUR":y?"":void 0,"defines-USE_DEPTH":o>0?"":void 0,"defines-USE_DISTORTION":h?"":void 0};return[H,J,j,oe]},[m,i,k,n,l,y,t,e,r,s,o,a,c,h,u]);return Ct(()=>{var Q;const H=x.current.parent||((Q=x.current)==null?void 0:Q.__r3f.parent);if(!H)return;H.visible=!1;const J=m.xr.enabled,j=m.shadowMap.autoUpdate;Y(),m.xr.enabled=!1,m.shadowMap.autoUpdate=!1,m.setRenderTarget(Z),m.state.buffers.depth.setMask(!0),m.autoClear||m.clear(),m.render(_,X),y&&O.render(m,Z,G),m.xr.enabled=J,m.shadowMap.autoUpdate=j,H.visible=!0,m.setRenderTarget(null)}),se("meshReflectorMaterialImpl",{attach:"material",ref:Hn([x,p]),...z,...d},"key"+z["defines-USE_BLUR"]+z["defines-USE_DEPTH"]+z["defines-USE_DISTORTION"])}),Q_e=a0({envMap:null,bounces:3,ior:2.4,correctMips:!0,aberrationStrength:.01,fresnel:0,bvh:new y_e,color:new xt("white"),resolution:new mt},`
  #ifndef USE_COLOR
    uniform vec3 color;
  #endif
  varying vec3 vWorldPosition;  
  varying vec3 vNormal;
  varying mat4 projectionMatrixInv;
  varying mat4 viewMatrixInv;
  varying vec3 viewDirection;
  varying mat4 vInstanceMatrix;
  varying vec3 vColor;
  
  void main() {        
    vec4 transformedNormal = vec4(normal, 0.0);
    vec4 transformedPosition = vec4(position, 1.0);
    #ifdef USE_INSTANCING
      vInstanceMatrix = instanceMatrix;
      transformedNormal = instanceMatrix * transformedNormal;
      transformedPosition = instanceMatrix * transformedPosition;
    #else
      vInstanceMatrix = mat4(1.0);
    #endif

    vColor = color;
    #ifdef USE_INSTANCING_COLOR
      vColor *= instanceColor.rgb;
    #endif
  
    projectionMatrixInv = inverse(projectionMatrix);
    viewMatrixInv = inverse(viewMatrix);
  
    vWorldPosition = (modelMatrix * transformedPosition).xyz;    
    vNormal = (viewMatrixInv * vec4(normalMatrix * transformedNormal.xyz, 0.0)).xyz;
    viewDirection = normalize(vWorldPosition - cameraPosition);
    gl_Position = projectionMatrix * viewMatrix * modelMatrix * transformedPosition;
  }`,`
  #define ENVMAP_TYPE_CUBE_UV
  precision highp isampler2D;
  precision highp usampler2D;
  varying vec3 vWorldPosition;
  varying vec3 vNormal;
    
  #ifdef ENVMAP_TYPE_CUBEM
    uniform samplerCube envMap;
  #else
    uniform sampler2D envMap;
  #endif
    
  uniform float bounces;
  ${x_e}
  ${E_e}
  uniform BVH bvh;
  uniform float ior;
  uniform bool correctMips;
  uniform vec2 resolution;
  uniform float fresnel;
  uniform mat4 modelMatrix;
    
  uniform float aberrationStrength;
  varying mat4 projectionMatrixInv;
  varying mat4 viewMatrixInv;
  varying vec3 viewDirection;  
  varying mat4 vInstanceMatrix;
  varying vec3 vColor;
  
  float fresnelFunc(vec3 viewDirection, vec3 worldNormal) {
    return pow( 1.0 + dot( viewDirection, worldNormal), 10.0 );
  }
    
  vec3 totalInternalReflection(vec3 ro, vec3 rd, vec3 normal, float ior, mat4 modelMatrixInverse) {
    vec3 rayOrigin = ro;
    vec3 rayDirection = rd;
    rayDirection = refract(rayDirection, normal, 1.0 / ior);
    rayOrigin = vWorldPosition + rayDirection * 0.001;
    rayOrigin = (modelMatrixInverse * vec4(rayOrigin, 1.0)).xyz;
    rayDirection = normalize((modelMatrixInverse * vec4(rayDirection, 0.0)).xyz);
    for(float i = 0.0; i < bounces; i++) {
      uvec4 faceIndices = uvec4( 0u );
      vec3 faceNormal = vec3( 0.0, 0.0, 1.0 );
      vec3 barycoord = vec3( 0.0 );
      float side = 1.0;
      float dist = 0.0;
      bvhIntersectFirstHit( bvh, rayOrigin, rayDirection, faceIndices, faceNormal, barycoord, side, dist );
      vec3 hitPos = rayOrigin + rayDirection * max(dist - 0.001, 0.0);      
      vec3 tempDir = refract(rayDirection, faceNormal, ior);
      if (length(tempDir) != 0.0) {
        rayDirection = tempDir;
        break;
      }
      rayDirection = reflect(rayDirection, faceNormal);
      rayOrigin = hitPos + rayDirection * 0.01;
    }
    rayDirection = normalize((modelMatrix * vec4(rayDirection, 0.0)).xyz);
    return rayDirection;
  }
    
  #include <common>
  #include <cube_uv_reflection_fragment>
    
  #ifdef ENVMAP_TYPE_CUBEM
    vec4 textureGradient(samplerCube envMap, vec3 rayDirection, vec3 directionCamPerfect) {
      return textureGrad(envMap, rayDirection, dFdx(correctMips ? directionCamPerfect: rayDirection), dFdy(correctMips ? directionCamPerfect: rayDirection));
    }
  #else
    vec4 textureGradient(sampler2D envMap, vec3 rayDirection, vec3 directionCamPerfect) {
      vec2 uvv = equirectUv( rayDirection );
      vec2 smoothUv = equirectUv( directionCamPerfect );
      return textureGrad(envMap, uvv, dFdx(correctMips ? smoothUv : uvv), dFdy(correctMips ? smoothUv : uvv));
    }
  #endif
  
  void main() {
    mat4 modelMatrixInverse = inverse(modelMatrix * vInstanceMatrix);
    vec2 uv = gl_FragCoord.xy / resolution;
    vec3 directionCamPerfect = (projectionMatrixInv * vec4(uv * 2.0 - 1.0, 0.0, 1.0)).xyz;
    directionCamPerfect = (viewMatrixInv * vec4(directionCamPerfect, 0.0)).xyz;
    directionCamPerfect = normalize(directionCamPerfect);
    vec3 normal = vNormal;
    vec3 rayOrigin = cameraPosition;
    vec3 rayDirection = normalize(vWorldPosition - cameraPosition);
    vec3 finalColor;
    #ifdef CHROMATIC_ABERRATIONS
      vec3 rayDirectionG = totalInternalReflection(rayOrigin, rayDirection, normal, max(ior, 1.0), modelMatrixInverse);
      #ifdef FAST_CHROMA 
        vec3 rayDirectionR = normalize(rayDirectionG + 1.0 * vec3(aberrationStrength / 2.0));
        vec3 rayDirectionB = normalize(rayDirectionG - 1.0 * vec3(aberrationStrength / 2.0));
      #else
        vec3 rayDirectionR = totalInternalReflection(rayOrigin, rayDirection, normal, max(ior * (1.0 - aberrationStrength), 1.0), modelMatrixInverse);
        vec3 rayDirectionB = totalInternalReflection(rayOrigin, rayDirection, normal, max(ior * (1.0 + aberrationStrength), 1.0), modelMatrixInverse);
      #endif
      float finalColorR = textureGradient(envMap, rayDirectionR, directionCamPerfect).r;
      float finalColorG = textureGradient(envMap, rayDirectionG, directionCamPerfect).g;
      float finalColorB = textureGradient(envMap, rayDirectionB, directionCamPerfect).b;
      finalColor = vec3(finalColorR, finalColorG, finalColorB) * vColor;
    #else
      rayDirection = totalInternalReflection(rayOrigin, rayDirection, normal, max(ior, 1.0), modelMatrixInverse);
      finalColor = textureGradient(envMap, rayDirection, directionCamPerfect).rgb;    
      finalColor *= vColor;
    #endif
    float nFresnel = fresnelFunc(viewDirection, normal) * fresnel;
    gl_FragColor = vec4(mix(finalColor, vec3(1.0), nFresnel), 1.0);      
    #include <tonemapping_fragment>
    #include <encodings_fragment>
  }`),H_e=t=>t&&t.isCubeTexture;function V_e({aberrationStrength:t=0,fastChroma:e=!0,envMap:n,...i}){Dr({MeshRefractionMaterial:Q_e});const r=R.exports.useRef(),{size:s}=Te(),o=R.exports.useMemo(()=>{var a,l;const c={},u=H_e(n),f=((a=u?(l=n.image[0])==null?void 0:l.width:n.image.width)!==null&&a!==void 0?a:1024)/4,d=Math.floor(Math.log2(f)),p=Math.pow(2,d),m=3*Math.max(p,16*7),g=4*p;return u&&(c.ENVMAP_TYPE_CUBEM=""),c.CUBEUV_TEXEL_WIDTH=`${1/m}`,c.CUBEUV_TEXEL_HEIGHT=`${1/g}`,c.CUBEUV_MAX_MIP=`${d}.0`,t>0&&(c.CHROMATIC_ABERRATIONS=""),e&&(c.FAST_CHROMA=""),c},[t,e]);return R.exports.useLayoutEffect(()=>{var a,l,c;const u=(a=r.current)==null||(l=a.__r3f)==null||(c=l.parent)==null?void 0:c.geometry;u&&r.current.bvh.updateFrom(new dd(u.toNonIndexed(),{lazyGeneration:!1,strategy:r9}))},[]),se("meshRefractionMaterial",{defines:o,ref:r,resolution:[s.width,s.height],aberrationStrength:t,envMap:n,...i},JSON.stringify(o))}class h9 extends P3{constructor(e){super(e),this.onBeforeCompile=(n,i)=>{const{isWebGL2:r}=i.capabilities;n.fragmentShader=n.fragmentShader.replace("#include <output_fragment>",`
        ${r?"#include <output_fragment>":`#extension GL_OES_standard_derivatives : enable
#include <output_fragment>`}
      vec2 cxy = 2.0 * gl_PointCoord - 1.0;
      float r = dot(cxy, cxy);
      float delta = fwidth(r);     
      float mask = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);
      gl_FragColor = vec4(gl_FragColor.rgb, mask * gl_FragColor.a );
      `)}}}const W_e=R.exports.forwardRef((t,e)=>{const[n]=R.exports.useState(()=>new h9(null));return se("primitive",{...t,object:n,ref:e,attach:"material"})}),j_e=({frustum:t=3.75,size:e=.005,near:n=9.5,samples:i=17,rings:r=11}={})=>`#define LIGHT_WORLD_SIZE ${e}
#define LIGHT_FRUSTUM_WIDTH ${t}
#define LIGHT_SIZE_UV (LIGHT_WORLD_SIZE / LIGHT_FRUSTUM_WIDTH)
#define NEAR_PLANE ${n}

#define NUM_SAMPLES ${i}
#define NUM_RINGS ${r}
#define BLOCKER_SEARCH_NUM_SAMPLES NUM_SAMPLES
#define PCF_NUM_SAMPLES NUM_SAMPLES

vec2 poissonDisk[NUM_SAMPLES];

void initPoissonSamples(const in vec2 randomSeed) {
  float ANGLE_STEP = PI2 * float(NUM_RINGS) / float(NUM_SAMPLES);
  float INV_NUM_SAMPLES = 1.0 / float(NUM_SAMPLES);
  float angle = rand(randomSeed) * PI2;
  float radius = INV_NUM_SAMPLES;
  float radiusStep = radius;
  for (int i = 0; i < NUM_SAMPLES; i++) {
    poissonDisk[i] = vec2(cos(angle), sin(angle)) * pow(radius, 0.75);
    radius += radiusStep;
    angle += ANGLE_STEP;
  }
}

float penumbraSize(const in float zReceiver, const in float zBlocker) { // Parallel plane estimation
  return (zReceiver - zBlocker) / zBlocker;
}

float findBlocker(sampler2D shadowMap, const in vec2 uv, const in float zReceiver) {
  float searchRadius = LIGHT_SIZE_UV * (zReceiver - NEAR_PLANE) / zReceiver;
  float blockerDepthSum = 0.0;
  int numBlockers = 0;
  for (int i = 0; i < BLOCKER_SEARCH_NUM_SAMPLES; i++) {
    float shadowMapDepth = unpackRGBAToDepth(texture2D(shadowMap, uv + poissonDisk[i] * searchRadius));
    if (shadowMapDepth < zReceiver) {
      blockerDepthSum += shadowMapDepth;
      numBlockers++;
    }
  }
  if (numBlockers == 0) return -1.0;
  return blockerDepthSum / float(numBlockers);
}

float PCF_Filter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius) {
  float sum = 0.0;
  for (int i = 0; i < PCF_NUM_SAMPLES; i++) {
    float depth = unpackRGBAToDepth(texture2D(shadowMap, uv + poissonDisk[ i ] * filterRadius));
    if (zReceiver <= depth) sum += 1.0;
  }
  for (int i = 0; i < PCF_NUM_SAMPLES; i++) {
    float depth = unpackRGBAToDepth(texture2D(shadowMap, uv + -poissonDisk[ i ].yx * filterRadius));
    if (zReceiver <= depth) sum += 1.0;
  }
  return sum / (2.0 * float(PCF_NUM_SAMPLES));
}

float PCSS(sampler2D shadowMap, vec4 coords) {
  vec2 uv = coords.xy;
  float zReceiver = coords.z; // Assumed to be eye-space z in this code
  initPoissonSamples(uv);
  float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver);
  if (avgBlockerDepth == -1.0) return 1.0;
  float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);
  float filterRadius = penumbraRatio * LIGHT_SIZE_UV * NEAR_PLANE / zReceiver;
  return PCF_Filter(shadowMap, uv, zReceiver, filterRadius);
}`;let RF=!1;const X_e=t=>{if(!RF){RF=!0;let e=Ri.shadowmap_pars_fragment;e=e.replace("#ifdef USE_SHADOWMAP",`#ifdef USE_SHADOWMAP
`+j_e({...t})),e=e.replace("#if defined( SHADOWMAP_TYPE_PCF )",`
return PCSS(shadowMap, shadowCoord);
#if defined( SHADOWMAP_TYPE_PCF )`),Ri.shadowmap_pars_fragment=e}};function Li(t){const e=t+"Geometry";return R.exports.forwardRef(({args:n,children:i,...r},s)=>vt("mesh",{ref:s,...r,children:[se(e,{attach:"geometry",args:n}),i]}))}const Y_e=Li("box"),q_e=Li("circle"),J_e=Li("cone"),K_e=Li("cylinder"),Z_e=Li("sphere"),f9=Li("plane"),$_e=Li("tube"),eye=Li("torus"),tye=Li("torusKnot"),nye=Li("tetrahedron"),iye=Li("ring"),rye=Li("polyhedron"),sye=Li("icosahedron"),oye=Li("octahedron"),aye=Li("dodecahedron"),lye=Li("extrude"),cye=Li("lathe"),uye=Li("capsule"),Xo=1e-5;function hye(t,e,n){const i=new iN,r=n-Xo;return i.absarc(Xo,Xo,Xo,-Math.PI/2,-Math.PI,!0),i.absarc(Xo,e-r*2,Xo,Math.PI,Math.PI/2,!0),i.absarc(t-r*2,e-r*2,Xo,Math.PI/2,0,!0),i.absarc(t-r*2,Xo,Xo,0,-Math.PI/2,!0),i}const fye=R.exports.forwardRef(function({args:[e=1,n=1,i=1]=[],radius:r=.05,steps:s=1,smoothness:o=4,children:a,...l},c){const u=R.exports.useMemo(()=>hye(e,n,r),[e,n,r]),h=R.exports.useMemo(()=>({depth:i-r*2,bevelEnabled:!0,bevelSegments:o*2,steps:s,bevelSize:r-Xo,bevelThickness:r,curveSegments:o}),[i,r,o]),f=R.exports.useRef();return R.exports.useLayoutEffect(()=>{f.current&&f.current.center()},[u,h]),vt("mesh",{ref:c,...l,children:[se("extrudeGeometry",{ref:f,args:[u,h]}),a]})});function dye(){const t=new ri,e=new Float32Array([-1,-1,3,-1,-1,3]);return t.setAttribute("position",new On(e,2)),t}const pye=R.exports.forwardRef(function({children:e,...n},i){const r=R.exports.useMemo(dye,[]);return se("mesh",{ref:i,geometry:r,frustumCulled:!1,...n,children:e})}),mye=R.exports.forwardRef(function({children:e,left:n,right:i,top:r,bottom:s,front:o,back:a,onCentered:l,precise:c=!0,...u},h){const f=R.exports.useRef(null),d=R.exports.useRef(null),p=R.exports.useRef(null);return R.exports.useLayoutEffect(()=>{d.current.matrixWorld.identity();const m=new di().setFromObject(p.current,c),g=new $,_=new to,y=m.max.x-m.min.x,x=m.max.y-m.min.y,E=m.max.z-m.min.z;m.getCenter(g),m.getBoundingSphere(_);const w=r?x/2:s?-x/2:0,S=n?-y/2:i?y/2:0,b=o?E/2:a?-E/2:0;d.current.position.set(-g.x+S,-g.y+w,-g.z+b),typeof l<"u"&&l({parent:f.current.parent,container:f.current,width:y,height:x,depth:E,boundingBox:m,boundingSphere:_,center:g,verticalAlignment:w,horizontalAlignment:S,depthAlignment:b})},[e]),R.exports.useImperativeHandle(h,()=>f.current,[]),se("group",{ref:f,...u,children:se("group",{ref:d,children:se("group",{ref:p,children:e})})})}),Mf=t=>t&&t.isOrthographicCamera,Aye=t=>t&&t.isBox3,d9=R.exports.createContext(null);function gye({children:t,damping:e=6,fit:n,clip:i,observe:r,margin:s=1.2,eps:o=.01,onFit:a}){const l=R.exports.useRef(null),{camera:c,invalidate:u,size:h,controls:f}=Te(),d=f,p=R.exports.useRef(a);p.current=a;function m(S,b){return Math.abs(S.x-b.x)<o&&Math.abs(S.y-b.y)<o&&Math.abs(S.z-b.z)<o}function g(S,b,M,T){S.x=ct.damp(S.x,b.x,M,T),S.y=ct.damp(S.y,b.y,M,T),S.z=ct.damp(S.z,b.z,M,T)}const[_]=R.exports.useState(()=>({animating:!1,focus:new $,camera:new $,zoom:1})),[y]=R.exports.useState(()=>({focus:new $,camera:new $,zoom:1})),[x]=R.exports.useState(()=>new di),E=R.exports.useMemo(()=>{function S(){const b=x.getSize(new $),M=x.getCenter(new $),T=Math.max(b.x,b.y,b.z),B=Mf(c)?T*4:T/(2*Math.atan(Math.PI*c.fov/360)),L=Mf(c)?T*4:B/c.aspect,F=s*Math.max(B,L);return{box:x,size:b,center:M,distance:F}}return{getSize:S,refresh(b){if(Aye(b))x.copy(b);else{const M=b||l.current;M.updateWorldMatrix(!0,!0),x.setFromObject(M)}if(x.isEmpty()){const M=c.position.length()||10;x.setFromCenterAndSize(new $,new $(M,M,M))}if((d==null?void 0:d.constructor.name)==="OrthographicTrackballControls"){const{distance:M}=S(),T=c.position.clone().sub(d.target).normalize().multiplyScalar(M),B=d.target.clone().add(T);c.position.copy(B)}return this},clip(){const{distance:b}=S();return d&&(d.maxDistance=b*10),c.near=b/100,c.far=b*100,c.updateProjectionMatrix(),d&&d.update(),u(),this},fit(){_.camera.copy(c.position),d&&_.focus.copy(d.target);const{center:b,distance:M}=S(),T=b.clone().sub(c.position).normalize().multiplyScalar(M);if(y.camera.copy(b).sub(T),y.focus.copy(b),Mf(c)){_.zoom=c.zoom;let B=0,L=0;const F=[new $(x.min.x,x.min.y,x.min.z),new $(x.min.x,x.max.y,x.min.z),new $(x.min.x,x.min.y,x.max.z),new $(x.min.x,x.max.y,x.max.z),new $(x.max.x,x.max.y,x.max.z),new $(x.max.x,x.max.y,x.min.z),new $(x.max.x,x.min.y,x.max.z),new $(x.max.x,x.min.y,x.min.z)];b.applyMatrix4(c.matrixWorldInverse);for(const X of F)X.applyMatrix4(c.matrixWorldInverse),B=Math.max(B,Math.abs(X.y-b.y)),L=Math.max(L,Math.abs(X.x-b.x));B*=2,L*=2;const U=(c.top-c.bottom)/B,k=(c.right-c.left)/L;y.zoom=Math.min(U,k)/s,e||(c.zoom=y.zoom,c.updateProjectionMatrix())}return e?_.animating=!0:(c.position.copy(y.camera),c.lookAt(y.focus),d&&(d.target.copy(y.focus),d.update())),p.current&&p.current(this.getSize()),u(),this}}},[x,c,d,s,e,u]);R.exports.useLayoutEffect(()=>{if(d){const S=()=>_.animating=!1;return d.addEventListener("start",S),()=>d.removeEventListener("start",S)}},[d]);const w=R.exports.useRef(0);return R.exports.useLayoutEffect(()=>{(r||w.current++===0)&&(E.refresh(),n&&E.fit(),i&&E.clip())},[h,i,n,r,c,d]),Ct((S,b)=>{if(_.animating){if(g(_.focus,y.focus,e,b),g(_.camera,y.camera,e,b),_.zoom=ct.damp(_.zoom,y.zoom,e,b),c.position.copy(_.camera),Mf(c)&&(c.zoom=_.zoom,c.updateProjectionMatrix()),d?(d.target.copy(_.focus),d.update()):c.lookAt(_.focus),u(),Mf(c)&&!(Math.abs(_.zoom-y.zoom)<o)||!Mf(c)&&!m(_.camera,y.camera)||d&&!m(_.focus,y.focus))return;_.animating=!1}}),R.exports.createElement("group",{ref:l},R.exports.createElement(d9.Provider,{value:E},t))}function vye(){return R.exports.useContext(d9)}const _ye=R.exports.forwardRef(({intensity:t=1,decay:e,decayRate:n=.65,maxYaw:i=.1,maxPitch:r=.1,maxRoll:s=.1,yawFrequency:o=.1,pitchFrequency:a=.1,rollFrequency:l=.1},c)=>{const u=Te(y=>y.camera),h=Te(y=>y.controls),f=R.exports.useRef(t),d=R.exports.useRef(u.rotation.clone()),[p]=R.exports.useState(()=>new uw),[m]=R.exports.useState(()=>new uw),[g]=R.exports.useState(()=>new uw),_=()=>{(f.current<0||f.current>1)&&(f.current=f.current<0?0:1)};return R.exports.useImperativeHandle(c,()=>({getIntensity:()=>f.current,setIntensity:y=>{f.current=y,_()}}),[]),R.exports.useEffect(()=>{if(h){const y=()=>void(d.current=u.rotation.clone());return h.addEventListener("change",y),y(),()=>void h.removeEventListener("change",y)}},[u,h]),Ct((y,x)=>{const E=Math.pow(f.current,2),w=i*E*p.noise(y.clock.elapsedTime*o,1),S=r*E*m.noise(y.clock.elapsedTime*a,1),b=s*E*g.noise(y.clock.elapsedTime*l,1);u.rotation.set(d.current.x+S,d.current.y+w,d.current.z+b),e&&f.current>0&&(f.current-=n*x,_())}),null}),yye=R.exports.forwardRef(({children:t,speed:e=1,rotationIntensity:n=1,floatIntensity:i=1,floatingRange:r=[-.1,.1],...s},o)=>{const a=R.exports.useRef(null),l=R.exports.useRef(Math.random()*1e4);return Ct(c=>{var u,h;const f=l.current+c.clock.getElapsedTime();a.current.rotation.x=Math.cos(f/4*e)/8*n,a.current.rotation.y=Math.sin(f/4*e)/8*n,a.current.rotation.z=Math.sin(f/4*e)/20*n;let d=Math.sin(f/4*e)/10;d=ct.mapLinear(d,-.1,.1,(u=r==null?void 0:r[0])!==null&&u!==void 0?u:-.1,(h=r==null?void 0:r[1])!==null&&h!==void 0?h:.1),a.current.position.y=d*i}),se("group",{...s,children:se("group",{ref:Hn([a,o]),children:t})})}),Ow={sunset:"venice/venice_sunset_1k.hdr",dawn:"kiara/kiara_1_dawn_1k.hdr",night:"dikhololo/dikhololo_night_1k.hdr",warehouse:"empty-wharehouse/empty_warehouse_01_1k.hdr",forest:"forrest-slope/forest_slope_1k.hdr",apartment:"lebombo/lebombo_1k.hdr",studio:"studio-small-3/studio_small_03_1k.hdr",city:"potsdamer-platz/potsdamer_platz_1k.hdr",park:"rooitou/rooitou_park_1k.hdr",lobby:"st-fagans/st_fagans_interior_1k.hdr"},xye="https://market-assets.fra1.cdn.digitaloceanspaces.com/market-assets/hdris/",Eye=t=>t.current&&t.current.isScene,QI=t=>Eye(t)?t.current:t;function Tx({scene:t,background:e=!1,map:n}){const i=Te(r=>r.scene);return R.exports.useLayoutEffect(()=>{if(n){const r=QI(t||i),s=r.background,o=r.environment;return e!=="only"&&(r.environment=n),e&&(r.background=n),()=>{e!=="only"&&(r.environment=o),e&&(r.background=s)}}},[i,t,n,e]),null}function HI({files:t=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:e="",preset:n=void 0,encoding:i=void 0,extensions:r}){if(n){if(!(n in Ow))throw new Error("Preset must be one of: "+Object.keys(Ow).join(", "));t=Ow[n],e=xye}const s=Array.isArray(t),a=Ci(s?jy:Xme,s?[t]:t,c=>{c.setPath(e),r&&r(c)}),l=s?a[0]:a;return l.mapping=s?g6:M3,l.encoding=(i!=null?i:s)?yi:Kd,l}function VI({background:t=!1,scene:e,...n}){const i=HI(n),r=Te(s=>s.scene);return R.exports.useLayoutEffect(()=>{const s=QI(e||r),o=s.background,a=s.environment;return t!=="only"&&(s.environment=i),t&&(s.background=i),()=>{t!=="only"&&(s.environment=a),t&&(s.background=o)}},[i,t,e,r]),null}function p9({children:t,near:e=1,far:n=1e3,resolution:i=256,frames:r=1,map:s,background:o=!1,scene:a,files:l,path:c,preset:u=void 0,extensions:h}){const f=Te(y=>y.gl),d=Te(y=>y.scene),p=R.exports.useRef(null),[m]=R.exports.useState(()=>new Fc),g=R.exports.useMemo(()=>{const y=new Jy(i);return y.texture.type=br,y},[i]);R.exports.useLayoutEffect(()=>{r===1&&p.current.update(f,m);const y=QI(a||d),x=y.background,E=y.environment;return o!=="only"&&(y.environment=g.texture),o&&(y.background=g.texture),()=>{o!=="only"&&(y.environment=E),o&&(y.background=x)}},[t,m,g.texture,a,d,o,r,f]);let _=1;return Ct(()=>{(r===1/0||_<r)&&(p.current.update(f,m),_++)}),se(vs,{children:r0(vt(vs,{children:[t,se("cubeCamera",{ref:p,args:[e,n,g]}),l||u?se(VI,{background:!0,files:l,preset:u,path:c,extensions:h}):s?se(Tx,{background:!0,map:s,extensions:h}):null]}),m)})}function wye(t){var e,n,i,r;const s=HI(t),o=t.map||s;R.exports.useMemo(()=>{Dr({GroundProjectedEnvImpl:ppe})},[]);const a=R.exports.useMemo(()=>[o],[o]),l=(e=t.ground)==null?void 0:e.height,c=(n=t.ground)==null?void 0:n.radius,u=(i=(r=t.ground)==null?void 0:r.scale)!==null&&i!==void 0?i:1e3;return vt(vs,{children:[se(Tx,{...t,map:o}),se("groundProjectedEnvImpl",{args:a,scale:u,height:l,radius:c})]})}function m9(t){return t.ground?se(wye,{...t}):t.map?se(Tx,{...t}):t.children?se(p9,{...t}):se(VI,{...t})}const A9=R.exports.forwardRef(({scale:t=10,frames:e=1/0,opacity:n=1,width:i=1,height:r=1,blur:s=1,far:o=10,resolution:a=512,smooth:l=!0,color:c="#000000",depthWrite:u=!1,renderOrder:h,...f},d)=>{const p=Te(B=>B.scene),m=Te(B=>B.gl),g=R.exports.useRef(null);i=i*(Array.isArray(t)?t[0]:t||1),r=r*(Array.isArray(t)?t[1]:t||1);const[_,y,x,E,w,S,b]=R.exports.useMemo(()=>{const B=new gs(a,a),L=new gs(a,a);L.texture.generateMipmaps=B.texture.generateMipmaps=!1;const F=new Ko(i,r).rotateX(Math.PI/2),U=new rt(F),k=new B3;k.depthTest=k.depthWrite=!1,k.onBeforeCompile=Z=>{Z.uniforms={...Z.uniforms,ucolor:{value:new xt(c)}},Z.fragmentShader=Z.fragmentShader.replace("void main() {",`uniform vec3 ucolor;
           void main() {
          `),Z.fragmentShader=Z.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor * fragCoordZ * 2.0, ( 1.0 - fragCoordZ ) * 1.0 );")};const X=new As(lme),Y=new As(cme);return Y.depthTest=X.depthTest=!1,[B,F,k,U,X,Y,L]},[a,i,r,t,c]),M=B=>{E.visible=!0,E.material=w,w.uniforms.tDiffuse.value=_.texture,w.uniforms.h.value=B*1/256,m.setRenderTarget(b),m.render(E,g.current),E.material=S,S.uniforms.tDiffuse.value=b.texture,S.uniforms.v.value=B*1/256,m.setRenderTarget(_),m.render(E,g.current),E.visible=!1};let T=0;return Ct(()=>{if(g.current&&(e===1/0||T<e)){const B=p.background;p.background=null;const L=p.overrideMaterial;p.overrideMaterial=x,m.setRenderTarget(_),m.render(p,g.current),p.overrideMaterial=L,M(s),l&&M(s*.4),m.setRenderTarget(null),p.background=B,T++}}),vt("group",{"rotation-x":Math.PI/2,...f,ref:d,children:[se("mesh",{renderOrder:h,geometry:y,scale:[1,-1,1],rotation:[-Math.PI/2,0,0],children:se("meshBasicMaterial",{map:_.texture,"map-encoding":m.outputEncoding,transparent:!0,opacity:n,depthWrite:u})}),se("orthographicCamera",{ref:g,args:[-i/2,i/2,r/2,-r/2,0,o]})]})}),Mye={rembrandt:{main:[1,2,1],fill:[-2,-.5,-2]},portrait:{main:[-1,2,.5],fill:[-1,.5,-1.5]},upfront:{main:[0,2,1],fill:[-1,.5,-1.5]},soft:{main:[-2,4,4],fill:[-1,.5,-1.5]}};function Cye({children:t,controls:e,shadows:n=!0,adjustCamera:i=!0,environment:r="city",intensity:s=1,preset:o="rembrandt",shadowBias:a=0,contactShadow:l={blur:2,opacity:.5,position:[0,0,0]},...c}){const u=Mye[o],h=Te(x=>x.camera),f=Te(x=>x.controls),d=R.exports.useRef(null),p=R.exports.useRef(null),[{radius:m,width:g,height:_},y]=R.exports.useState({radius:0,width:0,height:0});return R.exports.useLayoutEffect(()=>{d.current.position.set(0,0,0),d.current.updateWorldMatrix(!0,!0);const x=new di().setFromObject(p.current),E=new $,w=new to,S=x.max.y-x.min.y,b=x.max.x-x.min.x;x.getCenter(E),x.getBoundingSphere(w),y({radius:w.radius,width:b,height:S}),d.current.position.set(-E.x,-E.y+S/2,-E.z)},[t]),R.exports.useLayoutEffect(()=>{if(i){const x=m/(_>g?1.5:2.5);h.position.set(0,m*.5,m*2.5),h.near=.1,h.far=Math.max(5e3,m*4),h.lookAt(0,x,0);const E=f||(e==null?void 0:e.current);E&&(E.target.set(0,x,0),E.update())}},[f,m,_,g,i]),vt("group",{...c,children:[se("group",{ref:d,children:se("group",{ref:p,children:t})}),l&&se(A9,{scale:m*2,far:m/2,...l}),r&&se(m9,{preset:r}),se("ambientLight",{intensity:s/3}),se("spotLight",{penumbra:1,position:[u.main[0]*m,u.main[1]*m,u.main[2]*m],intensity:s*2,castShadow:n,"shadow-bias":a}),se("pointLight",{position:[u.fill[0]*m,u.fill[1]*m,u.fill[2]*m],intensity:s})]})}const Sye=t=>t===0?0:Math.pow(2,10*t-10);function bye({children:t,floor:e=.25,segments:n=20,receiveShadow:i,...r}){const s=R.exports.useRef(null);return R.exports.useLayoutEffect(()=>{let o=0;const a=n/n/2,l=s.current.attributes.position;for(let c=0;c<n+1;c++)for(let u=0;u<n+1;u++)l.setXYZ(o++,c/n-a+(c===0?-e:0),u/n-a,Sye(c/n));l.needsUpdate=!0,s.current.computeVertexNormals()},[n,e]),se("group",{...r,children:vt("mesh",{receiveShadow:i,rotation:[-Math.PI/2,0,Math.PI/2],children:[se("planeGeometry",{ref:s,args:[1,1,n,n]}),t]})})}const Iye=R.exports.forwardRef(({fog:t=!1,renderOrder:e,depthWrite:n=!1,colorStop:i=0,color:r="black",opacity:s=.5,...o},a)=>{const l=R.exports.useMemo(()=>{const c=document.createElement("canvas");c.width=128,c.height=128;const u=c.getContext("2d"),h=u.createRadialGradient(c.width/2,c.height/2,0,c.width/2,c.height/2,c.width/2);return h.addColorStop(i,new xt(r).getStyle()),h.addColorStop(1,"rgba(0,0,0,0)"),u.fillStyle=h,u.fillRect(0,0,c.width,c.height),c},[r,i]);return vt("mesh",{renderOrder:e,ref:a,"rotation-x":-Math.PI/2,...o,children:[se("planeGeometry",{}),se("meshBasicMaterial",{transparent:!0,opacity:s,fog:t,depthWrite:n,side:Po,children:se("canvasTexture",{attach:"map",args:[l]})})]})});function Tye(t){return t.isLight}function Bye(t){return!!t.geometry}const WI=R.exports.createContext(null),Rye=a0({color:new xt,blend:2,alphaTest:.75,opacity:0,map:null},`varying vec2 vUv;
   void main() {
     gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);
     vUv = uv;
   }`,`varying vec2 vUv;
   uniform sampler2D map;
   uniform vec3 color;
   uniform float opacity;
   uniform float alphaTest;
   uniform float blend;
   void main() {
     vec4 sampledDiffuseColor = texture2D(map, vUv);
     gl_FragColor = vec4(color * sampledDiffuseColor.r * blend, max(0.0, (1.0 - (sampledDiffuseColor.r + sampledDiffuseColor.g + sampledDiffuseColor.b) / alphaTest)) * opacity);
     #include <tonemapping_fragment>
     #include <encodings_fragment>
   }`),Pye=a0({},"void main() { gl_Position = vec4((uv - 0.5) * 2.0, 1.0, 1.0); }","void main() { discard; }"),Dye=R.exports.forwardRef(({children:t,temporal:e,frames:n=40,limit:i=1/0,blend:r=20,scale:s=10,opacity:o=1,alphaTest:a=.75,color:l="black",colorBlend:c=2,resolution:u=1024,toneMapped:h=!0,...f},d)=>{Dr({SoftShadowMaterial:Rye});const p=Te(w=>w.gl),m=Te(w=>w.scene),g=Te(w=>w.camera),_=R.exports.useRef(null),y=R.exports.useRef(null),[x]=R.exports.useState(()=>new Lye(p,m,u));R.exports.useLayoutEffect(()=>{x.configure(_.current)},[]);const E=R.exports.useMemo(()=>({lights:new Map,temporal:!!e,frames:Math.max(2,n),blend:Math.max(2,n===1/0?r:n),count:0,getMesh:()=>_.current,reset:()=>{x.clear();const w=_.current.material;w.opacity=0,w.alphaTest=0,E.count=0},update:(w=1)=>{const S=_.current.material;E.temporal?(S.opacity=Math.min(o,S.opacity+o/E.blend),S.alphaTest=Math.min(a,S.alphaTest+a/E.blend)):(S.opacity=o,S.alphaTest=a),y.current.visible=!0,x.prepare();for(let b=0;b<w;b++)E.lights.forEach(M=>M.update()),x.update(g,E.blend);y.current.visible=!1,x.finish()}}),[x,g,m,e,n,r,o,a]);return R.exports.useLayoutEffect(()=>{E.reset(),!E.temporal&&E.frames!==1/0&&E.update(E.blend)}),R.exports.useImperativeHandle(d,()=>E,[E]),Ct(()=>{(E.temporal||E.frames===1/0)&&E.count<E.frames&&E.count<i&&(E.update(),E.count++)}),R.exports.createElement("group",f,R.exports.createElement("group",{traverse:()=>null,ref:y},R.exports.createElement(WI.Provider,{value:E},t)),vt("mesh",{receiveShadow:!0,ref:_,scale:s,rotation:[-Math.PI/2,0,0],children:[se("planeGeometry",{}),se("softShadowMaterial",{transparent:!0,depthWrite:!1,toneMapped:h,color:l,blend:c,map:x.progressiveLightMap2.texture})]}))}),Fye=R.exports.forwardRef(({castShadow:t=!0,bias:e=.001,mapSize:n=512,size:i=5,near:r=.5,far:s=500,frames:o=1,position:a=[0,0,0],radius:l=1,amount:c=8,intensity:u=1,ambient:h=.5,...f},d)=>{const p=R.exports.useRef(null),m=new $(...a).length(),g=R.exports.useContext(WI),_=R.exports.useCallback(()=>{let x;if(p.current)for(let E=0;E<p.current.children.length;E++)if(x=p.current.children[E],Math.random()>h)x.position.set(a[0]+ct.randFloatSpread(l),a[1]+ct.randFloatSpread(l),a[2]+ct.randFloatSpread(l));else{let w=Math.acos(2*Math.random()-1)-Math.PI/2,S=2*Math.PI*Math.random();x.position.set(Math.cos(w)*Math.cos(S)*m,Math.abs(Math.cos(w)*Math.sin(S)*m),Math.sin(w)*m)}},[l,h,m,...a]),y=R.exports.useMemo(()=>({update:_}),[_]);return R.exports.useImperativeHandle(d,()=>y,[y]),R.exports.useLayoutEffect(()=>{const x=p.current;return g&&g.lights.set(x.uuid,y),()=>void g.lights.delete(x.uuid)},[g,y]),se("group",{ref:p,...f,children:Array.from({length:c},(x,E)=>se("directionalLight",{castShadow:t,"shadow-bias":e,"shadow-mapSize":[n,n],intensity:u/c,children:se("orthographicCamera",{attach:"shadow-camera",args:[-i,i,i,-i,r,s]})},E))})});class Lye{constructor(e,n,i=1024){this.renderer=e,this.res=i,this.scene=n,this.scene.background=null,this.buffer1Active=!1,this.lights=[],this.meshes=[],this.object=null;const r=/(Android|iPad|iPhone|iPod)/g.test(navigator.userAgent)?br:Tr;this.progressiveLightMap1=new gs(this.res,this.res,{type:r,encoding:e.outputEncoding}),this.progressiveLightMap2=new gs(this.res,this.res,{type:r,encoding:e.outputEncoding}),this.discardMat=new Pye,this.targetMat=new Yp({shininess:0}),this.previousShadowMap={value:this.progressiveLightMap1.texture},this.averagingWindow={value:100},this.targetMat.onBeforeCompile=s=>{s.vertexShader=`varying vec2 vUv;
`+s.vertexShader.slice(0,-1)+"vUv = uv; gl_Position = vec4((uv - 0.5) * 2.0, 1.0, 1.0); }";const o=s.fragmentShader.indexOf("void main() {");s.fragmentShader=s.fragmentShader.replace("#include <clipping_planes_pars_fragment>",`#include <clipping_planes_pars_fragment>
#include <shadowmask_pars_fragment>
`),s.fragmentShader=`varying vec2 vUv;
`+s.fragmentShader.slice(0,o)+`	uniform sampler2D previousShadowMap;
	uniform float averagingWindow;
`+s.fragmentShader.slice(o-1,-1)+`
vec3 texelOld = texture2D(previousShadowMap, vUv).rgb;
        gl_FragColor.rgb = mix(texelOld, gl_FragColor.rgb, 1.0/averagingWindow);
      }`,s.uniforms.previousShadowMap=this.previousShadowMap,s.uniforms.averagingWindow=this.averagingWindow}}clear(){this.renderer.setRenderTarget(this.progressiveLightMap1),this.renderer.clear(),this.renderer.setRenderTarget(this.progressiveLightMap2),this.renderer.clear(),this.lights=[],this.meshes=[],this.scene.traverse(e=>{Bye(e)?this.meshes.push({object:e,material:e.material}):Tye(e)&&this.lights.push({object:e,intensity:e.intensity})})}prepare(){this.lights.forEach(e=>e.object.intensity=0),this.meshes.forEach(e=>e.object.material=this.discardMat)}finish(){this.lights.forEach(e=>e.object.intensity=e.intensity),this.meshes.forEach(e=>e.object.material=e.material)}configure(e){this.object=e}update(e,n=100){if(!this.object)return;this.averagingWindow.value=n,this.object.material=this.targetMat;const i=this.buffer1Active?this.progressiveLightMap1:this.progressiveLightMap2,r=this.buffer1Active?this.progressiveLightMap2:this.progressiveLightMap1;this.renderer.setRenderTarget(i),this.previousShadowMap.value=r.texture,this.buffer1Active=!this.buffer1Active,this.renderer.render(this.scene,e),this.renderer.setRenderTarget(null)}}Dr({MeshReflectorMaterial:u9});const kye=R.exports.forwardRef(({mixBlur:t=0,mixStrength:e=.5,resolution:n=256,blur:i=[0,0],args:r=[1,1],minDepthThreshold:s=.9,maxDepthThreshold:o=1,depthScale:a=0,depthToBlurRatioBias:l=.25,mirror:c=0,children:u,debug:h=0,distortion:f=1,mixContrast:d=1,distortionMap:p,...m},g)=>{R.exports.useEffect(()=>{console.warn("Reflector has been deprecated and will be removed next major. Replace it with <MeshReflectorMaterial />!")},[]);const _=Te(({gl:J})=>J),y=Te(({camera:J})=>J),x=Te(({scene:J})=>J);i=Array.isArray(i)?i:[i,i];const E=i[0]+i[1]>0,w=R.exports.useRef(null),[S]=R.exports.useState(()=>new yh),[b]=R.exports.useState(()=>new $),[M]=R.exports.useState(()=>new $),[T]=R.exports.useState(()=>new $),[B]=R.exports.useState(()=>new Ze),[L]=R.exports.useState(()=>new $(0,0,-1)),[F]=R.exports.useState(()=>new dr),[U]=R.exports.useState(()=>new $),[k]=R.exports.useState(()=>new $),[X]=R.exports.useState(()=>new dr),[Y]=R.exports.useState(()=>new Ze),[Z]=R.exports.useState(()=>new Hr),G=R.exports.useCallback(()=>{if(M.setFromMatrixPosition(w.current.matrixWorld),T.setFromMatrixPosition(y.matrixWorld),B.extractRotation(w.current.matrixWorld),b.set(0,0,1),b.applyMatrix4(B),U.subVectors(M,T),U.dot(b)>0)return;U.reflect(b).negate(),U.add(M),B.extractRotation(y.matrixWorld),L.set(0,0,-1),L.applyMatrix4(B),L.add(T),k.subVectors(M,L),k.reflect(b).negate(),k.add(M),Z.position.copy(U),Z.up.set(0,1,0),Z.up.applyMatrix4(B),Z.up.reflect(b),Z.lookAt(k),Z.far=y.far,Z.updateMatrixWorld(),Z.projectionMatrix.copy(y.projectionMatrix),Y.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),Y.multiply(Z.projectionMatrix),Y.multiply(Z.matrixWorldInverse),Y.multiply(w.current.matrixWorld),S.setFromNormalAndCoplanarPoint(b,M),S.applyMatrix4(Z.matrixWorldInverse),F.set(S.normal.x,S.normal.y,S.normal.z,S.constant);const J=Z.projectionMatrix;X.x=(Math.sign(F.x)+J.elements[8])/J.elements[0],X.y=(Math.sign(F.y)+J.elements[9])/J.elements[5],X.z=-1,X.w=(1+J.elements[10])/J.elements[14],F.multiplyScalar(2/F.dot(X)),J.elements[2]=F.x,J.elements[6]=F.y,J.elements[10]=F.z+1,J.elements[14]=F.w},[]),[O,z,Q,H]=R.exports.useMemo(()=>{const J={minFilter:Mi,magFilter:Mi,encoding:_.outputEncoding},j=new gs(n,n,J);j.depthBuffer=!0,j.depthTexture=new Yy(n,n),j.depthTexture.format=Xy,j.depthTexture.type=M1;const oe=new gs(n,n,J),K=new c9({gl:_,resolution:n,width:i[0],height:i[1],minDepthThreshold:s,maxDepthThreshold:o,depthScale:a,depthToBlurRatioBias:l}),ce={mirror:c,textureMatrix:Y,mixBlur:t,tDiffuse:j.texture,tDepth:j.depthTexture,tDiffuseBlur:oe.texture,hasBlur:E,mixStrength:e,minDepthThreshold:s,maxDepthThreshold:o,depthScale:a,depthToBlurRatioBias:l,transparent:!0,debug:h,distortion:f,distortionMap:p,mixContrast:d,"defines-USE_BLUR":E?"":void 0,"defines-USE_DEPTH":a>0?"":void 0,"defines-USE_DISTORTION":p?"":void 0};return[j,oe,K,ce]},[_,i,Y,n,c,E,t,e,s,o,a,l,h,f,p,d]);return Ct(()=>{if(!(w!=null&&w.current))return;w.current.visible=!1;const J=_.xr.enabled,j=_.shadowMap.autoUpdate;G(),_.xr.enabled=!1,_.shadowMap.autoUpdate=!1,_.setRenderTarget(O),_.state.buffers.depth.setMask(!0),_.autoClear||_.clear(),_.render(x,Z),E&&Q.render(_,O,z),_.xr.enabled=J,_.shadowMap.autoUpdate=j,w.current.visible=!0,_.setRenderTarget(null)}),vt("mesh",{ref:Hn([w,g]),...m,children:[se("planeGeometry",{args:r}),u?u("meshReflectorMaterial",H):se("meshReflectorMaterial",{...H})]})});class Uye extends As{constructor(){super({uniforms:{depth:{value:null},opacity:{value:1},attenuation:{value:2.5},anglePower:{value:12},spotPosition:{value:new $(0,0,0)},lightColor:{value:new xt("white")},cameraNear:{value:0},cameraFar:{value:1},resolution:{value:new mt(0,0)}},transparent:!0,depthWrite:!1,vertexShader:`
      varying vec3 vNormal;
      varying vec3 vWorldPosition;
      varying float vViewZ;
      varying float vIntensity;
      uniform vec3 spotPosition;
      uniform float attenuation;      

      void main() {
        // compute intensity
        vNormal = normalize( normalMatrix * normal );
        vec4 worldPosition	= modelMatrix * vec4( position, 1.0 );
        vWorldPosition = worldPosition.xyz;
        vec4 viewPosition = viewMatrix * worldPosition;
        vViewZ = viewPosition.z;
        float intensity	= distance(worldPosition.xyz, spotPosition) / attenuation;
        intensity	= 1.0 - clamp(intensity, 0.0, 1.0);
        vIntensity = intensity;        
        // set gl_Position
        gl_Position	= projectionMatrix * viewPosition;

      }`,fragmentShader:`
      #include <packing>

      varying vec3 vNormal;
      varying vec3 vWorldPosition;
      uniform vec3 lightColor;
      uniform vec3 spotPosition;
      uniform float attenuation;
      uniform float anglePower;
      uniform sampler2D depth;
      uniform vec2 resolution;
      uniform float cameraNear;
      uniform float cameraFar;
      varying float vViewZ;
      varying float vIntensity;
      uniform float opacity;

      float readDepth( sampler2D depthSampler, vec2 coord ) {
        float fragCoordZ = texture2D( depthSampler, coord ).x;
        float viewZ = perspectiveDepthToViewZ(fragCoordZ, cameraNear, cameraFar);
        return viewZ;
      }

      void main() {
        float d = 1.0;
        bool isSoft = resolution[0] > 0.0 && resolution[1] > 0.0;
        if (isSoft) {
          vec2 sUv = gl_FragCoord.xy / resolution;
          d = readDepth(depth, sUv);
        }
        float intensity = vIntensity;
        vec3 normal	= vec3(vNormal.x, vNormal.y, abs(vNormal.z));
        float angleIntensity	= pow( dot(normal, vec3(0.0, 0.0, 1.0)), anglePower );
        intensity	*= angleIntensity;
        // fades when z is close to sampled depth, meaning the cone is intersecting existing geometry
        if (isSoft) {
          intensity	*= smoothstep(0., 1., vViewZ - d);
        }
        gl_FragColor = vec4(lightColor, intensity * opacity);

        #include <tonemapping_fragment>
	      #include <encodings_fragment>
      }`})}}const PF=new $,Oye=R.exports.forwardRef(({opacity:t=1,radiusTop:e,radiusBottom:n,depthBuffer:i,color:r="white",distance:s=5,angle:o=.15,attenuation:a=5,anglePower:l=5,...c},u)=>{const h=R.exports.useRef(null),f=Te(_=>_.size),d=Te(_=>_.camera),p=Te(_=>_.viewport.dpr),[m]=R.exports.useState(()=>new Uye);e=e===void 0?.1:e,n=n===void 0?o*7:n,Ct(()=>{m.uniforms.spotPosition.value.copy(h.current.getWorldPosition(PF)),h.current.lookAt(h.current.parent.target.getWorldPosition(PF))});const g=R.exports.useMemo(()=>{const _=new os(e,n,s,128,64,!0);return _.applyMatrix4(new Ze().makeTranslation(0,-s/2,0)),_.applyMatrix4(new Ze().makeRotationX(-Math.PI/2)),_},[o,s,e,n]);return se("spotLight",{ref:u,angle:o,color:r,distance:s,...c,children:se("mesh",{ref:h,geometry:g,raycast:()=>null,children:se("primitive",{object:m,attach:"material","uniforms-opacity-value":t,"uniforms-lightColor-value":r,"uniforms-attenuation-value":a,"uniforms-anglePower-value":l,"uniforms-depth-value":i,"uniforms-cameraNear-value":d.near,"uniforms-cameraFar-value":d.far,"uniforms-resolution-value":i?[f.width*p,f.height*p]:[0,0]})})})}),Nye=R.exports.forwardRef(({args:t,map:e,toneMapped:n=!1,color:i="white",form:r="rect",intensity:s=1,scale:o=1,target:a,children:l,...c},u)=>{const h=R.exports.useRef(null);return R.exports.useLayoutEffect(()=>{!l&&!c.material&&(hs(h.current.material,{color:i}),h.current.material.color.multiplyScalar(s))},[i,s,l,c.material]),R.exports.useLayoutEffect(()=>{a&&h.current.lookAt(Array.isArray(a)?new $(...a):a)},[a]),o=Array.isArray(o)&&o.length===2?[o[0],o[1],1]:o,vt("mesh",{ref:Hn([h,u]),scale:o,...c,children:[r==="circle"?se("ringGeometry",{args:[0,1,64]}):r==="ring"?se("ringGeometry",{args:[.5,1,64]}):r==="rect"?se("planeGeometry",{}):se(r,{args:t}),l||(c.material?null:se("meshBasicMaterial",{toneMapped:n,map:e,side:Po}))]})});function g9(t,e,n=new $){const i=Math.PI*(t-.5),r=2*Math.PI*(e-.5);return n.x=Math.cos(r),n.y=Math.sin(i),n.z=Math.sin(r),n}const Gye=R.exports.forwardRef(({inclination:t=.6,azimuth:e=.1,distance:n=1e3,mieCoefficient:i=.005,mieDirectionalG:r=.8,rayleigh:s=.5,turbidity:o=10,sunPosition:a=g9(t,e),...l},c)=>{const u=R.exports.useMemo(()=>new $().setScalar(n),[n]),[h]=R.exports.useState(()=>new nc);return se("primitive",{object:h,ref:c,"material-uniforms-mieCoefficient-value":i,"material-uniforms-mieDirectionalG-value":r,"material-uniforms-rayleigh-value":s,"material-uniforms-sunPosition-value":a,"material-uniforms-turbidity-value":o,scale:u,...l})});class zye extends As{constructor(){super({uniforms:{time:{value:0},fade:{value:1}},vertexShader:`
      uniform float time;
      attribute float size;
      varying vec3 vColor;
      void main() {
        vColor = color;
        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);
        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(mvPosition.x + 2.0 * time + 100.0));
        gl_Position = projectionMatrix * mvPosition;
      }`,fragmentShader:`
      uniform sampler2D pointTexture;
      uniform float fade;
      varying vec3 vColor;
      void main() {
        float opacity = 1.0;
        if (fade == 1.0) {
          float d = distance(gl_PointCoord, vec2(0.5, 0.5));
          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));
        }
        gl_FragColor = vec4(vColor, opacity);

        #include <tonemapping_fragment>
	      #include <encodings_fragment>
      }`})}}const Qye=t=>new $().setFromSpherical(new Qm(t,Math.acos(1-Math.random()*2),Math.random()*2*Math.PI)),Hye=R.exports.forwardRef(({radius:t=100,depth:e=50,count:n=5e3,saturation:i=0,factor:r=4,fade:s=!1,speed:o=1},a)=>{const l=R.exports.useRef(),[c,u,h]=R.exports.useMemo(()=>{const d=[],p=[],m=Array.from({length:n},()=>(.5+.5*Math.random())*r),g=new xt;let _=t+e;const y=e/n;for(let x=0;x<n;x++)_-=y*Math.random(),d.push(...Qye(_).toArray()),g.setHSL(x/n,i,.9),p.push(g.r,g.g,g.b);return[new Float32Array(d),new Float32Array(p),new Float32Array(m)]},[n,e,r,t,i]);Ct(d=>l.current&&(l.current.uniforms.time.value=d.clock.getElapsedTime()*o));const[f]=R.exports.useState(()=>new zye);return vt("points",{ref:a,children:[vt("bufferGeometry",{children:[se("bufferAttribute",{attach:"attributes-position",args:[c,3]}),se("bufferAttribute",{attach:"attributes-color",args:[u,3]}),se("bufferAttribute",{attach:"attributes-size",args:[h,1]})]}),se("primitive",{ref:l,object:f,attach:"material",blending:l6,"uniforms-fade-value":s,transparent:!0,vertexColors:!0})]})}),Vye="https://rawcdn.githack.com/pmndrs/drei-assets/9225a9f1fbd449d9411125c2f419b843d0308c9f/cloud.png";function Wye({opacity:t=.5,speed:e=.4,width:n=10,depth:i=1.5,segments:r=20,texture:s=Vye,color:o="#ffffff",depthTest:a=!0,...l}){const c=Te(d=>d.gl),u=R.exports.useRef(),h=bh(s),f=R.exports.useMemo(()=>[...new Array(r)].map((d,p)=>({x:n/2-Math.random()*n,y:n/2-Math.random()*n,scale:.4+Math.sin((p+1)/r*Math.PI)*((.2+Math.random())*10),density:Math.max(.2,Math.random()),rotation:Math.max(.002,.005*Math.random())*e})),[n,r,e]);return Ct(d=>{var p;return(p=u.current)==null?void 0:p.children.forEach((m,g)=>{m.children[0].rotation.z+=f[g].rotation,m.children[0].scale.setScalar(f[g].scale+(1+Math.sin(d.clock.getElapsedTime()/10))/2*g/10)})}),se("group",{...l,children:se("group",{position:[0,0,r/2*i],ref:u,children:f.map(({x:d,y:p,scale:m,density:g},_)=>se(_z,{position:[d,p,-_*i],children:se(f9,{scale:m,rotation:[0,0,0],children:se("meshStandardMaterial",{map:h,"map-encoding":c.outputEncoding,transparent:!0,opacity:m/6*g*t,depthTest:a,color:o})})},_))})})}var jye=`#define GLSLIFY 1
varying vec3 vColor;varying float vOpacity;void main(){float distanceToCenter=distance(gl_PointCoord,vec2(0.5));float strength=0.05/distanceToCenter-0.1;gl_FragColor=vec4(vColor,strength*vOpacity);}`,Xye=`#define GLSLIFY 1
uniform float pixelRatio;uniform float time;attribute float size;attribute float speed;attribute float opacity;attribute vec3 noise;attribute vec3 color;varying vec3 vColor;varying float vOpacity;void main(){vec4 modelPosition=modelMatrix*vec4(position,1.0);modelPosition.y+=sin(time*speed+modelPosition.x*noise.x*100.0)*0.2;modelPosition.z+=cos(time*speed+modelPosition.x*noise.y*100.0)*0.2;modelPosition.x+=cos(time*speed+modelPosition.x*noise.z*100.0)*0.2;vec4 viewPosition=viewMatrix*modelPosition;vec4 projectionPostion=projectionMatrix*viewPosition;gl_Position=projectionPostion;gl_PointSize=size*25.*pixelRatio;gl_PointSize*=(1.0/-viewPosition.z);vColor=color;vOpacity=opacity;}`;const Yye=a0({time:0,pixelRatio:1},Xye,jye),v9=t=>t&&t.constructor===Float32Array,qye=t=>[t.r,t.g,t.b],_9=t=>t instanceof mt||t instanceof $||t instanceof dr,y9=t=>Array.isArray(t)?t:_9(t)?t.toArray():[t,t,t];function Ap(t,e,n){return R.exports.useMemo(()=>{if(e!==void 0){if(v9(e))return e;if(e instanceof xt){const i=Array.from({length:t*3},()=>qye(e)).flat();return Float32Array.from(i)}else if(_9(e)||Array.isArray(e)){const i=Array.from({length:t*3},()=>y9(e)).flat();return Float32Array.from(i)}return Float32Array.from({length:t},()=>e)}return Float32Array.from({length:t},n)},[e])}const Jye=R.exports.forwardRef(({noise:t=1,count:e=100,speed:n=1,opacity:i=1,scale:r=1,size:s,color:o,...a},l)=>{R.exports.useMemo(()=>Dr({SparklesMaterial:Yye}),[]);const c=R.exports.useRef(),u=Te(_=>_.viewport.dpr),h=R.exports.useMemo(()=>Float32Array.from(Array.from({length:e},()=>y9(r).map(ct.randFloatSpread)).flat()),[e,r]),f=Ap(e,s,Math.random),d=Ap(e,i),p=Ap(e,n),m=Ap(e*3,t),g=Ap(o===void 0?e*3:e,v9(o)?o:new xt(o),()=>1);return Ct(_=>c.current.uniforms.time.value=_.clock.elapsedTime),vt("points",{...a,ref:l,children:[vt("bufferGeometry",{children:[se("bufferAttribute",{attach:"attributes-position",args:[h,3]}),se("bufferAttribute",{attach:"attributes-size",args:[f,1]}),se("bufferAttribute",{attach:"attributes-opacity",args:[d,1]}),se("bufferAttribute",{attach:"attributes-speed",args:[p,1]}),se("bufferAttribute",{attach:"attributes-color",args:[g,3]}),se("bufferAttribute",{attach:"attributes-noise",args:[m,3]})]}),se("sparklesMaterial",{ref:c,transparent:!0,pixelRatio:u,depthWrite:!1})]},`particle-${e}-${JSON.stringify(r)}`)});function Kye(t){switch(t){case 64:return"-64px";case 128:return"-128px";case 256:return"-256px";case 512:return"-512px";default:return""}}const Zye="https://cdn.jsdelivr.net/gh/pmndrs/drei-assets@master/matcaps.json",$ye="https://rawcdn.githack.com/emmelleppi/matcaps/9b36ccaaf0a24881a39062d05566c9e92be4aa0d";function exe(t=0,e=1024,n){const i=Mh(()=>fetch(Zye).then(u=>u.json()),["matcapList"]),r=i[0],s=R.exports.useMemo(()=>Object.keys(i).length,[]),a=`${R.exports.useMemo(()=>typeof t=="string"?t:typeof t=="number"?i[t]:null,[t])||r}${Kye(e)}.png`,l=`${$ye}/${e}/${a}`;return[bh(l,n),l,s]}const txe="https://rawcdn.githack.com/pmndrs/drei-assets/7a3104997e1576f83472829815b00880d88b32fb",nxe="https://cdn.jsdelivr.net/gh/pmndrs/drei-assets@master/normals/normals.json";function ixe(t=0,e={},n){const{repeat:i=[1,1],anisotropy:r=1,offset:s=[0,0]}=e,o=Mh(()=>fetch(nxe).then(f=>f.json()),["normalsList"]),a=R.exports.useMemo(()=>Object.keys(o).length,[]),l=o[0],c=o[t]||l,u=`${txe}/normals/${c}`,h=bh(u,n);return R.exports.useLayoutEffect(()=>{!h||(h.wrapS=h.wrapT=ol,h.repeat=new mt(i[0],i[1]),h.offset=new mt(s[0],s[1]),h.anisotropy=r)},[h,r,i,s]),[h,u,a]}const DF=new Ze,Nw=new xh,FF=new to,Gw=new $;class x9 extends el{constructor(){super(),this.size=0,this.color=new xt("white"),this.instance={current:void 0},this.instanceKey={current:void 0}}get geometry(){var e;return(e=this.instance.current)==null?void 0:e.geometry}raycast(e,n){var i,r;const s=this.instance.current;if(!s||!s.geometry)return;const o=s.userData.instances.indexOf(this.instanceKey);if(o===-1||o>s.geometry.drawRange.count)return;const a=(i=(r=e.params.Points)==null?void 0:r.threshold)!==null&&i!==void 0?i:1;if(FF.set(this.getWorldPosition(Gw),a),e.ray.intersectsSphere(FF)===!1)return;DF.copy(s.matrixWorld).invert(),Nw.copy(e.ray).applyMatrix4(DF);const l=a/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,u=Nw.distanceSqToPoint(Gw);if(u<c){const h=new $;Nw.closestPointToPoint(Gw,h),h.applyMatrix4(this.matrixWorld);const f=e.ray.origin.distanceTo(h);if(f<e.near||f>e.far)return;n.push({distance:f,distanceToRay:Math.sqrt(u),point:h,index:o,face:null,object:this})}}}let cu,gp;const E9=R.exports.createContext(null),LF=new Ze,kF=new $,rxe=R.exports.forwardRef(({children:t,range:e,limit:n=1e3,...i},r)=>{const s=R.exports.useRef(null),[o,a]=R.exports.useState([]),[[l,c,u]]=R.exports.useState(()=>[new Float32Array(n*3),Float32Array.from({length:n*3},()=>1),Float32Array.from({length:n},()=>1)]);R.exports.useEffect(()=>{s.current.geometry.attributes.position.needsUpdate=!0}),Ct(()=>{for(s.current.updateMatrix(),s.current.updateMatrixWorld(),LF.copy(s.current.matrixWorld).invert(),s.current.geometry.drawRange.count=Math.min(n,e!==void 0?e:n,o.length),cu=0;cu<o.length;cu++)gp=o[cu].current,gp.getWorldPosition(kF).applyMatrix4(LF),kF.toArray(l,cu*3),s.current.geometry.attributes.position.needsUpdate=!0,gp.matrixWorldNeedsUpdate=!0,gp.color.toArray(c,cu*3),s.current.geometry.attributes.color.needsUpdate=!0,u.set([gp.size],cu),s.current.geometry.attributes.size.needsUpdate=!0});const h=R.exports.useMemo(()=>({getParent:()=>s,subscribe:f=>(a(d=>[...d,f]),()=>a(d=>d.filter(p=>p.current!==f.current)))}),[]);return R.exports.createElement("points",oh({userData:{instances:o},matrixAutoUpdate:!1,ref:Hn([r,s]),raycast:()=>null},i),vt("bufferGeometry",{children:[se("bufferAttribute",{attach:"attributes-position",count:l.length/3,array:l,itemSize:3,usage:cs}),se("bufferAttribute",{attach:"attributes-color",count:c.length/3,array:c,itemSize:3,usage:cs}),se("bufferAttribute",{attach:"attributes-size",count:u.length,array:u,itemSize:1,usage:cs})]}),R.exports.createElement(E9.Provider,{value:h},t))}),sxe=R.exports.forwardRef(({children:t,...e},n)=>{R.exports.useMemo(()=>Dr({PositionPoint:x9}),[]);const i=R.exports.useRef(),{subscribe:r,getParent:s}=R.exports.useContext(E9);return R.exports.useLayoutEffect(()=>r(i),[]),se("positionPoint",{instance:s(),instanceKey:i,ref:Hn([n,i]),...e,children:t})}),w9=R.exports.forwardRef(({children:t,positions:e,colors:n,sizes:i,stride:r=3,...s},o)=>{const a=R.exports.useRef(null);return Ct(()=>{const l=a.current.geometry.attributes;l.position.needsUpdate=!0,n&&(l.color.needsUpdate=!0),i&&(l.size.needsUpdate=!0)}),vt("points",{ref:Hn([o,a]),...s,children:[vt("bufferGeometry",{children:[se("bufferAttribute",{attach:"attributes-position",count:e.length/r,array:e,itemSize:r,usage:cs}),n&&se("bufferAttribute",{attach:"attributes-color",count:n.length/r,array:n,itemSize:3,usage:cs}),i&&se("bufferAttribute",{attach:"attributes-size",count:i.length/r,array:i,itemSize:1,usage:cs})]}),t]})}),oxe=R.exports.forwardRef((t,e)=>t.positions instanceof Float32Array?se(w9,{...t,ref:e}):se(rxe,{...t,ref:e}));var Rf={exports:{}},axe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",lxe=axe,cxe=lxe;function M9(){}function C9(){}C9.resetWarningCache=M9;var uxe=function(){function t(i,r,s,o,a,l){if(l!==cxe){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:C9,resetWarningCache:M9};return n.PropTypes=n,n};Rf.exports=uxe();function S9(t){return b9(t.children,t.components)}S9.propTypes={children:Rf.exports.func.isRequired,components:Rf.exports.arrayOf(Rf.exports.oneOfType([Rf.exports.element,Rf.exports.func])).isRequired};function b9(t,e,n){if(n=n||[],!e[0])return t(n);function i(r){return b9(t,e.slice(1),n.concat([r]))}return typeof e[0]=="function"?e[0]({results:n,render:i}):R.exports.cloneElement(e[0],{children:i})}const UF=new Ze,OF=new Ze,rv=[],zw=new rt;class hxe extends el{constructor(){super(),this.color=new xt("white"),this.instance={current:void 0},this.instanceKey={current:void 0}}get geometry(){var e;return(e=this.instance.current)==null?void 0:e.geometry}raycast(e,n){const i=this.instance.current;if(!i||!i.geometry||!i.material)return;zw.geometry=i.geometry;const r=i.matrixWorld,s=i.userData.instances.indexOf(this.instanceKey);if(!(s===-1||s>i.count)){i.getMatrixAt(s,UF),OF.multiplyMatrices(r,UF),zw.matrixWorld=OF,zw.raycast(e,rv);for(let o=0,a=rv.length;o<a;o++){const l=rv[o];l.instanceId=s,l.object=this,n.push(l)}rv.length=0}}}const I9=R.exports.createContext(null),NF=new Ze,GF=new Ze,fxe=new Ze,zF=new $,QF=new $t,HF=new $,T9=R.exports.forwardRef(({context:t,children:e,...n},i)=>{R.exports.useMemo(()=>Dr({PositionMesh:hxe}),[]);const r=R.exports.useRef(),{subscribe:s,getParent:o}=R.exports.useContext(t||I9);return R.exports.useLayoutEffect(()=>s(r),[]),se("positionMesh",{instance:o(),instanceKey:r,ref:Hn([i,r]),...n,children:e})}),B9=R.exports.forwardRef(({children:t,range:e,limit:n=1e3,frames:i=1/0,...r},s)=>{const[{context:o,instance:a}]=R.exports.useState(()=>{const g=R.exports.createContext(null);return{context:g,instance:R.exports.forwardRef((_,y)=>se(T9,{context:g,..._,ref:y}))}}),l=R.exports.useRef(null),[c,u]=R.exports.useState([]),[[h,f]]=R.exports.useState(()=>{const g=new Float32Array(n*16);for(let _=0;_<n;_++)fxe.identity().toArray(g,_*16);return[g,new Float32Array([...new Array(n*3)].map(()=>1))]});R.exports.useEffect(()=>{l.current.instanceMatrix.needsUpdate=!0});let d=0,p=0;Ct(()=>{if(i===1/0||d<i){l.current.updateMatrix(),l.current.updateMatrixWorld(),NF.copy(l.current.matrixWorld).invert(),p=Math.min(n,e!==void 0?e:n,c.length),l.current.count=p,l.current.instanceMatrix.updateRange.count=p*16,l.current.instanceColor.updateRange.count=p*3;for(let g=0;g<c.length;g++){const _=c[g].current;_.matrixWorld.decompose(zF,QF,HF),GF.compose(zF,QF,HF).premultiply(NF),GF.toArray(h,g*16),l.current.instanceMatrix.needsUpdate=!0,_.color.toArray(f,g*3),l.current.instanceColor.needsUpdate=!0}d++}});const m=R.exports.useMemo(()=>({getParent:()=>l,subscribe:g=>(u(_=>[..._,g]),()=>u(_=>_.filter(y=>y.current!==g.current)))}),[]);return vt("instancedMesh",{userData:{instances:c},matrixAutoUpdate:!1,ref:Hn([s,l]),args:[null,null,0],raycast:()=>null,...r,children:[se("instancedBufferAttribute",{attach:"instanceMatrix",count:h.length/16,array:h,itemSize:16,usage:cs}),se("instancedBufferAttribute",{attach:"instanceColor",count:f.length/3,array:f,itemSize:3,usage:cs}),typeof t=="function"?R.exports.createElement(o.Provider,{value:m},t(a)):R.exports.createElement(I9.Provider,{value:m},t)]})}),dxe=R.exports.forwardRef(function({meshes:e,children:n,...i},r){const s=Array.isArray(e);if(!s)for(const o of Object.keys(e))e[o].isMesh||delete e[o];return se("group",{ref:r,children:se(S9,{components:(s?e:Object.values(e)).map(({geometry:o,material:a})=>se(B9,{geometry:o,material:a,...i},o.uuid)),children:o=>s?n(...o):n(Object.keys(e).filter(a=>e[a].isMesh).reduce((a,l,c)=>({...a,[l]:o[c]}),{}))})})}),R9=R.exports.createContext(null),pxe=R.exports.forwardRef((t,e)=>{R.exports.useMemo(()=>Dr({SegmentObject:P9}),[]);const{limit:n=1e3,lineWidth:i=1,children:r,...s}=t,[o,a]=R.exports.useState([]),[l]=R.exports.useState(()=>new gz),[c]=R.exports.useState(()=>new wx),[u]=R.exports.useState(()=>new SI),[h]=R.exports.useState(()=>new mt(512,512)),[f]=R.exports.useState(()=>Array(n*6).fill(0)),[d]=R.exports.useState(()=>Array(n*6).fill(0)),p=R.exports.useMemo(()=>({subscribe:m=>(a(g=>[...g,m]),()=>a(g=>g.filter(_=>_.current!==m.current)))}),[]);return Ct(()=>{for(let g=0;g<n;g++){var m;const _=(m=o[g])==null?void 0:m.current;_&&(f[g*6+0]=_.start.x,f[g*6+1]=_.start.y,f[g*6+2]=_.start.z,f[g*6+3]=_.end.x,f[g*6+4]=_.end.y,f[g*6+5]=_.end.z,d[g*6+0]=_.color.r,d[g*6+1]=_.color.g,d[g*6+2]=_.color.b,d[g*6+3]=_.color.r,d[g*6+4]=_.color.g,d[g*6+5]=_.color.b)}u.setColors(d),u.setPositions(f),l.computeLineDistances()}),R.exports.createElement("primitive",{object:l,ref:e},se("primitive",{object:u,attach:"geometry"}),se("primitive",{object:c,attach:"material",vertexColors:!0,resolution:h,linewidth:i,...s}),R.exports.createElement(R9.Provider,{value:p},r))});class P9{constructor(){this.color=new xt("white"),this.start=new $(0,0,0),this.end=new $(0,0,0)}}const VF=t=>t instanceof $?t:new $(...typeof t=="number"?[t,t,t]:t),mxe=R.exports.forwardRef(({color:t,start:e,end:n},i)=>{const r=R.exports.useContext(R9);if(!r)throw"Segment must used inside Segments component.";const s=R.exports.useRef(null);return R.exports.useLayoutEffect(()=>r.subscribe(s),[]),se("segmentObject",{ref:Hn([s,i]),color:t,start:VF(e),end:VF(n)})}),Axe=R.exports.forwardRef(({children:t,distances:e,...n},i)=>{const r=R.exports.useRef(null);return R.exports.useLayoutEffect(()=>{const{current:s}=r;s.levels.length=0,s.children.forEach((o,a)=>s.levels.push({object:o,distance:e[a]}))}),Ct(s=>{var o;return(o=r.current)==null?void 0:o.update(s.camera)}),se("lOD",{ref:Hn([r,i]),...n,children:t})});function gxe({all:t,scene:e,camera:n}){const i=Te(({gl:o})=>o),r=Te(({camera:o})=>o),s=Te(({scene:o})=>o);return R.exports.useLayoutEffect(()=>{const o=[];t&&(e||s).traverse(c=>{c.visible===!1&&(o.push(c),c.visible=!0)}),i.compile(e||s,n||r);const a=new Jy(128);new A6(.01,1e5,a).update(i,e||s),a.dispose(),o.forEach(c=>c.visible=!1)},[]),null}function vxe(){const t=Te(e=>e.gl);return R.exports.useEffect(()=>(t.shadowMap.autoUpdate=!1,t.shadowMap.needsUpdate=!0,()=>{t.shadowMap.autoUpdate=t.shadowMap.needsUpdate=!0}),[t.shadowMap]),null}const WF=new Ze,jF=new xh,Qw=new to,Hw=new $;function _xe(t,e){const n=this.geometry,i=this.material,r=this.matrixWorld;i!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),Qw.copy(n.boundingSphere),Qw.applyMatrix4(r),t.ray.intersectsSphere(Qw)!==!1&&(WF.copy(r).invert(),jF.copy(t.ray).applyMatrix4(WF),!(n.boundingBox!==null&&jF.intersectBox(n.boundingBox,Hw)===null)&&e.push({distance:Hw.distanceTo(t.ray.origin),point:Hw.clone(),object:this})))}function yxe({pixelated:t}){const e=Te(o=>o.gl),n=Te(o=>o.internal.active),i=Te(o=>o.performance.current),r=Te(o=>o.viewport.initialDpr),s=Te(o=>o.setDpr);return R.exports.useEffect(()=>{const o=e.domElement;return()=>{n&&s(r),t&&o&&(o.style.imageRendering="auto")}},[]),R.exports.useEffect(()=>{s(i*r),t&&e.domElement&&(e.domElement.style.imageRendering=i===1?"auto":"pixelated")},[i]),null}function xxe(){const t=Te(i=>i.get),e=Te(i=>i.setEvents),n=Te(i=>i.performance.current);return R.exports.useEffect(()=>{const i=t().events.enabled;return()=>e({enabled:i})},[]),R.exports.useEffect(()=>e({enabled:n===1}),[n]),null}const D9=R.exports.createContext(null);function Exe({iterations:t=10,ms:e=250,threshold:n=.75,step:i=.1,factor:r=.5,flipflops:s=1/0,bounds:o=f=>f>100?[60,100]:[40,60],onIncline:a,onDecline:l,onChange:c,onFallback:u,children:h}){const f=Math.pow(10,0),[d,p]=R.exports.useState(()=>({fps:0,index:0,factor:r,flipped:0,refreshrate:0,fallback:!1,frames:[],averages:[],subscriptions:new Map,subscribe:g=>{const _=Symbol();return d.subscriptions.set(_,g.current),()=>void d.subscriptions.delete(_)}}));let m=0;return Ct(()=>{const{frames:g,averages:_}=d;if(!d.fallback&&_.length<t){g.push(performance.now());const y=g[g.length-1]-g[0];if(y>=e){if(d.fps=Math.round(g.length/y*1e3*f)/f,d.refreshrate=Math.max(d.refreshrate,d.fps),_[d.index++%t]=d.fps,_.length===t){const[x,E]=o(d.refreshrate),w=_.filter(b=>b>=E),S=_.filter(b=>b<x);w.length>t*n&&(d.factor=Math.min(1,d.factor+i),d.flipped++,a&&a(d),d.subscriptions.forEach(b=>b.onIncline&&b.onIncline(d))),S.length>t*n&&(d.factor=Math.max(0,d.factor-i),d.flipped++,l&&l(d),d.subscriptions.forEach(b=>b.onDecline&&b.onDecline(d))),m!==d.factor&&(m=d.factor,c&&c(d),d.subscriptions.forEach(b=>b.onChange&&b.onChange(d))),d.flipped>s&&!d.fallback&&(d.fallback=!0,u&&u(d),d.subscriptions.forEach(b=>b.onFallback&&b.onFallback(d))),d.averages=[]}d.frames=[]}}}),R.exports.createElement(D9.Provider,{value:d},h)}function wxe({onIncline:t,onDecline:e,onChange:n,onFallback:i}){const r=R.exports.useContext(D9),s=R.exports.useRef({onIncline:t,onDecline:e,onChange:n,onFallback:i});R.exports.useLayoutEffect(()=>{s.current.onIncline=t,s.current.onDecline=e,s.current.onChange=n,s.current.onFallback=i},[t,e,n,i]),R.exports.useLayoutEffect(()=>r.subscribe(s),[r])}const Mxe=R.exports.forwardRef(({children:t,width:e,height:n,samples:i=8,renderPriority:r=0,eventPriority:s=0,frames:o=1/0,...a},l)=>{const{size:c,viewport:u}=Te(),h=GI((e||c.width)*u.dpr,(n||c.height)*u.dpr,{samples:i}),[f]=R.exports.useState(()=>new Fc),d=R.exports.useCallback((p,m,g)=>{var _,y;let x=(_=h.texture)==null?void 0:_.__r3f.parent;for(;x&&!(x instanceof hr);)x=x.__r3f.parent;if(!x)return!1;g.raycaster.camera||g.events.compute(p,g,(y=g.previousRoot)==null?void 0:y.getState());const[E]=g.raycaster.intersectObject(x);if(!E)return!1;const w=E.uv;if(!w)return!1;m.raycaster.setFromCamera(m.pointer.set(w.x*2-1,w.y*2-1),m.camera)},[]);return R.exports.useImperativeHandle(l,()=>h.texture,[h]),vt(vs,{children:[r0(se(Cxe,{renderPriority:r,frames:o,fbo:h,children:t}),f,{events:{compute:d,priority:s}}),se("primitive",{object:h.texture,...a})]})});function Cxe({frames:t,renderPriority:e,children:n,fbo:i}){let r=0;return Ct(s=>{(t===1/0||r<t)&&(s.gl.setRenderTarget(i),s.gl.render(s.scene,s.camera),s.gl.setRenderTarget(null),r++)},e),se(vs,{children:n})}function Sxe({id:t=1,children:e,colorWrite:n=!1,depthWrite:i=!1,...r}){const s=R.exports.useMemo(()=>({colorWrite:n,depthWrite:i,stencilWrite:!0,stencilRef:t,stencilFunc:c6,stencilFail:Wv,stencilZFail:Wv,stencilZPass:Wv}),[t,n,i]);return vt("mesh",{renderOrder:-t,...r,children:[se("meshBasicMaterial",{...s}),typeof e=="function"?e(s):e]})}function bxe(t,e=!1){return{stencilWrite:!0,stencilRef:t,stencilFunc:e?Q6:w6,stencilFail:Hv,stencilZFail:Hv,stencilZPass:Hv}}const Ixe=t=>t&&t.isOrthographicCamera,XF=new xt;function Txe({canvasSize:t,scene:e,index:n,children:i,frames:r,rect:s,track:o}){const a=Te(f=>f.get),l=Te(f=>f.camera),c=Te(f=>f.scene),u=Te(f=>f.setEvents);let h=0;return Ct(f=>{if(r===1/0||h<=r){var d;s.current=(d=o.current)==null?void 0:d.getBoundingClientRect(),h++}if(s.current){const{left:p,right:m,top:g,bottom:_,width:y,height:x}=s.current,E=_<0||g>t.height||m<0||p>t.width,w=t.height-_,S=y/x;if(Ixe(l)?(l.left!==y/-2||l.right!==y/2||l.top!==x/2||l.bottom!==x/-2)&&(Object.assign(l,{left:y/-2,right:y/2,top:x/2,bottom:x/-2}),l.updateProjectionMatrix()):l.aspect!==S&&(l.aspect=S,l.updateProjectionMatrix()),f.gl.setViewport(p,w,y,x),f.gl.setScissor(p,w,y,x),f.gl.setScissorTest(!0),E){f.gl.getClearColor(XF),f.gl.setClearColor(XF,f.gl.getClearAlpha()),f.gl.clear(!0,!0);return}f.gl.render(i?c:e,l)}},n),R.exports.useEffect(()=>{const f=a().events.connected;return u({connected:o.current}),()=>u({connected:f})},[]),se(vs,{children:i})}const Bxe=({track:t,index:e=1,frames:n=1/0,children:i})=>{const r=R.exports.useRef(null),{size:s,scene:o}=Te(),[a]=R.exports.useState(()=>new Fc),l=R.exports.useCallback((h,f)=>{if(t.current&&h.target===t.current){const{width:d,height:p,left:m,top:g}=r.current,_=h.clientX-m,y=h.clientY-g;f.pointer.set(_/d*2-1,-(y/p)*2+1),f.raycaster.setFromCamera(f.pointer,f.camera)}},[r]),[c,u]=R.exports.useReducer(()=>!0,!1);return R.exports.useEffect(()=>{var h;r.current=(h=t.current)==null?void 0:h.getBoundingClientRect(),u()},[]),se(vs,{children:c&&r0(se(Txe,{canvasSize:s,frames:n,scene:o,track:t,rect:r,index:e,children:i}),a,{events:{compute:l,priority:e},size:{width:r.current.width,height:r.current.height}})})},Bx=R.exports.createContext(null),sv=new $,YF=new $,Rxe=(t,e,n,i)=>{const r=e.dot(e),s=e.dot(t)-e.dot(n),o=e.dot(i);return o===0?-s/r:(sv.copy(i).multiplyScalar(r/o).sub(e),YF.copy(i).multiplyScalar(s/o).add(n).sub(t),-sv.dot(YF)/sv.dot(sv))},Pxe=new $(0,1,0),qF=new Ze,Vw=({direction:t,axis:e})=>{const{translation:n,translationLimits:i,annotationsClass:r,depthTest:s,scale:o,lineWidth:a,fixed:l,axisColors:c,hoveredColor:u,displayValues:h,opacity:f,onDragStart:d,onDrag:p,onDragEnd:m,userData:g}=R.exports.useContext(Bx),_=Te(Z=>Z.controls),y=R.exports.useRef(null),x=R.exports.useRef(null),E=R.exports.useRef(null),w=R.exports.useRef(0),[S,b]=R.exports.useState(!1),M=R.exports.useCallback(Z=>{h&&(y.current.innerText=`${n.current[e].toFixed(2)}`,y.current.style.display="block"),Z.stopPropagation();const G=new Ze().extractRotation(x.current.matrixWorld),O=Z.point.clone(),z=new $().setFromMatrixPosition(x.current.matrixWorld),Q=t.clone().applyMatrix4(G).normalize();E.current={clickPoint:O,dir:Q},w.current=n.current[e],d({component:"Arrow",axis:e,origin:z,directions:[Q]}),_&&(_.enabled=!1),Z.target.setPointerCapture(Z.pointerId)},[t,_,d,n,e]),T=R.exports.useCallback(Z=>{if(Z.stopPropagation(),S||b(!0),E.current){const{clickPoint:G,dir:O}=E.current,[z,Q]=(i==null?void 0:i[e])||[void 0,void 0];let H=Rxe(G,O,Z.ray.origin,Z.ray.direction);z!==void 0&&(H=Math.max(H,z-w.current)),Q!==void 0&&(H=Math.min(H,Q-w.current)),n.current[e]=w.current+H,h&&(y.current.innerText=`${n.current[e].toFixed(2)}`),qF.makeTranslation(O.x*H,O.y*H,O.z*H),p(qF)}},[p,S,n,i,e]),B=R.exports.useCallback(Z=>{h&&(y.current.style.display="none"),Z.stopPropagation(),E.current=null,m(),_&&(_.enabled=!0),Z.target.releasePointerCapture(Z.pointerId)},[_,m]),L=R.exports.useCallback(Z=>{Z.stopPropagation(),b(!1)},[]),{cylinderLength:F,coneWidth:U,coneLength:k,matrixL:X}=R.exports.useMemo(()=>{const Z=l?a/o*1.6:o/20,G=l?.2:o/5,O=l?1-G:o-G,z=new $t().setFromUnitVectors(Pxe,t.clone().normalize()),Q=new Ze().makeRotationFromQuaternion(z);return{cylinderLength:O,coneWidth:Z,coneLength:G,matrixL:Q}},[t,o,a,l]),Y=S?u:c[e];return se("group",{ref:x,children:vt("group",{matrix:X,matrixAutoUpdate:!1,onPointerDown:M,onPointerMove:T,onPointerUp:B,onPointerOut:L,children:[se(dx,{position:[0,-k,0],children:se("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:r,ref:y})}),se("mesh",{visible:!1,position:[0,(F+k)/2,0],userData:g,children:se("cylinderGeometry",{args:[U*1.4,U*1.4,F+k,8,1]})}),se(Cc,{transparent:!0,raycast:()=>null,depthTest:s,points:[0,0,0,0,F,0],lineWidth:a,color:Y,opacity:f,polygonOffset:!0,renderOrder:1,polygonOffsetFactor:-10}),vt("mesh",{raycast:()=>null,position:[0,F+k/2,0],renderOrder:500,children:[se("coneGeometry",{args:[U,k,24,1]}),se("meshBasicMaterial",{transparent:!0,depthTest:s,color:Y,opacity:f,polygonOffset:!0,polygonOffsetFactor:-10})]})]})})},Dxe=(t,e,n)=>{const i=Math.abs(t.x)>=Math.abs(t.y)&&Math.abs(t.x)>=Math.abs(t.z)?0:Math.abs(t.y)>=Math.abs(t.x)&&Math.abs(t.y)>=Math.abs(t.z)?1:2,r=[0,1,2].sort((p,m)=>Math.abs(e.getComponent(m))-Math.abs(e.getComponent(p))),s=i===r[0]?r[1]:r[0],o=t.getComponent(i),a=t.getComponent(s),l=e.getComponent(i),c=e.getComponent(s),u=n.getComponent(i),f=(n.getComponent(s)-u*(a/o))/(c-l*(a/o));return[(u-f*l)/o,f]},ov=new xh,av=new $,JF=new Ze,Ww=({dir1:t,dir2:e,axis:n})=>{const{translation:i,translationLimits:r,annotationsClass:s,depthTest:o,scale:a,lineWidth:l,fixed:c,axisColors:u,hoveredColor:h,displayValues:f,opacity:d,onDragStart:p,onDrag:m,onDragEnd:g,userData:_}=R.exports.useContext(Bx),y=Te(O=>O.controls),x=R.exports.useRef(null),E=R.exports.useRef(null),w=R.exports.useRef(null),S=R.exports.useRef(0),b=R.exports.useRef(0),[M,T]=R.exports.useState(!1),B=R.exports.useCallback(O=>{f&&(x.current.innerText=`${i.current[(n+1)%3].toFixed(2)}, ${i.current[(n+2)%3].toFixed(2)}`,x.current.style.display="block"),O.stopPropagation();const z=O.point.clone(),Q=new $().setFromMatrixPosition(E.current.matrixWorld),H=new $().setFromMatrixColumn(E.current.matrixWorld,0).normalize(),J=new $().setFromMatrixColumn(E.current.matrixWorld,1).normalize(),j=new $().setFromMatrixColumn(E.current.matrixWorld,2).normalize(),oe=new yh().setFromNormalAndCoplanarPoint(j,Q);w.current={clickPoint:z,e1:H,e2:J,plane:oe},S.current=i.current[(n+1)%3],b.current=i.current[(n+2)%3],p({component:"Slider",axis:n,origin:Q,directions:[H,J,j]}),y&&(y.enabled=!1),O.target.setPointerCapture(O.pointerId)},[y,p,n]),L=R.exports.useCallback(O=>{if(O.stopPropagation(),M||T(!0),w.current){const{clickPoint:z,e1:Q,e2:H,plane:J}=w.current,[j,oe]=(r==null?void 0:r[(n+1)%3])||[void 0,void 0],[K,ce]=(r==null?void 0:r[(n+2)%3])||[void 0,void 0];ov.copy(O.ray),ov.intersectPlane(J,av),ov.direction.negate(),ov.intersectPlane(J,av),av.sub(z);let[he,ve]=Dxe(Q,H,av);j!==void 0&&(he=Math.max(he,j-S.current)),oe!==void 0&&(he=Math.min(he,oe-S.current)),K!==void 0&&(ve=Math.max(ve,K-b.current)),ce!==void 0&&(ve=Math.min(ve,ce-b.current)),i.current[(n+1)%3]=S.current+he,i.current[(n+2)%3]=b.current+ve,f&&(x.current.innerText=`${i.current[(n+1)%3].toFixed(2)}, ${i.current[(n+2)%3].toFixed(2)}`),JF.makeTranslation(he*Q.x+ve*H.x,he*Q.y+ve*H.y,he*Q.z+ve*H.z),m(JF)}},[m,M,i,r,n]),F=R.exports.useCallback(O=>{f&&(x.current.style.display="none"),O.stopPropagation(),w.current=null,g(),y&&(y.enabled=!0),O.target.releasePointerCapture(O.pointerId)},[y,g]),U=R.exports.useCallback(O=>{O.stopPropagation(),T(!1)},[]),k=R.exports.useMemo(()=>{const O=t.clone().normalize(),z=e.clone().normalize();return new Ze().makeBasis(O,z,O.clone().cross(z))},[t,e]),X=c?1/7:a/7,Y=c?.225:a*.225,Z=M?h:u[n],G=R.exports.useMemo(()=>[new $(0,0,0),new $(0,Y,0),new $(Y,Y,0),new $(Y,0,0),new $(0,0,0)],[Y]);return vt("group",{ref:E,matrix:k,matrixAutoUpdate:!1,children:[se(dx,{position:[0,0,0],children:se("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:s,ref:x})}),vt("group",{position:[X*1.7,X*1.7,0],children:[vt("mesh",{visible:!0,onPointerDown:B,onPointerMove:L,onPointerUp:F,onPointerOut:U,scale:Y,userData:_,children:[se("planeGeometry",{}),se("meshBasicMaterial",{transparent:!0,depthTest:o,color:Z,polygonOffset:!0,polygonOffsetFactor:-10,side:Po})]}),se(Cc,{position:[-Y/2,-Y/2,0],transparent:!0,depthTest:o,points:G,lineWidth:l,color:Z,opacity:d,polygonOffset:!0,polygonOffsetFactor:-10,userData:_})]})]})};var KF=0/0,Fxe="[object Symbol]",Lxe=/^\s+|\s+$/g,kxe=/^[-+]0x[0-9a-f]+$/i,Uxe=/^0b[01]+$/i,Oxe=/^0o[0-7]+$/i,Nxe=parseInt,Gxe=Object.prototype,zxe=Gxe.toString;function Qxe(t,e,n){return t===t&&(n!==void 0&&(t=t<=n?t:n),e!==void 0&&(t=t>=e?t:e)),t}function ZF(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function Hxe(t){return!!t&&typeof t=="object"}function Vxe(t){return typeof t=="symbol"||Hxe(t)&&zxe.call(t)==Fxe}function jw(t){if(typeof t=="number")return t;if(Vxe(t))return KF;if(ZF(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=ZF(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(Lxe,"");var n=Uxe.test(t);return n||Oxe.test(t)?Nxe(t.slice(2),n?2:8):kxe.test(t)?KF:+t}function Wxe(t,e,n){return n===void 0&&(n=e,e=void 0),n!==void 0&&(n=jw(n),n=n===n?n:0),e!==void 0&&(e=jw(e),e=e===e?e:0),Qxe(jw(t),e,n)}var jxe=Wxe;const Xw=new $,Yw=new $,qw=t=>t*180/Math.PI,Xxe=t=>t*Math.PI/180,Yxe=(t,e,n,i,r)=>{Xw.copy(t).sub(n),Yw.copy(e).sub(n);const s=i.dot(i),o=r.dot(r),a=Xw.dot(i)/s,l=Xw.dot(r)/o,c=Yw.dot(i)/s,u=Yw.dot(r)/o,h=Math.atan2(l,a);return Math.atan2(u,c)-h},qxe=(t,e)=>{let n=Math.floor(t/e);return n=n<0?n+1:n,t-n*e},$F=t=>{let e=qxe(t,2*Math.PI);return Math.abs(e)<1e-6?0:(e<0&&(e+=2*Math.PI),e)},lv=new Ze,eL=new $,cv=new xh,Jw=new $,Kw=({dir1:t,dir2:e,axis:n})=>{const{rotationLimits:i,annotationsClass:r,depthTest:s,scale:o,lineWidth:a,fixed:l,axisColors:c,hoveredColor:u,displayValues:h,opacity:f,onDragStart:d,onDrag:p,onDragEnd:m,userData:g}=R.exports.useContext(Bx),_=Te(Y=>Y.controls),y=R.exports.useRef(null),x=R.exports.useRef(null),E=R.exports.useRef(0),w=R.exports.useRef(0),S=R.exports.useRef(null),[b,M]=R.exports.useState(!1),T=R.exports.useCallback(Y=>{h&&(y.current.innerText=`${qw(w.current).toFixed(0)}\xBA`,y.current.style.display="block"),Y.stopPropagation();const Z=Y.point.clone(),G=new $().setFromMatrixPosition(x.current.matrixWorld),O=new $().setFromMatrixColumn(x.current.matrixWorld,0).normalize(),z=new $().setFromMatrixColumn(x.current.matrixWorld,1).normalize(),Q=new $().setFromMatrixColumn(x.current.matrixWorld,2).normalize(),H=new yh().setFromNormalAndCoplanarPoint(Q,G);S.current={clickPoint:Z,origin:G,e1:O,e2:z,normal:Q,plane:H},d({component:"Rotator",axis:n,origin:G,directions:[O,z,Q]}),_&&(_.enabled=!1),Y.target.setPointerCapture(Y.pointerId)},[_,d,n]),B=R.exports.useCallback(Y=>{if(Y.stopPropagation(),b||M(!0),S.current){const{clickPoint:Z,origin:G,e1:O,e2:z,normal:Q,plane:H}=S.current,[J,j]=(i==null?void 0:i[n])||[void 0,void 0];cv.copy(Y.ray),cv.intersectPlane(H,Jw),cv.direction.negate(),cv.intersectPlane(H,Jw);let oe=Yxe(Z,Jw,G,O,z),K=qw(oe);Y.shiftKey&&(K=Math.round(K/10)*10,oe=Xxe(K)),J!==void 0&&j!==void 0&&j-J<2*Math.PI?(oe=$F(oe),oe=oe>Math.PI?oe-2*Math.PI:oe,oe=jxe(oe,J-E.current,j-E.current),w.current=E.current+oe):(w.current=$F(E.current+oe),w.current=w.current>Math.PI?w.current-2*Math.PI:w.current),h&&(K=qw(w.current),y.current.innerText=`${K.toFixed(0)}\xBA`),lv.makeRotationAxis(Q,oe),eL.copy(G).applyMatrix4(lv).sub(G).negate(),lv.setPosition(eL),p(lv)}},[p,b,i,n]),L=R.exports.useCallback(Y=>{h&&(y.current.style.display="none"),Y.stopPropagation(),E.current=w.current,S.current=null,m(),_&&(_.enabled=!0),Y.target.releasePointerCapture(Y.pointerId)},[_,m]),F=R.exports.useCallback(Y=>{Y.stopPropagation(),M(!1)},[]),U=R.exports.useMemo(()=>{const Y=t.clone().normalize(),Z=e.clone().normalize();return new Ze().makeBasis(Y,Z,Y.clone().cross(Z))},[t,e]),k=l?.65:o*.65,X=R.exports.useMemo(()=>{const Z=[];for(let G=0;G<=32;G++){const O=G*(Math.PI/2)/32;Z.push(new $(Math.cos(O)*k,Math.sin(O)*k,0))}return Z},[k]);return vt("group",{ref:x,onPointerDown:T,onPointerMove:B,onPointerUp:L,onPointerOut:F,matrix:U,matrixAutoUpdate:!1,children:[se(dx,{position:[k,k,0],children:se("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:r,ref:y})}),se(Cc,{points:X,lineWidth:a*4,visible:!1,userData:g}),se(Cc,{transparent:!0,raycast:()=>null,depthTest:s,points:X,lineWidth:a,color:b?u:c[n],opacity:f,polygonOffset:!0,polygonOffsetFactor:-10})]})},Jxe=new $,Kxe=new $,Zxe=new $,$xe=(t,e,n)=>{const i=n.width/2,r=n.height/2;e.updateMatrixWorld(!1);const s=t.project(e);return s.x=s.x*i+i,s.y=-(s.y*r)+r,s},e2e=(t,e,n,i=1)=>{const r=Jxe.set(t.x/n.width*2-1,-(t.y/n.height)*2+1,i);return r.unproject(e),r},F9=(t,e,n,i)=>{const r=$xe(Zxe.copy(t),n,i);let s=0;for(let o=0;o<2;++o){const a=Kxe.copy(r).setComponent(o,r.getComponent(o)+e),l=e2e(a,n,i,a.z);s=Math.max(s,t.distanceTo(l))}return s},tL=new Ze,nL=new Ze,iL=new Ze,uv=new Ze,Zw=new Ze,Cf=new Ze,rL=new Ze,sL=new Ze,Sf=new di,$w=new di,oL=new $,aL=new $,lL=new $,cL=new $,vp=new $(1,0,0),_p=new $(0,1,0),yp=new $(0,0,1),t2e=R.exports.forwardRef(({matrix:t,onDragStart:e,onDrag:n,onDragEnd:i,autoTransform:r=!0,anchor:s,disableAxes:o=!1,disableSliders:a=!1,disableRotations:l=!1,activeAxes:c=[!0,!0,!0],offset:u=[0,0,0],rotation:h=[0,0,0],scale:f=1,lineWidth:d=4,fixed:p=!1,translationLimits:m,rotationLimits:g,depthTest:_=!0,axisColors:y=["#ff2060","#20df80","#2080ff"],hoveredColor:x="#ffff40",displayValues:E=!0,opacity:w=1,visible:S=!0,userData:b,children:M},T)=>{Dr({MeshLine:Iz,MeshLineMaterial:Tz});const B=Te(G=>G.invalidate),L=R.exports.useRef(null),F=R.exports.useRef(null),U=R.exports.useRef(null),k=R.exports.useRef(null),X=R.exports.useRef([0,0,0]);R.exports.useLayoutEffect(()=>{!s||(k.current.updateWorldMatrix(!0,!0),uv.copy(k.current.matrixWorld).invert(),Sf.makeEmpty(),k.current.traverse(G=>{!G.geometry||(G.geometry.boundingBox||G.geometry.computeBoundingBox(),Cf.copy(G.matrixWorld).premultiply(uv),$w.copy(G.geometry.boundingBox),$w.applyMatrix4(Cf),Sf.union($w))}),oL.copy(Sf.max).add(Sf.min).multiplyScalar(.5),aL.copy(Sf.max).sub(Sf.min).multiplyScalar(.5),lL.copy(aL).multiply(new $(...s)).add(oL),cL.set(...u).add(lL),U.current.position.copy(cL),B())});const Y=R.exports.useMemo(()=>({onDragStart:G=>{tL.copy(F.current.matrix),nL.copy(F.current.matrixWorld),e&&e(G),B()},onDrag:G=>{iL.copy(L.current.matrixWorld),uv.copy(iL).invert(),Zw.copy(nL).premultiply(G),Cf.copy(Zw).premultiply(uv),rL.copy(tL).invert(),sL.copy(Cf).multiply(rL),r&&F.current.matrix.copy(Cf),n&&n(Cf,sL,Zw,G),B()},onDragEnd:()=>{i&&i(),B()},translation:X,translationLimits:m,rotationLimits:g,axisColors:y,hoveredColor:x,opacity:w,scale:f,lineWidth:d,fixed:p,displayValues:E,depthTest:_,userData:b}),[e,n,i,X,m,g,_,f,d,p,...y,x,w,E,b,r]),Z=new $;return Ct(G=>{if(p){const H=F9(U.current.getWorldPosition(Z),f,G.camera,G.size);if(U.current){var O,z,Q;(((O=U.current)==null?void 0:O.scale.x)!==H||((z=U.current)==null?void 0:z.scale.y)!==H||((Q=U.current)==null?void 0:Q.scale.z)!==H)&&(U.current.scale.setScalar(H),G.invalidate())}}}),R.exports.useImperativeHandle(T,()=>F.current,[]),R.exports.createElement(Bx.Provider,{value:Y},se("group",{ref:L,children:vt("group",{ref:F,matrix:t,matrixAutoUpdate:!1,children:[vt("group",{visible:S,ref:U,position:u,rotation:h,children:[!o&&c[0]&&se(Vw,{axis:0,direction:vp}),!o&&c[1]&&se(Vw,{axis:1,direction:_p}),!o&&c[2]&&se(Vw,{axis:2,direction:yp}),!a&&c[0]&&c[1]&&se(Ww,{axis:2,dir1:vp,dir2:_p}),!a&&c[0]&&c[2]&&se(Ww,{axis:1,dir1:yp,dir2:vp}),!a&&c[2]&&c[1]&&se(Ww,{axis:0,dir1:_p,dir2:yp}),!l&&c[0]&&c[1]&&se(Kw,{axis:2,dir1:vp,dir2:_p}),!l&&c[0]&&c[2]&&se(Kw,{axis:1,dir1:yp,dir2:vp}),!l&&c[2]&&c[1]&&se(Kw,{axis:0,dir1:_p,dir2:yp})]}),se("group",{ref:k,children:M})]})}))}),n2e=Object.freeze(Object.defineProperty({__proto__:null,Html:dx,CycleRaycast:hfe,useCursor:ffe,Loader:pfe,Scroll:vfe,ScrollControls:mfe,useScroll:nI,PresentationControls:H0e,KeyboardControls:W0e,useKeyboardControls:j0e,Select:e1e,useSelect:t1e,Billboard:_z,QuadraticBezierLine:i1e,CubicBezierLine:r1e,CatmullRomLine:s1e,Line:Cc,PositionalAudio:o1e,Text:W1e,Text3D:Y1e,Effects:J1e,isWebGL2Available:q1e,GradientTexture:K1e,Image:tAe,Edges:nAe,Trail:sAe,useTrail:Rz,Sampler:oAe,useSurfaceSampler:Pz,ComputedAttribute:aAe,Clone:yS,MarchingCube:UAe,MarchingCubes:kAe,MarchingPlane:OAe,Decal:GAe,OrthographicCamera:kz,PerspectiveCamera:zAe,CubeCamera:QAe,DeviceOrientationControls:HAe,FlyControls:VAe,MapControls:WAe,OrbitControls:jAe,TrackballControls:XAe,ArcballControls:YAe,TransformControls:dve,PointerLockControls:pve,FirstPersonControls:mve,GizmoHelper:vve,useGizmoContext:Ix,GizmoViewcube:Cve,GizmoViewport:Sve,useCubeTexture:Zz,useFBX:UI,useGLTF:OI,useKTX2:NI,useProgress:iG,IsObject:Km,useTexture:bh,useVideoTexture:bve,Stats:Bve,useDepthBuffer:Rve,useAspect:Pve,useCamera:Yz,useDetectGPU:Ove,useHelper:Nve,useBVH:w_e,useContextBridge:M_e,useAnimations:C_e,useFBO:GI,useIntersect:S_e,useBoxProjectedEnv:P_e,BBAnchor:D_e,CurveModifier:F_e,MeshDistortMaterial:U_e,MeshWobbleMaterial:N_e,MeshReflectorMaterial:z_e,MeshRefractionMaterial:V_e,PointMaterial:W_e,PointMaterialImpl:h9,shaderMaterial:a0,softShadows:X_e,Box:Y_e,Capsule:uye,Circle:q_e,Cone:J_e,Cylinder:K_e,Dodecahedron:aye,Extrude:lye,Icosahedron:sye,Lathe:cye,Octahedron:oye,Plane:f9,Polyhedron:rye,Ring:iye,Sphere:Z_e,Tetrahedron:nye,Torus:eye,TorusKnot:tye,Tube:$_e,RoundedBox:fye,ScreenQuad:pye,Center:mye,Bounds:gye,useBounds:vye,CameraShake:_ye,Float:yye,Stage:Cye,Backdrop:bye,Shadow:Iye,ContactShadows:A9,AccumulativeShadows:Dye,RandomizedLight:Fye,accumulativeContext:WI,Reflector:kye,SpotLight:Oye,Environment:m9,EnvironmentCube:VI,EnvironmentMap:Tx,EnvironmentPortal:p9,useEnvironment:HI,Lightformer:Nye,Sky:Gye,calcPosFromAngles:g9,Stars:Hye,Cloud:Wye,Sparkles:Jye,useMatcapTexture:exe,useNormalTexture:ixe,Point:sxe,Points:oxe,PointsBuffer:w9,PositionPoint:x9,Instance:T9,Instances:B9,Merged:dxe,Segment:mxe,SegmentObject:P9,Segments:pxe,Detailed:Axe,Preload:gxe,BakeShadows:vxe,meshBounds:_xe,AdaptiveDpr:yxe,AdaptiveEvents:xxe,PerformanceMonitor:Exe,usePerformanceMonitor:wxe,RenderTexture:Mxe,Mask:Sxe,useMask:bxe,View:Bxe,PivotControls:t2e,calculateScaleFactor:F9},Symbol.toStringTag,{value:"Module"})),i2e=Ud(n2e);var r2e=Qe&&Qe.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),s2e=Qe&&Qe.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o2e=Qe&&Qe.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&r2e(e,t,n);return s2e(e,t),e};Object.defineProperty($3,"__esModule",{value:!0});const uu=o2e(R.exports),a2e=i2e,l2e={position:"absolute",bottom:"5%",width:"200px",left:"calc(50% - 100px)",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"white",textAlign:"center",fontFamily:"sans-serif",padding:"10px",userSelect:"none",borderRadius:"5px"};function c2e({onInteract:t,placementType:e}){const[n,i]=(0,uu.useState)(!0),[r,s]=(0,uu.useState)(!1);return(0,uu.useLayoutEffect)(()=>{t(n)},[n]),(0,uu.useEffect)(()=>{s(!0)},[]),!r||e==="placement-only"&&!n?null:uu.default.createElement(a2e.Html,{fullscreen:!0,style:{left:"0px",top:"0px"}},uu.default.createElement("div",{style:{width:"100%",height:"100%",position:"absolute",backgroundColor:"rgba(0, 0, 0, 0.1)"}},uu.default.createElement("div",{id:"ZapparPlacementUIHelper",role:"button",style:l2e,tabIndex:0,onKeyPress:()=>{i(o=>!o)},onClick:()=>{i(o=>!o)}},"Tap here to",n?" place ":" pick up ","the object")))}$3.default=c2e;var u2e=Qe&&Qe.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),h2e=Qe&&Qe.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),L9=Qe&&Qe.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&u2e(e,t,n);return h2e(e,t),e},Rx=Qe&&Qe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Z3,"__esModule",{value:!0});const k9=L9(Es()),ho=L9(R.exports),U9=kc,f2e=Rx(Lc),d2e=Rx(Ch),p2e=Rx($3),m2e=Rx(T1),{InstantWorldAnchorGroup:A2e}=k9;(0,U9.extend)({InstantWorldAnchorGroup:A2e});const g2e=(0,ho.forwardRef)((t,e)=>{const{camera:n,placementMode:i,children:r,placementCameraOffset:s,pipeline:o,placementUI:a,useInstantTracker:l,enabled:c}=t,u=(0,ho.useRef)(),[h,f]=(0,ho.useState)(i);(0,ho.useEffect)(()=>{f(i)},[i,a]);const[d,p]=(0,ho.useState)();(0,ho.useEffect)(()=>{p(new k9.InstantWorldTracker(o))},[o]);const m=d2e.default.camera(x=>x),g=n!=null&&n.current?n.current:m.object,_=s||{x:0,y:0,z:-5};if((0,ho.useEffect)(()=>{d&&l&&l(d)},[l,d]),(0,U9.useFrame)(()=>{h&&d&&(Array.isArray(_)?d.setAnchorPoseFromCameraOffset(_[0],_[1],_[2]):typeof _=="number"?d.setAnchorPoseFromCameraOffset(0,0,_):_.x!==void 0&&d.setAnchorPoseFromCameraOffset(_.x,_.y,_.z))}),(0,m2e.default)(d,c),!g||!d)return null;const y=a?ho.default.createElement(p2e.default,{placementType:a,onInteract:async x=>f(x)}):void 0;return ho.default.createElement(ho.default.Fragment,null,y,ho.default.createElement("instantWorldAnchorGroup",Object.assign({ref:(0,f2e.default)([u,e]),args:[g,d]},t),r))});Z3.default=g2e;var jI={},v2e=Qe&&Qe.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),_2e=Qe&&Qe.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),O9=Qe&&Qe.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&v2e(e,t,n);return _2e(e,t),e},N9=Qe&&Qe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(jI,"__esModule",{value:!0});const Nr=O9(Es()),Hi=O9(R.exports),y2e=dN(),x2e=N9(Lc),uL=kc,E2e=N9(Ch),w2e=(0,Hi.forwardRef)((t,e)=>{const{userFacing:n=!1,rearCameraMirrorMode:i,userCameraMirrorMode:r,poseMode:s,poseAnchorOrigin:o,pipeline:a,sources:l,makeDefault:c=!0,renderPriority:u=-1,environmentMap:h=!1,permissionRequest:f=!0,onFirstFrame:d,start:p=!0,backgroundImageProps:m}=t,{gl:g,set:_}=(0,uL.useThree)(B=>B),y=Hi.default.useRef(!1),[x]=(0,Hi.useState)(new y2e.CameraTexture),E=(0,Hi.useMemo)(()=>h?new Nr.CameraEnvironmentMap:void 0,[h]);(0,Hi.useEffect)(()=>{m&&x&&Object.assign(x,m)},[m,x]);const w=Hi.default.useRef(),[S,b]=(0,Hi.useState)(!1),M={camera:E2e.default.camera(B=>B)};(0,Hi.useEffect)(()=>{(a||Nr).glContextSet(g.getContext())},[a,g]),(0,Hi.useEffect)(()=>{c&&_(()=>({camera:w.current}))},[c]),(0,Hi.useEffect)(()=>{!w.current||(M.camera.set(w.current),p&&(S||!f?w.current.start(n):Nr.permissionRequestUI().then(B=>{b(B),B?w.current.start(n):Nr.permissionDeniedUI()})))},[n,f,p]),(0,Hi.useEffect)(()=>{if(!!w.current){switch(i){case"poses":w.current.rearCameraMirrorMode=Nr.CameraMirrorMode.Poses;break;case"css":w.current.rearCameraMirrorMode=Nr.CameraMirrorMode.CSS;break;case"none":default:w.current.rearCameraMirrorMode=Nr.CameraMirrorMode.None;break}switch(r){case"none":w.current.userCameraMirrorMode=Nr.CameraMirrorMode.None;break;case"css":w.current.userCameraMirrorMode=Nr.CameraMirrorMode.CSS;break;case"poses":default:w.current.userCameraMirrorMode=Nr.CameraMirrorMode.Poses;break}switch(s){case"anchor-origin":w.current.poseMode=Nr.CameraPoseMode.AnchorOrigin,w.current.poseAnchorOrigin=o;break;case"attitude":w.current.poseMode=Nr.CameraPoseMode.Attitude;break;case"default":default:w.current.poseMode=Nr.CameraPoseMode.Default;break}}},[i,r,s,o]),(0,uL.useFrame)(({gl:B,scene:L})=>{!w.current||(d&&!y.current&&w.current.pipeline.frameNumber()>0&&(y.current=!0,d()),E==null||E.update(B,w.current),w.current.updateFrame(B),u>0&&B.render(L,w.current))},u);const T=Hi.default.useMemo(()=>{const B=new Nr.Camera({pipeline:a,userCameraSource:l==null?void 0:l.userCamera,rearCameraSource:l==null?void 0:l.rearCamera,backgroundTexture:x});return B.updateProjectionMatrix=()=>{},B},[a,l,x]);return Hi.default.createElement(Hi.default.Fragment,null,Hi.default.createElement("primitive",{dispose:null,object:x,attach:"background"}),h&&Hi.default.createElement("primitive",{dispose:null,object:E.environmentMap,attach:"environment"}),Hi.default.createElement("primitive",{dispose:null,object:T,ref:(0,x2e.default)([e,w])}))});jI.default=w2e;var XI={},ju=[],M2e=function(){return ju.some(function(t){return t.activeTargets.length>0})},C2e=function(){return ju.some(function(t){return t.skippedTargets.length>0})},hL="ResizeObserver loop completed with undelivered notifications.",S2e=function(){var t;typeof ErrorEvent=="function"?t=new ErrorEvent("error",{message:hL}):(t=document.createEvent("Event"),t.initEvent("error",!1,!1),t.message=hL),window.dispatchEvent(t)},e1;(function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(e1||(e1={}));var Xu=function(t){return Object.freeze(t)},G9=function(){function t(e,n){this.inlineSize=e,this.blockSize=n,Xu(this)}return t}(),z9=function(){function t(e,n,i,r){return this.x=e,this.y=n,this.width=i,this.height=r,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Xu(this)}return t.prototype.toJSON=function(){var e=this,n=e.x,i=e.y,r=e.top,s=e.right,o=e.bottom,a=e.left,l=e.width,c=e.height;return{x:n,y:i,top:r,right:s,bottom:o,left:a,width:l,height:c}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t}(),YI=function(t){return t instanceof SVGElement&&"getBBox"in t},Q9=function(t){if(YI(t)){var e=t.getBBox(),n=e.width,i=e.height;return!n&&!i}var r=t,s=r.offsetWidth,o=r.offsetHeight;return!(s||o||t.getClientRects().length)},fL=function(t){var e,n;if(t instanceof Element)return!0;var i=(n=(e=t)===null||e===void 0?void 0:e.ownerDocument)===null||n===void 0?void 0:n.defaultView;return!!(i&&t instanceof i.Element)},b2e=function(t){switch(t.tagName){case"INPUT":if(t.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},nm=typeof window<"u"?window:{},hv=new WeakMap,dL=/auto|scroll/,I2e=/^tb|vertical/,T2e=/msie|trident/i.test(nm.navigator&&nm.navigator.userAgent),jo=function(t){return parseFloat(t||"0")},pd=function(t,e,n){return t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=!1),new G9((n?e:t)||0,(n?t:e)||0)},pL=Xu({devicePixelContentBoxSize:pd(),borderBoxSize:pd(),contentBoxSize:pd(),contentRect:new z9(0,0,0,0)}),H9=function(t,e){if(e===void 0&&(e=!1),hv.has(t)&&!e)return hv.get(t);if(Q9(t))return hv.set(t,pL),pL;var n=getComputedStyle(t),i=YI(t)&&t.ownerSVGElement&&t.getBBox(),r=!T2e&&n.boxSizing==="border-box",s=I2e.test(n.writingMode||""),o=!i&&dL.test(n.overflowY||""),a=!i&&dL.test(n.overflowX||""),l=i?0:jo(n.paddingTop),c=i?0:jo(n.paddingRight),u=i?0:jo(n.paddingBottom),h=i?0:jo(n.paddingLeft),f=i?0:jo(n.borderTopWidth),d=i?0:jo(n.borderRightWidth),p=i?0:jo(n.borderBottomWidth),m=i?0:jo(n.borderLeftWidth),g=h+c,_=l+u,y=m+d,x=f+p,E=a?t.offsetHeight-x-t.clientHeight:0,w=o?t.offsetWidth-y-t.clientWidth:0,S=r?g+y:0,b=r?_+x:0,M=i?i.width:jo(n.width)-S-w,T=i?i.height:jo(n.height)-b-E,B=M+g+w+y,L=T+_+E+x,F=Xu({devicePixelContentBoxSize:pd(Math.round(M*devicePixelRatio),Math.round(T*devicePixelRatio),s),borderBoxSize:pd(B,L,s),contentBoxSize:pd(M,T,s),contentRect:new z9(h,l,M,T)});return hv.set(t,F),F},V9=function(t,e,n){var i=H9(t,n),r=i.borderBoxSize,s=i.contentBoxSize,o=i.devicePixelContentBoxSize;switch(e){case e1.DEVICE_PIXEL_CONTENT_BOX:return o;case e1.BORDER_BOX:return r;default:return s}},W9=function(){function t(e){var n=H9(e);this.target=e,this.contentRect=n.contentRect,this.borderBoxSize=Xu([n.borderBoxSize]),this.contentBoxSize=Xu([n.contentBoxSize]),this.devicePixelContentBoxSize=Xu([n.devicePixelContentBoxSize])}return t}(),j9=function(t){if(Q9(t))return 1/0;for(var e=0,n=t.parentNode;n;)e+=1,n=n.parentNode;return e},B2e=function(){var t=1/0,e=[];ju.forEach(function(o){if(o.activeTargets.length!==0){var a=[];o.activeTargets.forEach(function(c){var u=new W9(c.target),h=j9(c.target);a.push(u),c.lastReportedSize=V9(c.target,c.observedBox),h<t&&(t=h)}),e.push(function(){o.callback.call(o.observer,a,o.observer)}),o.activeTargets.splice(0,o.activeTargets.length)}});for(var n=0,i=e;n<i.length;n++){var r=i[n];r()}return t},mL=function(t){ju.forEach(function(n){n.activeTargets.splice(0,n.activeTargets.length),n.skippedTargets.splice(0,n.skippedTargets.length),n.observationTargets.forEach(function(r){r.isActive()&&(j9(r.target)>t?n.activeTargets.push(r):n.skippedTargets.push(r))})})},R2e=function(){var t=0;for(mL(t);M2e();)t=B2e(),mL(t);return C2e()&&S2e(),t>0},eM,X9=[],P2e=function(){return X9.splice(0).forEach(function(t){return t()})},D2e=function(t){if(!eM){var e=0,n=document.createTextNode(""),i={characterData:!0};new MutationObserver(function(){return P2e()}).observe(n,i),eM=function(){n.textContent=""+(e?e--:e++)}}X9.push(t),eM()},F2e=function(t){D2e(function(){requestAnimationFrame(t)})},Jv=0,L2e=function(){return!!Jv},k2e=250,U2e={attributes:!0,characterData:!0,childList:!0,subtree:!0},AL=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],gL=function(t){return t===void 0&&(t=0),Date.now()+t},tM=!1,O2e=function(){function t(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return t.prototype.run=function(e){var n=this;if(e===void 0&&(e=k2e),!tM){tM=!0;var i=gL(e);F2e(function(){var r=!1;try{r=R2e()}finally{if(tM=!1,e=i-gL(),!L2e())return;r?n.run(1e3):e>0?n.run(e):n.start()}})}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var e=this,n=function(){return e.observer&&e.observer.observe(document.body,U2e)};document.body?n():nm.addEventListener("DOMContentLoaded",n)},t.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),AL.forEach(function(n){return nm.addEventListener(n,e.listener,!0)}))},t.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),AL.forEach(function(n){return nm.removeEventListener(n,e.listener,!0)}),this.stopped=!0)},t}(),SS=new O2e,vL=function(t){!Jv&&t>0&&SS.start(),Jv+=t,!Jv&&SS.stop()},N2e=function(t){return!YI(t)&&!b2e(t)&&getComputedStyle(t).display==="inline"},G2e=function(){function t(e,n){this.target=e,this.observedBox=n||e1.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var e=V9(this.target,this.observedBox,!0);return N2e(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},t}(),z2e=function(){function t(e,n){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=n}return t}(),fv=new WeakMap,_L=function(t,e){for(var n=0;n<t.length;n+=1)if(t[n].target===e)return n;return-1},dv=function(){function t(){}return t.connect=function(e,n){var i=new z2e(e,n);fv.set(e,i)},t.observe=function(e,n,i){var r=fv.get(e),s=r.observationTargets.length===0;_L(r.observationTargets,n)<0&&(s&&ju.push(r),r.observationTargets.push(new G2e(n,i&&i.box)),vL(1),SS.schedule())},t.unobserve=function(e,n){var i=fv.get(e),r=_L(i.observationTargets,n),s=i.observationTargets.length===1;r>=0&&(s&&ju.splice(ju.indexOf(i),1),i.observationTargets.splice(r,1),vL(-1))},t.disconnect=function(e){var n=this,i=fv.get(e);i.observationTargets.slice().forEach(function(r){return n.unobserve(e,r.target)}),i.activeTargets.splice(0,i.activeTargets.length)},t}(),Q2e=function(){function t(e){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof e!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");dv.connect(this,e)}return t.prototype.observe=function(e,n){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!fL(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");dv.observe(this,e,n)},t.prototype.unobserve=function(e){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!fL(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");dv.unobserve(this,e)},t.prototype.disconnect=function(){dv.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t}();const H2e=Object.freeze(Object.defineProperty({__proto__:null,ResizeObserver:Q2e,ResizeObserverEntry:W9,ResizeObserverSize:G9},Symbol.toStringTag,{value:"Module"})),V2e=Ud(H2e);var W2e=Qe&&Qe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(XI,"__esModule",{value:!0});const j2e=W2e(R.exports),X2e=kc,Y2e=V2e,q2e=t=>{const{children:e}=t;return j2e.default.createElement(X2e.Canvas,Object.assign({flat:!0,resize:{polyfill:Y2e.ResizeObserver},linear:!0,dpr:window.devicePixelRatio,id:"zapparCanvas"},t,{gl:Object.assign({antialias:!1},t.gl)}),e)};XI.default=q2e;var qI={},J2e=Qe&&Qe.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),K2e=Qe&&Qe.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Z2e=Qe&&Qe.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&J2e(e,t,n);return K2e(e,t),e};Object.defineProperty(qI,"__esModule",{value:!0});const $2e=R.exports,eEe=Z2e(Es());function tEe(t){const{style:e,onLoad:n}=t;return(0,$2e.useEffect)(()=>{const i=new eEe.DefaultLoaderUI({style:e,onLoad:n});return()=>i.dispose()},[t]),null}qI.default=tEe;var JI={},nEe=Qe&&Qe.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),iEe=Qe&&Qe.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),rEe=Qe&&Qe.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&nEe(e,t,n);return iEe(e,t),e};Object.defineProperty(JI,"__esModule",{value:!0});const yL=rEe(Es()),xL=R.exports,sEe=t=>{const{fallback:e}=t,[n,i]=(0,xL.useState)(!0);return(0,xL.useEffect)(()=>{i(!yL.browserIncompatible()),!n&&!e&&yL.browserIncompatibleUI()},[]),e&&!n?e:null};JI.default=sEe;var KI={},oEe=Qe&&Qe.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),aEe=Qe&&Qe.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Y9=Qe&&Qe.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&oEe(e,t,n);return aEe(e,t),e},lEe=Qe&&Qe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(KI,"__esModule",{value:!0});const cEe=Y9(Es()),pv=Y9(R.exports),uEe=lEe(Lc),hEe=(0,pv.forwardRef)((t,e)=>{const{children:n,imageTarget:i}=t,r=pv.default.useMemo(()=>new cEe.TargetImagePreviewMesh(i),[i]),s=pv.default.useRef();return pv.default.createElement("primitive",Object.assign({object:r,ref:(0,uEe.default)([s,e])},t),n)});KI.default=hEe;(function(t){var e=Qe&&Qe.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(t,"__esModule",{value:!0}),t.TargetImagePreviewMesh=t.BrowserCompatibility=t.Loader=t.ZapparCanvas=t.ZapparCamera=t.InstantTracker=t.ImageTracker=t.HeadMaskMesh=t.FaceTracker=t.FaceLandmark=t.FaceBufferGeometry=t.SequenceSource=t.setLogLevel=t.LogLevel=t.Pipeline=t.browserIncompatible=void 0;const n=e(Eb);console.log(`Zappar for React Three v${n.default}`);var i=Es();Object.defineProperty(t,"browserIncompatible",{enumerable:!0,get:function(){return i.browserIncompatible}}),Object.defineProperty(t,"Pipeline",{enumerable:!0,get:function(){return i.Pipeline}}),Object.defineProperty(t,"LogLevel",{enumerable:!0,get:function(){return i.LogLevel}}),Object.defineProperty(t,"setLogLevel",{enumerable:!0,get:function(){return i.setLogLevel}}),Object.defineProperty(t,"SequenceSource",{enumerable:!0,get:function(){return i.SequenceSource}});var r=N3;Object.defineProperty(t,"FaceBufferGeometry",{enumerable:!0,get:function(){return e(r).default}});var s=j3;Object.defineProperty(t,"FaceLandmark",{enumerable:!0,get:function(){return e(s).default}});var o=X3;Object.defineProperty(t,"FaceTracker",{enumerable:!0,get:function(){return e(o).default}});var a=q3;Object.defineProperty(t,"HeadMaskMesh",{enumerable:!0,get:function(){return e(a).default}});var l=J3;Object.defineProperty(t,"ImageTracker",{enumerable:!0,get:function(){return e(l).default}});var c=Z3;Object.defineProperty(t,"InstantTracker",{enumerable:!0,get:function(){return e(c).default}});var u=jI;Object.defineProperty(t,"ZapparCamera",{enumerable:!0,get:function(){return e(u).default}});var h=XI;Object.defineProperty(t,"ZapparCanvas",{enumerable:!0,get:function(){return e(h).default}});var f=qI;Object.defineProperty(t,"Loader",{enumerable:!0,get:function(){return e(f).default}});var d=JI;Object.defineProperty(t,"BrowserCompatibility",{enumerable:!0,get:function(){return e(d).default}});var p=KI;Object.defineProperty(t,"TargetImagePreviewMesh",{enumerable:!0,get:function(){return e(p).default}})})(Iv);function fEe(){R.exports.useState(0);let[t,e]=R.exports.useState(!0);return vt(vs,{children:[vt(Iv.ZapparCanvas,{children:[se(Iv.ZapparCamera,{}),se(Iv.InstantTracker,{placementMode:t,placementCameraOffset:[0,0,-5],children:vt("mesh",{children:[se("sphereBufferGeometry",{}),se("meshStandardMaterial",{color:"hotpink"})]})}),se("directionalLight",{position:[2.5,8,5],intensity:1.5})]}),vt("div",{id:"zappar-placement-ui",onClick:()=>{e(n=>!n)},onKeyDown:()=>{e(n=>!n)},role:"button",tabIndex:0,children:["Tap here to",t?" place ":" pick up ","the object"]})]})}nM.createRoot(document.getElementById("root")).render(se(gv.StrictMode,{children:se(fEe,{})}));
